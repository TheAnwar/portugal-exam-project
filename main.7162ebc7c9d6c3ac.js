"use strict";(self.webpackChunkexam=self.webpackChunkexam||[]).push([[179],{2011:(mt,Te,V)=>{V.d(Te,{Dh:()=>ve,GT:()=>fe,cc:()=>qe,hO:()=>Je,on:()=>re,pX:()=>ue,xv:()=>we});var I=V(4650),j=V(9260),p=V(2122);mt=V.hmd(mt);const ae=["ngOnDestroy"],ue=($e,He,Ye,Ne={})=>new Proxy($e,{get:(Ue,Be)=>Ye.runOutsideAngular(()=>{var ot;if($e[Be])return!(null===(ot=Ne?.spy)||void 0===ot)&&ot.get&&Ne.spy.get(Be,$e[Be]),$e[Be];if(ae.indexOf(Be)>-1)return()=>{};const pe=He.toPromise().then(Ce=>{const Fe=Ce&&Ce[Be];return"function"==typeof Fe?Fe.bind(Ce):Fe&&Fe.then?Fe.then(ut=>Ye.run(()=>ut)):Ye.run(()=>Fe)});return new Proxy(()=>{},{get:(Ce,Fe)=>pe[Fe],apply:(Ce,Fe,ut)=>pe.then(nt=>{var dt;const ht=nt&&nt(...ut);return!(null===(dt=Ne?.spy)||void 0===dt)&&dt.apply&&Ne.spy.apply(Be,ut,ht),ht})})})}),fe=($e,He)=>{He.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Ne=>{Object.defineProperty($e.prototype,Ne,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Ne))})})};class Ee{constructor(He){return He}}const ve=new I.OlP("angularfire2.app.options"),we=new I.OlP("angularfire2.app.name");function re($e,He,Ye){const Ue="object"==typeof Ye&&Ye||{};Ue.name=Ue.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const ot=j.Z.apps.filter(pe=>pe&&pe.name===Ue.name)[0]||He.runOutsideAngular(()=>j.Z.initializeApp($e,Ue));try{JSON.stringify($e)!==JSON.stringify(ot.options)&&te("error",`${ot.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(ot)}const te=($e,...He)=>{(0,I.X6Q)()&&typeof console<"u"&&console[$e](...He)},ce={provide:Ee,useFactory:re,deps:[ve,I.R0b,[new I.FiY,we]]};let Je=(()=>{class $e{constructor(Ye){j.Z.registerVersion("angularfire",p.q4.full,"core"),j.Z.registerVersion("angularfire",p.q4.full,"app-compat"),j.Z.registerVersion("angular",I.q4F.full,Ye.toString())}static initializeApp(Ye,Ne){return{ngModule:$e,providers:[{provide:ve,useValue:Ye},{provide:we,useValue:Ne}]}}}return $e.\u0275fac=function(Ye){return new(Ye||$e)(I.LFG(I.Lbi))},$e.\u0275mod=I.oAB({type:$e}),$e.\u0275inj=I.cJS({providers:[ce]}),$e})();function qe($e,He,Ye,Ne,Ue){const[,Be,ot]=globalThis.\u0275AngularfireInstanceCache.find(pe=>pe[0]===$e)||[];if(Be)return function st($e,He){try{return $e.toString()===He.toString()}catch{return $e===He}}(Ue,ot)||(Oe("error",`${He} was already initialized on the ${Ye} Firebase App with different settings.${vt?" You may need to reload as Firebase is not HMR aware.":""}`),Oe("warn",{is:Ue,was:ot})),Be;{const pe=Ne();return globalThis.\u0275AngularfireInstanceCache.push([$e,pe,Ue]),pe}}const vt=!!mt.hot,Oe=($e,...He)=>{(0,I.X6Q)()&&typeof console<"u"&&console[$e](...He)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(mt,Te,V)=>{V.d(Te,{q4:()=>Wa,iC:()=>En,HU:()=>U,vb:()=>_,JM:()=>v});var I=V(4650),j=V(259),p=V(5861),ae=V(9681),ue=V(2090),fe=V(4859),Ee=V(1877),ve=V(8766);const we="@firebase/installations",re="0.6.4",ce=`w:${re}`,Je="FIS_v2",He=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(A){return A instanceof ue.ZR&&A.code.includes("request-failed")}function Ne({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function Ue(A){return{token:A.token,requestStatus:2,expiresIn:nt(A.expiresIn),creationTime:Date.now()}}function Be(A,R){return ot.apply(this,arguments)}function ot(){return(ot=(0,p.Z)(function*(A,R){const X=(yield R.json()).error;return He.create("request-failed",{requestName:A,serverCode:X.code,serverMessage:X.message,serverStatus:X.status})})).apply(this,arguments)}function pe({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Ce(A,{refreshToken:R}){const B=pe(A);return B.append("Authorization",function dt(A){return`${Je} ${A}`}(R)),B}function Fe(A){return ut.apply(this,arguments)}function ut(){return(ut=(0,p.Z)(function*(A){const R=yield A();return R.status>=500&&R.status<600?A():R})).apply(this,arguments)}function nt(A){return Number(A.replace("s","000"))}function ht(A,R){return De.apply(this,arguments)}function De(){return(De=(0,p.Z)(function*({appConfig:A,heartbeatServiceProvider:R},{fid:B}){const X=Ne(A),ge=pe(A),be=R.getImmediate({optional:!0});if(be){const Vt=yield be.getHeartbeatsHeader();Vt&&ge.append("x-firebase-client",Vt)}const Ot={method:"POST",headers:ge,body:JSON.stringify({fid:B,authVersion:Je,appId:A.appId,sdkVersion:ce})},Bt=yield Fe(()=>fetch(X,Ot));if(Bt.ok){const Vt=yield Bt.json();return{fid:Vt.fid||B,registrationStatus:2,refreshToken:Vt.refreshToken,authToken:Ue(Vt.authToken)}}throw yield Be("Create Installation",Bt)})).apply(this,arguments)}function xe(A){return new Promise(R=>{setTimeout(R,A)})}const Ge=/^[cdef][\w-]{21}$/;function tt(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const B=function ct(A){return function Pe(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return Ge.test(B)?B:""}catch{return""}}function ft(A){return`${A.appName}!${A.appId}`}const yn=new Map;function me(A,R){const B=ft(A);St(B,R),function Mn(A,R){const B=function cn(){return!In&&"BroadcastChannel"in self&&(In=new BroadcastChannel("[Firebase] FID Change"),In.onmessage=A=>{St(A.data.key,A.data.fid)}),In}();B&&B.postMessage({key:A,fid:R}),function Zn(){0===yn.size&&In&&(In.close(),In=null)}()}(B,R)}function St(A,R){const B=yn.get(A);if(B)for(const X of B)X(R)}let In=null;const Pn="firebase-installations-store";let Rr=null;function ar(){return Rr||(Rr=(0,ve.X3)("firebase-installations-database",1,{upgrade:(A,R)=>{0===R&&A.createObjectStore(Pn)}})),Rr}function Ln(A,R){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(A,R){const B=ft(A),ge=(yield ar()).transaction(Pn,"readwrite"),be=ge.objectStore(Pn),We=yield be.get(B);return yield be.put(R,B),yield ge.done,(!We||We.fid!==R.fid)&&me(A,R.fid),R})).apply(this,arguments)}function pt(A){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(A){const R=ft(A),X=(yield ar()).transaction(Pn,"readwrite");yield X.objectStore(Pn).delete(R),yield X.done})).apply(this,arguments)}function wr(A,R){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(A,R){const B=ft(A),ge=(yield ar()).transaction(Pn,"readwrite"),be=ge.objectStore(Pn),We=yield be.get(B),Ot=R(We);return void 0===Ot?yield be.delete(B):yield be.put(Ot,B),yield ge.done,Ot&&(!We||We.fid!==Ot.fid)&&me(A,Ot.fid),Ot})).apply(this,arguments)}function er(A){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(A){let R;const B=yield wr(A.appConfig,X=>{const ge=Nt(X),be=Mt(A,ge);return R=be.registrationPromise,be.installationEntry});return""===B.fid?{installationEntry:yield R}:{installationEntry:B,registrationPromise:R}})).apply(this,arguments)}function Nt(A){return tr(A||{fid:tt(),registrationStatus:0})}function Mt(A,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(He.create("app-offline"))};const B={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},X=function Wt(A,R){return Tn.apply(this,arguments)}(A,B);return{installationEntry:B,registrationPromise:X}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:vn(A)}:{installationEntry:R}}function Tn(){return(Tn=(0,p.Z)(function*(A,R){try{const B=yield ht(A,R);return Ln(A.appConfig,B)}catch(B){throw Ye(B)&&409===B.customData.serverCode?yield pt(A.appConfig):yield Ln(A.appConfig,{fid:R.fid,registrationStatus:0}),B}})).apply(this,arguments)}function vn(A){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(A){let R=yield mr(A.appConfig);for(;1===R.registrationStatus;)yield xe(100),R=yield mr(A.appConfig);if(0===R.registrationStatus){const{installationEntry:B,registrationPromise:X}=yield er(A);return X||B}return R})).apply(this,arguments)}function mr(A){return wr(A,R=>{if(!R)throw He.create("installation-not-found");return tr(R)})}function tr(A){return function ei(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function tn(A,R){return ti.apply(this,arguments)}function ti(){return(ti=(0,p.Z)(function*({appConfig:A,heartbeatServiceProvider:R},B){const X=qt(A,B),ge=Ce(A,B),be=R.getImmediate({optional:!0});if(be){const Vt=yield be.getHeartbeatsHeader();Vt&&ge.append("x-firebase-client",Vt)}const Ot={method:"POST",headers:ge,body:JSON.stringify({installation:{sdkVersion:ce,appId:A.appId}})},Bt=yield Fe(()=>fetch(X,Ot));if(Bt.ok)return Ue(yield Bt.json());throw yield Be("Generate Auth Token",Bt)})).apply(this,arguments)}function qt(A,{fid:R}){return`${Ne(A)}/${R}/authTokens:generate`}function Ut(A){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,p.Z)(function*(A,R=!1){let B;const X=yield wr(A.appConfig,be=>{if(!on(be))throw He.create("not-registered");const We=be.authToken;if(!R&&jn(We))return be;if(1===We.requestStatus)return B=at(A,R),be;{if(!navigator.onLine)throw He.create("app-offline");const Ot=ne(be);return B=Pt(A,Ot),Ot}});return B?yield B:X.authToken})).apply(this,arguments)}function at(A,R){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(A,R){let B=yield _t(A.appConfig);for(;1===B.authToken.requestStatus;)yield xe(100),B=yield _t(A.appConfig);const X=B.authToken;return 0===X.requestStatus?Ut(A,R):X})).apply(this,arguments)}function _t(A){return wr(A,R=>{if(!on(R))throw He.create("not-registered");return function q(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function Pt(A,R){return $t.apply(this,arguments)}function $t(){return($t=(0,p.Z)(function*(A,R){try{const B=yield tn(A,R),X=Object.assign(Object.assign({},R),{authToken:B});return yield Ln(A.appConfig,X),B}catch(B){if(!Ye(B)||401!==B.customData.serverCode&&404!==B.customData.serverCode){const X=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield Ln(A.appConfig,X)}else yield pt(A.appConfig);throw B}})).apply(this,arguments)}function on(A){return void 0!==A&&2===A.registrationStatus}function jn(A){return 2===A.requestStatus&&!function se(A){const R=Date.now();return R<A.creationTime||A.creationTime+A.expiresIn<R+36e5}(A)}function ne(A){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:R})}function z(){return(z=(0,p.Z)(function*(A){const R=A,{installationEntry:B,registrationPromise:X}=yield er(R);return X?X.catch(console.error):Ut(R).catch(console.error),B.fid})).apply(this,arguments)}function ke(){return(ke=(0,p.Z)(function*(A,R=!1){const B=A;return yield gt(B),(yield Ut(B,R)).token})).apply(this,arguments)}function gt(A){return oe.apply(this,arguments)}function oe(){return(oe=(0,p.Z)(function*(A){const{registrationPromise:R}=yield er(A);R&&(yield R)})).apply(this,arguments)}function Ji(A){return He.create("missing-app-config-values",{valueName:A})}const Gi="installations",Ti=A=>{const R=A.getProvider("app").getImmediate(),B=function ir(A){if(!A||!A.options)throw Ji("App Configuration");if(!A.name)throw Ji("App Name");const R=["projectId","apiKey","appId"];for(const B of R)if(!A.options[B])throw Ji(B);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(R);return{app:R,appConfig:B,heartbeatServiceProvider:(0,ae._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},Uo=A=>{const R=A.getProvider("app").getImmediate(),B=(0,ae._getProvider)(R,Gi).getImmediate();return{getId:()=>function Z(A){return z.apply(this,arguments)}(B),getToken:ge=>function ye(A){return ke.apply(this,arguments)}(B,ge)}};(function Ys(){(0,ae._registerComponent)(new fe.wA(Gi,Ti,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",Uo,"PRIVATE"))})(),(0,ae.registerVersion)(we,re),(0,ae.registerVersion)(we,re,"esm2017");const Bo="@firebase/remote-config",Gn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qi{constructor(R,B,X,ge){this.client=R,this.storage=B,this.storageCache=X,this.logger=ge}isCachedDataFresh(R,B){if(!B)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const X=Date.now()-B,ge=X<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${X}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${ge}.`),ge}fetch(R){var B=this;return(0,p.Z)(function*(){const[X,ge]=yield Promise.all([B.storage.getLastSuccessfulFetchTimestampMillis(),B.storage.getLastSuccessfulFetchResponse()]);if(ge&&B.isCachedDataFresh(R.cacheMaxAgeMillis,X))return ge;R.eTag=ge&&ge.eTag;const be=yield B.client.fetch(R),We=[B.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===be.status&&We.push(B.storage.setLastSuccessfulFetchResponse(be)),yield Promise.all(We),be})()}}function Br(A=navigator){return A.languages&&A.languages[0]||A.language}class xi{constructor(R,B,X,ge,be,We){this.firebaseInstallations=R,this.sdkVersion=B,this.namespace=X,this.projectId=ge,this.apiKey=be,this.appId=We}fetch(R){var B=this;return(0,p.Z)(function*(){const[X,ge]=yield Promise.all([B.firebaseInstallations.getId(),B.firebaseInstallations.getToken()]),We=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${B.projectId}/namespaces/${B.namespace}:fetch?key=${B.apiKey}`,Ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},Bt={sdk_version:B.sdkVersion,app_instance_id:X,app_instance_id_token:ge,app_id:B.appId,language_code:Br()},Vt={method:"POST",headers:Ot,body:JSON.stringify(Bt)},an=fetch(We,Vt),Jt=new Promise((_s,fo)=>{R.signal.addEventListener(()=>{const Za=new Error("The operation was aborted.");Za.name="AbortError",fo(Za)})});let Bs;try{yield Promise.race([an,Jt]),Bs=yield an}catch(_s){let fo="fetch-client-network";throw"AbortError"===_s?.name&&(fo="fetch-timeout"),Gn.create(fo,{originalErrorMessage:_s?.message})}let Zr=Bs.status;const ma=Bs.headers.get("ETag")||void 0;let hc,vs;if(200===Bs.status){let _s;try{_s=yield Bs.json()}catch(fo){throw Gn.create("fetch-client-parse",{originalErrorMessage:fo?.message})}hc=_s.entries,vs=_s.state}if("INSTANCE_STATE_UNSPECIFIED"===vs?Zr=500:"NO_CHANGE"===vs?Zr=304:("NO_TEMPLATE"===vs||"EMPTY_CONFIG"===vs)&&(hc={}),304!==Zr&&200!==Zr)throw Gn.create("fetch-status",{httpStatus:Zr});return{status:Zr,eTag:ma,config:hc}})()}}class yr{constructor(R,B){this.client=R,this.storage=B}fetch(R){var B=this;return(0,p.Z)(function*(){const X=(yield B.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return B.attemptFetch(R,X)})()}attemptFetch(R,{throttleEndTimeMillis:B,backoffCount:X}){var ge=this;return(0,p.Z)(function*(){yield function Ca(A,R){return new Promise((B,X)=>{const ge=Math.max(R-Date.now(),0),be=setTimeout(B,ge);A.addEventListener(()=>{clearTimeout(be),X(Gn.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,B);try{const be=yield ge.client.fetch(R);return yield ge.storage.deleteThrottleMetadata(),be}catch(be){if(!function Wn(A){if(!(A instanceof ue.ZR&&A.customData))return!1;const R=Number(A.customData.httpStatus);return 429===R||500===R||503===R||504===R}(be))throw be;const We={throttleEndTimeMillis:Date.now()+(0,ue.$s)(X),backoffCount:X+1};return yield ge.storage.setThrottleMetadata(We),ge.attemptFetch(R,We)}})()}}class _o{constructor(R,B,X,ge,be){this.app=R,this._client=B,this._storageCache=X,this._storage=ge,this._logger=be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ss(A,R){const B=A.target.error||void 0;return Gn.create(R,{originalErrorMessage:B&&B?.message})}const ui="app_namespace_store";class ri{constructor(R,B,X,ge=function Mi(){return new Promise((A,R)=>{try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=X=>{R(Ss(X,"storage-open"))},B.onsuccess=X=>{A(X.target.result)},B.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(ui,{keyPath:"compositeKey"})}}catch(B){R(Gn.create("storage-open",{originalErrorMessage:B?.message}))}})}()){this.appId=R,this.appName=B,this.namespace=X,this.openDbPromise=ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var B=this;return(0,p.Z)(function*(){const X=yield B.openDbPromise;return new Promise((ge,be)=>{const Ot=X.transaction([ui],"readonly").objectStore(ui),Bt=B.createCompositeKey(R);try{const Vt=Ot.get(Bt);Vt.onerror=an=>{be(Ss(an,"storage-get"))},Vt.onsuccess=an=>{const Jt=an.target.result;ge(Jt?Jt.value:void 0)}}catch(Vt){be(Gn.create("storage-get",{originalErrorMessage:Vt?.message}))}})})()}set(R,B){var X=this;return(0,p.Z)(function*(){const ge=yield X.openDbPromise;return new Promise((be,We)=>{const Bt=ge.transaction([ui],"readwrite").objectStore(ui),Vt=X.createCompositeKey(R);try{const an=Bt.put({compositeKey:Vt,value:B});an.onerror=Jt=>{We(Ss(Jt,"storage-set"))},an.onsuccess=()=>{be()}}catch(an){We(Gn.create("storage-set",{originalErrorMessage:an?.message}))}})})()}delete(R){var B=this;return(0,p.Z)(function*(){const X=yield B.openDbPromise;return new Promise((ge,be)=>{const Ot=X.transaction([ui],"readwrite").objectStore(ui),Bt=B.createCompositeKey(R);try{const Vt=Ot.delete(Bt);Vt.onerror=an=>{be(Ss(an,"storage-delete"))},Vt.onsuccess=()=>{ge()}}catch(Vt){be(Gn.create("storage-delete",{originalErrorMessage:Vt?.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class as{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,p.Z)(function*(){const B=R.storage.getLastFetchStatus(),X=R.storage.getLastSuccessfulFetchTimestampMillis(),ge=R.storage.getActiveConfig(),be=yield B;be&&(R.lastFetchStatus=be);const We=yield X;We&&(R.lastSuccessfulFetchTimestampMillis=We);const Ot=yield ge;Ot&&(R.activeConfig=Ot)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function $c(){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Ta(){(0,ae._registerComponent)(new fe.wA("remote-config",function A(R,{instanceIdentifier:B}){const X=R.getProvider("app").getImmediate(),ge=R.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Gn.create("registration-window");if(!(0,ue.hl)())throw Gn.create("indexed-db-unavailable");const{projectId:be,apiKey:We,appId:Ot}=X.options;if(!be)throw Gn.create("registration-project-id");if(!We)throw Gn.create("registration-api-key");if(!Ot)throw Gn.create("registration-app-id");const Bt=new ri(Ot,X.name,B=B||"firebase"),Vt=new as(Bt),an=new Ee.Yd(Bo);an.logLevel=Ee.in.ERROR;const Jt=new xi(ge,ae.SDK_VERSION,B,be,We,Ot),Bs=new yr(Jt,Bt),Zr=new qi(Bs,Bt,Vt,an),ma=new _o(X,Zr,Vt,Bt,an);return function kn(A){const R=(0,ue.m9)(A);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(ma),ma},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Bo,"0.4.4"),(0,ae.registerVersion)(Bo,"0.4.4","esm2017")}();const es="/firebase-messaging-sw.js",Xs="/firebase-cloud-messaging-push-scope",Ri="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sa="google.c.a.c_id",su="google.c.a.c_l",Ru="google.c.a.ts",Oi="google.c.a.e";var Zi=(()=>{return(A=Zi||(Zi={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",Zi;var A})();function Ki(A){const R=new Uint8Array(A);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ou(A){const B=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),X=atob(B),ge=new Uint8Array(X.length);for(let be=0;be<X.length;++be)ge[be]=X.charCodeAt(be);return ge}const us="fcm_token_details_db",wo="fcm_token_object_Store";function Io(A){return jo.apply(this,arguments)}function jo(){return jo=(0,p.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(be=>be.name).includes(us))return null;let R=null;return(yield(0,ve.X3)(us,5,{upgrade:(X=(0,p.Z)(function*(ge,be,We,Ot){var Bt;if(be<2||!ge.objectStoreNames.contains(wo))return;const Vt=Ot.objectStore(wo),an=yield Vt.index("fcmSenderId").get(A);if(yield Vt.clear(),an)if(2===be){const Jt=an;if(!Jt.auth||!Jt.p256dh||!Jt.endpoint)return;R={token:Jt.fcmToken,createTime:null!==(Bt=Jt.createTime)&&void 0!==Bt?Bt:Date.now(),subscriptionOptions:{auth:Jt.auth,p256dh:Jt.p256dh,endpoint:Jt.endpoint,swScope:Jt.swScope,vapidKey:"string"==typeof Jt.vapidKey?Jt.vapidKey:Ki(Jt.vapidKey)}}}else if(3===be){const Jt=an;R={token:Jt.fcmToken,createTime:Jt.createTime,subscriptionOptions:{auth:Ki(Jt.auth),p256dh:Ki(Jt.p256dh),endpoint:Jt.endpoint,swScope:Jt.swScope,vapidKey:Ki(Jt.vapidKey)}}}else if(4===be){const Jt=an;R={token:Jt.fcmToken,createTime:Jt.createTime,subscriptionOptions:{auth:Ki(Jt.auth),p256dh:Ki(Jt.p256dh),endpoint:Jt.endpoint,swScope:Jt.swScope,vapidKey:Ki(Jt.vapidKey)}}}}),function(be,We,Ot,Bt){return X.apply(this,arguments)})})).close(),yield(0,ve.Lj)(us),yield(0,ve.Lj)("fcm_vapid_details_db"),yield(0,ve.Lj)("undefined"),cs(R)?R:null;var X}),jo.apply(this,arguments)}function cs(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:R}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const As="firebase-messaging-store";let Js=null;function eo(){return Js||(Js=(0,ve.X3)("firebase-messaging-database",1,{upgrade:(A,R)=>{0===R&&A.createObjectStore(As)}})),Js}function oa(A){return xs.apply(this,arguments)}function xs(){return(xs=(0,p.Z)(function*(A){const R=zt(A),X=yield(yield eo()).transaction(As).objectStore(As).get(R);if(X)return X;{const ge=yield Io(A.appConfig.senderId);if(ge)return yield Do(A,ge),ge}})).apply(this,arguments)}function Do(A,R){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,p.Z)(function*(A,R){const B=zt(A),ge=(yield eo()).transaction(As,"readwrite");return yield ge.objectStore(As).put(R,B),yield ge.done,R})).apply(this,arguments)}function At(A){return ds.apply(this,arguments)}function ds(){return(ds=(0,p.Z)(function*(A){const R=zt(A),X=(yield eo()).transaction(As,"readwrite");yield X.objectStore(As).delete(R),yield X.done})).apply(this,arguments)}function zt({appConfig:A}){return A.appId}const qn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ms(A,R){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(A,R){const B=yield Ni(A),X=mi(R),ge={method:"POST",headers:B,body:JSON.stringify(X)};let be;try{be=yield(yield fetch(vr(A.appConfig),ge)).json()}catch(We){throw qn.create("token-subscribe-failed",{errorInfo:We?.toString()})}if(be.error)throw qn.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw qn.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function $o(A,R){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(A,R){const B=yield Ni(A),X=mi(R.subscriptionOptions),ge={method:"PATCH",headers:B,body:JSON.stringify(X)};let be;try{be=yield(yield fetch(`${vr(A.appConfig)}/${R.token}`,ge)).json()}catch(We){throw qn.create("token-update-failed",{errorInfo:We?.toString()})}if(be.error)throw qn.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw qn.create("token-update-no-token");return be.token})).apply(this,arguments)}function Gr(A,R){return no.apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(A,R){const X={method:"DELETE",headers:yield Ni(A)};try{const be=yield(yield fetch(`${vr(A.appConfig)}/${R}`,X)).json();if(be.error)throw qn.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ge){throw qn.create("token-unsubscribe-failed",{errorInfo:ge?.toString()})}})).apply(this,arguments)}function vr({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function Ni(A){return pn.apply(this,arguments)}function pn(){return(pn=(0,p.Z)(function*({appConfig:A,installations:R}){const B=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${B}`})})).apply(this,arguments)}function mi({p256dh:A,auth:R,endpoint:B,vapidKey:X}){const ge={web:{endpoint:B,auth:R,p256dh:A}};return X!==Ri&&(ge.web.applicationPubKey=X),ge}const br=6048e5;function Ma(A){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,p.Z)(function*(A){const R=yield hs(A.swRegistration,A.vapidKey),B={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:R.endpoint,auth:Ki(R.getKey("auth")),p256dh:Ki(R.getKey("p256dh"))},X=yield oa(A.firebaseDependencies);if(X){if(ua(X.subscriptionOptions,B))return Date.now()>=X.createTime+br?Qt(A,{token:X.token,createTime:Date.now(),subscriptionOptions:B}):X.token;try{yield Gr(A.firebaseDependencies,X.token)}catch(ge){console.warn(ge)}return au(A.firebaseDependencies,B)}return au(A.firebaseDependencies,B)})).apply(this,arguments)}function aa(A){return nr.apply(this,arguments)}function nr(){return(nr=(0,p.Z)(function*(A){const R=yield oa(A.firebaseDependencies);R&&(yield Gr(A.firebaseDependencies,R.token),yield At(A.firebaseDependencies));const B=yield A.swRegistration.pushManager.getSubscription();return!B||B.unsubscribe()})).apply(this,arguments)}function Qt(A,R){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,p.Z)(function*(A,R){try{const B=yield $o(A.firebaseDependencies,R),X=Object.assign(Object.assign({},R),{token:B,createTime:Date.now()});return yield Do(A.firebaseDependencies,X),B}catch(B){throw yield aa(A),B}})).apply(this,arguments)}function au(A,R){return ro.apply(this,arguments)}function ro(){return(ro=(0,p.Z)(function*(A,R){const X={token:yield Ms(A,R),createTime:Date.now(),subscriptionOptions:R};return yield Do(A,X),X.token})).apply(this,arguments)}function hs(A,R){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(A,R){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ou(R)})})).apply(this,arguments)}function ua(A,R){return R.vapidKey===A.vapidKey&&R.endpoint===A.endpoint&&R.auth===A.auth&&R.p256dh===A.p256dh}function Ra(A){const R={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function Ho(A,R){if(!R.notification)return;A.notification={};const B=R.notification.title;B&&(A.notification.title=B);const X=R.notification.body;X&&(A.notification.body=X);const ge=R.notification.image;ge&&(A.notification.image=ge);const be=R.notification.icon;be&&(A.notification.icon=be)}(R,A),function Me(A,R){R.data&&(A.data=R.data)}(R,A),function ln(A,R){var B,X,ge,be,We;if(!(R.fcmOptions||null!==(B=R.notification)&&void 0!==B&&B.click_action))return;A.fcmOptions={};const Ot=null!==(ge=null===(X=R.fcmOptions)||void 0===X?void 0:X.link)&&void 0!==ge?ge:null===(be=R.notification)||void 0===be?void 0:be.click_action;Ot&&(A.fcmOptions.link=Ot);const Bt=null===(We=R.fcmOptions)||void 0===We?void 0:We.analytics_label;Bt&&(A.fcmOptions.analyticsLabel=Bt)}(R,A),R}function Oa(A){return"object"==typeof A&&!!A&&Sa in A}function Na(A,R){const B=[];for(let X=0;X<A.length;X++)B.push(A.charAt(X)),X<R.length&&B.push(R.charAt(X));return B.join("")}function ca(A){return qn.create("missing-app-config-values",{valueName:A})}Na("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Na("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fs{constructor(R,B,X){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ge=function Tr(A){if(!A||!A.options)throw ca("App Configuration Object");if(!A.name)throw ca("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:B}=A;for(const X of R)if(!B[X])throw ca(X);return{appName:A.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:ge,installations:B,analyticsProvider:X}}_delete(){return Promise.resolve()}}function ki(A){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(es,{scope:Xs}),A.swRegistration.update().catch(()=>{})}catch(R){throw qn.create("failed-service-worker-registration",{browserErrorMessage:R?.message})}})).apply(this,arguments)}function bo(A,R){return io.apply(this,arguments)}function io(){return(io=(0,p.Z)(function*(A,R){if(!R&&!A.swRegistration&&(yield ki(A)),R||!A.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");A.swRegistration=R}})).apply(this,arguments)}function Co(A,R){return Os.apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(A,R){R?A.vapidKey=R:A.vapidKey||(A.vapidKey=Ri)})).apply(this,arguments)}function ii(){return(ii=(0,p.Z)(function*(A,R){if(!navigator)throw qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qn.create("permission-blocked");return yield Co(A,R?.vapidKey),yield bo(A,R?.serviceWorkerRegistration),Ma(A)})).apply(this,arguments)}function ts(A,R,B){return ps.apply(this,arguments)}function ps(){return(ps=(0,p.Z)(function*(A,R,B){const X=Fi(R);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(X,{message_id:B[Sa],message_name:B[su],message_time:B[Ru],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fi(A){switch(A){case Zi.NOTIFICATION_CLICKED:return"notification_open";case Zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function To(){return(To=(0,p.Z)(function*(A,R){const B=R.data;if(!B.isFirebaseMessaging)return;A.onMessageHandler&&B.messageType===Zi.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Ra(B)):A.onMessageHandler.next(Ra(B)));const X=B.data;Oa(X)&&"1"===X[Oi]&&(yield ts(A,B.messageType,X))})).apply(this,arguments)}const So="@firebase/messaging",gs=A=>{const R=new fs(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",B=>function uu(A,R){return To.apply(this,arguments)}(R,B)),R},Ns=A=>{const R=A.getProvider("messaging").getImmediate();return{getToken:X=>function kr(A,R){return ii.apply(this,arguments)}(R,X)}};function Ps(){return so.apply(this,arguments)}function so(){return(so=(0,p.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pa(){(0,ae._registerComponent)(new fe.wA("messaging",gs,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",Ns,"PRIVATE")),(0,ae.registerVersion)(So,"0.12.4"),(0,ae.registerVersion)(So,"0.12.4","esm2017")}();const oo="analytics",zr="firebase_id",Go="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Va="https://www.googletagmanager.com/gtag/js",gn=new Ee.Yd("@firebase/analytics");function Fr(A){return Promise.all(A.map(R=>R.catch(B=>B)))}function Ua(A,R){const B=document.createElement("script");B.src=`${Va}?l=${A}&id=${R}`,B.async=!0,document.head.appendChild(B)}function Wo(A,R,B,X,ge,be){return qo.apply(this,arguments)}function qo(){return(qo=(0,p.Z)(function*(A,R,B,X,ge,be){const We=X[ge];try{if(We)yield R[We];else{const Bt=(yield Fr(B)).find(Vt=>Vt.measurementId===ge);Bt&&(yield R[Bt.appId])}}catch(Ot){gn.error(Ot)}A("config",ge,be)})).apply(this,arguments)}function T(A,R,B,X,ge){return F.apply(this,arguments)}function F(){return(F=(0,p.Z)(function*(A,R,B,X,ge){try{let be=[];if(ge&&ge.send_to){let We=ge.send_to;Array.isArray(We)||(We=[We]);const Ot=yield Fr(B);for(const Bt of We){const Vt=Ot.find(Jt=>Jt.measurementId===Bt),an=Vt&&R[Vt.appId];if(!an){be=[];break}be.push(an)}}0===be.length&&(be=Object.values(R)),yield Promise.all(be),A("event",X,ge||{})}catch(be){gn.error(be)}})).apply(this,arguments)}function J(A){const R=window.document.getElementsByTagName("script");for(const B of Object.values(R))if(B.src&&B.src.includes(Va)&&B.src.includes(A))return B;return null}const Re=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_n=new class An{constructor(R={},B=1e3){this.throttleMetadata=R,this.intervalMillis=B}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,B){this.throttleMetadata[R]=B}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function rn(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function _r(A){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(A){var R;const{appId:B,apiKey:X}=A,ge={method:"GET",headers:rn(X)},be=Go.replace("{app-id}",B),We=yield fetch(be,ge);if(200!==We.status&&304!==We.status){let Ot="";try{const Bt=yield We.json();null!==(R=Bt.error)&&void 0!==R&&R.message&&(Ot=Bt.error.message)}catch{}throw Re.create("config-fetch-failed",{httpStatus:We.status,responseMessage:Ot})}return We.json()})).apply(this,arguments)}function Yn(A){return vi.apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(A,R=_n,B){const{appId:X,apiKey:ge,measurementId:be}=A.options;if(!X)throw Re.create("no-app-id");if(!ge){if(be)return{measurementId:be,appId:X};throw Re.create("no-api-key")}const We=R.getThrottleMetadata(X)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ot=new uo;return setTimeout((0,p.Z)(function*(){Ot.abort()}),void 0!==B?B:6e4),_i({appId:X,apiKey:ge,measurementId:be},We,Ot,R)})).apply(this,arguments)}function _i(A,R,B){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,p.Z)(function*(A,{throttleEndTimeMillis:R,backoffCount:B},X,ge=_n){var be;const{appId:We,measurementId:Ot}=A;try{yield Ei(X,R)}catch(Bt){if(Ot)return gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${Bt?.message}]`),{appId:We,measurementId:Ot};throw Bt}try{const Bt=yield _r(A);return ge.deleteThrottleMetadata(We),Bt}catch(Bt){const Vt=Bt;if(!ao(Vt)){if(ge.deleteThrottleMetadata(We),Ot)return gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${Vt?.message}]`),{appId:We,measurementId:Ot};throw Bt}const an=503===Number(null===(be=Vt?.customData)||void 0===be?void 0:be.httpStatus)?(0,ue.$s)(B,ge.intervalMillis,30):(0,ue.$s)(B,ge.intervalMillis),Jt={throttleEndTimeMillis:Date.now()+an,backoffCount:B+1};return ge.setThrottleMetadata(We,Jt),gn.debug(`Calling attemptFetch again in ${an} millis`),_i(A,Jt,X,ge)}})).apply(this,arguments)}function Ei(A,R){return new Promise((B,X)=>{const ge=Math.max(R-Date.now(),0),be=setTimeout(B,ge);A.addEventListener(()=>{clearTimeout(be),X(Re.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function ao(A){if(!(A instanceof ue.ZR&&A.customData))return!1;const R=Number(A.customData.httpStatus);return 429===R||500===R||503===R||504===R}class uo{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}let ns,Fs;function xo(){return(xo=(0,p.Z)(function*(A,R,B,X,ge){if(ge&&ge.global)A("event",B,X);else{const be=yield R;A("event",B,Object.assign(Object.assign({},X),{send_to:be}))}})).apply(this,arguments)}function ha(A){Fs=A}function Ba(A){ns=A}function Yo(){return ja.apply(this,arguments)}function ja(){return(ja=(0,p.Z)(function*(){if(!(0,ue.hl)())return gn.warn(Re.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(A){return gn.warn(Re.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function lo(){return(lo=(0,p.Z)(function*(A,R,B,X,ge,be,We){var Ot;const Bt=Yn(A);Bt.then(Zr=>{B[Zr.measurementId]=Zr.appId,A.options.measurementId&&Zr.measurementId!==A.options.measurementId&&gn.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Zr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Zr=>gn.error(Zr)),R.push(Bt);const Vt=Yo().then(Zr=>{if(Zr)return X.getId()}),[an,Jt]=yield Promise.all([Bt,Vt]);J(be)||Ua(be,an.measurementId),Fs&&(ge("consent","default",Fs),ha(void 0)),ge("js",new Date);const Bs=null!==(Ot=We?.config)&&void 0!==Ot?Ot:{};return Bs.origin="firebase",Bs.update=!0,null!=Jt&&(Bs[zr]=Jt),ge("config",an.measurementId,Bs),ns&&(ge("set",ns),Ba(void 0)),an.measurementId})).apply(this,arguments)}class du{constructor(R){this.app=R}_delete(){return delete Vi[this.app.options.appId],Promise.resolve()}}let Vi={},hu=[];const ho={};let fa,li,$n="dataLayer",ms=!1;function $a(A,R,B){!function lc(){const A=[];if((0,ue.ru)()&&A.push("This is a browser extension environment."),(0,ue.zI)()||A.push("Cookies are not available."),A.length>0){const R=A.map((X,ge)=>`(${ge+1}) ${X}`).join(" "),B=Re.create("invalid-analytics-context",{errorInfo:R});gn.warn(B.message)}}();const X=A.options.appId;if(!X)throw Re.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Re.create("no-api-key");gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vi[X])throw Re.create("already-exists",{id:X});if(!ms){!function zo(A){let R=[];Array.isArray(window[A])?R=window[A]:window[A]=R}($n);const{wrappedGtag:be,gtagCore:We}=function H(A,R,B,X,ge){let be=function(...We){window[X].push(arguments)};return window[ge]&&"function"==typeof window[ge]&&(be=window[ge]),window[ge]=function x(A,R,B,X){function be(){return(be=(0,p.Z)(function*(We,Ot,Bt){try{"event"===We?yield T(A,R,B,Ot,Bt):"config"===We?yield Wo(A,R,B,X,Ot,Bt):"consent"===We?A("consent","update",Bt):A("set",Ot)}catch(Vt){gn.error(Vt)}})).apply(this,arguments)}return function ge(We,Ot,Bt){return be.apply(this,arguments)}}(be,A,R,B),{gtagCore:be,wrappedGtag:window[ge]}}(Vi,hu,ho,$n,"gtag");li=be,fa=We,ms=!0}return Vi[X]=function Nu(A,R,B,X,ge,be,We){return lo.apply(this,arguments)}(A,hu,ho,R,fa,$n,B),new du(A)}function Ro(){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,p.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const Fn="@firebase/analytics";!function Ls(){(0,ae._registerComponent)(new fe.wA(oo,(R,{options:B})=>$a(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),B),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function A(R){try{const B=R.getProvider(oo).getImmediate();return{logEvent:(X,ge,be)=>function Gc(A,R,B,X){A=(0,ue.m9)(A),function rs(A,R,B,X,ge){return xo.apply(this,arguments)}(li,Vi[A.app.options.appId],R,B,X).catch(ge=>gn.error(ge))}(B,X,ge,be)}}catch(B){throw Re.create("interop-component-reg-failed",{reason:B})}},"PRIVATE")),(0,ae.registerVersion)(Fn,"0.9.4"),(0,ae.registerVersion)(Fn,"0.9.4","esm2017")}();var Oo=V(4408),ga=V(7565);const sr=new class pu extends ga.v{}(class Ga extends Oo.o{constructor(R,B){super(R,B),this.scheduler=R,this.work=B}schedule(R,B=0){return B>0?super.schedule(R,B):(this.delay=B,this.state=R,this.scheduler.flush(this),this)}execute(R,B){return B>0||this.closed?super.execute(R,B):this._execute(R,B)}requestAsyncId(R,B,X=0){return null!=X&&X>0||null==X&&this.delay>0?super.requestAsyncId(R,B,X):(R.flush(this),0)}});var Fu=V(4986),Bi=V(8505),Sr=V(9468),za=V(5363);const Wa=new I.GfV("7.5.0"),Lu="__angularfire_symbol__analyticsIsSupportedValue",di="__angularfire_symbol__analyticsIsSupported",Vs="__angularfire_symbol__remoteConfigIsSupportedValue",Po="__angularfire_symbol__remoteConfigIsSupported",Qi="__angularfire_symbol__messagingIsSupportedValue",Us="__angularfire_symbol__messagingIsSupported";function v(A,R,B){if(R){if(1===R.length)return R[0];const be=R.filter(We=>We.app===B);if(1===be.length)return be[0]}return B.container.getProvider(A).getImmediate({optional:!0})}globalThis[di]||(globalThis[di]=Ro().then(A=>globalThis[Lu]=A).catch(()=>globalThis[Lu]=!1)),globalThis[Us]||(globalThis[Us]=Ps().then(A=>globalThis[Qi]=A).catch(()=>globalThis[Qi]=!1)),globalThis[Po]||(globalThis[Po]=$c().then(A=>globalThis[Vs]=A).catch(()=>globalThis[Vs]=!1));const _=(A,R)=>{const B=R?[R]:(0,j.C6)(),X=[];return B.forEach(ge=>{ge.container.getProvider(A).instances.forEach(We=>{X.includes(We)||X.push(We)})}),X};function m(){}class C{constructor(R,B=sr){this.zone=R,this.delegate=B}now(){return this.delegate.now()}schedule(R,B,X){const ge=this.zone;return this.delegate.schedule(function(We){ge.runGuarded(()=>{R.apply(this,[We])})},B,X)}}class O{constructor(R){this.zone=R,this.task=null}call(R,B){const X=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",m,{},m,m)),B.pipe((0,Bi.b)({next:X,complete:X,error:X})).subscribe(R).add(X)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let U=(()=>{class A{constructor(B){this.ngZone=B,this.outsideAngular=B.runOutsideAngular(()=>new C(Zone.current)),this.insideAngular=B.run(()=>new C(Zone.current,Fu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(B){return new(B||A)(I.LFG(I.R0b))},A.\u0275prov=I.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function G(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function En(A){return G(),function Er(A){return function(B){return(B=B.lift(new O(A.ngZone))).pipe((0,Sr.R)(A.outsideAngular),(0,za.Q)(A.insideAngular))}}(G())(A)}},8401:(mt,Te,V)=>{V.d(Te,{$:()=>vr,A:()=>te,B:()=>qe,G:()=>Uo,H:()=>Bn,J:()=>yr,L:()=>jn,M:()=>sa,N:()=>Eo,P:()=>Fu,Q:()=>Sa,R:()=>pa,T:()=>su,U:()=>Ri,V:()=>Zi,W:()=>Ki,X:()=>Io,Y:()=>Nr,Z:()=>Ms,_:()=>$o,a:()=>hn,a0:()=>Ma,a1:()=>aa,a2:()=>Qt,a3:()=>au,a4:()=>hs,a5:()=>ua,a6:()=>Ho,a7:()=>Me,a8:()=>Oa,a9:()=>Na,aA:()=>se,aB:()=>Bt,aC:()=>bt,aD:()=>Le,aE:()=>Ir,aI:()=>rn,aL:()=>Oi,aa:()=>ki,ab:()=>bo,ac:()=>Co,af:()=>ts,ag:()=>Fi,ah:()=>uu,ak:()=>As,al:()=>Ao,an:()=>Va,ao:()=>qo,ap:()=>Fe,aq:()=>K,ar:()=>gt,as:()=>Ye,at:()=>Nl,au:()=>_s,av:()=>de,aw:()=>Ne,ax:()=>pe,ay:()=>Zr,az:()=>nt,b:()=>Re,c:()=>Qi,d:()=>qa,e:()=>gu,f:()=>Er,g:()=>X,h:()=>A,i:()=>ja,j:()=>We,k:()=>Sf,l:()=>dc,m:()=>Pl,o:()=>ve,r:()=>Oo,s:()=>xl,u:()=>sr});var I=V(5861),j=V(2090),p=V(9681),ae=V(1877),ue=V(655),fe=V(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},te={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const qe=function ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},st=function Je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vt=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$e=new ae.Yd("@firebase/auth");function He(E,...d){$e.logLevel<=ae.in.ERROR&&$e.error(`Auth (${p.SDK_VERSION}): ${E}`,...d)}function Ye(E,...d){throw ot(E,...d)}function Ne(E,...d){return ot(E,...d)}function Ue(E,d,g){const b=Object.assign(Object.assign({},st()),{[d]:g});return new j.LL("auth","Firebase",b).create(d,{appName:E.name})}function Be(E,d,g){if(!(d instanceof g))throw g.name!==d.constructor.name&&Ye(E,"argument-error"),Ue(E,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(E,...d){if("string"!=typeof E){const g=d[0],b=[...d.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(g,...b)}return vt.create(E,...d)}function pe(E,d,...g){if(!E)throw ot(d,...g)}function Ce(E){const d="INTERNAL ASSERTION FAILED: "+E;throw He(d),new Error(d)}function Fe(E,d){E||Ce(d)}const ut=new Map;function nt(E){Fe(E instanceof Function,"Expected a class definition");let d=ut.get(E);return d?(Fe(d instanceof E,"Instance stored in cache mismatched with class"),d):(d=new E,ut.set(E,d),d)}function De(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function xe(){return"http:"===Pe()||"https:"===Pe()}function Pe(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class tt{constructor(d,g){this.shortDelay=d,this.longDelay=g,Fe(g>d,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Ge(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xe()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ct(E,d){Fe(E.emulator,"Emulator should always be set here");const{url:g}=E.emulator;return d?`${g}${d.startsWith("/")?d.slice(1):d}`:g}class ft{static initialize(d,g,b){this.fetchImpl=d,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},me=new tt(3e4,6e4);function Tt(E,d){return E.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:E.tenantId}):d}function yt(E,d,g,b){return St.apply(this,arguments)}function St(){return(St=(0,I.Z)(function*(E,d,g,b,P={}){return Mn(E,P,(0,I.Z)(function*(){let L={},Q={};b&&("GET"===d?Q=b:L={body:JSON.stringify(b)});const je=(0,j.xO)(Object.assign({key:E.config.apiKey},Q)).slice(1),xt=yield E._getAdditionalHeaders();return xt["Content-Type"]="application/json",E.languageCode&&(xt["X-Firebase-Locale"]=E.languageCode),ft.fetch()(Dn(E,E.config.apiHost,g,je),Object.assign({method:d,headers:xt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Mn(E,d,g){return In.apply(this,arguments)}function In(){return(In=(0,I.Z)(function*(E,d,g){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},yn),d);try{const P=new Lt(E),L=yield Promise.race([g(),P.promise]);P.clearNetworkTimeout();const Q=yield L.json();if("needConfirmation"in Q)throw Pn(E,"account-exists-with-different-credential",Q);if(L.ok&&!("errorMessage"in Q))return Q;{const je=L.ok?Q.errorMessage:Q.error.message,[xt,jt]=je.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xt)throw Pn(E,"credential-already-in-use",Q);if("EMAIL_EXISTS"===xt)throw Pn(E,"email-already-in-use",Q);if("USER_DISABLED"===xt)throw Pn(E,"user-disabled",Q);const mn=b[xt]||xt.toLowerCase().replace(/[_\s]+/g,"-");if(jt)throw Ue(E,mn,jt);Ye(E,mn)}}catch(P){if(P instanceof j.ZR)throw P;Ye(E,"internal-error",{message:String(P)})}})).apply(this,arguments)}function cn(E,d,g,b){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,I.Z)(function*(E,d,g,b,P={}){const L=yield yt(E,d,g,b,P);return"mfaPendingCredential"in L&&Ye(E,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Dn(E,d,g,b){const P=`${d}${g}?${b}`;return E.config.emulator?ct(E.config,P):`${E.config.apiScheme}://${P}`}class Lt{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(Ne(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pn(E,d,g){const b={appName:E.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const P=Ne(E,d,b);return P.customData._tokenResponse=g,P}function ar(){return(ar=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Ln(E,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function pt(E,d){return gr.apply(this,arguments)}function gr(){return(gr=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function wr(E){if(E)try{const d=new Date(Number(E));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Yt(){return(Yt=(0,I.Z)(function*(E,d=!1){const g=(0,j.m9)(E),b=yield g.getIdToken(d),P=Mt(b);pe(P&&P.exp&&P.auth_time&&P.iat,g.auth,"internal-error");const L="object"==typeof P.firebase?P.firebase:void 0,Q=L?.sign_in_provider;return{claims:P,token:b,authTime:wr(Nt(P.auth_time)),issuedAtTime:wr(Nt(P.iat)),expirationTime:wr(Nt(P.exp)),signInProvider:Q||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Nt(E){return 1e3*Number(E)}function Mt(E){const[d,g,b]=E.split(".");if(void 0===d||void 0===g||void 0===b)return He("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,j.tV)(g);return P?JSON.parse(P):(He("Failed to decode base64 JWT payload"),null)}catch(P){return He("Caught error parsing JWT payload as JSON",P?.toString()),null}}function Tn(E,d){return vn.apply(this,arguments)}function vn(){return(vn=(0,I.Z)(function*(E,d,g=!1){if(g)return d;try{return yield d}catch(b){throw b instanceof j.ZR&&Kn(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function Kn({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class mr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var g;if(d){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const P=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(d=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(d);this.timerId=setTimeout((0,I.Z)(function*(){yield g.iteration()}),b)}iteration(){var d=this;return(0,I.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&d.schedule(!0))}d.schedule()})()}}class tr{constructor(d,g){this.createdAt=d,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ei(E){return tn.apply(this,arguments)}function tn(){return(tn=(0,I.Z)(function*(E){var d;const g=E.auth,b=yield E.getIdToken(),P=yield Tn(E,pt(g,{idToken:b}));pe(P?.users.length,g,"internal-error");const L=P.users[0];E._notifyReloadListener(L);const Q=null!==(d=L.providerUserInfo)&&void 0!==d&&d.length?Vn(L.providerUserInfo):[],je=Ut(E.providerData,Q),mn=!!E.isAnonymous&&!(E.email&&L.passwordHash||je?.length),Ar={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:je,metadata:new tr(L.createdAt,L.lastLoginAt),isAnonymous:mn};Object.assign(E,Ar)})).apply(this,arguments)}function qt(){return(qt=(0,I.Z)(function*(E){const d=(0,j.m9)(E);yield ei(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ut(E,d){return[...E.filter(b=>!d.some(P=>P.providerId===b.providerId)),...d]}function Vn(E){return E.map(d=>{var{providerId:g}=d,b=(0,ue._T)(d,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ve(){return(Ve=(0,I.Z)(function*(E,d){const g=yield Mn(E,{},(0,I.Z)(function*(){const b=(0,j.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:P,apiKey:L}=E.config,Q=Dn(E,P,"/v1/token",`key=${L}`),je=yield E._getAdditionalHeaders();return je["Content-Type"]="application/x-www-form-urlencoded",ft.fetch()(Q,{method:"POST",headers:je,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){pe(d.idToken,"internal-error"),pe(typeof d.idToken<"u","internal-error"),pe(typeof d.refreshToken<"u","internal-error");const g="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Wt(E){const d=Mt(E);return pe(d,"internal-error"),pe(typeof d.exp<"u","internal-error"),pe(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,g)}getToken(d,g=!1){var b=this;return(0,I.Z)(function*(){return pe(!b.accessToken||b.refreshToken,d,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(d,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,g){var b=this;return(0,I.Z)(function*(){const{accessToken:P,refreshToken:L,expiresIn:Q}=yield function at(E,d){return Ve.apply(this,arguments)}(d,g);b.updateTokensAndExpiration(P,L,Number(Q))})()}updateTokensAndExpiration(d,g,b){this.refreshToken=g||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(d,g){const{refreshToken:b,accessToken:P,expirationTime:L}=g,Q=new _t;return b&&(pe("string"==typeof b,"internal-error",{appName:d}),Q.refreshToken=b),P&&(pe("string"==typeof P,"internal-error",{appName:d}),Q.accessToken=P),L&&(pe("number"==typeof L,"internal-error",{appName:d}),Q.expirationTime=L),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function Pt(E,d){pe("string"==typeof E||typeof E>"u","internal-error",{appName:d})}class $t{constructor(d){var{uid:g,auth:b,stsTokenManager:P}=d,L=(0,ue._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new tr(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(d){var g=this;return(0,I.Z)(function*(){const b=yield Tn(g,g.stsTokenManager.getToken(g.auth,d));return pe(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(d){return function er(E){return Yt.apply(this,arguments)}(this,d)}reload(){return function ti(E){return qt.apply(this,arguments)}(this)}_assign(d){this!==d&&(pe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(g=>Object.assign({},g)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new $t(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,g=!1){var b=this;return(0,I.Z)(function*(){let P=!1;d.idToken&&d.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(d),P=!0),g&&(yield ei(b)),yield b.auth._persistUserIfCurrent(b),P&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var d=this;return(0,I.Z)(function*(){const g=yield d.getIdToken();return yield Tn(d,function Rr(E,d){return ar.apply(this,arguments)}(d.auth,{idToken:g})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,g){var b,P,L,Q,je,xt,jt,mn;const Ar=null!==(b=g.displayName)&&void 0!==b?b:void 0,ko=null!==(P=g.email)&&void 0!==P?P:void 0,ya=null!==(L=g.phoneNumber)&&void 0!==L?L:void 0,yc=null!==(Q=g.photoURL)&&void 0!==Q?Q:void 0,Hu=null!==(je=g.tenantId)&&void 0!==je?je:void 0,kl=null!==(xt=g._redirectEventId)&&void 0!==xt?xt:void 0,eh=null!==(jt=g.createdAt)&&void 0!==jt?jt:void 0,th=null!==(mn=g.lastLoginAt)&&void 0!==mn?mn:void 0,{uid:nn,emailVerified:Gu,isAnonymous:nh,providerData:hr,stsTokenManager:Gt}=g;pe(nn&&Gt,d,"internal-error");const Kc=_t.fromJSON(this.name,Gt);pe("string"==typeof nn,d,"internal-error"),Pt(Ar,d.name),Pt(ko,d.name),pe("boolean"==typeof Gu,d,"internal-error"),pe("boolean"==typeof nh,d,"internal-error"),Pt(ya,d.name),Pt(yc,d.name),Pt(Hu,d.name),Pt(kl,d.name),Pt(eh,d.name),Pt(th,d.name);const Rn=new $t({uid:nn,auth:d,email:ko,emailVerified:Gu,displayName:Ar,isAnonymous:nh,photoURL:yc,phoneNumber:ya,tenantId:Hu,stsTokenManager:Kc,createdAt:eh,lastLoginAt:th});return hr&&Array.isArray(hr)&&(Rn.providerData=hr.map(xf=>Object.assign({},xf))),kl&&(Rn._redirectEventId=kl),Rn}static _fromIdTokenResponse(d,g,b=!1){return(0,I.Z)(function*(){const P=new _t;P.updateFromServerResponse(g);const L=new $t({uid:g.localId,auth:d,stsTokenManager:P,isAnonymous:b});return yield ei(L),L})()}}const jn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(g,b){var P=this;return(0,I.Z)(function*(){P.storage[g]=b})()}_get(g){var b=this;return(0,I.Z)(function*(){const P=b.storage[g];return void 0===P?null:P})()}_remove(g){var b=this;return(0,I.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return E.type="NONE",E})();function se(E,d,g){return`firebase:${E}:${d}:${g}`}class ne{constructor(d,g,b){this.persistence=d,this.auth=g,this.userKey=b;const{config:P,name:L}=this.auth;this.fullUserKey=se(this.userKey,P.apiKey,L),this.fullPersistenceKey=se("persistence",P.apiKey,L),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,I.Z)(function*(){const g=yield d.persistence._get(d.fullUserKey);return g?$t._fromJSON(d.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var g=this;return(0,I.Z)(function*(){if(g.persistence===d)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=d,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,g,b="authUser"){return(0,I.Z)(function*(){if(!g.length)return new ne(nt(jn),d,b);const P=(yield Promise.all(g.map(function(){var jt=(0,I.Z)(function*(mn){if(yield mn._isAvailable())return mn});return function(mn){return jt.apply(this,arguments)}}()))).filter(jt=>jt);let L=P[0]||nt(jn);const Q=se(b,d.config.apiKey,d.name);let je=null;for(const jt of g)try{const mn=yield jt._get(Q);if(mn){const Ar=$t._fromJSON(d,mn);jt!==L&&(je=Ar),L=jt;break}}catch{}const xt=P.filter(jt=>jt._shouldAllowMigration);return L._shouldAllowMigration&&xt.length?(L=xt[0],je&&(yield L._set(Q,je.toJSON())),yield Promise.all(g.map(function(){var jt=(0,I.Z)(function*(mn){if(mn!==L)try{yield mn._remove(Q)}catch{}});return function(mn){return jt.apply(this,arguments)}}())),new ne(L,d,b)):new ne(L,d,b)})()}}function q(E){const d=E.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ke(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Z(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(oe(d))return"Blackberry";if(ie(d))return"Webos";if(z(d))return"Safari";if((d.includes("chrome/")||ye(d))&&!d.includes("edge/"))return"Chrome";if(gt(d))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function Z(E=(0,j.z$)()){return/firefox\//i.test(E)}function z(E=(0,j.z$)()){const d=E.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ye(E=(0,j.z$)()){return/crios\//i.test(E)}function ke(E=(0,j.z$)()){return/iemobile/i.test(E)}function gt(E=(0,j.z$)()){return/android/i.test(E)}function oe(E=(0,j.z$)()){return/blackberry/i.test(E)}function ie(E=(0,j.z$)()){return/webos/i.test(E)}function K(E=(0,j.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function de(E=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Ht(E=(0,j.z$)()){return K(E)||gt(E)||ie(E)||oe(E)||/windows phone/i.test(E)||ke(E)}function ir(E,d=[]){let g;switch(E){case"Browser":g=q((0,j.z$)());break;case"Worker":g=`${q((0,j.z$)())}-${E}`;break;default:g=E}const b=d.length?d.join(","):"FirebaseCore-web";return`${g}/JsCore/${p.SDK_VERSION}/${b}`}class Ji{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,g){const b=L=>new Promise((Q,je)=>{try{Q(d(L))}catch(xt){je(xt)}});b.onAbort=g,this.queue.push(b);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(d){var g=this;return(0,I.Z)(function*(){if(g.auth.currentUser===d)return;const b=[];try{for(const P of g.queue)yield P(d),P.onAbort&&b.push(P.onAbort)}catch(P){b.reverse();for(const L of b)try{L()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:P?.message})}})()}}class Gi{constructor(d,g,b){this.app=d,this.heartbeatServiceProvider=g,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ti(this),this.idTokenSubscription=new Ti(this),this.beforeStateQueue=new Ji(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(d,g){var b=this;return g&&(this._popupRedirectResolver=nt(g)),this._initializationPromise=this.queue((0,I.Z)(function*(){var P,L;if(!b._deleted&&(b.persistenceManager=yield ne.create(b,d),!b._deleted)){if(null!==(P=b._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(L=b.currentUser)||void 0===L?void 0:L.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,I.Z)(function*(){if(d._deleted)return;const g=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||g){if(d.currentUser&&g&&d.currentUser.uid===g.uid)return d._currentUser._assign(g),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(g,!0)}})()}initializeCurrentUser(d){var g=this;return(0,I.Z)(function*(){var b;const P=yield g.assertedPersistence.getCurrentUser();let L=P,Q=!1;if(d&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const je=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,xt=L?._redirectEventId,jt=yield g.tryRedirectSignIn(d);(!je||je===xt)&&jt?.user&&(L=jt.user,Q=!0)}if(!L)return g.directlySetCurrentUser(null);if(!L._redirectEventId){if(Q)try{yield g.beforeStateQueue.runMiddleware(L)}catch(je){L=P,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(je))}return L?g.reloadAndSetCurrentUserOrClear(L):g.directlySetCurrentUser(null)}return pe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===L._redirectEventId?g.directlySetCurrentUser(L):g.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(d){var g=this;return(0,I.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,d,!0)}catch{yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(d){var g=this;return(0,I.Z)(function*(){try{yield ei(d)}catch(b){if("auth/network-request-failed"!==b?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function et(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var d=this;return(0,I.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var g=this;return(0,I.Z)(function*(){const b=d?(0,j.m9)(d):null;return b&&pe(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(d,g=!1){var b=this;return(0,I.Z)(function*(){if(!b._deleted)return d&&pe(b.tenantId===d.tenantId,b,"tenant-id-mismatch"),g||(yield b.beforeStateQueue.runMiddleware(d)),b.queue((0,I.Z)(function*(){yield b.directlySetCurrentUser(d),b.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,I.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var g=this;return this.queue((0,I.Z)(function*(){yield g.assertedPersistence.setPersistence(nt(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new j.LL("auth","Firebase",d())}onAuthStateChanged(d,g,b){return this.registerStateListener(this.authStateSubscription,d,g,b)}beforeAuthStateChanged(d,g){return this.beforeStateQueue.pushCallback(d,g)}onIdTokenChanged(d,g,b){return this.registerStateListener(this.idTokenSubscription,d,g,b)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,g){var b=this;return(0,I.Z)(function*(){const P=yield b.getOrInitRedirectPersistenceManager(g);return null===d?P.removeCurrentUser():P.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var g=this;return(0,I.Z)(function*(){if(!g.redirectPersistenceManager){const b=d&&nt(d)||g._popupRedirectResolver;pe(b,g,"argument-error"),g.redirectPersistenceManager=yield ne.create(g,[nt(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(d){var g=this;return(0,I.Z)(function*(){var b,P;return g._isInitialized&&(yield g.queue((0,I.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===d?g._currentUser:(null===(P=g.redirectUser)||void 0===P?void 0:P._redirectEventId)===d?g.redirectUser:null})()}_persistUserIfCurrent(d){var g=this;return(0,I.Z)(function*(){if(d===g.currentUser)return g.queue((0,I.Z)(function*(){return g.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,g,b,P){if(this._deleted)return()=>{};const L="function"==typeof g?g:g.next.bind(g),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return pe(Q,this,"internal-error"),Q.then(()=>L(this.currentUser)),"function"==typeof g?d.addObserver(g,b,P):d.addObserver(g)}directlySetCurrentUser(d){var g=this;return(0,I.Z)(function*(){g.currentUser&&g.currentUser!==d&&g._currentUser._stopProactiveRefresh(),d&&g.isProactiveRefreshEnabled&&d._startProactiveRefresh(),g.currentUser=d,d?yield g.assertedPersistence.setCurrentUser(d):yield g.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=ir(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,I.Z)(function*(){var g;const b={"X-Client-Version":d.clientVersion};d.app.options.appId&&(b["X-Firebase-gmpid"]=d.app.options.appId);const P=yield null===(g=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return P&&(b["X-Firebase-Client"]=P),b})()}}function Ir(E){return(0,j.m9)(E)}class Ti{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,j.ne)(g=>this.observer=g)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Uo(E,d,g){const b=Ir(E);pe(b._canInitEmulator,b,"emulator-config-failed"),pe(/^https?:\/\//.test(d),b,"invalid-emulator-scheme");const P=!!g?.disableWarnings,L=Ys(d),{host:Q,port:je}=function Bo(E){const d=Ys(E),g=/(\/\/)?([^?#/]+)/.exec(E.substr(d.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(b);if(P){const L=P[1];return{host:L,port:yo(b.substr(L.length+1))}}{const[L,Q]=b.split(":");return{host:L,port:yo(Q)}}}(d);b.config.emulator={url:`${L}//${Q}${null===je?"":`:${je}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Q,port:je,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function bn(){function E(){const d=document.createElement("p"),g=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function Ys(E){const d=E.indexOf(":");return d<0?"":E.substr(0,d+1)}function yo(E){if(!E)return null;const d=Number(E);return isNaN(d)?null:d}class Bn{constructor(d,g){this.providerId=d,this.signInMethod=g}toJSON(){return Ce("not implemented")}_getIdTokenResponse(d){return Ce("not implemented")}_linkToIdToken(d,g){return Ce("not implemented")}_getReauthenticationResolver(d){return Ce("not implemented")}}function ur(E,d){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:resetPassword",Tt(E,d))})).apply(this,arguments)}function ni(E,d){return ai.apply(this,arguments)}function ai(){return(ai=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function It(E,d){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:update",Tt(E,d))})).apply(this,arguments)}function Or(){return(Or=(0,I.Z)(function*(E,d){return cn(E,"POST","/v1/accounts:signInWithPassword",Tt(E,d))})).apply(this,arguments)}function Si(E,d){return cr.apply(this,arguments)}function cr(){return(cr=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:sendOobCode",Tt(E,d))})).apply(this,arguments)}function zi(E,d){return kn.apply(this,arguments)}function kn(){return(kn=(0,I.Z)(function*(E,d){return Si(E,d)})).apply(this,arguments)}function ra(E,d){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,I.Z)(function*(E,d){return Si(E,d)})).apply(this,arguments)}function sn(E,d){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,I.Z)(function*(E,d){return Si(E,d)})).apply(this,arguments)}function Ts(E,d){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,I.Z)(function*(E,d){return Si(E,d)})).apply(this,arguments)}function lr(){return(lr=(0,I.Z)(function*(E,d){return cn(E,"POST","/v1/accounts:signInWithEmailLink",Tt(E,d))})).apply(this,arguments)}function qi(){return(qi=(0,I.Z)(function*(E,d){return cn(E,"POST","/v1/accounts:signInWithEmailLink",Tt(E,d))})).apply(this,arguments)}class Br extends Bn{constructor(d,g,b,P=null){super("password",b),this._email=d,this._password=g,this._tenantId=P}static _fromEmailAndPassword(d,g){return new Br(d,g,"password")}static _fromEmailAndCode(d,g,b=null){return new Br(d,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(d){var g=this;return(0,I.Z)(function*(){switch(g.signInMethod){case"password":return function zn(E,d){return Or.apply(this,arguments)}(d,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Dr(E,d){return lr.apply(this,arguments)}(d,{email:g._email,oobCode:g._password});default:Ye(d,"internal-error")}})()}_linkToIdToken(d,g){var b=this;return(0,I.Z)(function*(){switch(b.signInMethod){case"password":return ni(d,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function os(E,d){return qi.apply(this,arguments)}(d,{idToken:g,email:b._email,oobCode:b._password});default:Ye(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function xi(E,d){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,I.Z)(function*(E,d){return cn(E,"POST","/v1/accounts:signInWithIdp",Tt(E,d))})).apply(this,arguments)}class yr extends Bn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const g=new yr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(g.idToken=d.idToken),d.accessToken&&(g.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(g.nonce=d.nonce),d.pendingToken&&(g.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(g.accessToken=d.oauthToken,g.secret=d.oauthTokenSecret):Ye("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:b,signInMethod:P}=g,L=(0,ue._T)(g,["providerId","signInMethod"]);if(!b||!P)return null;const Q=new yr(b,P);return Q.idToken=L.idToken||void 0,Q.accessToken=L.accessToken||void 0,Q.secret=L.secret,Q.nonce=L.nonce,Q.pendingToken=L.pendingToken||null,Q}_getIdTokenResponse(d){return xi(d,this.buildRequest())}_linkToIdToken(d,g){const b=this.buildRequest();return b.idToken=g,xi(d,b)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,xi(d,g)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),d.postBody=(0,j.xO)(g)}return d}}function ia(E,d){return vo.apply(this,arguments)}function vo(){return(vo=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:sendVerificationCode",Tt(E,d))})).apply(this,arguments)}function Ss(){return(Ss=(0,I.Z)(function*(E,d){return cn(E,"POST","/v1/accounts:signInWithPhoneNumber",Tt(E,d))})).apply(this,arguments)}function jr(){return(jr=(0,I.Z)(function*(E,d){const g=yield cn(E,"POST","/v1/accounts:signInWithPhoneNumber",Tt(E,d));if(g.temporaryProof)throw Pn(E,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const cc={USER_NOT_FOUND:"user-not-found"};function ri(){return(ri=(0,I.Z)(function*(E,d){return cn(E,"POST","/v1/accounts:signInWithPhoneNumber",Tt(E,Object.assign(Object.assign({},d),{operation:"REAUTH"})),cc)})).apply(this,arguments)}class as extends Bn{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,g){return new as({verificationId:d,verificationCode:g})}static _fromTokenResponse(d,g){return new as({phoneNumber:d,temporaryProof:g})}_getIdTokenResponse(d){return function _o(E,d){return Ss.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,g){return function ui(E,d){return jr.apply(this,arguments)}(d,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Mi(E,d){return ri.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:g,verificationId:b,verificationCode:P}=this.params;return d&&g?{temporaryProof:d,phoneNumber:g}:{sessionInfo:b,code:P}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:g,verificationCode:b,phoneNumber:P,temporaryProof:L}=d;return b||g||P||L?new as({verificationId:g,verificationCode:b,phoneNumber:P,temporaryProof:L}):null}}class $r{constructor(d){var g,b,P,L,Q,je;const xt=(0,j.zd)((0,j.pd)(d)),jt=null!==(g=xt.apiKey)&&void 0!==g?g:null,mn=null!==(b=xt.oobCode)&&void 0!==b?b:null,Ar=function Ta(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=xt.mode)&&void 0!==P?P:null);pe(jt&&mn&&Ar,"argument-error"),this.apiKey=jt,this.operation=Ar,this.code=mn,this.continueUrl=null!==(L=xt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(Q=xt.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(je=xt.tenantId)&&void 0!==je?je:null}static parseLink(d){const g=function iu(E){const d=(0,j.zd)((0,j.pd)(E)).link,g=d?(0,j.zd)((0,j.pd)(d)).deep_link_id:null,b=(0,j.zd)((0,j.pd)(E)).deep_link_id;return(b?(0,j.zd)((0,j.pd)(b)).link:null)||b||g||d||E}(d);try{return new $r(g)}catch{return null}}}let sa=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(g,b){return Br._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const P=$r.parseLink(b);return pe(P,"argument-error"),Br._fromEmailAndCode(g,P.code,P.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class es{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Xs extends es{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ri extends Xs{static credentialFromJSON(d){const g="string"==typeof d?JSON.parse(d):d;return pe("providerId"in g&&"signInMethod"in g,"argument-error"),yr._fromParams(g)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return pe(d.idToken||d.accessToken,"argument-error"),yr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ri.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ri.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:P,pendingToken:L,nonce:Q,providerId:je}=d;if(!b&&!P&&!g&&!L||!je)return null;try{return new Ri(je)._credential({idToken:g,accessToken:b,nonce:Q,pendingToken:L})}catch{return null}}}let Eo=(()=>{class E extends Xs{constructor(){super("facebook.com")}static credential(g){return yr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return E.credential(g.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Sa=(()=>{class E extends Xs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return yr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:P}=g;if(!b&&!P)return null;try{return E.credential(b,P)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),su=(()=>{class E extends Xs{constructor(){super("github.com")}static credential(g){return yr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return E.credential(g.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Oi extends Bn{constructor(d,g){super(d,d),this.pendingToken=g}_getIdTokenResponse(d){return xi(d,this.buildRequest())}_linkToIdToken(d,g){const b=this.buildRequest();return b.idToken=g,xi(d,b)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,xi(d,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:b,signInMethod:P,pendingToken:L}=g;return b&&P&&L&&b===P?new Oi(b,L):null}static _create(d,g){return new Oi(d,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zi extends es{constructor(d){pe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Zi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Zi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const g=Oi.fromJSON(d);return pe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:g,providerId:b}=d;if(!g||!b)return null;try{return Oi._create(b,g)}catch{return null}}}let Ki=(()=>{class E extends Xs{constructor(){super("twitter.com")}static credential(g,b){return yr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:P}=g;if(!b||!P)return null;try{return E.credential(b,P)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function ou(E,d){return us.apply(this,arguments)}function us(){return(us=(0,I.Z)(function*(E,d){return cn(E,"POST","/v1/accounts:signUp",Tt(E,d))})).apply(this,arguments)}class gi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,g,b,P=!1){return(0,I.Z)(function*(){const L=yield $t._fromIdTokenResponse(d,b,P),Q=wo(b);return new gi({user:L,providerId:Q,_tokenResponse:b,operationType:g})})()}static _forOperation(d,g,b){return(0,I.Z)(function*(){yield d._updateTokensIfNecessary(b,!0);const P=wo(b);return new gi({user:d,providerId:P,_tokenResponse:b,operationType:g})})()}}function wo(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Io(E){return jo.apply(this,arguments)}function jo(){return(jo=(0,I.Z)(function*(E){var d;const g=Ir(E);if(yield g._initializationPromise,null!==(d=g.currentUser)&&void 0!==d&&d.isAnonymous)return new gi({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield ou(g,{returnSecureToken:!0}),P=yield gi._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(P.user),P})).apply(this,arguments)}class cs extends j.ZR{constructor(d,g,b,P){var L;super(g.code,g.message),this.operationType=b,this.user=P,Object.setPrototypeOf(this,cs.prototype),this.customData={appName:d.name,tenantId:null!==(L=d.tenantId)&&void 0!==L?L:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(d,g,b,P){return new cs(d,g,b,P)}}function xa(E,d,g,b){return("reauthenticate"===d?g._getReauthenticationResolver(E):g._getIdTokenResponse(E)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?cs._fromErrorAndOperation(E,L,d,b):L})}function ls(E){return new Set(E.map(({providerId:d})=>d).filter(d=>!!d))}function As(E,d){return Js.apply(this,arguments)}function Js(){return(Js=(0,I.Z)(function*(E,d){const g=(0,j.m9)(E);yield xs(!0,g,d);const{providerUserInfo:b}=yield Ln(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[d]}),P=ls(b||[]);return g.providerData=g.providerData.filter(L=>P.has(L.providerId)),P.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function eo(E,d){return oa.apply(this,arguments)}function oa(){return(oa=(0,I.Z)(function*(E,d,g=!1){const b=yield Tn(E,d._linkToIdToken(E.auth,yield E.getIdToken()),g);return gi._forOperation(E,"link",b)})).apply(this,arguments)}function xs(E,d,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,I.Z)(function*(E,d,g){yield ei(d);const P=!1===E?"provider-already-linked":"no-such-provider";pe(ls(d.providerData).has(g)===E,d.auth,P)})).apply(this,arguments)}function Hr(E,d){return At.apply(this,arguments)}function At(){return(At=(0,I.Z)(function*(E,d,g=!1){const{auth:b}=E,P="reauthenticate";try{const L=yield Tn(E,xa(b,P,d,E),g);pe(L.idToken,b,"internal-error");const Q=Mt(L.idToken);pe(Q,b,"internal-error");const{sub:je}=Q;return pe(E.uid===je,b,"user-mismatch"),gi._forOperation(E,P,L)}catch(L){throw"auth/user-not-found"===L?.code&&Ye(b,"user-mismatch"),L}})).apply(this,arguments)}function ds(E,d){return zt.apply(this,arguments)}function zt(){return(zt=(0,I.Z)(function*(E,d,g=!1){const b="signIn",P=yield xa(E,b,d),L=yield gi._fromIdTokenResponse(E,b,P);return g||(yield E._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Nr(E,d){return qn.apply(this,arguments)}function qn(){return(qn=(0,I.Z)(function*(E,d){return ds(Ir(E),d)})).apply(this,arguments)}function Ms(E,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,I.Z)(function*(E,d){const g=(0,j.m9)(E);return yield xs(!1,g,d.providerId),eo(g,d)})).apply(this,arguments)}function $o(E,d){return to.apply(this,arguments)}function to(){return(to=(0,I.Z)(function*(E,d){return Hr((0,j.m9)(E),d)})).apply(this,arguments)}function Gr(E,d){return no.apply(this,arguments)}function no(){return(no=(0,I.Z)(function*(E,d){return cn(E,"POST","/v1/accounts:signInWithCustomToken",Tt(E,d))})).apply(this,arguments)}function vr(E,d){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,I.Z)(function*(E,d){const g=Ir(E),b=yield Gr(g,{token:d,returnSecureToken:!0}),P=yield gi._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(P.user),P})).apply(this,arguments)}class pn{constructor(d,g){this.factorId=d,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(d,g){return"phoneInfo"in g?mi._fromServerResponse(d,g):Ye(d,"internal-error")}}class mi extends pn{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,g){return new mi(g)}}function br(E,d,g){var b;pe((null===(b=g.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),pe(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),d.continueUrl=g.url,d.dynamicLinkDomain=g.dynamicLinkDomain,d.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(pe(g.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),d.iOSBundleId=g.iOS.bundleId),g.android&&(pe(g.android.packageName.length>0,E,"missing-android-pkg-name"),d.androidInstallApp=g.android.installApp,d.androidMinimumVersionCode=g.android.minimumVersion,d.androidPackageName=g.android.packageName)}function Ma(E,d,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),P={requestType:"PASSWORD_RESET",email:d};g&&br(b,P,g),yield ra(b,P)})).apply(this,arguments)}function aa(E,d,g){return nr.apply(this,arguments)}function nr(){return(nr=(0,I.Z)(function*(E,d,g){yield ur((0,j.m9)(E),{oobCode:d,newPassword:g})})).apply(this,arguments)}function Qt(E,d){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,I.Z)(function*(E,d){yield It((0,j.m9)(E),{oobCode:d})})).apply(this,arguments)}function au(E,d){return ro.apply(this,arguments)}function ro(){return(ro=(0,I.Z)(function*(E,d){const g=(0,j.m9)(E),b=yield ur(g,{oobCode:d}),P=b.requestType;switch(pe(P,g,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(b.mfaInfo,g,"internal-error");default:pe(b.email,g,"internal-error")}let L=null;return b.mfaInfo&&(L=pn._fromServerResponse(Ir(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:L},operation:P}})).apply(this,arguments)}function hs(E,d){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,I.Z)(function*(E,d){const{data:g}=yield au((0,j.m9)(E),d);return g.email})).apply(this,arguments)}function ua(E,d,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,I.Z)(function*(E,d,g){const b=Ir(E),P=yield ou(b,{returnSecureToken:!0,email:d,password:g}),L=yield gi._fromIdTokenResponse(b,"signIn",P);return yield b._updateCurrentUser(L.user),L})).apply(this,arguments)}function Ho(E,d,g){return Nr((0,j.m9)(E),sa.credential(d,g))}function Me(E,d,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),P={requestType:"EMAIL_SIGNIN",email:d};pe(g.handleCodeInApp,b,"argument-error"),g&&br(b,P,g),yield sn(b,P)})).apply(this,arguments)}function Oa(E,d){return"EMAIL_SIGNIN"===$r.parseLink(d)?.operation}function Na(E,d,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),P=sa.credentialWithLink(d,g||De());return pe(P._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Nr(b,P)})).apply(this,arguments)}function ca(E,d){return fs.apply(this,arguments)}function fs(){return(fs=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:createAuthUri",Tt(E,d))})).apply(this,arguments)}function ki(E,d){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,I.Z)(function*(E,d){const b={identifier:d,continueUri:xe()?De():"http://localhost"},{signinMethods:P}=yield ca((0,j.m9)(E),b);return P||[]})).apply(this,arguments)}function bo(E,d){return io.apply(this,arguments)}function io(){return(io=(0,I.Z)(function*(E,d){const g=(0,j.m9)(E),P={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};d&&br(g.auth,P,d);const{email:L}=yield zi(g.auth,P);L!==E.email&&(yield E.reload())})).apply(this,arguments)}function Co(E,d,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:d};g&&br(b.auth,L,g);const{email:Q}=yield Ts(b.auth,L);Q!==E.email&&(yield E.reload())})).apply(this,arguments)}function kr(E,d){return ii.apply(this,arguments)}function ii(){return(ii=(0,I.Z)(function*(E,d){return yt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ts(E,d){return ps.apply(this,arguments)}function ps(){return(ps=(0,I.Z)(function*(E,{displayName:d,photoURL:g}){if(void 0===d&&void 0===g)return;const b=(0,j.m9)(E),L={idToken:yield b.getIdToken(),displayName:d,photoUrl:g,returnSecureToken:!0},Q=yield Tn(b,kr(b.auth,L));b.displayName=Q.displayName||null,b.photoURL=Q.photoUrl||null;const je=b.providerData.find(({providerId:xt})=>"password"===xt);je&&(je.displayName=b.displayName,je.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Fi(E,d){return To((0,j.m9)(E),d,null)}function uu(E,d){return To((0,j.m9)(E),null,d)}function To(E,d,g){return So.apply(this,arguments)}function So(){return(So=(0,I.Z)(function*(E,d,g){const{auth:b}=E,L={idToken:yield E.getIdToken(),returnSecureToken:!0};d&&(L.email=d),g&&(L.password=g);const Q=yield Tn(E,ni(b,L));yield E._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class gs{constructor(d,g,b={}){this.isNewUser=d,this.providerId=g,this.profile=b}}class Ns extends gs{constructor(d,g,b,P){super(d,g,b),this.username=P}}class Pa extends gs{constructor(d,g){super(d,"facebook.com",g)}}class Ps extends Ns{constructor(d,g){super(d,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class so extends gs{constructor(d,g){super(d,"google.com",g)}}class ka extends Ns{constructor(d,g,b){super(d,"twitter.com",g,b)}}function Ao(E){const{user:d,_tokenResponse:g}=E;return d.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function la(E){var d,g;if(!E)return null;const{providerId:b}=E,P=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},L=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&E?.idToken){const Q=null===(g=null===(d=Mt(E.idToken))||void 0===d?void 0:d.firebase)||void 0===g?void 0:g.sign_in_provider;if(Q)return new gs(L,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!b)return null;switch(b){case"facebook.com":return new Pa(L,P);case"github.com":return new Ps(L,P);case"google.com":return new so(L,P);case"twitter.com":return new ka(L,P,E.screenName||null);case"custom":case"anonymous":return new gs(L,null);default:return new gs(L,b,P)}}(g)}class Sn{constructor(d,g,b){this.type=d,this.credential=g,this.auth=b}static _fromIdtoken(d,g){return new Sn("enroll",d,g)}static _fromMfaPendingCredential(d){return new Sn("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var g,b;if(d?.multiFactorSession){if(null!==(g=d.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Sn._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(b=d.multiFactorSession)&&void 0!==b&&b.idToken)return Sn._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Go{constructor(d,g,b){this.session=d,this.hints=g,this.signInResolver=b}static _fromError(d,g){const b=Ir(d),P=g.customData._serverResponse,L=(P.mfaInfo||[]).map(je=>pn._fromServerResponse(b,je));pe(P.mfaPendingCredential,b,"internal-error");const Q=Sn._fromMfaPendingCredential(P.mfaPendingCredential);return new Go(Q,L,function(){var je=(0,I.Z)(function*(xt){const jt=yield xt._process(b,Q);delete P.mfaInfo,delete P.mfaPendingCredential;const mn=Object.assign(Object.assign({},P),{idToken:jt.idToken,refreshToken:jt.refreshToken});switch(g.operationType){case"signIn":const Ar=yield gi._fromIdTokenResponse(b,g.operationType,mn);return yield b._updateCurrentUser(Ar.user),Ar;case"reauthenticate":return pe(g.user,b,"internal-error"),gi._forOperation(g.user,g.operationType,mn);default:Ye(b,"internal-error")}});return function(xt){return je.apply(this,arguments)}}())}resolveSignIn(d){var g=this;return(0,I.Z)(function*(){return g.signInResolver(d)})()}}function Va(E,d){var g;const b=(0,j.m9)(E),P=d;return pe(d.customData.operationType,b,"argument-error"),pe(null===(g=P.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),Go._fromError(b,P)}function gn(E,d){return yt(E,"POST","/v2/accounts/mfaEnrollment:start",Tt(E,d))}class zo{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>pn._fromServerResponse(d.auth,b)))})}static _fromUser(d){return new zo(d)}getSession(){var d=this;return(0,I.Z)(function*(){return Sn._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,g){var b=this;return(0,I.Z)(function*(){const P=d,L=yield b.getSession(),Q=yield Tn(b.user,P._process(b.user.auth,L,g));return yield b.user._updateTokensIfNecessary(Q),b.user.reload()})()}unenroll(d){var g=this;return(0,I.Z)(function*(){const b="string"==typeof d?d:d.uid,P=yield g.user.getIdToken();try{const L=yield Tn(g.user,function Ua(E,d){return yt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Tt(E,d))}(g.user.auth,{idToken:P,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==b),yield g.user._updateTokensIfNecessary(L),yield g.user.reload()}catch(L){throw L}})()}}const Wo=new WeakMap;function qo(E){const d=(0,j.m9)(E);return Wo.has(d)||Wo.set(d,zo._fromUser(d)),Wo.get(d)}const T="__sak";class F{constructor(d,g){this.storageRetriever=d,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(T,"1"),this.storage.removeItem(T),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,g){return this.storage.setItem(d,JSON.stringify(g)),Promise.resolve()}_get(d){const g=this.storage.getItem(d);return Promise.resolve(g?JSON.parse(g):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Re=(()=>{class E extends F{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function x(){const E=(0,j.z$)();return z(E)||K(E)}()&&function rr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ht(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const P=this.storage.getItem(b),L=this.localCache[b];P!==L&&g(b,L,P)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((je,xt,jt)=>{this.notifyListeners(je,jt)});const P=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const je=this.storage.getItem(P);if(g.newValue!==je)null!==g.newValue?this.storage.setItem(P,g.newValue):this.storage.removeItem(P);else if(this.localCache[P]===g.newValue&&!b)return}const L=()=>{const je=this.storage.getItem(P);!b&&this.localCache[P]===je||this.notifyListeners(P,je)},Q=this.storage.getItem(P);!function rt(){return(0,j.w1)()&&10===document.documentMode}()||Q===g.newValue||g.newValue===g.oldValue?L():setTimeout(L,10)}notifyListeners(g,b){this.localCache[g]=b;const P=this.listeners[g];if(P)for(const L of Array.from(P))L(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var P=()=>super._set,L=this;return(0,I.Z)(function*(){yield P().call(L,g,b),L.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,P=this;return(0,I.Z)(function*(){const L=yield b().call(P,g);return P.localCache[g]=JSON.stringify(L),L})()}_remove(g){var b=()=>super._remove,P=this;return(0,I.Z)(function*(){yield b().call(P,g),delete P.localCache[g]})()}}return E.type="LOCAL",E})(),hn=(()=>{class E extends F{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return E.type="SESSION",E})();let _n=(()=>{class E{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(L=>L.isListeningto(g));if(b)return b;const P=new E(g);return this.receivers.push(P),P}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,I.Z)(function*(){const P=g,{eventId:L,eventType:Q,data:je}=P.data,xt=b.handlersMap[Q];if(!xt?.size)return;P.ports[0].postMessage({status:"ack",eventId:L,eventType:Q});const jt=Array.from(xt).map(function(){var Ar=(0,I.Z)(function*(ko){return ko(P.origin,je)});return function(ko){return Ar.apply(this,arguments)}}()),mn=yield function An(E){return Promise.all(E.map(function(){var d=(0,I.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return d.apply(this,arguments)}}()))}(jt);P.ports[0].postMessage({status:"done",eventId:L,eventType:Q,response:mn})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function rn(E="",d=10){let g="";for(let b=0;b<d;b++)g+=Math.floor(10*Math.random());return E+g}class _r{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,g,b=50){var P=this;return(0,I.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let Q,je;return new Promise((xt,jt)=>{const mn=rn("",20);L.port1.start();const Ar=setTimeout(()=>{jt(new Error("unsupported_event"))},b);je={messageChannel:L,onMessage(ko){const ya=ko;if(ya.data.eventId===mn)switch(ya.data.status){case"ack":clearTimeout(Ar),Q=setTimeout(()=>{jt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),xt(ya.data.response);break;default:clearTimeout(Ar),clearTimeout(Q),jt(new Error("invalid_response"))}}},P.handlers.add(je),L.port1.addEventListener("message",je.onMessage),P.target.postMessage({eventType:d,eventId:mn,data:g},[L.port2])}).finally(()=>{je&&P.removeMessageHandler(je)})})()}}function Xt(){return window}function vi(){return typeof Xt().WorkerGlobalScope<"u"&&"function"==typeof Xt().importScripts}function Wr(){return(Wr=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const uo="firebaseLocalStorageDb",rs="firebaseLocalStorage",xo="fbase_key";class Li{constructor(d){this.request=d}toPromise(){return new Promise((d,g)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Zo(E,d){return E.transaction([rs],d?"readwrite":"readonly").objectStore(rs)}function ks(){const E=indexedDB.open(uo,1);return new Promise((d,g)=>{E.addEventListener("error",()=>{g(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(rs,{keyPath:xo})}catch(P){g(P)}}),E.addEventListener("success",(0,I.Z)(function*(){const b=E.result;b.objectStoreNames.contains(rs)?d(b):(b.close(),yield function Mo(){const E=indexedDB.deleteDatabase(uo);return new Li(E).toPromise()}(),d(yield ks()))}))})}function Ko(E,d,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,I.Z)(function*(E,d,g){const b=Zo(E,!0).put({[xo]:d,value:g});return new Li(b).toPromise()})).apply(this,arguments)}function co(){return(co=(0,I.Z)(function*(E,d){const g=Zo(E,!1).get(d),b=yield new Li(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Fs(E,d){const g=Zo(E,!0).delete(d);return new Li(g).toPromise()}const ja=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,I.Z)(function*(){return g.db||(g.db=yield ks()),g.db})()}_withRetries(g){var b=this;return(0,I.Z)(function*(){let P=0;for(;;)try{const L=yield b._openDb();return yield g(L)}catch(L){if(P++>3)throw L;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,I.Z)(function*(){return vi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,I.Z)(function*(){g.receiver=_n._getInstance(function ao(){return vi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,I.Z)(function*(P,L){return{keyProcessed:(yield g._poll()).includes(L.key)}});return function(P,L){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,I.Z)(function*(P,L){return["keyChanged"]});return function(P,L){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,I.Z)(function*(){var b,P;if(g.activeServiceWorker=yield function _i(){return Wr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new _r(g.activeServiceWorker);const L=yield g.sender._send("ping",{},800);L&&null!==(b=L[0])&&void 0!==b&&b.fulfilled&&null!==(P=L[0])&&void 0!==P&&P.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,I.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Ei(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ks();return yield Ko(g,T,"1"),yield Fs(g,T),!0}catch{}return!1})()}_withPendingWrite(g){var b=this;return(0,I.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var P=this;return(0,I.Z)(function*(){return P._withPendingWrite((0,I.Z)(function*(){return yield P._withRetries(L=>Ko(L,g,b)),P.localCache[g]=b,P.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,I.Z)(function*(){const P=yield b._withRetries(L=>function wi(E,d){return co.apply(this,arguments)}(L,g));return b.localCache[g]=P,P})()}_remove(g){var b=this;return(0,I.Z)(function*(){return b._withPendingWrite((0,I.Z)(function*(){return yield b._withRetries(P=>Fs(P,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,I.Z)(function*(){const b=yield g._withRetries(Q=>{const je=Zo(Q,!1).getAll();return new Li(je).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const P=[],L=new Set;for(const{fbase_key:Q,value:je}of b)L.add(Q),JSON.stringify(g.localCache[Q])!==JSON.stringify(je)&&(g.notifyListeners(Q,je),P.push(Q));for(const Q of Object.keys(g.localCache))g.localCache[Q]&&!L.has(Q)&&(g.notifyListeners(Q,null),P.push(Q));return P})()}notifyListeners(g,b){this.localCache[g]=b;const P=this.listeners[g];if(P)for(const L of Array.from(P))L(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Nu(E,d){return yt(E,"POST","/v2/accounts/mfaSignIn:start",Tt(E,d))}function Vi(){return(Vi=(0,I.Z)(function*(E){return(yield yt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ho(E){return new Promise((d,g)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=d,b.onerror=P=>{const L=Ne("internal-error");L.customData=P,g(L)},b.type="text/javascript",b.charset="UTF-8",function hu(){var E,d;return null!==(d=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==d?d:document}().appendChild(b)})}function $n(E){return`__${E}${Math.floor(1e6*Math.random())}`}const li=1e12;class ms{constructor(d){this.auth=d,this.counter=li,this._widgets=new Map}render(d,g){const b=this.counter;return this._widgets.set(b,new ku(d,this.auth.name,g||{})),this.counter++,b}reset(d){var g;const b=d||li;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(d){var g;return(null===(g=this._widgets.get(d||li))||void 0===g?void 0:g.getResponse())||""}execute(d){var g=this;return(0,I.Z)(function*(){var b;return null===(b=g._widgets.get(d||li))||void 0===b||b.execute(),""})()}}class ku{constructor(d,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof d?document.getElementById(d):d;pe(P,"argument-error",{appName:g}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function lc(E){const d=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<E;b++)d.push(g.charAt(Math.floor(Math.random()*g.length)));return d.join("")}(50);const{callback:d,"expired-callback":g}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $a=$n("rcb"),Hc=new tt(3e4,6e4);class Ro{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Xt().grecaptcha)||void 0===d||!d.render)}load(d,g=""){return pe(function Ui(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(g),d,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Xt().grecaptcha):new Promise((b,P)=>{const L=Xt().setTimeout(()=>{P(Ne(d,"network-request-failed"))},Hc.get());Xt()[$a]=()=>{Xt().clearTimeout(L),delete Xt()[$a];const je=Xt().grecaptcha;if(!je)return void P(Ne(d,"internal-error"));const xt=je.render;je.render=(jt,mn)=>{const Ar=xt(jt,mn);return this.counter++,Ar},this.hostLanguage=g,b(je)},ho(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:$a,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(L),P(Ne(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var g;return!(null===(g=Xt().grecaptcha)||void 0===g||!g.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qo{load(d){return(0,I.Z)(function*(){return new ms(d)})()}clearedOneInstance(){}}const ys="recaptcha",Yi={theme:"light",type:"image"};class pa{constructor(d,g=Object.assign({},Yi),b){this.parameters=g,this.type=ys,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ir(b),this.isInvisible="invisible"===this.parameters.size,pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof d?document.getElementById(d):d;pe(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qo:new Ro,this.validateStartingState()}verify(){var d=this;return(0,I.Z)(function*(){d.assertNotDestroyed();const g=yield d.render(),b=d.getAssertedRecaptcha();return b.getResponse(g)||new Promise(L=>{const Q=je=>{je&&(d.tokenChangeListeners.delete(Q),L(je))};d.tokenChangeListeners.add(Q),d.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof d)d(g);else if("string"==typeof d){const b=Xt()[d];"function"==typeof b&&b(g)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,I.Z)(function*(){if(yield d.init(),!d.widgetId){let g=d.container;if(!d.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}d.widgetId=d.getAssertedRecaptcha().render(g,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,I.Z)(function*(){pe(xe()&&!vi(),d.auth,"internal-error"),yield function Ha(){let E=null;return new Promise(d=>{"complete"!==document.readyState?(E=()=>d(),window.addEventListener("load",E)):d()}).catch(d=>{throw E&&window.removeEventListener("load",E),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const g=yield function du(E){return Vi.apply(this,arguments)}(d.auth);pe(g,d.auth,"internal-error"),d.parameters.sitekey=g})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gc{constructor(d,g){this.verificationId=d,this.onConfirmation=g}confirm(d){const g=as._fromVerification(this.verificationId,d);return this.onConfirmation(g)}}function xl(E,d,g){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,I.Z)(function*(E,d,g){const b=Ir(E),P=yield ga(b,d,(0,j.m9)(g));return new Gc(P,L=>Nr(b,L))})).apply(this,arguments)}function dc(E,d,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);yield xs(!1,b,"phone");const P=yield ga(b.auth,d,(0,j.m9)(g));return new Gc(P,L=>Ms(b,L))})).apply(this,arguments)}function Oo(E,d,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),P=yield ga(b.auth,d,(0,j.m9)(g));return new Gc(P,L=>$o(b,L))})).apply(this,arguments)}function ga(E,d,g){return pu.apply(this,arguments)}function pu(){return(pu=(0,I.Z)(function*(E,d,g){var b;const P=yield g.verify();try{let L;if(pe("string"==typeof P,E,"argument-error"),pe(g.type===ys,E,"argument-error"),L="string"==typeof d?{phoneNumber:d}:d,"session"in L){const Q=L.session;if("phoneNumber"in L)return pe("enroll"===Q.type,E,"internal-error"),(yield gn(E,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{pe("signin"===Q.type,E,"internal-error");const je=(null===(b=L.multiFactorHint)||void 0===b?void 0:b.uid)||L.multiFactorUid;return pe(je,E,"missing-multi-factor-info"),(yield Nu(E,{mfaPendingCredential:Q.credential,mfaEnrollmentId:je,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield ia(E,{phoneNumber:L.phoneNumber,recaptchaToken:P});return Q}}finally{g._reset()}})).apply(this,arguments)}function sr(E,d){return No.apply(this,arguments)}function No(){return(No=(0,I.Z)(function*(E,d){yield eo((0,j.m9)(E),d)})).apply(this,arguments)}let Fu=(()=>{class E{constructor(g){this.providerId=E.PROVIDER_ID,this.auth=Ir(g)}verifyPhoneNumber(g,b){return ga(this.auth,g,(0,j.m9)(b))}static credential(g,b){return as._fromVerification(g,b)}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:P}=g;return b&&P?as._fromTokenResponse(b,P):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Bi(E,d){return d?nt(d):(pe(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Sr extends Bn{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return xi(d,this._buildIdpRequest())}_linkToIdToken(d,g){return xi(d,this._buildIdpRequest(g))}_getReauthenticationResolver(d){return xi(d,this._buildIdpRequest())}_buildIdpRequest(d){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(g.idToken=d),g}}function za(E){return ds(E.auth,new Sr(E),E.bypassAuthState)}function Wa(E){const{auth:d,user:g}=E;return pe(g,d,"internal-error"),Hr(g,new Sr(E),E.bypassAuthState)}function Lu(E){return di.apply(this,arguments)}function di(){return(di=(0,I.Z)(function*(E){const{auth:d,user:g}=E;return pe(g,d,"internal-error"),eo(g,new Sr(E),E.bypassAuthState)})).apply(this,arguments)}class Vs{constructor(d,g,b,P,L=!1){this.auth=d,this.resolver=b,this.user=P,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var d=this;return new Promise(function(){var g=(0,I.Z)(function*(b,P){d.pendingPromise={resolve:b,reject:P};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(L){d.reject(L)}});return function(b,P){return g.apply(this,arguments)}}())}onAuthEvent(d){var g=this;return(0,I.Z)(function*(){const{urlResponse:b,sessionId:P,postBody:L,tenantId:Q,error:je,type:xt}=d;if(je)return void g.reject(je);const jt={auth:g.auth,requestUri:b,sessionId:P,tenantId:Q||void 0,postBody:L||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(xt)(jt))}catch(mn){g.reject(mn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return za;case"linkViaPopup":case"linkViaRedirect":return Lu;case"reauthViaPopup":case"reauthViaRedirect":return Wa;default:Ye(this.auth,"internal-error")}}resolve(d){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Po=new tt(2e3,1e4);function Qi(E,d,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,I.Z)(function*(E,d,g){const b=Ir(E);Be(E,d,es);const P=Bi(b,g);return new v(b,"signInViaPopup",d,P).executeNotNull()})).apply(this,arguments)}function gu(E,d,g){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);Be(b.auth,d,es);const P=Bi(b.auth,g);return new v(b.auth,"reauthViaPopup",d,P,b).executeNotNull()})).apply(this,arguments)}function qa(E,d,g){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);Be(b.auth,d,es);const P=Bi(b.auth,g);return new v(b.auth,"linkViaPopup",d,P,b).executeNotNull()})).apply(this,arguments)}let v=(()=>{class E extends Vs{constructor(g,b,P,L,Q){super(g,b,L,Q),this.provider=P,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var g=this;return(0,I.Z)(function*(){const b=yield g.execute();return pe(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,I.Z)(function*(){Fe(1===g.filter.length,"Popup operations only handle one event");const b=rn();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(P=>{g.reject(P)}),g.resolver._isIframeWebStorageSupported(g.auth,P=>{P||g.reject(Ne(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,P;this.pollId=null!==(P=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Po.get())};g()}}return E.currentPopupAction=null,E})();const m=new Map;class C extends Vs{constructor(d,g,b=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var d=()=>super.execute,g=this;return(0,I.Z)(function*(){let b=m.get(g.auth._key());if(!b){try{const L=(yield function O(E,d){return U.apply(this,arguments)}(g.resolver,g.auth))?yield d().call(g):null;b=()=>Promise.resolve(L)}catch(P){b=()=>Promise.reject(P)}m.set(g.auth._key(),b)}return g.bypassAuthState||m.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(d){var g=()=>super.onAuthEvent,b=this;return(0,I.Z)(function*(){if("signInViaRedirect"===d.type)return g().call(b,d);if("unknown"!==d.type){if(d.eventId){const P=yield b.auth._redirectUserForId(d.eventId);if(P)return b.user=P,g().call(b,d);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function U(){return(U=(0,I.Z)(function*(E,d){const g=En(d),b=Ct(E);if(!(yield b._isAvailable()))return!1;const P="true"===(yield b._get(g));return yield b._remove(g),P})).apply(this,arguments)}function G(E,d){return he.apply(this,arguments)}function he(){return(he=(0,I.Z)(function*(E,d){return Ct(E)._set(En(d),"true")})).apply(this,arguments)}function Le(){m.clear()}function bt(E,d){m.set(E._key(),d)}function Ct(E){return nt(E._redirectPersistence)}function En(E){return se("pendingRedirect",E.config.apiKey,E.name)}function Er(E,d,g){return function Xi(E,d,g){return qr.apply(this,arguments)}(E,d,g)}function qr(){return(qr=(0,I.Z)(function*(E,d,g){const b=Ir(E);Be(E,d,es),yield b._initializationPromise;const P=Bi(b,g);return yield G(P,b),P._openRedirect(b,d,"signInViaRedirect")})).apply(this,arguments)}function A(E,d,g){return function R(E,d,g){return B.apply(this,arguments)}(E,d,g)}function B(){return(B=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);Be(b.auth,d,es),yield b.auth._initializationPromise;const P=Bi(b.auth,g);yield G(P,b.auth);const L=yield an(b);return P._openRedirect(b.auth,d,"reauthViaRedirect",L)})).apply(this,arguments)}function X(E,d,g){return function ge(E,d,g){return be.apply(this,arguments)}(E,d,g)}function be(){return(be=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);Be(b.auth,d,es),yield b.auth._initializationPromise;const P=Bi(b.auth,g);yield xs(!1,b,d.providerId),yield G(P,b.auth);const L=yield an(b);return P._openRedirect(b.auth,d,"linkViaRedirect",L)})).apply(this,arguments)}function We(E,d){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,I.Z)(function*(E,d){return yield Ir(E)._initializationPromise,Bt(E,d,!1)})).apply(this,arguments)}function Bt(E,d){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,I.Z)(function*(E,d,g=!1){const b=Ir(E),P=Bi(b,d),Q=yield new C(b,P,g).execute();return Q&&!g&&(delete Q.user._redirectEventId,yield b._persistUserIfCurrent(Q.user),yield b._setRedirectUser(null,d)),Q})).apply(this,arguments)}function an(E){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,I.Z)(function*(E){const d=rn(`${E.uid}:::`);return E._redirectEventId=d,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),d})).apply(this,arguments)}class Zr{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(d,b)&&(g=!0,this.sendToConsumer(d,b),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function vs(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hc(E);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=d,g=!0)),g}sendToConsumer(d,g){var b;if(d.error&&!hc(d)){const P=(null===(b=d.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(Ne(this.auth,P))}else g.onAuthEvent(d)}isEventForConsumer(d,g){const b=null===g.eventId||!!d.eventId&&d.eventId===g.eventId;return g.filter.includes(d.type)&&b}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ma(d))}saveEventToCache(d){this.cachedEventUids.add(ma(d)),this.lastProcessedEventTime=Date.now()}}function ma(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(d=>d).join("-")}function hc({type:E,error:d}){return"unknown"===E&&"auth/no-auth-event"===d?.code}function _s(E){return fo.apply(this,arguments)}function fo(){return(fo=(0,I.Z)(function*(E,d={}){return yt(E,"GET","/v1/projects",d)})).apply(this,arguments)}const Za=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fc=/^https?/;function pc(){return(pc=(0,I.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:d}=yield _s(E);for(const g of d)try{if(Gd(g))return}catch{}Ye(E,"unauthorized-domain")})).apply(this,arguments)}function Gd(E){const d=De(),{protocol:g,hostname:b}=new URL(d);if(E.startsWith("chrome-extension://")){const Q=new URL(E);return""===Q.hostname&&""===b?"chrome-extension:"===g&&E.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===g&&Q.hostname===b}if(!fc.test(g))return!1;if(Za.test(E))return b===E;const P=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(b)}const zd=new tt(3e4,6e4);function Rl(){const E=Xt().___jsl;if(E?.H)for(const d of Object.keys(E.H))if(E.H[d].r=E.H[d].r||[],E.H[d].L=E.H[d].L||[],E.H[d].r=[...E.H[d].L],E.CP)for(let g=0;g<E.CP.length;g++)E.CP[g]=null}let zc=null;function Uu(E){return zc=zc||function Vg(E){return new Promise((d,g)=>{var b,P,L;function Q(){Rl(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Rl(),g(Ne(E,"network-request-failed"))},timeout:zd.get()})}if(null!==(P=null===(b=Xt().gapi)||void 0===b?void 0:b.iframes)&&void 0!==P&&P.Iframe)d(gapi.iframes.getContext());else{if(null===(L=Xt().gapi)||void 0===L||!L.load){const je=$n("iframefcb");return Xt()[je]=()=>{gapi.load?Q():g(Ne(E,"network-request-failed"))},ho(`https://apis.google.com/js/api.js?onload=${je}`).catch(xt=>g(xt))}Q()}}).catch(d=>{throw zc=null,d})}(E),zc}const Ug=new tt(5e3,15e3),bf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wd(E){const d=E.config;pe(d.authDomain,E,"auth-domain-config-required");const g=d.emulator?ct(d,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:d.apiKey,appName:E.name,v:p.SDK_VERSION},P=jg.get(E.config.apiHost);P&&(b.eid=P);const L=E._getFrameworks();return L.length&&(b.fw=L.join(",")),`${g}?${(0,j.xO)(b).slice(1)}`}function qd(){return qd=(0,I.Z)(function*(E){const d=yield Uu(E),g=Xt().gapi;return pe(g,E,"internal-error"),d.open({where:document.body,url:Wd(E),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bf,dontclear:!0},b=>new Promise(function(){var P=(0,I.Z)(function*(L,Q){yield b.restyle({setHideOnLeave:!1});const je=Ne(E,"network-request-failed"),xt=Xt().setTimeout(()=>{Q(je)},Ug.get());function jt(){Xt().clearTimeout(xt),L(b)}b.ping(jt).then(jt,()=>{Q(je)})});return function(L,Q){return P.apply(this,arguments)}}()))}),qd.apply(this,arguments)}const Bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gc{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nl(E,d,g,b,P,L){pe(E.config.authDomain,E,"auth-domain-config-required"),pe(E.config.apiKey,E,"invalid-api-key");const Q={apiKey:E.config.apiKey,appName:E.name,authType:g,redirectUrl:b,v:p.SDK_VERSION,eventId:P};if(d instanceof es){d.setDefaultLanguage(E.languageCode),Q.providerId=d.providerId||"",(0,j.xb)(d.getCustomParameters())||(Q.customParameters=JSON.stringify(d.getCustomParameters()));for(const[xt,jt]of Object.entries(L||{}))Q[xt]=jt}if(d instanceof Xs){const xt=d.getScopes().filter(jt=>""!==jt);xt.length>0&&(Q.scopes=xt.join(","))}E.tenantId&&(Q.tid=E.tenantId);const je=Q;for(const xt of Object.keys(je))void 0===je[xt]&&delete je[xt];return`${function Qd({config:E}){return E.emulator?ct(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,j.xO)(je).slice(1)}`}const qc="webStorageSupport",Sf=class Hg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hn,this._completeRedirectFn=Bt,this._overrideRedirectResult=bt}_openPopup(d,g,b,P){var L=this;return(0,I.Z)(function*(){var Q;Fe(null===(Q=L.eventManagers[d._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const je=Nl(d,g,b,De(),P);return function Kr(E,d,g,b=500,P=600){const L=Math.max((window.screen.availHeight-P)/2,0).toString(),Q=Math.max((window.screen.availWidth-b)/2,0).toString();let je="";const xt=Object.assign(Object.assign({},Bu),{width:b.toString(),height:P.toString(),top:L,left:Q}),jt=(0,j.z$)().toLowerCase();g&&(je=ye(jt)?"_blank":g),Z(jt)&&(d=d||"http://localhost",xt.scrollbars="yes");const mn=Object.entries(xt).reduce((ko,[ya,yc])=>`${ko}${ya}=${yc},`,"");if(function ze(E=(0,j.z$)()){var d;return K(E)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(jt)&&"_self"!==je)return function Cf(E,d){const g=document.createElement("a");g.href=E,g.target=d;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(d||"",je),new gc(null);const Ar=window.open(d||"",je,mn);pe(Ar,E,"popup-blocked");try{Ar.focus()}catch{}return new gc(Ar)}(d,je,rn())})()}_openRedirect(d,g,b,P){var L=this;return(0,I.Z)(function*(){return yield L._originValidation(d),function Yn(E){Xt().location.href=E}(Nl(d,g,b,De(),P)),new Promise(()=>{})})()}_initialize(d){const g=d._key();if(this.eventManagers[g]){const{manager:P,promise:L}=this.eventManagers[g];return P?Promise.resolve(P):(Fe(L,"If manager is not set, promise should be"),L)}const b=this.initAndGetManager(d);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(d){var g=this;return(0,I.Z)(function*(){const b=yield function $g(E){return qd.apply(this,arguments)}(d),P=new Zr(d);return b.register("authEvent",L=>(pe(L?.authEvent,d,"invalid-auth-event"),{status:P.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[d._key()]={manager:P},g.iframes[d._key()]=b,P})()}_isIframeWebStorageSupported(d,g){this.iframes[d._key()].send(qc,{type:qc},P=>{var L;const Q=null===(L=P?.[0])||void 0===L?void 0:L[qc];void 0!==Q&&g(!!Q),Ye(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Df(E){return pc.apply(this,arguments)}(d)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ht()||z()||K()}};class Xd{constructor(d){this.factorId=d}_process(d,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(d,g.credential,b);case"signin":return this._finalizeSignIn(d,g.credential);default:return Ce("unexpected MultiFactorSessionType")}}}class Jd extends Xd{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Jd(d)}_finalizeEnroll(d,g,b){return function Fr(E,d){return yt(E,"POST","/v2/accounts/mfaEnrollment:finalize",Tt(E,d))}(d,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,g){return function lo(E,d){return yt(E,"POST","/v2/accounts/mfaSignIn:finalize",Tt(E,d))}(d,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pl=(()=>{class E{constructor(){}static assertion(g){return Jd._fromCredential(g)}}return E.FACTOR_ID="phone",E})();var Es="@firebase/auth";class Ii{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var g=this;return(0,I.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const g=this.auth.onIdTokenChanged(b=>{d(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,g),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const g=this.internalListeners.get(d);g&&(this.internalListeners.delete(d),g(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function Lr(E){(0,p._registerComponent)(new fe.wA("auth",(d,{options:g})=>{const b=d.getProvider("app").getImmediate(),P=d.getProvider("heartbeat"),{apiKey:L,authDomain:Q}=b.options;return((je,xt)=>{pe(L&&!L.includes(":"),"invalid-api-key",{appName:je.name}),pe(!Q?.includes(":"),"argument-error",{appName:je.name});const jt={apiKey:L,authDomain:Q,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ir(E)},mn=new Gi(je,xt,jt);return function ht(E,d){const g=d?.persistence||[],b=(Array.isArray(g)?g:[g]).map(nt);d?.errorMap&&E._updateErrorMap(d.errorMap),E._initializeWithPersistence(b,d?.popupRedirectResolver)}(mn,g),mn})(b,P)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,g,b)=>{d.getProvider("auth-internal").initialize()})),(0,p._registerComponent)(new fe.wA("auth-internal",d=>{const g=Ir(d.getProvider("auth").getImmediate());return new Ii(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,p.registerVersion)(Es,"0.21.4",function mu(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,p.registerVersion)(Es,"0.21.4","esm2017")}("Browser")},2090:(mt,Te,V)=>{V.d(Te,{$s:()=>Pt,BH:()=>Be,G6:()=>Ge,L:()=>we,LL:()=>me,Pz:()=>Ue,Sg:()=>ot,UG:()=>Fe,US:()=>fe,ZB:()=>ce,ZR:()=>yn,aH:()=>Ne,b$:()=>dt,eu:()=>tt,hl:()=>et,jU:()=>ut,m9:()=>jn,ne:()=>Nt,pd:()=>er,r3:()=>Pn,ru:()=>nt,tV:()=>re,uI:()=>Ce,vZ:()=>pr,w1:()=>De,xO:()=>wr,xb:()=>ar,z$:()=>pe,zI:()=>ct,zd:()=>Jn});const ae=function(se){const ne=[];let q=0;for(let Z=0;Z<se.length;Z++){let z=se.charCodeAt(Z);z<128?ne[q++]=z:z<2048?(ne[q++]=z>>6|192,ne[q++]=63&z|128):55296==(64512&z)&&Z+1<se.length&&56320==(64512&se.charCodeAt(Z+1))?(z=65536+((1023&z)<<10)+(1023&se.charCodeAt(++Z)),ne[q++]=z>>18|240,ne[q++]=z>>12&63|128,ne[q++]=z>>6&63|128,ne[q++]=63&z|128):(ne[q++]=z>>12|224,ne[q++]=z>>6&63|128,ne[q++]=63&z|128)}return ne},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(se,ne){if(!Array.isArray(se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let z=0;z<se.length;z+=3){const ye=se[z],ke=z+1<se.length,gt=ke?se[z+1]:0,oe=z+2<se.length,ie=oe?se[z+2]:0;let ze=(15&gt)<<2|ie>>6,rt=63&ie;oe||(rt=64,ke||(ze=64)),Z.push(q[ye>>2],q[(3&ye)<<4|gt>>4],q[ze],q[rt])}return Z.join("")},encodeString(se,ne){return this.HAS_NATIVE_SUPPORT&&!ne?btoa(se):this.encodeByteArray(ae(se),ne)},decodeString(se,ne){return this.HAS_NATIVE_SUPPORT&&!ne?atob(se):function(se){const ne=[];let q=0,Z=0;for(;q<se.length;){const z=se[q++];if(z<128)ne[Z++]=String.fromCharCode(z);else if(z>191&&z<224){const ye=se[q++];ne[Z++]=String.fromCharCode((31&z)<<6|63&ye)}else if(z>239&&z<365){const oe=((7&z)<<18|(63&se[q++])<<12|(63&se[q++])<<6|63&se[q++])-65536;ne[Z++]=String.fromCharCode(55296+(oe>>10)),ne[Z++]=String.fromCharCode(56320+(1023&oe))}else{const ye=se[q++],ke=se[q++];ne[Z++]=String.fromCharCode((15&z)<<12|(63&ye)<<6|63&ke)}}return ne.join("")}(this.decodeStringToByteArray(se,ne))},decodeStringToByteArray(se,ne){this.init_();const q=ne?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let z=0;z<se.length;){const ye=q[se.charAt(z++)],gt=z<se.length?q[se.charAt(z)]:0;++z;const ie=z<se.length?q[se.charAt(z)]:64;++z;const de=z<se.length?q[se.charAt(z)]:64;if(++z,null==ye||null==gt||null==ie||null==de)throw new Ee;Z.push(ye<<2|gt>>4),64!==ie&&(Z.push(gt<<4&240|ie>>2),64!==de&&Z.push(ie<<6&192|de))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let se=0;se<this.ENCODED_VALS.length;se++)this.byteToCharMap_[se]=this.ENCODED_VALS.charAt(se),this.charToByteMap_[this.byteToCharMap_[se]]=se,this.byteToCharMapWebSafe_[se]=this.ENCODED_VALS_WEBSAFE.charAt(se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[se]]=se,se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(se)]=se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(se)]=se)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const we=function(se){return function(se){const ne=ae(se);return fe.encodeByteArray(ne,!0)}(se).replace(/\./g,"")},re=function(se){try{return fe.decodeString(se,!0)}catch(ne){console.error("base64Decode failed: ",ne)}return null};function ce(se,ne){if(!(ne instanceof Object))return ne;switch(ne.constructor){case Date:return new Date(ne.getTime());case Object:void 0===se&&(se={});break;case Array:se=[];break;default:return ne}for(const q in ne)!ne.hasOwnProperty(q)||!Je(q)||(se[q]=ce(se[q],ne[q]));return se}function Je(se){return"__proto__"!==se}const $e=()=>{try{return function qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const se=process.env.__FIREBASE_DEFAULTS__;return se?JSON.parse(se):void 0})()||(()=>{if(typeof document>"u")return;let se;try{se=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ne=se&&re(se[1]);return ne&&JSON.parse(ne)})()}catch(se){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${se}`)}},Ne=()=>{var se;return null===(se=$e())||void 0===se?void 0:se.config},Ue=se=>{var ne;return null===(ne=$e())||void 0===ne?void 0:ne[`_${se}`]};class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ne,q)=>{this.resolve=ne,this.reject=q})}wrapCallback(ne){return(q,Z)=>{q?this.reject(q):this.resolve(Z),"function"==typeof ne&&(this.promise.catch(()=>{}),1===ne.length?ne(q):ne(q,Z))}}}function ot(se,ne){if(se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=ne||"demo-project",z=se.iat||0,ye=se.sub||se.user_id;if(!ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:z,exp:z+3600,auth_time:z,sub:ye,user_id:ye,firebase:{sign_in_provider:"custom",identities:{}}},se);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(ke)),""].join(".")}function pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function Fe(){var se;const ne=null===(se=$e())||void 0===se?void 0:se.forceEnvironment;if("node"===ne)return!0;if("browser"===ne)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ut(){return"object"==typeof self&&self.self===self}function nt(){const se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof se&&void 0!==se.id}function dt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){const se=pe();return se.indexOf("MSIE ")>=0||se.indexOf("Trident/")>=0}function Ge(){return!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function et(){try{return"object"==typeof indexedDB}catch{return!1}}function tt(){return new Promise((se,ne)=>{try{let q=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(Z);z.onsuccess=()=>{z.result.close(),q||self.indexedDB.deleteDatabase(Z),se(!0)},z.onupgradeneeded=()=>{q=!1},z.onerror=()=>{var ye;ne((null===(ye=z.error)||void 0===ye?void 0:ye.message)||"")}}catch(q){ne(q)}})}function ct(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class yn extends Error{constructor(ne,q,Z){super(q),this.code=ne,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,me.prototype.create)}}class me{constructor(ne,q,Z){this.service=ne,this.serviceName=q,this.errors=Z}create(ne,...q){const Z=q[0]||{},z=`${this.service}/${ne}`,ye=this.errors[ne],ke=ye?function Tt(se,ne){return se.replace(yt,(q,Z)=>{const z=ne[Z];return null!=z?String(z):`<${Z}?>`})}(ye,Z):"Error";return new yn(z,`${this.serviceName}: ${ke} (${z}).`,Z)}}const yt=/\{\$([^}]+)}/g;function Pn(se,ne){return Object.prototype.hasOwnProperty.call(se,ne)}function ar(se){for(const ne in se)if(Object.prototype.hasOwnProperty.call(se,ne))return!1;return!0}function pr(se,ne){if(se===ne)return!0;const q=Object.keys(se),Z=Object.keys(ne);for(const z of q){if(!Z.includes(z))return!1;const ye=se[z],ke=ne[z];if(pt(ye)&&pt(ke)){if(!pr(ye,ke))return!1}else if(ye!==ke)return!1}for(const z of Z)if(!q.includes(z))return!1;return!0}function pt(se){return null!==se&&"object"==typeof se}function wr(se){const ne=[];for(const[q,Z]of Object.entries(se))Array.isArray(Z)?Z.forEach(z=>{ne.push(encodeURIComponent(q)+"="+encodeURIComponent(z))}):ne.push(encodeURIComponent(q)+"="+encodeURIComponent(Z));return ne.length?"&"+ne.join("&"):""}function Jn(se){const ne={};return se.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[z,ye]=Z.split("=");ne[decodeURIComponent(z)]=decodeURIComponent(ye)}}),ne}function er(se){const ne=se.indexOf("?");if(!ne)return"";const q=se.indexOf("#",ne);return se.substring(ne,q>0?q:void 0)}function Nt(se,ne){const q=new Mt(se,ne);return q.subscribe.bind(q)}class Mt{constructor(ne,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{ne(this)}).catch(Z=>{this.error(Z)})}next(ne){this.forEachObserver(q=>{q.next(ne)})}error(ne){this.forEachObserver(q=>{q.error(ne)}),this.close(ne)}complete(){this.forEachObserver(ne=>{ne.complete()}),this.close()}subscribe(ne,q,Z){let z;if(void 0===ne&&void 0===q&&void 0===Z)throw new Error("Missing Observer.");z=function Tn(se,ne){if("object"!=typeof se||null===se)return!1;for(const q of ne)if(q in se&&"function"==typeof se[q])return!0;return!1}(ne,["next","error","complete"])?ne:{next:ne,error:q,complete:Z},void 0===z.next&&(z.next=vn),void 0===z.error&&(z.error=vn),void 0===z.complete&&(z.complete=vn);const ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),ye}unsubscribeOne(ne){void 0===this.observers||void 0===this.observers[ne]||(delete this.observers[ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ne){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,ne)}sendOne(ne,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ne])try{q(this.observers[ne])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(ne){this.finalized||(this.finalized=!0,void 0!==ne&&(this.finalError=ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vn(){}function Pt(se,ne=1e3,q=2){const Z=ne*Math.pow(q,se),z=Math.round(.5*Z*(Math.random()-.5)*2);return Math.min(144e5,Z+z)}function jn(se){return se&&se._delegate?se._delegate:se}},5256:(mt,Te,V)=>{var I=V(1481),j=V(2011),p=V(4650),ae=V(7579),ue=V(9646),fe=V(9751),Ee=V(8996),ve=V(6451),we=V(5363),re=V(3900),te=V(4004),ce=V(6063);class Je extends ae.x{constructor(e=1/0,t=1/0,i=ce.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:f}=this;t||(i.push(e),!a&&i.push(l.now()+f)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,l=a.slice();for(let f=0;f<l.length&&!e.closed;f+=i?1:2)e.next(l[f]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<i.length&&i.splice(0,i.length-l),!a){const f=t.now();let w=0;for(let M=1;M<i.length&&i[M]<=f;M+=2)w=M;w&&i.splice(0,w+1)}}}var qe=V(3099);function st(n,e,t){let i,a=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):i=n??1/0,(0,qe.B)({connector:()=>new Je(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var vt=V(590),Oe=V(576);function $e(n,e){return(0,Oe.m)(e)?(0,re.w)(()=>n,e):(0,re.w)(()=>n)}var He=V(9468),Ye=V(9300),Ne=V(2122),Ue=V(6895);V(259);var me=V(5861),Tt=V(9681),yt=V(4859),St=V(2090),Mn=V(1877);const In=new Map,cn={activated:!1,tokenObservers:[]},Zn={initialized:!1,enabled:!1};function Dn(n){return In.get(n)||Object.assign({},cn)}function Pn(){return Zn}class wr{constructor(e,t,i,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new St.BH,yield function Jn(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new St.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yt=new St.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Mt(n){if(!Dn(n).activated)throw Yt.create("use-before-activation",{appName:n.name})}function vn(n,e){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,me.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const ee=yield a.getHeartbeatsHeader();ee&&(i["X-Firebase-Client"]=ee)}const l={method:"POST",body:JSON.stringify(e),headers:i};let f,w;try{f=yield fetch(n,l)}catch(ee){throw Yt.create("fetch-network-error",{originalErrorMessage:ee?.message})}if(200!==f.status)throw Yt.create("fetch-status-error",{httpStatus:f.status});try{w=yield f.json()}catch(ee){throw Yt.create("fetch-parse-error",{originalErrorMessage:ee?.message})}const M=w.ttl.match(/^([\d.]+)(s)$/);if(!M||!M[2]||isNaN(Number(M[1])))throw Yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const k=1e3*Number(M[1]),W=Date.now();return{token:w.token,expireTimeMillis:W+k,issuedAtTimeMillis:W}})).apply(this,arguments)}function ei(n,e){const{projectId:t,appId:i,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const qt="firebase-app-check-store";let Vn=null;function at(){return Vn||(Vn=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var a;e(Yt.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(qt,{keyPath:"compositeKey"})}}catch(t){e(Yt.create("storage-open",{originalErrorMessage:t?.message}))}}),Vn)}function jn(){return(jn=(0,me.Z)(function*(n,e){const i=(yield at()).transaction(qt,"readwrite"),l=i.objectStore(qt).put({compositeKey:n,value:e});return new Promise((f,w)=>{l.onsuccess=M=>{f()},i.onerror=M=>{var k;w(Yt.create("storage-set",{originalErrorMessage:null===(k=M.target.error)||void 0===k?void 0:k.message}))}})})).apply(this,arguments)}const Z=new Mn.Yd("@firebase/app-check");function ke(n,e){return(0,St.hl)()?function _t(n,e){return function on(n,e){return jn.apply(this,arguments)}(function q(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Z.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ie(){return Pn().enabled}function K(){return de.apply(this,arguments)}function de(){return(de=(0,me.Z)(function*(){const n=Pn();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const rt={error:"UNKNOWN_ERROR"};function Ht(n){return St.US.encodeString(JSON.stringify(n),!1)}function rr(n){return ir.apply(this,arguments)}function ir(){return(ir=(0,me.Z)(function*(n,e=!1){const t=n.app;Mt(t);const i=Dn(t);let l,a=i.token;if(a&&!Ys(a)&&(i.token=void 0,a=void 0),!a){const M=yield i.cachedTokenPromise;M&&(Ys(M)?a=M:yield ke(t,void 0))}if(!e&&a&&Ys(a))return{token:a.token};let w,f=!1;if(ie()){i.exchangeTokenPromise||(i.exchangeTokenPromise=vn(ei(t,yield K()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),f=!0);const M=yield i.exchangeTokenPromise;return yield ke(t,M),i.token=M,{token:M.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),f=!0),a=yield Dn(t).exchangeTokenPromise}catch(M){"appCheck/throttled"===M.code?Z.warn(M.message):Z.error(M),l=M}return a?l?w=Ys(a)?{token:a.token,internalError:l}:Bo(l):(w={token:a.token},i.token=a,yield ke(t,a)):w=Bo(l),f&&Uo(t,w),w})).apply(this,arguments)}function Gi(n,e){const t=Dn(n),i=t.tokenObservers.filter(a=>a.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Ir(n){const{app:e}=n,t=Dn(e);let i=t.tokenRefresher;i||(i=function Ti(n){const{app:e}=n;return new wr((0,me.Z)(function*(){let i;if(i=Dn(e).token?yield rr(n,!0):yield rr(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Dn(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Uo(n,e){const t=Dn(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function Ys(n){return n.expireTimeMillis-Date.now()>0}function Bo(n){return{token:Ht(rt),error:n}}class yo{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Dn(this.app);for(const t of e)Gi(this.app,t.next);return Promise.resolve()}}const Wn="app-check-internal";!function yr(){(0,Tt._registerComponent)(new yt.wA("app-check",n=>function bn(n,e){return new yo(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Wn).initialize()})),(0,Tt._registerComponent)(new yt.wA(Wn,n=>function Bn(n){return{getToken:e=>rr(n,e),addTokenListener:e=>function Ji(n,e,t,i){const{app:a}=n,l=Dn(a);if(l.tokenObservers=[...l.tokenObservers,{next:t,error:i,type:e}],l.token&&Ys(l.token)){const w=l.token;Promise.resolve().then(()=>{t({token:w.token}),Ir(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Ir(n))}(n,"INTERNAL",e),removeTokenListener:e=>Gi(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Tt.registerVersion)("@firebase/app-check","0.6.4")}();class _o{constructor(){return(0,Ne.vb)("app-check")}}typeof window<"u"&&window;var Eo=V(9260);const su=new p.OlP("angularfire2.auth.use-emulator"),Ru=new p.OlP("angularfire2.auth.settings"),Oi=new p.OlP("angularfire2.auth.tenant-id"),Aa=new p.OlP("angularfire2.auth.langugage-code"),Zi=new p.OlP("angularfire2.auth.use-device-language"),Ki=new p.OlP("angularfire.auth.persistence"),ou=(n,e,t,i,a,l,f,w)=>(0,j.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const M=e.runOutsideAngular(()=>n.auth());if(t&&M.useEmulator(...t),i&&(M.tenantId=i),M.languageCode=a,l&&M.useDeviceLanguage(),f)for(const[k,W]of Object.entries(f))M.settings[k]=W;return w&&M.setPersistence(w),M},[t,i,a,l,f,w]);let us=(()=>{class n{constructor(t,i,a,l,f,w,M,k,W,ee,_e,Ke){const Qe=new ae.x,wt=(0,ue.of)(void 0).pipe((0,we.Q)(f.outsideAngular),(0,re.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,te.U)(()=>(0,j.on)(t,l,i)),(0,te.U)(Ft=>ou(Ft,l,w,k,W,ee,M,_e)),st({bufferSize:1,refCount:!1}));if((0,Ue.PM)(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ue.of)(null);else{wt.pipe((0,vt.P)()).subscribe();const Xn=wt.pipe((0,re.w)(xn=>xn.getRedirectResult().then(wn=>wn,()=>null)),Ne.iC,st({bufferSize:1,refCount:!1})),Mr=wt.pipe((0,re.w)(xn=>new fe.y(wn=>({unsubscribe:l.runOutsideAngular(()=>xn.onAuthStateChanged(Nn=>wn.next(Nn),Nn=>wn.error(Nn),()=>wn.complete()))})))),Un=wt.pipe((0,re.w)(xn=>new fe.y(wn=>({unsubscribe:l.runOutsideAngular(()=>xn.onIdTokenChanged(Nn=>wn.next(Nn),Nn=>wn.error(Nn),()=>wn.complete()))}))));this.authState=Xn.pipe($e(Mr),(0,He.R)(f.outsideAngular),(0,we.Q)(f.insideAngular)),this.user=Xn.pipe($e(Un),(0,He.R)(f.outsideAngular),(0,we.Q)(f.insideAngular)),this.idToken=this.user.pipe((0,re.w)(xn=>xn?(0,Ee.D)(xn.getIdToken()):(0,ue.of)(null))),this.idTokenResult=this.user.pipe((0,re.w)(xn=>xn?(0,Ee.D)(xn.getIdTokenResult()):(0,ue.of)(null))),this.credential=(0,ve.T)(Xn,Qe,this.authState.pipe((0,Ye.h)(xn=>!xn))).pipe((0,te.U)(xn=>xn?.user?xn:null),(0,He.R)(f.outsideAngular),(0,we.Q)(f.insideAngular))}return(0,j.pX)(this,wt,l,{spy:{apply:(Ft,Xn,Mr)=>{(Ft.startsWith("signIn")||Ft.startsWith("createUser"))&&Mr.then(Un=>Qe.next(Un))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(j.Dh),p.LFG(j.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ne.HU),p.LFG(su,8),p.LFG(Ru,8),p.LFG(Oi,8),p.LFG(Aa,8),p.LFG(Zi,8),p.LFG(Ki,8),p.LFG(_o,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gi=(()=>{class n{constructor(){Eo.Z.registerVersion("angularfire",Ne.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[us]}),n})();var wo=V(4986),Io=V(8675),jo=V(4482),cs=V(5403);function xa(){return(0,jo.e)((n,e)=>{let t,i=!1;n.subscribe((0,cs.x)(e,a=>{const l=t;t=a,i&&e.next([l,a]),i=!0}))})}var ls=V(5026),As=V(4671);function eo(n,e){return n===e}V(9568);var At,xs=V(3942),Do=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hr={},ds=ds||{},zt=Do||self;function Nr(){}function qn(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ms(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var $o="closure_uid_"+(1e9*Math.random()>>>0),to=0;function Gr(n,e,t){return n.call.apply(n.bind,arguments)}function no(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function vr(n,e,t){return(vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gr:no).apply(null,arguments)}function Ni(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function pn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,a,l){for(var f=Array(arguments.length-2),w=2;w<arguments.length;w++)f[w-2]=arguments[w];return e.prototype[a].apply(i,f)}}function mi(){this.s=this.s,this.o=this.o}mi.prototype.s=!1,mi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function dr(n){Object.prototype.hasOwnProperty.call(n,$o)&&n[$o]||(n[$o]=++to)}(this)},mi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ma=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Pr(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function aa(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(qn(i)){const a=n.length||0,l=i.length||0;n.length=a+l;for(let f=0;f<l;f++)n[a+f]=i[f]}else n.push(i)}}function nr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}nr.prototype.h=function(){this.defaultPrevented=!0};var Qt=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",Nr,e),zt.removeEventListener("test",Nr,e)}catch{}return n}();function Pi(n){return/^[\s\xa0]*$/.test(n)}var au=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ro(n,e){return n<e?-1:n>e?1:0}function hs(){var n=zt.navigator;return n&&(n=n.userAgent)?n:""}function Cr(n){return-1!=hs().indexOf(n)}function ua(n){return ua[" "](n),n}ua[" "]=Nr;var fs,n,Ho=Cr("Opera"),Me=Cr("Trident")||Cr("MSIE"),ln=Cr("Edge"),Oa=ln||Me,Na=Cr("Gecko")&&!(-1!=hs().toLowerCase().indexOf("webkit")&&!Cr("Edge"))&&!(Cr("Trident")||Cr("MSIE"))&&!Cr("Edge"),Tr=-1!=hs().toLowerCase().indexOf("webkit")&&!Cr("Edge");function ca(){var n=zt.document;return n?n.documentMode:void 0}e:{var ki="",Rs=(n=hs(),Na?/rv:([^\);]+)(\)|;)/.exec(n):ln?/Edge\/([\d\.]+)/.exec(n):Me?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Tr?/WebKit\/(\S+)/.exec(n):Ho?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Rs&&(ki=Rs?Rs[1]:""),Me){var bo=ca();if(null!=bo&&bo>parseFloat(ki)){fs=String(bo);break e}}fs=ki}var io={};var ii=zt.document&&Me&&(ca()||parseInt(fs,10))||void 0;function ts(n,e){if(nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Na){e:{try{ua(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ps[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ts.X.h.call(this)}}pn(ts,nr);var ps={2:"touch",3:"pen",4:"mouse"};ts.prototype.h=function(){ts.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fi="closure_listenable_"+(1e6*Math.random()|0),uu=0;function To(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=a,this.key=++uu,this.ba=this.ea=!1}function So(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function la(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function gs(n){const e={};for(const t in n)e[t]=n[t];return e}const Ns="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pa(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let l=0;l<Ns.length;l++)t=Ns[l],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Ps(n){this.src=n,this.g={},this.h=0}function so(n,e){var t=e.type;if(t in n.g){var l,i=n.g[t],a=Ma(i,e);(l=0<=a)&&Array.prototype.splice.call(i,a,1),l&&(So(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ka(n,e,t,i){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==i)return a}return-1}Ps.prototype.add=function(n,e,t,i,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var f=ka(n,e,i,a);return-1<f?(e=n[f],t||(e.ea=!1)):((e=new To(e,this.src,l,!!i,a)).ea=t,n.push(e)),e};var Ao="closure_lm_"+(1e6*Math.random()|0),cu={};function Ou(n,e,t,i,a){if(i&&i.once)return lu(n,e,t,i,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Ou(n,e[l],t,i,a);return null}return t=Va(t),n&&n[Fi]?n.N(e,t,Ms(i)?!!i.capture:!!i,a):da(n,e,t,!1,i,a)}function da(n,e,t,i,a,l){if(!e)throw Error("Invalid event type");var f=Ms(a)?!!a.capture:!!a,w=Sn(n);if(w||(n[Ao]=w=new Ps(n)),(t=w.add(e,t,i,f,l)).proxy)return t;if(i=function Fa(){const e=yi;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Qt||(a=f),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(zr(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function lu(n,e,t,i,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)lu(n,e[l],t,i,a);return null}return t=Va(t),n&&n[Fi]?n.O(e,t,Ms(i)?!!i.capture:!!i,a):da(n,e,t,!0,i,a)}function La(n,e,t,i,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)La(n,e[l],t,i,a);else i=Ms(i)?!!i.capture:!!i,t=Va(t),n&&n[Fi]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ka(l=n.g[e],t,i,a))&&(So(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Sn(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ka(e,t,i,a)),(t=-1<n?e[n]:null)&&oo(t))}function oo(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Fi])so(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(zr(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Sn(e))?(so(t,n),0==t.h&&(t.src=null,e[Ao]=null)):So(n)}}}function zr(n){return n in cu?cu[n]:cu[n]="on"+n}function yi(n,e){if(n.ba)n=!0;else{e=new ts(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&oo(n),n=t.call(i,e)}return n}function Sn(n){return(n=n[Ao])instanceof Ps?n:null}var Go="__closure_events_fn_"+(1e9*Math.random()>>>0);function Va(n){return"function"==typeof n?n:(n[Go]||(n[Go]=function(e){return n.handleEvent(e)}),n[Go])}function gn(){mi.call(this),this.i=new Ps(this),this.P=this,this.I=null}function Fr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new nr(e,n);else if(e instanceof nr)e.target=e.target||n;else{var a=e;Pa(e=new nr(i,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var f=e.g=t[l];a=Ua(f,i,!0,e)&&a}if(a=Ua(f=e.g=n,i,!0,e)&&a,a=Ua(f,i,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Ua(f=e.g=t[l],i,!1,e)&&a}function Ua(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.ba&&f.capture==t){var w=f.listener,M=f.ha||f.src;f.ea&&so(n.i,f),a=!1!==w.call(M,i)&&a}}return a&&!i.defaultPrevented}pn(gn,mi),gn.prototype[Fi]=!0,gn.prototype.removeEventListener=function(n,e,t,i){La(this,n,e,t,i)},gn.prototype.M=function(){if(gn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)So(t[i]);delete n.g[e],n.h--}}this.I=null},gn.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},gn.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var zo=zt.JSON.stringify;function Wo(){var n=Rt;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var J,T=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new F,n=>n.reset());class F{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function x(n){zt.setTimeout(()=>{throw n},0)}function H(n,e){J||function Se(){var n=zt.Promise.resolve(void 0);J=function(){n.then(hn)}}(),Re||(J(),Re=!0),Rt.add(n,e)}var Re=!1,Rt=new class qo{constructor(){this.h=this.g=null}add(e,t){const i=T.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function hn(){for(var n;n=Wo();){try{n.h.call(n.g)}catch(t){x(t)}var e=T;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Re=!1}function An(n,e){gn.call(this),this.h=n||1,this.g=e||zt,this.j=vr(this.lb,this),this.l=Date.now()}function _n(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function rn(n,e,t){if("function"==typeof n)t&&(n=vr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=vr(n.handleEvent,n)}return 2147483647<Number(e)?-1:zt.setTimeout(n,e||0)}function _r(n){n.g=rn(()=>{n.g=null,n.i&&(n.i=!1,_r(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}pn(An,gn),(At=An.prototype).ca=!1,At.R=null,At.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Fr(this,"tick"),this.ca&&(_n(this),this.start()))}},At.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},At.M=function(){An.X.M.call(this),_n(this),delete this.g};class Xt extends mi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_r(this)}M(){super.M(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(n){mi.call(this),this.h=n,this.g={}}pn(Yn,mi);var vi=[];function _i(n,e,t,i){Array.isArray(t)||(t&&(vi[0]=t.toString()),t=vi);for(var a=0;a<t.length;a++){var l=Ou(e,t[a],i||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Wr(n){la(n.g,function(e,t){this.g.hasOwnProperty(t)&&oo(e)},n),n.g={}}function Ei(){this.g=!0}function ns(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xo(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<a.length;f++)a[f]=""}}}return zo(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Yn.prototype.M=function(){Yn.X.M.call(this),Wr(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ei.prototype.Aa=function(){this.g=!1},Ei.prototype.info=function(){};var Li={},Zo=null;function Mo(){return Zo=Zo||new gn}function ks(n){nr.call(this,Li.Pa,n)}function Ko(n){const e=Mo();Fr(e,new ks(e))}function ci(n,e){nr.call(this,Li.STAT_EVENT,n),this.stat=e}function wi(n){const e=Mo();Fr(e,new ci(e,n))}function co(n,e){nr.call(this,Li.Qa,n),this.size=e}function Fs(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},e)}Li.Pa="serverreachability",pn(ks,nr),Li.STAT_EVENT="statevent",pn(ci,nr),Li.Qa="timingevent",pn(co,nr);var ha={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ba={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Yo(){}function Nu(){}Yo.prototype.h=null;var hu,lo={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function du(){nr.call(this,"d")}function Vi(){nr.call(this,"c")}function ho(){}function $n(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Yn(this),this.O=fa,this.T=new An(n=Oa?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Pu}function Pu(){this.i=null,this.g="",this.h=!1}pn(du,nr),pn(Vi,nr),pn(ho,Yo),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},hu=new ho;var fa=45e3,li={},ms={};function ku(n,e,t){n.K=1,n.v=No(Oo(e)),n.s=t,n.P=!0,lc(n,null)}function lc(n,e){n.F=Date.now(),Ro(n),n.A=Oo(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),Vu(t.i,"t",i),n.C=0,t=n.l.H,n.h=new Pu,n.g=Kd(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Xt(vr(n.La,n,n.g),n.N)),_i(n.S,n.g,"readystatechange",n.ib),e=n.H?gs(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ko(),function ao(n,e,t,i,a,l){n.info(function(){if(n.g)if(l)for(var f="",w=l.split("&"),M=0;M<w.length;M++){var k=w[M].split("=");if(1<k.length){var W=k[0];k=k[1];var ee=W.split("_");f=2<=ee.length&&"type"==ee[1]?f+(W+"=")+k+"&":f+(W+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.U,n.s)}function $a(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Hc(n,e,t){let a,i=!0;for(;!n.I&&n.C<t.length;){if(a=fu(n,t),a==ms){4==e&&(n.o=4,wi(14),i=!1),ns(n.j,n.m,null,"[Incomplete Response]");break}if(a==li){n.o=4,wi(15),ns(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}ns(n.j,n.m,a,null),pa(n,a)}$a(n)&&a!=ms&&a!=li&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wi(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),bf(e),e.K=!0,wi(11))):(ns(n.j,n.m,t,"[Invalid Chunked Response]"),Yi(n),ys(n))}function fu(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?ms:(t=Number(e.substring(t,i)),isNaN(t)?li:(i+=1)+t>e.length?ms:(e=e.substr(i,t),n.C=i+t,e))}function Ro(n){n.V=Date.now()+n.O,Ui(n,n.O)}function Ui(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fs(vr(n.gb,n),e)}function Qo(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function ys(n){0==n.l.G||n.I||$g(n.l,n)}function Yi(n){Qo(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,_n(n.T),Wr(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function pa(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||U(t.h,n)))if(!n.J&&U(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Wd(t),Gd(t)}Wc(t),wi(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Fs(vr(t.cb,t),6e3));if(1>=O(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Bu(t,11)}else if((n.J||t.g==n)&&Wd(t),!Pi(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let k=a[e];if(t.T=k[0],k=k[1],2==t.G)if("c"==k[0]){t.I=k[1],t.ka=k[2];const W=k[3];null!=W&&(t.ma=W,t.j.info("VER="+t.ma));const ee=k[4];null!=ee&&(t.Ca=ee,t.j.info("SVER="+t.Ca));const _e=k[5];null!=_e&&"number"==typeof _e&&0<_e&&(t.J=i=1.5*_e,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const Ke=n.g;if(Ke){const Qe=Ke.g?Ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qe){var l=i.h;l.g||-1==Qe.indexOf("spdy")&&-1==Qe.indexOf("quic")&&-1==Qe.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(G(l,l.h),l.h=null))}if(i.D){const wt=Ke.g?Ke.g.getResponseHeader("X-HTTP-Session-Id"):null;wt&&(i.za=wt,sr(i.F,i.D,wt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var f=n;if((i=t).sa=Ol(i,i.H?i.ka:null,i.V),f.J){he(i.h,f);var w=f,M=i.J;M&&w.setTimeout(M),w.B&&(Qo(w),Ro(w)),i.g=f}else Bg(i);0<t.i.length&&Rl(t)}else"stop"!=k[0]&&"close"!=k[0]||Bu(t,7);else 3==t.G&&("stop"==k[0]||"close"==k[0]?"stop"==k[0]?Bu(t,7):pc(t):"noop"!=k[0]&&t.l&&t.l.wa(k),t.A=0)}Ko()}catch{}}function xl(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(qn(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Gc(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(qn(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function Ha(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(qn(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length,l=0;l<a;l++)e.call(void 0,i[l],t&&t[l],n)}(At=$n.prototype).setTimeout=function(n){this.O=n},At.ib=function(n){n=n.target;const e=this.L;e&&3==vs(n)?e.l():this.La(n)},At.La=function(n){try{if(n==this.g)e:{const W=vs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>W)&&(3!=W||Oa||this.g&&(this.h.h||this.g.fa()||_s(this.g)))){this.I||4!=W||7==e||Ko(),Qo(this);var t=this.g.aa();this.Y=t;t:if($a(this)){var i=_s(this.g);n="";var a=i.length,l=4==vs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),ys(this);var f="";break t}this.h.i=new zt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:l&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.fa();if(this.i=200==t,function uo(n,e,t,i,a,l,f){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.U,W,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var w,M=this.g;if((w=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pi(w)){var k=w;break t}}k=null}if(!(t=k)){this.i=!1,this.o=3,wi(12),Yi(this),ys(this);break e}ns(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pa(this,t)}this.P?(Hc(this,W,f),Oa&&this.i&&3==W&&(_i(this.S,this.T,"tick",this.hb),this.T.start())):(ns(this.j,this.m,f,null),pa(this,f)),4==W&&Yi(this),this.i&&!this.I&&(4==W?$g(this.l,this):(this.i=!1,Ro(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,wi(12)):(this.o=0,wi(13)),Yi(this),ys(this)}}}catch{}},At.hb=function(){if(this.g){var n=vs(this.g),e=this.g.fa();this.C<e.length&&(Qo(this),Hc(this,n,e),this.i&&4!=n&&Ro(this))}},At.cancel=function(){this.I=!0,Yi(this)},At.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function rs(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ko(),wi(17)),Yi(this),this.o=2,ys(this)):Ui(this,this.V-n)};var Fn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ls(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ls){this.h=void 0!==e?e:n.h,Ga(this,n.j),this.s=n.s,this.g=n.g,ga(this,n.m),this.l=n.l,e=n.i;var t=new Po;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),pu(this,t),this.o=n.o}else n&&(t=String(n).match(Fn))?(this.h=!!e,Ga(this,t[1]||"",!0),this.s=Fu(t[2]||""),this.g=Fu(t[3]||"",!0),ga(this,t[4]),this.l=Fu(t[5]||"",!0),pu(this,t[6]||"",!0),this.o=Fu(t[7]||"")):(this.h=!!e,this.i=new Po(null,this.h))}function Oo(n){return new Ls(n)}function Ga(n,e,t){n.j=t?Fu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ga(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function pu(n,e,t){e instanceof Po?(n.i=e,function Ml(n,e){e&&!n.j&&(Qi(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(Us(this,i),Vu(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Bi(e,di)),n.i=new Po(e,n.h))}function sr(n,e,t){n.i.set(e,t)}function No(n){return sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Fu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bi(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sr),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sr(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ls.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Bi(e,za,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Bi(e,za,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Bi(t,"/"==t.charAt(0)?Lu:Wa,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Bi(t,Vs)),n.join("")};var za=/[#\/\?@]/g,Wa=/[#\?:]/g,Lu=/[#\?]/g,di=/[#\?@]/g,Vs=/#/g;function Po(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qi(n){n.g||(n.g=new Map,n.h=0,n.i&&function dc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var l=n[t].substring(0,i);a=n[t].substring(i+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Us(n,e){Qi(n),e=qa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gu(n,e){return Qi(n),e=qa(n,e),n.g.has(e)}function Vu(n,e,t){Us(n,e),0<t.length&&(n.i=null,n.g.set(qa(n,e),Pr(t)),n.h+=t.length)}function qa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function _(n){this.l=n||m,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ga&&zt.g.Ga()&&zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(At=Po.prototype).add=function(n,e){Qi(this),this.i=null,n=qa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},At.forEach=function(n,e){Qi(this),this.g.forEach(function(t,i){t.forEach(function(a){n.call(e,a,i,this)},this)},this)},At.oa=function(){Qi(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const a=n[i];for(let l=0;l<a.length;l++)t.push(e[i])}return t},At.W=function(n){Qi(this);let e=[];if("string"==typeof n)gu(this,n)&&(e=e.concat(this.g.get(qa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},At.set=function(n,e){return Qi(this),this.i=null,gu(this,n=qa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},At.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},At.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const l=encodeURIComponent(String(i)),f=this.W(i);for(i=0;i<f.length;i++){var a=l;""!==f[i]&&(a+="="+encodeURIComponent(String(f[i]))),n.push(a)}}return this.i=n.join("&")};var m=10;function C(n){return!!n.h||!!n.g&&n.g.size>=n.j}function O(n){return n.h?1:n.g?n.g.size:0}function U(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function G(n,e){n.g?n.g.add(e):n.h=e}function he(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Le(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Pr(n.i)}function bt(){}function Ct(){this.g=new bt}function En(n,e,t){const i=t||"";try{xl(n,function(a,l){let f=a;Ms(a)&&(f=zo(a)),e.push(i+l+"="+encodeURIComponent(f))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function Xi(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch{}}function qr(n){this.l=n.ac||null,this.j=n.jb||!1}function A(n,e){gn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=R,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_.prototype.cancel=function(){if(this.i=Le(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},bt.prototype.stringify=function(n){return zt.JSON.stringify(n,void 0)},bt.prototype.parse=function(n){return zt.JSON.parse(n,void 0)},pn(qr,Yo),qr.prototype.g=function(){return new A(this.l,this.j)},qr.prototype.i=function(n){return function(){return n}}({}),pn(A,gn);var R=0;function B(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function X(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ge(n)}function ge(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(At=A.prototype).open=function(n,e){if(this.readyState!=R)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ge(this)},At.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||zt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},At.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,X(this)),this.readyState=R},At.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ge(this)),this.g&&(this.readyState=3,ge(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;B(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},At.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?X(this):ge(this),3==this.readyState&&B(this)}},At.Va=function(n){this.g&&(this.response=this.responseText=n,X(this))},At.Ua=function(n){this.g&&(this.response=n,X(this))},At.ga=function(){this.g&&X(this)},At.setRequestHeader=function(n,e){this.v.append(n,e)},At.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},At.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(A.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var be=zt.JSON.parse;function We(n){gn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ot,this.K=this.L=!1}pn(We,gn);var Ot="",Bt=/^https?$/i,Vt=["POST","PUT"];function Jt(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Bs(n),ma(n)}function Bs(n){n.D||(n.D=!0,Fr(n,"complete"),Fr(n,"error"))}function Zr(n){if(n.h&&typeof ds<"u"&&(!n.C[1]||4!=vs(n)||2!=n.aa()))if(n.v&&4==vs(n))rn(n.Ha,0,n);else if(Fr(n,"readystatechange"),4==vs(n)){n.h=!1;try{const w=n.aa();e:switch(w){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===w){var a=String(n.H).match(Fn)[1]||null;if(!a&&zt.self&&zt.self.location){var l=zt.self.location.protocol;a=l.substr(0,l.length-1)}i=!Bt.test(a?a.toLowerCase():"")}t=i}if(t)Fr(n,"complete"),Fr(n,"success");else{n.m=6;try{var f=2<vs(n)?n.g.statusText:""}catch{f=""}n.j=f+" ["+n.aa()+"]",Bs(n)}}finally{ma(n)}}}function ma(n,e){if(n.g){hc(n);const t=n.g,i=n.C[0]?Nr:null;n.g=null,n.C=null,e||Fr(n,"ready");try{t.onreadystatechange=i}catch{}}}function hc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function vs(n){return n.g?n.g.readyState:0}function _s(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ot:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function fo(n){let e="";return la(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Za(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=fo(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):sr(n,e,t))}function fc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Df(n){this.Ca=0,this.i=[],this.j=new Ei,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=fc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=fc("baseRetryDelayMs",5e3,n),this.bb=fc("retryDelaySeedMs",1e4,n),this.$a=fc("forwardChannelMaxRetries",2,n),this.ta=fc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new _(n&&n.concurrentRequestLimit),this.Fa=new Ct,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function pc(n){if(zd(n),3==n.G){var e=n.U++,t=Oo(n.F);sr(t,"SID",n.I),sr(t,"RID",e),sr(t,"TYPE","terminate"),Uu(n,t),(e=new $n(n,n.j,e,void 0)).K=2,e.v=No(Oo(t)),t=!1,zt.navigator&&zt.navigator.sendBeacon&&(t=zt.navigator.sendBeacon(e.v.toString(),"")),!t&&zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Kd(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ro(e)}Zd(n)}function Gd(n){n.g&&(bf(n),n.g.cancel(),n.g=null)}function zd(n){Gd(n),n.u&&(zt.clearTimeout(n.u),n.u=null),Wd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function Rl(n){C(n.h)||n.m||(n.m=!0,H(n.Ja,n),n.C=0)}function zc(n,e){var t;t=e?e.m:n.U++;const i=Oo(n.F);sr(i,"SID",n.I),sr(i,"RID",t),sr(i,"AID",n.T),Uu(n,i),n.o&&n.s&&Za(i,n.o,n.s),t=new $n(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Ug(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),G(n.h,t),ku(t,i,e)}function Uu(n,e){n.ia&&la(n.ia,function(t,i){sr(e,i,t)}),n.l&&xl({},function(t,i){sr(e,i,t)})}function Ug(n,e,t){t=Math.min(n.i.length,t);var i=n.l?vr(n.l.Ra,n.l,n):null;e:{var a=n.i;let l=-1;for(;;){const f=["count="+t];-1==l?0<t?(l=a[0].h,f.push("ofs="+l)):l=0:f.push("ofs="+l);let w=!0;for(let M=0;M<t;M++){let k=a[M].h;const W=a[M].g;if(k-=l,0>k)l=Math.max(0,a[M].h-100),w=!1;else try{En(W,f,"req"+k+"_")}catch{i&&i(W)}}if(w){i=f.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function Bg(n){n.g||n.u||(n.Z=1,H(n.Ia,n),n.A=0)}function Wc(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Fs(vr(n.Ia,n),qd(n,n.A)),n.A++,0))}function bf(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function jg(n){n.g=new $n(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Oo(n.sa);sr(e,"RID","rpc"),sr(e,"SID",n.I),sr(e,"CI",n.L?"0":"1"),sr(e,"AID",n.T),sr(e,"TYPE","xmlhttp"),Uu(n,e),n.o&&n.s&&Za(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=No(Oo(e)),t.s=null,t.P=!0,lc(t,n)}function Wd(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function $g(n,e){var t=null;if(n.g==e){Wd(n),bf(n),n.g=null;var i=2}else{if(!U(n.h,e))return;t=e.D,he(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Fr(i=Mo(),new co(i,t)),Rl(n)}else Bg(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==i&&function Vg(n,e){return!(O(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Fs(vr(n.Ja,n,e),qd(n,n.C)),n.C++,0)))}(n,e)||2==i&&Wc(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Bu(n,5);break;case 4:Bu(n,10);break;case 3:Bu(n,6);break;default:Bu(n,2)}}function qd(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Bu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=vr(n.kb,n);t||(t=new Ls("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||Ga(t,"https"),No(t)),function Er(n,e){const t=new Ei;if(zt.Image){const i=new Image;i.onload=Ni(Xi,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Ni(Xi,t,i,"TestLoadImage: error",!1,e),i.onabort=Ni(Xi,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ni(Xi,t,i,"TestLoadImage: timeout",!1,e),zt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else wi(2);n.G=0,n.l&&n.l.va(e),Zd(n),zd(n)}function Zd(n){if(n.G=0,n.la=[],n.l){const e=Le(n.h);(0!=e.length||0!=n.i.length)&&(aa(n.la,e),aa(n.la,n.i),n.h.i.length=0,Pr(n.i),n.i.length=0),n.l.ua()}}function Ol(n,e,t){var i=t instanceof Ls?Oo(t):new Ls(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),ga(i,i.m);else{var a=zt.location;i=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new Ls(null,void 0);i&&Ga(l,i),e&&(l.g=e),a&&ga(l,a),t&&(l.l=t),i=l}return e=n.za,(t=n.D)&&e&&sr(i,t,e),sr(i,"VER",n.ma),Uu(n,i),i}function Kd(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new We(t&&n.Da&&!n.ra?new qr({jb:!0}):n.ra)).Ka(n.H),e}function Yd(){}function gc(){if(Me&&!(10<=Number(ii)))throw Error("Environmental error: no available transport.")}function Kr(n,e){gn.call(this),this.g=new Df(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Pi(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pi(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new mc(this)}function Cf(n){du.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Tf(){Vi.call(this),this.status=1}function mc(n){this.g=n}(At=We.prototype).Ka=function(n){this.L=n},At.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hu.g(),this.C=function ja(n){return n.h||(n.h=n.i())}(this.u?this.u:hu),this.g.onreadystatechange=vr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Jt(this,l)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)t.set(a,i[a]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const l of i.keys())t.set(l,i.get(l))}i=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=zt.FormData&&n instanceof zt.FormData,!(0<=Ma(Vt,e))||i||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,f]of t)this.g.setRequestHeader(l,f);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hc(this),0<this.B&&((this.K=function an(n){return Me&&function Co(){return function Ra(n){var e=io;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=au(String(fs)).split("."),t=au("9").split("."),i=Math.max(e.length,t.length);for(let f=0;0==n&&f<i;f++){var a=e[f]||"",l=t[f]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=ro(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||ro(0==a[2].length,0==l[2].length)||ro(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vr(this.qa,this)):this.A=rn(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Jt(this,l)}},At.qa=function(){typeof ds<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fr(this,"timeout"),this.abort(8))},At.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Fr(this,"complete"),Fr(this,"abort"),ma(this))},At.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ma(this,!0)),We.X.M.call(this)},At.Ha=function(){this.s||(this.F||this.v||this.l?Zr(this):this.fb())},At.fb=function(){Zr(this)},At.aa=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},At.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},At.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),be(e)}},At.Ea=function(){return this.m},At.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(At=Df.prototype).ma=8,At.G=1,At.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new $n(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=gs(l),Pa(l,this.S)):l=this.S),null!==this.o||this.N||(a.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ug(this,a,e),sr(t=Oo(this.F),"RID",n),sr(t,"CVER",22),this.D&&sr(t,"X-HTTP-Session-Id",this.D),Uu(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(fo(l)))+"&"+e:this.o&&Za(t,this.o,l)),G(this.h,a),this.Ya&&sr(t,"TYPE","init"),this.O?(sr(t,"$req",e),sr(t,"SID","null"),a.Z=!0,ku(a,t,null)):ku(a,t,e),this.G=2}}else 3==this.G&&(n?zc(this,n):0==this.i.length||C(this.h)||zc(this))},At.Ia=function(){if(this.u=null,jg(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Fs(vr(this.eb,this),n)}},At.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,wi(10),Gd(this),jg(this))},At.cb=function(){null!=this.v&&(this.v=null,Gd(this),Wc(this),wi(19))},At.kb=function(n){n?(this.j.info("Successfully pinged google.com"),wi(2)):(this.j.info("Failed to ping google.com"),wi(1))},(At=Yd.prototype).xa=function(){},At.wa=function(){},At.va=function(){},At.ua=function(){},At.Ra=function(){},gc.prototype.g=function(n,e){return new Kr(n,e)},pn(Kr,gn),Kr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;wi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Ol(n,null,n.V),Rl(n)},Kr.prototype.close=function(){pc(this.g)},Kr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=zo(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Rl(e)},Kr.prototype.M=function(){this.g.l=null,delete this.j,pc(this.g),delete this.g,Kr.X.M.call(this)},pn(Cf,du),pn(Tf,Vi),pn(mc,Yd),mc.prototype.xa=function(){Fr(this.g,"a")},mc.prototype.wa=function(n){Fr(this.g,new Cf(n))},mc.prototype.va=function(n){Fr(this.g,new Tf)},mc.prototype.ua=function(){Fr(this.g,"b")},gc.prototype.createWebChannel=gc.prototype.g,Kr.prototype.send=Kr.prototype.u,Kr.prototype.open=Kr.prototype.m,Kr.prototype.close=Kr.prototype.close,ha.NO_ERROR=0,ha.TIMEOUT=8,ha.HTTP_ERROR=6,Ba.COMPLETE="complete",Nu.EventType=lo,lo.OPEN="a",lo.CLOSE="b",lo.ERROR="c",lo.MESSAGE="d",gn.prototype.listen=gn.prototype.N,We.prototype.listenOnce=We.prototype.O,We.prototype.getLastError=We.prototype.Oa,We.prototype.getLastErrorCode=We.prototype.Ea,We.prototype.getStatus=We.prototype.aa,We.prototype.getResponseJson=We.prototype.Sa,We.prototype.getResponseText=We.prototype.fa,We.prototype.send=We.prototype.da,We.prototype.setWithCredentials=We.prototype.Ka;var Nl=Hr.createWebChannelTransport=function(){return new gc},Qd=Hr.getStatEventTarget=function(){return Mo()},qc=Hr.ErrorCode=ha,Hg=Hr.EventType=Ba,Sf=Hr.Event=Li,Xd=Hr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Jd=Hr.FetchXmlHttpFactory=qr,Pl=Hr.WebChannel=Nu,Es=Hr.XhrIo=We;const Zc="@firebase/firestore";class Ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");let mu="9.17.2";const Lr=new Mn.Yd("@firebase/firestore");function ju(){return Lr.logLevel}function it(n,...e){if(Lr.logLevel<=Mn.in.DEBUG){const t=e.map(E);Lr.debug(`Firestore (${mu}): ${n}`,...t)}}function si(n,...e){if(Lr.logLevel<=Mn.in.ERROR){const t=e.map(E);Lr.error(`Firestore (${mu}): ${n}`,...t)}}function $u(n,...e){if(Lr.logLevel<=Mn.in.WARN){const t=e.map(E);Lr.warn(`Firestore (${mu}): ${n}`,...t)}}function E(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function d(n="Unexpected state"){const e=`FIRESTORE (${mu}) INTERNAL ASSERTION FAILED: `+n;throw si(e),new Error(e)}function g(n,e){n||d()}function P(n,e){return n}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends St.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class je{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ii.UNAUTHENTICATED))}shutdown(){}}class mn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ar{constructor(e){this.t=e,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const l=k=>this.i!==a?(a=this.i,t(k)):Promise.resolve();let f=new je;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new je,e.enqueueRetryable(()=>l(this.currentUser))};const w=()=>{const k=f;e.enqueueRetryable((0,me.Z)(function*(){yield k.promise,yield l(i.currentUser)}))},M=k=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=k,this.auth.addAuthTokenListener(this.o),w()};this.t.onInit(k=>M(k)),setTimeout(()=>{if(!this.auth){const k=this.t.getImmediate({optional:!0});k?M(k):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new je)}},0),w()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(g("string"==typeof i.accessToken),new xt(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return g(null===e||"string"==typeof e),new Ii(e)}}class ko{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(g(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ya{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a}getToken(){return Promise.resolve(new ko(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=l=>{null!=l.error&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.A;return this.A=l.token,it("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.T.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.T.getImmediate({optional:!0});l?a(l):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(g("string"==typeof t.token),this.A=t.token,new yc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eh(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class th{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=eh(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%e.length))}return i}}function nn(n,e){return n<e?-1:n>e?1:0}function Gu(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function nh(n){return n+"\0"}class hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new hr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gt(e)}static min(){return new Gt(new hr(0,0))}static max(){return new Gt(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kc{constructor(e,t,i){void 0===t?t=0:t>e.length&&d(),void 0===i?i=e.length-t:i>e.length-t&&d(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Kc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kc?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=e.get(a),f=t.get(a);if(l<f)return-1;if(l>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rn extends Kc{construct(e,t,i){return new Rn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Rn(t)}static emptyPath(){return new Rn([])}}const xf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yr extends Kc{construct(e,t,i){return new Yr(e,t,i)}static isValidIdentifier(e){return xf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yr(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(0===i.length)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let f=!1;for(;a<e.length;){const w=e[a];if("\\"===w){if(a+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const M=e[a+1];if("\\"!==M&&"."!==M&&"`"!==M)throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=M,a+=2}else"`"===w?(f=!f,a++):"."!==w||f?(i+=w,a++):(l(),a++)}if(l(),f)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yr(t)}static emptyPath(){return new Yr([])}}class Et{constructor(e){this.path=e}static fromPath(e){return new Et(Rn.fromString(e))}static fromName(e){return new Et(Rn.fromString(e).popFirst(5))}static empty(){return new Et(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new Rn(e.slice()))}}class Fl{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Gg(n){return n.fields.find(e=>2===e.kind)}function Yc(n){return n.fields.filter(e=>2!==e.kind)}Fl.UNKNOWN_ID=-1;class rh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ll{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ll(0,va.min())}}function zg(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Gt.fromTimestamp(1e9===i?new hr(t+1,0):new hr(t,i));return new va(a,Et.empty(),e)}function wv(n){return new va(n.readTime,n.key,-1)}class va{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new va(Gt.min(),Et.empty(),-1)}static max(){return new va(Gt.max(),Et.empty(),-1)}}function Vl(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Et.comparator(n.documentKey,e.documentKey),0!==t?t:nn(n.largestBatchId,e.largestBatchId))}const Iv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zu(n){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,me.Z)(function*(n){if(n.code!==L.FAILED_PRECONDITION||n.message!==Iv)throw n;it("LocalStore","Unexpectedly lost primary lease")}),Mf.apply(this,arguments)}class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&d(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ae((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ae?t:Ae.resolve(t)}catch(t){return Ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.reject(t)}static resolve(e){return new Ae((t,i)=>{t(e)})}static reject(e){return new Ae((t,i)=>{i(e)})}static waitFor(e){return new Ae((t,i)=>{let a=0,l=0,f=!1;e.forEach(w=>{++a,w.next(()=>{++l,f&&l===a&&t()},M=>i(M))}),f=!0,l===a&&t()})}static or(e){let t=Ae.resolve(!1);for(const i of e)t=t.next(a=>a?Ae.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new Ae((i,a)=>{const l=e.length,f=new Array(l);let w=0;for(let M=0;M<l;M++){const k=M;t(e[k]).next(W=>{f[k]=W,++w,w===l&&i(f)},W=>a(W))}})}static doWhile(e,t){return new Ae((i,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):i()};l()})}}class ih{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new je,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ul(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const a=Zg(i.target.error);this.v.reject(new Ul(e,a))}}static open(e,t,i,a){try{return new ih(t,e.transaction(a,i))}catch(l){throw new Ul(t,l)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(it("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qg(t)}}class Fo{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===Fo.D((0,St.z$)())&&si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return it("SimpleDb","Removing database:",e),Wu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,St.hl)())return!1;if(Fo.N())return!0;const e=(0,St.z$)(),t=Fo.D(e),i=0<t&&t<10,a=Fo.k(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(it("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=f=>{i(f.target.result)},l.onblocked=()=>{a(new Ul(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=f=>{const w=f.target.error;a("VersionError"===w.name?new Q(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new Q(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new Ul(e,w))},l.onupgradeneeded=f=>{it("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.S.$(f.target.result,l.transaction,f.oldVersion,t.version).next(()=>{it("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var l=this;return(0,me.Z)(function*(){const f="readonly"===t;let w=0;for(;;){++w;try{l.db=yield l.F(e);const M=ih.open(l.db,e,f?"readonly":"readwrite",i),k=a(M).next(W=>(M.V(),W)).catch(W=>(M.abort(W),Ae.reject(W))).toPromise();return k.catch(()=>{}),yield M.P,k}catch(M){const k=M,W="FirebaseError"!==k.name&&w<3;if(it("SimpleDb","Transaction failed with error:",k.message,"Retrying:",W),l.close(),!W)return Promise.reject(k)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rf{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Wu(this.q.delete())}}class Ul extends Q{constructor(e,t){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yu(n){return"IndexedDbTransactionError"===n.name}class qg{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(it("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(it("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Wu(i)}add(e){return it("SimpleDb","ADD",this.store.name,e,e),Wu(this.store.add(e))}get(e){return Wu(this.store.get(e)).next(t=>(void 0===t&&(t=null),it("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return it("SimpleDb","DELETE",this.store.name,e),Wu(this.store.delete(e))}count(){return it("SimpleDb","COUNT",this.store.name),Wu(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),l=[];return this.H(a,(f,w)=>{l.push(w)}).next(()=>l)}{const a=this.store.getAll(i.range);return new Ae((l,f)=>{a.onerror=w=>{f(w.target.error)},a.onsuccess=w=>{l(w.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new Ae((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}Y(e,t){it("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Z=!1;const a=this.cursor(i);return this.H(a,(l,f,w)=>w.delete())}X(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}tt(e){const t=this.cursor({});return new Ae((i,a)=>{t.onerror=l=>{const f=Zg(l.target.error);a(f)},t.onsuccess=l=>{const f=l.target.result;f?e(f.primaryKey,f.value).next(w=>{w?f.continue():i()}):i()}})}H(e,t){const i=[];return new Ae((a,l)=>{e.onerror=f=>{l(f.target.error)},e.onsuccess=f=>{const w=f.target.result;if(!w)return void a();const M=new Rf(w),k=t(w.primaryKey,w.value,M);if(k instanceof Ae){const W=k.catch(ee=>(M.done(),Ae.reject(ee)));i.push(W)}M.isDone?a():null===M.G?w.continue():w.continue(M.G)}}).next(()=>Ae.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Z?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wu(n){return new Ae((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=Zg(i.target.error);t(a)}})}let Bl=!1;function Zg(n){const e=Fo.D((0,St.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bl||(Bl=!0,setTimeout(()=>{throw i},0)),i}}return n}class Dv{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;it("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{it("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){yu(i)?it("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield zu(i)}yield t.nt(6e4)}))}}class ow{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let a=t,l=!0;return Ae.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!i.has(f))return it("IndexBackiller",`Processing collection: ${f}`),this.rt(e,f,a).next(w=>{a-=w,i.add(f)});l=!1})).next(()=>t-a)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(l=>{const f=l.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.ot(a,l)).next(w=>(it("IndexBackiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,t,w))).next(()=>f.size)}))}ot(e,t){let i=e;return t.changes.forEach((a,l)=>{const f=wv(l);Vl(f,i)>0&&(i=f)}),new va(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Xo=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>i.writeSequenceNumber(a))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class Nf{constructor(e,t,i,a,l,f,w,M){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=w,this.useFetchStreams=M}}class vu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}function vc(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Cv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Pf(n){return null==n}function sh(n){return 0===n&&1/n==-1/0}function kf(n){return"number"==typeof n&&Number.isInteger(n)&&!sh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class uw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw a instanceof DOMException?new uw("Invalid base64 string: "+a):a}}(e);return new hi(t)}static fromUint8Array(e){const t=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new hi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const Kg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qu(n){if(g(!!n),"string"==typeof n){let e=0;const t=Kg.exec(n);if(g(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:oi(n.seconds),nanos:oi(n.nanos)}}function oi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function _c(n){return"string"==typeof n?hi.fromBase64String(n):hi.fromUint8Array(n)}function Ff(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Sv(n){const e=n.mapValue.fields.__previous_value__;return Ff(e)?Sv(e):e}function oh(n){const e=qu(n.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}const Ec={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lf={nullValue:"NULL_VALUE"};function Jc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ff(n)?4:Uf(n)?9007199254740991:10:d()}function ws(n,e){if(n===e)return!0;const t=Jc(n);if(t!==Jc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return oh(n).isEqual(oh(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=qu(i.timestampValue),f=qu(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,_c(n.bytesValue).isEqual(_c(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return oi(i.geoPointValue.latitude)===oi(a.geoPointValue.latitude)&&oi(i.geoPointValue.longitude)===oi(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return oi(i.integerValue)===oi(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=oi(i.doubleValue),f=oi(a.doubleValue);return l===f?sh(l)===sh(f):isNaN(l)&&isNaN(f)}return!1}(n,e);case 9:return Gu(n.arrayValue.values||[],e.arrayValue.values||[],ws);case 10:return function(i,a){const l=i.mapValue.fields||{},f=a.mapValue.fields||{};if(vc(l)!==vc(f))return!1;for(const w in l)if(l.hasOwnProperty(w)&&(void 0===f[w]||!ws(l[w],f[w])))return!1;return!0}(n,e);default:return d()}var a}function Zu(n,e){return void 0!==(n.values||[]).find(t=>ws(t,e))}function wc(n,e){if(n===e)return 0;const t=Jc(n),i=Jc(e);if(t!==i)return nn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return nn(n.booleanValue,e.booleanValue);case 2:return function(a,l){const f=oi(a.integerValue||a.doubleValue),w=oi(l.integerValue||l.doubleValue);return f<w?-1:f>w?1:f===w?0:isNaN(f)?isNaN(w)?0:-1:1}(n,e);case 3:return cw(n.timestampValue,e.timestampValue);case 4:return cw(oh(n),oh(e));case 5:return nn(n.stringValue,e.stringValue);case 6:return function(a,l){const f=_c(a),w=_c(l);return f.compareTo(w)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const f=a.split("/"),w=l.split("/");for(let M=0;M<f.length&&M<w.length;M++){const k=nn(f[M],w[M]);if(0!==k)return k}return nn(f.length,w.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const f=nn(oi(a.latitude),oi(l.latitude));return 0!==f?f:nn(oi(a.longitude),oi(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const f=a.values||[],w=l.values||[];for(let M=0;M<f.length&&M<w.length;++M){const k=wc(f[M],w[M]);if(k)return k}return nn(f.length,w.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===Ec.mapValue&&l===Ec.mapValue)return 0;if(a===Ec.mapValue)return 1;if(l===Ec.mapValue)return-1;const f=a.fields||{},w=Object.keys(f),M=l.fields||{},k=Object.keys(M);w.sort(),k.sort();for(let W=0;W<w.length&&W<k.length;++W){const ee=nn(w[W],k[W]);if(0!==ee)return ee;const _e=wc(f[w[W]],M[k[W]]);if(0!==_e)return _e}return nn(w.length,k.length)}(n.mapValue,e.mapValue);default:throw d()}}function cw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return nn(n,e);const t=qu(n),i=qu(e),a=nn(t.seconds,i.seconds);return 0!==a?a:nn(t.nanos,i.nanos)}function ah(n){return Av(n)}function Av(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=qu(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?_c(n.bytesValue).toBase64():"referenceValue"in n?Et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",l=!0;for(const f of i.values||[])l?l=!1:a+=",",a+=Av(f);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let l="{",f=!0;for(const w of a)f?f=!1:l+=",",l+=`${w}:${Av(i.fields[w])}`;return l+"}"}(n.mapValue):d();var e}function jl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xv(n){return!!n&&"integerValue"in n}function $l(n){return!!n&&"arrayValue"in n}function Mv(n){return!!n&&"nullValue"in n}function Rv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vf(n){return!!n&&"mapValue"in n}function uh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=uh(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Uf(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ku(n){return"nullValue"in n?Lf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jl(vu.empty(),Et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:d()}function ch(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jl(vu.empty(),Et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ec:d()}function Yg(n,e){const t=wc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Qg(n,e){const t=wc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Yu{constructor(e,t){this.position=e,this.inclusive=t}}function lw(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],f=n.position[a];if(i=l.field.isKeyField()?Et.comparator(Et.fromName(f.referenceValue),t.key):wc(f,t.data.field(l.field)),"desc"===l.dir&&(i*=-1),0!==i)break}return i}function dw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ws(n.position[t],e.position[t]))return!1;return!0}class hw{}class On extends hw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new jf(e,t,i):"array-contains"===t?new ji(e,i):"in"===t?new Lv(e,i):"not-in"===t?new pw(e,i):"array-contains-any"===t?new tm(e,i):new On(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new fw(e,i):new em(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wc(t,this.value)):null!==t&&Jc(this.value)===Jc(t)&&this.matchesComparison(wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return d()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Qn extends hw{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new Qn(e,t)}matches(e){return lh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function lh(n){return"and"===n.op}function Ov(n){return"or"===n.op}function Bf(n){return Nv(n)&&lh(n)}function Nv(n){for(const e of n.filters)if(e instanceof Qn)return!1;return!0}function Xg(n){if(n instanceof On)return n.field.canonicalString()+n.op.toString()+ah(n.value);if(Bf(n))return n.filters.map(e=>Xg(e)).join(",");{const e=n.filters.map(t=>Xg(t)).join(",");return`${n.op}(${e})`}}function Pv(n,e){return n instanceof On?(t=n,(i=e)instanceof On&&t.op===i.op&&t.field.isEqual(i.field)&&ws(t.value,i.value)):n instanceof Qn?function(t,i){return i instanceof Qn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((a,l,f)=>a&&Pv(l,i.filters[f]),!0)}(n,e):void d();var t,i}function kv(n,e){const t=n.filters.concat(e);return Qn.create(t,n.op)}function Jg(n){return n instanceof On?`${(e=n).field.canonicalString()} ${e.op} ${ah(e.value)}`:n instanceof Qn?function(e){return e.op.toString()+" {"+e.getFilters().map(Jg).join(" ,")+"}"}(n):"Filter";var e}class jf extends On{constructor(e,t,i){super(e,t,i),this.key=Et.fromName(i.referenceValue)}matches(e){const t=Et.comparator(e.key,this.key);return this.matchesComparison(t)}}class fw extends On{constructor(e,t){super(e,"in",t),this.keys=Fv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class em extends On{constructor(e,t){super(e,"not-in",t),this.keys=Fv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Et.fromName(i.referenceValue))}class ji extends On{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $l(t)&&Zu(t.arrayValue,this.value)}}class Lv extends On{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zu(this.value.arrayValue,t)}}class pw extends On{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zu(this.value.arrayValue,t)}}class tm extends On{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$l(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Zu(this.value.arrayValue,i))}}class el{constructor(e,t="asc"){this.field=e,this.dir=t}}function gw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fi{constructor(e,t){this.comparator=e,this.root=t||Is.EMPTY}insert(e,t){return new fi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Is.BLACK,null,null))}remove(e){return new fi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Is.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $f(this.root,e,this.comparator,!1)}getReverseIterator(){return new $f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $f(this.root,e,this.comparator,!0)}}class $f{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Is{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Is.RED,this.left=a??Is.EMPTY,this.right=l??Is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Is(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Is.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw d();const e=this.left.check();if(e!==this.right.check())throw d();return e+(this.isRed()?0:1)}}Is.EMPTY=null,Is.RED=!0,Is.BLACK=!1,Is.EMPTY=new class{constructor(){this.size=0}get key(){throw d()}get value(){throw d()}get color(){throw d()}get left(){throw d()}get right(){throw d()}copy(n,e,t,i,a){return this}insert(n,e,t){return new Is(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class or{constructor(e){this.comparator=e,this.data=new fi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mw(this.data.getIterator())}getIteratorFrom(e){return new mw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new or(this.comparator);return t.data=e,t}}class mw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dh(n){return n.hasNext()?n.getNext():void 0}class is{constructor(e){this.fields=e,e.sort(Yr.comparator)}static empty(){return new is([])}unionWith(e){let t=new or(Yr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new is(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gu(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class $i{constructor(e){this.value=e}static empty(){return new $i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uh(t)}setAll(e){let t=Yr.emptyPath(),i={},a=[];e.forEach((f,w)=>{if(!t.isImmediateParentOf(w)){const M=this.getFieldsMap(t);this.applyChanges(M,i,a),i={},a=[],t=w.popLast()}f?i[w.lastSegment()]=uh(f):a.push(w.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Vf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Xc(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new $i(uh(this.value))}}function nm(n){const e=[];return Xc(n.fields,(t,i)=>{const a=new Yr([t]);if(Vf(i)){const l=nm(i.mapValue).fields;if(0===l.length)e.push(a);else for(const f of l)e.push(a.child(f))}else e.push(a)}),new is(e)}class xr{constructor(e,t,i,a,l,f,w){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=f,this.documentState=w}static newInvalidDocument(e){return new xr(e,0,Gt.min(),Gt.min(),Gt.min(),$i.empty(),0)}static newFoundDocument(e,t,i,a){return new xr(e,1,t,Gt.min(),i,a,0)}static newNoDocument(e,t){return new xr(e,2,t,Gt.min(),Gt.min(),$i.empty(),0)}static newUnknownDocument(e,t){return new xr(e,3,t,Gt.min(),Gt.min(),$i.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vv{constructor(e,t=null,i=[],a=[],l=null,f=null,w=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=f,this.endAt=w,this._t=null}}function Uv(n,e=null,t=[],i=[],a=null,l=null,f=null){return new Vv(n,e,t,i,a,l,f)}function tl(n){const e=P(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Xg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),Pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ah(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ah(i)).join(",")),e._t=t}return e._t}function Hl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Pv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dw(n.startAt,e.startAt)&&dw(n.endAt,e.endAt)}function hh(n){return Et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Gl(n,e){return n.filters.filter(t=>t instanceof On&&t.field.isEqual(e))}function yw(n,e,t){let i=Lf,a=!0;for(const l of Gl(n,e)){let f=Lf,w=!0;switch(l.op){case"<":case"<=":f=Ku(l.value);break;case"==":case"in":case">=":f=l.value;break;case">":f=l.value,w=!1;break;case"!=":case"not-in":f=Lf}Yg({value:i,inclusive:a},{value:f,inclusive:w})<0&&(i=f,a=w)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const f=t.position[l];Yg({value:i,inclusive:a},{value:f,inclusive:t.inclusive})<0&&(i=f,a=t.inclusive);break}return{value:i,inclusive:a}}function Hf(n,e,t){let i=Ec,a=!0;for(const l of Gl(n,e)){let f=Ec,w=!0;switch(l.op){case">=":case">":f=ch(l.value),w=!1;break;case"==":case"in":case"<=":f=l.value;break;case"<":f=l.value,w=!1;break;case"!=":case"not-in":f=Ec}Qg({value:i,inclusive:a},{value:f,inclusive:w})>0&&(i=f,a=w)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const f=t.position[l];Qg({value:i,inclusive:a},{value:f,inclusive:t.inclusive})>0&&(i=f,a=t.inclusive);break}return{value:i,inclusive:a}}class Qu{constructor(e,t=null,i=[],a=[],l=null,f="F",w=null,M=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=f,this.startAt=w,this.endAt=M,this.wt=null,this.gt=null}}function Gf(n,e,t,i,a,l,f,w){return new Qu(n,e,t,i,a,l,f,w)}function nl(n){return new Qu(n)}function rm(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Xu(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function zf(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function fh(n){return null!==n.collectionGroup}function _u(n){const e=P(n);if(null===e.wt){e.wt=[];const t=zf(e),i=Xu(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new el(t)),e.wt.push(new el(Yr.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new el(Yr.keyField(),l))}}}return e.wt}function po(n){const e=P(n);if(!e.gt)if("F"===e.limitType)e.gt=Uv(e.path,e.collectionGroup,_u(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of _u(e))t.push(new el(l.field,"desc"===l.dir?"asc":"desc"));const i=e.endAt?new Yu(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Yu(e.startAt.position,e.startAt.inclusive):null;e.gt=Uv(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e.gt}function ph(n,e){e.getFirstInequalityField(),zf(n);const t=n.filters.concat([e]);return new Qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rl(n,e,t){return new Qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ka(n,e){return Hl(po(n),po(e))&&n.limitType===e.limitType}function im(n){return`${tl(po(n))}|lt:${n.limitType}`}function gh(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>Jg(i)).join(", ")}]`),Pf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(a=i).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ah(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ah(i)).join(",")),`Target(${t})`}(po(n))}; limitType=${n.limitType})`}function mh(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Et.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of _u(t))if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,l,f){const w=lw(a,l,f);return a.inclusive?w<=0:w<0}(t.startAt,_u(t),i)||t.endAt&&!function(a,l,f){const w=lw(a,l,f);return a.inclusive?w>=0:w>0}(t.endAt,_u(t),i)));var t,i}function Bv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sm(n){return(e,t)=>{let i=!1;for(const a of _u(n)){const l=zl(a,e,t);if(0!==l)return l;i=i||a.field.isKeyField()}return 0}}function zl(n,e,t){const i=n.field.isKeyField()?Et.comparator(e.key,t.key):function(a,l,f){const w=l.data.field(a),M=f.data.field(a);return null!==w&&null!==M?wc(w,M):d()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return d()}}function jv(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sh(e)?"-0":e}}function $v(n){return{integerValue:""+n}}function Hv(n,e){return kf(e)?$v(e):jv(n,e)}class Wl{constructor(){this._=void 0}}function vw(n,e,t){return n instanceof il?function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof ql?Wv(n,e):n instanceof Ya?qv(n,e):function(i,a){const l=zv(i,a),f=Zl(l)+Zl(i.It);return xv(l)&&xv(i.It)?$v(f):jv(i.Tt,f)}(n,e)}function Gv(n,e,t){return n instanceof ql?Wv(n,e):n instanceof Ya?qv(n,e):t}function zv(n,e){return n instanceof Qa?xv(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class il extends Wl{}class ql extends Wl{constructor(e){super(),this.elements=e}}function Wv(n,e){const t=Zv(e);for(const i of n.elements)t.some(a=>ws(a,i))||t.push(i);return{arrayValue:{values:t}}}class Ya extends Wl{constructor(e){super(),this.elements=e}}function qv(n,e){let t=Zv(e);for(const i of n.elements)t=t.filter(a=>!ws(a,i));return{arrayValue:{values:t}}}class Qa extends Wl{constructor(e,t){super(),this.Tt=e,this.It=t}}function Zl(n){return oi(n.integerValue||n.doubleValue)}function Zv(n){return $l(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Kl{constructor(e,t){this.field=e,this.transform=t}}class Ew{constructor(e,t){this.version=e,this.transformResults=t}}class Qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class vh{}function Wf(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Xl(n.key,Qr.none()):new Ql(n.key,n.data,Qr.none());{const t=n.data,i=$i.empty();let a=new or(Yr.comparator);for(let l of e.fields)if(!a.has(l)){let f=t.field(l);null===f&&l.length>1&&(l=l.popLast(),f=t.field(l)),null===f?i.delete(l):i.set(l,f),a=a.add(l)}return new Ju(n.key,i,new is(a.toArray()),Qr.none())}}function om(n,e,t){n instanceof Ql?function(i,a,l){const f=i.value.clone(),w=Yv(i.fieldTransforms,a,l.transformResults);f.setAll(w),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Ju?function(i,a,l){if(!yh(i.precondition,a))return void a.convertToUnknownDocument(l.version);const f=Yv(i.fieldTransforms,a,l.transformResults),w=a.data;w.setAll(Kv(i)),w.setAll(f),a.convertToFoundDocument(l.version,w).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _h(n,e,t,i){return n instanceof Ql?function(a,l,f,w){if(!yh(a.precondition,l))return f;const M=a.value.clone(),k=um(a.fieldTransforms,w,l);return M.setAll(k),l.convertToFoundDocument(l.version,M).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ju?function(a,l,f,w){if(!yh(a.precondition,l))return f;const M=um(a.fieldTransforms,w,l),k=l.data;return k.setAll(Kv(a)),k.setAll(M),l.convertToFoundDocument(l.version,k).setHasLocalMutations(),null===f?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(W=>W.field))}(n,e,t,i):(f=t,yh(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f);var l,f}function am(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=zv(i.transform,a||null);null!=l&&(null===t&&(t=$i.empty()),t.set(i.field,l))}return t||null}function Yl(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Gu(t,i,(a,l)=>function _w(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof ql&&i instanceof ql||t instanceof Ya&&i instanceof Ya?Gu(t.elements,i.elements,ws):t instanceof Qa&&i instanceof Qa?ws(t.It,i.It):t instanceof il&&i instanceof il);var t,i}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Ql extends vh{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ju extends vh{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Kv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Yv(n,e,t){const i=new Map;g(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],f=l.transform,w=e.data.field(l.field);i.set(l.field,Gv(f,w,t[a]))}return i}function um(n,e,t){const i=new Map;for(const a of n){const l=a.transform,f=t.data.field(a.field);i.set(a.field,vw(l,f,e))}return i}class Xl extends vh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cm extends vh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jl{constructor(e){this.count=e}}var fr,Hn;function Qv(n){switch(n){default:return d();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function ww(n){if(void 0===n)return si("GRPC error has no .code"),L.UNKNOWN;switch(n){case fr.OK:return L.OK;case fr.CANCELLED:return L.CANCELLED;case fr.UNKNOWN:return L.UNKNOWN;case fr.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case fr.INTERNAL:return L.INTERNAL;case fr.UNAVAILABLE:return L.UNAVAILABLE;case fr.UNAUTHENTICATED:return L.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case fr.NOT_FOUND:return L.NOT_FOUND;case fr.ALREADY_EXISTS:return L.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return L.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case fr.ABORTED:return L.ABORTED;case fr.OUT_OF_RANGE:return L.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return L.UNIMPLEMENTED;case fr.DATA_LOSS:return L.DATA_LOSS;default:return d()}}(Hn=fr||(fr={}))[Hn.OK=0]="OK",Hn[Hn.CANCELLED=1]="CANCELLED",Hn[Hn.UNKNOWN=2]="UNKNOWN",Hn[Hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hn[Hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hn[Hn.NOT_FOUND=5]="NOT_FOUND",Hn[Hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hn[Hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hn[Hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hn[Hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hn[Hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hn[Hn.ABORTED=10]="ABORTED",Hn[Hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hn[Hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hn[Hn.INTERNAL=13]="INTERNAL",Hn[Hn.UNAVAILABLE=14]="UNAVAILABLE",Hn[Hn.DATA_LOSS=15]="DATA_LOSS";class sl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,l]of i)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Xc(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return Cv(this.inner)}size(){return this.innerSize}}const Xv=new fi(Et.comparator);function Jo(){return Xv}const lm=new fi(Et.comparator);function ed(...n){let e=lm;for(const t of n)e=e.insert(t.key,t);return e}function Jv(n){let e=lm;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Xa(){return Eh()}function e_(){return Eh()}function Eh(){return new sl(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ja=new fi(Et.comparator),Iw=new or(Et.comparator);function fn(...n){let e=Iw;for(const t of n)e=e.add(t);return e}const Dw=new or(nn);function qf(){return Dw}class wh{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Ih.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new wh(Gt.min(),a,qf(),Jo(),fn())}}class Ih{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ih(i,t,fn(),fn(),fn())}}class Dh{constructor(e,t,i,a){this.Et=e,this.removedTargetIds=t,this.key=i,this.At=a}}class t_{constructor(e,t){this.targetId=e,this.Rt=t}}class n_{constructor(e,t,i=hi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class r_{constructor(){this.bt=0,this.vt=hm(),this.Pt=hi.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=fn(),t=fn(),i=fn();return this.vt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:d()}}),new Ih(this.Pt,this.Vt,e,t,i)}kt(){this.St=!1,this.vt=hm()}Ot(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class dn{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Jo(),this.Kt=dm(),this.Gt=new or(nn)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const i=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&i.xt(e.resumeToken);break;case 1:i.$t(),i.Dt||i.kt(),i.xt(e.resumeToken);break;case 2:i.$t(),i.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(i.Bt(),i.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),i.xt(e.resumeToken));break;default:d()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((i,a)=>{this.Jt(a)&&t(a)})}Zt(e){const t=e.targetId,i=e.Rt.count,a=this.Xt(t);if(a){const l=a.target;if(hh(l))if(0===i){const f=new Et(l.path);this.zt(t,f,xr.newNoDocument(f,Gt.min()))}else g(1===i);else this.te(t)!==i&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((l,f)=>{const w=this.Xt(f);if(w){if(l.current&&hh(w.target)){const M=new Et(w.target.path);null!==this.Ut.get(M)||this.ne(f,M)||this.zt(f,M,xr.newNoDocument(M,e))}l.Ct&&(t.set(f,l.Nt()),l.kt())}});let i=fn();this.Kt.forEach((l,f)=>{let w=!0;f.forEachWhile(M=>{const k=this.Xt(M);return!k||2===k.purpose||(w=!1,!1)}),w&&(i=i.add(l))}),this.Ut.forEach((l,f)=>f.setReadTime(e));const a=new wh(e,t,this.Gt,this.Ut,i);return this.Ut=Jo(),this.Kt=dm(),this.Gt=new or(nn),a}jt(e,t){if(!this.Jt(e))return;const i=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,i){if(!this.Jt(e))return;const a=this.Ht(e);this.ne(e,t)?a.Ot(t,1):a.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let t=this.qt.get(e);return t||(t=new r_,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new or(nn),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||it("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new r_),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function dm(){return new fi(Et.comparator)}function hm(){return new fi(Et.comparator)}const i_={asc:"ASCENDING",desc:"DESCENDING"},bw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cw={and:"AND",or:"OR"};class s_{constructor(e,t){this.databaseId=e,this.yt=t}}function td(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fm(n,e){return n.yt?e.toBase64():e.toUint8Array()}function Tw(n,e){return td(n,e.toTimestamp())}function Di(n){return g(!!n),Gt.fromTimestamp(function(e){const t=qu(e);return new hr(t.seconds,t.nanos)}(n))}function o_(n,e){return(t=n,new Rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function pm(n){const e=Rn.fromString(n);return g(f_(e)),e}function nd(n,e){return o_(n.databaseId,e.path)}function js(n,e){const t=pm(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Et(a_(t))}function gm(n,e){return o_(n.databaseId,e)}function Zf(n){const e=pm(n);return 4===e.length?Rn.emptyPath():a_(e)}function ol(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function a_(n){return g(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Sw(n,e,t){return{name:nd(n,e),fields:t.value.mapValue.fields}}function Aw(n,e,t){const i=js(n,e.name),a=Di(e.updateTime),l=e.createTime?Di(e.createTime):Gt.min(),f=new $i({mapValue:{fields:e.fields}}),w=xr.newFoundDocument(i,a,l,f);return t&&w.setHasCommittedMutations(),t?w.setHasCommittedMutations():w}function rd(n,e){let t;if(e instanceof Ql)t={update:Sw(n,e.key,e.value)};else if(e instanceof Xl)t={delete:nd(n,e.key)};else if(e instanceof Ju)t={update:Sw(n,e.key,e.data),updateMask:h_(e.fieldMask)};else{if(!(e instanceof cm))return d();t={verify:nd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,l){const f=l.transform;if(f instanceof il)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ql)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ya)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Qa)return{fieldPath:l.field.canonicalString(),increment:f.It};throw d()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Tw(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:d()),t;var a}function u_(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Qr.updateTime(Di(a.updateTime)):void 0!==a.exists?Qr.exists(a.exists):Qr.none():Qr.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(l,f){let w=null;"setToServerValue"in f?(g("REQUEST_TIME"===f.setToServerValue),w=new il):"appendMissingElements"in f?w=new ql(f.appendMissingElements.values||[]):"removeAllFromArray"in f?w=new Ya(f.removeAllFromArray.values||[]):"increment"in f?w=new Qa(l,f.increment):d();const M=Yr.fromServerFormat(f.fieldPath);return new Kl(M,w)}(n,a)):[];var a;if(e.update){const a=js(n,e.update.name),l=new $i({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new is((e.updateMask.fieldPaths||[]).map(k=>Yr.fromServerFormat(k)));return new Ju(a,l,f,t,i)}return new Ql(a,l,t,i)}if(e.delete){const a=js(n,e.delete);return new Xl(a,t)}if(e.verify){const a=js(n,e.verify);return new cm(a,t)}return d()}function al(n,e){return{documents:[gm(n,e.path)]}}function mm(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=gm(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=gm(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(M){if(0!==M.length)return d_(Qn.create(M,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(M){if(0!==M.length)return M.map(k=>{return{field:Ic((W=k).field),direction:l_(W.dir)};var W})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=(k=e.limit,n.yt||Pf(k)?k:{value:k});var k,w,M;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(w=e.startAt).inclusive,values:w.position}),e.endAt&&(t.structuredQuery.endAt={before:!(M=e.endAt).inclusive,values:M.position}),t}function ym(n){let e=Zf(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){g(1===i);const W=t.from[0];W.allDescendants?a=W.collectionId:e=e.child(W.collectionId)}let l=[];t.where&&(l=function(W){const ee=c_(W);return ee instanceof Qn&&Bf(ee)?ee.getFilters():[ee]}(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(W=>{return new el(id((ee=W).field),function(_e){switch(_e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ee.direction));var ee}));let w=null;t.limit&&(w=function(W){let ee;return ee="object"==typeof W?W.value:W,Pf(ee)?null:ee}(t.limit));let M=null;var W;t.startAt&&(M=new Yu((W=t.startAt).values||[],!!W.before));let k=null;return t.endAt&&(k=function(W){return new Yu(W.values||[],!W.before)}(t.endAt)),Gf(e,a,f,l,w,"F",M,k)}function c_(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=id(e.unaryFilter.field);return On.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=id(e.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=id(e.unaryFilter.field);return On.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=id(e.unaryFilter.field);return On.create(l,"!=",{nullValue:"NULL_VALUE"});default:return d()}}(n):void 0!==n.fieldFilter?On.create(id((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return d()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Qn.create(e.compositeFilter.filters.map(t=>c_(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return d()}}(e.compositeFilter.op))}(n):d();var e}function l_(n){return i_[n]}function Rw(n){return bw[n]}function Ow(n){return Cw[n]}function Ic(n){return{fieldPath:n.canonicalString()}}function id(n){return Yr.fromServerFormat(n.fieldPath)}function d_(n){return n instanceof On?function(e){if("=="===e.op){if(Rv(e.value))return{unaryFilter:{field:Ic(e.field),op:"IS_NAN"}};if(Mv(e.value))return{unaryFilter:{field:Ic(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Rv(e.value))return{unaryFilter:{field:Ic(e.field),op:"IS_NOT_NAN"}};if(Mv(e.value))return{unaryFilter:{field:Ic(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ic(e.field),op:Rw(e.op),value:e.value}}}(n):n instanceof Qn?function(e){const t=e.getFilters().map(i=>d_(i));return 1===t.length?t[0]:{compositeFilter:{op:Ow(e.op),filters:t}}}(n):d()}function h_(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function f_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function $s(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Yf(e)),e=p_(n.get(t),e);return Yf(e)}function p_(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Yf(n){return n+"\x01\x01"}function ec(n){const e=n.length;if(g(e>=2),2===e)return g("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const f=n.indexOf("\x01",l);switch((f<0||f>t)&&d(),n.charAt(f+1)){case"\x01":const w=n.substring(l,f);let M;0===a.length?M=w:(a+=w,M=a,a=""),i.push(M);break;case"\x10":a+=n.substring(l,f),a+="\0";break;case"\x11":a+=n.substring(l,f+1);break;default:d()}l=f+2}return new Rn(i)}const Qf=["userId","batchId"];function Xf(n,e){return[n,$s(e)]}function Nw(n,e,t){return[n,$s(e),t]}const sd={},g_=["prefixPath","collectionGroup","readTime","documentId"],Pw=["prefixPath","collectionGroup","documentId"],m_=["collectionGroup","readTime","prefixPath","documentId"],kw=["canonicalId","targetId"],Fw=["targetId","path"],Jf=["path","targetId"],od=["collectionId","parent"],vm=["indexId","uid"],bh=["uid","sequenceNumber"],_m=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ep=["indexId","uid","orderedDocumentKey"],y_=["userId","collectionPath","documentId"],Em=["userId","collectionPath","largestBatchId"],wm=["userId","collectionGroup","largestBatchId"],tp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],v_=[...tp,"documentOverlays"],np=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],__=np,Lw=[...__,"indexConfiguration","indexState","indexEntries"];class rp extends Wg{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function ss(n,e){const t=P(n);return Fo.M(t.re,e)}class ip{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&om(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=_h(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=_h(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=e_();return this.mutations.forEach(a=>{const l=e.get(a.key),f=l.overlayedDocument;let w=this.applyToLocalView(f,l.mutatedFields);w=t.has(a.key)?null:w;const M=Wf(f,w);null!==M&&i.set(a.key,M),f.isValidDocument()||f.convertToNoDocument(Gt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&Gu(this.mutations,e.mutations,(t,i)=>Yl(t,i))&&Gu(this.baseMutations,e.baseMutations,(t,i)=>Yl(t,i))}}class sp{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){g(e.mutations.length===i.length);let a=Ja;const l=e.mutations;for(let f=0;f<l.length;f++)a=a.insert(l[f].key,i[f].version);return new sp(e,t,i,a)}}class Im{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Dc{constructor(e,t,i,a,l=Gt.min(),f=Gt.min(),w=hi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=w}withSequenceNumber(e){return new Dc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Dc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Lo{constructor(e){this.oe=e}}function w_(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:nd(a=n.oe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:td(a,l.version.toTimestamp()),createTime:td(a,l.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:tc(e.version)};else{if(!e.isUnknownDocument())return d();i.unknownDocument={path:t.path.toArray(),version:tc(e.version)}}var a,l;return i}function Dm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bc(n){const e=new hr(n.seconds,n.nanoseconds);return Gt.fromTimestamp(e)}function ul(n,e){const t=(e.baseMutations||[]).map(l=>u_(n.oe,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const i=e.mutations.map(l=>u_(n.oe,l)),a=hr.fromMillis(e.localWriteTimeMs);return new ip(e.batchId,a,t,i)}function Ch(n){const e=bc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bc(n.lastLimboFreeSnapshotVersion):Gt.min();let i;var a;return void 0!==n.query.documents?(g(1===(a=n.query).documents.length),i=po(nl(Zf(a.documents[0])))):i=po(ym(n.query)),new Dc(i,n.targetId,0,n.lastListenSequenceNumber,e,t,hi.fromBase64String(n.resumeToken))}function I_(n,e){const t=tc(e.snapshotVersion),i=tc(e.lastLimboFreeSnapshotVersion);let a;a=hh(e.target)?al(n.oe,e.target):mm(n.oe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tl(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function op(n){const e=ym({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?rl(e,e.limit,"L"):e}function bm(n,e){return new Im(e.largestBatchId,u_(n.oe,e.overlayMutation))}function D_(n,e){const t=e.path.lastSegment();return[n,$s(e.path.popLast()),t]}function ap(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:tc(i.readTime),documentKey:$s(i.documentKey.path),largestBatchId:i.largestBatchId}}class Vw{getBundleMetadata(e,t){return b_(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:bc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return b_(e).put({bundleId:(i=t).id,createTime:tc(Di(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return C_(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:op(a.bundledQuery),readTime:bc(a.readTime)};var a})}saveNamedQuery(e,t){return C_(e).put({name:(i=t).name,readTime:tc(Di(i.readTime)),bundledQuery:i.bundledQuery});var i}}function b_(n){return ss(n,"bundles")}function C_(n){return ss(n,"namedQueries")}class up{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new up(e,t.uid||"")}getOverlay(e,t){return Th(e).get(D_(this.userId,t)).next(i=>i?bm(this.Tt,i):null)}getOverlays(e,t){const i=Xa();return Ae.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((l,f)=>{const w=new Im(t,f);a.push(this.ce(e,w))}),Ae.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(f=>a.add($s(f.getCollectionPath())));const l=[];return a.forEach(f=>{const w=IDBKeyRange.bound([this.userId,f,i],[this.userId,f,i+1],!1,!0);l.push(Th(e).Y("collectionPathOverlayIndex",w))}),Ae.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Xa(),l=$s(t),f=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Th(e).W("collectionPathOverlayIndex",f).next(w=>{for(const M of w){const k=bm(this.Tt,M);a.set(k.getKey(),k)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const l=Xa();let f;const w=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Th(e).X({index:"collectionGroupOverlayIndex",range:w},(M,k,W)=>{const ee=bm(this.Tt,k);l.size()<a||ee.largestBatchId===f?(l.set(ee.getKey(),ee),f=ee.largestBatchId):W.done()}).next(()=>l)}ce(e,t){return Th(e).put(function(i,a,l){const[f,w,M]=D_(a,l.mutation.key);return{userId:a,collectionPath:w,documentId:M,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:rd(i.oe,l.mutation)}}(this.Tt,this.userId,t))}}function Th(n){return ss(n,"documentOverlays")}class Hs{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(oi(e.integerValue));else if("doubleValue"in e){const i=oi(e.doubleValue);isNaN(i)?this.fe(t,13):(this.fe(t,15),sh(i)?t.de(0):t.de(i))}else if("timestampValue"in e){const i=e.timestampValue;this.fe(t,20),"string"==typeof i?t._e(i):(t._e(`${i.seconds||""}`),t.de(i.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(_c(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.fe(t,45),t.de(i.latitude||0),t.de(i.longitude||0)}else"mapValue"in e?Uf(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):d()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const i=e.fields||{};this.fe(t,55);for(const a of Object.keys(i))this.we(a,t),this.he(i[a],t)}Ie(e,t){const i=e.values||[];this.fe(t,50);for(const a of i)this.he(a,t)}ye(e,t){this.fe(t,37),Et.fromName(e).path.forEach(i=>{this.fe(t,60),this.Te(i,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function Cm(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function T_(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const l=Cm(255&t[a]);if(i+=l,8!==l)break}return i}(n);return Math.ceil(e/8)}Hs.Ee=new Hs;class Uw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Re(i.value),i=t.next();this.be()}ve(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.Ve()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{const a=t.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}this.be()}De(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.Ve()}Ce(e){const t=this.xe(e),i=T_(t);this.Ne(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}ke(e){const t=this.xe(e),i=T_(t);this.Ne(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.$e(0),this.$e(255)):255===t?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class S_{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class Bw{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class Sh{constructor(){this.Le=new Uw,this.qe=new S_(this.Le),this.Ue=new Bw(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class cl{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new cl(this.indexId,this.documentKey,this.arrayValue,i)}}function Eu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=A_(n.arrayValue,e.arrayValue),0!==t?t:(t=A_(n.directionalValue,e.directionalValue),0!==t?t:Et.comparator(n.documentKey,e.documentKey)))}function A_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class jw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const i=t;i.isInequality()?this.ze=i:this.je.push(i)}}We(e){g(e.collectionGroup===this.collectionId);const t=Gg(e);if(void 0!==t&&!this.He(t))return!1;const i=Yc(e);let a=0,l=0;for(;a<i.length&&this.He(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.ze){const f=i[a];if(!this.Je(this.ze,f)||!this.Ye(this.Qe[l++],f))return!1;++a}for(;a<i.length;++a)if(l>=this.Qe.length||!this.Ye(this.Qe[l++],i[a]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ah(n){var e,t;if(g(n instanceof On||n instanceof Qn),n instanceof On){if(n instanceof Lv){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>On.create(n.field,"==",l)))||[];return Qn.create(a,"or")}return n}const i=n.filters.map(a=>Ah(a));return Qn.create(i,n.op)}function Tm(n){if(0===n.getFilters().length)return[];const e=M_(Ah(n));return g(cp(e)),ad(e)||x_(e)?[e]:e.getFilters()}function ad(n){return n instanceof On}function x_(n){return n instanceof Qn&&Bf(n)}function cp(n){return ad(n)||x_(n)||function(e){if(e instanceof Qn&&Ov(e)){for(const t of e.getFilters())if(!ad(t)&&!x_(t))return!1;return!0}return!1}(n)}function M_(n){if(g(n instanceof On||n instanceof Qn),n instanceof On)return n;if(1===n.filters.length)return M_(n.filters[0]);const e=n.filters.map(i=>M_(i));let t=Qn.create(e,n.op);return t=xh(t),cp(t)?t:(g(t instanceof Qn),g(lh(t)),g(t.filters.length>1),t.filters.reduce((i,a)=>lp(i,a)))}function lp(n,e){let t;return g(n instanceof On||n instanceof Qn),g(e instanceof On||e instanceof Qn),t=n instanceof On?e instanceof On?Qn.create([n,e],"and"):Sm(n,e):e instanceof On?Sm(e,n):function(i,a){if(g(i.filters.length>0&&a.filters.length>0),lh(i)&&lh(a))return kv(i,a.getFilters());const l=Ov(i)?i:a,f=Ov(i)?a:i,w=l.filters.map(M=>lp(M,f));return Qn.create(w,"or")}(n,e),xh(t)}function Sm(n,e){if(lh(e))return kv(e,n.getFilters());{const t=e.filters.map(i=>lp(n,i));return Qn.create(t,"or")}}function xh(n){if(g(n instanceof On||n instanceof Qn),n instanceof On)return n;const e=n.getFilters();if(1===e.length)return xh(e[0]);if(Nv(n))return n;const t=e.map(a=>xh(a)),i=[];return t.forEach(a=>{a instanceof On?i.push(a):a instanceof Qn&&(a.op===n.op?i.push(...a.filters):i.push(a))}),1===i.length?i[0]:Qn.create(i,n.op)}class R_{constructor(){this.Ze=new Mh}addToCollectionParentIndex(e,t){return this.Ze.add(t),Ae.resolve()}getCollectionParents(e,t){return Ae.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return Ae.resolve()}deleteFieldIndex(e,t){return Ae.resolve()}getDocumentsMatchingTarget(e,t){return Ae.resolve(null)}getIndexType(e,t){return Ae.resolve(0)}getFieldIndexes(e,t){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,t){return Ae.resolve(va.min())}getMinOffsetFromCollectionGroup(e,t){return Ae.resolve(va.min())}updateCollectionGroup(e,t,i){return Ae.resolve()}updateIndexEntries(e,t){return Ae.resolve()}}class Mh{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new or(Rn.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new or(Rn.comparator)).toArray()}}const _a=new Uint8Array(0);class dp{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Mh,this.tn=new sl(i=>tl(i),(i,a)=>Hl(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const l={collectionId:i,parent:$s(a)};return Rh(e).put(l)}return Ae.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[nh(t),""],!1,!0);return Rh(e).W(a).next(l=>{for(const f of l){if(f.collectionId!==t)break;i.push(ec(f.parent))}return i})}addFieldIndex(e,t){const i=hp(e),a={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(w=>[w.fieldPath.canonicalString(),w.kind])};var f;delete a.indexId;const l=i.add(a);if(t.indexState){const f=ud(e);return l.next(w=>{f.put(ap(w,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const i=hp(e),a=ud(e),l=nc(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=nc(e);let a=!0;const l=new Map;return Ae.forEach(this.en(t),f=>this.nn(e,f).next(w=>{a&&(a=!!w),l.set(f,w)})).next(()=>{if(a){let f=fn();const w=[];return Ae.forEach(l,(M,k)=>{var W;it("IndexedDbIndexManager",`Using index ${W=M,`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(Un=>`${Un.fieldPath}:${Un.kind}`).join(",")}`} to execute ${tl(t)}`);const ee=function(Un,xn){const wn=Gg(xn);if(void 0===wn)return null;for(const Nn of Gl(Un,wn.fieldPath))switch(Nn.op){case"array-contains-any":return Nn.value.arrayValue.values||[];case"array-contains":return[Nn.value]}return null}(k,M),_e=function(Un,xn){const wn=new Map;for(const Nn of Yc(xn))for(const Cs of Gl(Un,Nn.fieldPath))switch(Cs.op){case"==":case"in":wn.set(Nn.fieldPath.canonicalString(),Cs.value);break;case"not-in":case"!=":return wn.set(Nn.fieldPath.canonicalString(),Cs.value),Array.from(wn.values())}return null}(k,M),Ke=function(Un,xn){const wn=[];let Nn=!0;for(const Cs of Yc(xn)){const _v=0===Cs.kind?yw(Un,Cs.fieldPath,Un.startAt):Hf(Un,Cs.fieldPath,Un.startAt);wn.push(_v.value),Nn&&(Nn=_v.inclusive)}return new Yu(wn,Nn)}(k,M),Qe=function(Un,xn){const wn=[];let Nn=!0;for(const Cs of Yc(xn)){const _v=0===Cs.kind?Hf(Un,Cs.fieldPath,Un.endAt):yw(Un,Cs.fieldPath,Un.endAt);wn.push(_v.value),Nn&&(Nn=_v.inclusive)}return new Yu(wn,Nn)}(k,M),wt=this.sn(M,k,Ke),Ft=this.sn(M,k,Qe),Xn=this.rn(M,k,_e),Mr=this.on(M.indexId,ee,wt,Ke.inclusive,Ft,Qe.inclusive,Xn);return Ae.forEach(Mr,Un=>i.J(Un,t.limit).next(xn=>{xn.forEach(wn=>{const Nn=Et.fromSegments(wn.documentKey);f.has(Nn)||(f=f.add(Nn),w.push(Nn))})}))}).next(()=>w)}return Ae.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Tm(Qn.create(e.filters,"and")).map(i=>Uv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,i,a,l,f,w){const M=(null!=t?t.length:1)*Math.max(i.length,l.length),k=M/(null!=t?t.length:1),W=[];for(let ee=0;ee<M;++ee){const _e=t?this.un(t[ee/k]):_a,Ke=this.cn(e,_e,i[ee%k],a),Qe=this.an(e,_e,l[ee%k],f),wt=w.map(Ft=>this.cn(e,_e,Ft,!0));W.push(...this.createRange(Ke,Qe,wt))}return W}cn(e,t,i,a){const l=new cl(e,Et.empty(),t,i);return a?l:l.Ge()}an(e,t,i,a){const l=new cl(e,Et.empty(),t,i);return a?l.Ge():l}nn(e,t){const i=new jw(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let f=null;for(const w of l)i.We(w)&&(!f||w.fields.length>f.fields.length)&&(f=w);return f})}getIndexType(e,t){let i=2;const a=this.en(t);return Ae.forEach(a,l=>this.nn(e,l).next(f=>{f?0!==i&&f.fields.length<function(w){let M=new or(Yr.comparator),k=!1;for(const W of w.filters)for(const ee of W.getFlattenedFilters())ee.field.isKeyField()||("array-contains"===ee.op||"array-contains-any"===ee.op?k=!0:M=M.add(ee.field));for(const W of w.orderBy)W.field.isKeyField()||(M=M.add(W.field));return M.size+(k?1:0)}(l)&&(i=1):i=0})).next(()=>null!==t.limit&&a.length>1&&2===i?1:i)}hn(e,t){const i=new Sh;for(const a of Yc(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const f=i.Ke(a.kind);Hs.Ee.ae(l,f)}return i.Be()}un(e){const t=new Sh;return Hs.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const i=new Sh;return Hs.Ee.ae(jl(this.databaseId,t),i.Ke(function(a){const l=Yc(a);return 0===l.length?0:l[l.length-1].kind}(e))),i.Be()}rn(e,t,i){if(null===i)return[];let a=[];a.push(new Sh);let l=0;for(const f of Yc(e)){const w=i[l++];for(const M of a)if(this.fn(t,f.fieldPath)&&$l(w))a=this.dn(a,f,w);else{const k=M.Ke(f.kind);Hs.Ee.ae(w,k)}}return this._n(a)}sn(e,t,i){return this.rn(e,t,i.position)}_n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Be();return t}dn(e,t,i){const a=[...e],l=[];for(const f of i.arrayValue.values||[])for(const w of a){const M=new Sh;M.seed(w.Be()),Hs.Ee.ae(f,M.Ke(t.kind)),l.push(M)}return l}fn(e,t){return!!e.filters.find(i=>i instanceof On&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=hp(e),a=ud(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(l=>{const f=[];return Ae.forEach(l,w=>a.get([w.indexId,this.uid]).next(M=>{f.push(function(k,W){const ee=W?new Ll(W.sequenceNumber,new va(bc(W.readTime),new Et(ec(W.documentKey)),W.largestBatchId)):Ll.empty(),_e=k.fields.map(([Ke,Qe])=>new rh(Yr.fromServerFormat(Ke),Qe));return new Fl(k.indexId,k.collectionGroup,_e,ee)}(w,M))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:nn(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=hp(e),l=ud(e);return this.wn(e).next(f=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(w=>Ae.forEach(w,M=>l.put(ap(M.indexId,this.user,f,i)))))}updateIndexEntries(e,t){const i=new Map;return Ae.forEach(t,(a,l)=>{const f=i.get(a.collectionGroup);return(f?Ae.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(w=>(i.set(a.collectionGroup,w),Ae.forEach(w,M=>this.mn(e,a,M).next(k=>{const W=this.gn(l,M);return k.isEqual(W)?Ae.resolve():this.yn(e,l,M,k,W)}))))})}pn(e,t,i,a){return nc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.ln(i,t.key),documentKey:t.key.path.toArray()})}In(e,t,i,a){return nc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.ln(i,t.key),t.key.path.toArray()])}mn(e,t,i){const a=nc(e);let l=new or(Eu);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.ln(i,t)])},(f,w)=>{l=l.add(new cl(i.indexId,t,w.arrayValue,w.directionalValue))}).next(()=>l)}gn(e,t){let i=new or(Eu);const a=this.hn(t,e);if(null==a)return i;const l=Gg(t);if(null!=l){const f=e.data.field(l.fieldPath);if($l(f))for(const w of f.arrayValue.values||[])i=i.add(new cl(t.indexId,e.key,this.un(w),a))}else i=i.add(new cl(t.indexId,e.key,_a,a));return i}yn(e,t,i,a,l){it("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(w,M,k,W,ee){const _e=w.getIterator(),Ke=M.getIterator();let Qe=dh(_e),wt=dh(Ke);for(;Qe||wt;){let Ft=!1,Xn=!1;if(Qe&&wt){const Mr=k(Qe,wt);Mr<0?Xn=!0:Mr>0&&(Ft=!0)}else null!=Qe?Xn=!0:Ft=!0;Ft?(W(wt),wt=dh(Ke)):Xn?(ee(Qe),Qe=dh(_e)):(Qe=dh(_e),wt=dh(Ke))}}(a,l,Eu,w=>{f.push(this.pn(e,t,i,w))},w=>{f.push(this.In(e,t,i,w))}),Ae.waitFor(f)}wn(e){let t=1;return ud(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((f,w)=>Eu(f,w)).filter((f,w,M)=>!w||0!==Eu(f,M[w-1]));const a=[];a.push(e);for(const f of i){const w=Eu(f,e),M=Eu(f,t);if(0===w)a[0]=e.Ge();else if(w>0&&M<0)a.push(f),a.push(f.Ge());else if(M>0)break}a.push(t);const l=[];for(let f=0;f<a.length;f+=2){if(this.Tn(a[f],a[f+1]))return[];l.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,_a,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,_a,[]]))}return l}Tn(e,t){return Eu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Am)}getMinOffset(e,t){return Ae.mapArray(this.en(t),i=>this.nn(e,i).next(a=>a||d())).next(Am)}}function Rh(n){return ss(n,"collectionParents")}function nc(n){return ss(n,"indexEntries")}function hp(n){return ss(n,"indexConfiguration")}function ud(n){return ss(n,"indexState")}function Am(n){g(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;Vl(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new va(e.readTime,e.documentKey,t)}const O_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vo{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Vo(e,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cd(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),l=[],f=IDBKeyRange.only(t.batchId);let w=0;const M=i.X({range:f},(W,ee,_e)=>(w++,_e.delete()));l.push(M.next(()=>{g(1===w)}));const k=[];for(const W of t.mutations){const ee=Nw(e,W.key.path,t.batchId);l.push(a.delete(ee)),k.push(W.key)}return Ae.waitFor(l).next(()=>k)}function fp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw d();e=n.noDocument}return JSON.stringify(e).length}Vo.DEFAULT_COLLECTION_PERCENTILE=10,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vo.DEFAULT=new Vo(41943040,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vo.DISABLED=new Vo(-1,0,0);class xm{constructor(e,t,i,a){this.userId=e,this.Tt=t,this.indexManager=i,this.referenceDelegate=a,this.En={}}static ue(e,t,i,a){g(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new xm(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cc(e).X({index:"userMutationsIndex",range:i},(a,l,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const l=ld(e),f=Cc(e);return f.add({}).next(w=>{g("number"==typeof w);const M=new ip(w,t,i,a),k=function(_e,Ke,Qe){const wt=Qe.baseMutations.map(Xn=>rd(_e.oe,Xn)),Ft=Qe.mutations.map(Xn=>rd(_e.oe,Xn));return{userId:Ke,batchId:Qe.batchId,localWriteTimeMs:Qe.localWriteTime.toMillis(),baseMutations:wt,mutations:Ft}}(this.Tt,this.userId,M),W=[];let ee=new or((_e,Ke)=>nn(_e.canonicalString(),Ke.canonicalString()));for(const _e of a){const Ke=Nw(this.userId,_e.key.path,w);ee=ee.add(_e.key.path.popLast()),W.push(f.put(k)),W.push(l.put(Ke,sd))}return ee.forEach(_e=>{W.push(this.indexManager.addToCollectionParentIndex(e,_e))}),e.addOnCommittedListener(()=>{this.En[w]=M.keys()}),Ae.waitFor(W).next(()=>M)})}lookupMutationBatch(e,t){return Cc(e).get(t).next(i=>i?(g(i.userId===this.userId),ul(this.Tt,i)):null)}An(e,t){return this.En[t]?Ae.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.En[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Cc(e).X({index:"userMutationsIndex",range:a},(f,w,M)=>{w.userId===this.userId&&(g(w.batchId>=i),l=ul(this.Tt,w)),M.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Cc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,l,f)=>{i=l.batchId,f.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cc(e).W("userMutationsIndex",t).next(i=>i.map(a=>ul(this.Tt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Xf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return ld(e).X({range:a},(f,w,M)=>{const[k,W,ee]=f,_e=ec(W);if(k===this.userId&&t.path.isEqual(_e))return Cc(e).get(ee).next(Ke=>{if(!Ke)throw d();g(Ke.userId===this.userId),l.push(ul(this.Tt,Ke))});M.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new or(nn);const a=[];return t.forEach(l=>{const f=Xf(this.userId,l.path),w=IDBKeyRange.lowerBound(f),M=ld(e).X({range:w},(k,W,ee)=>{const[_e,Ke,Qe]=k,wt=ec(Ke);_e===this.userId&&l.path.isEqual(wt)?i=i.add(Qe):ee.done()});a.push(M)}),Ae.waitFor(a).next(()=>this.Rn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Xf(this.userId,i),f=IDBKeyRange.lowerBound(l);let w=new or(nn);return ld(e).X({range:f},(M,k,W)=>{const[ee,_e,Ke]=M,Qe=ec(_e);ee===this.userId&&i.isPrefixOf(Qe)?Qe.length===a&&(w=w.add(Ke)):W.done()}).next(()=>this.Rn(e,w))}Rn(e,t){const i=[],a=[];return t.forEach(l=>{a.push(Cc(e).get(l).next(f=>{if(null===f)throw d();g(f.userId===this.userId),i.push(ul(this.Tt,f))}))}),Ae.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return cd(e.re,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.bn(t.batchId)}),Ae.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ae.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return ld(e).X({range:i},(l,f,w)=>{if(l[0]===this.userId){const M=ec(l[1]);a.push(M)}else w.done()}).next(()=>{g(0===a.length)})})}containsKey(e,t){return N_(e,this.userId,t)}vn(e){return P_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function N_(n,e,t){const i=Xf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let f=!1;return ld(n).X({range:l,Z:!0},(w,M,k)=>{const[W,ee,_e]=w;W===e&&ee===a&&(f=!0),k.done()}).next(()=>f)}function Cc(n){return ss(n,"mutations")}function ld(n){return ss(n,"documentMutations")}function P_(n){return ss(n,"mutationQueues")}class ll{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new ll(0)}static Sn(){return new ll(-1)}}class $w{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const i=new ll(t.highestTargetId);return t.highestTargetId=i.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>Gt.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Dn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Cn(e,a)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(i=>(i.targetCount+=1,this.Nn(t,i),this.Cn(e,i))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>dd(e).delete(t.targetId)).next(()=>this.Dn(e)).next(i=>(g(i.targetCount>0),i.targetCount-=1,this.Cn(e,i)))}removeTargets(e,t,i){let a=0;const l=[];return dd(e).X((f,w)=>{const M=Ch(w);M.sequenceNumber<=t&&null===i.get(M.targetId)&&(a++,l.push(this.removeTargetData(e,M)))}).next(()=>Ae.waitFor(l)).next(()=>a)}forEachTarget(e,t){return dd(e).X((i,a)=>{const l=Ch(a);t(l)})}Dn(e){return Mm(e).get("targetGlobalKey").next(t=>(g(null!==t),t))}Cn(e,t){return Mm(e).put("targetGlobalKey",t)}xn(e,t){return dd(e).put(I_(this.Tt,t))}Nn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=tl(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return dd(e).X({range:a,index:"queryTargetsIndex"},(f,w,M)=>{const k=Ch(w);Hl(t,k.target)&&(l=k,M.done())}).next(()=>l)}addMatchingKeys(e,t,i){const a=[],l=wu(e);return t.forEach(f=>{const w=$s(f.path);a.push(l.put({targetId:i,path:w})),a.push(this.referenceDelegate.addReference(e,i,f))}),Ae.waitFor(a)}removeMatchingKeys(e,t,i){const a=wu(e);return Ae.forEach(t,l=>{const f=$s(l.path);return Ae.waitFor([a.delete([i,f]),this.referenceDelegate.removeReference(e,i,l)])})}removeMatchingKeysForTargetId(e,t){const i=wu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=wu(e);let l=fn();return a.X({range:i,Z:!0},(f,w,M)=>{const k=ec(f[1]),W=new Et(k);l=l.add(W)}).next(()=>l)}containsKey(e,t){const i=$s(t.path),a=IDBKeyRange.bound([i],[nh(i)],!1,!0);let l=0;return wu(e).X({index:"documentTargetsIndex",Z:!0,range:a},([f,w],M,k)=>{0!==f&&(l++,k.done())}).next(()=>l>0)}ie(e,t){return dd(e).get(t).next(i=>i?Ch(i):null)}}function dd(n){return ss(n,"targets")}function Mm(n){return ss(n,"targetGlobal")}function wu(n){return ss(n,"targetDocuments")}function k_([n,e],[t,i]){const a=nn(n,t);return 0===a?nn(e,i):a}class Rm{constructor(e){this.kn=e,this.buffer=new or(k_),this.On=0}Mn(){return++this.On}Fn(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();k_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hw{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var t=this;it("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.$n=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){yu(i)?it("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield zu(i)}yield t.Bn(3e5)}))}}class Gw{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return Ae.resolve(Xo.at);const i=new Rm(t);return this.Ln.forEachTarget(e,a=>i.Fn(a.sequenceNumber)).next(()=>this.Ln.Un(e,a=>i.Fn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Ln.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(O_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O_):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let i,a,l,f,w,M,k;const W=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ee=>(ee>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ee}`),a=this.params.maximumSequenceNumbersToCollect):a=ee,f=Date.now(),this.nthSequenceNumber(e,a))).next(ee=>(i=ee,w=Date.now(),this.removeTargets(e,i,t))).next(ee=>(l=ee,M=Date.now(),this.removeOrphanedDocuments(e,i))).next(ee=>(k=Date.now(),ju()<=Mn.in.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-W}ms\n\tDetermined least recently used ${a} in `+(w-f)+`ms\n\tRemoved ${l} targets in `+(M-w)+`ms\n\tRemoved ${ee} documents in `+(k-M)+`ms\nTotal Duration: ${k-W}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:ee})))}}class zw{constructor(e,t){this.db=e,this.garbageCollector=new Gw(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Gn(e){let t=0;return this.Un(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(i,a)=>t(a))}addReference(e,t,i){return pp(e,i)}removeReference(e,t,i){return pp(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return pp(e,t)}jn(e,t){return function(i,a){let l=!1;return P_(i).tt(f=>N_(i,f,a).next(w=>(w&&(l=!0),Ae.resolve(!w)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Qn(e,(f,w)=>{if(w<=t){const M=this.jn(e,f).next(k=>{if(!k)return l++,i.getEntry(e,f).next(()=>(i.removeEntry(f,Gt.min()),wu(e).delete([0,$s(f.path)])))});a.push(M)}}).next(()=>Ae.waitFor(a)).next(()=>i.apply(e)).next(()=>l)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return pp(e,t)}Qn(e,t){const i=wu(e);let a,l=Xo.at;return i.X({index:"documentTargetsIndex"},([f,w],{path:M,sequenceNumber:k})=>{0===f?(l!==Xo.at&&t(new Et(ec(a)),l),l=k,a=M):l=Xo.at}).next(()=>{l!==Xo.at&&t(new Et(ec(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pp(n,e){return wu(n).put((i=n.currentSequenceNumber,{targetId:0,path:$s(e.path),sequenceNumber:i}));var i}class F_{constructor(){this.changes=new sl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?Ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ww{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return dl(e).put(i)}removeEntry(e,t,i){return dl(e).delete(function(a,l){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Dm(l),f[f.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.zn(e,i)))}getEntry(e,t){let i=xr.newInvalidDocument(t);return dl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gp(t))},(a,l)=>{i=this.Wn(t,l)}).next(()=>i)}Hn(e,t){let i={size:0,document:xr.newInvalidDocument(t)};return dl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gp(t))},(a,l)=>{i={document:this.Wn(t,l),size:fp(l)}}).next(()=>i)}getEntries(e,t){let i=Jo();return this.Jn(e,t,(a,l)=>{const f=this.Wn(a,l);i=i.insert(a,f)}).next(()=>i)}Yn(e,t){let i=Jo(),a=new fi(Et.comparator);return this.Jn(e,t,(l,f)=>{const w=this.Wn(l,f);i=i.insert(l,w),a=a.insert(l,fp(f))}).next(()=>({documents:i,Zn:a}))}Jn(e,t,i){if(t.isEmpty())return Ae.resolve();let a=new or(Oh);t.forEach(M=>a=a.add(M));const l=IDBKeyRange.bound(gp(a.first()),gp(a.last())),f=a.getIterator();let w=f.getNext();return dl(e).X({index:"documentKeyIndex",range:l},(M,k,W)=>{const ee=Et.fromSegments([...k.prefixPath,k.collectionGroup,k.documentId]);for(;w&&Oh(w,ee)<0;)i(w,null),w=f.getNext();w&&w.isEqual(ee)&&(i(w,k),w=f.hasNext()?f.getNext():null),w?W.j(gp(w)):W.done()}).next(()=>{for(;w;)i(w,null),w=f.hasNext()?f.getNext():null})}getDocumentsMatchingQuery(e,t,i,a){const l=t.path,f=[l.popLast().toArray(),l.lastSegment(),Dm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],w=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dl(e).W(IDBKeyRange.bound(f,w,!0)).next(M=>{let k=Jo();for(const W of M){const ee=this.Wn(Et.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);ee.isFoundDocument()&&(mh(t,ee)||a.has(ee.key))&&(k=k.insert(ee.key,ee))}return k})}getAllFromCollectionGroup(e,t,i,a){let l=Jo();const f=Nm(t,i),w=Nm(t,va.max());return dl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,w,!0)},(M,k,W)=>{const ee=this.Wn(Et.fromSegments(k.prefixPath.concat(k.collectionGroup,k.documentId)),k);l=l.insert(ee.key,ee),l.size===a&&W.done()}).next(()=>l)}newChangeBuffer(e){return new V_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Om(e).get("remoteDocumentGlobalKey").next(t=>(g(!!t),t))}zn(e,t){return Om(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const i=function E_(n,e){let t;if(e.document)t=Aw(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Et.fromSegments(e.noDocument.path),a=bc(e.noDocument.readTime);t=xr.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return d();{const i=Et.fromSegments(e.unknownDocument.path),a=bc(e.unknownDocument.version);t=xr.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new hr(i[0],i[1]);return Gt.fromTimestamp(a)}(e.readTime)),t}(this.Tt,t);if(!i.isNoDocument()||!i.version.isEqual(Gt.min()))return i}return xr.newInvalidDocument(e)}}function L_(n){return new Ww(n)}class V_ extends F_{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new sl(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new or((l,f)=>nn(l.canonicalString(),f.canonicalString()));return this.changes.forEach((l,f)=>{const w=this.ts.get(l);if(t.push(this.Xn.removeEntry(e,l,w.readTime)),f.isValidDocument()){const M=w_(this.Xn.Tt,f);a=a.add(l.path.popLast());const k=fp(M);i+=k-w.size,t.push(this.Xn.addEntry(e,l,M))}else if(i-=w.size,this.trackRemovals){const M=w_(this.Xn.Tt,f.convertToNoDocument(Gt.min()));t.push(this.Xn.addEntry(e,l,M))}}),a.forEach(l=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Xn.updateMetadata(e,i)),Ae.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(i=>(this.ts.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:i,Zn:a})=>(a.forEach((l,f)=>{this.ts.set(l,{size:f,readTime:i.get(l).readTime})}),i))}}function Om(n){return ss(n,"remoteDocumentGlobal")}function dl(n){return ss(n,"remoteDocumentsV14")}function gp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nm(n,e){const t=e.documentKey.path.toArray();return[n,Dm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Oh(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=nn(t[l],i[l]),a)return a;return a=nn(t.length,i.length),a||(a=nn(t[t.length-2],i[i.length-2]),a||nn(t[t.length-1],i[i.length-1]))}class hl{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qw{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==i&&_h(i.mutation,a,is.empty(),hr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,fn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=fn()){const a=Xa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let f=ed();return l.forEach((w,M)=>{f=f.insert(w,M.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const i=Xa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,fn()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((f,w)=>{t.set(f,w)})})}computeViews(e,t,i,a){let l=Jo();const f=Eh(),w=Eh();return t.forEach((M,k)=>{const W=i.get(k.key);a.has(k.key)&&(void 0===W||W.mutation instanceof Ju)?l=l.insert(k.key,k):void 0!==W?(f.set(k.key,W.mutation.getFieldMask()),_h(W.mutation,k,W.mutation.getFieldMask(),hr.now())):f.set(k.key,is.empty())}),this.recalculateAndSaveOverlays(e,l).next(M=>(M.forEach((k,W)=>f.set(k,W)),t.forEach((k,W)=>{var ee;return w.set(k,new hl(W,null!==(ee=f.get(k))&&void 0!==ee?ee:null))}),w))}recalculateAndSaveOverlays(e,t){const i=Eh();let a=new fi((f,w)=>f-w),l=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const w of f)w.keys().forEach(M=>{const k=t.get(M);if(null===k)return;let W=i.get(M)||is.empty();W=w.applyToLocalView(k,W),i.set(M,W);const ee=(a.get(w.batchId)||fn()).add(M);a=a.insert(w.batchId,ee)})}).next(()=>{const f=[],w=a.getReverseIterator();for(;w.hasNext();){const M=w.getNext(),k=M.key,W=M.value,ee=e_();W.forEach(_e=>{if(!l.has(_e)){const Ke=Wf(t.get(_e),i.get(_e));null!==Ke&&ee.set(_e,Ke),l=l.add(_e)}}),f.push(this.documentOverlayCache.saveOverlays(e,k,ee))}return Ae.waitFor(f)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Et.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var a}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const f=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):Ae.resolve(Xa());let w=-1,M=l;return f.next(k=>Ae.forEach(k,(W,ee)=>(w<ee.largestBatchId&&(w=ee.largestBatchId),l.get(W)?Ae.resolve():this.remoteDocumentCache.getEntry(e,W).next(_e=>{M=M.insert(W,_e)}))).next(()=>this.populateOverlays(e,k,l)).next(()=>this.computeViews(e,M,k,fn())).next(W=>({batchId:w,changes:Jv(W)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Et(t)).next(i=>{let a=ed();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const a=t.collectionGroup;let l=ed();return this.indexManager.getCollectionParents(e,a).next(f=>Ae.forEach(f,w=>{const M=(k=t,W=w.child(a),new Qu(W,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt));var k,W;return this.getDocumentsMatchingCollectionQuery(e,M,i).next(k=>{k.forEach((W,ee)=>{l=l.insert(W,ee)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a))).next(l=>{a.forEach((w,M)=>{const k=M.getKey();null===l.get(k)&&(l=l.insert(k,xr.newInvalidDocument(k)))});let f=ed();return l.forEach((w,M)=>{const k=a.get(w);void 0!==k&&_h(k.mutation,M,is.empty(),hr.now()),mh(t,M)&&(f=f.insert(w,M))}),f})}}class mp{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return Ae.resolve(this.es.get(t))}saveBundleMetadata(e,t){var i;return this.es.set(t.id,{id:(i=t).id,version:i.version,createTime:Di(i.createTime)}),Ae.resolve()}getNamedQuery(e,t){return Ae.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(i=t).name,query:op(i.bundledQuery),readTime:Di(i.readTime)}),Ae.resolve();var i}}class Zw{constructor(){this.overlays=new fi(Et.comparator),this.ss=new Map}getOverlay(e,t){return Ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Xa();return Ae.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.ce(e,t,l)}),Ae.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.ss.get(i);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.ss.delete(i)),Ae.resolve()}getOverlaysForCollection(e,t,i){const a=Xa(),l=t.length+1,f=new Et(t.child("")),w=this.overlays.getIteratorFrom(f);for(;w.hasNext();){const M=w.getNext().value,k=M.getKey();if(!t.isPrefixOf(k.path))break;k.path.length===l&&M.largestBatchId>i&&a.set(M.getKey(),M)}return Ae.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new fi((k,W)=>k-W);const f=this.overlays.getIterator();for(;f.hasNext();){const k=f.getNext().value;if(k.getKey().getCollectionGroup()===t&&k.largestBatchId>i){let W=l.get(k.largestBatchId);null===W&&(W=Xa(),l=l.insert(k.largestBatchId,W)),W.set(k.getKey(),k)}}const w=Xa(),M=l.getIterator();for(;M.hasNext()&&(M.getNext().value.forEach((k,W)=>w.set(k,W)),!(w.size()>=a)););return Ae.resolve(w)}ce(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const f=this.ss.get(a.largestBatchId).delete(i.key);this.ss.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new Im(t,i));let l=this.ss.get(t);void 0===l&&(l=fn(),this.ss.set(t,l)),this.ss.set(t,l.add(i.key))}}class Pm{constructor(){this.rs=new or(Hi.os),this.us=new or(Hi.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const i=new Hi(e,t);this.rs=this.rs.add(i),this.us=this.us.add(i)}hs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ls(new Hi(e,t))}fs(e,t){e.forEach(i=>this.removeReference(i,t))}ds(e){const t=new Et(new Rn([])),i=new Hi(t,e),a=new Hi(t,e+1),l=[];return this.us.forEachInRange([i,a],f=>{this.ls(f),l.push(f.key)}),l}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new Et(new Rn([])),i=new Hi(t,e),a=new Hi(t,e+1);let l=fn();return this.us.forEachInRange([i,a],f=>{l=l.add(f.key)}),l}containsKey(e){const t=new Hi(e,0),i=this.rs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Hi{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return Et.comparator(e.key,t.key)||nn(e.gs,t.gs)}static cs(e,t){return nn(e.gs,t.gs)||Et.comparator(e.key,t.key)}}class Kw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new or(Hi.os)}checkEmpty(e){return Ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const l=this.ys;this.ys++;const f=new ip(l,t,i,a);this.mutationQueue.push(f);for(const w of a)this.ps=this.ps.add(new Hi(w.key,l)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return Ae.resolve(f)}lookupMutationBatch(e,t){return Ae.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Ts(t+1),l=a<0?0:a;return Ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Hi(t,0),a=new Hi(t,Number.POSITIVE_INFINITY),l=[];return this.ps.forEachInRange([i,a],f=>{const w=this.Is(f.gs);l.push(w)}),Ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new or(nn);return t.forEach(a=>{const l=new Hi(a,0),f=new Hi(a,Number.POSITIVE_INFINITY);this.ps.forEachInRange([l,f],w=>{i=i.add(w.gs)})}),Ae.resolve(this.Es(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Et.isDocumentKey(l)||(l=l.child(""));const f=new Hi(new Et(l),0);let w=new or(nn);return this.ps.forEachWhile(M=>{const k=M.key.path;return!!i.isPrefixOf(k)&&(k.length===a&&(w=w.add(M.gs)),!0)},f),Ae.resolve(this.Es(w))}Es(e){const t=[];return e.forEach(i=>{const a=this.Is(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){g(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let i=this.ps;return Ae.forEach(t.mutations,a=>{const l=new Hi(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ps=i})}bn(e){}containsKey(e,t){const i=new Hi(t,0),a=this.ps.firstAfterOrEqual(i);return Ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Ae.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Iu{constructor(e){this.Rs=e,this.docs=new fi(Et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,f=this.Rs(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Ae.resolve(i?i.document.mutableCopy():xr.newInvalidDocument(t))}getEntries(e,t){let i=Jo();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():xr.newInvalidDocument(a))}),Ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Jo();const f=t.path,w=new Et(f.child("")),M=this.docs.getIteratorFrom(w);for(;M.hasNext();){const{key:k,value:{document:W}}=M.getNext();if(!f.isPrefixOf(k.path))break;k.path.length>f.length+1||Vl(wv(W),i)<=0||(a.has(W.key)||mh(t,W))&&(l=l.insert(W.key,W.mutableCopy()))}return Ae.resolve(l)}getAllFromCollectionGroup(e,t,i,a){d()}bs(e,t){return Ae.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Nh(this)}getSize(e){return Ae.resolve(this.size)}}class Nh extends F_{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Xn.addEntry(e,a)):this.Xn.removeEntry(i)}),Ae.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class Gs{constructor(e){this.persistence=e,this.vs=new sl(t=>tl(t),Hl),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new Pm,this.targetCount=0,this.Ss=ll.Vn()}forEachTarget(e,t){return this.vs.forEach((i,a)=>t(a)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ps&&(this.Ps=t),Ae.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new ll(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,Ae.resolve()}updateTargetData(e,t){return this.xn(t),Ae.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.vs.forEach((f,w)=>{w.sequenceNumber<=t&&null===i.get(w.targetId)&&(this.vs.delete(f),l.push(this.removeMatchingKeysForTargetId(e,w.targetId)),a++)}),Ae.waitFor(l).next(()=>a)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.vs.get(t)||null;return Ae.resolve(i)}addMatchingKeys(e,t,i){return this.Vs.hs(t,i),Ae.resolve()}removeMatchingKeys(e,t,i){this.Vs.fs(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(f=>{l.push(a.markPotentiallyOrphaned(e,f))}),Ae.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),Ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Vs.ws(t);return Ae.resolve(i)}containsKey(e,t){return Ae.resolve(this.Vs.containsKey(t))}}class Tc{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Xo(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new Gs(this),this.indexManager=new R_,this.remoteDocumentCache=new Iu(i=>this.referenceDelegate.ks(i)),this.Tt=new Lo(t),this.Os=new mp(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Ds[e.toKey()];return i||(i=new Kw(t,this.referenceDelegate),this.Ds[e.toKey()]=i),i}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,t,i){it("MemoryPersistence","Starting transaction:",e);const a=new yp(this.Cs.next());return this.referenceDelegate.Ms(),i(a).next(l=>this.referenceDelegate.Fs(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}$s(e,t){return Ae.or(Object.values(this.Ds).map(i=>()=>i.containsKey(e,t)))}}class yp extends Wg{constructor(e){super(),this.currentSequenceNumber=e}}class go{constructor(e){this.persistence=e,this.Bs=new Pm,this.Ls=null}static qs(e){return new go(e)}get Us(){if(this.Ls)return this.Ls;throw d()}addReference(e,t,i){return this.Bs.addReference(i,t),this.Us.delete(i.toString()),Ae.resolve()}removeReference(e,t,i){return this.Bs.removeReference(i,t),this.Us.add(i.toString()),Ae.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),Ae.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(a=>this.Us.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Us.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Ms(){this.Ls=new Set}Fs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.Us,i=>{const a=Et.fromPath(i);return this.Ks(e,a).next(l=>{l||t.removeEntry(a,Gt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(i=>{i?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return Ae.or([()=>Ae.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.$s(e,t)])}}class km{constructor(e){this.Tt=e}$(e,t,i,a){const l=new ih("createOrUpgrade",t);var w;i<1&&a>=1&&(e.createObjectStore("owner"),(w=e).createObjectStore("mutationQueues",{keyPath:"userId"}),w.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qf,{unique:!0}),w.createObjectStore("documentMutations"),fl(e),function(w){w.createObjectStore("remoteDocuments")}(e));let f=Ae.resolve();return i<3&&a>=3&&(0!==i&&(function(w){w.deleteObjectStore("targetDocuments"),w.deleteObjectStore("targets"),w.deleteObjectStore("targetGlobal")}(e),fl(e)),f=f.next(()=>function(w){const M=w.store("targetGlobal"),k={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gt.min().toTimestamp(),targetCount:0};return M.put("targetGlobalKey",k)}(l))),i<4&&a>=4&&(0!==i&&(f=f.next(()=>function(w,M){return M.store("mutations").W().next(k=>{w.deleteObjectStore("mutations"),w.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qf,{unique:!0});const W=M.store("mutations"),ee=k.map(_e=>W.put(_e));return Ae.waitFor(ee)})}(e,l))),f=f.next(()=>{!function(w){w.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(f=f.next(()=>this.Gs(l))),i<6&&a>=6&&(f=f.next(()=>(function(w){w.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(l)))),i<7&&a>=7&&(f=f.next(()=>this.js(l))),i<8&&a>=8&&(f=f.next(()=>this.zs(e,l))),i<9&&a>=9&&(f=f.next(()=>{!function(w){w.objectStoreNames.contains("remoteDocumentChanges")&&w.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(f=f.next(()=>this.Ws(l))),i<11&&a>=11&&(f=f.next(()=>{(function(w){w.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(w){w.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(f=f.next(()=>{!function(w){const M=w.createObjectStore("documentOverlays",{keyPath:y_});M.createIndex("collectionPathOverlayIndex",Em,{unique:!1}),M.createIndex("collectionGroupOverlayIndex",wm,{unique:!1})}(e)})),i<13&&a>=13&&(f=f.next(()=>function(w){const M=w.createObjectStore("remoteDocumentsV14",{keyPath:g_});M.createIndex("documentKeyIndex",Pw),M.createIndex("collectionGroupIndex",m_)}(e)).next(()=>this.Hs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(f=f.next(()=>this.Js(e,l))),i<15&&a>=15&&(f=f.next(()=>function(w){w.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),w.createObjectStore("indexState",{keyPath:vm}).createIndex("sequenceNumberIndex",bh,{unique:!1}),w.createObjectStore("indexEntries",{keyPath:_m}).createIndex("documentKeyIndex",ep,{unique:!1})}(e))),f}Qs(e){let t=0;return e.store("remoteDocuments").X((i,a)=>{t+=fp(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Gs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(a=>Ae.forEach(a,l=>{const f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",f).next(w=>Ae.forEach(w,M=>{g(M.userId===l.userId);const k=ul(this.Tt,M);return cd(e,l.userId,k).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return i.X((f,w)=>{const M=new Rn(f),k=[0,$s(M)];l.push(t.get(k).next(W=>W?Ae.resolve():t.put({targetId:0,path:$s(M),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Ae.waitFor(l))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:od});const i=t.store("collectionParents"),a=new Mh,l=f=>{if(a.add(f)){const w=f.lastSegment(),M=f.popLast();return i.put({collectionId:w,parent:$s(M)})}};return t.store("remoteDocuments").X({Z:!0},(f,w)=>{const M=new Rn(f);return l(M.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([f,w,M],k)=>{const W=ec(w);return l(W.popLast())}))}Ws(e){const t=e.store("targets");return t.X((i,a)=>{const l=Ch(a),f=I_(this.Tt,l);return t.put(f)})}Hs(e,t){const i=t.store("remoteDocuments"),a=[];return i.X((l,f)=>{const w=t.store("remoteDocumentsV14"),M=(k=f,k.document?new Et(Rn.fromString(k.document.name).popFirst(5)):k.noDocument?Et.fromSegments(k.noDocument.path):k.unknownDocument?Et.fromSegments(k.unknownDocument.path):d()).path.toArray();var k;const W={prefixPath:M.slice(0,M.length-2),collectionGroup:M[M.length-2],documentId:M[M.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(w.put(W))}).next(()=>Ae.waitFor(a))}Js(e,t){const i=t.store("mutations"),a=L_(this.Tt),l=new Tc(go.qs,this.Tt.oe);return i.W().next(f=>{const w=new Map;return f.forEach(M=>{var k;let W=null!==(k=w.get(M.userId))&&void 0!==k?k:fn();ul(this.Tt,M).keys().forEach(ee=>W=W.add(ee)),w.set(M.userId,W)}),Ae.forEach(w,(M,k)=>{const W=new Ii(k),ee=up.ue(this.Tt,W),_e=l.getIndexManager(W),Ke=xm.ue(W,this.Tt,_e,l.referenceDelegate);return new qw(a,Ke,ee,_e).recalculateAndSaveOverlaysForDocumentKeys(new rp(t,Xo.at),M).next()})})}}function fl(n){n.createObjectStore("targetDocuments",{keyPath:Fw}).createIndex("documentTargetsIndex",Jf,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kw,{unique:!0}),n.createObjectStore("targetGlobal")}const Sc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ac{constructor(e,t,i,a,l,f,w,M,k,W,ee=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ys=l,this.window=f,this.document=w,this.Zs=k,this.Xs=W,this.ti=ee,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=_e=>Promise.resolve(),!Ac.C())throw new Q(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zw(this,a),this.oi=t+"main",this.Tt=new Lo(M),this.ui=new Fo(this.oi,this.ti,new km(this.Tt)),this.Ns=new $w(this.referenceDelegate,this.Tt),this.remoteDocumentCache=L_(this.Tt),this.Os=new Vw,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===W&&si("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(L.FAILED_PRECONDITION,Sc);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Xo(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var i=(0,me.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,me.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(yu(e))return it("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return it("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Du(e).get("owner").next(t=>Ae.resolve(this.yi(t)))}pi(e){return rc(e).delete(this.clientId)}Ii(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=ss(i,"clientMetadata");return a.W().next(l=>{const f=e.Ei(l,18e5),w=l.filter(M=>-1===f.indexOf(M));return Ae.forEach(w,M=>a.delete(M.clientId)).next(()=>w)})}).catch(()=>[]);if(e.ci)for(const i of t)e.ci.removeItem(e.Ai(i.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?Ae.resolve(!0):Du(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Q(L.FAILED_PRECONDITION,Sc);return!1}}return!(!this.networkEnabled||!this.inForeground)||rc(e).W().next(i=>void 0===this.Ei(i,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&it("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new rp(t,Xo.at);return e.mi(i).next(()=>e.pi(i))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(i=>this.Ti(i.updateTimeMs,t)&&!this.Ri(i.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>rc(e).W().next(t=>this.Ei(t,18e5).map(i=>i.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return xm.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dp(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return up.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,t,i){it("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(f=this.ti)?Lw:14===f?__:13===f?np:12===f?v_:11===f?tp:void d();var f;let w;return this.ui.runTransaction(e,a,l,M=>(w=new rp(M,this.Cs?this.Cs.next():Xo.at),"readwrite-primary"===t?this._i(w).next(k=>!!k||this.wi(w)).next(k=>{if(!k)throw si(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Q(L.FAILED_PRECONDITION,Iv);return i(w)}).next(k=>this.gi(w).next(()=>k)):this.Di(w).next(()=>i(w)))).then(M=>(w.raiseOnCommittedEvent(),M))}Di(e){return Du(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Q(L.FAILED_PRECONDITION,Sc)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Du(e).put("owner",t)}static C(){return Fo.C()}mi(e){const t=Du(e);return t.get("owner").next(i=>this.yi(i)?(it("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ae.resolve())}Ti(e,t){const i=Date.now();return!(e<i-t||e>i&&(si(`Detected an update time that is in the future: ${e} > ${i}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,St.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const i=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return it("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return si("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){si("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Du(n){return ss(n,"owner")}function rc(n){return ss(n,"clientMetadata")}function xc(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Mc{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ci=i,this.xi=a}static Ni(e,t){let i=fn(),a=fn();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Mc(e,t.fromCache,i,a)}}class pl{constructor(){this.ki=!1}initialize(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,i,a){return this.Mi(e,t).next(l=>l||this.Fi(e,t,a,i)).next(l=>l||this.$i(e,t))}Mi(e,t){if(rm(t))return Ae.resolve(null);let i=po(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=rl(t,null,"F"),i=po(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const f=fn(...l);return this.Oi.getDocuments(e,f).next(w=>this.indexManager.getMinOffset(e,i).next(M=>{const k=this.Bi(t,w);return this.Li(t,k,f,M.readTime)?this.Mi(e,rl(t,null,"F")):this.qi(e,k,t,M)}))})))}Fi(e,t,i,a){return rm(t)||a.isEqual(Gt.min())?this.$i(e,t):this.Oi.getDocuments(e,i).next(l=>{const f=this.Bi(t,l);return this.Li(t,f,i,a)?this.$i(e,t):(ju()<=Mn.in.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),gh(t)),this.qi(e,f,t,zg(a,-1)))})}Bi(e,t){let i=new or(sm(e));return t.forEach((a,l)=>{mh(e,l)&&(i=i.add(l))}),i}Li(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}$i(e,t){return ju()<=Mn.in.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",gh(t)),this.Oi.getDocumentsMatchingQuery(e,t,va.min())}qi(e,t,i,a){return this.Oi.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(f=>{l=l.insert(f.key,f)}),l))}}class hd{constructor(e,t,i,a){this.persistence=e,this.Ui=t,this.Tt=a,this.Ki=new fi(nn),this.Gi=new sl(l=>tl(l),Hl),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(i)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qw(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function Fm(n,e,t,i){return new hd(n,e,t,i)}function Lm(n,e){return vp.apply(this,arguments)}function vp(){return vp=(0,me.Z)(function*(n,e){const t=P(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.zi(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const f=[],w=[];let M=fn();for(const k of a){f.push(k.batchId);for(const W of k.mutations)M=M.add(W.key)}for(const k of l){w.push(k.batchId);for(const W of k.mutations)M=M.add(W.key)}return t.localDocuments.getDocuments(i,M).next(k=>({Wi:k,removedBatchIds:f,addedBatchIds:w}))})})}),vp.apply(this,arguments)}function U_(n,e){const t=P(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.ji.newChangeBuffer({trackRemovals:!0});return function(f,w,M,k){const W=M.batch,ee=W.keys();let _e=Ae.resolve();return ee.forEach(Ke=>{_e=_e.next(()=>k.getEntry(w,Ke)).next(Qe=>{const wt=M.docVersions.get(Ke);g(null!==wt),Qe.version.compareTo(wt)<0&&(W.applyToRemoteDocument(Qe,M),Qe.isValidDocument()&&(Qe.setReadTime(M.commitVersion),k.addEntry(Qe)))})}),_e.next(()=>f.mutationQueue.removeMutationBatch(w,W))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let w=fn();for(let M=0;M<f.mutationResults.length;++M)f.mutationResults[M].transformResults.length>0&&(w=w.add(f.batch.mutations[M].key));return w}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function Vm(n){const e=P(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function B_(n,e){const t=P(n),i=e.snapshotVersion;let a=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=t.ji.newChangeBuffer({trackRemovals:!0});a=t.Ki;const w=[];e.targetChanges.forEach((W,ee)=>{const _e=a.get(ee);if(!_e)return;w.push(t.Ns.removeMatchingKeys(l,W.removedDocuments,ee).next(()=>t.Ns.addMatchingKeys(l,W.addedDocuments,ee)));let Ke=_e.withSequenceNumber(l.currentSequenceNumber);var Qe,wt,Ft;e.targetMismatches.has(ee)?Ke=Ke.withResumeToken(hi.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):W.resumeToken.approximateByteSize()>0&&(Ke=Ke.withResumeToken(W.resumeToken,i)),a=a.insert(ee,Ke),wt=Ke,Ft=W,(0===(Qe=_e).resumeToken.approximateByteSize()||wt.snapshotVersion.toMicroseconds()-Qe.snapshotVersion.toMicroseconds()>=3e8||Ft.addedDocuments.size+Ft.modifiedDocuments.size+Ft.removedDocuments.size>0)&&w.push(t.Ns.updateTargetData(l,Ke))});let M=Jo(),k=fn();if(e.documentUpdates.forEach(W=>{e.resolvedLimboDocuments.has(W)&&w.push(t.persistence.referenceDelegate.updateLimboDocument(l,W))}),w.push(Um(l,f,e.documentUpdates).next(W=>{M=W.Hi,k=W.Ji})),!i.isEqual(Gt.min())){const W=t.Ns.getLastRemoteSnapshotVersion(l).next(ee=>t.Ns.setTargetsMetadata(l,l.currentSequenceNumber,i));w.push(W)}return Ae.waitFor(w).next(()=>f.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,M,k)).next(()=>M)}).then(l=>(t.Ki=a,l))}function Um(n,e,t){let i=fn(),a=fn();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let f=Jo();return t.forEach((w,M)=>{const k=l.get(w);M.isFoundDocument()!==k.isFoundDocument()&&(a=a.add(w)),M.isNoDocument()&&M.version.isEqual(Gt.min())?(e.removeEntry(w,M.readTime),f=f.insert(w,M)):!k.isValidDocument()||M.version.compareTo(k.version)>0||0===M.version.compareTo(k.version)&&k.hasPendingWrites?(e.addEntry(M),f=f.insert(w,M)):it("LocalStore","Ignoring outdated watch update for ",w,". Current version:",k.version," Watch version:",M.version)}),{Hi:f,Ji:a}})}function j_(n,e){const t=P(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function gl(n,e){const t=P(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Ns.getTargetData(i,e).next(l=>l?(a=l,Ae.resolve(a)):t.Ns.allocateTargetId(i).next(f=>(a=new Dc(e,f,0,i.currentSequenceNumber),t.Ns.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ki.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(i.targetId,i),t.Gi.set(e,i.targetId)),i})}function fd(n,e,t){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,me.Z)(function*(n,e,t){const i=P(n),a=i.Ki.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",l,f=>i.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!yu(f))throw f;it("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ki=i.Ki.remove(e),i.Gi.delete(a.target)}),Bm.apply(this,arguments)}function Ph(n,e,t){const i=P(n);let a=Gt.min(),l=fn();return i.persistence.runTransaction("Execute query","readonly",f=>function(w,M,k){const W=P(w),ee=W.Gi.get(k);return void 0!==ee?Ae.resolve(W.Ki.get(ee)):W.Ns.getTargetData(M,k)}(i,f,po(e)).next(w=>{if(w)return a=w.lastLimboFreeSnapshotVersion,i.Ns.getMatchingKeysForTargetId(f,w.targetId).next(M=>{l=M})}).next(()=>i.Ui.getDocumentsMatchingQuery(f,e,t?a:Gt.min(),t?l:fn())).next(w=>(_p(i,Bv(e),w),{documents:w,Yi:l})))}function $_(n,e){const t=P(n),i=P(t.Ns),a=t.Ki.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>i.ie(l,e).next(f=>f?f.target:null))}function H_(n,e){const t=P(n),i=t.Qi.get(e)||Gt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ji.getAllFromCollectionGroup(a,e,zg(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(_p(t,e,a),a))}function _p(n,e,t){let i=n.Qi.get(e)||Gt.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Qi.set(e,i)}function $m(){return $m=(0,me.Z)(function*(n,e,t,i){const a=P(n);let l=fn(),f=Jo();for(const k of t){const W=e.Zi(k.metadata.name);k.document&&(l=l.add(W));const ee=e.Xi(k);ee.setReadTime(e.tr(k.metadata.readTime)),f=f.insert(W,ee)}const w=a.ji.newChangeBuffer({trackRemovals:!0}),M=yield gl(a,(k=i,po(nl(Rn.fromString(`__bundle__/docs/${k}`)))));var k;return a.persistence.runTransaction("Apply bundle documents","readwrite",k=>Um(k,w,f).next(W=>(w.apply(k),W)).next(W=>a.Ns.removeMatchingKeysForTargetId(k,M.targetId).next(()=>a.Ns.addMatchingKeys(k,l,M.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(k,W.Hi,W.Ji)).next(()=>W.Hi)))}),$m.apply(this,arguments)}function Ep(n,e){return pd.apply(this,arguments)}function pd(){return pd=(0,me.Z)(function*(n,e,t=fn()){const i=yield gl(n,po(op(e.bundledQuery))),a=P(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const f=Di(e.readTime);if(i.snapshotVersion.compareTo(f)>=0)return a.Os.saveNamedQuery(l,e);const w=i.withResumeToken(hi.EMPTY_BYTE_STRING,f);return a.Ki=a.Ki.insert(w.targetId,w),a.Ns.updateTargetData(l,w).next(()=>a.Ns.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>a.Ns.addMatchingKeys(l,t,i.targetId)).next(()=>a.Os.saveNamedQuery(l,e))})}),pd.apply(this,arguments)}function wp(n,e){return`firestore_clients_${n}_${e}`}function G_(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function kh(n,e){return`firestore_targets_${n}_${e}`}class gd{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static er(e,t,i){const a=JSON.parse(i);let l,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(l=new Q(a.error.code,a.error.message))),f?new gd(e,t,a.state,l):(si("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class md{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static er(e,t){const i=JSON.parse(t);let a,l="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Q(i.error.code,i.error.message))),l?new md(e,i.state,a):(si("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,l=qf();for(let f=0;a&&f<i.activeTargetIds.length;++f)a=kf(i.activeTargetIds[f]),l=l.add(i.activeTargetIds[f]);return a?new Fh(e,l):(si("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Lh{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lh(t.clientId,t.onlineState):(si("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ip{constructor(){this.activeTargetIds=qf()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dp{constructor(e,t,i,a,l){this.window=e,this.Ys=t,this.persistenceKey=i,this.rr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new fi(nn),this.started=!1,this.hr=[];const f=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.lr=wp(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Ip),this._r=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(w){return`firestore_bundle_loaded_v2_${w}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Si();for(const a of t){if(a===e.rr)continue;const l=e.getItem(wp(e.persistenceKey,a));if(l){const f=Fh.er(a,l);f&&(e.ar=e.ar.insert(f.clientId,f))}}e.pr();const i=e.storage.getItem(e.gr);if(i){const a=e.Ir(i);a&&e.Tr(a)}for(const a of e.hr)e.cr(a);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,i){this.Ar(e,t,i),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(kh(this.persistenceKey,e));if(i){const a=md.er(e,i);a&&(t=a.state)}}return this.br.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kh(this.persistenceKey,e))}updateQueryState(e,t,i){this.vr(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Rr(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return it("SharedClientState","READ",e,t),t}setItem(e,t){it("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){it("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(it("SharedClientState","EVENT",i.key,i.newValue),i.key===this.lr)return void si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==i.key)if(t._r.test(i.key)){if(null==i.newValue){const a=t.Sr(i.key);return t.Dr(a,null)}{const a=t.Cr(i.key,i.newValue);if(a)return t.Dr(a.clientId,a)}}else if(t.wr.test(i.key)){if(null!==i.newValue){const a=t.Nr(i.key,i.newValue);if(a)return t.kr(a)}}else if(t.mr.test(i.key)){if(null!==i.newValue){const a=t.Or(i.key,i.newValue);if(a)return t.Mr(a)}}else if(i.key===t.gr){if(null!==i.newValue){const a=t.Ir(i.newValue);if(a)return t.Tr(a)}}else if(i.key===t.dr){const a=function(l){let f=Xo.at;if(null!=l)try{const w=JSON.parse(l);g("number"==typeof w),f=w}catch(w){si("SharedClientState","Failed to read sequence number from WebStorage",w)}return f}(i.newValue);a!==Xo.at&&t.sequenceNumberHandler(a)}else if(i.key===t.yr){const a=t.Fr(i.newValue);yield Promise.all(a.map(l=>t.syncEngine.$r(l)))}}else t.hr.push(i)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,t,i){const a=new gd(this.currentUser,e,t,i),l=G_(this.persistenceKey,this.currentUser,e);this.setItem(l,a.nr())}Rr(e){const t=G_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,i){const a=kh(this.persistenceKey,e),l=new md(e,t,i);this.setItem(a,l.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const i=this.Sr(e);return Fh.er(i,t)}Nr(e,t){const i=this.wr.exec(e),a=Number(i[1]);return gd.er(new Ii(void 0!==i[2]?i[2]:null),a,t)}Or(e,t){const i=this.mr.exec(e),a=Number(i[1]);return md.er(a,t)}Ir(e){return Lh.er(e)}Fr(e){return JSON.parse(e)}kr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);it("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const i=t?this.ar.insert(e,t):this.ar.remove(e),a=this.Er(this.ar),l=this.Er(i),f=[],w=[];return l.forEach(M=>{a.has(M)||f.push(M)}),a.forEach(M=>{l.has(M)||w.push(M)}),this.syncEngine.qr(f,w).then(()=>{this.ar=i})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=qf();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class bp{constructor(){this.Ur=new Ip,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,i){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Ip,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class z_{Gr(e){}shutdown(){}}class W_{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const q_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z_{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class K_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,i,a,l){const f=this.fo(e,t);it("RestConnection","Sending: ",f,i);const w={};return this._o(w,a,l),this.wo(e,f,w,i).then(M=>(it("RestConnection","Received: ",M),M),M=>{throw $u("RestConnection",`${e} failed with error: `,M,"url: ",f,"request:",i),M})}mo(e,t,i,a,l,f){return this.lo(e,t,i,a,l)}_o(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+mu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}fo(e,t){return`${this.co}/v1/${t}:${q_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,i,a){return new Promise((l,f)=>{const w=new Es;w.setWithCredentials(!0),w.listenOnce(Hg.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case qc.NO_ERROR:const k=w.getResponseJson();it("Connection","XHR received:",JSON.stringify(k)),l(k);break;case qc.TIMEOUT:it("Connection",'RPC "'+e+'" timed out'),f(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case qc.HTTP_ERROR:const W=w.getStatus();if(it("Connection",'RPC "'+e+'" failed with status:',W,"response text:",w.getResponseText()),W>0){let ee=w.getResponseJson();Array.isArray(ee)&&(ee=ee[0]);const _e=ee?.error;if(_e&&_e.status&&_e.message){const Ke=function(Qe){const wt=Qe.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(wt)>=0?wt:L.UNKNOWN}(_e.status);f(new Q(Ke,_e.message))}else f(new Q(L.UNKNOWN,"Server responded with status "+w.getStatus()))}else f(new Q(L.UNAVAILABLE,"Connection failed."));break;default:d()}}finally{it("Connection",'RPC "'+e+'" completed.')}});const M=JSON.stringify(a);w.send(t,"POST",M,i,15)})}yo(e,t,i){const a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Nl(),f=Qd(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(w.xmlHttpFactory=new Jd({})),this._o(w.initMessageHeaders,t,i),w.encodeInitMessageHeaders=!0;const M=a.join("");it("Connection","Creating WebChannel: "+M,w);const k=l.createWebChannel(M,w);let W=!1,ee=!1;const _e=new Z_({Yr:Qe=>{ee?it("Connection","Not sending because WebChannel is closed:",Qe):(W||(it("Connection","Opening WebChannel transport."),k.open(),W=!0),it("Connection","WebChannel sending:",Qe),k.send(Qe))},Zr:()=>k.close()}),Ke=(Qe,wt,Ft)=>{Qe.listen(wt,Xn=>{try{Ft(Xn)}catch(Mr){setTimeout(()=>{throw Mr},0)}})};return Ke(k,Pl.EventType.OPEN,()=>{ee||it("Connection","WebChannel transport opened.")}),Ke(k,Pl.EventType.CLOSE,()=>{ee||(ee=!0,it("Connection","WebChannel transport closed"),_e.oo())}),Ke(k,Pl.EventType.ERROR,Qe=>{ee||(ee=!0,$u("Connection","WebChannel transport errored:",Qe),_e.oo(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),Ke(k,Pl.EventType.MESSAGE,Qe=>{var wt;if(!ee){const Ft=Qe.data[0];g(!!Ft);const Mr=Ft.error||(null===(wt=Ft[0])||void 0===wt?void 0:wt.error);if(Mr){it("Connection","WebChannel received error:",Mr);const Un=Mr.status;let xn=function(Nn){const Cs=fr[Nn];if(void 0!==Cs)return ww(Cs)}(Un),wn=Mr.message;void 0===xn&&(xn=L.INTERNAL,wn="Unknown error status: "+Un+" with message "+Mr.message),ee=!0,_e.oo(new Q(xn,wn)),k.close()}else it("Connection","WebChannel received:",Ft),_e.uo(Ft)}}),Ke(f,Sf.STAT_EVENT,Qe=>{Qe.stat===Xd.PROXY?it("Connection","Detected buffering proxy"):Qe.stat===Xd.NOPROXY&&it("Connection","Detected no buffering proxy")}),setTimeout(()=>{_e.ro()},0),_e}}function Hm(){return typeof window<"u"?window:null}function Cp(){return typeof document<"u"?document:null}function yd(n){return new s_(n,!0)}class Tp{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ys=e,this.timerId=t,this.po=i,this.Io=a,this.To=l,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),i=Math.max(0,Date.now()-this.Ro),a=Math.max(0,t-i);a>0&&it("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,a,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class Gm{constructor(e,t,i,a,l,f,w,M){this.Ys=e,this.So=i,this.Do=a,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=w,this.listener=M,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Tp(e,t)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,me.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,me.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var i=this;return(0,me.Z)(function*(){i.Uo(),i.Ko(),i.ko.cancel(),i.Co++,4!==e?i.ko.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(si(t.toString()),si("Using maximum backoff delay to prevent overloading the backend."),i.ko.bo()):t&&t.code===L.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Go(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Co===t&&this.jo(i,a)},i=>{e(()=>{const a=new Q(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.zo(a)})})}jo(e,t){const i=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{i(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(a=>{i(()=>this.zo(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Fo(){var e=this;this.state=5,this.ko.vo((0,me.Z)(function*(){e.state=0,e.start()}))}zo(e){return it("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sp extends Gm{constructor(e,t,i,a,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,f),this.Tt=l}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function xw(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(M=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===M?1:"REMOVE"===M?2:"CURRENT"===M?3:"RESET"===M?4:d(),a=e.targetChange.targetIds||[],l=function(M,k){return M.yt?(g(void 0===k||"string"==typeof k),hi.fromBase64String(k||"")):(g(void 0===k||k instanceof Uint8Array),hi.fromUint8Array(k||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,w=f&&function(M){const k=void 0===M.code?L.UNKNOWN:ww(M.code);return new Q(k,M.message||"")}(f);t=new n_(i,a,l,w||null)}else if("documentChange"in e){const i=e.documentChange,a=js(n,i.document.name),l=Di(i.document.updateTime),f=i.document.createTime?Di(i.document.createTime):Gt.min(),w=new $i({mapValue:{fields:i.document.fields}}),M=xr.newFoundDocument(a,l,f,w);t=new Dh(i.targetIds||[],i.removedTargetIds||[],M.key,M)}else if("documentDelete"in e){const i=e.documentDelete,a=js(n,i.document),l=i.readTime?Di(i.readTime):Gt.min(),f=xr.newNoDocument(a,l);t=new Dh([],i.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const i=e.documentRemove,a=js(n,i.document);t=new Dh([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return d();{const i=e.filter,l=new Jl(i.count||0);t=new t_(i.targetId,l)}}var M;return t}(this.Tt,e),i=function(a){if(!("targetChange"in a))return Gt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Gt.min():l.readTime?Di(l.readTime):Gt.min()}(e);return this.listener.Ho(t,i)}Jo(e){const t={};t.database=ol(this.Tt),t.addTarget=function(a,l){let f;const w=l.target;return f=hh(w)?{documents:al(a,w)}:{query:mm(a,w)},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?f.resumeToken=fm(a,l.resumeToken):l.snapshotVersion.compareTo(Gt.min())>0&&(f.readTime=td(a,l.snapshotVersion.toTimestamp())),f}(this.Tt,e);const i=function Kf(n,e){const t=function(i,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return d()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.qo(t)}Yo(e){const t={};t.database=ol(this.Tt),t.removeTarget=e,this.qo(t)}}class zm extends Gm{constructor(e,t,i,a,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,f),this.Tt=l,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(g(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function Mw(n,e){return n&&n.length>0?(g(void 0!==e),n.map(t=>function(i,a){let l=Di(i.updateTime?i.updateTime:a);return l.isEqual(Gt.min())&&(l=Di(a)),new Ew(l,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Di(e.commitTime);return this.listener.eu(i,t)}return g(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=ol(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>rd(this.Tt,i))};this.qo(t)}}class Y_ extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.Tt=a,this.iu=!1}ru(){if(this.iu)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.lo(e,t,i,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(L.UNKNOWN,a.toString())})}mo(e,t,i,a){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.mo(e,t,i,l,f,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Q(L.UNKNOWN,l.toString())})}terminate(){this.iu=!0}}class X_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(si(t),this.cu=!1):it("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class J_{constructor(e,t,i,a,l){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=l,this.yu.Gr(w=>{i.enqueueAndForget((0,me.Z)(function*(){var M;eu(f)&&(it("RemoteStore","Restarting streams for network reachability change."),yield(M=(0,me.Z)(function*(k){const W=P(k);W.mu.add(4),yield ic(W),W.pu.set("Unknown"),W.mu.delete(4),yield vd(W)}),function(k){return M.apply(this,arguments)})(f))}))}),this.pu=new X_(i,a)}}function vd(n){return xp.apply(this,arguments)}function xp(){return xp=(0,me.Z)(function*(n){if(eu(n))for(const e of n.gu)yield e(!0)}),xp.apply(this,arguments)}function ic(n){return bu.apply(this,arguments)}function bu(){return bu=(0,me.Z)(function*(n){for(const e of n.gu)yield e(!1)}),bu.apply(this,arguments)}function Mp(n,e){const t=P(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),Wm(t)?Bh(t):zs(t).Mo()&&Uh(t,e))}function Vh(n,e){const t=P(n),i=zs(t);t.wu.delete(e),i.Mo()&&Rc(t,e),0===t.wu.size&&(i.Mo()?i.Bo():eu(t)&&t.pu.set("Unknown"))}function Uh(n,e){n.Iu.Ft(e.targetId),zs(n).Jo(e)}function Rc(n,e){n.Iu.Ft(e),zs(n).Yo(e)}function Bh(n){n.Iu=new dn({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),zs(n).start(),n.pu.au()}function Wm(n){return eu(n)&&!zs(n).Oo()&&n.wu.size>0}function eu(n){return 0===P(n).mu.size}function Yw(n){n.Iu=void 0}function kD(n){return qm.apply(this,arguments)}function qm(){return qm=(0,me.Z)(function*(n){n.wu.forEach((e,t)=>{Uh(n,e)})}),qm.apply(this,arguments)}function Qw(n,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,me.Z)(function*(n,e){Yw(n),Wm(n)?(n.pu.fu(e),Bh(n)):n.pu.set("Unknown")}),Rp.apply(this,arguments)}function Xw(n,e,t){return bi.apply(this,arguments)}function bi(){return bi=(0,me.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof n_&&2===e.state&&e.cause)try{yield(i=(0,me.Z)(function*(a,l){const f=l.cause;for(const w of l.targetIds)a.wu.has(w)&&(yield a.remoteSyncer.rejectListen(w,f),a.wu.delete(w),a.Iu.removeTarget(w))}),function(a,l){return i.apply(this,arguments)})(n,e)}catch(i){it("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield jh(n,i)}else if(e instanceof Dh?n.Iu.Qt(e):e instanceof t_?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(Gt.min()))try{const i=yield Vm(n.localStore);t.compareTo(i)>=0&&(yield function(a,l){const f=a.Iu.ee(l);return f.targetChanges.forEach((w,M)=>{if(w.resumeToken.approximateByteSize()>0){const k=a.wu.get(M);k&&a.wu.set(M,k.withResumeToken(w.resumeToken,l))}}),f.targetMismatches.forEach(w=>{const M=a.wu.get(w);if(!M)return;a.wu.set(w,M.withResumeToken(hi.EMPTY_BYTE_STRING,M.snapshotVersion)),Rc(a,w);const k=new Dc(M.target,w,1,M.sequenceNumber);Uh(a,k)}),a.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(i){it("RemoteStore","Failed to raise snapshot:",i),yield jh(n,i)}var i}),bi.apply(this,arguments)}function jh(n,e,t){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,me.Z)(function*(n,e,t){if(!yu(e))throw e;n.mu.add(1),yield ic(n),n.pu.set("Offline"),t||(t=()=>Vm(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){it("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield vd(n)}))}),Zm.apply(this,arguments)}function e0(n,e){return e().catch(t=>jh(n,t,e))}function ml(n){return Km.apply(this,arguments)}function Km(){return Km=(0,me.Z)(function*(n){const e=P(n),t=sc(e);let i=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;t0(e);)try{const a=yield j_(e.localStore,i);if(null===a){0===e._u.length&&t.Bo();break}i=a.batchId,n0(e,a)}catch(a){yield jh(e,a)}yl(e)&&r0(e)}),Km.apply(this,arguments)}function t0(n){return eu(n)&&n._u.length<10}function n0(n,e){n._u.push(e);const t=sc(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function yl(n){return eu(n)&&!sc(n).Oo()&&n._u.length>0}function r0(n){sc(n).start()}function Jw(n){return Op.apply(this,arguments)}function Op(){return Op=(0,me.Z)(function*(n){sc(n).su()}),Op.apply(this,arguments)}function eI(n){return Np.apply(this,arguments)}function Np(){return Np=(0,me.Z)(function*(n){const e=sc(n);for(const t of n._u)e.tu(t.mutations)}),Np.apply(this,arguments)}function FD(n,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,me.Z)(function*(n,e,t){const i=n._u.shift(),a=sp.from(i,e,t);yield e0(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield ml(n)}),$h.apply(this,arguments)}function Ym(n,e){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,me.Z)(function*(n,e){var t;e&&sc(n).Xo&&(yield(t=(0,me.Z)(function*(i,a){if(Qv(l=a.code)&&l!==L.ABORTED){const f=i._u.shift();sc(i).$o(),yield e0(i,()=>i.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield ml(i)}var l}),function(i,a){return t.apply(this,arguments)})(n,e)),yl(n)&&r0(n)}),Ea.apply(this,arguments)}function s0(n,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,me.Z)(function*(n,e){const t=P(n);t.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const i=eu(t);t.mu.add(3),yield ic(t),i&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield vd(t)}),Qm.apply(this,arguments)}function wa(n,e){return ea.apply(this,arguments)}function ea(){return ea=(0,me.Z)(function*(n,e){const t=P(n);e?(t.mu.delete(2),yield vd(t)):e||(t.mu.add(2),yield ic(t),t.pu.set("Unknown"))}),ea.apply(this,arguments)}function zs(n){return n.Tu||(n.Tu=function(e,t,i){const a=P(e);return a.ru(),new Sp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.Tt,i)}(n.datastore,n.asyncQueue,{Xr:kD.bind(null,n),no:Qw.bind(null,n),Ho:Xw.bind(null,n)}),n.gu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.$o(),Wm(n)?Bh(n):n.pu.set("Unknown")):(yield n.Tu.stop(),Yw(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function sc(n){return n.Eu||(n.Eu=function(e,t,i){const a=P(e);return a.ru(),new zm(t,a.connection,a.authCredentials,a.appCheckCredentials,a.Tt,i)}(n.datastore,n.asyncQueue,{Xr:Jw.bind(null,n),no:Ym.bind(null,n),nu:eI.bind(null,n),eu:FD.bind(null,n)}),n.gu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Eu.$o(),yield ml(n)):(yield n.Eu.stop(),n._u.length>0&&(it("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class Pp{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,i,a,l){const f=Date.now()+i,w=new Pp(e,t,f,a,l);return w.start(i),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _d(n,e){if(si("AsyncQueue",`${e}: ${n}`),yu(n))return new Q(L.UNAVAILABLE,`${e}: ${n}`);throw n}class Ed{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Et.comparator(t.key,i.key):(t,i)=>Et.comparator(t.key,i.key),this.keyedMap=ed(),this.sortedSet=new fi(this.comparator)}static emptySet(e){return new Ed(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ed)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Ed;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class o0{constructor(){this.Au=new fi(Et.comparator)}track(e){const t=e.doc.key,i=this.Au.get(t);i?0!==e.type&&3===i.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==i.type?this.Au=this.Au.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Au=this.Au.remove(t):1===e.type&&2===i.type?this.Au=this.Au.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):d():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,i)=>{e.push(i)}),e}}class wd{constructor(e,t,i,a,l,f,w,M,k){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=w,this.excludesMetadataChanges=M,this.hasCachedResults=k}static fromInitialDocuments(e,t,i,a,l){const f=[];return t.forEach(w=>{f.push({type:0,doc:w})}),new wd(e,t,Ed.emptySet(t),f,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ka(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class Xm{constructor(){this.bu=void 0,this.listeners=[]}}class Hh{constructor(){this.queries=new sl(e=>im(e),Ka),this.onlineState="Unknown",this.vu=new Set}}function Jm(n,e){return kp.apply(this,arguments)}function kp(){return kp=(0,me.Z)(function*(n,e){const t=P(n),i=e.query;let a=!1,l=t.queries.get(i);if(l||(a=!0,l=new Xm),a)try{l.bu=yield t.onListen(i)}catch(f){const w=_d(f,`Initialization of query '${gh(e.query)}' failed`);return void e.onError(w)}t.queries.set(i,l),l.listeners.push(e),e.Pu(t.onlineState),l.bu&&e.Vu(l.bu)&&ty(t)}),kp.apply(this,arguments)}function ey(n,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,me.Z)(function*(n,e){const t=P(n),i=e.query;let a=!1;const l=t.queries.get(i);if(l){const f=l.listeners.indexOf(e);f>=0&&(l.listeners.splice(f,1),a=0===l.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),Fp.apply(this,arguments)}function a0(n,e){const t=P(n);let i=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const w of f.listeners)w.Vu(a)&&(i=!0);f.bu=a}}i&&ty(t)}function Lp(n,e,t){const i=P(n),a=i.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);i.queries.delete(e)}function ty(n){n.vu.forEach(e=>{e.next()})}class Vp{constructor(e,t,i){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=i||{}}Vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new wd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.Ou||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=wd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class u0{constructor(e,t){this.Mu=e,this.byteLength=t}Fu(){return"metadata"in this.Mu}}class Up{constructor(e){this.Tt=e}Zi(e){return js(this.Tt,e)}Xi(e){return e.metadata.exists?Aw(this.Tt,e.document,!1):xr.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Di(e)}}class Bp{constructor(e,t,i){this.$u=e,this.localStore=t,this.Tt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jp(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const i=Rn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,i=new Up(this.Tt);for(const a of e)if(a.metadata.queries){const l=i.Zi(a.metadata.name);for(const f of a.metadata.queries){const w=(t.get(f)||fn()).add(l);t.set(f,w)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function jm(n,e,t,i){return $m.apply(this,arguments)}(e.localStore,new Up(e.Tt),e.documents,e.$u.id),i=e.Lu(e.documents);for(const a of e.queries)yield Ep(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function jp(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $p{constructor(e){this.key=e}}class ny{constructor(e){this.key=e}}class ry{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=fn(),this.mutatedKeys=fn(),this.ju=sm(e),this.zu=new Ed(this.ju)}get Wu(){return this.Ku}Hu(e,t){const i=t?t.Ju:new o0,a=t?t.zu:this.zu;let l=t?t.mutatedKeys:this.mutatedKeys,f=a,w=!1;const M="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,k="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((W,ee)=>{const _e=a.get(W),Ke=mh(this.query,ee)?ee:null,Qe=!!_e&&this.mutatedKeys.has(_e.key),wt=!!Ke&&(Ke.hasLocalMutations||this.mutatedKeys.has(Ke.key)&&Ke.hasCommittedMutations);let Ft=!1;_e&&Ke?_e.data.isEqual(Ke.data)?Qe!==wt&&(i.track({type:3,doc:Ke}),Ft=!0):this.Yu(_e,Ke)||(i.track({type:2,doc:Ke}),Ft=!0,(M&&this.ju(Ke,M)>0||k&&this.ju(Ke,k)<0)&&(w=!0)):!_e&&Ke?(i.track({type:0,doc:Ke}),Ft=!0):_e&&!Ke&&(i.track({type:1,doc:_e}),Ft=!0,(M||k)&&(w=!0)),Ft&&(Ke?(f=f.add(Ke),l=wt?l.add(W):l.delete(W)):(f=f.delete(W),l=l.delete(W)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const W="F"===this.query.limitType?f.last():f.first();f=f.delete(W.key),l=l.delete(W.key),i.track({type:1,doc:W})}return{zu:f,Ju:i,Li:w,mutatedKeys:l}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const l=e.Ju.Ru();l.sort((k,W)=>function(ee,_e){const Ke=Qe=>{switch(Qe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return d()}};return Ke(ee)-Ke(_e)}(k.type,W.type)||this.ju(k.doc,W.doc)),this.Zu(i);const f=t?this.Xu():[],w=0===this.Qu.size&&this.current?1:0,M=w!==this.Gu;return this.Gu=w,0!==l.length||M?{snapshot:new wd(this.query,e.zu,a,l,e.mutatedKeys,0===w,M,!1,!!i&&i.resumeToken.approximateByteSize()>0),tc:f}:{tc:f}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new o0,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=fn(),this.zu.forEach(i=>{this.ec(i.key)&&(this.Qu=this.Qu.add(i.key))});const t=[];return e.forEach(i=>{this.Qu.has(i)||t.push(new ny(i))}),this.Qu.forEach(i=>{e.has(i)||t.push(new $p(i))}),t}nc(e){this.Ku=e.Yi,this.Qu=fn();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return wd.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class c0{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class l0{constructor(e){this.key=e,this.ic=!1}}class d0{constructor(e,t,i,a,l,f){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.rc={},this.oc=new sl(w=>im(w),Ka),this.uc=new Map,this.cc=new Set,this.ac=new fi(Et.comparator),this.hc=new Map,this.lc=new Pm,this.fc={},this.dc=new Map,this._c=ll.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function h0(n,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,me.Z)(function*(n,e){const t=bd(n);let i,a;const l=t.oc.get(e);if(l)i=l.targetId,t.sharedClientState.addLocalQueryTarget(i),a=l.view.sc();else{const f=yield gl(t.localStore,po(e));t.isPrimaryClient&&Mp(t.remoteStore,f);const w=t.sharedClientState.addLocalQueryTarget(f.targetId);i=f.targetId,a=yield iy(t,e,i,"current"===w,f.resumeToken)}return a}),Hp.apply(this,arguments)}function iy(n,e,t,i,a){return sy.apply(this,arguments)}function sy(){return sy=(0,me.Z)(function*(n,e,t,i,a){n.mc=(ee,_e,Ke)=>{return(Qe=(0,me.Z)(function*(wt,Ft,Xn,Mr){let Un=Ft.view.Hu(Xn);Un.Li&&(Un=yield Ph(wt.localStore,Ft.query,!1).then(({documents:Nn})=>Ft.view.Hu(Nn,Un)));const xn=Mr&&Mr.targetChanges.get(Ft.targetId),wn=Ft.view.applyChanges(Un,wt.isPrimaryClient,xn);return Wp(wt,Ft.targetId,wn.tc),wn.snapshot}),function(wt,Ft,Xn,Mr){return Qe.apply(this,arguments)})(n,ee,_e,Ke);var Qe};const l=yield Ph(n.localStore,e,!0),f=new ry(e,l.Yi),w=f.Hu(l.documents),M=Ih.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),k=f.applyChanges(w,n.isPrimaryClient,M);Wp(n,t,k.tc);const W=new c0(e,t,f);return n.oc.set(e,W),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),k.snapshot}),sy.apply(this,arguments)}function tI(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,me.Z)(function*(n,e){const t=P(n),i=t.oc.get(e),a=t.uc.get(i.targetId);if(a.length>1)return t.uc.set(i.targetId,a.filter(l=>!Ka(l,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fd(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Vh(t.remoteStore,i.targetId),vl(t,i.targetId)}).catch(zu))):(vl(t,i.targetId),yield fd(t.localStore,i.targetId,!0))}),oy.apply(this,arguments)}function ay(){return ay=(0,me.Z)(function*(n,e,t){const i=Xr(n);try{const a=yield function(l,f){const w=P(l),M=hr.now(),k=f.reduce((_e,Ke)=>_e.add(Ke.key),fn());let W,ee;return w.persistence.runTransaction("Locally write mutations","readwrite",_e=>{let Ke=Jo(),Qe=fn();return w.ji.getEntries(_e,k).next(wt=>{Ke=wt,Ke.forEach((Ft,Xn)=>{Xn.isValidDocument()||(Qe=Qe.add(Ft))})}).next(()=>w.localDocuments.getOverlayedDocuments(_e,Ke)).next(wt=>{W=wt;const Ft=[];for(const Xn of f){const Mr=am(Xn,W.get(Xn.key).overlayedDocument);null!=Mr&&Ft.push(new Ju(Xn.key,Mr,nm(Mr.value.mapValue),Qr.exists(!0)))}return w.mutationQueue.addMutationBatch(_e,M,Ft,f)}).next(wt=>{ee=wt;const Ft=wt.applyToLocalDocumentSet(W,Qe);return w.documentOverlayCache.saveOverlays(_e,wt.batchId,Ft)})}).then(()=>({batchId:ee.batchId,changes:Jv(W)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(l,f,w){let M=l.fc[l.currentUser.toKey()];M||(M=new fi(nn)),M=M.insert(f,w),l.fc[l.currentUser.toKey()]=M}(i,a.batchId,t),yield Cu(i,a.changes),yield ml(i.remoteStore)}catch(a){const l=_d(a,"Failed to persist write");t.reject(l)}}),ay.apply(this,arguments)}function f0(n,e){return uy.apply(this,arguments)}function uy(){return uy=(0,me.Z)(function*(n,e){const t=P(n);try{const i=yield B_(t.localStore,e);e.targetChanges.forEach((a,l)=>{const f=t.hc.get(l);f&&(g(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.ic=!0:a.modifiedDocuments.size>0?g(f.ic):a.removedDocuments.size>0&&(g(f.ic),f.ic=!1))}),yield Cu(t,i,e)}catch(i){yield zu(i)}}),uy.apply(this,arguments)}function p0(n,e,t){const i=P(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.oc.forEach((l,f)=>{const w=f.view.Pu(e);w.snapshot&&a.push(w.snapshot)}),function(l,f){const w=P(l);w.onlineState=f;let M=!1;w.queries.forEach((k,W)=>{for(const ee of W.listeners)ee.Pu(f)&&(M=!0)}),M&&ty(w)}(i.eventManager,e),a.length&&i.rc.Ho(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function rI(n,e,t){return cy.apply(this,arguments)}function cy(){return cy=(0,me.Z)(function*(n,e,t){const i=P(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.hc.get(e),l=a&&a.key;if(l){let f=new fi(Et.comparator);f=f.insert(l,xr.newNoDocument(l,Gt.min()));const w=fn().add(l),M=new wh(Gt.min(),new Map,new or(nn),f,w);yield f0(i,M),i.ac=i.ac.remove(l),i.hc.delete(e),qp(i)}else yield fd(i.localStore,e,!1).then(()=>vl(i,e,t)).catch(zu)}),cy.apply(this,arguments)}function iI(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,me.Z)(function*(n,e){const t=P(n),i=e.batch.batchId;try{const a=yield U_(t.localStore,e);zp(t,i,null),Gp(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Cu(t,a)}catch(a){yield zu(a)}}),ly.apply(this,arguments)}function sI(n,e,t){return dy.apply(this,arguments)}function dy(){return dy=(0,me.Z)(function*(n,e,t){const i=P(n);try{const a=yield function(l,f){const w=P(l);return w.persistence.runTransaction("Reject batch","readwrite-primary",M=>{let k;return w.mutationQueue.lookupMutationBatch(M,f).next(W=>(g(null!==W),k=W.keys(),w.mutationQueue.removeMutationBatch(M,W))).next(()=>w.mutationQueue.performConsistencyCheck(M)).next(()=>w.documentOverlayCache.removeOverlaysForBatchId(M,k,f)).next(()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(M,k)).next(()=>w.localDocuments.getDocuments(M,k))})}(i.localStore,e);zp(i,e,t),Gp(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Cu(i,a)}catch(a){yield zu(a)}}),dy.apply(this,arguments)}function hy(){return hy=(0,me.Z)(function*(n,e){const t=P(n);eu(t.remoteStore)||it("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(l){const f=P(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",w=>f.mutationQueue.getHighestUnacknowledgedBatchId(w))}(t.localStore);if(-1===i)return void e.resolve();const a=t.dc.get(i)||[];a.push(e),t.dc.set(i,a)}catch(i){const a=_d(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),hy.apply(this,arguments)}function Gp(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function zp(n,e,t){const i=P(n);let a=i.fc[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.fc[i.currentUser.toKey()]=a}}function vl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.uc.get(e))n.oc.delete(i),t&&n.rc.gc(i,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(i=>{n.lc.containsKey(i)||fy(n,i)})}function fy(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(Vh(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),qp(n))}function Wp(n,e,t){for(const i of t)i instanceof $p?(n.lc.addReference(i.key,e),g0(n,i)):i instanceof ny?(it("SyncEngine","Document no longer in limbo: "+i.key),n.lc.removeReference(i.key,e),n.lc.containsKey(i.key)||fy(n,i.key)):d()}function g0(n,e){const t=e.key,i=t.path.canonicalString();n.ac.get(t)||n.cc.has(i)||(it("SyncEngine","New document in limbo: "+t),n.cc.add(i),qp(n))}function qp(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new Et(Rn.fromString(e)),i=n._c.next();n.hc.set(i,new l0(t)),n.ac=n.ac.insert(t,i),Mp(n.remoteStore,new Dc(po(nl(t.path)),i,2,Xo.at))}}function Cu(n,e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,me.Z)(function*(n,e,t){const i=P(n),a=[],l=[],f=[];var w;i.oc.isEmpty()||(i.oc.forEach((w,M)=>{f.push(i.mc(M,e,t).then(k=>{if((k||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(M.targetId,k?.fromCache?"not-current":"current"),k){a.push(k);const W=Mc.Ni(M.targetId,k);l.push(W)}}))}),yield Promise.all(f),i.rc.Ho(a),yield(w=(0,me.Z)(function*(M,k){const W=P(M);try{yield W.persistence.runTransaction("notifyLocalViewChanges","readwrite",ee=>Ae.forEach(k,_e=>Ae.forEach(_e.Ci,Ke=>W.persistence.referenceDelegate.addReference(ee,_e.targetId,Ke)).next(()=>Ae.forEach(_e.xi,Ke=>W.persistence.referenceDelegate.removeReference(ee,_e.targetId,Ke)))))}catch(ee){if(!yu(ee))throw ee;it("LocalStore","Failed to update sequence numbers: "+ee)}for(const ee of k){const _e=ee.targetId;if(!ee.fromCache){const Ke=W.Ki.get(_e),wt=Ke.withLastLimboFreeSnapshotVersion(Ke.snapshotVersion);W.Ki=W.Ki.insert(_e,wt)}}}),function(M,k){return w.apply(this,arguments)})(i.localStore,l))}),Zp.apply(this,arguments)}function m0(n,e){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,me.Z)(function*(n,e){const t=P(n);if(!t.currentUser.isEqual(e)){it("SyncEngine","User change. New user:",e.toKey());const i=yield Lm(t.localStore,e);t.currentUser=e,(a=t).dc.forEach(f=>{f.forEach(w=>{w.reject(new Q(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.dc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Cu(t,i.Wi)}var a}),Kp.apply(this,arguments)}function _l(n,e){const t=P(n),i=t.hc.get(e);if(i&&i.ic)return fn().add(i.key);{let a=fn();const l=t.uc.get(e);if(!l)return a;for(const f of l){const w=t.oc.get(f);a=a.unionWith(w.view.Wu)}return a}}function aI(n,e){return py.apply(this,arguments)}function py(){return py=(0,me.Z)(function*(n,e){const t=P(n),i=yield Ph(t.localStore,e.query,!0),a=e.view.nc(i);return t.isPrimaryClient&&Wp(t,e.targetId,a.tc),a}),py.apply(this,arguments)}function Id(n,e){return y0.apply(this,arguments)}function y0(){return y0=(0,me.Z)(function*(n,e){const t=P(n);return H_(t.localStore,e).then(i=>Cu(t,i))}),y0.apply(this,arguments)}function gy(n,e,t,i){return v0.apply(this,arguments)}function v0(){return v0=(0,me.Z)(function*(n,e,t,i){const a=P(n),l=yield function(f,w){const M=P(f),k=P(M.mutationQueue);return M.persistence.runTransaction("Lookup mutation documents","readonly",W=>k.An(W,w).next(ee=>ee?M.localDocuments.getDocuments(W,ee):Ae.resolve(null)))}(a.localStore,e);var w;null!==l?("pending"===t?yield ml(a.remoteStore):"acknowledged"===t||"rejected"===t?(zp(a,e,i||null),Gp(a,e),w=e,P(P(a.localStore).mutationQueue).bn(w)):d(),yield Cu(a,l)):it("SyncEngine","Cannot apply mutation batch with id: "+e)}),v0.apply(this,arguments)}function Yp(){return Yp=(0,me.Z)(function*(n,e){const t=P(n);if(bd(t),Xr(t),!0===e&&!0!==t.wc){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield uI(t,i.toArray());t.wc=!0,yield wa(t.remoteStore,!0);for(const l of a)Mp(t.remoteStore,l)}else if(!1===e&&!1!==t.wc){const i=[];let a=Promise.resolve();t.uc.forEach((l,f)=>{t.sharedClientState.isLocalQueryTarget(f)?i.push(f):a=a.then(()=>(vl(t,f),fd(t.localStore,f,!0))),Vh(t.remoteStore,f)}),yield a,yield uI(t,i),function(l){const f=P(l);f.hc.forEach((w,M)=>{Vh(f.remoteStore,M)}),f.lc._s(),f.hc=new Map,f.ac=new fi(Et.comparator)}(t),t.wc=!1,yield wa(t.remoteStore,!1)}}),Yp.apply(this,arguments)}function uI(n,e,t){return Kt.apply(this,arguments)}function Kt(){return Kt=(0,me.Z)(function*(n,e,t){const i=P(n),a=[],l=[];for(const f of e){let w;const M=i.uc.get(f);if(M&&0!==M.length){w=yield gl(i.localStore,po(M[0]));for(const k of M){const W=i.oc.get(k),ee=yield aI(i,W);ee.snapshot&&l.push(ee.snapshot)}}else{const k=yield $_(i.localStore,f);w=yield gl(i.localStore,k),yield iy(i,E0(k),f,!1,w.resumeToken)}a.push(w)}return i.rc.Ho(l),a}),Kt.apply(this,arguments)}function E0(n){return Gf(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function cI(n){const e=P(n);return P(P(e.localStore).persistence).Si()}function lI(n,e,t,i){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,me.Z)(function*(n,e,t,i){const a=P(n);if(a.wc)return void it("SyncEngine","Ignoring unexpected query state notification.");const l=a.uc.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const f=yield H_(a.localStore,Bv(l[0])),w=wh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,hi.EMPTY_BYTE_STRING);yield Cu(a,f,w);break}case"rejected":yield fd(a.localStore,e,!0),vl(a,e,i);break;default:d()}}),Oc.apply(this,arguments)}function dI(n,e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,me.Z)(function*(n,e,t){const i=bd(n);if(i.wc){for(const a of e){if(i.uc.has(a)){it("SyncEngine","Adding an already active target "+a);continue}const l=yield $_(i.localStore,a),f=yield gl(i.localStore,l);yield iy(i,E0(l),f.targetId,!1,f.resumeToken),Mp(i.remoteStore,f)}for(const a of t)i.uc.has(a)&&(yield fd(i.localStore,a,!1).then(()=>{Vh(i.remoteStore,a),vl(i,a)}).catch(zu))}}),Dd.apply(this,arguments)}function bd(n){const e=P(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=f0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_l.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rI.bind(null,e),e.rc.Ho=a0.bind(null,e.eventManager),e.rc.gc=Lp.bind(null,e.eventManager),e}function Xr(n){const e=P(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sI.bind(null,e),e}class my{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.Tt=yd(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return Fm(this.persistence,new pl,e.initialUser,this.Tt)}Tc(e){return new Tc(go.qs,this.Tt)}Ic(e){return new bp}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yy extends my{constructor(e,t,i){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,me.Z)(function*(){yield t().call(i,e),yield i.bc.initialize(i,e),yield Xr(i.bc.syncEngine),yield ml(i.bc.remoteStore),yield i.persistence.di(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return Fm(this.persistence,new pl,e.initialUser,this.Tt)}Ac(e,t){return new Hw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const i=new ow(t,this.persistence);return new Dv(e.asyncQueue,i)}Tc(e){const t=xc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Vo.withCacheSize(this.cacheSizeBytes):Vo.DEFAULT;return new Ac(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Hm(),Cp(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new bp}}class hI extends yy{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,me.Z)(function*(){yield t().call(i,e);const a=i.bc.syncEngine;i.sharedClientState instanceof Dp&&(i.sharedClientState.syncEngine={Br:gy.bind(null,a),Lr:lI.bind(null,a),qr:dI.bind(null,a),Si:cI.bind(null,a),$r:Id.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.di(function(){var l=(0,me.Z)(function*(f){yield function _0(n,e){return Yp.apply(this,arguments)}(i.bc.syncEngine,f),i.gcScheduler&&(f&&!i.gcScheduler.started?i.gcScheduler.start():f||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(f&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():f||i.indexBackfillerScheduler.stop())});return function(f){return l.apply(this,arguments)}}())})()}Ic(e){const t=Hm();if(!Dp.C(t))throw new Q(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=xc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dp(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Qp{initialize(e,t){var i=this;return(0,me.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>p0(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=m0.bind(null,i.syncEngine),yield wa(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Hh}createDatastore(e){const t=yd(e.databaseInfo.databaseId),i=new K_(e.databaseInfo);return new Y_(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,l=w=>p0(this.syncEngine,w,0),f=W_.C()?new W_:new z_,new J_(t,i,a,l,f);var t,i,a,l,f}createSyncEngine(e,t){return function(i,a,l,f,w,M,k){const W=new d0(i,a,l,f,w,M);return k&&(W.wc=!0),W}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const i=P(t);it("RemoteStore","RemoteStore shutting down."),i.mu.add(5),yield ic(i),i.yu.shutdown(),i.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vy(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Gh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class w0{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new je,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(i=>{i&&i.Fu()?this.metadata.resolve(i.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Mu)}`))},i=>this.metadata.reject(i))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const i=e.Sc.decode(t),a=Number(i);isNaN(a)&&e.xc(`length string (${i}) is not valid number`);const l=yield e.Nc(a);return new u0(JSON.parse(l),t.length+a)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,me.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Nc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Oc())&&t.xc("Reached the end of bundle when more is expected.");const i=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class fI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Q(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(a=(0,me.Z)(function*(l,f){const w=P(l),M=ol(w.Tt)+"/documents",k={documents:f.map(Ke=>nd(w.Tt,Ke))},W=yield w.mo("BatchGetDocuments",M,k,f.length),ee=new Map;W.forEach(Ke=>{const Qe=function PD(n,e){return"found"in e?function(t,i){g(!!i.found);const a=js(t,i.found.name),l=Di(i.found.updateTime),f=i.found.createTime?Di(i.found.createTime):Gt.min(),w=new $i({mapValue:{fields:i.found.fields}});return xr.newFoundDocument(a,l,f,w)}(n,e):"missing"in e?function(t,i){g(!!i.missing),g(!!i.readTime);const a=js(t,i.missing),l=Di(i.readTime);return xr.newNoDocument(a,l)}(n,e):d()}(w.Tt,Ke);ee.set(Qe.key.toString(),Qe)});const _e=[];return f.forEach(Ke=>{const Qe=ee.get(Ke.toString());g(!!Qe),_e.push(Qe)}),_e}),function(l,f){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const l=Et.fromPath(a);e.mutations.push(new cm(l,e.precondition(l)))}),yield(i=(0,me.Z)(function*(a,l){const f=P(a),w=ol(f.Tt)+"/documents",M={writes:l.map(k=>rd(f.Tt,k))};yield f.lo("Commit",w,M)}),function(a,l){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw d();t=Gt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Q(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gt.min())?Qr.exists(!1):Qr.updateTime(t):Qr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gt.min()))throw new Q(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qr.updateTime(t)}return Qr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pI{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.Mc=i.maxAttempts,this.ko=new Tp(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,me.Z)(function*(){const t=new fI(e.datastore),i=e.$c(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Bc(l)}))}).catch(a=>{e.Bc(a)})}))}$c(e){try{const t=this.updateFunction(e);return!Pf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Qv(t)}return!1}}class gI{constructor(e,t,i,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Ii.UNAUTHENTICATED,this.clientId=th.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var f=(0,me.Z)(function*(w){it("FirestoreClient","Received user=",w.uid),yield l.authCredentialListener(w),l.user=w});return function(w){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(i,f=>(it("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=_d(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Cd(n,e){return _y.apply(this,arguments)}function _y(){return _y=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,me.Z)(function*(l){i.isEqual(l)||(yield Lm(e.localStore,l),i=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),_y.apply(this,arguments)}function I0(n,e){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Td(n);it("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>s0(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>s0(e.remoteStore,l)),n.onlineComponents=e}),Ey.apply(this,arguments)}function Td(n){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,me.Z)(function*(n){return n.offlineComponents||(it("FirestoreClient","Using default OfflineComponentProvider"),yield Cd(n,new my)),n.offlineComponents}),Xp.apply(this,arguments)}function zh(n){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,me.Z)(function*(n){return n.onlineComponents||(it("FirestoreClient","Using default OnlineComponentProvider"),yield I0(n,new Qp)),n.onlineComponents}),Jp.apply(this,arguments)}function D0(n){return Td(n).then(e=>e.persistence)}function Nc(n){return Td(n).then(e=>e.localStore)}function El(n){return zh(n).then(e=>e.remoteStore)}function wy(n){return zh(n).then(e=>e.syncEngine)}function Sd(n){return eg.apply(this,arguments)}function eg(){return eg=(0,me.Z)(function*(n){const e=yield zh(n),t=e.eventManager;return t.onListen=h0.bind(null,e.syncEngine),t.onUnlisten=tI.bind(null,e.syncEngine),t}),eg.apply(this,arguments)}function Iy(n,e,t={}){const i=new je;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(a,l,f,w,M){const k=new Gh({next:ee=>{l.enqueueAndForget(()=>ey(a,W));const _e=ee.docs.has(f);!_e&&ee.fromCache?M.reject(new Q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):_e&&ee.fromCache&&w&&"server"===w.source?M.reject(new Q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):M.resolve(ee)},error:ee=>M.reject(ee)}),W=new Vp(nl(f.path),k,{includeMetadataChanges:!0,Ou:!0});return Jm(a,W)}(yield Sd(n),n.asyncQueue,e,t,i)})),i.promise}function S0(n,e,t={}){const i=new je;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(a,l,f,w,M){const k=new Gh({next:ee=>{l.enqueueAndForget(()=>ey(a,W)),ee.fromCache&&"server"===w.source?M.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):M.resolve(ee)},error:ee=>M.reject(ee)}),W=new Vp(f,k,{includeMetadataChanges:!0,Ou:!0});return Jm(a,W)}(yield Sd(n),n.asyncQueue,e,t,i)})),i.promise}const vI=new Map;function tg(n,e,t){if(!t)throw new Q(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Wh(n,e,t,i){if(!0===e&&!0===i)throw new Q(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function A0(n){if(!Et.isDocumentKey(n))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function x0(n){if(Et.isDocumentKey(n))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qh(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":d()}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qh(n);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function M0(n,e){if(e<=0)throw new Q(L.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class R0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Wh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zh{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jt;switch(t.type){case"gapi":return new ya(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vI.get(e);t&&(it("ComponentProvider","Removing Datastore"),vI.delete(e),t.terminate())}(this),Promise.resolve()}}class Jr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jr(this.firestore,e,this._key)}}class Ds{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class tu extends Ds{constructor(e,t,i){super(e,t,nl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jr(this.firestore,null,new Et(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function N0(n,e,...t){if(n=(0,St.m9)(n),tg("collection","path",e),n instanceof Zh){const i=Rn.fromString(e,...t);return x0(i),new tu(n,null,i)}{if(!(n instanceof Jr||n instanceof tu))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rn.fromString(e,...t));return x0(i),new tu(n.firestore,null,i)}}function Pc(n,e,...t){if(n=(0,St.m9)(n),1===arguments.length&&(e=th.R()),tg("doc","path",e),n instanceof Zh){const i=Rn.fromString(e,...t);return A0(i),new Jr(n,null,new Et(i))}{if(!(n instanceof Jr||n instanceof tu))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rn.fromString(e,...t));return A0(i),new Jr(n.firestore,n instanceof tu?n.converter:null,new Et(i))}}function P0(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),(n instanceof Jr||n instanceof tu)&&(e instanceof Jr||e instanceof tu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ng(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),n instanceof Ds&&e instanceof Ds&&n.firestore===e.firestore&&Ka(n._query,e._query)&&n.converter===e.converter}class EI{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Tp(this,"async_queue_retry"),this.Hc=()=>{const t=Cp();t&&it("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=Cp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=Cp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new je;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!yu(t))throw t;it("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(i=>{throw this.Qc=i,this.jc=!1,si("INTERNAL UNHANDLED ERROR: ",function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f}(i)),i}).then(i=>(this.jc=!1,i))));return this.qc=t,t}enqueueAfterDelay(e,t,i){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const a=Pp.createAndSchedule(this,e,t,i,l=>this.Xc(l));return this.Gc.push(a),a}Jc(){this.Qc&&d()}verifyOperationInProgress(){}ta(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function rg(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class wI{constructor(){this._progressObserver={},this._taskCompletionResolver=new je,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Vr extends Zh{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new EI,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Dy(this),this._firestoreClient.terminate()}}function pi(n){return n._firestoreClient||Dy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Dy(n){var e;const t=n._freezeSettings(),i=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Nf(n._databaseId,l,n._persistenceKey,(w=t).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,w.useFetchStreams));var l,w;n._firestoreClient=new gI(n._authCredentials,n._appCheckCredentials,n._queue,i)}function L0(n,e,t){const i=new je;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield Cd(n,t),yield I0(n,e),i.resolve()}catch(a){const l=a;if(!("FirebaseError"===(f=l).name?f.code===L.FAILED_PRECONDITION||f.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&f instanceof DOMException)||22===f.code||20===f.code||11===f.code))throw l;$u("Error enabling offline persistence. Falling back to persistence disabled: "+l),i.reject(l)}var f})).then(()=>i.promise)}function U0(n){if(n._initialized||n._terminated)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tu(hi.fromBase64String(e))}catch(t){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tu(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Su{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wl{constructor(e){this._methodName=e}}class ig{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}}const B0=/^__.*__$/;class MI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Ju(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ql(e,this.data,t,this.fieldTransforms)}}class j0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ju(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw d()}}class Ad{constructor(e,t,i,a,l,f){this.settings=e,this.databaseId=t,this.Tt=i,this.ignoreUndefinedProperties=a,void 0===l&&this.ia(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Ad(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.oa({path:i,ca:!1});return a.aa(e),a}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.oa({path:i,ca:!1});return a.ia(),a}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return ef(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if($0(this.ra)&&B0.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class Cy{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=i||yd(e)}wa(e,t,i,a=!1){return new Ad({ra:e,methodName:t,_a:i,path:Yr.emptyPath(),ca:!1,da:a},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function kc(n){const e=n._freezeSettings(),t=yd(n._databaseId);return new Cy(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xd(n,e,t,i,a,l={}){const f=n.wa(l.merge||l.mergeFields?2:0,e,t,a);Xh("Data must be an object, but it was:",f,i);const w=og(i,f);let M,k;if(l.merge)M=new is(f.fieldMask),k=f.fieldTransforms;else if(l.mergeFields){const W=[];for(const ee of l.mergeFields){const _e=Jh(e,ee,t);if(!f.contains(_e))throw new Q(L.INVALID_ARGUMENT,`Field '${_e}' is specified in your field mask but missing from your input data.`);Sy(W,_e)||W.push(_e)}M=new is(W),k=f.fieldTransforms.filter(ee=>M.covers(ee.field))}else M=null,k=f.fieldTransforms;return new MI(new $i(w),M,k)}class Yh extends wl{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yh}}function H0(n,e,t){return new Ad({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class Qh extends wl{_toFieldTransform(e){return new Kl(e.path,new il)}isEqual(e){return e instanceof Qh}}class RI extends wl{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=H0(this,e,!0),i=this.ma.map(l=>Fc(l,t)),a=new ql(i);return new Kl(e.path,a)}isEqual(e){return this===e}}class G0 extends wl{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=H0(this,e,!0),i=this.ma.map(l=>Fc(l,t)),a=new Ya(i);return new Kl(e.path,a)}isEqual(e){return this===e}}class Md extends wl{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Qa(e.Tt,Hv(e.Tt,this.ga));return new Kl(e.path,t)}isEqual(e){return this===e}}function sg(n,e,t,i){const a=n.wa(1,e,t);Xh("Data must be an object, but it was:",a,i);const l=[],f=$i.empty();Xc(i,(M,k)=>{const W=Rd(e,M,t);k=(0,St.m9)(k);const ee=a.ha(W);if(k instanceof Yh)l.push(W);else{const _e=Fc(k,ee);null!=_e&&(l.push(W),f.set(W,_e))}});const w=new is(l);return new j0(f,w,a.fieldTransforms)}function Ty(n,e,t,i,a,l){const f=n.wa(1,e,t),w=[Jh(e,i,t)],M=[a];if(l.length%2!=0)throw new Q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _e=0;_e<l.length;_e+=2)w.push(Jh(e,l[_e])),M.push(l[_e+1]);const k=[],W=$i.empty();for(let _e=w.length-1;_e>=0;--_e)if(!Sy(k,w[_e])){const Ke=w[_e];let Qe=M[_e];Qe=(0,St.m9)(Qe);const wt=f.ha(Ke);if(Qe instanceof Yh)k.push(Ke);else{const Ft=Fc(Qe,wt);null!=Ft&&(k.push(Ke),W.set(Ke,Ft))}}const ee=new is(k);return new j0(W,ee,f.fieldTransforms)}function OI(n,e,t,i=!1){return Fc(t,n.wa(i?4:3,e))}function Fc(n,e){if(z0(n=(0,St.m9)(n)))return Xh("Unsupported field value:",e,n),og(n,e);if(n instanceof wl)return function(t,i){if(!$0(i.ra))throw i.fa(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.fa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,i){const a=[];let l=0;for(const f of t){let w=Fc(f,i.la(l));null==w&&(w={nullValue:"NULL_VALUE"}),a.push(w),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,St.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Hv(i.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=hr.fromDate(t);return{timestampValue:td(i.Tt,a)}}if(t instanceof hr){const a=new hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:td(i.Tt,a)}}if(t instanceof ig)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tu)return{bytesValue:fm(i.Tt,t._byteString)};if(t instanceof Jr){const a=i.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw i.fa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:o_(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.fa(`Unsupported field value: ${qh(t)}`)}(n,e)}function og(n,e){const t={};return Cv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xc(n,(i,a)=>{const l=Fc(a,e.ua(i));null!=l&&(t[i]=l)}),{mapValue:{fields:t}}}function z0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof ig||n instanceof Tu||n instanceof Jr||n instanceof wl)}function Xh(n,e,t){if(!z0(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=qh(t);throw e.fa("an object"===i?n+" a custom object":n+" "+i)}var i}function Jh(n,e,t){if((e=(0,St.m9)(e))instanceof Su)return e._internalPath;if("string"==typeof e)return Rd(n,e);throw ef("Field path arguments must be of type string or ",n,!1,void 0,t)}const W0=new RegExp("[~\\*/\\[\\]]");function Rd(n,e,t){if(e.search(W0)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Su(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ef(n,e,t,i,a){const l=i&&!i.isEmpty(),f=void 0!==a;let w=`Function ${e}() called with invalid data`;t&&(w+=" (via `toFirestore()`)"),w+=". ";let M="";return(l||f)&&(M+=" (found",l&&(M+=` in field ${i}`),f&&(M+=` in document ${a}`),M+=")"),new Q(L.INVALID_ARGUMENT,w+n+M)}function Sy(n,e){return n.some(t=>t.isEqual(e))}class Od{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new q0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ag("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class q0 extends Od{data(){return super.data()}}function ag(n,e){return"string"==typeof e?Rd(n,e):e instanceof Su?e._internalPath:e._delegate._internalPath}function Z0(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ay{}class tf extends Ay{}function oc(n,e,...t){let i=[];e instanceof Ay&&i.push(e),i=i.concat(t),function(a){const l=a.filter(w=>w instanceof Nd).length,f=a.filter(w=>w instanceof ug).length;if(l>1||l>0&&f>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class ug extends tf{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ug(e,t,i)}_apply(e){const t=this._parse(e);return Ry(e._query,t),new Ds(e.firestore,e.converter,ph(e._query,t))}_parse(e){const t=kc(e.firestore);return function(a,l,f,w,M,k,W){let ee;if(M.isKeyField()){if("array-contains"===k||"array-contains-any"===k)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${k}' queries on documentId().`);if("in"===k||"not-in"===k){My(W,k);const _e=[];for(const Ke of W)_e.push(Pd(w,a,Ke));ee={arrayValue:{values:_e}}}else ee=Pd(w,a,W)}else"in"!==k&&"not-in"!==k&&"array-contains-any"!==k||My(W,k),ee=OI(f,"where",W,"in"===k||"not-in"===k);return On.create(M,k,ee)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Nd extends Ay{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Nd(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,a){let l=i;const f=a.getFlattenedFilters();for(const w of f)Ry(l,w),l=ph(l,w)}(e._query,t),new Ds(e.firestore,e.converter,ph(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xy extends tf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xy(e,t)}_apply(e){const t=function(i,a,l){if(null!==i.startAt)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new el(a,l);return function(w,M){if(null===Xu(w)){const k=zf(w);null!==k&&Oy(0,k,M.field)}}(i,f),f}(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new Qu(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class nf extends tf{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new nf(e,t,i)}_apply(e){return new Ds(e.firestore,e.converter,rl(e._query,this._limit,this._limitType))}}class cg extends tf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new cg(e,t,i)}_apply(e){const t=Q0(e,this.type,this._docOrFields,this._inclusive);return new Ds(e.firestore,e.converter,(a=t,new Qu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)));var i,a}}class lg extends tf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new lg(e,t,i)}_apply(e){const t=Q0(e,this.type,this._docOrFields,this._inclusive);return new Ds(e.firestore,e.converter,(a=t,new Qu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)));var i,a}}function Q0(n,e,t,i){if(t[0]=(0,St.m9)(t[0]),t[0]instanceof Od)return function(a,l,f,w,M){if(!w)throw new Q(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const k=[];for(const W of _u(a))if(W.field.isKeyField())k.push(jl(l,w.key));else{const ee=w.data.field(W.field);if(Ff(ee))throw new Q(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+W.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ee){const _e=W.field.canonicalString();throw new Q(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_e}' (used as the orderBy) does not exist.`)}k.push(ee)}return new Yu(k,M)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=kc(n.firestore);return function(l,f,w,M,k,W){const ee=l.explicitOrderBy;if(k.length>ee.length)throw new Q(L.INVALID_ARGUMENT,`Too many arguments provided to ${M}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _e=[];for(let Ke=0;Ke<k.length;Ke++){const Qe=k[Ke];if(ee[Ke].field.isKeyField()){if("string"!=typeof Qe)throw new Q(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${M}(), but got a ${typeof Qe}`);if(!fh(l)&&-1!==Qe.indexOf("/"))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${M}() must be a plain document ID, but '${Qe}' contains a slash.`);const wt=l.path.child(Rn.fromString(Qe));if(!Et.isDocumentKey(wt))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${M}() must result in a valid document path, but '${wt}' is not because it contains an odd number of segments.`);const Ft=new Et(wt);_e.push(jl(f,Ft))}else{const wt=OI(w,M,Qe);_e.push(wt)}}return new Yu(_e,W)}(n._query,n.firestore._databaseId,a,e,t,i)}}function Pd(n,e,t){if("string"==typeof(t=(0,St.m9)(t))){if(""===t)throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fh(e)&&-1!==t.indexOf("/"))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Rn.fromString(t));if(!Et.isDocumentKey(i))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return jl(n,new Et(i))}if(t instanceof Jr)return jl(n,t._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(t)}.`)}function My(n,e){if(!Array.isArray(n)||0===n.length)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ry(n,e){if(e.isInequality()){const i=zf(n),a=e.field;if(null!==i&&!i.isEqual(a))throw new Q(L.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${a.toString()}'`);const l=Xu(n);null!==l&&Oy(0,a,l)}const t=function(i,a){for(const l of i)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Q(L.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Oy(n,e,t){if(!t.isEqual(e))throw new Q(L.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dg{convertValue(e,t="none"){switch(Jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_c(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw d()}}convertObject(e,t){const i={};return Xc(e.fields,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertGeoPoint(e){return new ig(oi(e.latitude),oi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Sv(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const t=qu(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Rn.fromString(e);g(f_(i));const a=new vu(i.get(1),i.get(3)),l=new Et(i.popFirst(5));return a.isEqual(t)||si(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function rf(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class UI extends dg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jr(this.firestore,null,t)}}class Il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ta extends Od{constructor(e,t,i,a,l,f){super(e,t,i,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ag("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class sf extends ta{data(e={}){return super.data(e)}}class Au{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Il(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new sf(this._firestore,this._userDataWriter,i.key,i,new Il(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(f=>({type:"added",doc:new sf(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Il(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:l++}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const w=new sf(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Il(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let M=-1,k=-1;return 0!==f.type&&(M=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),1!==f.type&&(l=l.add(f.doc),k=l.indexOf(f.doc.key)),{type:xu(f.type),doc:w,oldIndex:M,newIndex:k}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xu(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return d()}}function X0(n,e){return n instanceof ta&&e instanceof ta?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Au&&e instanceof Au&&n._firestore===e._firestore&&ng(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ia extends dg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jr(this.firestore,null,t)}}function J0(n,e,t){n=Cn(n,Jr);const i=Cn(n.firestore,Vr),a=rf(n.converter,e,t);return Lc(i,[xd(kc(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Qr.none())])}function eE(n,e,t,...i){n=Cn(n,Jr);const a=Cn(n.firestore,Vr),l=kc(a);let f;return f="string"==typeof(e=(0,St.m9)(e))||e instanceof Su?Ty(l,"updateDoc",n._key,e,t,i):sg(l,"updateDoc",n._key,e),Lc(a,[f.toMutation(n._key,Qr.exists(!0))])}function pg(n,...e){var t,i,a;n=(0,St.m9)(n);let l={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||rg(e[f])||(l=e[f],f++);const w={includeMetadataChanges:l.includeMetadataChanges};if(rg(e[f])){const ee=e[f];e[f]=null===(t=ee.next)||void 0===t?void 0:t.bind(ee),e[f+1]=null===(i=ee.error)||void 0===i?void 0:i.bind(ee),e[f+2]=null===(a=ee.complete)||void 0===a?void 0:a.bind(ee)}let M,k,W;if(n instanceof Jr)k=Cn(n.firestore,Vr),W=nl(n._key.path),M={next:ee=>{e[f]&&e[f](af(k,n,ee))},error:e[f+1],complete:e[f+2]};else{const ee=Cn(n,Ds);k=Cn(ee.firestore,Vr),W=ee._query;const _e=new Ia(k);M={next:Ke=>{e[f]&&e[f](new Au(k,_e,ee,Ke))},error:e[f+1],complete:e[f+2]},Z0(n._query)}return function(ee,_e,Ke,Qe){const wt=new Gh(Qe),Ft=new Vp(_e,wt,Ke);return ee.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Jm(yield Sd(ee),Ft)})),()=>{wt.Pc(),ee.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return ey(yield Sd(ee),Ft)}))}}(pi(k),W,w,M)}function Lc(n,e){return function(t,i){const a=new je;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function nI(n,e,t){return ay.apply(this,arguments)}(yield wy(t),i,a)})),a.promise}(pi(n),e)}function af(n,e,t){const i=t.docs.get(e._key),a=new Ia(n);return new ta(n,a,e._key,i,new Il(t.hasPendingWrites,t.fromCache),e.converter)}const Fy={maxAttempts:5};class iE{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kc(e)}set(e,t,i){this._verifyNotCommitted();const a=Vc(e,this._firestore),l=rf(a.converter,t,i),f=xd(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,i);return this._mutations.push(f.toMutation(a._key,Qr.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Vc(e,this._firestore);let f;return f="string"==typeof(t=(0,St.m9)(t))||t instanceof Su?Ty(this._dataReader,"WriteBatch.update",l._key,t,i,a):sg(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(f.toMutation(l._key,Qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vc(e,this._firestore);return this._mutations=this._mutations.concat(new Xl(t._key,Qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vc(n,e){if((n=(0,St.m9)(n)).firestore!==e)throw new Q(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class WI extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kc(e)}get(e){const t=Vc(e,this._firestore),i=new UI(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return d();const l=a[0];if(l.isFoundDocument())return new Od(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new Od(this._firestore,i,t._key,null,t.converter);throw d()})}set(e,t,i){const a=Vc(e,this._firestore),l=rf(a.converter,t,i),f=xd(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,i);return this._transaction.set(a._key,f),this}update(e,t,i,...a){const l=Vc(e,this._firestore);let f;return f="string"==typeof(t=(0,St.m9)(t))||t instanceof Su?Ty(this._dataReader,"Transaction.update",l._key,t,i,a):sg(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,f),this}delete(e){const t=Vc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vc(e,this._firestore),i=new Ia(this._firestore);return super.get(e).then(a=>new ta(this._firestore,i,t._key,a._document,new Il(!1,!1),t.converter))}}function gg(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Q("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lE(){if(typeof Uint8Array>"u")throw new Q("unimplemented","Uint8Arrays are not available in this environment.")}function Ws(){if(!function Tv(){return typeof atob<"u"}())throw new Q("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){mu=Tt.SDK_VERSION,(0,Tt._registerComponent)(new yt.wA("firestore",(t,{instanceIdentifier:i,options:a})=>{const l=t.getProvider("app").getImmediate(),f=new Vr(new Ar(t.getProvider("auth-internal")),new Hu(t.getProvider("app-check-internal")),function(w,M){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(w.options.projectId,M)}(l,i),l);return a=Object.assign({useFetchStreams:e},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),(0,Tt.registerVersion)(Zc,"3.8.4",n),(0,Tt.registerVersion)(Zc,"3.8.4","esm2017")}();class Mu{constructor(e){this._delegate=e}static fromBase64String(e){return Ws(),new Mu(Tu.fromBase64String(e))}static fromUint8Array(e){return lE(),new Mu(Tu.fromUint8Array(e))}toBase64(){return Ws(),this._delegate.toBase64()}toUint8Array(){return lE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Uy(n){return function YI(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class qD{enableIndexedDbPersistence(e,t){return function II(n,e){U0(n=Cn(n,Vr));const t=pi(n),i=n._freezeSettings(),a=new Qp;return L0(t,a,new yy(a,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function DI(n){U0(n=Cn(n,Vr));const e=pi(n),t=n._freezeSettings(),i=new Qp;return L0(e,i,new hI(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function by(n){if(n._initialized&&!n._terminated)throw new Q(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new je;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(i){if(!Fo.C())return Promise.resolve();const a=i+"main";yield Fo.delete(a)}),function(i){return t.apply(this,arguments)})(xc(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QI{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof vu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$u("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function O0(n,e,t,i={}){var a;const l=(n=Cn(n,Zh))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&$u("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let f,w;if("string"==typeof i.mockUserToken)f=i.mockUserToken,w=Ii.MOCK_USER;else{f=(0,St.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const M=i.mockUserToken.sub||i.mockUserToken.user_id;if(!M)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ii(M)}n._authCredentials=new mn(new xt(f,w))}}(this._delegate,e,t,i)}enableNetwork(){return function V0(n){return function C0(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield D0(n),t=yield El(n);return e.setNetworkEnabled(!0),function(i){const a=P(i);return a.mu.delete(0),vd(a)}(t)}))}(pi(n=Cn(n,Vr)))}(this._delegate)}disableNetwork(){return function CI(n){return function T0(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield D0(n),t=yield El(n);return e.setNetworkEnabled(!1),(i=(0,me.Z)(function*(a){const l=P(a);l.mu.add(0),yield ic(l),l.pu.set("Offline")}),function(a){return i.apply(this,arguments)})(t);var i}))}(pi(n=Cn(n,Vr)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Wh("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function bI(n){return function(e){const t=new je;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function oI(n,e){return hy.apply(this,arguments)}(yield wy(e),t)})),t.promise}(pi(n=Cn(n,Vr)))}(this._delegate)}onSnapshotsInSync(e){return function rE(n,e){return function VD(n,e){const t=new Gh(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return i=yield Sd(n),a=t,P(i).vu.add(a),void a.next();var i,a})),()=>{t.Pc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return i=yield Sd(n),a=t,void P(i).vu.delete(a);var i,a}))}}(pi(n=Cn(n,Vr)),rg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Uc(this,N0(this._delegate,e))}catch(t){throw qs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Da(this,Pc(this._delegate,e))}catch(t){throw qs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zs(this,function _I(n,e){if(n=Cn(n,Zh),tg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ds(n,null,(t=e,new Qu(Rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw qs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function qI(n,e,t){n=Cn(n,Vr);const i=Object.assign(Object.assign({},Fy),t);return function(a){if(a.maxAttempts<1)throw new Q(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(a,l,f){const w=new je;return a.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const M=yield function b0(n){return zh(n).then(e=>e.datastore)}(a);new pI(a.asyncQueue,M,f,l,w).run()})),w.promise}(pi(n),a=>e(new WI(n,a)),i)}(this._delegate,t=>e(new kd(this,t)))}batch(){return pi(this._delegate),new hE(new iE(this._delegate,e=>Lc(this._delegate,e)))}loadBundle(e){return function TI(n,e){const t=pi(n=Cn(n,Vr)),i=new wI;return function UD(n,e,t,i){const a=function(l,f){let w;return w="string"==typeof l?(new TextEncoder).encode(l):l,M=function(M,k){if(M instanceof Uint8Array)return vy(M,k);if(M instanceof ArrayBuffer)return vy(new Uint8Array(M),k);if(M instanceof ReadableStream)return M.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(w),new w0(M,f);var M}(t,yd(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function LD(n,e,t){const i=P(n);var a;(a=(0,me.Z)(function*(l,f,w){try{const M=yield f.getMetadata();if(yield function(_e,Ke){const Qe=P(_e),wt=Di(Ke.createTime);return Qe.persistence.runTransaction("hasNewerBundle","readonly",Ft=>Qe.Os.getBundleMetadata(Ft,Ke.id)).then(Ft=>!!Ft&&Ft.createTime.compareTo(wt)>=0)}(l.localStore,M))return yield f.close(),w._completeWith({taskState:"Success",documentsLoaded:(_e=M).totalDocuments,bytesLoaded:_e.totalBytes,totalDocuments:_e.totalDocuments,totalBytes:_e.totalBytes}),Promise.resolve(new Set);w._updateProgress(jp(M));const k=new Bp(M,l.localStore,f.Tt);let W=yield f.yc();for(;W;){const _e=yield k.Bu(W);_e&&w._updateProgress(_e),W=yield f.yc()}const ee=yield k.complete();return yield Cu(l,ee.Uu,void 0),yield function(_e,Ke){const Qe=P(_e);return Qe.persistence.runTransaction("Save bundle","readwrite",wt=>Qe.Os.saveBundleMetadata(wt,Ke))}(l.localStore,M),w._completeWith(ee.progress),Promise.resolve(ee.qu)}catch(M){return $u("SyncEngine",`Loading bundle failed with ${M}`),w._failWith(M),Promise.resolve(new Set)}var _e}),function(l,f,w){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield wy(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function SI(n,e){return function BD(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,i){const a=P(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Os.getNamedQuery(l,i))}(yield Nc(n),e)}))}(pi(n=Cn(n,Vr)),e).then(t=>t?new Ds(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Zs(this,t):null)}}class uf extends dg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mu(new Tu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Da.forKey(t,this.firestore,null)}}class kd{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uf(e)}get(e){const t=Ld(e);return this._delegate.get(t).then(i=>new cf(this._firestore,new ta(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=Ld(e);return i?(gg("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=Ld(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=Ld(e);return this._delegate.delete(t),this}}class hE{constructor(e){this._delegate=e}set(e,t,i){const a=Ld(e);return i?(gg("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=Ld(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=Ld(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ac{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new sf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dl(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=ac.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let l=a.get(t);return l||(l=new ac(e,new uf(e),t),a.set(t,l)),l}}ac.INSTANCES=new WeakMap;class Da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uf(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Da(t,new Jr(t._delegate,i,new Et(e)))}static forKey(e,t,i){return new Da(t,new Jr(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Uc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uc(this.firestore,N0(this._delegate,e))}catch(t){throw qs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof Jr&&P0(this._delegate,e)}set(e,t){t=gg("DocumentReference.set",t);try{return t?J0(this._delegate,e,t):J0(this._delegate,e)}catch(i){throw qs(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?eE(this._delegate,e):eE(this._delegate,e,t,...i)}catch(a){throw qs(a,"updateDoc()","DocumentReference.update()")}}delete(){return function tE(n){return Lc(Cn(n.firestore,Vr),[new Xl(n._key,Qr.none())])}(this._delegate)}onSnapshot(...e){const t=fE(e),i=pE(e,a=>new cf(this.firestore,new ta(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return pg(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function $I(n){n=Cn(n,Jr);const e=Cn(n.firestore,Vr),t=pi(e),i=new Ia(e);return function mI(n,e){const t=new je;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(i=(0,me.Z)(function*(a,l,f){try{const w=yield function(M,k){const W=P(M);return W.persistence.runTransaction("read document","readonly",ee=>W.localDocuments.getDocument(ee,k))}(a,l);w.isFoundDocument()?f.resolve(w):w.isNoDocument()?f.resolve(null):f.reject(new Q(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(w){const M=_d(w,`Failed to get document '${l} from cache`);f.reject(M)}}),function(a,l,f){return i.apply(this,arguments)})(yield Nc(n),e,t);var i})),t.promise}(t,n._key).then(a=>new ta(e,i,n._key,a,new Il(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function HI(n){n=Cn(n,Jr);const e=Cn(n.firestore,Vr);return Iy(pi(e),n._key,{source:"server"}).then(t=>af(e,n,t))}(this._delegate):function Py(n){n=Cn(n,Jr);const e=Cn(n.firestore,Vr);return Iy(pi(e),n._key).then(t=>af(e,n,t))}(this._delegate),t.then(i=>new cf(this.firestore,new ta(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Da(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}function qs(n,e,t){return n.message=n.message.replace(e,t),n}function fE(n){for(const e of n)if("object"==typeof e&&!Uy(e))return e;return{}}function pE(n,e){var t,i;let a;return a=Uy(n[0])?n[0]:Uy(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class cf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return X0(this._delegate,e._delegate)}}class Dl extends cf{data(e){const t=this._delegate.data(e);return function b(n,e){n||d()}(void 0!==t),t}}class Zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uf(e)}where(e,t,i){try{return new Zs(this.firestore,oc(this._delegate,function K0(n,e,t){const i=e,a=ag("where",n);return ug._create(a,i,t)}(e,t,i)))}catch(a){throw qs(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Zs(this.firestore,oc(this._delegate,function NI(n,e="asc"){const t=e,i=ag("orderBy",n);return xy._create(i,t)}(e,t)))}catch(i){throw qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zs(this.firestore,oc(this._delegate,function Y0(n){return M0("limit",n),nf._create("limit",n,"F")}(e)))}catch(t){throw qs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Zs(this.firestore,oc(this._delegate,function PI(n){return M0("limitToLast",n),nf._create("limitToLast",n,"L")}(e)))}catch(t){throw qs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zs(this.firestore,oc(this._delegate,function kI(...n){return cg._create("startAt",n,!0)}(...e)))}catch(t){throw qs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zs(this.firestore,oc(this._delegate,function FI(...n){return cg._create("startAfter",n,!1)}(...e)))}catch(t){throw qs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zs(this.firestore,oc(this._delegate,function LI(...n){return lg._create("endBefore",n,!1)}(...e)))}catch(t){throw qs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zs(this.firestore,oc(this._delegate,function VI(...n){return lg._create("endAt",n,!0)}(...e)))}catch(t){throw qs(t,"endAt()","Query.endAt()")}}isEqual(e){return ng(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function hg(n){n=Cn(n,Ds);const e=Cn(n.firestore,Vr),t=pi(e),i=new Ia(e);return function yI(n,e){const t=new je;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(i=(0,me.Z)(function*(a,l,f){try{const w=yield Ph(a,l,!0),M=new ry(l,w.Yi),k=M.Hu(w.documents),W=M.applyChanges(k,!1);f.resolve(W.snapshot)}catch(w){const M=_d(w,`Failed to execute query '${l} against cache`);f.reject(M)}}),function(a,l,f){return i.apply(this,arguments)})(yield Nc(n),e,t);var i})),t.promise}(t,n._query).then(a=>new Au(e,i,n,a))}(this._delegate):"server"===e?.source?function fg(n){n=Cn(n,Ds);const e=Cn(n.firestore,Vr),t=pi(e),i=new Ia(e);return S0(t,n._query,{source:"server"}).then(a=>new Au(e,i,n,a))}(this._delegate):function GI(n){n=Cn(n,Ds);const e=Cn(n.firestore,Vr),t=pi(e),i=new Ia(e);return Z0(n._query),S0(t,n._query).then(a=>new Au(e,i,n,a))}(this._delegate),t.then(i=>new Fd(this.firestore,new Au(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=fE(e),i=pE(e,a=>new Fd(this.firestore,new Au(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return pg(this._delegate,t,i)}withConverter(e){return new Zs(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}class gE{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Dl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Fd{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Dl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new gE(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Dl(this._firestore,i))})}isEqual(e){return X0(this._delegate,e._delegate)}}class Uc extends Zs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Da(this.firestore,e):null}doc(e){try{return new Da(this.firestore,void 0===e?Pc(this._delegate):Pc(this._delegate,e))}catch(t){throw qs(t,"doc()","CollectionReference.doc()")}}add(e){return function nE(n,e){const t=Cn(n.firestore,Vr),i=Pc(n),a=rf(n.converter,e);return Lc(t,[xd(kc(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,Qr.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Da(this.firestore,t))}isEqual(e){return P0(this._delegate,e._delegate)}withConverter(e){return new Uc(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}function Ld(n){return Cn(n,Jr)}class mg{constructor(...e){this._delegate=new Su(...e)}static documentId(){return new mg(Yr.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof Su&&this._delegate._internalPath.isEqual(e._internalPath)}}class bl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Ly(){return new Qh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bl(e)}static delete(){const e=function sE(){return new Yh("deleteField")}();return e._methodName="FieldValue.delete",new bl(e)}static arrayUnion(...e){const t=function oE(...n){return new RI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bl(t)}static arrayRemove(...e){const t=function aE(...n){return new G0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bl(t)}static increment(e){const t=function uE(n){return new Md("increment",n)}(e);return t._methodName="FieldValue.increment",new bl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const mE={Firestore:QI,GeoPoint:ig,Timestamp:hr,Blob:Mu,Transaction:kd,WriteBatch:hE,DocumentReference:Da,DocumentSnapshot:cf,Query:Zs,QueryDocumentSnapshot:Dl,QuerySnapshot:Fd,CollectionReference:Uc,FieldPath:mg,FieldValue:bl,setLogLevel:function dE(n){!function Af(n){Lr.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function yg(n,e){return function yE(n,e=wo.z){return new fe.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function By(n,e){return yg(n,e).pipe((0,te.U)(t=>({payload:t,type:"query"})))}function jy(n,e){return By(n,e).pipe((0,Io.O)(void 0),xa(),(0,te.U)(([t,i])=>{const a=i.payload.docChanges(),l=a.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((f,w)=>{const M=a.find(W=>W.doc.ref.isEqual(f.ref)),k=t?.payload.docs.find(W=>W.ref.isEqual(f.ref));M&&JSON.stringify(M.doc.metadata)===JSON.stringify(f.metadata)||!M&&k&&JSON.stringify(k.metadata)===JSON.stringify(f.metadata)||l.push({type:"modified",payload:{oldIndex:w,newIndex:w,type:"modified",doc:f}})}),l}))}function vE(n,e,t){return jy(n,t).pipe((0,ls.R)((i,a)=>function JI(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function _E(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $y(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $y(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $y(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(l=>l.payload),e),[]),function Js(n,e=As.y){return n=n??eo,(0,jo.e)((t,i)=>{let a,l=!0;t.subscribe((0,cs.x)(i,f=>{const w=e(f);(l||!n(a,w))&&(l=!1,a=w,i.next(f))}))})}(),(0,te.U)(i=>i.map(a=>({type:a.type,payload:a}))))}function $y(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function Hy(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function XI(n){(function Vd(n,e){n.INTERNAL.registerComponent(new yt.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},mE)))})(n,(e,t)=>new QI(e,t,new qD)),n.registerVersion("@firebase/firestore-compat","0.3.4")}(xs.Z);class EE{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=jy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,te.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Io.O)(void 0),xa(),(0,Ye.h)(([i,a])=>a.length>0||!i),(0,te.U)(([i,a])=>a),Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ls.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Hy(e);return vE(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return By(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Ne.iC)}get(e){return(0,Ee.D)(this.query.get(e)).pipe(Ne.iC)}add(e){return this.ref.add(e)}doc(e){return new Gy(this.ref.doc(e),this.afs)}}class Gy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:l}=zy(i,t);return new EE(a,l,this.afs)}snapshotChanges(){return function ZD(n,e){return yg(n,e).pipe((0,Io.O)(void 0),xa(),(0,te.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,te.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ee.D)(this.ref.get(e)).pipe(Ne.iC)}}class wE{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jy(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),(0,Ye.h)(t=>t.length>0),Ne.iC):jy(this.query,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ls.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Hy(e);return vE(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return By(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Ne.iC)}get(e){return(0,Ee.D)(this.query.get(e)).pipe(Ne.iC)}}const IE=new p.OlP("angularfire2.enableFirestorePersistence"),DE=new p.OlP("angularfire2.firestore.persistenceSettings"),bE=new p.OlP("angularfire2.firestore.settings"),eD=new p.OlP("angularfire2.firestore.use-emulator");function zy(n,e=(t=>t)){return{query:e(n),ref:n}}let Wy=(()=>{class n{constructor(t,i,a,l,f,w,M,k,W,ee,_e,Ke,Qe,wt,Ft,Xn,Mr){this.schedulers=M;const Un=(0,j.on)(t,w,i),xn=W;ee&&ou(Un,w,_e,Qe,wt,Ft,Ke,Xn),[this.firestore,this.persistenceEnabled$]=(0,j.cc)(`${Un.name}.firestore`,"AngularFirestore",Un.name,()=>{const wn=w.runOutsideAngular(()=>Un.firestore());if(l&&wn.settings(l),xn&&wn.useEmulator(...xn),a&&!(0,Ue.PM)(f)){const Nn=()=>{try{return(0,Ee.D)(wn.enablePersistence(k||void 0).then(()=>!0,()=>!1))}catch(Cs){return typeof console<"u"&&console.warn(Cs),(0,ue.of)(!1)}};return[wn,w.runOutsideAngular(Nn)]}return[wn,(0,ue.of)(!1)]},[l,xn,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:f}=zy(a,i),w=this.schedulers.ngZone.run(()=>l);return new EE(w,f,this)}collectionGroup(t,i){const a=i||(f=>f),l=this.firestore.collectionGroup(t);return new wE(a(l),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new Gy(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(j.Dh),p.LFG(j.xv,8),p.LFG(IE,8),p.LFG(bE,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ne.HU),p.LFG(DE,8),p.LFG(eD,8),p.LFG(us,8),p.LFG(su,8),p.LFG(Ru,8),p.LFG(Oi,8),p.LFG(Aa,8),p.LFG(Zi,8),p.LFG(Ki,8),p.LFG(_o,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CE=(()=>{class n{constructor(){Eo.Z.registerVersion("angularfire",Ne.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:IE,useValue:!0},{provide:DE,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Wy]}),n})();var TE=V(4742),tD=V(8421),nD=V(3269),KD=V(3268),SE=V(1810);let rD=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Ud=(()=>{class n extends rD{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const uc=new p.OlP("NgValueAccessor"),XD={provide:uc,useExisting:(0,p.Gpc)(()=>_g),multi:!0},vg=new p.OlP("CompositionEventMode");let _g=(()=>{class n extends rD{constructor(t,i,a){super(t,i),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function JD(){const n=(0,Ue.q)()?(0,Ue.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(vg,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&p.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[p._Bn([XD]),p.qOj]}),n})();const bs=new p.OlP("NgValidators"),Cl=new p.OlP("NgAsyncValidators");function uD(n){return null!=n}function cD(n){return(0,p.QGY)(n)?(0,Ee.D)(n):n}function NE(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function PE(n,e){return e.map(t=>t(n))}function dD(n){return n.map(e=>function lD(n){return!n.validate}(e)?e:t=>e.validate(t))}function Eg(n){return null!=n?function kE(n){if(!n)return null;const e=n.filter(uD);return 0==e.length?null:function(t){return NE(PE(t,e))}}(dD(n)):null}function FE(n){return null!=n?function Qy(n){if(!n)return null;const e=n.filter(uD);return 0==e.length?null:function(t){return function YD(...n){const e=(0,nD.jO)(n),{args:t,keys:i}=(0,TE.D)(n),a=new fe.y(l=>{const{length:f}=t;if(!f)return void l.complete();const w=new Array(f);let M=f,k=f;for(let W=0;W<f;W++){let ee=!1;(0,tD.Xf)(t[W]).subscribe((0,cs.x)(l,_e=>{ee||(ee=!0,k--),w[W]=_e},()=>M--,void 0,()=>{(!M||!ee)&&(k||l.next(i?(0,SE.n)(i,w):w),l.complete())}))}});return e?a.pipe((0,KD.Z)(e)):a}(PE(t,e).map(cD)).pipe((0,te.U)(NE))}}(dD(n)):null}function ba(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LE(n){return n._rawValidators}function wg(n){return n._rawAsyncValidators}function Xy(n){return n?Array.isArray(n)?n:[n]:[]}function Jy(n,e){return Array.isArray(n)?n.includes(e):n===e}function na(n,e){const t=Xy(e);return Xy(n).forEach(a=>{Jy(t,a)||t.push(a)}),t}function VE(n,e){return Xy(e).filter(t=>!Jy(n,t))}class Ig{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Eg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class mo extends Ig{get formDirective(){return null}get path(){return null}}class Bc extends Ig{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Dg{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ev=(()=>{class n extends Dg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Bc,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[p.qOj]}),n})(),Bd=(()=>{class n extends Dg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(mo,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[p.qOj]}),n})();const df="VALID",hf="INVALID",ff="PENDING",Sl="DISABLED";function Sg(n){return(pf(n)?n.validators:n)||null}function Ag(n,e){return(pf(e)?e.asyncValidators:n)||null}function pf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function gf(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new p.vHH(1e3,"");if(!i[t])throw new p.vHH(1001,"")}function mf(n,e,t){n._forEachChild((i,a)=>{if(void 0===t[a])throw new p.vHH(1002,"")})}class yf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===df}get invalid(){return this.status===hf}get pending(){return this.status==ff}get disabled(){return this.status===Sl}get enabled(){return this.status!==Sl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(na(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(na(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VE(e,this._rawAsyncValidators))}hasValidator(e){return Jy(this._rawValidators,e)}hasAsyncValidator(e){return Jy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ff,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sl,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=df,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===df||this.status===ff)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sl:df}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ff,this._hasOwnPendingAsyncValidator=!0;const t=cD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,a)=>i&&i._find(a),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Sl:this.errors?hf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ff)?ff:this._anyControlsHaveStatus(hf)?hf:df}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function HE(n){return Array.isArray(n)?Eg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function GE(n){return Array.isArray(n)?FE(n):n||null}(this._rawAsyncValidators)}}class vf extends yf{constructor(e,t,i){super(Sg(t),Ag(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mf(this,0,e),Object.keys(e).forEach(i=>{gf(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const a=this.controls[i];a&&a.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,a)=>{i.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,a)=>((i.enabled||this.disabled)&&(t[a]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((a,l)=>{i=t(i,a,l)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class yD extends vf{}const jd=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>rv}),rv="always";function _f(n,e,t=rv){zE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function vD(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&WE(n,e)})}(n,e),function _D(n,e){const t=(i,a)=>{e.valueAccessor.writeValue(i),a&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Mg(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&WE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ib(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function iv(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),ov(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zE(n,e){const t=LE(n);null!==e.validator?n.setValidators(ba(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=wg(n);null!==e.asyncValidator?n.setAsyncValidators(ba(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const a=()=>n.updateValueAndValidity();sv(e._rawValidators,a),sv(e._rawAsyncValidators,a)}function ov(n,e){let t=!1;if(null!==n){if(null!==e.validator){const a=LE(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(f=>f!==e.validator);l.length!==a.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const a=wg(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(f=>f!==e.asyncValidator);l.length!==a.length&&(t=!0,n.setAsyncValidators(l))}}}const i=()=>{};return sv(e._rawValidators,i),sv(e._rawAsyncValidators,i),t}function WE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function QE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const $d=class extends yf{constructor(e=null,t,i){super(Sg(t),Ag(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=QE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){QE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Ng=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),AD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const sw=new p.OlP("NgModelWithFormControlWarning"),db={provide:mo,useExisting:(0,p.Gpc)(()=>Pg)};let Pg=(()=>{class n extends mo{constructor(t,i,a){super(),this.callSetDisabledState=a,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ov(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return _f(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){iv(t.control||null,t,!1),function ob(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function wD(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,a=this.form.get(t.path);i!==a&&(iv(i||null,t),(n=>n instanceof $d)(a)&&(_f(a,t,this.callSetDisabledState),t.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function av(n,e){zE(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function Al(n,e){return ov(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zE(this.form,this),this._oldForm&&ov(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(bs,10),p.Y36(Cl,10),p.Y36(jd,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&p.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([db]),p.qOj,p.TTD]}),n})();const c={provide:Bc,useExisting:(0,p.Gpc)(()=>h)};let h=(()=>{class n extends Bc{set isDisabled(t){}constructor(t,i,a,l,f){super(),this._ngModelWarningConfig=f,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(a),this.valueAccessor=function ZE(n,e){if(!e)return null;let t,i,a;return Array.isArray(e),e.forEach(l=>{l.constructor===_g?t=l:function Rg(n){return Object.getPrototypeOf(n.constructor)===Ud}(l)?i=l:a=l}),a||i||t||null}(0,l)}ngOnChanges(t){this._added||this._setUpControl(),function wf(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function xg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(mo,13),p.Y36(bs,10),p.Y36(Cl,10),p.Y36(uc,10),p.Y36(sw,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([c]),p.qOj,p.TTD]}),n})();const y={provide:uc,useExisting:(0,p.Gpc)(()=>N),multi:!0};function D(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let N=(()=>{class n extends Ud{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const a=D(this._getOptionId(t),t);this.setProperty("value",a)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function S(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&p.NdJ("change",function(l){return i.onChange(l.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([y]),p.qOj]}),n})(),$=(()=>{class n{constructor(t,i,a){this._element=t,this._renderer=i,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(D(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(N,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Y={provide:uc,useExisting:(0,p.Gpc)(()=>lt),multi:!0};function le(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let lt=(()=>{class n extends Ud{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const a=t.map(l=>this._getOptionId(l));i=(l,f)=>{l._setSelected(a.indexOf(f.toString())>-1)}}else i=(a,l)=>{a._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const a=[],l=i.selectedOptions;if(void 0!==l){const f=l;for(let w=0;w<f.length;w++){const k=this._getOptionValue(f[w].value);a.push(k)}}else{const f=i.options;for(let w=0;w<f.length;w++){const M=f[w];if(M.selected){const k=this._getOptionValue(M.value);a.push(k)}}}this.value=a,t(a)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function Ie(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&p.NdJ("change",function(l){return i.onChange(l.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Y]),p.qOj]}),n})(),Dt=(()=>{class n{constructor(t,i,a){this._element=t,this._renderer=i,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(le(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(le(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(lt,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Fb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[AD]}),n})();class vb extends yf{constructor(e,t,i){super(Sg(t),Ag(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let a=this._adjustIndex(e);a<0&&(a=0),this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),t&&(this.controls.splice(a,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){mf(this,0,e),e.forEach((i,a)=>{gf(this,!1,a),this.at(a).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,a)=>{this.at(a)&&this.at(a).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,a)=>{i.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function _b(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Eb=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const a=this._reduceControls(t);let l={};return _b(i)?l=i:null!==i&&(l.validators=i.validator,l.asyncValidators=i.asyncValidator),new vf(a,l)}record(t,i=null){const a=this._reduceControls(t);return new yD(a,i)}control(t,i,a){let l={};return this.useNonNullable?(_b(i)?l=i:(l.validators=i,l.asyncValidators=a),new $d(t,{...l,nonNullable:!0})):new $d(t,i,a)}array(t,i,a){const l=t.map(f=>this._createControl(f));return new vb(l,i,a)}_reduceControls(t){const i={};return Object.keys(t).forEach(a=>{i[a]=this._createControl(t[a])}),i}_createControl(t){return t instanceof $d||t instanceof yf?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lb=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sw,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:jd,useValue:t.callSetDisabledState??rv}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Fb]}),n})();const ND={production:!0,firebaseConfig:{apiKey:"AIzaSyC18SYhiI6FJ8ngA0EmXAbXl07rnUXHMKA",authDomain:"exam-project-46928.firebaseapp.com",projectId:"exam-project-46928",storageBucket:"exam-project-46928.appspot.com",messagingSenderId:"1062978260998",appId:"1:1062978260998:web:ee6a68f6b26523862bf387"}};var Vb=V(8395),Ks=V(2435),Ub=V(8401),wb=V(1135);class ru{constructor(e,t,i,a){this.afs=e,this.afAuth=t,this.router=i,this.ngZone=a,this.user$=new wb.X(null),this.loggedIn$=new wb.X(!1),this.afAuth.authState.subscribe(l=>{l?(this.userData=l,this.user$.next(l),this.loggedIn$.next(!0),localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(this.loggedIn$.next(!1),localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&(this.loggedIn$.next(!0),this.router.navigate(["dashboard"]))})}).catch(i=>{window.alert(i.message)})}SignUp(e,t,i){return this.afAuth.createUserWithEmailAndPassword(e,t).then(a=>{this.SendVerificationMail(),this.afAuth.currentUser.then(l=>{l?.updateProfile({displayName:i}),this.SetUserData(a.user)})}).catch(a=>{window.alert(a.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.loggedIn$.next(!0),this.router.navigate(["dashboard"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}GoogleAuth(){return this.AuthLogin(new Ub.Q).then(e=>{this.loggedIn$.next(!0),this.router.navigate(["/dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.loggedIn$.next(!0),this.router.navigate(["/dashboard"]),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.loggedIn$.next(!1),this.router.navigate(["login"])})}}ru.\u0275fac=function(e){return new(e||ru)(p.LFG(Wy),p.LFG(us),p.LFG(Ks.F0),p.LFG(p.R0b))},ru.\u0275prov=p.Yz7({token:ru,factory:ru.\u0275fac,providedIn:"root"});class lv{constructor(e,t,i){this.templateRef=e,this.auth=t,this.viewContainer=i}ngOnInit(){this.auth.loggedIn$.subscribe(e=>{e&&this.isLogged||!e&&!this.isLogged?this.el=this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}ngOnDestroy(){this.viewContainer.clear()}}lv.\u0275fac=function(e){return new(e||lv)(p.Y36(p.Rgc),p.Y36(ru),p.Y36(p.s_b))},lv.\u0275dir=p.lG2({type:lv,selectors:[["","isLogged",""]],inputs:{isLogged:"isLogged"}});const Bb=function(){return{exact:!0}};function jb(n,e){if(1&n&&(p.TgZ(0,"li")(1,"a",12),p._uU(2),p.qZA()()),2&n){const t=e.$implicit;p.xp6(1),p.Q6J("routerLink",t.path)("routerLinkActiveOptions",p.DdM(3,Bb)),p.xp6(1),p.hij(" ",t.name," ")}}function $b(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"li")(1,"button",13),p.NdJ("click",function(){p.CHM(t);const a=p.oxw();return p.KtG(a.logout())}),p._uU(2," Log out "),p.qZA()()}}class dv{constructor(e,t){this.auth=e,this.router=t,this.routes=[{name:"Dashboard",path:"dashboard"}]}logout(){this.auth.SignOut(),this.router.navigate(["login"])}}dv.\u0275fac=function(e){return new(e||dv)(p.Y36(ru),p.Y36(Ks.F0))},dv.\u0275cmp=p.Xpm({type:dv,selectors:[["app-navbar"]],decls:13,vars:2,consts:[[1,"border-gray-200","px-2","sm:px-4","py-2.5","bg-primary"],[1,"container","flex","flex-wrap","items-center","justify-between","mx-auto"],["routerLink","/",1,"flex","items-center"],["src","/assets/images/logo.png","alt","EXA Logo",1,"h-28","sm:h-9"],["data-collapse-toggle","navbar-default","type","button","aria-controls","navbar-default","aria-expanded","false",1,"inline-flex","items-center","p-2","ml-3","text-sm","text-gray-500","rounded-lg","md:hidden","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-gray-200","dark:text-gray-400","dark:hover:bg-gray-700","dark:focus:ring-gray-600"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["fill-rule","evenodd","d","M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule","evenodd"],["id","navbar-default",1,"hidden","w-full","md:block","md:w-auto"],[1,"flex","flex-col","p-4","mt-4","border","border-gray-100","rounded-lg","bg-gray-50","md:flex-row","md:space-x-8","md:mt-0","md:text-sm","md:font-medium","md:border-0","md:bg-white","dark:bg-gray-800","md:dark:bg-gray-900","dark:border-gray-700"],[4,"ngFor","ngForOf"],[4,"isLogged"],["routerLinkActive","active",1,"block","py-2","pl-3","pr-4","text-gray-700","rounded","hover:bg-gray-100","md:hover:bg-transparent","md:border-0","md:hover:text-blue-700","md:p-0","dark:text-gray-400","md:dark:hover:text-white","dark:hover:bg-gray-700","dark:hover:text-white","md:dark:hover:bg-transparent",3,"routerLink","routerLinkActiveOptions"],[1,"block","py-2","pl-3","pr-4","text-gray-700","rounded","hover:bg-gray-100","md:hover:bg-transparent","md:border-0","md:hover:text-blue-700","md:p-0","dark:text-gray-400","md:dark:hover:text-white","dark:hover:bg-gray-700","dark:hover:text-white","md:dark:hover:bg-transparent",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),p._UZ(3,"img",3),p.qZA(),p.TgZ(4,"button",4)(5,"span",5),p._uU(6,"Open main menu"),p.qZA(),p.O4$(),p.TgZ(7,"svg",6),p._UZ(8,"path",7),p.qZA()(),p.kcU(),p.TgZ(9,"div",8)(10,"ul",9),p.YNc(11,jb,3,4,"li",10),p.YNc(12,$b,3,0,"li",11),p.qZA()()()()),2&e&&(p.xp6(11),p.Q6J("ngForOf",t.routes),p.xp6(1),p.Q6J("isLogged",!0))},dependencies:[Ue.sg,Ks.rH,Ks.Od,lv],styles:[".active[_ngcontent-%COMP%]{font-weight:700;color:#fff}"]});class hv{}hv.\u0275fac=function(e){return new(e||hv)},hv.\u0275cmp=p.Xpm({type:hv,selectors:[["app-main"]],ngContentSelectors:["*"],decls:2,vars:0,template:function(e,t){1&e&&(p.F$t(),p._UZ(0,"app-navbar"),p.Hsn(1))},dependencies:[dv]});class fv{constructor(){this.title="exam"}}function Gb(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"form",5)(1,"div",6)(2,"label",7),p._uU(3,"E-mail"),p.qZA(),p._UZ(4,"input",8),p.qZA(),p.TgZ(5,"div",9)(6,"button",10),p.NdJ("click",function(){p.CHM(t);const a=p.oxw();return p.KtG(a.forgetPass())}),p._uU(7," Recuperar palavra-passe "),p.qZA()()()}}function zb(n,e){1&n&&(p.TgZ(0,"form",5)(1,"div",6)(2,"label",11),p._uU(3,"Nova palavra-passe"),p.qZA(),p._UZ(4,"input",12),p.qZA(),p.TgZ(5,"div",6)(6,"label",11),p._uU(7," Repete a tua nova palavra-passe "),p.qZA(),p._UZ(8,"input",13),p.qZA(),p.TgZ(9,"div",9)(10,"button",14),p._uU(11," Guardar "),p.qZA()()())}fv.\u0275fac=function(e){return new(e||fv)},fv.\u0275cmp=p.Xpm({type:fv,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(p.TgZ(0,"app-main"),p._UZ(1,"router-outlet"),p.qZA())},dependencies:[Ks.lC,hv]});class pv{constructor(){this.step=1}forgetPass(){this.step=2}}pv.\u0275fac=function(e){return new(e||pv)},pv.\u0275cmp=p.Xpm({type:pv,selectors:[["app-forget-pass"]],decls:7,vars:2,consts:[[1,"py-20","container"],["src","/assets/images/aww.png",1,"h-48","mx-auto","-mb-2"],[1,"max-w-2xl","bg-[#F2F2F2]","shadow-2xl","py-6","mx-auto"],["src","/assets/images/tlogo.png",1,"h-20","mx-auto","mb-6"],["class","max-w-[80%] mx-auto mb-20",4,"ngIf"],[1,"max-w-[80%]","mx-auto","mb-20"],[1,"flex","flex-col","mb-6"],["for","email",1,"font-bold","text-lg"],["type","email","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","justify-center"],["type","button",1,"button","text-xl",3,"click"],["for","password",1,"font-bold","text-lg"],["type","password","placeholder","Nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","password","placeholder","Repete a tua nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","button","routerLink","/dashboard",1,"button","text-xl"]],template:function(e,t){1&e&&(p.TgZ(0,"section")(1,"div",0),p._UZ(2,"img",1),p.TgZ(3,"div",2),p._UZ(4,"img",3),p.YNc(5,Gb,8,0,"form",4),p.YNc(6,zb,12,0,"form",4),p.qZA()()()),2&e&&(p.xp6(5),p.Q6J("ngIf",1===t.step),p.xp6(1),p.Q6J("ngIf",2===t.step))},dependencies:[Ue.O5,Ng,Bd,Ks.rH]});class gv{constructor(e,t,i){this.router=e,this.auth=t,this.fb=i,this.form=this.fb.group({username:[""],password:[""]})}login(){const{username:e,password:t}=this.form.value;this.auth.SignIn(e,t)}}gv.\u0275fac=function(e){return new(e||gv)(p.Y36(Ks.F0),p.Y36(ru),p.Y36(Eb))},gv.\u0275cmp=p.Xpm({type:gv,selectors:[["app-login"]],decls:25,vars:2,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg","pt-3"],["type","email","formControlName","username","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],[1,"mb-6","flex","flex-col"],["for","password",1,"font-bold","text-lg"],["type","password","formControlName","password","placeholder","Password",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","items-center","justify-between","mb-10"],[1,"button","text-xl",3,"disabled","click"],["routerLink","/register",1,"mb-4"],[1,"underline","text-blue-500"],["routerLink","/forget-password"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),p._uU(3,"My personal data"),p.qZA(),p.TgZ(4,"form",3)(5,"div",4)(6,"label",5),p._uU(7,"E-mail"),p.qZA(),p._UZ(8,"input",6),p.qZA(),p.TgZ(9,"div",7)(10,"label",8),p._uU(11,"Password"),p.qZA(),p._UZ(12,"input",9),p.qZA(),p.TgZ(13,"div",10)(14,"button",11),p.NdJ("click",function(){return t.login()}),p._uU(15," Keep "),p.qZA()()(),p.TgZ(16,"a",12)(17,"p",13),p._uU(18,"Ainda n\xe3o tens conta? Cria agora"),p.qZA()(),p.TgZ(19,"a",14)(20,"p",13),p._uU(21,"Esqueci-me da palavra-passe"),p.qZA()()(),p._UZ(22,"div"),p.qZA(),p.TgZ(23,"div",15),p._UZ(24,"img",16),p.qZA()),2&e&&(p.xp6(4),p.Q6J("formGroup",t.form),p.xp6(10),p.Q6J("disabled",!t.form.valid))},dependencies:[Ng,_g,ev,Bd,Pg,h,Ks.rH]});class mv{constructor(e,t,i){this.router=e,this.auth=t,this.fb=i,this.isLoading=!1,this.form=this.fb.group({name:[""],username:[""],password:[""]}),console.log(ND),ND.production||this.form.setValue({name:"test",username:"aib.tmkm@gmail.com",password:"123456"})}login(){this.isLoading=!0;const{username:e,password:t,name:i}=this.form.value;this.auth.SignUp(e,t,i).then(()=>{this.router.navigate(["dashboard"]),this.isLoading=!1}).catch(()=>{this.isLoading=!1})}}mv.\u0275fac=function(e){return new(e||mv)(p.Y36(Ks.F0),p.Y36(ru),p.Y36(Eb))},mv.\u0275cmp=p.Xpm({type:mv,selectors:[["app-register"]],decls:31,vars:3,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full","flex","flex-col","mb-6",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg"],["type","text","formControlName","name","placeholder","Enter Your Name",1,"border","border-[#4472c4]","p-2","w-full"],["type","email","formControlName","username","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],["for","password",1,"font-bold","text-lg"],["type","password","formControlName","password","placeholder","Nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","password","placeholder","Repete a tua nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","mb-10"],[1,"button",3,"disabled","click"],["routerLink","/login"],[1,"underline","text-blue-500"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(p.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1",2),p._uU(4,"My personal data"),p.qZA(),p.TgZ(5,"form",3)(6,"div",4)(7,"label",5),p._uU(8,"Name"),p.qZA(),p._UZ(9,"input",6),p.qZA(),p.TgZ(10,"div",4)(11,"label",5),p._uU(12,"E-mail"),p.qZA(),p._UZ(13,"input",7),p.qZA(),p.TgZ(14,"div",4)(15,"label",8),p._uU(16,"Nova palavra-passe"),p.qZA(),p._UZ(17,"input",9),p.qZA(),p.TgZ(18,"div",4)(19,"label",8),p._uU(20," Repete a tua nova palavra-passe "),p.qZA(),p._UZ(21,"input",10),p.qZA()(),p.TgZ(22,"div",11)(23,"button",12),p.NdJ("click",function(){return t.login()}),p._uU(24),p.qZA()(),p.TgZ(25,"a",13)(26,"p",14),p._uU(27,"Already have an account? Log in"),p.qZA()()(),p._UZ(28,"div"),p.qZA(),p.TgZ(29,"div",15),p._UZ(30,"img",16),p.qZA()()),2&e&&(p.xp6(5),p.Q6J("formGroup",t.form),p.xp6(18),p.Q6J("disabled",t.isLoading),p.xp6(1),p.hij(" ",t.isLoading?"Loading...":"Continue"," "))},dependencies:[Ng,_g,ev,Bd,Pg,h,Ks.rH]});class Hd{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.loggedIn$.pipe((0,te.U)(i=>(console.log(i),!i||(this.router.navigate(["dashboard"]),!1))))}}Hd.\u0275fac=function(e){return new(e||Hd)(p.LFG(ru),p.LFG(Ks.F0))},Hd.\u0275prov=p.Yz7({token:Hd,factory:Hd.\u0275fac,providedIn:"root"});const Wb=function(n){return{"box-active":n}};function qb(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",9),p.NdJ("click",function(){const l=p.CHM(t).index,f=p.oxw(2);return p.KtG(f.selectCard(l))}),p._UZ(1,"img",10),p.TgZ(2,"strong"),p._uU(3),p.qZA()()}if(2&n){const t=e.$implicit;p.Q6J("ngClass",p.VKq(3,Wb,t.selected)),p.xp6(1),p.Q6J("src",t.icon,p.LSH),p.xp6(2),p.hij(" ",t.name," ")}}const Zb=function(){return{isExisting:!0}};function Kb(n,e){if(1&n&&(p.TgZ(0,"section")(1,"div",1)(2,"div",2)(3,"h1",3),p._uU(4),p.qZA(),p.TgZ(5,"p",4),p._uU(6,"ESCOLHE A(S) TUA(S) DISCIPLINAS"),p.qZA()(),p.TgZ(7,"div",5),p.YNc(8,qb,4,5,"div",6),p.qZA(),p.TgZ(9,"div",7)(10,"button",8),p._uU(11," Come\xe7ar "),p.qZA()()()()),2&n){const t=p.oxw();p.xp6(4),p.hij(" Bem-vindo ao EXA, (",null==t.user?null:t.user.displayName,") "),p.xp6(4),p.Q6J("ngForOf",t.cards),p.xp6(2),p.Q6J("queryParams",p.DdM(3,Zb))}}function Yb(n,e){if(1&n&&(p.TgZ(0,"option",28),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.Q6J("value",t.name),p.xp6(1),p.hij(" ",t.name," ")}}function Qb(n,e){if(1&n&&(p.TgZ(0,"section")(1,"div",11)(2,"div",12)(3,"h1",13),p._uU(4,"Ol\xe1, (User name)"),p.qZA(),p.TgZ(5,"h4",14),p._uU(6,"Que exames queres praticar hoje?"),p.qZA(),p.TgZ(7,"select",15),p.YNc(8,Yb,2,2,"option",16),p.qZA()()(),p.TgZ(9,"div",17)(10,"div",18)(11,"div",19)(12,"h2",20),p._uU(13,"O meu perfil"),p.qZA(),p._UZ(14,"img",21),p.TgZ(15,"button",22),p._uU(16," Alterar dados "),p.qZA()(),p.TgZ(17,"div",19)(18,"h2",23),p._uU(19," Praticar escolhas m\xfaltiplas "),p.qZA(),p._UZ(20,"img",24),p.TgZ(21,"button",25),p._uU(22," Come\xe7ar "),p.qZA()(),p.TgZ(23,"div",19)(24,"h2",26),p._uU(25," Fazer "),p._UZ(26,"br"),p._uU(27," um exame "),p.qZA(),p._UZ(28,"img",24),p.TgZ(29,"button",27),p._uU(30," Escolher exame "),p.qZA()()()()()),2&n){const t=p.oxw();p.xp6(8),p.Q6J("ngForOf",t.cards)}}class yv{constructor(e,t){this.route=e,this.auth=t,this.isExisting=!0,this.cards=[{name:"Portugu\xeas",icon:"/assets/images/subjects/1.png",selected:!1},{name:"Matem\xe1tica A",icon:"/assets/images/subjects/2.png",selected:!1},{name:"Hist\xf3ria",icon:"/assets/images/subjects/3.png",selected:!1},{name:"Biologia e Geologia",icon:"/assets/images/subjects/4.png",selected:!1},{name:"Geografia",icon:"/assets/images/subjects/5.png",selected:!1},{name:"Filosofia",icon:"/assets/images/subjects/6.png",selected:!1},{name:"Economia A",icon:"/assets/images/subjects/7.png",selected:!1},{name:"F\xedsica e Qu\xedmica A",icon:"/assets/images/subjects/8.png",selected:!1}],this.user=null}ngOnInit(){this.auth.user$.subscribe(e=>{this.user=e}),this.route.queryParams.subscribe(e=>{this.isExisting="true"===e.isExisting})}selectCard(e){this.cards[e].selected=!this.cards[e].selected}}function Xb(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",8)(1,"div",9),p.NdJ("click",function(){const l=p.CHM(t).index,f=p.oxw(2);return p.KtG(f.selectPackage(l))}),p.TgZ(2,"span"),p._uU(3," \u2713 "),p.qZA()(),p.TgZ(4,"div",10)(5,"h3",11),p._uU(6),p.qZA(),p.TgZ(7,"p",12),p._uU(8),p.qZA(),p.TgZ(9,"p",13)(10,"del"),p._uU(11),p.qZA()(),p.TgZ(12,"div",14)(13,"button",15),p.NdJ("click",function(){const l=p.CHM(t).index,f=p.oxw(2);return p.KtG(f.selectPackage(l))}),p._uU(14),p.qZA()()()()}if(2&n){const t=e.$implicit;p.xp6(2),p.Gre("font-bold text-4xl group-hover:block ",t.selected?"!block":"hidden",""),p.Udp("color",t.color),p.xp6(3),p.Udp("color",t.color),p.xp6(1),p.hij(" ",t.name," "),p.xp6(2),p.hij(" ",t.desc," "),p.xp6(1),p.Udp("color",t.color),p.xp6(2),p.hij(" ",t.originalPrice," "),p.xp6(2),p.Udp("background-color",t.color),p.xp6(1),p.hij(" ",t.price," ")}}yv.\u0275fac=function(e){return new(e||yv)(p.Y36(Ks.gz),p.Y36(ru))},yv.\u0275cmp=p.Xpm({type:yv,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container"],[1,"text-center","py-10"],[1,"text-4xl","font-bold","mb-2"],[1,"text-[#6A99D0]","font-medium"],[1,"grid","grid-cols-4","gap-6","mb-10","max-w-2xl","mx-auto"],["class","p-6 bg-[#F2F2F2] text-center border-[2px] cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-center"],["routerLink","/dashboard",1,"button",3,"queryParams"],[1,"p-6","bg-[#F2F2F2]","text-center","border-[2px]","cursor-pointer",3,"ngClass","click"],[1,"mx-auto","max-h-12","mb-4",3,"src"],[1,"bg-[#deebf7]","h-52"],[1,"container","flex","flex-col","items-center","py-10"],[1,"text-5xl","font-bold","mb-2"],[1,"text-lg","font-bold","mb-4"],[1,"py-2","px-6","shadow-md"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-white","pt-9","container"],[1,"flex","items-stretch","justify-center","gap-10"],[1,"d-card"],[1,"text-2xl","font-bold","pb-4"],["src","/assets/images/hi-img.png","alt","hi-img"],[1,"bg-[#00216e]","text-white","font-semibold","py-4","px-8","rounded-2xl"],[1,"text-2xl","font-bold","pb-4","text-[#4472c4]"],["src","/assets/images/pc-1.png","alt","pc-1",1,"pb-4","pl-5"],[1,"bg-[#4472c4]","text-white","font-semibold","py-4","px-12","rounded-2xl"],[1,"text-2xl","font-bold","pb-4","text-[#70ad47]"],["routerLink","/exam/choose",1,"bg-[#70ad47]","text-white","font-semibold","py-4","px-8","rounded-2xl"],[3,"value"]],template:function(e,t){1&e&&(p.YNc(0,Kb,12,4,"section",0),p.YNc(1,Qb,31,1,"section",0)),2&e&&(p.Q6J("ngIf",!t.isExisting),p.xp6(1),p.Q6J("ngIf",t.isExisting))},dependencies:[Ue.mk,Ue.sg,Ue.O5,$,Dt,Ks.rH],styles:[".d-card[_ngcontent-%COMP%]{flex:1 1 0%;--tw-bg-opacity: 1;background-color:rgb(242 242 242 / var(--tw-bg-opacity));padding:1.5rem 5rem;--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);display:flex;flex-direction:column;justify-content:space-between;align-items:center;gap:1rem}.d-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;object-fit:contain}.d-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.box-active[_ngcontent-%COMP%]{border:2px solid #4f71be}"]});const Jb=function(){return{step:2}};function eC(n,e){if(1&n&&(p.TgZ(0,"section")(1,"div",1)(2,"h1",2),p._uU(3,"Pick your plan"),p.qZA(),p.TgZ(4,"div",3),p.YNc(5,Xb,15,15,"div",4),p.qZA(),p.TgZ(6,"p",5),p._uU(7," * Oferta limitada aos primeiros 1,000 alunos a efetuar registo no EXA "),p.qZA(),p.TgZ(8,"div",6)(9,"button",7),p._uU(10," Continue "),p.qZA()()()()),2&n){const t=p.oxw();p.xp6(5),p.Q6J("ngForOf",t.packages),p.xp6(4),p.Q6J("queryParams",p.DdM(2,Jb))}}function tC(n,e){1&n&&(p.TgZ(0,"section")(1,"div",16)(2,"div",17)(3,"h1",18),p._uU(4,"Pagamento"),p.qZA(),p.TgZ(5,"form",19)(6,"div",20)(7,"label",21),p._uU(8,"Plano selecionado "),p.qZA(),p._UZ(9,"input",22),p.qZA(),p.TgZ(10,"div",20)(11,"label",23),p._uU(12,"N\xfamero do cart\xe3o "),p.qZA(),p._UZ(13,"input",24),p.qZA(),p.TgZ(14,"div",25)(15,"div",26)(16,"label",27),p._uU(17,"Data de validade"),p.qZA(),p._UZ(18,"input",28),p.qZA(),p.TgZ(19,"div",26)(20,"label",29),p._uU(21,"CSV"),p.qZA(),p._UZ(22,"input",30),p.qZA()(),p.TgZ(23,"div",31)(24,"label",23),p._uU(25,"Nome no cart\xe3o"),p.qZA(),p._UZ(26,"input",32),p.qZA()(),p.TgZ(27,"div",33)(28,"button",34),p._uU(29," Efetuar pagamento e alterar subscri\xe7\xe3o "),p.qZA()(),p.TgZ(30,"p",35),p._uU(31," * Oferta limitada aos primeiros 1,000 alunos a efetuar registo no EXA "),p.qZA()(),p._UZ(32,"div"),p.qZA(),p.TgZ(33,"div",36),p._UZ(34,"img",37),p.qZA()())}class vv{constructor(e){this.route=e,this.step=1,this.packages=[{name:"B\xe1sico",desc:"1 Disciplina | 10 Exames | 1 M\xeas",originalPrice:"7,99\u20ac/m\xeas",price:"4,99\u20ac/m\xeas*",color:"#00216e",selected:!0},{name:"Premium",desc:"2 Disciplinas | 20 Exames | 1 Meses",originalPrice:"19,99\u20ac/m\xeas",price:"14,99\u20ac/m\xeas*",color:"#a6a6a6",selected:!1},{name:"Oferta limitada",desc:"Todas as Disciplinas | Todos os exames | 1 M\xeas",originalPrice:"29,99\u20ac/m\xeas",price:"24,99\u20ac/m\xeas*",color:"#70ad47",selected:!1}]}ngOnInit(){this.route.queryParams.subscribe(e=>{console.log(e),this.step=e.step?+e.step:1})}selectPackage(e){this.packages.forEach((t,i)=>{this.packages[i].selected=i===e})}}vv.\u0275fac=function(e){return new(e||vv)(p.Y36(Ks.gz))},vv.\u0275cmp=p.Xpm({type:vv,selectors:[["app-payment"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container","max-w-5xl","py-10"],[1,"text-4xl","font-bold","text-center","mb-20"],[1,"flex","justify-center","gap-3","mb-12"],["class","flex-1 relative group",4,"ngFor","ngForOf"],[1,"text-sm","text-center","mb-20"],[1,"flex","items-center","justify-center","mb-10"],["routerLink","/payment",1,"bg-[#70ad47]","py-2","px-8","text-white","text-xl","font-semibold","rounded-lg",3,"queryParams"],[1,"flex-1","relative","group"],[1,"cursor-pointer","flex","items-center","justify-center","w-[50px]","h-[50px]","border-2","border-blue-700","shadow-2xl","bg-white","absolute","right-1/2","top-0","z-10","translate-x-1/2","-translate-y-[90%]",3,"click"],[1,"text-center","shadow-lg","border-2","pt-8","px-6","rounded-[70px]","relative","flex","flex-col","bg-white"],[1,"text-2xl","font-bold"],[1,"mb-4","text-sm","min-h-[40px]"],[1,"font-bold","mb-4"],[1,"flex","justify-center"],[1,"text-lg","py-2","px-6","font-bold","text-white","rounded-full","-mb-6","w-2/3",3,"click"],[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full","flex","flex-col","mb-10"],[1,"mb-3","flex","flex-col"],["for","email",1,"font-bold","text-lg"],["type","email","placeholder","Premium (14,99\u20ac/m\xeas*) 2 disciplinas | 20 exames",1,"border","border-[#4472c4]","p-2"],["for","password",1,"font-bold","text-lg"],["type","text","placeholder","Data de subscri\xe7\xe3o",1,"border","border-[#4472c4]","p-2"],[1,"flex","gap-4","mb-3"],[1,"flex","flex-col","flex-1"],["for","date",1,"font-bold","text-lg"],["type","date",1,"border","border-[#4472c4]","p-2","w-full"],["for","text",1,"font-bold","text-lg"],["type","text",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","flex-col"],["type","text","placeholder","Data de subscri\xe7\xe3o  + 1 mes",1,"border","border-[#4472c4]","p-2"],[1,"flex","mb-10"],["routerLink","/home",1,"bg-[#70ad47]","py-2","px-8","text-white","text-xl","font-semibold","rounded-lg"],[1,"text-sm","text-center"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(p.YNc(0,eC,11,3,"section",0),p.YNc(1,tC,35,0,"section",0)),2&e&&(p.Q6J("ngIf",1===t.step),p.xp6(1),p.Q6J("ngIf",2===t.step))},dependencies:[Ue.sg,Ue.O5,Ng,Bd,Ks.rH]});class kg{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["/login"]),!0}}kg.\u0275fac=function(e){return new(e||kg)(p.LFG(ru),p.LFG(Ks.F0))},kg.\u0275prov=p.Yz7({token:kg,factory:kg.\u0275fac,providedIn:"root"});const nC=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",canActivate:[Hd],component:gv},{path:"forget-password",canActivate:[Hd],component:pv},{path:"register",canActivate:[Hd],component:mv},{path:"",canActivate:[kg],children:[{path:"home",redirectTo:"dashboard"},{path:"payment",component:vv},{path:"dashboard",component:yv},{path:"exam",loadChildren:()=>V.e(192).then(V.bind(V,3192)).then(n=>n.ExamModule)}]}];class Fg{}Fg.\u0275fac=function(e){return new(e||Fg)},Fg.\u0275mod=p.oAB({type:Fg}),Fg.\u0275inj=p.cJS({imports:[Ks.Bz.forRoot(nC,{useHash:!0}),Ks.Bz]});class Lg{}Lg.\u0275fac=function(e){return new(e||Lg)},Lg.\u0275mod=p.oAB({type:Lg,bootstrap:[fv]}),Lg.\u0275inj=p.cJS({providers:[ru],imports:[Vb.m,I.b2,Lb,j.hO.initializeApp(ND.firebaseConfig),gi,CE,Fg]}),I.q6().bootstrapModule(Lg).catch(n=>console.error(n))},8395:(mt,Te,V)=>{V.d(Te,{m:()=>p});var I=V(6895),j=V(4650);class p{}p.\u0275fac=function(ue){return new(ue||p)},p.\u0275mod=j.oAB({type:p}),p.\u0275inj=j.cJS({imports:[I.ez,I.ez]})},1135:(mt,Te,V)=>{V.d(Te,{X:()=>j});var I=V(7579);class j extends I.x{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const ue=super._subscribe(ae);return!ue.closed&&ae.next(this._value),ue}getValue(){const{hasError:ae,thrownError:ue,_value:fe}=this;if(ae)throw ue;return this._throwIfClosed(),fe}next(ae){super.next(this._value=ae)}}},9751:(mt,Te,V)=>{V.d(Te,{y:()=>ve});var I=V(930),j=V(727),p=V(8822),ae=V(9635),ue=V(2416),fe=V(576),Ee=V(2806);let ve=(()=>{class ce{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const st=new ce;return st.source=this,st.operator=qe,st}subscribe(qe,st,vt){const Oe=function te(ce){return ce&&ce instanceof I.Lv||function re(ce){return ce&&(0,fe.m)(ce.next)&&(0,fe.m)(ce.error)&&(0,fe.m)(ce.complete)}(ce)&&(0,j.Nn)(ce)}(qe)?qe:new I.Hp(qe,st,vt);return(0,Ee.x)(()=>{const{operator:$e,source:He}=this;Oe.add($e?$e.call(Oe,He):He?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(qe){try{return this._subscribe(qe)}catch(st){qe.error(st)}}forEach(qe,st){return new(st=we(st))((vt,Oe)=>{const $e=new I.Hp({next:He=>{try{qe(He)}catch(Ye){Oe(Ye),$e.unsubscribe()}},error:Oe,complete:vt});this.subscribe($e)})}_subscribe(qe){var st;return null===(st=this.source)||void 0===st?void 0:st.subscribe(qe)}[p.L](){return this}pipe(...qe){return(0,ae.U)(qe)(this)}toPromise(qe){return new(qe=we(qe))((st,vt)=>{let Oe;this.subscribe($e=>Oe=$e,$e=>vt($e),()=>st(Oe))})}}return ce.create=Je=>new ce(Je),ce})();function we(ce){var Je;return null!==(Je=ce??ue.v.Promise)&&void 0!==Je?Je:Promise}},7579:(mt,Te,V)=>{V.d(Te,{x:()=>Ee});var I=V(9751),j=V(727);const ae=(0,V(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=V(8737),fe=V(2806);let Ee=(()=>{class we extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(te){const ce=new ve(this,this);return ce.operator=te,ce}_throwIfClosed(){if(this.closed)throw new ae}next(te){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ce of this.currentObservers)ce.next(te)}})}error(te){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=te;const{observers:ce}=this;for(;ce.length;)ce.shift().error(te)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:te}=this;for(;te.length;)te.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var te;return(null===(te=this.observers)||void 0===te?void 0:te.length)>0}_trySubscribe(te){return this._throwIfClosed(),super._trySubscribe(te)}_subscribe(te){return this._throwIfClosed(),this._checkFinalizedStatuses(te),this._innerSubscribe(te)}_innerSubscribe(te){const{hasError:ce,isStopped:Je,observers:qe}=this;return ce||Je?j.Lc:(this.currentObservers=null,qe.push(te),new j.w0(()=>{this.currentObservers=null,(0,ue.P)(qe,te)}))}_checkFinalizedStatuses(te){const{hasError:ce,thrownError:Je,isStopped:qe}=this;ce?te.error(Je):qe&&te.complete()}asObservable(){const te=new I.y;return te.source=this,te}}return we.create=(re,te)=>new ve(re,te),we})();class ve extends Ee{constructor(re,te){super(),this.destination=re,this.source=te}next(re){var te,ce;null===(ce=null===(te=this.destination)||void 0===te?void 0:te.next)||void 0===ce||ce.call(te,re)}error(re){var te,ce;null===(ce=null===(te=this.destination)||void 0===te?void 0:te.error)||void 0===ce||ce.call(te,re)}complete(){var re,te;null===(te=null===(re=this.destination)||void 0===re?void 0:re.complete)||void 0===te||te.call(re)}_subscribe(re){var te,ce;return null!==(ce=null===(te=this.source)||void 0===te?void 0:te.subscribe(re))&&void 0!==ce?ce:j.Lc}}},930:(mt,Te,V)=>{V.d(Te,{Hp:()=>vt,Lv:()=>ce});var I=V(576),j=V(727),p=V(2416),ae=V(7849),ue=V(5032);const fe=we("C",void 0,void 0);function we(Ne,Ue,Be){return{kind:Ne,value:Ue,error:Be}}var re=V(3410),te=V(2806);class ce extends j.w0{constructor(Ue){super(),this.isStopped=!1,Ue?(this.destination=Ue,(0,j.Nn)(Ue)&&Ue.add(this)):this.destination=Ye}static create(Ue,Be,ot){return new vt(Ue,Be,ot)}next(Ue){this.isStopped?He(function ve(Ne){return we("N",Ne,void 0)}(Ue),this):this._next(Ue)}error(Ue){this.isStopped?He(function Ee(Ne){return we("E",void 0,Ne)}(Ue),this):(this.isStopped=!0,this._error(Ue))}complete(){this.isStopped?He(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ue){this.destination.next(Ue)}_error(Ue){try{this.destination.error(Ue)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Je=Function.prototype.bind;function qe(Ne,Ue){return Je.call(Ne,Ue)}class st{constructor(Ue){this.partialObserver=Ue}next(Ue){const{partialObserver:Be}=this;if(Be.next)try{Be.next(Ue)}catch(ot){Oe(ot)}}error(Ue){const{partialObserver:Be}=this;if(Be.error)try{Be.error(Ue)}catch(ot){Oe(ot)}else Oe(Ue)}complete(){const{partialObserver:Ue}=this;if(Ue.complete)try{Ue.complete()}catch(Be){Oe(Be)}}}class vt extends ce{constructor(Ue,Be,ot){let pe;if(super(),(0,I.m)(Ue)||!Ue)pe={next:Ue??void 0,error:Be??void 0,complete:ot??void 0};else{let Ce;this&&p.v.useDeprecatedNextContext?(Ce=Object.create(Ue),Ce.unsubscribe=()=>this.unsubscribe(),pe={next:Ue.next&&qe(Ue.next,Ce),error:Ue.error&&qe(Ue.error,Ce),complete:Ue.complete&&qe(Ue.complete,Ce)}):pe=Ue}this.destination=new st(pe)}}function Oe(Ne){p.v.useDeprecatedSynchronousErrorHandling?(0,te.O)(Ne):(0,ae.h)(Ne)}function He(Ne,Ue){const{onStoppedNotification:Be}=p.v;Be&&re.z.setTimeout(()=>Be(Ne,Ue))}const Ye={closed:!0,next:ue.Z,error:function $e(Ne){throw Ne},complete:ue.Z}},727:(mt,Te,V)=>{V.d(Te,{Lc:()=>fe,w0:()=>ue,Nn:()=>Ee});var I=V(576);const p=(0,V(3888).d)(we=>function(te){we(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((ce,Je)=>`${Je+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te});var ae=V(8737);class ue{constructor(re){this.initialTeardown=re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let re;if(!this.closed){this.closed=!0;const{_parentage:te}=this;if(te)if(this._parentage=null,Array.isArray(te))for(const qe of te)qe.remove(this);else te.remove(this);const{initialTeardown:ce}=this;if((0,I.m)(ce))try{ce()}catch(qe){re=qe instanceof p?qe.errors:[qe]}const{_finalizers:Je}=this;if(Je){this._finalizers=null;for(const qe of Je)try{ve(qe)}catch(st){re=re??[],st instanceof p?re=[...re,...st.errors]:re.push(st)}}if(re)throw new p(re)}}add(re){var te;if(re&&re!==this)if(this.closed)ve(re);else{if(re instanceof ue){if(re.closed||re._hasParent(this))return;re._addParent(this)}(this._finalizers=null!==(te=this._finalizers)&&void 0!==te?te:[]).push(re)}}_hasParent(re){const{_parentage:te}=this;return te===re||Array.isArray(te)&&te.includes(re)}_addParent(re){const{_parentage:te}=this;this._parentage=Array.isArray(te)?(te.push(re),te):te?[te,re]:re}_removeParent(re){const{_parentage:te}=this;te===re?this._parentage=null:Array.isArray(te)&&(0,ae.P)(te,re)}remove(re){const{_finalizers:te}=this;te&&(0,ae.P)(te,re),re instanceof ue&&re._removeParent(this)}}ue.EMPTY=(()=>{const we=new ue;return we.closed=!0,we})();const fe=ue.EMPTY;function Ee(we){return we instanceof ue||we&&"closed"in we&&(0,I.m)(we.remove)&&(0,I.m)(we.add)&&(0,I.m)(we.unsubscribe)}function ve(we){(0,I.m)(we)?we():we.unsubscribe()}},2416:(mt,Te,V)=>{V.d(Te,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(mt,Te,V)=>{V.d(Te,{z:()=>ue});var I=V(8189),p=V(3269),ae=V(8996);function ue(...fe){return function j(){return(0,I.J)(1)}()((0,ae.D)(fe,(0,p.yG)(fe)))}},515:(mt,Te,V)=>{V.d(Te,{E:()=>j});const j=new(V(9751).y)(ue=>ue.complete())},8996:(mt,Te,V)=>{V.d(Te,{D:()=>Ue});var I=V(8421),j=V(5363),p=V(9468),fe=V(9751),ve=V(2202),we=V(576),re=V(9672);function ce(Be,ot){if(!Be)throw new Error("Iterable cannot be null");return new fe.y(pe=>{(0,re.f)(pe,ot,()=>{const Ce=Be[Symbol.asyncIterator]();(0,re.f)(pe,ot,()=>{Ce.next().then(Fe=>{Fe.done?pe.complete():pe.next(Fe.value)})},0,!0)})})}var Je=V(3670),qe=V(8239),st=V(1144),vt=V(6495),Oe=V(2206),$e=V(4532),He=V(3260);function Ue(Be,ot){return ot?function Ne(Be,ot){if(null!=Be){if((0,Je.c)(Be))return function ae(Be,ot){return(0,I.Xf)(Be).pipe((0,p.R)(ot),(0,j.Q)(ot))}(Be,ot);if((0,st.z)(Be))return function Ee(Be,ot){return new fe.y(pe=>{let Ce=0;return ot.schedule(function(){Ce===Be.length?pe.complete():(pe.next(Be[Ce++]),pe.closed||this.schedule())})})}(Be,ot);if((0,qe.t)(Be))return function ue(Be,ot){return(0,I.Xf)(Be).pipe((0,p.R)(ot),(0,j.Q)(ot))}(Be,ot);if((0,Oe.D)(Be))return ce(Be,ot);if((0,vt.T)(Be))return function te(Be,ot){return new fe.y(pe=>{let Ce;return(0,re.f)(pe,ot,()=>{Ce=Be[ve.h](),(0,re.f)(pe,ot,()=>{let Fe,ut;try{({value:Fe,done:ut}=Ce.next())}catch(nt){return void pe.error(nt)}ut?pe.complete():pe.next(Fe)},0,!0)}),()=>(0,we.m)(Ce?.return)&&Ce.return()})}(Be,ot);if((0,He.L)(Be))return function Ye(Be,ot){return ce((0,He.Q)(Be),ot)}(Be,ot)}throw(0,$e.z)(Be)}(Be,ot):(0,I.Xf)(Be)}},8421:(mt,Te,V)=>{V.d(Te,{Xf:()=>Je});var I=V(655),j=V(1144),p=V(8239),ae=V(9751),ue=V(3670),fe=V(2206),Ee=V(4532),ve=V(6495),we=V(3260),re=V(576),te=V(7849),ce=V(8822);function Je(Ne){if(Ne instanceof ae.y)return Ne;if(null!=Ne){if((0,ue.c)(Ne))return function qe(Ne){return new ae.y(Ue=>{const Be=Ne[ce.L]();if((0,re.m)(Be.subscribe))return Be.subscribe(Ue);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,j.z)(Ne))return function st(Ne){return new ae.y(Ue=>{for(let Be=0;Be<Ne.length&&!Ue.closed;Be++)Ue.next(Ne[Be]);Ue.complete()})}(Ne);if((0,p.t)(Ne))return function vt(Ne){return new ae.y(Ue=>{Ne.then(Be=>{Ue.closed||(Ue.next(Be),Ue.complete())},Be=>Ue.error(Be)).then(null,te.h)})}(Ne);if((0,fe.D)(Ne))return $e(Ne);if((0,ve.T)(Ne))return function Oe(Ne){return new ae.y(Ue=>{for(const Be of Ne)if(Ue.next(Be),Ue.closed)return;Ue.complete()})}(Ne);if((0,we.L)(Ne))return function He(Ne){return $e((0,we.Q)(Ne))}(Ne)}throw(0,Ee.z)(Ne)}function $e(Ne){return new ae.y(Ue=>{(function Ye(Ne,Ue){var Be,ot,pe,Ce;return(0,I.mG)(this,void 0,void 0,function*(){try{for(Be=(0,I.KL)(Ne);!(ot=yield Be.next()).done;)if(Ue.next(ot.value),Ue.closed)return}catch(Fe){pe={error:Fe}}finally{try{ot&&!ot.done&&(Ce=Be.return)&&(yield Ce.call(Be))}finally{if(pe)throw pe.error}}Ue.complete()})})(Ne,Ue).catch(Be=>Ue.error(Be))})}},6451:(mt,Te,V)=>{V.d(Te,{T:()=>fe});var I=V(8189),j=V(8421),p=V(515),ae=V(3269),ue=V(8996);function fe(...Ee){const ve=(0,ae.yG)(Ee),we=(0,ae._6)(Ee,1/0),re=Ee;return re.length?1===re.length?(0,j.Xf)(re[0]):(0,I.J)(we)((0,ue.D)(re,ve)):p.E}},9646:(mt,Te,V)=>{V.d(Te,{of:()=>p});var I=V(3269),j=V(8996);function p(...ae){const ue=(0,I.yG)(ae);return(0,j.D)(ae,ue)}},5403:(mt,Te,V)=>{V.d(Te,{x:()=>j});var I=V(930);function j(ae,ue,fe,Ee,ve){return new p(ae,ue,fe,Ee,ve)}class p extends I.Lv{constructor(ue,fe,Ee,ve,we,re){super(ue),this.onFinalize=we,this.shouldUnsubscribe=re,this._next=fe?function(te){try{fe(te)}catch(ce){ue.error(ce)}}:super._next,this._error=ve?function(te){try{ve(te)}catch(ce){ue.error(ce)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(te){ue.error(te)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},6590:(mt,Te,V)=>{V.d(Te,{d:()=>p});var I=V(4482),j=V(5403);function p(ae){return(0,I.e)((ue,fe)=>{let Ee=!1;ue.subscribe((0,j.x)(fe,ve=>{Ee=!0,fe.next(ve)},()=>{Ee||fe.next(ae),fe.complete()}))})}},9300:(mt,Te,V)=>{V.d(Te,{h:()=>p});var I=V(4482),j=V(5403);function p(ae,ue){return(0,I.e)((fe,Ee)=>{let ve=0;fe.subscribe((0,j.x)(Ee,we=>ae.call(ue,we,ve++)&&Ee.next(we)))})}},590:(mt,Te,V)=>{V.d(Te,{P:()=>Ee});var I=V(6805),j=V(9300),p=V(5698),ae=V(6590),ue=V(8068),fe=V(4671);function Ee(ve,we){const re=arguments.length>=2;return te=>te.pipe(ve?(0,j.h)((ce,Je)=>ve(ce,Je,te)):fe.y,(0,p.q)(1),re?(0,ae.d)(we):(0,ue.T)(()=>new I.K))}},4004:(mt,Te,V)=>{V.d(Te,{U:()=>p});var I=V(4482),j=V(5403);function p(ae,ue){return(0,I.e)((fe,Ee)=>{let ve=0;fe.subscribe((0,j.x)(Ee,we=>{Ee.next(ae.call(ue,we,ve++))}))})}},8189:(mt,Te,V)=>{V.d(Te,{J:()=>p});var I=V(5577),j=V(4671);function p(ae=1/0){return(0,I.z)(j.y,ae)}},5577:(mt,Te,V)=>{V.d(Te,{z:()=>ve});var I=V(4004),j=V(8421),p=V(4482),ae=V(9672),ue=V(5403),Ee=V(576);function ve(we,re,te=1/0){return(0,Ee.m)(re)?ve((ce,Je)=>(0,I.U)((qe,st)=>re(ce,qe,Je,st))((0,j.Xf)(we(ce,Je))),te):("number"==typeof re&&(te=re),(0,p.e)((ce,Je)=>function fe(we,re,te,ce,Je,qe,st,vt){const Oe=[];let $e=0,He=0,Ye=!1;const Ne=()=>{Ye&&!Oe.length&&!$e&&re.complete()},Ue=ot=>$e<ce?Be(ot):Oe.push(ot),Be=ot=>{qe&&re.next(ot),$e++;let pe=!1;(0,j.Xf)(te(ot,He++)).subscribe((0,ue.x)(re,Ce=>{Je?.(Ce),qe?Ue(Ce):re.next(Ce)},()=>{pe=!0},void 0,()=>{if(pe)try{for($e--;Oe.length&&$e<ce;){const Ce=Oe.shift();st?(0,ae.f)(re,st,()=>Be(Ce)):Be(Ce)}Ne()}catch(Ce){re.error(Ce)}}))};return we.subscribe((0,ue.x)(re,Ue,()=>{Ye=!0,Ne()})),()=>{vt?.()}}(ce,Je,we,te)))}},5363:(mt,Te,V)=>{V.d(Te,{Q:()=>ae});var I=V(9672),j=V(4482),p=V(5403);function ae(ue,fe=0){return(0,j.e)((Ee,ve)=>{Ee.subscribe((0,p.x)(ve,we=>(0,I.f)(ve,ue,()=>ve.next(we),fe),()=>(0,I.f)(ve,ue,()=>ve.complete(),fe),we=>(0,I.f)(ve,ue,()=>ve.error(we),fe)))})}},5026:(mt,Te,V)=>{V.d(Te,{R:()=>ae});var I=V(4482),j=V(5403);function p(ue,fe,Ee,ve,we){return(re,te)=>{let ce=Ee,Je=fe,qe=0;re.subscribe((0,j.x)(te,st=>{const vt=qe++;Je=ce?ue(Je,st,vt):(ce=!0,st),ve&&te.next(Je)},we&&(()=>{ce&&te.next(Je),te.complete()})))}}function ae(ue,fe){return(0,I.e)(p(ue,fe,arguments.length>=2,!0))}},3099:(mt,Te,V)=>{V.d(Te,{B:()=>ue});var I=V(8421),j=V(7579),p=V(930),ae=V(4482);function ue(Ee={}){const{connector:ve=(()=>new j.x),resetOnError:we=!0,resetOnComplete:re=!0,resetOnRefCountZero:te=!0}=Ee;return ce=>{let Je,qe,st,vt=0,Oe=!1,$e=!1;const He=()=>{qe?.unsubscribe(),qe=void 0},Ye=()=>{He(),Je=st=void 0,Oe=$e=!1},Ne=()=>{const Ue=Je;Ye(),Ue?.unsubscribe()};return(0,ae.e)((Ue,Be)=>{vt++,!$e&&!Oe&&He();const ot=st=st??ve();Be.add(()=>{vt--,0===vt&&!$e&&!Oe&&(qe=fe(Ne,te))}),ot.subscribe(Be),!Je&&vt>0&&(Je=new p.Hp({next:pe=>ot.next(pe),error:pe=>{$e=!0,He(),qe=fe(Ye,we,pe),ot.error(pe)},complete:()=>{Oe=!0,He(),qe=fe(Ye,re),ot.complete()}}),(0,I.Xf)(Ue).subscribe(Je))})(ce)}}function fe(Ee,ve,...we){if(!0===ve)return void Ee();if(!1===ve)return;const re=new p.Hp({next:()=>{re.unsubscribe(),Ee()}});return(0,I.Xf)(ve(...we)).subscribe(re)}},8675:(mt,Te,V)=>{V.d(Te,{O:()=>ae});var I=V(7272),j=V(3269),p=V(4482);function ae(...ue){const fe=(0,j.yG)(ue);return(0,p.e)((Ee,ve)=>{(fe?(0,I.z)(ue,Ee,fe):(0,I.z)(ue,Ee)).subscribe(ve)})}},9468:(mt,Te,V)=>{V.d(Te,{R:()=>j});var I=V(4482);function j(p,ae=0){return(0,I.e)((ue,fe)=>{fe.add(p.schedule(()=>ue.subscribe(fe),ae))})}},3900:(mt,Te,V)=>{V.d(Te,{w:()=>ae});var I=V(8421),j=V(4482),p=V(5403);function ae(ue,fe){return(0,j.e)((Ee,ve)=>{let we=null,re=0,te=!1;const ce=()=>te&&!we&&ve.complete();Ee.subscribe((0,p.x)(ve,Je=>{we?.unsubscribe();let qe=0;const st=re++;(0,I.Xf)(ue(Je,st)).subscribe(we=(0,p.x)(ve,vt=>ve.next(fe?fe(Je,vt,st,qe++):vt),()=>{we=null,ce()}))},()=>{te=!0,ce()}))})}},5698:(mt,Te,V)=>{V.d(Te,{q:()=>ae});var I=V(515),j=V(4482),p=V(5403);function ae(ue){return ue<=0?()=>I.E:(0,j.e)((fe,Ee)=>{let ve=0;fe.subscribe((0,p.x)(Ee,we=>{++ve<=ue&&(Ee.next(we),ue<=ve&&Ee.complete())}))})}},8505:(mt,Te,V)=>{V.d(Te,{b:()=>ue});var I=V(576),j=V(4482),p=V(5403),ae=V(4671);function ue(fe,Ee,ve){const we=(0,I.m)(fe)||Ee||ve?{next:fe,error:Ee,complete:ve}:fe;return we?(0,j.e)((re,te)=>{var ce;null===(ce=we.subscribe)||void 0===ce||ce.call(we);let Je=!0;re.subscribe((0,p.x)(te,qe=>{var st;null===(st=we.next)||void 0===st||st.call(we,qe),te.next(qe)},()=>{var qe;Je=!1,null===(qe=we.complete)||void 0===qe||qe.call(we),te.complete()},qe=>{var st;Je=!1,null===(st=we.error)||void 0===st||st.call(we,qe),te.error(qe)},()=>{var qe,st;Je&&(null===(qe=we.unsubscribe)||void 0===qe||qe.call(we)),null===(st=we.finalize)||void 0===st||st.call(we)}))}):ae.y}},8068:(mt,Te,V)=>{V.d(Te,{T:()=>ae});var I=V(6805),j=V(4482),p=V(5403);function ae(fe=ue){return(0,j.e)((Ee,ve)=>{let we=!1;Ee.subscribe((0,p.x)(ve,re=>{we=!0,ve.next(re)},()=>we?ve.complete():ve.error(fe())))})}function ue(){return new I.K}},4408:(mt,Te,V)=>{V.d(Te,{o:()=>ue});var I=V(727);class j extends I.w0{constructor(Ee,ve){super()}schedule(Ee,ve=0){return this}}const p={setInterval(fe,Ee,...ve){const{delegate:we}=p;return we?.setInterval?we.setInterval(fe,Ee,...ve):setInterval(fe,Ee,...ve)},clearInterval(fe){const{delegate:Ee}=p;return(Ee?.clearInterval||clearInterval)(fe)},delegate:void 0};var ae=V(8737);class ue extends j{constructor(Ee,ve){super(Ee,ve),this.scheduler=Ee,this.work=ve,this.pending=!1}schedule(Ee,ve=0){var we;if(this.closed)return this;this.state=Ee;const re=this.id,te=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(te,re,ve)),this.pending=!0,this.delay=ve,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(te,this.id,ve),this}requestAsyncId(Ee,ve,we=0){return p.setInterval(Ee.flush.bind(Ee,this),we)}recycleAsyncId(Ee,ve,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return ve;null!=ve&&p.clearInterval(ve)}execute(Ee,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(Ee,ve);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,ve){let re,we=!1;try{this.work(Ee)}catch(te){we=!0,re=te||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),re}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:ve}=this,{actions:we}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(we,this),null!=Ee&&(this.id=this.recycleAsyncId(ve,Ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,Te,V)=>{V.d(Te,{v:()=>p});var I=V(6063);class j{constructor(ue,fe=j.now){this.schedulerActionCtor=ue,this.now=fe}schedule(ue,fe=0,Ee){return new this.schedulerActionCtor(this,ue).schedule(Ee,fe)}}j.now=I.l.now;class p extends j{constructor(ue,fe=j.now){super(ue,fe),this.actions=[],this._active=!1}flush(ue){const{actions:fe}=this;if(this._active)return void fe.push(ue);let Ee;this._active=!0;do{if(Ee=ue.execute(ue.state,ue.delay))break}while(ue=fe.shift());if(this._active=!1,Ee){for(;ue=fe.shift();)ue.unsubscribe();throw Ee}}}},4986:(mt,Te,V)=>{V.d(Te,{P:()=>ae,z:()=>p});var I=V(4408);const p=new(V(7565).v)(I.o),ae=p},6063:(mt,Te,V)=>{V.d(Te,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},3410:(mt,Te,V)=>{V.d(Te,{z:()=>I});const I={setTimeout(j,p,...ae){const{delegate:ue}=I;return ue?.setTimeout?ue.setTimeout(j,p,...ae):setTimeout(j,p,...ae)},clearTimeout(j){const{delegate:p}=I;return(p?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(mt,Te,V)=>{V.d(Te,{h:()=>j});const j=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,Te,V)=>{V.d(Te,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(mt,Te,V)=>{V.d(Te,{K:()=>j});const j=(0,V(3888).d)(p=>function(){p(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(mt,Te,V)=>{V.d(Te,{_6:()=>fe,jO:()=>ae,yG:()=>ue});var I=V(576),j=V(3532);function p(Ee){return Ee[Ee.length-1]}function ae(Ee){return(0,I.m)(p(Ee))?Ee.pop():void 0}function ue(Ee){return(0,j.K)(p(Ee))?Ee.pop():void 0}function fe(Ee,ve){return"number"==typeof p(Ee)?Ee.pop():ve}},4742:(mt,Te,V)=>{V.d(Te,{D:()=>ue});const{isArray:I}=Array,{getPrototypeOf:j,prototype:p,keys:ae}=Object;function ue(Ee){if(1===Ee.length){const ve=Ee[0];if(I(ve))return{args:ve,keys:null};if(function fe(Ee){return Ee&&"object"==typeof Ee&&j(Ee)===p}(ve)){const we=ae(ve);return{args:we.map(re=>ve[re]),keys:we}}}return{args:Ee,keys:null}}},8737:(mt,Te,V)=>{function I(j,p){if(j){const ae=j.indexOf(p);0<=ae&&j.splice(ae,1)}}V.d(Te,{P:()=>I})},3888:(mt,Te,V)=>{function I(j){const ae=j(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}V.d(Te,{d:()=>I})},1810:(mt,Te,V)=>{function I(j,p){return j.reduce((ae,ue,fe)=>(ae[ue]=p[fe],ae),{})}V.d(Te,{n:()=>I})},2806:(mt,Te,V)=>{V.d(Te,{O:()=>ae,x:()=>p});var I=V(2416);let j=null;function p(ue){if(I.v.useDeprecatedSynchronousErrorHandling){const fe=!j;if(fe&&(j={errorThrown:!1,error:null}),ue(),fe){const{errorThrown:Ee,error:ve}=j;if(j=null,Ee)throw ve}}else ue()}function ae(ue){I.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ue)}},9672:(mt,Te,V)=>{function I(j,p,ae,ue=0,fe=!1){const Ee=p.schedule(function(){ae(),fe?j.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(j.add(Ee),!fe)return Ee}V.d(Te,{f:()=>I})},4671:(mt,Te,V)=>{function I(j){return j}V.d(Te,{y:()=>I})},1144:(mt,Te,V)=>{V.d(Te,{z:()=>I});const I=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(mt,Te,V)=>{V.d(Te,{D:()=>j});var I=V(576);function j(p){return Symbol.asyncIterator&&(0,I.m)(p?.[Symbol.asyncIterator])}},576:(mt,Te,V)=>{function I(j){return"function"==typeof j}V.d(Te,{m:()=>I})},3670:(mt,Te,V)=>{V.d(Te,{c:()=>p});var I=V(8822),j=V(576);function p(ae){return(0,j.m)(ae[I.L])}},6495:(mt,Te,V)=>{V.d(Te,{T:()=>p});var I=V(2202),j=V(576);function p(ae){return(0,j.m)(ae?.[I.h])}},8239:(mt,Te,V)=>{V.d(Te,{t:()=>j});var I=V(576);function j(p){return(0,I.m)(p?.then)}},3260:(mt,Te,V)=>{V.d(Te,{L:()=>ae,Q:()=>p});var I=V(655),j=V(576);function p(ue){return(0,I.FC)(this,arguments,function*(){const Ee=ue.getReader();try{for(;;){const{value:ve,done:we}=yield(0,I.qq)(Ee.read());if(we)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(ve)}}finally{Ee.releaseLock()}})}function ae(ue){return(0,j.m)(ue?.getReader)}},3532:(mt,Te,V)=>{V.d(Te,{K:()=>j});var I=V(576);function j(p){return p&&(0,I.m)(p.schedule)}},4482:(mt,Te,V)=>{V.d(Te,{A:()=>j,e:()=>p});var I=V(576);function j(ae){return(0,I.m)(ae?.lift)}function p(ae){return ue=>{if(j(ue))return ue.lift(function(fe){try{return ae(fe,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(mt,Te,V)=>{V.d(Te,{Z:()=>ae});var I=V(4004);const{isArray:j}=Array;function ae(ue){return(0,I.U)(fe=>function p(ue,fe){return j(fe)?ue(...fe):ue(fe)}(ue,fe))}},5032:(mt,Te,V)=>{function I(){}V.d(Te,{Z:()=>I})},9635:(mt,Te,V)=>{V.d(Te,{U:()=>p,z:()=>j});var I=V(4671);function j(...ae){return p(ae)}function p(ae){return 0===ae.length?I.y:1===ae.length?ae[0]:function(fe){return ae.reduce((Ee,ve)=>ve(Ee),fe)}}},7849:(mt,Te,V)=>{V.d(Te,{h:()=>p});var I=V(2416),j=V(3410);function p(ae){j.z.setTimeout(()=>{const{onUnhandledError:ue}=I.v;if(!ue)throw ae;ue(ae)})}},4532:(mt,Te,V)=>{function I(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Te,{z:()=>I})},655:(mt,Te,V)=>{function ae(De,xe){var Pe={};for(var Ge in De)Object.prototype.hasOwnProperty.call(De,Ge)&&xe.indexOf(Ge)<0&&(Pe[Ge]=De[Ge]);if(null!=De&&"function"==typeof Object.getOwnPropertySymbols){var et=0;for(Ge=Object.getOwnPropertySymbols(De);et<Ge.length;et++)xe.indexOf(Ge[et])<0&&Object.prototype.propertyIsEnumerable.call(De,Ge[et])&&(Pe[Ge[et]]=De[Ge[et]])}return Pe}function ce(De,xe,Pe,Ge){return new(Pe||(Pe=Promise))(function(tt,ct){function ft(Tt){try{me(Ge.next(Tt))}catch(yt){ct(yt)}}function yn(Tt){try{me(Ge.throw(Tt))}catch(yt){ct(yt)}}function me(Tt){Tt.done?tt(Tt.value):function et(tt){return tt instanceof Pe?tt:new Pe(function(ct){ct(tt)})}(Tt.value).then(ft,yn)}me((Ge=Ge.apply(De,xe||[])).next())})}function Ne(De){return this instanceof Ne?(this.v=De,this):new Ne(De)}function Ue(De,xe,Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,Ge=Pe.apply(De,xe||[]),tt=[];return et={},ct("next"),ct("throw"),ct("return"),et[Symbol.asyncIterator]=function(){return this},et;function ct(St){Ge[St]&&(et[St]=function(Mn){return new Promise(function(In,cn){tt.push([St,Mn,In,cn])>1||ft(St,Mn)})})}function ft(St,Mn){try{!function yn(St){St.value instanceof Ne?Promise.resolve(St.value.v).then(me,Tt):yt(tt[0][2],St)}(Ge[St](Mn))}catch(In){yt(tt[0][3],In)}}function me(St){ft("next",St)}function Tt(St){ft("throw",St)}function yt(St,Mn){St(Mn),tt.shift(),tt.length&&ft(tt[0][0],tt[0][1])}}function ot(De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,xe=De[Symbol.asyncIterator];return xe?xe.call(De):(De=function vt(De){var xe="function"==typeof Symbol&&Symbol.iterator,Pe=xe&&De[xe],Ge=0;if(Pe)return Pe.call(De);if(De&&"number"==typeof De.length)return{next:function(){return De&&Ge>=De.length&&(De=void 0),{value:De&&De[Ge++],done:!De}}};throw new TypeError(xe?"Object is not iterable.":"Symbol.iterator is not defined.")}(De),Pe={},Ge("next"),Ge("throw"),Ge("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe);function Ge(tt){Pe[tt]=De[tt]&&function(ct){return new Promise(function(ft,yn){!function et(tt,ct,ft,yn){Promise.resolve(yn).then(function(me){tt({value:me,done:ft})},ct)}(ft,yn,(ct=De[tt](ct)).done,ct.value)})}}}V.d(Te,{FC:()=>Ue,KL:()=>ot,_T:()=>ae,mG:()=>ce,qq:()=>Ne})},6895:(mt,Te,V)=>{V.d(Te,{Do:()=>He,ED:()=>lr,EM:()=>eo,HT:()=>ae,JF:()=>At,K0:()=>fe,Mx:()=>ni,NF:()=>cs,O5:()=>Ai,PM:()=>xa,RF:()=>Wi,S$:()=>vt,V_:()=>we,Ye:()=>Ye,b0:()=>$e,bD:()=>gi,ez:()=>us,gd:()=>ri,mk:()=>Zt,n9:()=>Dr,q:()=>p,sg:()=>zi,w_:()=>ue});var I=V(4650);let j=null;function p(){return j}function ae(T){j||(j=T)}class ue{}const fe=new I.OlP("DocumentToken");let Ee=(()=>{class T{historyGo(x){throw new Error("Not implemented")}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:function(){return function ve(){return(0,I.LFG)(re)}()},providedIn:"platform"}),T})();const we=new I.OlP("Location Initialized");let re=(()=>{class T extends Ee{constructor(x){super(),this._doc=x,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return p().getBaseHref(this._doc)}onPopState(x){const H=p().getGlobalEventTarget(this._doc,"window");return H.addEventListener("popstate",x,!1),()=>H.removeEventListener("popstate",x)}onHashChange(x){const H=p().getGlobalEventTarget(this._doc,"window");return H.addEventListener("hashchange",x,!1),()=>H.removeEventListener("hashchange",x)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(x){this._location.pathname=x}pushState(x,H,J){te()?this._history.pushState(x,H,J):this._location.hash=J}replaceState(x,H,J){te()?this._history.replaceState(x,H,J):this._location.hash=J}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return T.\u0275fac=function(x){return new(x||T)(I.LFG(fe))},T.\u0275prov=I.Yz7({token:T,factory:function(){return function ce(){return new re((0,I.LFG)(fe))}()},providedIn:"platform"}),T})();function te(){return!!window.history.pushState}function Je(T,F){if(0==T.length)return F;if(0==F.length)return T;let x=0;return T.endsWith("/")&&x++,F.startsWith("/")&&x++,2==x?T+F.substring(1):1==x?T+F:T+"/"+F}function qe(T){const F=T.match(/#|\?|$/),x=F&&F.index||T.length;return T.slice(0,x-("/"===T[x-1]?1:0))+T.slice(x)}function st(T){return T&&"?"!==T[0]?"?"+T:T}let vt=(()=>{class T{historyGo(x){throw new Error("Not implemented")}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:function(){return(0,I.f3M)($e)},providedIn:"root"}),T})();const Oe=new I.OlP("appBaseHref");let $e=(()=>{class T extends vt{constructor(x,H){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=H??this._platformLocation.getBaseHrefFromDOM()??(0,I.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return Je(this._baseHref,x)}path(x=!1){const H=this._platformLocation.pathname+st(this._platformLocation.search),J=this._platformLocation.hash;return J&&x?`${H}${J}`:H}pushState(x,H,J,Se){const Re=this.prepareExternalUrl(J+st(Se));this._platformLocation.pushState(x,H,Re)}replaceState(x,H,J,Se){const Re=this.prepareExternalUrl(J+st(Se));this._platformLocation.replaceState(x,H,Re)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return T.\u0275fac=function(x){return new(x||T)(I.LFG(Ee),I.LFG(Oe,8))},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),He=(()=>{class T extends vt{constructor(x,H){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=H&&(this._baseHref=H)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let H=this._platformLocation.hash;return null==H&&(H="#"),H.length>0?H.substring(1):H}prepareExternalUrl(x){const H=Je(this._baseHref,x);return H.length>0?"#"+H:H}pushState(x,H,J,Se){let Re=this.prepareExternalUrl(J+st(Se));0==Re.length&&(Re=this._platformLocation.pathname),this._platformLocation.pushState(x,H,Re)}replaceState(x,H,J,Se){let Re=this.prepareExternalUrl(J+st(Se));0==Re.length&&(Re=this._platformLocation.pathname),this._platformLocation.replaceState(x,H,Re)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return T.\u0275fac=function(x){return new(x||T)(I.LFG(Ee),I.LFG(Oe,8))},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac}),T})(),Ye=(()=>{class T{constructor(x){this._subject=new I.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const H=this._locationStrategy.getBaseHref();this._basePath=function ot(T){if(new RegExp("^(https?:)?//").test(T)){const[,x]=T.split(/\/\/[^\/]+/);return x}return T}(qe(Be(H))),this._locationStrategy.onPopState(J=>{this._subject.emit({url:this.path(!0),pop:!0,state:J.state,type:J.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,H=""){return this.path()==this.normalize(x+st(H))}normalize(x){return T.stripTrailingSlash(function Ue(T,F){return T&&new RegExp(`^${T}([/;?#]|$)`).test(F)?F.substring(T.length):F}(this._basePath,Be(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,H="",J=null){this._locationStrategy.pushState(J,"",x,H),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+st(H)),J)}replaceState(x,H="",J=null){this._locationStrategy.replaceState(J,"",x,H),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+st(H)),J)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(H=>{this._notifyUrlChangeListeners(H.url,H.state)})),()=>{const H=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(H,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",H){this._urlChangeListeners.forEach(J=>J(x,H))}subscribe(x,H,J){return this._subject.subscribe({next:x,error:H,complete:J})}}return T.normalizeQueryParams=st,T.joinWithSlash=Je,T.stripTrailingSlash=qe,T.\u0275fac=function(x){return new(x||T)(I.LFG(vt))},T.\u0275prov=I.Yz7({token:T,factory:function(){return function Ne(){return new Ye((0,I.LFG)(vt))}()},providedIn:"root"}),T})();function Be(T){return T.replace(/\/index.html$/,"")}function ni(T,F){F=encodeURIComponent(F);for(const x of T.split(";")){const H=x.indexOf("="),[J,Se]=-1==H?[x,""]:[x.slice(0,H),x.slice(H+1)];if(J.trim()===F)return decodeURIComponent(Se)}return null}const ai=/\s+/,It=[];let Zt=(()=>{class T{constructor(x,H,J,Se){this._iterableDiffers=x,this._keyValueDiffers=H,this._ngEl=J,this._renderer=Se,this.initialClasses=It,this.stateMap=new Map}set klass(x){this.initialClasses=null!=x?x.trim().split(ai):It}set ngClass(x){this.rawClass="string"==typeof x?x.trim().split(ai):x}ngDoCheck(){for(const H of this.initialClasses)this._updateState(H,!0);const x=this.rawClass;if(Array.isArray(x)||x instanceof Set)for(const H of x)this._updateState(H,!0);else if(null!=x)for(const H of Object.keys(x))this._updateState(H,Boolean(x[H]));this._applyStateDiff()}_updateState(x,H){const J=this.stateMap.get(x);void 0!==J?(J.enabled!==H&&(J.changed=!0,J.enabled=H),J.touched=!0):this.stateMap.set(x,{enabled:H,changed:!0,touched:!0})}_applyStateDiff(){for(const x of this.stateMap){const H=x[0],J=x[1];J.changed?(this._toggleClass(H,J.enabled),J.changed=!1):J.touched||(J.enabled&&this._toggleClass(H,!1),this.stateMap.delete(H)),J.touched=!1}}_toggleClass(x,H){(x=x.trim()).length>0&&x.split(ai).forEach(J=>{H?this._renderer.addClass(this._ngEl.nativeElement,J):this._renderer.removeClass(this._ngEl.nativeElement,J)})}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),T})();class cr{constructor(F,x,H,J){this.$implicit=F,this.ngForOf=x,this.index=H,this.count=J}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zi=(()=>{class T{set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}constructor(x,H,J){this._viewContainer=x,this._template=H,this._differs=J,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const H=this._viewContainer;x.forEachOperation((J,Se,Re)=>{if(null==J.previousIndex)H.createEmbeddedView(this._template,new cr(J.item,this._ngForOf,-1,-1),null===Re?void 0:Re);else if(null==Re)H.remove(null===Se?void 0:Se);else if(null!==Se){const Rt=H.get(Se);H.move(Rt,Re),kn(Rt,J)}});for(let J=0,Se=H.length;J<Se;J++){const Rt=H.get(J).context;Rt.index=J,Rt.count=Se,Rt.ngForOf=this._ngForOf}x.forEachIdentityChange(J=>{kn(H.get(J.currentIndex),J)})}static ngTemplateContextGuard(x,H){return!0}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function kn(T,F){T.context.$implicit=F.item}let Ai=(()=>{class T{constructor(x,H){this._viewContainer=x,this._context=new sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=H}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Qs("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Qs("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,H){return!0}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.s_b),I.Y36(I.Rgc))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class sn{constructor(){this.$implicit=null,this.ngIf=null}}function Qs(T,F){if(F&&!F.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,I.AaK)(F)}'.`)}class Ts{constructor(F,x){this._viewContainerRef=F,this._templateRef=x,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(F){F&&!this._created?this.create():!F&&this._created&&this.destroy()}}let Wi=(()=>{class T{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(x){this._ngSwitch=x,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(x){this._defaultViews.push(x)}_matchCase(x){const H=x==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||H,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),H}_updateDefaultCases(x){if(this._defaultViews.length>0&&x!==this._defaultUsed){this._defaultUsed=x;for(const H of this._defaultViews)H.enforceState(x)}}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275dir=I.lG2({type:T,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),T})(),Dr=(()=>{class T{constructor(x,H,J){this.ngSwitch=J,J._addCase(),this._view=new Ts(x,H)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(Wi,9))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),T})(),lr=(()=>{class T{constructor(x,H,J){J._addDefault(new Ts(x,H))}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(Wi,9))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngSwitchDefault",""]],standalone:!0}),T})();let ri=(()=>{class T{transform(x){if(null==x)return null;if("string"!=typeof x)throw function yr(T,F){return new I.vHH(2100,!1)}();return x.toUpperCase()}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275pipe=I.Yjl({name:"uppercase",type:T,pure:!0,standalone:!0}),T})(),us=(()=>{class T{}return T.\u0275fac=function(x){return new(x||T)},T.\u0275mod=I.oAB({type:T}),T.\u0275inj=I.cJS({}),T})();const gi="browser";function cs(T){return T===gi}function xa(T){return"server"===T}let eo=(()=>{class T{}return T.\u0275prov=(0,I.Yz7)({token:T,providedIn:"root",factory:()=>new oa((0,I.LFG)(fe),window)}),T})();class oa{constructor(F,x){this.document=F,this.window=x,this.offset=()=>[0,0]}setOffset(F){this.offset=Array.isArray(F)?()=>F:F}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(F){this.supportsScrolling()&&this.window.scrollTo(F[0],F[1])}scrollToAnchor(F){if(!this.supportsScrolling())return;const x=function Do(T,F){const x=T.getElementById(F)||T.getElementsByName(F)[0];if(x)return x;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const H=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let J=H.currentNode;for(;J;){const Se=J.shadowRoot;if(Se){const Re=Se.getElementById(F)||Se.querySelector(`[name="${F}"]`);if(Re)return Re}J=H.nextNode()}}return null}(this.document,F);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(F){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=F)}}scrollToElement(F){const x=F.getBoundingClientRect(),H=x.left+this.window.pageXOffset,J=x.top+this.window.pageYOffset,Se=this.offset();this.window.scrollTo(H-Se[0],J-Se[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const F=xs(this.window.history)||xs(Object.getPrototypeOf(this.window.history));return!(!F||!F.writable&&!F.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xs(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class At{}},4650:(mt,Te,V)=>{V.d(Te,{$8M:()=>Ro,$WT:()=>Gn,$Z:()=>g_,AFp:()=>qy,ALo:()=>rf,AaK:()=>ve,AsE:()=>jp,CHM:()=>Oa,CRH:()=>ZI,CZH:()=>nu,CqO:()=>Dp,D6c:()=>SD,DdM:()=>nf,EJc:()=>OE,EpF:()=>Fh,F$t:()=>yd,F4k:()=>Ip,FYo:()=>Kl,FiY:()=>qr,Gf:()=>aE,GfV:()=>yh,Gpc:()=>te,Gre:()=>Hp,Hsn:()=>Tp,JOm:()=>Kr,Jf7:()=>um,KtG:()=>Na,LFG:()=>at,LSH:()=>tm,Lbi:()=>xE,Lck:()=>Ty,MGl:()=>Sp,MMx:()=>Xh,NdJ:()=>bp,O4$:()=>Go,OlP:()=>Fn,Oqu:()=>Up,P3R:()=>or,PXZ:()=>gD,Q6J:()=>_p,QGY:()=>Lh,Qsj:()=>_w,R0b:()=>na,RDi:()=>uw,Rgc:()=>Ia,SBq:()=>Zl,Sil:()=>PE,Suo:()=>uE,TTD:()=>Js,TgZ:()=>Ep,Udp:()=>$h,VKq:()=>Y0,X6Q:()=>rb,XFs:()=>pt,Xpm:()=>ir,Xts:()=>$i,Y36:()=>sd,YKP:()=>sg,YNc:()=>Ph,Yjl:()=>yo,Yz7:()=>yt,Z0I:()=>cn,ZZ4:()=>ew,_Bn:()=>G0,_UZ:()=>wp,_Vd:()=>Ya,_c5:()=>TD,_uU:()=>u0,aQg:()=>Og,c2e:()=>ME,cJS:()=>Mn,cg1:()=>gy,dDg:()=>Cg,dqk:()=>Nt,eFA:()=>Tg,ekj:()=>Ym,eoX:()=>UE,f3M:()=>_t,g9A:()=>sD,h0i:()=>Md,hGG:()=>rw,hYB:()=>zm,hij:()=>Bp,iGM:()=>oE,ifc:()=>ke,ip1:()=>AE,jDz:()=>W0,kL8:()=>_0,kcU:()=>gn,lG2:()=>Bo,lcZ:()=>BI,lnq:()=>$p,lqb:()=>Ka,lri:()=>Bd,n5z:()=>lc,oAB:()=>Ti,oxw:()=>Hm,q4F:()=>vh,qLn:()=>Yl,qOj:()=>wu,qZA:()=>pd,rWj:()=>bg,sBO:()=>rv,s_b:()=>fg,soG:()=>lf,tb:()=>Ky,tp0:()=>R,uIk:()=>km,vHH:()=>Oe,vpe:()=>xu,wAp:()=>Kt,xp6:()=>dm,z2F:()=>gf,zSh:()=>fh,zs3:()=>js});var I=V(7579),j=V(727),p=V(9751),ae=V(6451),ue=V(3099);function fe(r){for(let s in r)if(r[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function Ee(r,s){for(const o in s)s.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=s[o])}function ve(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ve).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function we(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const re=fe({__forward_ref__:fe});function te(r){return r.__forward_ref__=te,r.toString=function(){return ve(this())},r}function ce(r){return Je(r)?r():r}function Je(r){return"function"==typeof r&&r.hasOwnProperty(re)&&r.__forward_ref__===te}function qe(r){return r&&!!r.\u0275providers}const vt="https://g.co/ng/security#xss";class Oe extends Error{constructor(s,o){super(function $e(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function He(r){return"string"==typeof r?r:null==r?"":String(r)}function ot(r,s){throw new Oe(-201,!1)}function ct(r,s){null==r&&function ft(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function yt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Mn(r){return{providers:r.providers||[],imports:r.imports||[]}}function In(r){return Zn(r,Rr)||Zn(r,Ln)}function cn(r){return null!==In(r)}function Zn(r,s){return r.hasOwnProperty(s)?r[s]:null}function Pn(r){return r&&(r.hasOwnProperty(ar)||r.hasOwnProperty(pr))?r[ar]:null}const Rr=fe({\u0275prov:fe}),ar=fe({\u0275inj:fe}),Ln=fe({ngInjectableDef:fe}),pr=fe({ngInjectorDef:fe});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let gr;function Jn(r){const s=gr;return gr=r,s}function er(r,s,o){const u=In(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&pt.Optional?null:void 0!==s?s:void ot(ve(r))}const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),vn={},Kn="__NG_DI_FLAG__",mr="ngTempTokenPath",ei=/\n/gm,ti="__source";let qt;function Ut(r){const s=qt;return qt=r,s}function Vn(r,s=pt.Default){if(void 0===qt)throw new Oe(-203,!1);return null===qt?er(r,void 0,s):qt.get(r,s&pt.Optional?null:void 0,s)}function at(r,s=pt.Default){return(function wr(){return gr}()||Vn)(ce(r),s)}function _t(r,s=pt.Default){return at(r,Pt(s))}function Pt(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function $t(r){const s=[];for(let o=0;o<r.length;o++){const u=ce(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Oe(900,!1);let c,h=pt.Default;for(let y=0;y<u.length;y++){const D=u[y],S=jn(D);"number"==typeof S?-1===S?c=D.token:h|=S:c=D}s.push(at(c,h))}else s.push(at(u))}return s}function on(r,s){return r[Kn]=s,r.prototype[Kn]=s,r}function jn(r){return r[Kn]}function q(r){return{toString:r}.toString()}var Z=(()=>((Z=Z||{})[Z.OnPush=0]="OnPush",Z[Z.Default=1]="Default",Z))(),ke=(()=>{return(r=ke||(ke={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",ke;var r})();const gt={},oe=[],ie=fe({\u0275cmp:fe}),K=fe({\u0275dir:fe}),de=fe({\u0275pipe:fe}),ze=fe({\u0275mod:fe}),rt=fe({\u0275fac:fe}),Ht=fe({__NG_ELEMENT_ID__:fe});let rr=0;function ir(r){return q(()=>{const o=!0===r.standalone,u={},c={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Z.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||oe,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||ke.Emulated,id:"c"+rr++,styles:r.styles||oe,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=r.dependencies,y=r.features;return c.inputs=Ys(r.inputs,u),c.outputs=Ys(r.outputs),y&&y.forEach(D=>D(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Gi).filter(Ir):null,c.pipeDefs=h?()=>("function"==typeof h?h():h).map(ur).filter(Ir):null,c})}function Gi(r){return bn(r)||Bn(r)}function Ir(r){return null!==r}function Ti(r){return q(()=>({type:r.type,bootstrap:r.bootstrap||oe,declarations:r.declarations||oe,imports:r.imports||oe,exports:r.exports||oe,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Ys(r,s){if(null==r)return gt;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=u,s&&(s[c]=h)}return o}const Bo=ir;function yo(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function bn(r){return r[ie]||null}function Bn(r){return r[K]||null}function ur(r){return r[de]||null}function Gn(r){const s=bn(r)||Bn(r)||ur(r);return null!==s&&s.standalone}function ni(r,s){const o=r[ze]||null;if(!o&&!0===s)throw new Error(`Type ${ve(r)} does not have '\u0275mod' property.`);return o}function Mi(r){return Array.isArray(r)&&"object"==typeof r[1]}function ri(r){return Array.isArray(r)&&!0===r[1]}function as(r){return 0!=(4&r.flags)}function Ta(r){return r.componentOffset>-1}function iu(r){return 1==(1&r.flags)}function $r(r){return null!==r.template}function $c(r){return 0!=(256&r[2])}function ls(r,s){return r.hasOwnProperty(rt)?r[rt]:null}class As{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Js(){return eo}function eo(r){return r.type.prototype.ngOnChanges&&(r.setInput=xs),oa}function oa(){const r=Hr(this),s=r?.current;if(s){const o=r.previous;if(o===gt)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function xs(r,s,o,u){const c=this.declaredInputs[o],h=Hr(r)||function At(r,s){return r[Do]=s}(r,{previous:gt,current:null}),y=h.current||(h.current={}),D=h.previous,S=D[c];y[c]=new As(S&&S.currentValue,s,D===gt),r[u]=s}Js.ngInherit=!0;const Do="__ngSimpleChanges__";function Hr(r){return r[Do]||null}function dr(r){for(;Array.isArray(r);)r=r[0];return r}function to(r,s){return dr(s[r])}function Gr(r,s){return dr(s[r.index])}function vr(r,s){return r.data[s]}function pn(r,s){const o=s[r];return Mi(o)?o:o[0]}function br(r){return 64==(64&r[2])}function Pr(r,s){return null==s?null:r[s]}function aa(r){r[18]=0}function nr(r,s){r[5]+=s;let o=r,u=r[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const Qt={lFrame:Ou(null),bindingsEnabled:!0};function ua(){return Qt.bindingsEnabled}function Me(){return Qt.lFrame.lView}function ln(){return Qt.lFrame.tView}function Oa(r){return Qt.lFrame.contextLView=r,r[8]}function Na(r){return Qt.lFrame.contextLView=null,r}function Tr(){let r=ca();for(;null!==r&&64===r.type;)r=r.parent;return r}function ca(){return Qt.lFrame.currentTNode}function ki(r,s){const o=Qt.lFrame;o.currentTNode=r,o.isParent=s}function Rs(){return Qt.lFrame.isParent}function bo(){Qt.lFrame.isParent=!1}function kr(){const r=Qt.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function ii(){return Qt.lFrame.bindingIndex}function ps(){return Qt.lFrame.bindingIndex++}function Fi(r){const s=Qt.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,o}function So(r,s){const o=Qt.lFrame;o.bindingIndex=o.bindingRootIndex=r,gs(s)}function gs(r){Qt.lFrame.currentDirectiveIndex=r}function Pa(){return Qt.lFrame.currentQueryIndex}function Ps(r){Qt.lFrame.currentQueryIndex=r}function so(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function ka(r,s,o){if(o&pt.SkipSelf){let c=s,h=r;for(;!(c=c.parent,null!==c||o&pt.Host||(c=so(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,r=h}const u=Qt.lFrame=cu();return u.currentTNode=s,u.lView=r,!0}function Ao(r){const s=cu(),o=r[1];Qt.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function cu(){const r=Qt.lFrame,s=null===r?null:r.child;return null===s?Ou(r):s}function Ou(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function da(){const r=Qt.lFrame;return Qt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Fa=da;function lu(){const r=da();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function zr(){return Qt.lFrame.selectedIndex}function yi(r){Qt.lFrame.selectedIndex=r}function Sn(){const r=Qt.lFrame;return vr(r.tView,r.selectedIndex)}function Go(){Qt.lFrame.currentNamespace="svg"}function gn(){!function Fr(){Qt.lFrame.currentNamespace=null}()}function Wo(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:D,ngAfterViewInit:S,ngAfterViewChecked:N,ngOnDestroy:$}=h;y&&(r.contentHooks||(r.contentHooks=[])).push(-o,y),D&&((r.contentHooks||(r.contentHooks=[])).push(o,D),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,D)),S&&(r.viewHooks||(r.viewHooks=[])).push(-o,S),N&&((r.viewHooks||(r.viewHooks=[])).push(o,N),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,N)),null!=$&&(r.destroyHooks||(r.destroyHooks=[])).push(o,$)}}function qo(r,s,o){x(r,s,3,o)}function T(r,s,o,u){(3&r[2])===o&&x(r,s,o,u)}function F(r,s){let o=r[2];(3&o)===s&&(o&=2047,o+=1,r[2]=o)}function x(r,s,o,u){const h=u??-1,y=s.length-1;let D=0;for(let S=void 0!==u?65535&r[18]:0;S<y;S++)if("number"==typeof s[S+1]){if(D=s[S],null!=u&&D>=u)break}else s[S]<0&&(r[18]+=65536),(D<h||-1==h)&&(H(r,o,s,S),r[18]=(4294901760&r[18])+S+2),S++}function H(r,s,o,u){const c=o[u]<0,h=o[u+1],D=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{h.call(D)}finally{}}}else try{h.call(D)}finally{}}const J=-1;class Se{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Yn(r,s,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const h=o[u++],y=o[u++],D=o[u++];r.setAttribute(s,y,D,h)}else{const h=c,y=o[++u];_i(h)?r.setProperty(s,h,y):r.setAttribute(s,h,y),u++}}return u}function vi(r){return 3===r||4===r||6===r}function _i(r){return 64===r.charCodeAt(0)}function Wr(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?o=c:0===o||Ei(r,o,c,null,-1===o||2===o?s[++u]:null)}}return r}function Ei(r,s,o,u,c){let h=0,y=r.length;if(-1===s)y=-1;else for(;h<r.length;){const D=r[h++];if("number"==typeof D){if(D===s){y=-1;break}if(D>s){y=h-1;break}}}for(;h<r.length;){const D=r[h];if("number"==typeof D)break;if(D===o){if(null===u)return void(null!==c&&(r[h+1]=c));if(u===r[h+1])return void(r[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==y&&(r.splice(y,0,s),h=y+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==c&&r.splice(h++,0,c)}function ao(r){return r!==J}function uo(r){return 32767&r}function rs(r,s){let o=function ns(r){return r>>16}(r),u=s;for(;o>0;)u=u[15],o--;return u}let xo=!0;function Li(r){const s=xo;return xo=r,s}let Ko=0;const ci={};function co(r,s){const o=ha(r,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(r.injectorIndex=s.length,Fs(u.data,r),Fs(s,null),Fs(u.blueprint,null));const c=Ba(r,s),h=r.injectorIndex;if(ao(c)){const y=uo(c),D=rs(c,s),S=D[1].data;for(let N=0;N<8;N++)s[h+N]=D[y+N]|S[y+N]}return s[h+8]=c,h}function Fs(r,s){r.push(0,0,0,0,0,0,0,0,s)}function ha(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function Ba(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=s;for(;null!==c;){if(u=fu(c),null===u)return J;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return J}function Yo(r,s,o){!function wi(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Ht)&&(u=o[Ht]),null==u&&(u=o[Ht]=Ko++);const c=255&u;s.data[r+(c>>5)]|=1<<c}(r,s,o)}function Nu(r,s,o){if(o&pt.Optional||void 0!==r)return r;ot()}function lo(r,s,o,u){if(o&pt.Optional&&void 0===u&&(u=null),!(o&(pt.Self|pt.Host))){const c=r[9],h=Jn(void 0);try{return c?c.get(s,u,o&pt.Optional):er(s,u,o&pt.Optional)}finally{Jn(h)}}return Nu(u,0,o)}function du(r,s,o,u=pt.Default,c){if(null!==r){if(1024&s[2]){const y=function Hc(r,s,o,u,c){let h=r,y=s;for(;null!==h&&null!==y&&1024&y[2]&&!(256&y[2]);){const D=Vi(h,y,o,u|pt.Self,ci);if(D!==ci)return D;let S=h.parent;if(!S){const N=y[21];if(N){const $=N.get(o,ci,u);if($!==ci)return $}S=fu(y),y=y[15]}h=S}return c}(r,s,o,u,ci);if(y!==ci)return y}const h=Vi(r,s,o,u,ci);if(h!==ci)return h}return lo(s,o,u,c)}function Vi(r,s,o,u,c){const h=function Pu(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Ht)?r[Ht]:void 0;return"number"==typeof s?s>=0?255&s:ku:s}(o);if("function"==typeof h){if(!ka(s,r,u))return u&pt.Host?Nu(c,0,u):lo(s,o,u,c);try{const y=h(u);if(null!=y||u&pt.Optional)return y;ot()}finally{Fa()}}else if("number"==typeof h){let y=null,D=ha(r,s),S=J,N=u&pt.Host?s[16][6]:null;for((-1===D||u&pt.SkipSelf)&&(S=-1===D?Ba(r,s):s[D+8],S!==J&&li(u,!1)?(y=s[1],D=uo(S),s=rs(S,s)):D=-1);-1!==D;){const $=s[1];if(fa(h,D,$.data)){const Y=hu(D,s,o,y,u,N);if(Y!==ci)return Y}S=s[D+8],S!==J&&li(u,s[1].data[D+8]===N)&&fa(h,D,s)?(y=$,D=uo(S),s=rs(S,s)):D=-1}}return c}function hu(r,s,o,u,c,h){const y=s[1],D=y.data[r+8],$=ho(D,y,o,null==u?Ta(D)&&xo:u!=y&&0!=(3&D.type),c&pt.Host&&h===D);return null!==$?$n(s,y,$,D):ci}function ho(r,s,o,u,c){const h=r.providerIndexes,y=s.data,D=1048575&h,S=r.directiveStart,$=h>>20,le=c?D+$:r.directiveEnd;for(let Ie=u?D:D+$;Ie<le;Ie++){const Ze=y[Ie];if(Ie<S&&o===Ze||Ie>=S&&Ze.type===o)return Ie}if(c){const Ie=y[S];if(Ie&&$r(Ie)&&Ie.type===o)return S}return null}function $n(r,s,o,u){let c=r[o];const h=s.data;if(function Re(r){return r instanceof Se}(c)){const y=c;y.resolving&&function Ne(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${r}${o}`)}(function Ye(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():He(r)}(h[o]));const D=Li(y.canSeeViewProviders);y.resolving=!0;const S=y.injectImpl?Jn(y.injectImpl):null;ka(r,u,pt.Default);try{c=r[o]=y.factory(void 0,h,r,u),s.firstCreatePass&&o>=u.directiveStart&&function zo(r,s,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(u){const y=eo(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,y)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],s)}finally{null!==S&&Jn(S),Li(D),y.resolving=!1,Fa()}}return c}function fa(r,s,o){return!!(o[s+(r>>5)]&1<<r)}function li(r,s){return!(r&pt.Self||r&pt.Host&&s)}class ms{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return du(this._tNode,this._lView,s,Pt(u),o)}}function ku(){return new ms(Tr(),Me())}function lc(r){return q(()=>{const s=r.prototype.constructor,o=s[rt]||$a(s),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const h=c[rt]||$a(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function $a(r){return Je(r)?()=>{const s=$a(ce(r));return s&&s()}:ls(r)}function fu(r){const s=r[1],o=s.type;return 2===o?s.declTNode:1===o?r[6]:null}function Ro(r){return function ja(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const h=o[c];if(vi(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(h===s)return o[c+1];c+=2}}}return null}(Tr(),r)}const Qo="__parameters__";function Ha(r,s,o){return q(()=>{const u=function pa(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(s);function c(...h){if(this instanceof c)return u.apply(this,h),this;const y=new c(...h);return D.annotation=y,D;function D(S,N,$){const Y=S.hasOwnProperty(Qo)?S[Qo]:Object.defineProperty(S,Qo,{value:[]})[Qo];for(;Y.length<=$;)Y.push(null);return(Y[$]=Y[$]||[]).push(y),S}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Fn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=yt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vs(r,s){r.forEach(o=>Array.isArray(o)?Vs(o,s):s(o))}function Po(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function Qi(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function Us(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}function v(r,s,o){let u=m(r,s);return u>=0?r[1|u]=o:(u=~u,function qa(r,s,o,u){let c=r.length;if(c==s)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>s;)r[c]=r[c-2],c--;r[s]=o,r[s+1]=u}}(r,u,s,o)),u}function _(r,s){const o=m(r,s);if(o>=0)return r[1|o]}function m(r,s){return function O(r,s,o){let u=0,c=r.length>>o;for(;c!==u;){const h=u+(c-u>>1),y=r[h<<o];if(s===y)return h<<o;y>s?c=h:u=h+1}return~(c<<o)}(r,s,1)}const qr=on(Ha("Optional"),8),R=on(Ha("SkipSelf"),4);var Kr=(()=>((Kr=Kr||{})[Kr.Important=1]="Important",Kr[Kr.DashCase=2]="DashCase",Kr))();const Qd=new Map;let qc=0;const mu="__ngContext__";function Lr(r,s){Mi(s)?(r[mu]=s[20],function Sf(r){Qd.set(r[20],r)}(s)):r[mu]=s}function je(r,s){return undefined(r,s)}function jt(r){const s=r[3];return ri(s)?s[3]:s}function ko(r){return yc(r[13])}function ya(r){return yc(r[4])}function yc(r){for(;null!==r&&!ri(r);)r=r[4];return r}function Hu(r,s,o,u,c){if(null!=u){let h,y=!1;ri(u)?h=u:Mi(u)&&(y=!0,u=u[0]);const D=dr(u);0===r&&null!==o?null==c?Ll(s,o,D):Qc(s,o,D,c||null,!0):1===r&&null!==o?Qc(s,o,D,c||null,!0):2===r?function qg(r,s,o){const u=Vl(r,s);u&&function wv(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,D,y):3===r&&s.destroyNode(D),null!=h&&function ow(r,s,o,u,c){const h=o[7];h!==dr(o)&&Hu(s,r,u,h,c);for(let D=10;D<o.length;D++){const S=o[D];Bl(S[1],S,r,s,u,h)}}(s,r,h,o,c)}}function nn(r,s,o){return r.createElement(s,o)}function xf(r,s){const o=r[9],u=o.indexOf(s),c=s[3];512&s[2]&&(s[2]&=-513,nr(c,-1)),o.splice(u,1)}function Yr(r,s){if(r.length<=10)return;const o=10+s,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&xf(c,u),s>0&&(r[o-1][4]=u[4]);const h=Qi(r,10+s);!function Gu(r,s){Bl(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const y=h[19];null!==y&&y.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Et(r,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&Bl(r,s,o,3,null,null),function Gt(r){let s=r[13];if(!s)return Fl(r[1],r);for(;s;){let o=null;if(Mi(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==r;)Mi(s)&&Fl(s[1],s),s=s[3];null===s&&(s=r),Mi(s)&&Fl(s[1],s),o=s&&s[4]}s=o}}(s)}}function Fl(r,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Yc(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=s[o[u]];if(!(c instanceof Se)){const h=o[u+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const D=c[h[y]],S=h[y+1];try{S.call(D)}finally{}}else try{h.call(c)}finally{}}}}(r,s),function Gg(r,s){const o=r.cleanup,u=s[7];let c=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const y=o[h+3];y>=0?u[c=y]():u[c=-y].unsubscribe(),h+=2}else{const y=u[c=o[h+1]];o[h].call(y)}if(null!==u){for(let h=c+1;h<u.length;h++)(0,u[h])();s[7]=null}}(r,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&ri(s[3])){o!==s[3]&&xf(o,s);const u=s[19];null!==u&&u.detachView(r)}!function Jd(r){Qd.delete(r[20])}(s)}}function Ev(r,s,o){return function rh(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];{const{componentOffset:c}=u;if(c>-1){const{encapsulation:h}=r.data[u.directiveStart+c];if(h===ke.None||h===ke.Emulated)return null}return Gr(u,o)}}(r,s.parent,o)}function Qc(r,s,o,u,c){r.insertBefore(s,o,u,c)}function Ll(r,s,o){r.appendChild(s,o)}function zg(r,s,o,u,c){null!==u?Qc(r,s,o,u,c):Ll(r,s,o)}function Vl(r,s){return r.parentNode(s)}function Wg(r,s,o){return Mf(r,s,o)}let kf,hi,Mf=function zu(r,s,o){return 40&r.type?Gr(r,o):null};function Fo(r,s,o,u){const c=Ev(r,u,s),h=s[11],D=Wg(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(o))for(let S=0;S<o.length;S++)zg(h,c,o[S],D,!1);else zg(h,c,o,D,!1)}function Rf(r,s){if(null!==s){const o=s.type;if(3&o)return Gr(s,r);if(4&o)return yu(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return Rf(r,u);{const c=r[s.index];return ri(c)?yu(-1,c):dr(c)}}if(32&o)return je(s,r)()||dr(r[s.index]);{const u=Ul(r,s);return null!==u?Array.isArray(u)?u[0]:Rf(jt(r[16]),u):Rf(r,s.next)}}return null}function Ul(r,s){return null!==s?r[16][6].projection[s.projection]:null}function yu(r,s){const o=10+r+1;if(o<s.length){const u=s[o],c=u[1].firstChild;if(null!==c)return Rf(u,c)}return s[7]}function Wu(r,s,o,u,c,h,y){for(;null!=o;){const D=u[o.index],S=o.type;if(y&&0===s&&(D&&Lr(dr(D),u),o.flags|=2),32!=(32&o.flags))if(8&S)Wu(r,s,o.child,u,c,h,!1),Hu(s,r,c,D,h);else if(32&S){const N=je(o,u);let $;for(;$=N();)Hu(s,r,c,$,h);Hu(s,r,c,D,h)}else 16&S?Dv(r,s,u,o,c,h):Hu(s,r,c,D,h);o=y?o.projectionNext:o.next}}function Bl(r,s,o,u,c,h){Wu(o,u,r.firstChild,s,c,h,!1)}function Dv(r,s,o,u,c,h){const y=o[16],S=y[6].projection[u.projection];if(Array.isArray(S))for(let N=0;N<S.length;N++)Hu(s,r,c,S[N],h);else Wu(r,s,S,y[3],c,h,!0)}function Of(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function bv(r,s,o){const{mergedAttrs:u,classes:c,styles:h}=o;null!==u&&Yn(r,s,u),null!==c&&Of(r,s,c),null!==h&&function aw(r,s,o){r.setAttribute(s,"style",o)}(r,s,h)}function uw(r){kf=r}function _c(r){return function Kg(){if(void 0===hi&&(hi=null,Nt.trustedTypes))try{hi=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return hi}()?.createScriptURL(r)||r}class Ff{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vt})`}}function ws(r){return r instanceof Ff?r.changingThisBreaksApplicationSecurity:r}function Zu(r,s){const o=function wc(r){return r instanceof Ff&&r.getTypeName()||null}(r);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see ${vt})`)}return o===s}const uh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ji=(()=>((ji=ji||{})[ji.NONE=0]="NONE",ji[ji.HTML=1]="HTML",ji[ji.STYLE=2]="STYLE",ji[ji.SCRIPT=3]="SCRIPT",ji[ji.URL=4]="URL",ji[ji.RESOURCE_URL=5]="RESOURCE_URL",ji))();function tm(r){const s=is();return s?s.sanitize(ji.URL,r)||"":Zu(r,"URL")?ws(r):function Uf(r){return(r=String(r)).match(uh)?r:"unsafe:"+r}(He(r))}function el(r){const s=is();if(s)return _c(s.sanitize(ji.RESOURCE_URL,r)||"");if(Zu(r,"ResourceURL"))return _c(ws(r));throw new Oe(904,!1)}function or(r,s,o){return function Is(r,s){return"src"===s&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===s&&("base"===r||"link"===r)?el:tm}(s,o)(r)}function is(){const r=Me();return r&&r[12]}const $i=new Fn("ENVIRONMENT_INITIALIZER"),nm=new Fn("INJECTOR",-1),xr=new Fn("INJECTOR_DEF_TYPES");class Vv{get(s,o=vn){if(o===vn){const u=new Error(`NullInjectorError: No provider for ${ve(s)}!`);throw u.name="NullInjectorError",u}return o}}function tl(...r){return{\u0275providers:Hl(0,r),\u0275fromNgModule:!0}}function Hl(r,...s){const o=[],u=new Set;let c;return Vs(s,h=>{const y=h;Gl(y,o,[],u)&&(c||(c=[]),c.push(y))}),void 0!==c&&hh(c,o),o}function hh(r,s){for(let o=0;o<r.length;o++){const{providers:c}=r[o];Hf(c,h=>{s.push(h)})}}function Gl(r,s,o,u){if(!(r=ce(r)))return!1;let c=null,h=Pn(r);const y=!h&&bn(r);if(h||y){if(y&&!y.standalone)return!1;c=r}else{const S=r.ngModule;if(h=Pn(S),!h)return!1;c=S}const D=u.has(c);if(y){if(D)return!1;if(u.add(c),y.dependencies){const S="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const N of S)Gl(N,s,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!D){let N;u.add(c);try{Vs(h.imports,$=>{Gl($,s,o,u)&&(N||(N=[]),N.push($))})}finally{}void 0!==N&&hh(N,s)}if(!D){const N=ls(c)||(()=>new c);s.push({provide:c,useFactory:N,deps:oe},{provide:xr,useValue:c,multi:!0},{provide:$i,useValue:()=>at(c),multi:!0})}const S=h.providers;null==S||D||Hf(S,$=>{s.push($)})}}return c!==r&&void 0!==r.providers}function Hf(r,s){for(let o of r)qe(o)&&(o=o.\u0275providers),Array.isArray(o)?Hf(o,s):s(o)}const Qu=fe({provide:String,useValue:fe});function Gf(r){return null!==r&&"object"==typeof r&&Qu in r}function Xu(r){return"function"==typeof r}const fh=new Fn("Set Injector scope."),_u={},po={};let ph;function rl(){return void 0===ph&&(ph=new Vv),ph}class Ka{}class im extends Ka{get destroyed(){return this._destroyed}constructor(s,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wl(s,y=>this.processProvider(y)),this.records.set(nm,zl(void 0,this)),c.has("environment")&&this.records.set(Ka,zl(void 0,this));const h=this.records.get(fh);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(xr.multi,oe,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=Ut(this),u=Jn(void 0);try{return s()}finally{Ut(o),Jn(u)}}get(s,o=vn,u=pt.Default){this.assertNotDestroyed(),u=Pt(u);const c=Ut(this),h=Jn(void 0);try{if(!(u&pt.SkipSelf)){let D=this.records.get(s);if(void 0===D){const S=function Hv(r){return"function"==typeof r||"object"==typeof r&&r instanceof Fn}(s)&&In(s);D=S&&this.injectableDefInScope(S)?zl(gh(s),_u):null,this.records.set(s,D)}if(null!=D)return this.hydrate(s,D)}return(u&pt.Self?rl():this.parent).get(s,o=u&pt.Optional&&o===vn?null:o)}catch(y){if("NullInjectorError"===y.name){if((y[mr]=y[mr]||[]).unshift(ve(s)),c)throw y;return function se(r,s,o,u){const c=r[mr];throw s[ti]&&c.unshift(s[ti]),r.message=function ne(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let c=ve(s);if(Array.isArray(s))c=s.map(ve).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let D=s[y];h.push(y+":"+("string"==typeof D?JSON.stringify(D):ve(D)))}c=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(ei,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[mr]=null,r}(y,s,"R3InjectorError",this.source)}throw y}finally{Jn(h),Ut(c)}}resolveInjectorInitializers(){const s=Ut(this),o=Jn(void 0);try{const u=this.get($i.multi,oe,pt.Self);for(const c of u)c()}finally{Ut(s),Jn(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(ve(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processProvider(s){let o=Xu(s=ce(s))?s:ce(s&&s.provide);const u=function Bv(r){return Gf(r)?zl(void 0,r.useValue):zl(sm(r),_u)}(s);if(Xu(s)||!0!==s.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=zl(void 0,_u,!0),c.factory=()=>$t(c.multi),this.records.set(o,c)),o=s,c.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===_u&&(o.value=po,o.value=o.factory()),"object"==typeof o.value&&o.value&&function $v(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=ce(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function gh(r){const s=In(r),o=null!==s?s.factory:ls(r);if(null!==o)return o;if(r instanceof Fn)throw new Oe(204,!1);if(r instanceof Function)return function mh(r){const s=r.length;if(s>0)throw Us(s,"?"),new Oe(204,!1);const o=function Dn(r){const s=r&&(r[Rr]||r[Ln]);if(s){const o=function Lt(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Oe(204,!1)}function sm(r,s,o){let u;if(Xu(r)){const c=ce(r);return ls(c)||gh(c)}if(Gf(r))u=()=>ce(r.useValue);else if(function rm(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...$t(r.deps||[]));else if(function nl(r){return!(!r||!r.useExisting)}(r))u=()=>at(ce(r.useExisting));else{const c=ce(r&&(r.useClass||r.provide));if(!function jv(r){return!!r.deps}(r))return ls(c)||gh(c);u=()=>new c(...$t(r.deps))}return u}function zl(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function Wl(r,s){for(const o of r)Array.isArray(o)?Wl(o,s):o&&qe(o)?Wl(o.\u0275providers,s):s(o)}class vw{}class Gv{}class Wv{resolveComponentFactory(s){throw function zv(r){const s=Error(`No component factory found for ${ve(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let Ya=(()=>{class r{}return r.NULL=new Wv,r})();function qv(){return Qa(Tr(),Me())}function Qa(r,s){return new Zl(Gr(r,s))}let Zl=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=qv,r})();function Zv(r){return r instanceof Zl?r.nativeElement:r}class Kl{}let _w=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function Ew(){const r=Me(),o=pn(Tr().index,r);return(Mi(o)?o:r)[11]}(),r})(),Qr=(()=>{class r{}return r.\u0275prov=yt({token:r,providedIn:"root",factory:()=>null}),r})();class yh{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const vh=new yh("15.1.4"),Wf={};function am(r){return r.ngOriginalError}class Yl{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&am(s);for(;o&&am(o);)o=am(o);return o||null}}function um(r){return r.ownerDocument.defaultView}function fr(r){return r instanceof Function?r():r}function lm(r,s,o){let u=r.length;for(;;){const c=r.indexOf(s,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const h=s.length;if(c+h===u||r.charCodeAt(c+h)<=32)return c}o=c+1}}const ed="ng-template";function Jv(r,s,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==lm(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Xa(r){return 4===r.type&&r.value!==ed}function e_(r,s,o){return s===(4!==r.type||o?r.value:ed)}function Eh(r,s,o){let u=4;const c=r.attrs||[],h=function qf(r){for(let s=0;s<r.length;s++)if(vi(r[s]))return s;return r.length}(c);let y=!1;for(let D=0;D<s.length;D++){const S=s[D];if("number"!=typeof S){if(!y)if(4&u){if(u=2|1&u,""!==S&&!e_(r,S,o)||""===S&&1===s.length){if(Ja(u))return!1;y=!0}}else{const N=8&u?S:s[++D];if(8&u&&null!==r.attrs){if(!Jv(r.attrs,N,o)){if(Ja(u))return!1;y=!0}continue}const Y=Iw(8&u?"class":S,c,Xa(r),o);if(-1===Y){if(Ja(u))return!1;y=!0;continue}if(""!==N){let le;le=Y>h?"":c[Y+1].toLowerCase();const Ie=8&u?le:null;if(Ie&&-1!==lm(Ie,N,0)||2&u&&N!==le){if(Ja(u))return!1;y=!0}}}}else{if(!y&&!Ja(u)&&!Ja(S))return!1;if(y&&Ja(S))continue;y=!1,u=S|1&u}}return Ja(u)||y}function Ja(r){return 0==(1&r)}function Iw(r,s,o,u){if(null===s)return-1;let c=0;if(u||!o){let h=!1;for(;c<s.length;){const y=s[c];if(y===r)return c;if(3===y||6===y)h=!0;else{if(1===y||2===y){let D=s[++c];for(;"string"==typeof D;)D=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=h?1:2}return-1}return function wh(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function fn(r,s,o=!1){for(let u=0;u<s.length;u++)if(Eh(r,s[u],o))return!0;return!1}function Ih(r,s){e:for(let o=0;o<s.length;o++){const u=s[o];if(r.length===u.length){for(let c=0;c<r.length;c++)if(r[c]!==u[c])continue e;return!0}}return!1}function Dh(r,s){return r?":not("+s.trim()+")":s}function t_(r){let s=r[0],o=1,u=2,c="",h=!1;for(;o<r.length;){let y=r[o];if("string"==typeof y)if(2&u){const D=r[++o];c+="["+y+(D.length>0?'="'+D+'"':"")+"]"}else 8&u?c+="."+y:4&u&&(c+=" "+y);else""!==c&&!Ja(y)&&(s+=Dh(h,c),c=""),u=y,h=h||!Ja(u);o++}return""!==c&&(s+=Dh(h,c)),s}const dn={};function dm(r){hm(ln(),Me(),zr()+r,!1)}function hm(r,s,o,u){if(!u)if(3==(3&s[2])){const h=r.preOrderCheckHooks;null!==h&&qo(s,h,o)}else{const h=r.preOrderHooks;null!==h&&T(s,h,0,o)}yi(o)}function pm(r,s=null,o=null,u){const c=nd(r,s,o,u);return c.resolveInjectorInitializers(),c}function nd(r,s=null,o=null,u,c=new Set){const h=[o||oe,tl(r)];return u=u||("object"==typeof r?void 0:ve(r)),new im(h,s||rl(),u||null,c)}let js=(()=>{class r{static create(o,u){if(Array.isArray(o))return pm({name:""},u,o,"");{const c=o.name??"";return pm({name:c},o.parent,o.providers,c)}}}return r.THROW_IF_NOT_FOUND=vn,r.NULL=new Vv,r.\u0275prov=yt({token:r,providedIn:"any",factory:()=>at(nm)}),r.__NG_ELEMENT_ID__=-1,r})();function sd(r,s=pt.Default){const o=Me();return null===o?at(r,s):du(Tr(),o,ce(r),s)}function g_(){throw new Error("invalid")}function m_(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const h=o[u+1];if(-1!==h){const y=r.data[h];Ps(o[u]),y.contentQueries(2,s[h],h)}}}function Jf(r,s,o,u,c,h,y,D,S,N,$){const Y=s.blueprint.slice();return Y[0]=c,Y[2]=76|u,(null!==$||r&&1024&r[2])&&(Y[2]|=1024),aa(Y),Y[3]=Y[15]=r,Y[8]=o,Y[10]=y||r&&r[10],Y[11]=D||r&&r[11],Y[12]=S||r&&r[12]||null,Y[9]=N||r&&r[9]||null,Y[6]=h,Y[20]=function Hg(){return qc++}(),Y[21]=$,Y[16]=2==s.type?r[16]:Y,Y}function od(r,s,o,u,c){let h=r.data[s];if(null===h)h=function vm(r,s,o,u,c){const h=ca(),y=Rs(),S=r.data[s]=function ss(r,s,o,u,c,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,o,s,u,c);return null===r.firstChild&&(r.firstChild=S),null!==h&&(y?null==h.child&&null!==S.parent&&(h.child=S):null===h.next&&(h.next=S)),S}(r,s,o,u,c),function uu(){return Qt.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=o,h.value=u,h.attrs=c;const y=function fs(){const r=Qt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return ki(h,!0),h}function bh(r,s,o,u){if(0===o)return-1;const c=s.length;for(let h=0;h<o;h++)s.push(u),r.blueprint.push(u),r.data.push(null);return c}function _m(r,s,o){Ao(s);try{const u=r.viewQuery;null!==u&&cp(1,u,o);const c=r.template;null!==c&&y_(r,s,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&m_(r,s),r.staticViewQueries&&cp(2,r.viewQuery,o);const h=r.components;null!==h&&function Fw(r,s){for(let o=0;o<s.length;o++)A_(r,s[o])}(s,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[2]&=-5,lu()}}function ep(r,s,o,u){const c=s[2];if(128!=(128&c)){Ao(s);try{aa(s),function ts(r){return Qt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&y_(r,s,o,2,u);const y=3==(3&c);if(y){const N=r.preOrderCheckHooks;null!==N&&qo(s,N,null)}else{const N=r.preOrderHooks;null!==N&&T(s,N,0,null),F(s,0)}if(function Sh(r){for(let s=ko(r);null!==s;s=ya(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const c=o[u];512&c[2]||nr(c[3],1),c[2]|=512}}}(s),function Bw(r){for(let s=ko(r);null!==s;s=ya(s))for(let o=10;o<s.length;o++){const u=s[o],c=u[1];br(u)&&ep(c,u,c.template,u[8])}}(s),null!==r.contentQueries&&m_(r,s),y){const N=r.contentCheckHooks;null!==N&&qo(s,N)}else{const N=r.contentHooks;null!==N&&T(s,N,1),F(s,1)}!function Pw(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)yi(~c);else{const h=c,y=o[++u],D=o[++u];So(y,h),D(2,s[h])}}}finally{yi(-1)}}(r,s);const D=r.components;null!==D&&function kw(r,s){for(let o=0;o<s.length;o++)cl(r,s[o])}(s,D);const S=r.viewQuery;if(null!==S&&cp(2,S,u),y){const N=r.viewCheckHooks;null!==N&&qo(s,N)}else{const N=r.viewHooks;null!==N&&T(s,N,2),F(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,nr(s[3],-1))}finally{lu()}}}function y_(r,s,o,u,c){const h=zr(),y=2&u;try{yi(-1),y&&s.length>22&&hm(r,s,22,!1),o(u,c)}finally{yi(h)}}function Em(r,s,o){if(as(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const y=r.data[h];y.contentQueries&&y.contentQueries(1,o[h],h)}}}function wm(r,s,o){ua()&&(function I_(r,s,o,u){const c=o.directiveStart,h=o.directiveEnd;Ta(o)&&function Th(r,s,o){const u=Gr(s,r),c=v_(o),h=r[10],y=Ah(r,Jf(r,c,null,o.onPush?32:16,u,s,h,h.createRenderer(u,o),null,null,null));r[s.index]=y}(s,o,r.data[c+o.componentOffset]),r.firstCreatePass||co(o,s),Lr(u,s);const y=o.initialInputs;for(let D=c;D<h;D++){const S=r.data[D],N=$n(s,r,D,o);Lr(N,s),null!==y&&T_(0,D-c,N,S,0,y),$r(S)&&(pn(o.index,s)[8]=$n(s,r,D,o))}}(r,s,o,Gr(o,s)),64==(64&o.flags)&&op(r,s,o))}function tp(r,s,o=Gr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let h=0;h<u.length;h+=2){const y=u[h+1],D=-1===y?o(s,r):r[y];r[c++]=D}}}function v_(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=np(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function np(r,s,o,u,c,h,y,D,S,N){const $=22+u,Y=$+c,le=function __(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:dn);return o}($,Y),Ie="function"==typeof N?N():N;return le[1]={type:r,blueprint:le,template:o,queries:null,viewQuery:D,declTNode:s,data:le.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:S,consts:Ie,incompleteFirstPass:!1}}function rp(r,s,o,u){const c=lp(s);null===o?c.push(u):(c.push(o),r.firstCreatePass&&Sm(r).push(u,c.length-1))}function ip(r,s,o,u){for(let c in r)if(r.hasOwnProperty(c)){o=null===o?{}:o;const h=r[c];null===u?sp(o,s,c,h):u.hasOwnProperty(c)&&sp(o,s,u[c],h)}return o}function sp(r,s,o,u){r.hasOwnProperty(o)?r[o].push(s,u):r[o]=[s,u]}function Lo(r,s,o,u,c,h,y,D){const S=Gr(s,o);let $,N=s.inputs;!D&&null!=N&&($=N[u])?(Mh(r,o,$,u,c),Ta(s)&&E_(o,s.index)):3&s.type&&(u=function Dc(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=y?y(c,s.value||"",u):c,h.setProperty(S,u,c))}function E_(r,s){const o=pn(s,r);16&o[2]||(o[2]|=32)}function tc(r,s,o,u){let c=!1;if(ua()){const h=null===u?null:{"":-1},y=function D_(r,s){const o=r.directiveRegistry;let u=null,c=null;if(o)for(let h=0;h<o.length;h++){const y=o[h];if(fn(s,y.selectors,!1))if(u||(u=[]),$r(y))if(null!==y.findHostDirectiveDefs){const D=[];c=c||new Map,y.findHostDirectiveDefs(y,D,c),u.unshift(...D,y),ap(r,s,D.length)}else u.unshift(y),ap(r,s,0);else c=c||new Map,y.findHostDirectiveDefs?.(y,u,c),u.push(y)}return null===u?null:[u,c]}(r,o);let D,S;null===y?D=S=null:[D,S]=y,null!==D&&(c=!0,bc(r,s,o,D,h,S)),h&&function Vw(r,s,o){if(s){const u=r.localNames=[];for(let c=0;c<s.length;c+=2){const h=o[s[c+1]];if(null==h)throw new Oe(-301,!1);u.push(s[c],h)}}}(o,u,h)}return o.mergedAttrs=Wr(o.mergedAttrs,o.attrs),c}function bc(r,s,o,u,c,h){for(let N=0;N<u.length;N++)Yo(co(o,s),r,u[N].type);!function C_(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}(o,r.data.length,u.length);for(let N=0;N<u.length;N++){const $=u[N];$.providersResolver&&$.providersResolver($)}let y=!1,D=!1,S=bh(r,s,u.length,null);for(let N=0;N<u.length;N++){const $=u[N];o.mergedAttrs=Wr(o.mergedAttrs,$.hostAttrs),up(r,o,s,S,$),b_(S,$,c),null!==$.contentQueries&&(o.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(o.flags|=64);const Y=$.type.prototype;!y&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),y=!0),!D&&(Y.ngOnChanges||Y.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),D=!0),S++}!function Im(r,s,o){const c=s.directiveEnd,h=r.data,y=s.attrs,D=[];let S=null,N=null;for(let $=s.directiveStart;$<c;$++){const Y=h[$],le=o?o.get(Y):null,Ze=le?le.outputs:null;S=ip(Y.inputs,$,S,le?le.inputs:null),N=ip(Y.outputs,$,N,Ze);const lt=null===S||null===y||Xa(s)?null:Uw(S,$,y);D.push(lt)}null!==S&&(S.hasOwnProperty("class")&&(s.flags|=8),S.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=D,s.inputs=S,s.outputs=N}(r,o,h)}function op(r,s,o){const u=o.directiveStart,c=o.directiveEnd,h=o.index,y=function la(){return Qt.lFrame.currentDirectiveIndex}();try{yi(h);for(let D=u;D<c;D++){const S=r.data[D],N=s[D];gs(D),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&bm(S,N)}}finally{yi(-1),gs(y)}}function bm(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function ap(r,s,o){s.componentOffset=o,(r.components||(r.components=[])).push(s.index)}function b_(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;$r(s)&&(o[""]=r)}}function up(r,s,o,u,c){r.data[u]=c;const h=c.factory||(c.factory=ls(c.type)),y=new Se(h,$r(c),sd);r.blueprint[u]=y,o[u]=y,function ul(r,s,o,u,c){const h=c.hostBindings;if(h){let y=r.hostBindingOpCodes;null===y&&(y=r.hostBindingOpCodes=[]);const D=~s.index;(function Ch(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(y)!=D&&y.push(D),y.push(o,u,h)}}(r,s,u,bh(r,o,c.hostVars,dn),c)}function Hs(r,s,o,u,c,h){const y=Gr(r,s);!function Cm(r,s,o,u,c,h,y){if(null==h)r.removeAttribute(s,c,o);else{const D=null==y?He(h):y(h,u||"",c);r.setAttribute(s,c,D,o)}}(s[11],y,h,r.value,o,u,c)}function T_(r,s,o,u,c,h){const y=h[s];if(null!==y){const D=u.setInput;for(let S=0;S<y.length;){const N=y[S++],$=y[S++],Y=y[S++];null!==D?u.setInput(o,Y,N,$):o[$]=Y}}}function Uw(r,s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;if(r.hasOwnProperty(h)){null===u&&(u=[]);const y=r[h];for(let D=0;D<y.length;D+=2)if(y[D]===s){u.push(h,y[D+1],o[c+1]);break}}c+=2}else c+=2;else c+=4}return u}function S_(r,s,o,u){return[r,!0,!1,s,null,0,u,o,null,null]}function cl(r,s){const o=pn(s,r);if(br(o)){const u=o[1];48&o[2]?ep(u,o,u.template,o[8]):o[5]>0&&Eu(o)}}function Eu(r){for(let u=ko(r);null!==u;u=ya(u))for(let c=10;c<u.length;c++){const h=u[c];if(br(h))if(512&h[2]){const y=h[1];ep(y,h,y.template,h[8])}else h[5]>0&&Eu(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=pn(o[u],r);br(c)&&c[5]>0&&Eu(c)}}function A_(r,s){const o=pn(s,r),u=o[1];(function jw(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(u,o),_m(u,o,o[8])}function Ah(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function Tm(r){for(;r;){r[2]|=32;const s=jt(r);if($c(r)&&!s)return r;r=s}return null}function ad(r,s,o,u=!0){const c=s[10];c.begin&&c.begin();try{ep(r,s,r.template,o)}catch(y){throw u&&R_(s,y),y}finally{c.end&&c.end()}}function cp(r,s,o){Ps(0),s(r,o)}function lp(r){return r[7]||(r[7]=[])}function Sm(r){return r.cleanup||(r.cleanup=[])}function R_(r,s){const o=r[9],u=o?o.get(Yl,null):null;u&&u.handleError(s)}function Mh(r,s,o,u,c){for(let h=0;h<o.length;){const y=o[h++],D=o[h++],S=s[y],N=r.data[y];null!==N.setInput?N.setInput(S,c,u,D):S[D]=c}}function _a(r,s,o){const u=to(s,r);!function eh(r,s,o){r.setValue(s,o)}(r[11],u,o)}function dp(r,s,o){let u=o?r.styles:null,c=o?r.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const D=s[y];"number"==typeof D?h=D:1==h?c=we(c,D):2==h&&(u=we(u,D+": "+s[++y]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}function Rh(r,s,o,u,c=!1){for(;null!==o;){const h=s[o.index];if(null!==h&&u.push(dr(h)),ri(h))for(let D=10;D<h.length;D++){const S=h[D],N=S[1].firstChild;null!==N&&Rh(S[1],S,N,u)}const y=o.type;if(8&y)Rh(r,s,o.child,u);else if(32&y){const D=je(o,s);let S;for(;S=D();)u.push(S)}else if(16&y){const D=Ul(s,o);if(Array.isArray(D))u.push(...D);else{const S=jt(s[16]);Rh(S[1],S,D,u,!0)}}o=c?o.projectionNext:o.next}return u}class nc{get rootNodes(){const s=this._lView,o=s[1];return Rh(o,s,o.firstChild,[])}constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ri(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Yr(s,u),Qi(o,u))}this._attachedToViewContainer=!1}Et(this._lView[1],this._lView)}onDestroy(s){rp(this._lView[1],this._lView,null,s)}markForCheck(){Tm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ad(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hr(r,s){Bl(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Oe(902,!1);this._appRef=s}}class hp extends nc{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;ad(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class ud extends Ya{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=bn(s);return new cd(o,this.ngModule)}}function Am(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class Vo{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){u=Pt(u);const c=this.injector.get(s,Wf,u);return c!==Wf||o===Wf?c:this.parentInjector.get(s,o,u)}}class cd extends Gv{get inputs(){return Am(this.componentDef.inputs)}get outputs(){return Am(this.componentDef.outputs)}constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function n_(r){return r.map(t_).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}create(s,o,u,c){let h=(c=c||this.ngModule)instanceof Ka?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new Vo(s,h):s,D=y.get(Kl,null);if(null===D)throw new Oe(407,!1);const S=y.get(Qr,null),N=D.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",Y=u?function Lw(r,s,o){return r.selectRootElement(s,o===ke.ShadowDom)}(N,u,this.componentDef.encapsulation):nn(N,$,function O_(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}($)),le=this.componentDef.onPush?288:272,Ie=np(0,null,null,1,0,null,null,null,null,null),Ze=Jf(null,Ie,null,le,null,null,D,N,S,y,null);let lt,Dt;Ao(Ze);try{const kt=this.componentDef;let en,Xe=null;kt.findHostDirectiveDefs?(en=[],Xe=new Map,kt.findHostDirectiveDefs(kt,en,Xe),en.push(kt)):en=[kt];const un=function N_(r,s){const o=r[1];return r[22]=s,od(o,22,2,"#host",null)}(Ze,Y),Ur=function Cc(r,s,o,u,c,h,y,D){const S=c[1];!function ld(r,s,o,u){for(const c of r)s.mergedAttrs=Wr(s.mergedAttrs,c.hostAttrs);null!==s.mergedAttrs&&(dp(s,s.mergedAttrs,!0),null!==o&&bv(u,o,s))}(u,r,s,y);const N=h.createRenderer(s,o),$=Jf(c,v_(o),null,o.onPush?32:16,c[r.index],r,h,N,D||null,null,null);return S.firstCreatePass&&ap(S,r,u.length-1),Ah(c,$),c[r.index]=$}(un,Y,kt,en,Ze,D,N);Dt=vr(Ie,22),Y&&function ll(r,s,o,u){if(u)Yn(r,o,["ng-version",vh.full]);else{const{attrs:c,classes:h}=function r_(r){const s=[],o=[];let u=1,c=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===c?""!==h&&s.push(h,r[++u]):8===c&&o.push(h);else{if(!Ja(c))break;c=h}u++}return{attrs:s,classes:o}}(s.selectors[0]);c&&Yn(r,o,c),h&&h.length>0&&Of(r,o,h.join(" "))}}(N,kt,Y,u),void 0!==o&&function $w(r,s,o){const u=r.projection=[];for(let c=0;c<s.length;c++){const h=o[c];u.push(null!=h?Array.from(h):null)}}(Dt,this.ngContentSelectors,o),lt=function P_(r,s,o,u,c,h){const y=Tr(),D=c[1],S=Gr(y,c);bc(D,c,y,o,null,u);for(let $=0;$<o.length;$++)Lr($n(c,D,y.directiveStart+$,y),c);op(D,c,y),S&&Lr(S,c);const N=$n(c,D,y.directiveStart+y.componentOffset,y);if(r[8]=c[8]=N,null!==h)for(const $ of h)$(N,s);return Em(D,y,r),N}(Ur,kt,en,Xe,Ze,[dd]),_m(Ie,Ze,null)}finally{lu()}return new fp(this.componentType,lt,Qa(Dt,Ze),Ze,Dt)}}class fp extends vw{constructor(s,o,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new hp(c),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[s])){const h=this._rootLView;Mh(h[1],h,c,s,o),E_(h,this._tNode.index)}}get injector(){return new ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function dd(){const r=Tr();Wo(Me()[1],r)}function wu(r){let s=function Mm(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;s;){let c;if($r(r))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Oe(903,!1);c=s.\u0275dir}if(c){if(o){u.push(c);const y=r;y.inputs=Rm(r.inputs),y.declaredInputs=Rm(r.declaredInputs),y.outputs=Rm(r.outputs);const D=c.hostBindings;D&&zw(r,D);const S=c.viewQuery,N=c.contentQueries;if(S&&Hw(r,S),N&&Gw(r,N),Ee(r.inputs,c.inputs),Ee(r.declaredInputs,c.declaredInputs),Ee(r.outputs,c.outputs),$r(c)&&c.data.animation){const $=r.data;$.animation=($.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let y=0;y<h.length;y++){const D=h[y];D&&D.ngInherit&&D(r),D===wu&&(o=!1)}}s=Object.getPrototypeOf(s)}!function k_(r){let s=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=s+=c.hostVars,c.hostAttrs=Wr(c.hostAttrs,o=Wr(o,c.hostAttrs))}}(u)}function Rm(r){return r===gt?{}:r===oe?[]:r}function Hw(r,s){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{s(u,c),o(u,c)}:s}function Gw(r,s){const o=r.contentQueries;r.contentQueries=o?(u,c,h)=>{s(u,c,h),o(u,c,h)}:s}function zw(r,s){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{s(u,c),o(u,c)}:s}let Oh=null;function hl(){if(!Oh){const r=Nt.Symbol;if(r&&r.iterator)Oh=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Oh=u)}}}return Oh}function mp(r){return!!Hi(r)&&(Array.isArray(r)||!(r instanceof Map)&&hl()in r)}function Hi(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Iu(r,s,o){return r[s]=o}function Gs(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function Tc(r,s,o,u){const c=Gs(r,s,o);return Gs(r,s+1,u)||c}function km(r,s,o,u){const c=Me();return Gs(c,ps(),s)&&(ln(),Hs(Sn(),c,r,s,o,u)),km}function Sc(r,s,o,u){return Gs(r,ps(),o)?s+He(o)+u:dn}function Ac(r,s,o,u,c,h){const D=Tc(r,ii(),o,c);return Fi(2),D?s+He(o)+u+He(c)+h:dn}function Du(r,s,o,u,c,h,y,D){const N=function yp(r,s,o,u,c){const h=Tc(r,s,o,u);return Gs(r,s+2,c)||h}(r,ii(),o,c,y);return Fi(3),N?s+He(o)+u+He(c)+h+He(y)+D:dn}function Ph(r,s,o,u,c,h,y,D){const S=Me(),N=ln(),$=r+22,Y=N.firstCreatePass?function Bm(r,s,o,u,c,h,y,D,S){const N=s.consts,$=od(s,r,4,y||null,Pr(N,D));tc(s,o,$,Pr(N,S)),Wo(s,$);const Y=$.tViews=np(2,$,u,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,N);return null!==s.queries&&(s.queries.template(s,$),Y.queries=s.queries.embeddedTView($)),$}($,N,S,s,o,u,c,h,y):N.data[$];ki(Y,!1);const le=S[11].createComment("");Fo(N,S,le,Y),Lr(le,S),Ah(S,S[$]=S_(le,S,le,Y)),iu(Y)&&wm(N,S,Y),null!=y&&tp(S,Y,D)}function _p(r,s,o){const u=Me();return Gs(u,ps(),s)&&Lo(ln(),Sn(),u,r,s,u[11],o,!1),_p}function jm(r,s,o,u,c){const y=c?"class":"style";Mh(r,o,s.inputs[y],y,u)}function Ep(r,s,o,u){const c=Me(),h=ln(),y=22+r,D=c[11],S=c[y]=nn(D,s,function Ua(){return Qt.lFrame.currentNamespace}()),N=h.firstCreatePass?function $m(r,s,o,u,c,h,y){const D=s.consts,N=od(s,r,2,c,Pr(D,h));return tc(s,o,N,Pr(D,y)),null!==N.attrs&&dp(N,N.attrs,!1),null!==N.mergedAttrs&&dp(N,N.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,N),N}(y,h,c,0,s,o,u):h.data[y];return ki(N,!0),bv(D,S,N),32!=(32&N.flags)&&Fo(h,c,S,N),0===function ro(){return Qt.lFrame.elementDepthCount}()&&Lr(S,c),function hs(){Qt.lFrame.elementDepthCount++}(),iu(N)&&(wm(h,c,N),Em(h,N,c)),null!==u&&tp(c,N),Ep}function pd(){let r=Tr();Rs()?bo():(r=r.parent,ki(r,!1));const s=r;!function Cr(){Qt.lFrame.elementDepthCount--}();const o=ln();return o.firstCreatePass&&(Wo(o,r),as(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function _n(r){return 0!=(8&r.flags)}(s)&&jm(o,s,Me(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function rn(r){return 0!=(16&r.flags)}(s)&&jm(o,s,Me(),s.stylesWithoutHost,!1),pd}function wp(r,s,o,u){return Ep(r,s,o,u),pd(),wp}function Fh(){return Me()}function Lh(r){return!!r&&"function"==typeof r.then}function Ip(r){return!!r&&"function"==typeof r.subscribe}const Dp=Ip;function bp(r,s,o,u){const c=Me(),h=ln(),y=Tr();return function q_(r,s,o,u,c,h,y){const D=iu(u),N=r.firstCreatePass&&Sm(r),$=s[8],Y=lp(s);let le=!0;if(3&u.type||y){const lt=Gr(u,s),Dt=y?y(lt):lt,kt=Y.length,en=y?un=>y(dr(un[u.index])):u.index;let Xe=null;if(!y&&D&&(Xe=function W_(r,s,o,u){const c=r.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const y=c[h];if(y===o&&c[h+1]===u){const D=s[7],S=c[h+2];return D.length>S?D[S]:null}"string"==typeof y&&(h+=2)}return null}(r,s,c,u.index)),null!==Xe)(Xe.__ngLastListenerFn__||Xe).__ngNextListenerFn__=h,Xe.__ngLastListenerFn__=h,le=!1;else{h=K_(u,s,$,h,!1);const un=o.listen(Dt,c,h);Y.push(h,un),N&&N.push(c,en,kt,kt+1)}}else h=K_(u,s,$,h,!1);const Ie=u.outputs;let Ze;if(le&&null!==Ie&&(Ze=Ie[c])){const lt=Ze.length;if(lt)for(let Dt=0;Dt<lt;Dt+=2){const Ur=s[Ze[Dt]][Ze[Dt+1]].subscribe(h),Ci=Y.length;Y.push(h,Ur),N&&N.push(c,u.index,Ci,-(Ci+1))}}}(h,c,c[11],y,r,s,u),bp}function Z_(r,s,o,u){try{return!1!==o(u)}catch(c){return R_(r,c),!1}}function K_(r,s,o,u,c){return function h(y){if(y===Function)return u;Tm(r.componentOffset>-1?pn(r.index,s):s);let S=Z_(s,0,u,y),N=h.__ngNextListenerFn__;for(;N;)S=Z_(s,0,N,y)&&S,N=N.__ngNextListenerFn__;return c&&!1===S&&(y.preventDefault(),y.returnValue=!1),S}}function Hm(r=1){return function La(r){return(Qt.lFrame.contextLView=function oo(r,s){for(;r>0;)s=s[15],r--;return s}(r,Qt.lFrame.contextLView))[8]}(r)}function Cp(r,s){let o=null;const u=function Dw(r){const s=r.attrs;if(null!=s){const o=s.indexOf(5);if(!(1&o))return s[o+1]}return null}(r);for(let c=0;c<s.length;c++){const h=s[c];if("*"!==h){if(null===u?fn(r,h,!0):Ih(u,h))return c}else o=c}return o}function yd(r){const s=Me()[16][6];if(!s.projection){const u=s.projection=Us(r?r.length:1,null),c=u.slice();let h=s.child;for(;null!==h;){const y=r?Cp(h,r):0;null!==y&&(c[y]?c[y].projectionNext=h:u[y]=h,c[y]=h),h=h.next}}}function Tp(r,s=0,o){const u=Me(),c=ln(),h=od(c,22+r,16,null,o||null);null===h.projection&&(h.projection=s),bo(),32!=(32&h.flags)&&function Zg(r,s,o){Dv(s[11],0,s,o,Ev(r,o,s),Wg(o.parent||s[6],o,s))}(c,u,h)}function Sp(r,s,o,u,c){const h=Me(),y=Sc(h,s,o,u);return y!==dn&&Lo(ln(),Sn(),h,r,y,h[11],c,!1),Sp}function zm(r,s,o,u,c,h,y){const D=Me(),S=Ac(D,s,o,u,c,h);return S!==dn&&Lo(ln(),Sn(),D,r,S,D[11],y,!1),zm}function ic(r,s){return r<<17|s<<2}function bu(r){return r>>17&32767}function Uh(r){return 2|r}function Rc(r){return(131068&r)>>2}function Bh(r,s){return-131069&r|s<<2}function eu(r){return 1|r}function Rp(r,s,o,u,c){const h=r[o+1],y=null===s;let D=u?bu(h):Rc(h),S=!1;for(;0!==D&&(!1===S||y);){const $=r[D+1];Xw(r[D],s)&&(S=!0,r[D+1]=u?eu($):Uh($)),D=u?bu($):Rc($)}S&&(r[o+1]=u?Uh(h):eu(h))}function Xw(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&m(r,s)>=0}const bi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jh(r){return r.substring(bi.key,bi.keyEnd)}function ml(r,s){const o=bi.textEnd;return o===s?-1:(s=bi.keyEnd=function r0(r,s,o){for(;s<o&&r.charCodeAt(s)>32;)s++;return s}(r,bi.key=s,o),yl(r,s,o))}function yl(r,s,o){for(;s<o&&r.charCodeAt(s)<=32;)s++;return s}function $h(r,s,o){return ea(r,s,o,!1),$h}function Ym(r,s){return ea(r,s,null,!0),Ym}function wa(r,s){for(let o=function e0(r){return function n0(r){bi.key=0,bi.keyEnd=0,bi.value=0,bi.valueEnd=0,bi.textEnd=r.length}(r),ml(r,yl(r,0,bi.textEnd))}(s);o>=0;o=ml(s,o))v(r,jh(s),!0)}function ea(r,s,o,u){const c=Me(),h=ln(),y=Fi(2);h.firstUpdatePass&&Pp(h,r,y,u),s!==dn&&Gs(c,y,s)&&Fp(h,h.data[zr()],c,c[11],r,c[y+1]=function ty(r,s){return null==r||("string"==typeof s?r+=s:"object"==typeof r&&(r=ve(ws(r)))),r}(s,o),u,y)}function sc(r,s){return s>=r.expandoStartIndex}function Pp(r,s,o,u){const c=r.data;if(null===c[o+1]){const h=c[zr()],y=sc(r,o);Vp(h,u)&&null===s&&!y&&(s=!1),s=function _d(r,s,o,u){const c=function Ns(r){const s=Qt.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let h=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(o=Hh(o=Xm(null,r,s,o,u),s.attrs,u),h=null);else{const y=s.directiveStylingLast;if(-1===y||r[y]!==c)if(o=Xm(c,r,s,o,u),null===h){let S=function Ed(r,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Rc(u))return r[bu(u)]}(r,s,u);void 0!==S&&Array.isArray(S)&&(S=Xm(null,r,s,S[1],u),S=Hh(S,s.attrs,u),function o0(r,s,o,u){r[bu(o?s.classBindings:s.styleBindings)]=u}(r,s,u,S))}else h=function wd(r,s,o){let u;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)u=Hh(u,r[h].hostAttrs,o);return Hh(u,s.attrs,o)}(r,s,u)}return void 0!==h&&(u?s.residualClasses=h:s.residualStyles=h),o}(c,h,s,u),function qm(r,s,o,u,c,h){let y=h?s.classBindings:s.styleBindings,D=bu(y),S=Rc(y);r[u]=o;let $,N=!1;if(Array.isArray(o)?($=o[1],(null===$||m(o,$)>0)&&(N=!0)):$=o,c)if(0!==S){const le=bu(r[D+1]);r[u+1]=ic(le,D),0!==le&&(r[le+1]=Bh(r[le+1],u)),r[D+1]=function Vh(r,s){return 131071&r|s<<17}(r[D+1],u)}else r[u+1]=ic(D,0),0!==D&&(r[D+1]=Bh(r[D+1],u)),D=u;else r[u+1]=ic(S,0),0===D?D=u:r[S+1]=Bh(r[S+1],u),S=u;N&&(r[u+1]=Uh(r[u+1])),Rp(r,$,u,!0),Rp(r,$,u,!1),function Qw(r,s,o,u,c){const h=c?r.residualClasses:r.residualStyles;null!=h&&"string"==typeof s&&m(h,s)>=0&&(o[u+1]=eu(o[u+1]))}(s,$,r,u,h),y=ic(D,S),h?s.classBindings=y:s.styleBindings=y}(c,h,s,o,y,u)}}function Xm(r,s,o,u,c){let h=null;const y=o.directiveEnd;let D=o.directiveStylingLast;for(-1===D?D=o.directiveStart:D++;D<y&&(h=s[D],u=Hh(u,h.hostAttrs,c),h!==r);)D++;return null!==r&&(o.directiveStylingLast=D),u}function Hh(r,s,o){const u=o?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y?c=y:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),v(r,y,!!o||s[++h]))}return void 0===r?null:r}function Fp(r,s,o,u,c,h,y,D){if(!(3&s.type))return;const S=r.data,N=S[D+1],$=function Wm(r){return 1==(1&r)}(N)?a0(S,s,o,c,Rc(N),y):void 0;Lp($)||(Lp(h)||function Mp(r){return 2==(2&r)}(N)&&(h=a0(S,null,o,c,D,y)),function Xo(r,s,o,u,c){if(s)c?r.addClass(o,u):r.removeClass(o,u);else{let h=-1===u.indexOf("-")?void 0:Kr.DashCase;null==c?r.removeStyle(o,u,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=Kr.Important),r.setStyle(o,u,c,h))}}(u,y,to(zr(),o),c,h))}function a0(r,s,o,u,c,h){const y=null===s;let D;for(;c>0;){const S=r[c],N=Array.isArray(S),$=N?S[1]:S,Y=null===$;let le=o[c+1];le===dn&&(le=Y?oe:void 0);let Ie=Y?_(le,u):$===u?le:void 0;if(N&&!Lp(Ie)&&(Ie=_(S,u)),Lp(Ie)&&(D=Ie,y))return D;const Ze=r[c+1];c=y?bu(Ze):Rc(Ze)}if(null!==s){let S=h?s.residualClasses:s.residualStyles;null!=S&&(D=_(S,u))}return D}function Lp(r){return void 0!==r}function Vp(r,s){return 0!=(r.flags&(s?8:16))}function u0(r,s=""){const o=Me(),u=ln(),c=r+22,h=u.firstCreatePass?od(u,c,1,s,null):u.data[c],y=o[c]=function kl(r,s){return r.createText(s)}(o[11],s);Fo(u,o,y,h),ki(h,!1)}function Up(r){return Bp("",r,""),Up}function Bp(r,s,o){const u=Me(),c=Sc(u,r,s,o);return c!==dn&&_a(u,zr(),c),Bp}function jp(r,s,o,u,c){const h=Me(),y=Ac(h,r,s,o,u,c);return y!==dn&&_a(h,zr(),y),jp}function $p(r,s,o,u,c,h,y){const D=Me(),S=Du(D,r,s,o,u,c,h,y);return S!==dn&&_a(D,zr(),S),$p}function Hp(r,s,o){!function zs(r,s,o,u){const c=ln(),h=Fi(2);c.firstUpdatePass&&Pp(c,null,h,u);const y=Me();if(o!==dn&&Gs(y,h,o)){const D=c.data[zr()];if(Vp(D,u)&&!sc(c,h)){let S=u?D.classesWithoutHost:D.stylesWithoutHost;null!==S&&(o=we(S,o||"")),jm(c,D,y,o,u)}else!function ey(r,s,o,u,c,h,y,D){c===dn&&(c=oe);let S=0,N=0,$=0<c.length?c[0]:null,Y=0<h.length?h[0]:null;for(;null!==$||null!==Y;){const le=S<c.length?c[S+1]:void 0,Ie=N<h.length?h[N+1]:void 0;let lt,Ze=null;$===Y?(S+=2,N+=2,le!==Ie&&(Ze=Y,lt=Ie)):null===Y||null!==$&&$<Y?(S+=2,Ze=$):(N+=2,Ze=Y,lt=Ie),null!==Ze&&Fp(r,s,o,u,Ze,lt,y,D),$=S<c.length?c[S]:null,Y=N<h.length?h[N]:null}}(c,D,y,y[11],y[h+1],y[h+1]=function Jm(r,s,o){if(null==o||""===o)return oe;const u=[],c=ws(o);if(Array.isArray(c))for(let h=0;h<c.length;h++)r(u,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&r(u,h,c[h]);else"string"==typeof c&&s(u,c);return u}(r,s,o),u,h)}}(v,wa,Sc(Me(),r,s,o),!0)}const _l=void 0;var py=["en",[["a","p"],["AM","PM"],_l],[["AM","PM"],_l,_l],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_l,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_l,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_l,"{1} 'at' {0}",_l],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aI(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Id={};function gy(r){const s=function E0(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Yp(s);if(o)return o;const u=s.split("-")[0];if(o=Yp(u),o)return o;if("en"===u)return py;throw new Oe(701,!1)}function _0(r){return gy(r)[Kt.PluralCase]}function Yp(r){return r in Id||(Id[r]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[r]),Id[r]}var Kt=(()=>((Kt=Kt||{})[Kt.LocaleId=0]="LocaleId",Kt[Kt.DayPeriodsFormat=1]="DayPeriodsFormat",Kt[Kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Kt[Kt.DaysFormat=3]="DaysFormat",Kt[Kt.DaysStandalone=4]="DaysStandalone",Kt[Kt.MonthsFormat=5]="MonthsFormat",Kt[Kt.MonthsStandalone=6]="MonthsStandalone",Kt[Kt.Eras=7]="Eras",Kt[Kt.FirstDayOfWeek=8]="FirstDayOfWeek",Kt[Kt.WeekendRange=9]="WeekendRange",Kt[Kt.DateFormat=10]="DateFormat",Kt[Kt.TimeFormat=11]="TimeFormat",Kt[Kt.DateTimeFormat=12]="DateTimeFormat",Kt[Kt.NumberSymbols=13]="NumberSymbols",Kt[Kt.NumberFormats=14]="NumberFormats",Kt[Kt.CurrencyCode=15]="CurrencyCode",Kt[Kt.CurrencySymbol=16]="CurrencySymbol",Kt[Kt.CurrencyName=17]="CurrencyName",Kt[Kt.Currencies=18]="Currencies",Kt[Kt.Directionality=19]="Directionality",Kt[Kt.PluralCase=20]="PluralCase",Kt[Kt.ExtraData=21]="ExtraData",Kt))();const Oc="en-US";let my=Oc;function Ad(r,s,o,u,c){if(r=ce(r),Array.isArray(r))for(let h=0;h<r.length;h++)Ad(r[h],s,o,u,c);else{const h=ln(),y=Me();let D=Xu(r)?r:ce(r.provide),S=sm(r);const N=Tr(),$=1048575&N.providerIndexes,Y=N.directiveStart,le=N.providerIndexes>>20;if(Xu(r)||!r.multi){const Ie=new Se(S,c,sd),Ze=xd(D,s,c?$:$+le,Y);-1===Ze?(Yo(co(N,y),h,D),Cy(h,r,s.length),s.push(D),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),o.push(Ie),y.push(Ie)):(o[Ze]=Ie,y[Ze]=Ie)}else{const Ie=xd(D,s,$+le,Y),Ze=xd(D,s,$,$+le),Dt=Ze>=0&&o[Ze];if(c&&!Dt||!c&&!(Ie>=0&&o[Ie])){Yo(co(N,y),h,D);const kt=function RI(r,s,o,u,c){const h=new Se(r,o,sd);return h.multi=[],h.index=s,h.componentProviders=0,kc(h,c,u&&!o),h}(c?H0:Yh,o.length,c,u,S);!c&&Dt&&(o[Ze].providerFactory=kt),Cy(h,r,s.length,0),s.push(D),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),o.push(kt),y.push(kt)}else Cy(h,r,Ie>-1?Ie:Ze,kc(o[c?Ze:Ie],S,!c&&u));!c&&u&&Dt&&o[Ze].componentProviders++}}}function Cy(r,s,o,u){const c=Xu(s),h=function zf(r){return!!r.useClass}(s);if(c||h){const S=(h?ce(s.useClass):s).prototype.ngOnDestroy;if(S){const N=r.destroyHooks||(r.destroyHooks=[]);if(!c&&s.multi){const $=N.indexOf(o);-1===$?N.push(o,[u,S]):N[$+1].push(u,S)}else N.push(o,S)}}}function kc(r,s,o){return o&&r.componentProviders++,r.multi.push(s)-1}function xd(r,s,o,u){for(let c=o;c<u;c++)if(s[c]===r)return c;return-1}function Yh(r,s,o,u){return Qh(this.multi,[])}function H0(r,s,o,u){const c=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,D=$n(o,o[1],this.providerFactory.index,u);h=D.slice(0,y),Qh(c,h);for(let S=y;S<D.length;S++)h.push(D[S])}else h=[],Qh(c,h);return h}function Qh(r,s){for(let o=0;o<r.length;o++)s.push((0,r[o])());return s}function G0(r,s=[]){return o=>{o.providersResolver=(u,c)=>function $0(r,s,o){const u=ln();if(u.firstCreatePass){const c=$r(r);Ad(o,u.data,u.blueprint,c,!0),Ad(s,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,s)}}class Md{}class sg{}function Ty(r,s){return new Fc(r,s??null)}class Fc extends Md{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ud(this);const u=ni(s);this._bootstrapComponents=fr(u.bootstrap),this._r3Injector=nd(s,o,[{provide:Md,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver}],ve(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class og extends sg{constructor(s){super(),this.moduleType=s}create(s){return new Fc(this.moduleType,s)}}class z0 extends Md{constructor(s,o,u){super(),this.componentFactoryResolver=new ud(this),this.instance=null;const c=new im([...s,{provide:Md,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver}],o||rl(),u,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Xh(r,s,o=null){return new z0(r,s,o).injector}let Jh=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Hl(0,o.type),c=u.length>0?Xh([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=yt({token:r,providedIn:"environment",factory:()=>new r(at(Ka))}),r})();function W0(r){r.getStandaloneInjector=s=>s.get(Jh).getOrCreateStandaloneInjector(r)}function nf(r,s,o){const u=kr()+r,c=Me();return c[u]===dn?Iu(c,u,o?s.call(o):s()):function Nh(r,s){return r[s]}(c,u)}function Y0(r,s,o,u){return My(Me(),kr(),r,s,o,u)}function My(r,s,o,u,c,h){const y=s+o;return Gs(r,y,c)?Iu(r,y+1,h?u.call(h,c):u(c)):function Pd(r,s){const o=r[s];return o===dn?void 0:o}(r,y+1)}function rf(r,s){const o=ln();let u;const c=r+22;o.firstCreatePass?(u=function UI(r,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(r===u.name)return u}}(s,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const h=u.factory||(u.factory=ls(u.type)),y=Jn(sd);try{const D=Li(!1),S=h();return Li(D),function $_(r,s,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),s[o]=u}(o,Me(),c,S),S}finally{Jn(y)}}function BI(r,s,o){const u=r+22,c=Me(),h=function Ni(r,s){return r[s]}(c,u);return function ta(r,s){return r[1].data[s].pure}(c,u)?My(c,kr(),s,h.transform,o,h):h.transform(o)}function Au(r){return s=>{setTimeout(r,void 0,s)}}const xu=class sf extends I.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let c=s,h=o||(()=>null),y=u;if(s&&"object"==typeof s){const S=s;c=S.next?.bind(S),h=S.error?.bind(S),y=S.complete?.bind(S)}this.__isAsync&&(h=Au(h),c&&(c=Au(c)),y&&(y=Au(y)));const D=super.subscribe({next:c,error:h,complete:y});return s instanceof j.w0&&s.add(D),D}};function X0(){return this._results[hl()]()}class Py{get changes(){return this._changes||(this._changes=new xu)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=hl(),u=Py.prototype;u[o]||(u[o]=X0)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const c=function di(r){return r.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Lu(r,s,o){if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],h=s[u];if(o&&(c=o(c),h=o(h)),h!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ia=(()=>{class r{}return r.__NG_ELEMENT_ID__=GI,r})();const $I=Ia,HI=class extends $I{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,c=Jf(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(c[19]=y.createEmbeddedView(u)),_m(u,c,s),new nc(c)}};function GI(){return hg(Tr(),Me())}function hg(r,s){return 4&r.type?new HI(s,r,Qa(r,s)):null}let fg=(()=>{class r{}return r.__NG_ELEMENT_ID__=J0,r})();function J0(){return rE(Tr(),Me())}const eE=fg,tE=class extends eE{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return Qa(this._hostTNode,this._hostLView)}get injector(){return new ms(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ba(this._hostTNode,this._hostLView);if(ao(s)){const o=rs(s,this._hostLView),u=uo(s);return new ms(o[1].data[u+8],o)}return new ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=nE(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let c,h;"number"==typeof u?c=u:null!=u&&(c=u.index,h=u.injector);const y=s.createEmbeddedView(o||{},h);return this.insert(y,c),y}createComponent(s,o,u,c,h){const y=s&&!function Wa(r){return"function"==typeof r}(s);let D;if(y)D=o;else{const Y=o||{};D=Y.index,u=Y.injector,c=Y.projectableNodes,h=Y.environmentInjector||Y.ngModuleRef}const S=y?s:new cd(bn(s)),N=u||this.parentInjector;if(!h&&null==S.ngModule){const le=(y?N:this.parentInjector).get(Ka,null);le&&(h=le)}const $=S.create(N,c,void 0,h);return this.insert($.hostView,D),$}insert(s,o){const u=s._lView,c=u[1];if(function Ma(r){return ri(r[3])}(u)){const $=this.indexOf(s);if(-1!==$)this.detach($);else{const Y=u[3],le=new tE(Y,Y[6],Y[3]);le.detach(le.indexOf(s))}}const h=this._adjustIndex(o),y=this._lContainer;!function Kc(r,s,o,u){const c=10+u,h=o.length;u>0&&(o[c-1][4]=s),u<h-10?(s[4]=o[c],Po(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const y=s[17];null!==y&&o!==y&&function Rn(r,s){const o=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===o?r[9]=[s]:o.push(s)}(y,s);const D=s[19];null!==D&&D.insertView(r),s[2]|=64}(c,u,y,h);const D=yu(h,y),S=u[11],N=Vl(S,y[7]);return null!==N&&function nh(r,s,o,u,c,h){u[0]=c,u[6]=s,Bl(r,u,o,1,c,h)}(c,y[6],S,u,N,D),s.attachToViewContainerRef(),Po(pg(y),h,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=nE(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Yr(this._lContainer,o);u&&(Qi(pg(this._lContainer),o),Et(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Yr(this._lContainer,o);return u&&null!=Qi(pg(this._lContainer),o)?new nc(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function nE(r){return r[8]}function pg(r){return r[8]||(r[8]=[])}function rE(r,s){let o;const u=s[r.index];if(ri(u))o=u;else{let c;if(8&r.type)c=dr(u);else{const h=s[11];c=h.createComment("");const y=Gr(r,s);Qc(h,Vl(h,y),c,function Iv(r,s){return r.nextSibling(s)}(h,y),!1)}s[r.index]=o=S_(u,s,c,r),Ah(s,o)}return new tE(o,r,s)}class Lc{constructor(s){this.queryList=s,this.matches=null}clone(){return new Lc(this.queryList)}setDirty(){this.queryList.setDirty()}}class af{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,c=[];for(let h=0;h<u;h++){const y=o.getByIndex(h);c.push(this.queries[y.indexInDeclarationView].clone())}return new af(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==gg(s,o).matches&&this.queries[o].setDirty()}}class zI{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class ky{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,h=this.getByIndex(u).embeddedTView(s,c);h&&(h.indexInDeclarationView=u,null!==o?o.push(h):o=[h])}return null!==o?new ky(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Fy{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new Fy(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const h=u[c];this.matchTNodeWithReadOption(s,o,iE(o,h)),this.matchTNodeWithReadOption(s,o,ho(o,s,h,!1,!1))}else u===Ia?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,ho(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Zl||c===fg||c===Ia&&4&o.type)this.addMatch(o.index,-2);else{const h=ho(o,s,c,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function iE(r,s){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function WI(r,s,o,u){return-1===o?function Vc(r,s){return 11&r.type?Qa(r,s):4&r.type?hg(r,s):null}(s,r):-2===o?function qI(r,s,o){return o===Zl?Qa(s,r):o===Ia?hg(s,r):o===fg?rE(s,r):void 0}(r,s,u):$n(r,r[1],o,s)}function sE(r,s,o,u){const c=s[19].queries[u];if(null===c.matches){const h=r.data,y=o.matches,D=[];for(let S=0;S<y.length;S+=2){const N=y[S];D.push(N<0?null:WI(s,h[N],y[S+1],o.metadata.read))}c.matches=D}return c.matches}function Ly(r,s,o,u){const c=r.queries.getByIndex(o),h=c.matches;if(null!==h){const y=sE(r,s,c,o);for(let D=0;D<h.length;D+=2){const S=h[D];if(S>0)u.push(y[D/2]);else{const N=h[D+1],$=s[-S];for(let Y=10;Y<$.length;Y++){const le=$[Y];le[17]===le[3]&&Ly(le[1],le,N,u)}if(null!==$[9]){const Y=$[9];for(let le=0;le<Y.length;le++){const Ie=Y[le];Ly(Ie[1],Ie,N,u)}}}}}return u}function oE(r){const s=Me(),o=ln(),u=Pa();Ps(u+1);const c=gg(o,u);if(r.dirty&&function mi(r){return 4==(4&r[2])}(s)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const h=c.crossesNgTemplate?Ly(o,s,u,[]):sE(o,s,c,u);r.reset(h,Zv),r.notifyOnChanges()}return!0}return!1}function aE(r,s,o){const u=ln();u.firstCreatePass&&(cE(u,new zI(r,s,o),-1),2==(2&s)&&(u.staticViewQueries=!0)),Vy(u,Me(),s)}function uE(r,s,o,u){const c=ln();if(c.firstCreatePass){const h=Tr();cE(c,new zI(s,o,u),h.index),function KI(r,s){const o=r.contentQueries||(r.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,s)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}Vy(c,Me(),o)}function ZI(){return function WD(r,s){return r[19].queries[s].queryList}(Me(),Pa())}function Vy(r,s,o){const u=new Py(4==(4&o));rp(r,s,u,u.destroy),null===s[19]&&(s[19]=new af),s[19].queries.push(new Lc(u))}function cE(r,s,o){null===r.queries&&(r.queries=new ky),r.queries.track(new Fy(s,o))}function gg(r,s){return r.queries.getByIndex(s)}function vg(...r){}const AE=new Fn("Application Initializer");let nu=(()=>{class r{constructor(o){this.appInits=o,this.resolve=vg,this.reject=vg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(Lh(h))o.push(h);else if(Dp(h)){const y=new Promise((D,S)=>{h.subscribe({complete:D,error:S})});o.push(y)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(at(AE,8))},r.\u0275prov=yt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const qy=new Fn("AppId",{providedIn:"root",factory:function bs(){return`${Zy()}${Zy()}${Zy()}`}});function Zy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sD=new Fn("Platform Initializer"),xE=new Fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ky=new Fn("appBootstrapListener");let ME=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=yt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const lf=new Fn("LocaleId",{providedIn:"root",factory:()=>_t(lf,pt.Optional|pt.SkipSelf)||function RE(){return typeof $localize<"u"&&$localize.locale||Oc}()}),OE=new Fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class NE{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}let PE=(()=>{class r{compileModuleSync(o){return new og(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),h=fr(ni(o).declarations).reduce((y,D)=>{const S=bn(D);return S&&y.push(new cd(S)),y},[]);return new NE(u,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=yt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const LE=(()=>Promise.resolve(0))();function wg(r){typeof Zone>"u"?LE.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class na{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xu(!1),this.onMicrotaskEmpty=new xu(!1),this.onStable=new xu(!1),this.onError=new xu(!1),typeof Zone>"u")throw new Oe(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Xy(){let r=Nt.requestAnimationFrame,s=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Bc(r){const s=()=>{!function mo(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Nt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Dg(r),r.isCheckStableRunning=!0,Ig(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Dg(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,h,y,D)=>{try{return hD(r),o.invokeTask(c,h,y,D)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&s(),fD(r)}},onInvoke:(o,u,c,h,y,D,S)=>{try{return hD(r),o.invoke(c,h,y,D,S)}finally{r.shouldCoalesceRunChangeDetection&&s(),fD(r)}},onHasTask:(o,u,c,h)=>{o.hasTask(c,h),u===c&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,Dg(r),Ig(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,c,h)=>(o.handleError(c,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!na.isInAngularZone())throw new Oe(909,!1)}static assertNotInAngularZone(){if(na.isInAngularZone())throw new Oe(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,c){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+c,s,VE,vg,vg);try{return h.runTask(y,o,u)}finally{h.cancelTask(y)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const VE={};function Ig(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Dg(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function hD(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function fD(r){r._nesting--,Ig(r)}class ev{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xu,this.onMicrotaskEmpty=new xu,this.onStable=new xu,this.onError=new xu}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,c){return s.apply(o,u)}}const Bd=new Fn(""),bg=new Fn("");let nv,Cg=(()=>{class r{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nv||(function tv(r){nv=r}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{na.assertNotInAngularZone(),wg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wg(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(at(na),at(UE),at(bg))},r.\u0275prov=yt({token:r,factory:r.\u0275fac}),r})(),UE=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return nv?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=yt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Tl=null;const pD=new Fn("AllowMultipleToken"),BE=new Fn("PlatformDestroyListeners");class gD{constructor(s,o){this.name=s,this.token=o}}function Tg(r,s,o=[]){const u=`Platform: ${s}`,c=new Fn(u);return(h=[])=>{let y=Sl();if(!y||y.injector.get(pD,!1)){const D=[...o,...h,{provide:c,useValue:!0}];r?r(D):function jE(r){if(Tl&&!Tl.get(pD,!1))throw new Oe(400,!1);Tl=r;const s=r.get(Sg);(function $E(r){const s=r.get(sD,null);s&&s.forEach(o=>o())})(r)}(function hf(r=[],s){return js.create({name:s,providers:[{provide:fh,useValue:"platform"},{provide:BE,useValue:new Set([()=>Tl=null])},...r]})}(D,u))}return function df(r){const s=Sl();if(!s)throw new Oe(401,!1);return s}()}}function Sl(){return Tl?.get(Sg)??null}let Sg=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function Ag(r,s){let o;return o="noop"===r?new ev:("zone.js"===r?void 0:r)||new na(s),o}(u?.ngZone,function HE(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:na,useValue:c}];return c.run(()=>{const y=js.create({providers:h,parent:this.injector,name:o.moduleType.name}),D=o.create(y),S=D.injector.get(Yl,null);if(!S)throw new Oe(402,!1);return c.runOutsideAngular(()=>{const N=c.onError.subscribe({next:$=>{S.handleError($)}});D.onDestroy(()=>{mf(this._modules,D),N.unsubscribe()})}),function GE(r,s,o){try{const u=o();return Lh(u)?u.catch(c=>{throw s.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(S,c,()=>{const N=D.injector.get(nu);return N.runInitializers(),N.donePromise.then(()=>(function yy(r){ct(r,"Expected localeId to be defined"),"string"==typeof r&&(my=r.toLowerCase().replace(/_/g,"-"))}(D.injector.get(lf,Oc)||Oc),this._moduleDoBootstrap(D),D))})})}bootstrapModule(o,u=[]){const c=pf({},u);return function eb(r,s,o){const u=new og(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const u=o.injector.get(gf);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Oe(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(BE,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(at(js))},r.\u0275prov=yt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function pf(r,s){return Array.isArray(s)?s.reduce(pf,r):{...r,...s}}let gf=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new p.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),y=new p.y(D=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{na.assertNotInAngularZone(),wg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{na.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ae.T)(h,y.pipe((0,ue.B)()))}bootstrap(o,u){const c=o instanceof Gv;if(!this._injector.get(nu).done)throw!c&&Gn(o),new Oe(405,false);let y;y=c?o:this._injector.get(Ya).resolveComponentFactory(o),this.componentTypes.push(y.componentType);const D=function tb(r){return r.isBoundToModule}(y)?void 0:this._injector.get(Md),N=y.create(js.NULL,[],u||y.selector,D),$=N.location.nativeElement,Y=N.injector.get(Bd,null);return Y?.registerApplication($),N.onDestroy(()=>{this.detachView(N.hostView),mf(this.components,N),Y?.unregisterApplication($)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new Oe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;mf(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(Ky,[]);u.push(...this._bootstrapListeners),u.forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>mf(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Oe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(at(na),at(Ka),at(Yl))},r.\u0275prov=yt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function mf(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}function rb(){return!1}let rv=(()=>{class r{}return r.__NG_ELEMENT_ID__=xg,r})();function xg(r){return function _f(r,s,o){if(Ta(r)&&!o){const u=pn(r.index,s);return new nc(u,u)}return 47&r.type?new nc(s[16],s):null}(Tr(),Me(),16==(16&r))}class KE{constructor(){}supports(s){return mp(s)}create(s){return new cv(s)}}const If=(r,s)=>s;class cv{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||If}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,c=0,h=null;for(;o||u;){const y=!u||o&&o.currentIndex<ID(u,c,h)?o:u,D=ID(y,c,h),S=y.currentIndex;if(y===u)c--,u=u._nextRemoved;else if(o=o._next,null==y.previousIndex)c++;else{h||(h=[]);const N=D-c,$=S-c;if(N!=$){for(let le=0;le<N;le++){const Ie=le<h.length?h[le]:h[le]=0,Ze=Ie+le;$<=Ze&&Ze<N&&(h[le]=Ie+1)}h[y.previousIndex]=$-N}}D!==S&&s(y,D,S)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!mp(s))throw new Oe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,y,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let D=0;D<this.length;D++)h=s[D],y=this._trackByFn(D,h),null!==o&&Object.is(o.trackById,y)?(u&&(o=this._verifyReinsertion(o,h,y,D)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,y,D),u=!0),o=o._next}else c=0,function Pm(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[hl()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,D=>{y=this._trackByFn(c,D),null!==o&&Object.is(o.trackById,y)?(u&&(o=this._verifyReinsertion(o,D,y,c)),Object.is(o.item,D)||this._addIdentityChange(o,D)):(o=this._mismatch(o,D,y,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,h,c)):s=this._addAfter(new YE(o,u),h,c),s}_verifyReinsertion(s,o,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const c=null===o?this._itHead:o._next;return s._next=c,s._prev=o,null===c?this._itTail=s:c._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new $d),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $d),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class YE{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QE{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class $d{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new QE,this.map.set(o,u)),u.add(s)}get(s,o){const c=this.map.get(s);return c?c.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ID(r,s,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+s+c}class XE{constructor(){}supports(s){return s instanceof Map||Hi(s)}create(){return new JE}}class JE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Hi(s)))throw new Oe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,o);const h=c._prev,y=c._next;return h&&(h._next=y),y&&(y._prev=h),c._next=null,c._prev=null,c}const u=new ab(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class ab{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DD(){return new ew([new KE])}let ew=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||DD()),deps:[[r,new R,new qr]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Oe(901,!1)}}return r.\u0275prov=yt({token:r,providedIn:"root",factory:DD}),r})();function tw(){return new Og([new XE])}let Og=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||tw()),deps:[[r,new R,new qr]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Oe(901,!1)}}return r.\u0275prov=yt({token:r,providedIn:"root",factory:tw}),r})();const TD=Tg(null,"core",[]);let rw=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(at(gf))},r.\u0275mod=Ti({type:r}),r.\u0275inj=Mn({}),r})();function SD(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},1481:(mt,Te,V)=>{V.d(Te,{Dx:()=>er,b2:()=>pr,q6:()=>Pn});var I=V(6895),j=V(4650);class p extends I.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ae extends p{static makeCurrent(){(0,I.HT)(new ae)}onAndCancel(ie,K,de){return ie.addEventListener(K,de,!1),()=>{ie.removeEventListener(K,de,!1)}}dispatchEvent(ie,K){ie.dispatchEvent(K)}remove(ie){ie.parentNode&&ie.parentNode.removeChild(ie)}createElement(ie,K){return(K=K||this.getDefaultDocument()).createElement(ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ie){return ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(ie){return ie instanceof DocumentFragment}getGlobalEventTarget(ie,K){return"window"===K?window:"document"===K?ie:"body"===K?ie.body:null}getBaseHref(ie){const K=function fe(){return ue=ue||document.querySelector("base"),ue?ue.getAttribute("href"):null}();return null==K?null:function ve(oe){Ee=Ee||document.createElement("a"),Ee.setAttribute("href",oe);const ie=Ee.pathname;return"/"===ie.charAt(0)?ie:`/${ie}`}(K)}resetBaseElement(){ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(ie){return(0,I.Mx)(document.cookie,ie)}}let Ee,ue=null;const we=new j.OlP("TRANSITION_ID"),te=[{provide:j.ip1,useFactory:function re(oe,ie,K){return()=>{K.get(j.CZH).donePromise.then(()=>{const de=(0,I.q)(),ze=ie.querySelectorAll(`style[ng-transition="${oe}"]`);for(let rt=0;rt<ze.length;rt++)de.remove(ze[rt])})}},deps:[we,I.K0,j.zs3],multi:!0}];let Je=(()=>{class oe{build(){return new XMLHttpRequest}}return oe.\u0275fac=function(K){return new(K||oe)},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const qe=new j.OlP("EventManagerPlugins");let st=(()=>{class oe{constructor(K,de){this._zone=de,this._eventNameToPlugin=new Map,K.forEach(ze=>ze.manager=this),this._plugins=K.slice().reverse()}addEventListener(K,de,ze){return this._findPluginFor(de).addEventListener(K,de,ze)}addGlobalEventListener(K,de,ze){return this._findPluginFor(de).addGlobalEventListener(K,de,ze)}getZone(){return this._zone}_findPluginFor(K){const de=this._eventNameToPlugin.get(K);if(de)return de;const ze=this._plugins;for(let rt=0;rt<ze.length;rt++){const Ht=ze[rt];if(Ht.supports(K))return this._eventNameToPlugin.set(K,Ht),Ht}throw new Error(`No event manager plugin found for event ${K}`)}}return oe.\u0275fac=function(K){return new(K||oe)(j.LFG(qe),j.LFG(j.R0b))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class vt{constructor(ie){this._doc=ie}addGlobalEventListener(ie,K,de){const ze=(0,I.q)().getGlobalEventTarget(this._doc,ie);if(!ze)throw new Error(`Unsupported event target ${ze} for event ${K}`);return this.addEventListener(ze,K,de)}}let Oe=(()=>{class oe{constructor(){this._stylesSet=new Set}addStyles(K){const de=new Set;K.forEach(ze=>{this._stylesSet.has(ze)||(this._stylesSet.add(ze),de.add(ze))}),this.onStylesAdded(de)}onStylesAdded(K){}getAllStyles(){return Array.from(this._stylesSet)}}return oe.\u0275fac=function(K){return new(K||oe)},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),$e=(()=>{class oe extends Oe{constructor(K){super(),this._doc=K,this._hostNodes=new Map,this._hostNodes.set(K.head,[])}_addStylesToHost(K,de,ze){K.forEach(rt=>{const Ht=this._doc.createElement("style");Ht.textContent=rt,ze.push(de.appendChild(Ht))})}addHost(K){const de=[];this._addStylesToHost(this._stylesSet,K,de),this._hostNodes.set(K,de)}removeHost(K){const de=this._hostNodes.get(K);de&&de.forEach(He),this._hostNodes.delete(K)}onStylesAdded(K){this._hostNodes.forEach((de,ze)=>{this._addStylesToHost(K,ze,de)})}ngOnDestroy(){this._hostNodes.forEach(K=>K.forEach(He))}}return oe.\u0275fac=function(K){return new(K||oe)(j.LFG(I.K0))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();function He(oe){(0,I.q)().remove(oe)}const Ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ne=/%COMP%/g;function ut(oe,ie){return ie.flat(100).map(K=>K.replace(Ne,oe))}function nt(oe){return ie=>{if("__ngUnwrap__"===ie)return oe;!1===oe(ie)&&(ie.preventDefault(),ie.returnValue=!1)}}let dt=(()=>{class oe{constructor(K,de,ze){this.eventManager=K,this.sharedStylesHost=de,this.appId=ze,this.rendererByCompId=new Map,this.defaultRenderer=new ht(K)}createRenderer(K,de){if(!K||!de)return this.defaultRenderer;switch(de.encapsulation){case j.ifc.Emulated:{let ze=this.rendererByCompId.get(de.id);return ze||(ze=new Ge(this.eventManager,this.sharedStylesHost,de,this.appId),this.rendererByCompId.set(de.id,ze)),ze.applyToHost(K),ze}case j.ifc.ShadowDom:return new et(this.eventManager,this.sharedStylesHost,K,de);default:if(!this.rendererByCompId.has(de.id)){const ze=ut(de.id,de.styles);this.sharedStylesHost.addStyles(ze),this.rendererByCompId.set(de.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return oe.\u0275fac=function(K){return new(K||oe)(j.LFG(st),j.LFG($e),j.LFG(j.AFp))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class ht{constructor(ie){this.eventManager=ie,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ie,K){return K?document.createElementNS(Ye[K]||K,ie):document.createElement(ie)}createComment(ie){return document.createComment(ie)}createText(ie){return document.createTextNode(ie)}appendChild(ie,K){(Pe(ie)?ie.content:ie).appendChild(K)}insertBefore(ie,K,de){ie&&(Pe(ie)?ie.content:ie).insertBefore(K,de)}removeChild(ie,K){ie&&ie.removeChild(K)}selectRootElement(ie,K){let de="string"==typeof ie?document.querySelector(ie):ie;if(!de)throw new Error(`The selector "${ie}" did not match any elements`);return K||(de.textContent=""),de}parentNode(ie){return ie.parentNode}nextSibling(ie){return ie.nextSibling}setAttribute(ie,K,de,ze){if(ze){K=ze+":"+K;const rt=Ye[ze];rt?ie.setAttributeNS(rt,K,de):ie.setAttribute(K,de)}else ie.setAttribute(K,de)}removeAttribute(ie,K,de){if(de){const ze=Ye[de];ze?ie.removeAttributeNS(ze,K):ie.removeAttribute(`${de}:${K}`)}else ie.removeAttribute(K)}addClass(ie,K){ie.classList.add(K)}removeClass(ie,K){ie.classList.remove(K)}setStyle(ie,K,de,ze){ze&(j.JOm.DashCase|j.JOm.Important)?ie.style.setProperty(K,de,ze&j.JOm.Important?"important":""):ie.style[K]=de}removeStyle(ie,K,de){de&j.JOm.DashCase?ie.style.removeProperty(K):ie.style[K]=""}setProperty(ie,K,de){ie[K]=de}setValue(ie,K){ie.nodeValue=K}listen(ie,K,de){return"string"==typeof ie?this.eventManager.addGlobalEventListener(ie,K,nt(de)):this.eventManager.addEventListener(ie,K,nt(de))}}function Pe(oe){return"TEMPLATE"===oe.tagName&&void 0!==oe.content}class Ge extends ht{constructor(ie,K,de,ze){super(ie),this.component=de;const rt=ut(ze+"-"+de.id,de.styles);K.addStyles(rt),this.contentAttr=function Ce(oe){return"_ngcontent-%COMP%".replace(Ne,oe)}(ze+"-"+de.id),this.hostAttr=function Fe(oe){return"_nghost-%COMP%".replace(Ne,oe)}(ze+"-"+de.id)}applyToHost(ie){super.setAttribute(ie,this.hostAttr,"")}createElement(ie,K){const de=super.createElement(ie,K);return super.setAttribute(de,this.contentAttr,""),de}}class et extends ht{constructor(ie,K,de,ze){super(ie),this.sharedStylesHost=K,this.hostEl=de,this.shadowRoot=de.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const rt=ut(ze.id,ze.styles);for(let Ht=0;Ht<rt.length;Ht++){const rr=document.createElement("style");rr.textContent=rt[Ht],this.shadowRoot.appendChild(rr)}}nodeOrShadowRoot(ie){return ie===this.hostEl?this.shadowRoot:ie}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ie,K){return super.appendChild(this.nodeOrShadowRoot(ie),K)}insertBefore(ie,K,de){return super.insertBefore(this.nodeOrShadowRoot(ie),K,de)}removeChild(ie,K){return super.removeChild(this.nodeOrShadowRoot(ie),K)}parentNode(ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ie)))}}let tt=(()=>{class oe extends vt{constructor(K){super(K)}supports(K){return!0}addEventListener(K,de,ze){return K.addEventListener(de,ze,!1),()=>this.removeEventListener(K,de,ze)}removeEventListener(K,de,ze){return K.removeEventListener(de,ze)}}return oe.\u0275fac=function(K){return new(K||oe)(j.LFG(I.K0))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const ct=["alt","control","meta","shift"],ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yn={alt:oe=>oe.altKey,control:oe=>oe.ctrlKey,meta:oe=>oe.metaKey,shift:oe=>oe.shiftKey};let me=(()=>{class oe extends vt{constructor(K){super(K)}supports(K){return null!=oe.parseEventName(K)}addEventListener(K,de,ze){const rt=oe.parseEventName(de),Ht=oe.eventCallback(rt.fullKey,ze,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,I.q)().onAndCancel(K,rt.domEventName,Ht))}static parseEventName(K){const de=K.toLowerCase().split("."),ze=de.shift();if(0===de.length||"keydown"!==ze&&"keyup"!==ze)return null;const rt=oe._normalizeKey(de.pop());let Ht="",rr=de.indexOf("code");if(rr>-1&&(de.splice(rr,1),Ht="code."),ct.forEach(Ji=>{const Gi=de.indexOf(Ji);Gi>-1&&(de.splice(Gi,1),Ht+=Ji+".")}),Ht+=rt,0!=de.length||0===rt.length)return null;const ir={};return ir.domEventName=ze,ir.fullKey=Ht,ir}static matchEventFullKeyCode(K,de){let ze=ft[K.key]||K.key,rt="";return de.indexOf("code.")>-1&&(ze=K.code,rt="code."),!(null==ze||!ze)&&(ze=ze.toLowerCase()," "===ze?ze="space":"."===ze&&(ze="dot"),ct.forEach(Ht=>{Ht!==ze&&(0,yn[Ht])(K)&&(rt+=Ht+".")}),rt+=ze,rt===de)}static eventCallback(K,de,ze){return rt=>{oe.matchEventFullKeyCode(rt,K)&&ze.runGuarded(()=>de(rt))}}static _normalizeKey(K){return"esc"===K?"escape":K}}return oe.\u0275fac=function(K){return new(K||oe)(j.LFG(I.K0))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const Pn=(0,j.eFA)(j._c5,"browser",[{provide:j.Lbi,useValue:I.bD},{provide:j.g9A,useValue:function cn(){ae.makeCurrent()},multi:!0},{provide:I.K0,useFactory:function Dn(){return(0,j.RDi)(document),document},deps:[]}]),Rr=new j.OlP(""),ar=[{provide:j.rWj,useClass:class ce{addToWindow(ie){j.dqk.getAngularTestability=(de,ze=!0)=>{const rt=ie.findTestabilityInTree(de,ze);if(null==rt)throw new Error("Could not find testability for element.");return rt},j.dqk.getAllAngularTestabilities=()=>ie.getAllTestabilities(),j.dqk.getAllAngularRootElements=()=>ie.getAllRootElements(),j.dqk.frameworkStabilizers||(j.dqk.frameworkStabilizers=[]),j.dqk.frameworkStabilizers.push(de=>{const ze=j.dqk.getAllAngularTestabilities();let rt=ze.length,Ht=!1;const rr=function(ir){Ht=Ht||ir,rt--,0==rt&&de(Ht)};ze.forEach(function(ir){ir.whenStable(rr)})})}findTestabilityInTree(ie,K,de){return null==K?null:ie.getTestability(K)??(de?(0,I.q)().isShadowRoot(K)?this.findTestabilityInTree(ie,K.host,!0):this.findTestabilityInTree(ie,K.parentElement,!0):null)}},deps:[]},{provide:j.lri,useClass:j.dDg,deps:[j.R0b,j.eoX,j.rWj]},{provide:j.dDg,useClass:j.dDg,deps:[j.R0b,j.eoX,j.rWj]}],Ln=[{provide:j.zSh,useValue:"root"},{provide:j.qLn,useFactory:function Zn(){return new j.qLn},deps:[]},{provide:qe,useClass:tt,multi:!0,deps:[I.K0,j.R0b,j.Lbi]},{provide:qe,useClass:me,multi:!0,deps:[I.K0]},{provide:dt,useClass:dt,deps:[st,$e,j.AFp]},{provide:j.FYo,useExisting:dt},{provide:Oe,useExisting:$e},{provide:$e,useClass:$e,deps:[I.K0]},{provide:st,useClass:st,deps:[qe,j.R0b]},{provide:I.JF,useClass:Je,deps:[]},[]];let pr=(()=>{class oe{constructor(K){}static withServerTransition(K){return{ngModule:oe,providers:[{provide:j.AFp,useValue:K.appId},{provide:we,useExisting:j.AFp},te]}}}return oe.\u0275fac=function(K){return new(K||oe)(j.LFG(Rr,12))},oe.\u0275mod=j.oAB({type:oe}),oe.\u0275inj=j.cJS({providers:[...Ln,...ar],imports:[I.ez,j.hGG]}),oe})(),er=(()=>{class oe{constructor(K){this._doc=K}getTitle(){return this._doc.title}setTitle(K){this._doc.title=K||""}}return oe.\u0275fac=function(K){return new(K||oe)(j.LFG(I.K0))},oe.\u0275prov=j.Yz7({token:oe,factory:function(K){let de=null;return de=K?new K:function Jn(){return new er((0,j.LFG)(I.K0))}(),de},providedIn:"root"}),oe})();typeof window<"u"&&window},2435:(mt,Te,V)=>{V.d(Te,{gz:()=>Oi,F0:()=>$n,rH:()=>fa,Od:()=>li,Bz:()=>di,lC:()=>ds});var I=V(4650),j=V(8996),p=V(9646),ae=V(1135),ue=V(6805),fe=V(9751),Ee=V(4742),ve=V(4671),we=V(3268),re=V(3269),te=V(1810),ce=V(5403),Je=V(9672);function qe(...v){const _=(0,re.yG)(v),m=(0,re.jO)(v),{args:C,keys:O}=(0,Ee.D)(v);if(0===C.length)return(0,j.D)([],_);const U=new fe.y(function st(v,_,m=ve.y){return C=>{vt(_,()=>{const{length:O}=v,U=new Array(O);let G=O,he=O;for(let Le=0;Le<O;Le++)vt(_,()=>{const bt=(0,j.D)(v[Le],_);let Ct=!1;bt.subscribe((0,ce.x)(C,En=>{U[Le]=En,Ct||(Ct=!0,he--),he||C.next(m(U.slice()))},()=>{--G||C.complete()}))},C)},C)}}(C,_,O?G=>(0,te.n)(O,G):ve.y));return m?U.pipe((0,we.Z)(m)):U}function vt(v,_,m){v?(0,Je.f)(m,v,_):_()}var Oe=V(7272),$e=V(8421);function He(v){return new fe.y(_=>{(0,$e.Xf)(v()).subscribe(_)})}var Ye=V(9635),Ne=V(576);function Ue(v,_){const m=(0,Ne.m)(v)?v:()=>v,C=O=>O.error(m());return new fe.y(_?O=>_.schedule(C,0,O):C)}var Be=V(515),ot=V(727),pe=V(4482);function Ce(){return(0,pe.e)((v,_)=>{let m=null;v._refCount++;const C=(0,ce.x)(_,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(m=null);const O=v._connection,U=m;m=null,O&&(!U||O===U)&&O.unsubscribe(),_.unsubscribe()});v.subscribe(C),C.closed||(m=v.connect())})}class Fe extends fe.y{constructor(_,m){super(),this.source=_,this.subjectFactory=m,this._subject=null,this._refCount=0,this._connection=null,(0,pe.A)(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,_?.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new ot.w0;const m=this.getSubject();_.add(this.source.subscribe((0,ce.x)(m,void 0,()=>{this._teardown(),m.complete()},C=>{this._teardown(),m.error(C)},()=>this._teardown()))),_.closed&&(this._connection=null,_=ot.w0.EMPTY)}return _}refCount(){return Ce()(this)}}var ut=V(7579),nt=V(6895),dt=V(4004),ht=V(3900),De=V(5698),xe=V(8675),Pe=V(9300),Ge=V(5577),et=V(590);function tt(v,_){return(0,Ne.m)(_)?(0,Ge.z)(v,_,1):(0,Ge.z)(v,1)}var ct=V(8505);function ft(v){return(0,pe.e)((_,m)=>{let U,C=null,O=!1;C=_.subscribe((0,ce.x)(m,void 0,void 0,G=>{U=(0,$e.Xf)(v(G,ft(v)(_))),C?(C.unsubscribe(),C=null,U.subscribe(m)):O=!0})),O&&(C.unsubscribe(),C=null,U.subscribe(m))})}var yn=V(5026);function me(v){return v<=0?()=>Be.E:(0,pe.e)((_,m)=>{let C=[];_.subscribe((0,ce.x)(m,O=>{C.push(O),v<C.length&&C.shift()},()=>{for(const O of C)m.next(O);m.complete()},void 0,()=>{C=null}))})}var Tt=V(8068),yt=V(6590);function St(v,_){const m=arguments.length>=2;return C=>C.pipe(v?(0,Pe.h)((O,U)=>v(O,U,C)):ve.y,me(1),m?(0,yt.d)(_):(0,Tt.T)(()=>new ue.K))}function cn(v){return(0,pe.e)((_,m)=>{try{_.subscribe(m)}finally{m.add(v)}})}var Zn=V(8189),Dn=V(1481);const Lt="primary",Pn=Symbol("RouteTitle");class Rr{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const m=this.params[_];return Array.isArray(m)?m[0]:m}return null}getAll(_){if(this.has(_)){const m=this.params[_];return Array.isArray(m)?m:[m]}return[]}get keys(){return Object.keys(this.params)}}function ar(v){return new Rr(v)}function Ln(v,_,m){const C=m.path.split("/");if(C.length>v.length||"full"===m.pathMatch&&(_.hasChildren()||C.length<v.length))return null;const O={};for(let U=0;U<C.length;U++){const G=C[U],he=v[U];if(G.startsWith(":"))O[G.substring(1)]=he;else if(G!==he.path)return null}return{consumed:v.slice(0,C.length),posParams:O}}function pt(v,_){const m=v?Object.keys(v):void 0,C=_?Object.keys(_):void 0;if(!m||!C||m.length!=C.length)return!1;let O;for(let U=0;U<m.length;U++)if(O=m[U],!gr(v[O],_[O]))return!1;return!0}function gr(v,_){if(Array.isArray(v)&&Array.isArray(_)){if(v.length!==_.length)return!1;const m=[...v].sort(),C=[..._].sort();return m.every((O,U)=>C[U]===O)}return v===_}function wr(v){return Array.prototype.concat.apply([],v)}function Jn(v){return v.length>0?v[v.length-1]:null}function Yt(v,_){for(const m in v)v.hasOwnProperty(m)&&_(v[m],m)}function Nt(v){return(0,I.CqO)(v)?v:(0,I.QGY)(v)?(0,j.D)(Promise.resolve(v)):(0,p.of)(v)}const Mt=!1,Wt={exact:function mr(v,_,m){if(!Ve(v.segments,_.segments)||!ti(v.segments,_.segments,m)||v.numberOfChildren!==_.numberOfChildren)return!1;for(const C in _.children)if(!v.children[C]||!mr(v.children[C],_.children[C],m))return!1;return!0},subset:ei},Tn={exact:function Kn(v,_){return pt(v,_)},subset:function tr(v,_){return Object.keys(_).length<=Object.keys(v).length&&Object.keys(_).every(m=>gr(v[m],_[m]))},ignored:()=>!0};function vn(v,_,m){return Wt[m.paths](v.root,_.root,m.matrixParams)&&Tn[m.queryParams](v.queryParams,_.queryParams)&&!("exact"===m.fragment&&v.fragment!==_.fragment)}function ei(v,_,m){return tn(v,_,_.segments,m)}function tn(v,_,m,C){if(v.segments.length>m.length){const O=v.segments.slice(0,m.length);return!(!Ve(O,m)||_.hasChildren()||!ti(O,m,C))}if(v.segments.length===m.length){if(!Ve(v.segments,m)||!ti(v.segments,m,C))return!1;for(const O in _.children)if(!v.children[O]||!ei(v.children[O],_.children[O],C))return!1;return!0}{const O=m.slice(0,v.segments.length),U=m.slice(v.segments.length);return!!(Ve(v.segments,O)&&ti(v.segments,O,C)&&v.children[Lt])&&tn(v.children[Lt],_,U,C)}}function ti(v,_,m){return _.every((C,O)=>Tn[m](v[O].parameters,C.parameters))}class qt{constructor(_=new Ut([],{}),m={},C=null){this.root=_,this.queryParams=m,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ar(this.queryParams)),this._queryParamMap}toString(){return on.serialize(this)}}class Ut{constructor(_,m){this.segments=_,this.children=m,this.parent=null,Yt(m,(C,O)=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jn(this)}}class Vn{constructor(_,m){this.path=_,this.parameters=m}get parameterMap(){return this._parameterMap||(this._parameterMap=ar(this.parameters)),this._parameterMap}toString(){return gt(this)}}function Ve(v,_){return v.length===_.length&&v.every((m,C)=>m.path===_[C].path)}let Pt=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(){return new $t},providedIn:"root"}),v})();class $t{parse(_){const m=new ir(_);return new qt(m.parseRootSegment(),m.parseQueryParams(),m.parseFragment())}serialize(_){const m=`/${se(_.root,!0)}`,C=function ie(v){const _=Object.keys(v).map(m=>{const C=v[m];return Array.isArray(C)?C.map(O=>`${q(m)}=${q(O)}`).join("&"):`${q(m)}=${q(C)}`}).filter(m=>!!m);return _.length?`?${_.join("&")}`:""}(_.queryParams);return`${m}${C}${"string"==typeof _.fragment?`#${function Z(v){return encodeURI(v)}(_.fragment)}`:""}`}}const on=new $t;function jn(v){return v.segments.map(_=>gt(_)).join("/")}function se(v,_){if(!v.hasChildren())return jn(v);if(_){const m=v.children[Lt]?se(v.children[Lt],!1):"",C=[];return Yt(v.children,(O,U)=>{U!==Lt&&C.push(`${U}:${se(O,!1)}`)}),C.length>0?`${m}(${C.join("//")})`:m}{const m=function _t(v,_){let m=[];return Yt(v.children,(C,O)=>{O===Lt&&(m=m.concat(_(C,O)))}),Yt(v.children,(C,O)=>{O!==Lt&&(m=m.concat(_(C,O)))}),m}(v,(C,O)=>O===Lt?[se(v.children[Lt],!1)]:[`${O}:${se(C,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Lt]?`${jn(v)}/${m[0]}`:`${jn(v)}/(${m.join("//")})`}}function ne(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q(v){return ne(v).replace(/%3B/gi,";")}function z(v){return ne(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ye(v){return decodeURIComponent(v)}function ke(v){return ye(v.replace(/\+/g,"%20"))}function gt(v){return`${z(v.path)}${function oe(v){return Object.keys(v).map(_=>`;${z(_)}=${z(v[_])}`).join("")}(v.parameters)}`}const K=/^[^\/()?;=#]+/;function de(v){const _=v.match(K);return _?_[0]:""}const ze=/^[^=?&#]+/,Ht=/^[^&#]+/;class ir{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let m={};this.peekStartsWith("/(")&&(this.capture("/"),m=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(_.length>0||Object.keys(m).length>0)&&(C[Lt]=new Ut(_,m)),C}parseSegment(){const _=de(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new I.vHH(4009,Mt);return this.capture(_),new Vn(ye(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const m=de(this.remaining);if(!m)return;this.capture(m);let C="";if(this.consumeOptional("=")){const O=de(this.remaining);O&&(C=O,this.capture(C))}_[ye(m)]=ye(C)}parseQueryParam(_){const m=function rt(v){const _=v.match(ze);return _?_[0]:""}(this.remaining);if(!m)return;this.capture(m);let C="";if(this.consumeOptional("=")){const G=function rr(v){const _=v.match(Ht);return _?_[0]:""}(this.remaining);G&&(C=G,this.capture(C))}const O=ke(m),U=ke(C);if(_.hasOwnProperty(O)){let G=_[O];Array.isArray(G)||(G=[G],_[O]=G),G.push(U)}else _[O]=U}parseParens(_){const m={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=de(this.remaining),O=this.remaining[C.length];if("/"!==O&&")"!==O&&";"!==O)throw new I.vHH(4010,Mt);let U;C.indexOf(":")>-1?(U=C.slice(0,C.indexOf(":")),this.capture(U),this.capture(":")):_&&(U=Lt);const G=this.parseChildren();m[U]=1===Object.keys(G).length?G[Lt]:new Ut([],G),this.consumeOptional("//")}return m}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new I.vHH(4011,Mt)}}function Ji(v){return v.segments.length>0?new Ut([],{[Lt]:v}):v}function Gi(v){const _={};for(const C of Object.keys(v.children)){const U=Gi(v.children[C]);(U.segments.length>0||U.hasChildren())&&(_[C]=U)}return function Ir(v){if(1===v.numberOfChildren&&v.children[Lt]){const _=v.children[Lt];return new Ut(v.segments.concat(_.segments),_.children)}return v}(new Ut(v.segments,_))}function Ti(v){return v instanceof qt}function bn(v,_,m,C,O){if(0===m.length)return Gn(_.root,_.root,_.root,C,O);const U=function It(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new ai(!0,0,v);let _=0,m=!1;const C=v.reduce((O,U,G)=>{if("object"==typeof U&&null!=U){if(U.outlets){const he={};return Yt(U.outlets,(Le,bt)=>{he[bt]="string"==typeof Le?Le.split("/"):Le}),[...O,{outlets:he}]}if(U.segmentPath)return[...O,U.segmentPath]}return"string"!=typeof U?[...O,U]:0===G?(U.split("/").forEach((he,Le)=>{0==Le&&"."===he||(0==Le&&""===he?m=!0:".."===he?_++:""!=he&&O.push(he))}),O):[...O,U]},[]);return new ai(m,_,C)}(m);return U.toRoot()?Gn(_.root,_.root,new Ut([],{}),C,O):function G(Le){const bt=function Or(v,_,m,C){if(v.isAbsolute)return new Zt(_.root,!0,0);if(-1===C)return new Zt(m,m===_.root,0);return function Si(v,_,m){let C=v,O=_,U=m;for(;U>O;){if(U-=O,C=C.parent,!C)throw new I.vHH(4005,!1);O=C.segments.length}return new Zt(C,!1,O-U)}(m,C+(Bn(v.commands[0])?0:1),v.numberOfDoubleDots)}(U,_,v.snapshot?._urlSegment,Le),Ct=bt.processChildren?kn(bt.segmentGroup,bt.index,U.commands):zi(bt.segmentGroup,bt.index,U.commands);return Gn(_.root,bt.segmentGroup,Ct,C,O)}(v.snapshot?._lastPathIndex)}function Bn(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function ur(v){return"object"==typeof v&&null!=v&&v.outlets}function Gn(v,_,m,C,O){let G,U={};C&&Yt(C,(Le,bt)=>{U[bt]=Array.isArray(Le)?Le.map(Ct=>`${Ct}`):`${Le}`}),G=v===_?m:ni(v,_,m);const he=Ji(Gi(G));return new qt(he,U,O)}function ni(v,_,m){const C={};return Yt(v.children,(O,U)=>{C[U]=O===_?m:ni(O,_,m)}),new Ut(v.segments,C)}class ai{constructor(_,m,C){if(this.isAbsolute=_,this.numberOfDoubleDots=m,this.commands=C,_&&C.length>0&&Bn(C[0]))throw new I.vHH(4003,!1);const O=C.find(ur);if(O&&O!==Jn(C))throw new I.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zt{constructor(_,m,C){this.segmentGroup=_,this.processChildren=m,this.index=C}}function zi(v,_,m){if(v||(v=new Ut([],{})),0===v.segments.length&&v.hasChildren())return kn(v,_,m);const C=function ra(v,_,m){let C=0,O=_;const U={match:!1,pathIndex:0,commandIndex:0};for(;O<v.segments.length;){if(C>=m.length)return U;const G=v.segments[O],he=m[C];if(ur(he))break;const Le=`${he}`,bt=C<m.length-1?m[C+1]:null;if(O>0&&void 0===Le)break;if(Le&&bt&&"object"==typeof bt&&void 0===bt.outlets){if(!Ts(Le,bt,G))return U;C+=2}else{if(!Ts(Le,{},G))return U;C++}O++}return{match:!0,pathIndex:O,commandIndex:C}}(v,_,m),O=m.slice(C.commandIndex);if(C.match&&C.pathIndex<v.segments.length){const U=new Ut(v.segments.slice(0,C.pathIndex),{});return U.children[Lt]=new Ut(v.segments.slice(C.pathIndex),v.children),kn(U,0,O)}return C.match&&0===O.length?new Ut(v.segments,{}):C.match&&!v.hasChildren()?Ai(v,_,m):C.match?kn(v,0,O):Ai(v,_,m)}function kn(v,_,m){if(0===m.length)return new Ut(v.segments,{});{const C=function cr(v){return ur(v[0])?v[0].outlets:{[Lt]:v}}(m),O={};return!C[Lt]&&v.children[Lt]&&1===v.numberOfChildren&&0===v.children[Lt].segments.length?kn(v.children[Lt],_,m):(Yt(C,(U,G)=>{"string"==typeof U&&(U=[U]),null!==U&&(O[G]=zi(v.children[G],_,U))}),Yt(v.children,(U,G)=>{void 0===C[G]&&(O[G]=U)}),new Ut(v.segments,O))}}function Ai(v,_,m){const C=v.segments.slice(0,_);let O=0;for(;O<m.length;){const U=m[O];if(ur(U)){const Le=sn(U.outlets);return new Ut(C,Le)}if(0===O&&Bn(m[0])){C.push(new Vn(v.segments[_].path,Qs(m[0]))),O++;continue}const G=ur(U)?U.outlets[Lt]:`${U}`,he=O<m.length-1?m[O+1]:null;G&&he&&Bn(he)?(C.push(new Vn(G,Qs(he))),O+=2):(C.push(new Vn(G,{})),O++)}return new Ut(C,{})}function sn(v){const _={};return Yt(v,(m,C)=>{"string"==typeof m&&(m=[m]),null!==m&&(_[C]=Ai(new Ut([],{}),0,m))}),_}function Qs(v){const _={};return Yt(v,(m,C)=>_[C]=`${m}`),_}function Ts(v,_,m){return v==m.path&&pt(_,m.parameters)}const Wi="imperative";class Dr{constructor(_,m){this.id=_,this.url=m}}class lr extends Dr{constructor(_,m,C="imperative",O=null){super(_,m),this.type=0,this.navigationTrigger=C,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class os extends Dr{constructor(_,m,C){super(_,m),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qi extends Dr{constructor(_,m,C,O){super(_,m),this.reason=C,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Br extends Dr{constructor(_,m,C,O){super(_,m),this.reason=C,this.code=O,this.type=16}}class xi extends Dr{constructor(_,m,C,O){super(_,m),this.error=C,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ca extends Dr{constructor(_,m,C,O){super(_,m),this.urlAfterRedirects=C,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wn extends Dr{constructor(_,m,C,O){super(_,m),this.urlAfterRedirects=C,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yr extends Dr{constructor(_,m,C,O,U){super(_,m),this.urlAfterRedirects=C,this.state=O,this.shouldActivate=U,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ia extends Dr{constructor(_,m,C,O){super(_,m),this.urlAfterRedirects=C,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vo extends Dr{constructor(_,m,C,O){super(_,m),this.urlAfterRedirects=C,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _o{constructor(_){this.route=_,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ss{constructor(_){this.route=_,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ui{constructor(_){this.snapshot=_,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jr{constructor(_){this.snapshot=_,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cc{constructor(_){this.snapshot=_,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(_){this.snapshot=_,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ri{constructor(_,m,C){this.routerEvent=_,this.position=m,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let iu=(()=>{class v{createUrlTree(m,C,O,U,G,he){return bn(m||C.root,O,U,G,he)}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac}),v})(),$c=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(_){return iu.\u0275fac(_)},providedIn:"root"}),v})();class sa{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const m=this.pathFromRoot(_);return m.length>1?m[m.length-2]:null}children(_){const m=es(_,this._root);return m?m.children.map(C=>C.value):[]}firstChild(_){const m=es(_,this._root);return m&&m.children.length>0?m.children[0].value:null}siblings(_){const m=Xs(_,this._root);return m.length<2?[]:m[m.length-2].children.map(O=>O.value).filter(O=>O!==_)}pathFromRoot(_){return Xs(_,this._root).map(m=>m.value)}}function es(v,_){if(v===_.value)return _;for(const m of _.children){const C=es(v,m);if(C)return C}return null}function Xs(v,_){if(v===_.value)return[_];for(const m of _.children){const C=Xs(v,m);if(C.length)return C.unshift(_),C}return[]}class Ri{constructor(_,m){this.value=_,this.children=m}toString(){return`TreeNode(${this.value})`}}function Eo(v){const _={};return v&&v.children.forEach(m=>_[m.value.outlet]=m),_}class Sa extends sa{constructor(_,m){super(_),this.snapshot=m,us(this,_)}toString(){return this.snapshot.toString()}}function su(v,_){const m=function Ru(v,_){const G=new Ki([],{},{},"",{},Lt,_,null,v.root,-1,{});return new ou("",new Ri(G,[]))}(v,_),C=new ae.X([new Vn("",{})]),O=new ae.X({}),U=new ae.X({}),G=new ae.X({}),he=new ae.X(""),Le=new Oi(C,O,G,he,U,Lt,_,m.root);return Le.snapshot=m.root,new Sa(new Ri(Le,[]),m)}class Oi{constructor(_,m,C,O,U,G,he,Le){this.url=_,this.params=m,this.queryParams=C,this.fragment=O,this.data=U,this.outlet=G,this.component=he,this.title=this.data?.pipe((0,dt.U)(bt=>bt[Pn]))??(0,p.of)(void 0),this._futureSnapshot=Le}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(_=>ar(_)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(_=>ar(_)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Aa(v,_="emptyOnly"){const m=v.pathFromRoot;let C=0;if("always"!==_)for(C=m.length-1;C>=1;){const O=m[C],U=m[C-1];if(O.routeConfig&&""===O.routeConfig.path)C--;else{if(U.component)break;C--}}return function Zi(v){return v.reduce((_,m)=>({params:{..._.params,...m.params},data:{..._.data,...m.data},resolve:{...m.data,..._.resolve,...m.routeConfig?.data,...m._resolvedData}}),{params:{},data:{},resolve:{}})}(m.slice(C))}class Ki{get title(){return this.data?.[Pn]}constructor(_,m,C,O,U,G,he,Le,bt,Ct,En){this.url=_,this.params=m,this.queryParams=C,this.fragment=O,this.data=U,this.outlet=G,this.component=he,this.routeConfig=Le,this._urlSegment=bt,this._lastPathIndex=Ct,this._resolve=En}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ar(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ar(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ou extends sa{constructor(_,m){super(m),this.url=_,us(this,m)}toString(){return gi(this._root)}}function us(v,_){_.value._routerState=v,_.children.forEach(m=>us(v,m))}function gi(v){const _=v.children.length>0?` { ${v.children.map(gi).join(", ")} } `:"";return`${v.value}${_}`}function wo(v){if(v.snapshot){const _=v.snapshot,m=v._futureSnapshot;v.snapshot=m,pt(_.queryParams,m.queryParams)||v.queryParams.next(m.queryParams),_.fragment!==m.fragment&&v.fragment.next(m.fragment),pt(_.params,m.params)||v.params.next(m.params),function pr(v,_){if(v.length!==_.length)return!1;for(let m=0;m<v.length;++m)if(!pt(v[m],_[m]))return!1;return!0}(_.url,m.url)||v.url.next(m.url),pt(_.data,m.data)||v.data.next(m.data)}else v.snapshot=v._futureSnapshot,v.data.next(v._futureSnapshot.data)}function Io(v,_){const m=pt(v.params,_.params)&&function at(v,_){return Ve(v,_)&&v.every((m,C)=>pt(m.parameters,_[C].parameters))}(v.url,_.url);return m&&!(!v.parent!=!_.parent)&&(!v.parent||Io(v.parent,_.parent))}function cs(v,_,m){if(m&&v.shouldReuseRoute(_.value,m.value.snapshot)){const C=m.value;C._futureSnapshot=_.value;const O=function xa(v,_,m){return _.children.map(C=>{for(const O of m.children)if(v.shouldReuseRoute(C.value,O.value.snapshot))return cs(v,C,O);return cs(v,C)})}(v,_,m);return new Ri(C,O)}{if(v.shouldAttach(_.value)){const U=v.retrieve(_.value);if(null!==U){const G=U.route;return G.value._futureSnapshot=_.value,G.children=_.children.map(he=>cs(v,he)),G}}const C=function ls(v){return new Oi(new ae.X(v.url),new ae.X(v.params),new ae.X(v.queryParams),new ae.X(v.fragment),new ae.X(v.data),v.outlet,v.component,v)}(_.value),O=_.children.map(U=>cs(v,U));return new Ri(C,O)}}const As="ngNavigationCancelingError";function Js(v,_){const{redirectTo:m,navigationBehaviorOptions:C}=Ti(_)?{redirectTo:_,navigationBehaviorOptions:void 0}:_,O=eo(!1,0,_);return O.url=m,O.navigationBehaviorOptions=C,O}function eo(v,_,m){const C=new Error("NavigationCancelingError: "+(v||""));return C[As]=!0,C.cancellationCode=_,m&&(C.url=m),C}function oa(v){return xs(v)&&Ti(v.url)}function xs(v){return v&&v[As]}class Do{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Hr,this.attachRef=null}}let Hr=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(m,C){const O=this.getOrCreateContext(m);O.outlet=C,this.contexts.set(m,O)}onChildOutletDestroyed(m){const C=this.getContext(m);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const m=this.contexts;return this.contexts=new Map,m}onOutletReAttached(m){this.contexts=m}getOrCreateContext(m){let C=this.getContext(m);return C||(C=new Do,this.contexts.set(m,C)),C}getContext(m){return this.contexts.get(m)||null}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const At=!1;let ds=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.attachEvents=new I.vpe,this.detachEvents=new I.vpe,this.parentContexts=(0,I.f3M)(Hr),this.location=(0,I.f3M)(I.s_b),this.changeDetector=(0,I.f3M)(I.sBO),this.environmentInjector=(0,I.f3M)(I.lqb)}ngOnChanges(m){if(m.name){const{firstChange:C,previousValue:O}=m.name;if(C)return;this.isTrackedInParentContexts(O)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(O)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(m){return this.parentContexts.getContext(m)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const m=this.parentContexts.getContext(this.name);m?.route&&(m.attachRef?this.attach(m.attachRef,m.route):this.activateWith(m.route,m.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I.vHH(4012,At);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I.vHH(4012,At);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I.vHH(4012,At);this.location.detach();const m=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(m.instance),m}attach(m,C){this.activated=m,this._activatedRoute=C,this.location.insert(m.hostView),this.attachEvents.emit(m.instance)}deactivate(){if(this.activated){const m=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(m)}}activateWith(m,C){if(this.isActivated)throw new I.vHH(4013,At);this._activatedRoute=m;const O=this.location,G=m.snapshot.component,he=this.parentContexts.getOrCreateContext(this.name).children,Le=new zt(m,he,O.injector);if(C&&function Nr(v){return!!v.resolveComponentFactory}(C)){const bt=C.resolveComponentFactory(G);this.activated=O.createComponent(bt,O.length,Le)}else this.activated=O.createComponent(G,{index:O.length,injector:Le,environmentInjector:C??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275dir=I.lG2({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[I.TTD]}),v})();class zt{constructor(_,m,C){this.route=_,this.childContexts=m,this.parent=C}get(_,m){return _===Oi?this.route:_===Hr?this.childContexts:this.parent.get(_,m)}}let qn=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275cmp=I.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[I.jDz],decls:1,vars:0,template:function(m,C){1&m&&I._UZ(0,"router-outlet")},dependencies:[ds],encapsulation:2}),v})();function Ms(v,_){return v.providers&&!v._injector&&(v._injector=(0,I.MMx)(v.providers,_,`Route: ${v.path}`)),v._injector??_}function mi(v){const _=v.children&&v.children.map(mi),m=_?{...v,children:_}:{...v};return!m.component&&!m.loadComponent&&(_||m.loadChildren)&&m.outlet&&m.outlet!==Lt&&(m.component=qn),m}function br(v){return v.outlet||Lt}function Ma(v,_){const m=v.filter(C=>br(C)===_);return m.push(...v.filter(C=>br(C)!==_)),m}function Pr(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let _=v.parent;_;_=_.parent){const m=_.routeConfig;if(m?._loadedInjector)return m._loadedInjector;if(m?._injector)return m._injector}return null}class nr{constructor(_,m,C,O){this.routeReuseStrategy=_,this.futureState=m,this.currState=C,this.forwardEvent=O}activate(_){const m=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(m,C,_),wo(this.futureState.root),this.activateChildRoutes(m,C,_)}deactivateChildRoutes(_,m,C){const O=Eo(m);_.children.forEach(U=>{const G=U.value.outlet;this.deactivateRoutes(U,O[G],C),delete O[G]}),Yt(O,(U,G)=>{this.deactivateRouteAndItsChildren(U,C)})}deactivateRoutes(_,m,C){const O=_.value,U=m?m.value:null;if(O===U)if(O.component){const G=C.getContext(O.outlet);G&&this.deactivateChildRoutes(_,m,G.children)}else this.deactivateChildRoutes(_,m,C);else U&&this.deactivateRouteAndItsChildren(m,C)}deactivateRouteAndItsChildren(_,m){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,m):this.deactivateRouteAndOutlet(_,m)}detachAndStoreRouteSubtree(_,m){const C=m.getContext(_.value.outlet),O=C&&_.value.component?C.children:m,U=Eo(_);for(const G of Object.keys(U))this.deactivateRouteAndItsChildren(U[G],O);if(C&&C.outlet){const G=C.outlet.detach(),he=C.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:G,route:_,contexts:he})}}deactivateRouteAndOutlet(_,m){const C=m.getContext(_.value.outlet),O=C&&_.value.component?C.children:m,U=Eo(_);for(const G of Object.keys(U))this.deactivateRouteAndItsChildren(U[G],O);C&&C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated(),C.attachRef=null,C.resolver=null,C.route=null)}activateChildRoutes(_,m,C){const O=Eo(m);_.children.forEach(U=>{this.activateRoutes(U,O[U.value.outlet],C),this.forwardEvent(new Mi(U.value.snapshot))}),_.children.length&&this.forwardEvent(new jr(_.value.snapshot))}activateRoutes(_,m,C){const O=_.value,U=m?m.value:null;if(wo(O),O===U)if(O.component){const G=C.getOrCreateContext(O.outlet);this.activateChildRoutes(_,m,G.children)}else this.activateChildRoutes(_,m,C);else if(O.component){const G=C.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const he=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),G.children.onOutletReAttached(he.contexts),G.attachRef=he.componentRef,G.route=he.route.value,G.outlet&&G.outlet.attach(he.componentRef,he.route.value),wo(he.route.value),this.activateChildRoutes(_,null,G.children)}else{const he=Pr(O.snapshot),Le=he?.get(I._Vd)??null;G.attachRef=null,G.route=O,G.resolver=Le,G.injector=he,G.outlet&&G.outlet.activateWith(O,G.injector),this.activateChildRoutes(_,null,G.children)}}else this.activateChildRoutes(_,null,C)}}class Qt{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class Pi{constructor(_,m){this.component=_,this.route=m}}function au(v,_,m){const C=v._root;return Cr(C,_?_._root:null,m,[C.value])}function hs(v,_){const m=Symbol(),C=_.get(v,m);return C===m?"function"!=typeof v||(0,I.Z0I)(v)?_.get(v):v:C}function Cr(v,_,m,C,O={canDeactivateChecks:[],canActivateChecks:[]}){const U=Eo(_);return v.children.forEach(G=>{(function ua(v,_,m,C,O={canDeactivateChecks:[],canActivateChecks:[]}){const U=v.value,G=_?_.value:null,he=m?m.getContext(v.value.outlet):null;if(G&&U.routeConfig===G.routeConfig){const Le=function Ra(v,_,m){if("function"==typeof m)return m(v,_);switch(m){case"pathParamsChange":return!Ve(v.url,_.url);case"pathParamsOrQueryParamsChange":return!Ve(v.url,_.url)||!pt(v.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Io(v,_)||!pt(v.queryParams,_.queryParams);default:return!Io(v,_)}}(G,U,U.routeConfig.runGuardsAndResolvers);Le?O.canActivateChecks.push(new Qt(C)):(U.data=G.data,U._resolvedData=G._resolvedData),Cr(v,_,U.component?he?he.children:null:m,C,O),Le&&he&&he.outlet&&he.outlet.isActivated&&O.canDeactivateChecks.push(new Pi(he.outlet.component,G))}else G&&Ho(_,he,O),O.canActivateChecks.push(new Qt(C)),Cr(v,null,U.component?he?he.children:null:m,C,O)})(G,U[G.value.outlet],m,C.concat([G.value]),O),delete U[G.value.outlet]}),Yt(U,(G,he)=>Ho(G,m.getContext(he),O)),O}function Ho(v,_,m){const C=Eo(v),O=v.value;Yt(C,(U,G)=>{Ho(U,O.component?_?_.children.getContext(G):null:_,m)}),m.canDeactivateChecks.push(new Pi(O.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,O))}function Me(v){return"function"==typeof v}function bo(v){return v instanceof ue.K||"EmptyError"===v?.name}const io=Symbol("INITIAL_VALUE");function Co(){return(0,ht.w)(v=>qe(v.map(_=>_.pipe((0,De.q)(1),(0,xe.O)(io)))).pipe((0,dt.U)(_=>{for(const m of _)if(!0!==m){if(m===io)return io;if(!1===m||m instanceof qt)return m}return!0}),(0,Pe.h)(_=>_!==io),(0,De.q)(1)))}function la(v){return(0,Ye.z)((0,ct.b)(_=>{if(Ti(_))throw Js(0,_)}),(0,dt.U)(_=>!0===_))}const Ns={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Pa(v,_,m,C,O){const U=Ps(v,_,m);return U.matched?function gs(v,_,m,C){const O=_.canMatch;if(!O||0===O.length)return(0,p.of)(!0);const U=O.map(G=>{const he=hs(G,v);return Nt(function fs(v){return v&&Me(v.canMatch)}(he)?he.canMatch(_,m):v.runInContext(()=>he(_,m)))});return(0,p.of)(U).pipe(Co(),la())}(C=Ms(_,C),_,m).pipe((0,dt.U)(G=>!0===G?U:{...Ns})):(0,p.of)(U)}function Ps(v,_,m){if(""===_.path)return"full"===_.pathMatch&&(v.hasChildren()||m.length>0)?{...Ns}:{matched:!0,consumedSegments:[],remainingSegments:m,parameters:{},positionalParamSegments:{}};const O=(_.matcher||Ln)(m,v,_);if(!O)return{...Ns};const U={};Yt(O.posParams,(he,Le)=>{U[Le]=he.path});const G=O.consumed.length>0?{...U,...O.consumed[O.consumed.length-1].parameters}:U;return{matched:!0,consumedSegments:O.consumed,remainingSegments:m.slice(O.consumed.length),parameters:G,positionalParamSegments:O.posParams??{}}}function so(v,_,m,C){if(m.length>0&&function cu(v,_,m){return m.some(C=>da(v,_,C)&&br(C)!==Lt)}(v,m,C)){const U=new Ut(_,function Ao(v,_,m,C){const O={};O[Lt]=C,C._sourceSegment=v,C._segmentIndexShift=_.length;for(const U of m)if(""===U.path&&br(U)!==Lt){const G=new Ut([],{});G._sourceSegment=v,G._segmentIndexShift=_.length,O[br(U)]=G}return O}(v,_,C,new Ut(m,v.children)));return U._sourceSegment=v,U._segmentIndexShift=_.length,{segmentGroup:U,slicedSegments:[]}}if(0===m.length&&function Ou(v,_,m){return m.some(C=>da(v,_,C))}(v,m,C)){const U=new Ut(v.segments,function ka(v,_,m,C,O){const U={};for(const G of C)if(da(v,m,G)&&!O[br(G)]){const he=new Ut([],{});he._sourceSegment=v,he._segmentIndexShift=_.length,U[br(G)]=he}return{...O,...U}}(v,_,m,C,v.children));return U._sourceSegment=v,U._segmentIndexShift=_.length,{segmentGroup:U,slicedSegments:m}}const O=new Ut(v.segments,v.children);return O._sourceSegment=v,O._segmentIndexShift=_.length,{segmentGroup:O,slicedSegments:m}}function da(v,_,m){return(!(v.hasChildren()||_.length>0)||"full"!==m.pathMatch)&&""===m.path}function Fa(v,_,m,C){return!!(br(v)===C||C!==Lt&&da(_,m,v))&&("**"===v.path||Ps(_,v,m).matched)}function lu(v,_,m){return 0===_.length&&!v.children[m]}const La=!1;class oo{constructor(_){this.segmentGroup=_||null}}class zr{constructor(_){this.urlTree=_}}function yi(v){return Ue(new oo(v))}function Sn(v){return Ue(new zr(v))}class Fr{constructor(_,m,C,O,U){this.injector=_,this.configLoader=m,this.urlSerializer=C,this.urlTree=O,this.config=U,this.allowRedirects=!0}apply(){const _=so(this.urlTree.root,[],[],this.config).segmentGroup,m=new Ut(_.segments,_.children);return this.expandSegmentGroup(this.injector,this.config,m,Lt).pipe((0,dt.U)(U=>this.createUrlTree(Gi(U),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ft(U=>{if(U instanceof zr)return this.allowRedirects=!1,this.match(U.urlTree);throw U instanceof oo?this.noMatchError(U):U}))}match(_){return this.expandSegmentGroup(this.injector,this.config,_.root,Lt).pipe((0,dt.U)(O=>this.createUrlTree(Gi(O),_.queryParams,_.fragment))).pipe(ft(O=>{throw O instanceof oo?this.noMatchError(O):O}))}noMatchError(_){return new I.vHH(4002,La)}createUrlTree(_,m,C){const O=Ji(_);return new qt(O,m,C)}expandSegmentGroup(_,m,C,O){return 0===C.segments.length&&C.hasChildren()?this.expandChildren(_,m,C).pipe((0,dt.U)(U=>new Ut([],U))):this.expandSegment(_,C,m,C.segments,O,!0)}expandChildren(_,m,C){const O=[];for(const U of Object.keys(C.children))"primary"===U?O.unshift(U):O.push(U);return(0,j.D)(O).pipe(tt(U=>{const G=C.children[U],he=Ma(m,U);return this.expandSegmentGroup(_,he,G,U).pipe((0,dt.U)(Le=>({segment:Le,outlet:U})))}),(0,yn.R)((U,G)=>(U[G.outlet]=G.segment,U),{}),St())}expandSegment(_,m,C,O,U,G){return(0,j.D)(C).pipe(tt(he=>this.expandSegmentAgainstRoute(_,m,C,he,O,U,G).pipe(ft(bt=>{if(bt instanceof oo)return(0,p.of)(null);throw bt}))),(0,et.P)(he=>!!he),ft((he,Le)=>{if(bo(he))return lu(m,O,U)?(0,p.of)(new Ut([],{})):yi(m);throw he}))}expandSegmentAgainstRoute(_,m,C,O,U,G,he){return Fa(O,m,U,G)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(_,m,O,U,G):he&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(_,m,C,O,U,G):yi(m):yi(m)}expandSegmentAgainstRouteUsingRedirect(_,m,C,O,U,G){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(_,C,O,G):this.expandRegularSegmentAgainstRouteUsingRedirect(_,m,C,O,U,G)}expandWildCardWithParamsAgainstRouteUsingRedirect(_,m,C,O){const U=this.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?Sn(U):this.lineralizeSegments(C,U).pipe((0,Ge.z)(G=>{const he=new Ut(G,{});return this.expandSegment(_,he,m,G,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(_,m,C,O,U,G){const{matched:he,consumedSegments:Le,remainingSegments:bt,positionalParamSegments:Ct}=Ps(m,O,U);if(!he)return yi(m);const En=this.applyRedirectCommands(Le,O.redirectTo,Ct);return O.redirectTo.startsWith("/")?Sn(En):this.lineralizeSegments(O,En).pipe((0,Ge.z)(Er=>this.expandSegment(_,m,C,Er.concat(bt),G,!1)))}matchSegmentAgainstRoute(_,m,C,O,U){return"**"===C.path?(_=Ms(C,_),C.loadChildren?(C._loadedRoutes?(0,p.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):this.configLoader.loadChildren(_,C)).pipe((0,dt.U)(he=>(C._loadedRoutes=he.routes,C._loadedInjector=he.injector,new Ut(O,{})))):(0,p.of)(new Ut(O,{}))):Pa(m,C,O,_).pipe((0,ht.w)(({matched:G,consumedSegments:he,remainingSegments:Le})=>G?this.getChildConfig(_=C._injector??_,C,O).pipe((0,Ge.z)(Ct=>{const En=Ct.injector??_,Er=Ct.routes,{segmentGroup:Xi,slicedSegments:qr}=so(m,he,Le,Er),A=new Ut(Xi.segments,Xi.children);if(0===qr.length&&A.hasChildren())return this.expandChildren(En,Er,A).pipe((0,dt.U)(ge=>new Ut(he,ge)));if(0===Er.length&&0===qr.length)return(0,p.of)(new Ut(he,{}));const R=br(C)===U;return this.expandSegment(En,A,Er,qr,R?Lt:U,!0).pipe((0,dt.U)(X=>new Ut(he.concat(X.segments),X.children)))})):yi(m)))}getChildConfig(_,m,C){return m.children?(0,p.of)({routes:m.children,injector:_}):m.loadChildren?void 0!==m._loadedRoutes?(0,p.of)({routes:m._loadedRoutes,injector:m._loadedInjector}):function So(v,_,m,C){const O=_.canLoad;if(void 0===O||0===O.length)return(0,p.of)(!0);const U=O.map(G=>{const he=hs(G,v);return Nt(function Oa(v){return v&&Me(v.canLoad)}(he)?he.canLoad(_,m):v.runInContext(()=>he(_,m)))});return(0,p.of)(U).pipe(Co(),la())}(_,m,C).pipe((0,Ge.z)(O=>O?this.configLoader.loadChildren(_,m).pipe((0,ct.b)(U=>{m._loadedRoutes=U.routes,m._loadedInjector=U.injector})):function Va(v){return Ue(eo(La,3))}())):(0,p.of)({routes:[],injector:_})}lineralizeSegments(_,m){let C=[],O=m.root;for(;;){if(C=C.concat(O.segments),0===O.numberOfChildren)return(0,p.of)(C);if(O.numberOfChildren>1||!O.children[Lt])return Ue(new I.vHH(4e3,La));O=O.children[Lt]}}applyRedirectCommands(_,m,C){return this.applyRedirectCreateUrlTree(m,this.urlSerializer.parse(m),_,C)}applyRedirectCreateUrlTree(_,m,C,O){const U=this.createSegmentGroup(_,m.root,C,O);return new qt(U,this.createQueryParams(m.queryParams,this.urlTree.queryParams),m.fragment)}createQueryParams(_,m){const C={};return Yt(_,(O,U)=>{if("string"==typeof O&&O.startsWith(":")){const he=O.substring(1);C[U]=m[he]}else C[U]=O}),C}createSegmentGroup(_,m,C,O){const U=this.createSegments(_,m.segments,C,O);let G={};return Yt(m.children,(he,Le)=>{G[Le]=this.createSegmentGroup(_,he,C,O)}),new Ut(U,G)}createSegments(_,m,C,O){return m.map(U=>U.path.startsWith(":")?this.findPosParam(_,U,O):this.findOrReturn(U,C))}findPosParam(_,m,C){const O=C[m.path.substring(1)];if(!O)throw new I.vHH(4001,La);return O}findOrReturn(_,m){let C=0;for(const O of m){if(O.path===_.path)return m.splice(C),O;C++}return _}}class Wo{}class F{constructor(_,m,C,O,U,G,he){this.injector=_,this.rootComponentType=m,this.config=C,this.urlTree=O,this.url=U,this.paramsInheritanceStrategy=G,this.urlSerializer=he}recognize(){const _=so(this.urlTree.root,[],[],this.config.filter(m=>void 0===m.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,_,Lt).pipe((0,dt.U)(m=>{if(null===m)return null;const C=new Ki([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new Ri(C,m),U=new ou(this.url,O);return this.inheritParamsAndData(U._root),U}))}inheritParamsAndData(_){const m=_.value,C=Aa(m,this.paramsInheritanceStrategy);m.params=Object.freeze(C.params),m.data=Object.freeze(C.data),_.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(_,m,C,O){return 0===C.segments.length&&C.hasChildren()?this.processChildren(_,m,C):this.processSegment(_,m,C,C.segments,O)}processChildren(_,m,C){return(0,j.D)(Object.keys(C.children)).pipe(tt(O=>{const U=C.children[O],G=Ma(m,O);return this.processSegmentGroup(_,G,U,O)}),(0,yn.R)((O,U)=>O&&U?(O.push(...U),O):null),function Mn(v,_=!1){return(0,pe.e)((m,C)=>{let O=0;m.subscribe((0,ce.x)(C,U=>{const G=v(U,O++);(G||_)&&C.next(U),!G&&C.complete()}))})}(O=>null!==O),(0,yt.d)(null),St(),(0,dt.U)(O=>{if(null===O)return null;const U=Se(O);return function x(v){v.sort((_,m)=>_.value.outlet===Lt?-1:m.value.outlet===Lt?1:_.value.outlet.localeCompare(m.value.outlet))}(U),U}))}processSegment(_,m,C,O,U){return(0,j.D)(m).pipe(tt(G=>this.processSegmentAgainstRoute(G._injector??_,G,C,O,U)),(0,et.P)(G=>!!G),ft(G=>{if(bo(G))return lu(C,O,U)?(0,p.of)([]):(0,p.of)(null);throw G}))}processSegmentAgainstRoute(_,m,C,O,U){if(m.redirectTo||!Fa(m,C,O,U))return(0,p.of)(null);let G;if("**"===m.path){const he=O.length>0?Jn(O).parameters:{},Le=hn(C)+O.length,bt=new Ki(O,he,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_n(m),br(m),m.component??m._loadedComponent??null,m,Rt(C),Le,rn(m));G=(0,p.of)({snapshot:bt,consumedSegments:[],remainingSegments:[]})}else G=Pa(C,m,O,_).pipe((0,dt.U)(({matched:he,consumedSegments:Le,remainingSegments:bt,parameters:Ct})=>{if(!he)return null;const En=hn(C)+Le.length;return{snapshot:new Ki(Le,Ct,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_n(m),br(m),m.component??m._loadedComponent??null,m,Rt(C),En,rn(m)),consumedSegments:Le,remainingSegments:bt}}));return G.pipe((0,ht.w)(he=>{if(null===he)return(0,p.of)(null);const{snapshot:Le,consumedSegments:bt,remainingSegments:Ct}=he;_=m._injector??_;const En=m._loadedInjector??_,Er=function H(v){return v.children?v.children:v.loadChildren?v._loadedRoutes:[]}(m),{segmentGroup:Xi,slicedSegments:qr}=so(C,bt,Ct,Er.filter(R=>void 0===R.redirectTo));if(0===qr.length&&Xi.hasChildren())return this.processChildren(En,Er,Xi).pipe((0,dt.U)(R=>null===R?null:[new Ri(Le,R)]));if(0===Er.length&&0===qr.length)return(0,p.of)([new Ri(Le,[])]);const A=br(m)===U;return this.processSegment(En,Er,Xi,qr,A?Lt:U).pipe((0,dt.U)(R=>null===R?null:[new Ri(Le,R)]))}))}}function J(v){const _=v.value.routeConfig;return _&&""===_.path&&void 0===_.redirectTo}function Se(v){const _=[],m=new Set;for(const C of v){if(!J(C)){_.push(C);continue}const O=_.find(U=>C.value.routeConfig===U.value.routeConfig);void 0!==O?(O.children.push(...C.children),m.add(O)):_.push(C)}for(const C of m){const O=Se(C.children);_.push(new Ri(C.value,O))}return _.filter(C=>!m.has(C))}function Rt(v){let _=v;for(;_._sourceSegment;)_=_._sourceSegment;return _}function hn(v){let _=v,m=_._segmentIndexShift??0;for(;_._sourceSegment;)_=_._sourceSegment,m+=_._segmentIndexShift??0;return m-1}function _n(v){return v.data||{}}function rn(v){return v.resolve||{}}function Ei(v){return"string"==typeof v.title||null===v.title}function ao(v){return(0,ht.w)(_=>{const m=v(_);return m?(0,j.D)(m).pipe((0,dt.U)(()=>_)):(0,p.of)(_)})}const rs=new I.OlP("ROUTES");let xo=(()=>{class v{constructor(m,C){this.injector=m,this.compiler=C,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(m){if(this.componentLoaders.get(m))return this.componentLoaders.get(m);if(m._loadedComponent)return(0,p.of)(m._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(m);const C=Nt(m.loadComponent()).pipe((0,dt.U)(Zo),(0,ct.b)(U=>{this.onLoadEndListener&&this.onLoadEndListener(m),m._loadedComponent=U}),cn(()=>{this.componentLoaders.delete(m)})),O=new Fe(C,()=>new ut.x).pipe(Ce());return this.componentLoaders.set(m,O),O}loadChildren(m,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,p.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const U=this.loadModuleFactoryOrRoutes(C.loadChildren).pipe((0,dt.U)(he=>{this.onLoadEndListener&&this.onLoadEndListener(C);let Le,bt,Ct=!1;Array.isArray(he)?bt=he:(Le=he.create(m).injector,bt=wr(Le.get(rs,[],I.XFs.Self|I.XFs.Optional)));return{routes:bt.map(mi),injector:Le}}),cn(()=>{this.childrenLoaders.delete(C)})),G=new Fe(U,()=>new ut.x).pipe(Ce());return this.childrenLoaders.set(C,G),G}loadModuleFactoryOrRoutes(m){return Nt(m()).pipe((0,dt.U)(Zo),(0,Ge.z)(O=>O instanceof I.YKP||Array.isArray(O)?(0,p.of)(O):(0,j.D)(this.compiler.compileModuleAsync(O))))}}return v.\u0275fac=function(m){return new(m||v)(I.LFG(I.zs3),I.LFG(I.Sil))},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function Zo(v){return function Li(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let ks=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ut.x,this.configLoader=(0,I.f3M)(xo),this.environmentInjector=(0,I.f3M)(I.lqb),this.urlSerializer=(0,I.f3M)(Pt),this.rootContexts=(0,I.f3M)(Hr),this.navigationId=0,this.afterPreactivation=()=>(0,p.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=O=>this.events.next(new Ss(O)),this.configLoader.onLoadStartListener=O=>this.events.next(new _o(O))}complete(){this.transitions?.complete()}handleNavigationRequest(m){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,...m,id:C})}setupNavigations(m){return this.transitions=new ae.X({id:0,targetPageId:0,currentUrlTree:m.currentUrlTree,currentRawUrl:m.currentUrlTree,extractedUrl:m.urlHandlingStrategy.extract(m.currentUrlTree),urlAfterRedirects:m.urlHandlingStrategy.extract(m.currentUrlTree),rawUrl:m.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Wi,restoredState:null,currentSnapshot:m.routerState.snapshot,targetSnapshot:null,currentRouterState:m.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Pe.h)(C=>0!==C.id),(0,dt.U)(C=>({...C,extractedUrl:m.urlHandlingStrategy.extract(C.rawUrl)})),(0,ht.w)(C=>{let O=!1,U=!1;return(0,p.of)(C).pipe((0,ct.b)(G=>{this.currentNavigation={id:G.id,initialUrl:G.rawUrl,extractedUrl:G.extractedUrl,trigger:G.source,extras:G.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ht.w)(G=>{const he=m.browserUrlTree.toString(),Le=!m.navigated||G.extractedUrl.toString()!==he||he!==m.currentUrlTree.toString();if(!Le&&"reload"!==(G.extras.onSameUrlNavigation??m.onSameUrlNavigation)){const Ct="";return this.events.next(new Br(G.id,m.serializeUrl(C.rawUrl),Ct,0)),m.rawUrlTree=G.rawUrl,G.resolve(null),Be.E}if(m.urlHandlingStrategy.shouldProcessUrl(G.rawUrl))return Ko(G.source)&&(m.browserUrlTree=G.extractedUrl),(0,p.of)(G).pipe((0,ht.w)(Ct=>{const En=this.transitions?.getValue();return this.events.next(new lr(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),Ct.source,Ct.restoredState)),En!==this.transitions?.getValue()?Be.E:Promise.resolve(Ct)}),function Ua(v,_,m,C){return(0,ht.w)(O=>function gn(v,_,m,C,O){return new Fr(v,_,m,C,O).apply()}(v,_,m,O.extractedUrl,C).pipe((0,dt.U)(U=>({...O,urlAfterRedirects:U}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,m.config),(0,ct.b)(Ct=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ct.urlAfterRedirects},C.urlAfterRedirects=Ct.urlAfterRedirects}),function _r(v,_,m,C,O){return(0,Ge.z)(U=>function T(v,_,m,C,O,U,G="emptyOnly"){return new F(v,_,m,C,O,G,U).recognize().pipe((0,ht.w)(he=>null===he?function qo(v){return new fe.y(_=>_.error(v))}(new Wo):(0,p.of)(he)))}(v,_,m,U.urlAfterRedirects,C.serialize(U.urlAfterRedirects),C,O).pipe((0,dt.U)(G=>({...U,targetSnapshot:G}))))}(this.environmentInjector,this.rootComponentType,m.config,this.urlSerializer,m.paramsInheritanceStrategy),(0,ct.b)(Ct=>{if(C.targetSnapshot=Ct.targetSnapshot,"eager"===m.urlUpdateStrategy){if(!Ct.extras.skipLocationChange){const Er=m.urlHandlingStrategy.merge(Ct.urlAfterRedirects,Ct.rawUrl);m.setBrowserUrl(Er,Ct)}m.browserUrlTree=Ct.urlAfterRedirects}const En=new Ca(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(En)}));if(Le&&m.urlHandlingStrategy.shouldProcessUrl(m.rawUrlTree)){const{id:Ct,extractedUrl:En,source:Er,restoredState:Xi,extras:qr}=G,A=new lr(Ct,this.urlSerializer.serialize(En),Er,Xi);this.events.next(A);const R=su(En,this.rootComponentType).snapshot;return C={...G,targetSnapshot:R,urlAfterRedirects:En,extras:{...qr,skipLocationChange:!1,replaceUrl:!1}},(0,p.of)(C)}{const Ct="";return this.events.next(new Br(G.id,m.serializeUrl(C.extractedUrl),Ct,1)),m.rawUrlTree=G.rawUrl,G.resolve(null),Be.E}}),(0,ct.b)(G=>{const he=new Wn(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot);this.events.next(he)}),(0,dt.U)(G=>C={...G,guards:au(G.targetSnapshot,G.currentSnapshot,this.rootContexts)}),function Os(v,_){return(0,Ge.z)(m=>{const{targetSnapshot:C,currentSnapshot:O,guards:{canActivateChecks:U,canDeactivateChecks:G}}=m;return 0===G.length&&0===U.length?(0,p.of)({...m,guardsResult:!0}):function kr(v,_,m,C){return(0,j.D)(v).pipe((0,Ge.z)(O=>function To(v,_,m,C,O){const U=_&&_.routeConfig?_.routeConfig.canDeactivate:null;if(!U||0===U.length)return(0,p.of)(!0);const G=U.map(he=>{const Le=Pr(_)??O,bt=hs(he,Le);return Nt(function ca(v){return v&&Me(v.canDeactivate)}(bt)?bt.canDeactivate(v,_,m,C):Le.runInContext(()=>bt(v,_,m,C))).pipe((0,et.P)())});return(0,p.of)(G).pipe(Co())}(O.component,O.route,m,_,C)),(0,et.P)(O=>!0!==O,!0))}(G,C,O,v).pipe((0,Ge.z)(he=>he&&function ln(v){return"boolean"==typeof v}(he)?function ii(v,_,m,C){return(0,j.D)(_).pipe(tt(O=>(0,Oe.z)(function ps(v,_){return null!==v&&_&&_(new ui(v)),(0,p.of)(!0)}(O.route.parent,C),function ts(v,_){return null!==v&&_&&_(new cc(v)),(0,p.of)(!0)}(O.route,C),function uu(v,_,m){const C=_[_.length-1],U=_.slice(0,_.length-1).reverse().map(G=>function ro(v){const _=v.routeConfig?v.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:v,guards:_}:null}(G)).filter(G=>null!==G).map(G=>He(()=>{const he=G.guards.map(Le=>{const bt=Pr(G.node)??m,Ct=hs(Le,bt);return Nt(function Tr(v){return v&&Me(v.canActivateChild)}(Ct)?Ct.canActivateChild(C,v):bt.runInContext(()=>Ct(C,v))).pipe((0,et.P)())});return(0,p.of)(he).pipe(Co())}));return(0,p.of)(U).pipe(Co())}(v,O.path,m),function Fi(v,_,m){const C=_.routeConfig?_.routeConfig.canActivate:null;if(!C||0===C.length)return(0,p.of)(!0);const O=C.map(U=>He(()=>{const G=Pr(_)??m,he=hs(U,G);return Nt(function Na(v){return v&&Me(v.canActivate)}(he)?he.canActivate(_,v):G.runInContext(()=>he(_,v))).pipe((0,et.P)())}));return(0,p.of)(O).pipe(Co())}(v,O.route,m))),(0,et.P)(O=>!0!==O,!0))}(C,U,v,_):(0,p.of)(he)),(0,dt.U)(he=>({...m,guardsResult:he})))})}(this.environmentInjector,G=>this.events.next(G)),(0,ct.b)(G=>{if(C.guardsResult=G.guardsResult,Ti(G.guardsResult))throw Js(0,G.guardsResult);const he=new yr(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot,!!G.guardsResult);this.events.next(he)}),(0,Pe.h)(G=>!!G.guardsResult||(m.restoreHistory(G),this.cancelNavigationTransition(G,"",3),!1)),ao(G=>{if(G.guards.canActivateChecks.length)return(0,p.of)(G).pipe((0,ct.b)(he=>{const Le=new ia(he.id,this.urlSerializer.serialize(he.extractedUrl),this.urlSerializer.serialize(he.urlAfterRedirects),he.targetSnapshot);this.events.next(Le)}),(0,ht.w)(he=>{let Le=!1;return(0,p.of)(he).pipe(function Xt(v,_){return(0,Ge.z)(m=>{const{targetSnapshot:C,guards:{canActivateChecks:O}}=m;if(!O.length)return(0,p.of)(m);let U=0;return(0,j.D)(O).pipe(tt(G=>function Yn(v,_,m,C){const O=v.routeConfig,U=v._resolve;return void 0!==O?.title&&!Ei(O)&&(U[Pn]=O.title),function vi(v,_,m,C){const O=function _i(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===O.length)return(0,p.of)({});const U={};return(0,j.D)(O).pipe((0,Ge.z)(G=>function Wr(v,_,m,C){const O=Pr(_)??C,U=hs(v,O);return Nt(U.resolve?U.resolve(_,m):O.runInContext(()=>U(_,m)))}(v[G],_,m,C).pipe((0,et.P)(),(0,ct.b)(he=>{U[G]=he}))),me(1),function In(v){return(0,dt.U)(()=>v)}(U),ft(G=>bo(G)?Be.E:Ue(G)))}(U,v,_,C).pipe((0,dt.U)(G=>(v._resolvedData=G,v.data=Aa(v,m).resolve,O&&Ei(O)&&(v.data[Pn]=O.title),null)))}(G.route,C,v,_)),(0,ct.b)(()=>U++),me(1),(0,Ge.z)(G=>U===O.length?(0,p.of)(m):Be.E))})}(m.paramsInheritanceStrategy,this.environmentInjector),(0,ct.b)({next:()=>Le=!0,complete:()=>{Le||(m.restoreHistory(he),this.cancelNavigationTransition(he,"",2))}}))}),(0,ct.b)(he=>{const Le=new vo(he.id,this.urlSerializer.serialize(he.extractedUrl),this.urlSerializer.serialize(he.urlAfterRedirects),he.targetSnapshot);this.events.next(Le)}))}),ao(G=>{const he=Le=>{const bt=[];Le.routeConfig?.loadComponent&&!Le.routeConfig._loadedComponent&&bt.push(this.configLoader.loadComponent(Le.routeConfig).pipe((0,ct.b)(Ct=>{Le.component=Ct}),(0,dt.U)(()=>{})));for(const Ct of Le.children)bt.push(...he(Ct));return bt};return qe(he(G.targetSnapshot.root)).pipe((0,yt.d)(),(0,De.q)(1))}),ao(()=>this.afterPreactivation()),(0,dt.U)(G=>{const he=function jo(v,_,m){const C=cs(v,_._root,m?m._root:void 0);return new Sa(C,_)}(m.routeReuseStrategy,G.targetSnapshot,G.currentRouterState);return C={...G,targetRouterState:he}}),(0,ct.b)(G=>{m.currentUrlTree=G.urlAfterRedirects,m.rawUrlTree=m.urlHandlingStrategy.merge(G.urlAfterRedirects,G.rawUrl),m.routerState=G.targetRouterState,"deferred"===m.urlUpdateStrategy&&(G.extras.skipLocationChange||m.setBrowserUrl(m.rawUrlTree,G),m.browserUrlTree=G.urlAfterRedirects)}),((v,_,m)=>(0,dt.U)(C=>(new nr(_,C.targetRouterState,C.currentRouterState,m).activate(v),C)))(this.rootContexts,m.routeReuseStrategy,G=>this.events.next(G)),(0,ct.b)({next:G=>{O=!0,this.lastSuccessfulNavigation=this.currentNavigation,m.navigated=!0,this.events.next(new os(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(m.currentUrlTree))),m.titleStrategy?.updateTitle(G.targetRouterState.snapshot),G.resolve(!0)},complete:()=>{O=!0}}),cn(()=>{O||U||this.cancelNavigationTransition(C,"",1),this.currentNavigation?.id===C.id&&(this.currentNavigation=null)}),ft(G=>{if(U=!0,xs(G)){oa(G)||(m.navigated=!0,m.restoreHistory(C,!0));const he=new qi(C.id,this.urlSerializer.serialize(C.extractedUrl),G.message,G.cancellationCode);if(this.events.next(he),oa(G)){const Le=m.urlHandlingStrategy.merge(G.url,m.rawUrlTree),bt={skipLocationChange:C.extras.skipLocationChange,replaceUrl:"eager"===m.urlUpdateStrategy||Ko(C.source)};m.scheduleNavigation(Le,Wi,null,bt,{resolve:C.resolve,reject:C.reject,promise:C.promise})}else C.resolve(!1)}else{m.restoreHistory(C,!0);const he=new xi(C.id,this.urlSerializer.serialize(C.extractedUrl),G,C.targetSnapshot??void 0);this.events.next(he);try{C.resolve(m.errorHandler(G))}catch(Le){C.reject(Le)}}return Be.E}))}))}cancelNavigationTransition(m,C,O){const U=new qi(m.id,this.urlSerializer.serialize(m.extractedUrl),C,O);this.events.next(U),m.resolve(!1)}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function Ko(v){return v!==Wi}let ci=(()=>{class v{buildTitle(m){let C,O=m.root;for(;void 0!==O;)C=this.getResolvedTitleForRoute(O)??C,O=O.children.find(U=>U.outlet===Lt);return C}getResolvedTitleForRoute(m){return m.data[Pn]}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(){return(0,I.f3M)(wi)},providedIn:"root"}),v})(),wi=(()=>{class v extends ci{constructor(m){super(),this.title=m}updateTitle(m){const C=this.buildTitle(m);void 0!==C&&this.title.setTitle(C)}}return v.\u0275fac=function(m){return new(m||v)(I.LFG(Dn.Dx))},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),co=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(){return(0,I.f3M)(ha)},providedIn:"root"}),v})();class Fs{shouldDetach(_){return!1}store(_,m){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,m){return _.routeConfig===m.routeConfig}}let ha=(()=>{class v extends Fs{}return v.\u0275fac=function(){let _;return function(C){return(_||(_=I.n5z(v)))(C||v)}}(),v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Yo=new I.OlP("",{providedIn:"root",factory:()=>({})});let ja=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(){return(0,I.f3M)(Nu)},providedIn:"root"}),v})(),Nu=(()=>{class v{shouldProcessUrl(m){return!0}extract(m){return m}merge(m,C){return m}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function du(v){throw v}function Vi(v,_,m){return _.parse("/")}const hu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ho={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $n=(()=>{class v{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,I.f3M)(I.c2e),this.isNgZoneEnabled=!1,this.options=(0,I.f3M)(Yo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||du,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Vi,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,I.f3M)(ja),this.routeReuseStrategy=(0,I.f3M)(co),this.urlCreationStrategy=(0,I.f3M)($c),this.titleStrategy=(0,I.f3M)(ci),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=wr((0,I.f3M)(rs,{optional:!0})??[]),this.navigationTransitions=(0,I.f3M)(ks),this.urlSerializer=(0,I.f3M)(Pt),this.location=(0,I.f3M)(nt.Ye),this.isNgZoneEnabled=(0,I.f3M)(I.R0b)instanceof I.R0b&&I.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new qt,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=su(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(m=>{this.lastSuccessfulId=m.id,this.currentPageId=m.targetPageId},m=>{this.console.warn(`Unhandled Navigation Error: ${m}`)})}resetRootComponentType(m){this.routerState.root.component=m,this.navigationTransitions.rootComponentType=m}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const m=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Wi,m)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(m=>{const C="popstate"===m.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(m.url,C,m.state)},0)}))}navigateToSyncWithBrowser(m,C,O){const U={replaceUrl:!0},G=O?.navigationId?O:null;if(O){const Le={...O};delete Le.navigationId,delete Le.\u0275routerPageId,0!==Object.keys(Le).length&&(U.state=Le)}const he=this.parseUrl(m);this.scheduleNavigation(he,C,G,U)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(m){this.config=m.map(mi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(m,C={}){const{relativeTo:O,queryParams:U,fragment:G,queryParamsHandling:he,preserveFragment:Le}=C,bt=Le?this.currentUrlTree.fragment:G;let Ct=null;switch(he){case"merge":Ct={...this.currentUrlTree.queryParams,...U};break;case"preserve":Ct=this.currentUrlTree.queryParams;break;default:Ct=U||null}return null!==Ct&&(Ct=this.removeEmptyProps(Ct)),this.urlCreationStrategy.createUrlTree(O,this.routerState,this.currentUrlTree,m,Ct,bt??null)}navigateByUrl(m,C={skipLocationChange:!1}){const O=Ti(m)?m:this.parseUrl(m),U=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(U,Wi,null,C)}navigate(m,C={skipLocationChange:!1}){return function Pu(v){for(let _=0;_<v.length;_++){if(null==v[_])throw new I.vHH(4008,!1)}}(m),this.navigateByUrl(this.createUrlTree(m,C),C)}serializeUrl(m){return this.urlSerializer.serialize(m)}parseUrl(m){let C;try{C=this.urlSerializer.parse(m)}catch(O){C=this.malformedUriErrorHandler(O,this.urlSerializer,m)}return C}isActive(m,C){let O;if(O=!0===C?{...hu}:!1===C?{...ho}:C,Ti(m))return vn(this.currentUrlTree,m,O);const U=this.parseUrl(m);return vn(this.currentUrlTree,U,O)}removeEmptyProps(m){return Object.keys(m).reduce((C,O)=>{const U=m[O];return null!=U&&(C[O]=U),C},{})}scheduleNavigation(m,C,O,U,G){if(this.disposed)return Promise.resolve(!1);let he,Le,bt,Ct;return G?(he=G.resolve,Le=G.reject,bt=G.promise):bt=new Promise((En,Er)=>{he=En,Le=Er}),Ct="computed"===this.canceledNavigationResolution?O&&O.\u0275routerPageId?O.\u0275routerPageId:U.replaceUrl||U.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Ct,source:C,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:m,extras:U,resolve:he,reject:Le,promise:bt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),bt.catch(En=>Promise.reject(En))}setBrowserUrl(m,C){const O=this.urlSerializer.serialize(m),U={...C.extras.state,...this.generateNgRouterState(C.id,C.targetPageId)};this.location.isCurrentPathEqualTo(O)||C.extras.replaceUrl?this.location.replaceState(O,"",U):this.location.go(O,"",U)}restoreHistory(m,C=!1){if("computed"===this.canceledNavigationResolution){const O=this.currentPageId-m.targetPageId;"popstate"!==m.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===O?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===O&&(this.resetState(m),this.browserUrlTree=m.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(O)}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(m),this.resetUrlToCurrentUrlTree())}resetState(m){this.routerState=m.currentRouterState,this.currentUrlTree=m.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,m.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(m,C){return"computed"===this.canceledNavigationResolution?{navigationId:m,\u0275routerPageId:C}:{navigationId:m}}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),fa=(()=>{class v{constructor(m,C,O,U,G,he){this.router=m,this.route=C,this.tabIndexAttribute=O,this.renderer=U,this.el=G,this.locationStrategy=he,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ut.x;const Le=G.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Le||"area"===Le,this.isAnchorElement?this.subscription=m.events.subscribe(bt=>{bt instanceof os&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(m){this._preserveFragment=(0,I.D6c)(m)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(m){this._skipLocationChange=(0,I.D6c)(m)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(m){this._replaceUrl=(0,I.D6c)(m)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(m){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",m)}ngOnChanges(m){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(m){null!=m?(this.commands=Array.isArray(m)?m:[m],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(m,C,O,U,G){return!!(null===this.urlTree||this.isAnchorElement&&(0!==m||C||O||U||G||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const m=null===this.href?null:(0,I.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",m)}applyAttributeValue(m,C){const O=this.renderer,U=this.el.nativeElement;null!==C?O.setAttribute(U,m,C):O.removeAttribute(U,m)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return v.\u0275fac=function(m){return new(m||v)(I.Y36($n),I.Y36(Oi),I.$8M("tabindex"),I.Y36(I.Qsj),I.Y36(I.SBq),I.Y36(nt.S$))},v.\u0275dir=I.lG2({type:v,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(m,C){1&m&&I.NdJ("click",function(U){return C.onClick(U.button,U.ctrlKey,U.shiftKey,U.altKey,U.metaKey)}),2&m&&I.uIk("target",C.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[I.TTD]}),v})(),li=(()=>{class v{get isActive(){return this._isActive}constructor(m,C,O,U,G){this.router=m,this.element=C,this.renderer=O,this.cdr=U,this.link=G,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new I.vpe,this.routerEventsSubscription=m.events.subscribe(he=>{he instanceof os&&this.update()})}ngAfterContentInit(){(0,p.of)(this.links.changes,(0,p.of)(null)).pipe((0,Zn.J)()).subscribe(m=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const m=[...this.links.toArray(),this.link].filter(C=>!!C).map(C=>C.onChanges);this.linkInputChangesSubscription=(0,j.D)(m).pipe((0,Zn.J)()).subscribe(C=>{this._isActive!==this.isLinkActive(this.router)(C)&&this.update()})}set routerLinkActive(m){const C=Array.isArray(m)?m:m.split(" ");this.classes=C.filter(O=>!!O)}ngOnChanges(m){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const m=this.hasActiveLinks();this._isActive!==m&&(this._isActive=m,this.cdr.markForCheck(),this.classes.forEach(C=>{m?this.renderer.addClass(this.element.nativeElement,C):this.renderer.removeClass(this.element.nativeElement,C)}),m&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(m))})}isLinkActive(m){const C=function ms(v){return!!v.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return O=>!!O.urlTree&&m.isActive(O.urlTree,C)}hasActiveLinks(){const m=this.isLinkActive(this.router);return this.link&&m(this.link)||this.links.some(m)}}return v.\u0275fac=function(m){return new(m||v)(I.Y36($n),I.Y36(I.SBq),I.Y36(I.Qsj),I.Y36(I.sBO),I.Y36(fa,8))},v.\u0275dir=I.lG2({type:v,selectors:[["","routerLinkActive",""]],contentQueries:function(m,C,O){if(1&m&&I.Suo(O,fa,5),2&m){let U;I.iGM(U=I.CRH())&&(C.links=U)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[I.TTD]}),v})();class ku{}let Hc=(()=>{class v{constructor(m,C,O,U,G){this.router=m,this.injector=O,this.preloadingStrategy=U,this.loader=G}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pe.h)(m=>m instanceof os),tt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(m,C){const O=[];for(const U of C){U.providers&&!U._injector&&(U._injector=(0,I.MMx)(U.providers,m,`Route: ${U.path}`));const G=U._injector??m,he=U._loadedInjector??G;U.loadChildren&&!U._loadedRoutes&&void 0===U.canLoad||U.loadComponent&&!U._loadedComponent?O.push(this.preloadConfig(G,U)):(U.children||U._loadedRoutes)&&O.push(this.processRoutes(he,U.children??U._loadedRoutes))}return(0,j.D)(O).pipe((0,Zn.J)())}preloadConfig(m,C){return this.preloadingStrategy.preload(C,()=>{let O;O=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(m,C):(0,p.of)(null);const U=O.pipe((0,Ge.z)(G=>null===G?(0,p.of)(void 0):(C._loadedRoutes=G.routes,C._loadedInjector=G.injector,this.processRoutes(G.injector??m,G.routes))));if(C.loadComponent&&!C._loadedComponent){const G=this.loader.loadComponent(C);return(0,j.D)([U,G]).pipe((0,Zn.J)())}return U})}}return v.\u0275fac=function(m){return new(m||v)(I.LFG($n),I.LFG(I.Sil),I.LFG(I.lqb),I.LFG(ku),I.LFG(xo))},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const fu=new I.OlP("");let Ro=(()=>{class v{constructor(m,C,O,U,G={}){this.urlSerializer=m,this.transitions=C,this.viewportScroller=O,this.zone=U,this.options=G,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},G.scrollPositionRestoration=G.scrollPositionRestoration||"disabled",G.anchorScrolling=G.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(m=>{m instanceof lr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=m.navigationTrigger,this.restoredId=m.restoredState?m.restoredState.navigationId:0):m instanceof os&&(this.lastId=m.id,this.scheduleScrollEvent(m,this.urlSerializer.parse(m.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(m=>{m instanceof ri&&(m.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(m.position):m.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(m.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(m,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ri(m,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return v.\u0275fac=function(m){I.$Z()},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac}),v})();function Yi(v,_){return{\u0275kind:v,\u0275providers:_}}function Fn(){const v=(0,I.f3M)(I.zs3);return _=>{const m=v.get(I.z2F);if(_!==m.components[0])return;const C=v.get($n),O=v.get(dc);1===v.get(Ls)&&C.initialNavigation(),v.get(pu,null,I.XFs.Optional)?.setUpPreloading(),v.get(fu,null,I.XFs.Optional)?.init(),C.resetRootComponentType(m.componentTypes[0]),O.closed||(O.next(),O.unsubscribe())}}const dc=new I.OlP("",{factory:()=>new ut.x}),Ls=new I.OlP("",{providedIn:"root",factory:()=>1});const pu=new I.OlP("");function sr(v){return Yi(0,[{provide:pu,useExisting:Hc},{provide:ku,useExisting:v}])}const za=new I.OlP("ROUTER_FORROOT_GUARD"),Wa=[nt.Ye,{provide:Pt,useClass:$t},$n,Hr,{provide:Oi,useFactory:function ys(v){return v.routerState.root},deps:[$n]},xo,[]];function Lu(){return new I.PXZ("Router",$n)}let di=(()=>{class v{constructor(m){}static forRoot(m,C){return{ngModule:v,providers:[Wa,[],{provide:rs,multi:!0,useValue:m},{provide:za,useFactory:Us,deps:[[$n,new I.FiY,new I.tp0]]},{provide:Yo,useValue:C||{}},C?.useHash?{provide:nt.S$,useClass:nt.Do}:{provide:nt.S$,useClass:nt.b0},{provide:fu,useFactory:()=>{const v=(0,I.f3M)(nt.EM),_=(0,I.f3M)(I.R0b),m=(0,I.f3M)(Yo),C=(0,I.f3M)(ks),O=(0,I.f3M)(Pt);return m.scrollOffset&&v.setOffset(m.scrollOffset),new Ro(O,C,v,_,m)}},C?.preloadingStrategy?sr(C.preloadingStrategy).\u0275providers:[],{provide:I.PXZ,multi:!0,useFactory:Lu},C?.initialNavigation?gu(C):[],[{provide:Vu,useFactory:Fn},{provide:I.tb,multi:!0,useExisting:Vu}]]}}static forChild(m){return{ngModule:v,providers:[{provide:rs,multi:!0,useValue:m}]}}}return v.\u0275fac=function(m){return new(m||v)(I.LFG(za,8))},v.\u0275mod=I.oAB({type:v}),v.\u0275inj=I.cJS({imports:[qn]}),v})();function Us(v){return"guarded"}function gu(v){return["disabled"===v.initialNavigation?Yi(3,[{provide:I.ip1,multi:!0,useFactory:()=>{const _=(0,I.f3M)($n);return()=>{_.setUpLocationChangeListener()}}},{provide:Ls,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Yi(2,[{provide:Ls,useValue:0},{provide:I.ip1,multi:!0,deps:[I.zs3],useFactory:_=>{const m=_.get(nt.V_,Promise.resolve());return()=>m.then(()=>new Promise(O=>{const U=_.get($n),G=_.get(dc);(function C(O){_.get($n).events.pipe((0,Pe.h)(G=>G instanceof os||G instanceof qi||G instanceof xi),(0,dt.U)(G=>G instanceof os||G instanceof qi&&(0===G.code||1===G.code)&&null),(0,Pe.h)(G=>null!==G),(0,De.q)(1)).subscribe(()=>{O()})})(()=>{O(!0)}),_.get(ks).afterPreactivation=()=>(O(!0),G.closed?(0,p.of)(void 0):G),U.initialNavigation()}))}}]).\u0275providers:[]]}const Vu=new I.OlP("")},3942:(mt,Te,V)=>{V.d(Te,{Z:()=>st});var I=V(2090),j=V(4859),p=V(9681),ae=V(1877);class ue{constructor(Oe,$e){this._delegate=Oe,this.firebase=$e,(0,p._addComponent)(Oe,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,p.deleteApp)(this._delegate)))}_getService(Oe,$e=p._DEFAULT_ENTRY_NAME){var He;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(Oe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(He=Ye.getComponent())||void 0===He?void 0:He.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:$e})}_removeServiceInstance(Oe,$e=p._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance($e)}_addComponent(Oe){(0,p._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,p._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function we(){const vt=function ve(vt){const Oe={},$e={__esModule:!0,initializeApp:function Ne(pe,Ce={}){const Fe=p.initializeApp(pe,Ce);if((0,I.r3)(Oe,Fe.name))return Oe[Fe.name];const ut=new vt(Fe,$e);return Oe[Fe.name]=ut,ut},app:Ye,registerVersion:p.registerVersion,setLogLevel:p.setLogLevel,onLog:p.onLog,apps:null,SDK_VERSION:p.SDK_VERSION,INTERNAL:{registerComponent:function Be(pe){const Ce=pe.name,Fe=Ce.replace("-compat","");if(p._registerComponent(pe)&&"PUBLIC"===pe.type){const ut=(nt=Ye())=>{if("function"!=typeof nt[Fe])throw Ee.create("invalid-app-argument",{appName:Ce});return nt[Fe]()};void 0!==pe.serviceProps&&(0,I.ZB)(ut,pe.serviceProps),$e[Fe]=ut,vt.prototype[Fe]=function(...nt){return this._getService.bind(this,Ce).apply(this,pe.multipleInstances?nt:[])}}return"PUBLIC"===pe.type?$e[Fe]:null},removeApp:function He(pe){delete Oe[pe]},useAsService:function ot(pe,Ce){return"serverAuth"===Ce?null:Ce},modularAPIs:p}};function Ye(pe){if(!(0,I.r3)(Oe,pe=pe||p._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:pe});return Oe[pe]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function Ue(){return Object.keys(Oe).map(pe=>Oe[pe])}}),Ye.App=vt,$e}(ue);return vt.INTERNAL=Object.assign(Object.assign({},vt.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Oe($e){(0,I.ZB)(vt,$e)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),vt}(),te=new ae.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const vt=self.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const st=re;!function qe(vt){(0,p.registerVersion)("@firebase/app-compat","0.2.4",vt)}()},9681:(mt,Te,V)=>{V.r(Te),V.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Dn,_DEFAULT_ENTRY_NAME:()=>et,_addComponent:()=>yn,_addOrOverwriteComponent:()=>me,_apps:()=>ct,_clearComponents:()=>Mn,_components:()=>ft,_getProvider:()=>yt,_registerComponent:()=>Tt,_removeServiceInstance:()=>St,deleteApp:()=>ar,getApp:()=>Pn,getApps:()=>Rr,initializeApp:()=>Lt,onLog:()=>pt,registerVersion:()=>pr,setLogLevel:()=>gr});var I=V(5861),j=V(4859),p=V(1877),ae=V(2090),ue=V(8766);class fe{constructor(Ve){this.container=Ve}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(function Ee(at){return"VERSION"===at.getComponent()?.type}(_t)){const Pt=_t.getImmediate();return`${Pt.library}/${Pt.version}`}return null}).filter(_t=>_t).join(" ")}}const ve="@firebase/app",re=new p.Yd("@firebase/app"),et="[DEFAULT]",tt={[ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ct=new Map,ft=new Map;function yn(at,Ve){try{at.container.addComponent(Ve)}catch(_t){re.debug(`Component ${Ve.name} failed to register with FirebaseApp ${at.name}`,_t)}}function me(at,Ve){at.container.addOrOverwriteComponent(Ve)}function Tt(at){const Ve=at.name;if(ft.has(Ve))return re.debug(`There were multiple attempts to register component ${Ve}.`),!1;ft.set(Ve,at);for(const _t of ct.values())yn(_t,at);return!0}function yt(at,Ve){const _t=at.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),at.container.getProvider(Ve)}function St(at,Ve,_t=et){yt(at,Ve).clearInstance(_t)}function Mn(){ft.clear()}const cn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zn{constructor(Ve,_t,Pt){this._isDeleted=!1,this._options=Object.assign({},Ve),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=Pt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ve){this._isDeleted=Ve}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}const Dn="9.17.2";function Lt(at,Ve={}){let _t=at;"object"!=typeof Ve&&(Ve={name:Ve});const Pt=Object.assign({name:et,automaticDataCollectionEnabled:!1},Ve),$t=Pt.name;if("string"!=typeof $t||!$t)throw cn.create("bad-app-name",{appName:String($t)});if(_t||(_t=(0,ae.aH)()),!_t)throw cn.create("no-options");const on=ct.get($t);if(on){if((0,ae.vZ)(_t,on.options)&&(0,ae.vZ)(Pt,on.config))return on;throw cn.create("duplicate-app",{appName:$t})}const jn=new j.H0($t);for(const ne of ft.values())jn.addComponent(ne);const se=new Zn(_t,Pt,jn);return ct.set($t,se),se}function Pn(at=et){const Ve=ct.get(at);if(!Ve&&at===et)return Lt();if(!Ve)throw cn.create("no-app",{appName:at});return Ve}function Rr(){return Array.from(ct.values())}function ar(at){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,I.Z)(function*(at){const Ve=at.name;ct.has(Ve)&&(ct.delete(Ve),yield Promise.all(at.container.getProviders().map(_t=>_t.delete())),at.isDeleted=!0)})).apply(this,arguments)}function pr(at,Ve,_t){var Pt;let $t=null!==(Pt=tt[at])&&void 0!==Pt?Pt:at;_t&&($t+=`-${_t}`);const on=$t.match(/\s|\//),jn=Ve.match(/\s|\//);if(on||jn){const se=[`Unable to register library "${$t}" with version "${Ve}":`];return on&&se.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),on&&jn&&se.push("and"),jn&&se.push(`version name "${Ve}" contains illegal characters (whitespace or "/")`),void re.warn(se.join(" "))}Tt(new j.wA(`${$t}-version`,()=>({library:$t,version:Ve}),"VERSION"))}function pt(at,Ve){if(null!==at&&"function"!=typeof at)throw cn.create("invalid-log-argument");(0,p.Am)(at,Ve)}function gr(at){(0,p.Ub)(at)}const er="firebase-heartbeat-store";let Yt=null;function Nt(){return Yt||(Yt=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(at,Ve)=>{0===Ve&&at.createObjectStore(er)}}).catch(at=>{throw cn.create("idb-open",{originalErrorMessage:at.message})})),Yt}function Wt(){return(Wt=(0,I.Z)(function*(at){try{return(yield Nt()).transaction(er).objectStore(er).get(Kn(at))}catch(Ve){if(Ve instanceof ae.ZR)re.warn(Ve.message);else{const _t=cn.create("idb-get",{originalErrorMessage:Ve?.message});re.warn(_t.message)}}})).apply(this,arguments)}function Tn(at,Ve){return vn.apply(this,arguments)}function vn(){return(vn=(0,I.Z)(function*(at,Ve){try{const Pt=(yield Nt()).transaction(er,"readwrite");return yield Pt.objectStore(er).put(Ve,Kn(at)),Pt.done}catch(_t){if(_t instanceof ae.ZR)re.warn(_t.message);else{const Pt=cn.create("idb-set",{originalErrorMessage:_t?.message});re.warn(Pt.message)}}})).apply(this,arguments)}function Kn(at){return`${at.name}!${at.options.appId}`}class ei{constructor(Ve){this.container=Ve,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new qt(_t),this._heartbeatsCachePromise=this._storage.read().then(Pt=>(this._heartbeatsCache=Pt,Pt))}triggerHeartbeat(){var Ve=this;return(0,I.Z)(function*(){const Pt=Ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=tn();if(null===Ve._heartbeatsCache&&(Ve._heartbeatsCache=yield Ve._heartbeatsCachePromise),Ve._heartbeatsCache.lastSentHeartbeatDate!==$t&&!Ve._heartbeatsCache.heartbeats.some(on=>on.date===$t))return Ve._heartbeatsCache.heartbeats.push({date:$t,agent:Pt}),Ve._heartbeatsCache.heartbeats=Ve._heartbeatsCache.heartbeats.filter(on=>{const jn=new Date(on.date).valueOf();return Date.now()-jn<=2592e6}),Ve._storage.overwrite(Ve._heartbeatsCache)})()}getHeartbeatsHeader(){var Ve=this;return(0,I.Z)(function*(){if(null===Ve._heartbeatsCache&&(yield Ve._heartbeatsCachePromise),null===Ve._heartbeatsCache||0===Ve._heartbeatsCache.heartbeats.length)return"";const _t=tn(),{heartbeatsToSend:Pt,unsentEntries:$t}=function ti(at,Ve=1024){const _t=[];let Pt=at.slice();for(const $t of at){const on=_t.find(jn=>jn.agent===$t.agent);if(on){if(on.dates.push($t.date),Ut(_t)>Ve){on.dates.pop();break}}else if(_t.push({agent:$t.agent,dates:[$t.date]}),Ut(_t)>Ve){_t.pop();break}Pt=Pt.slice(1)}return{heartbeatsToSend:_t,unsentEntries:Pt}}(Ve._heartbeatsCache.heartbeats),on=(0,ae.L)(JSON.stringify({version:2,heartbeats:Pt}));return Ve._heartbeatsCache.lastSentHeartbeatDate=_t,$t.length>0?(Ve._heartbeatsCache.heartbeats=$t,yield Ve._storage.overwrite(Ve._heartbeatsCache)):(Ve._heartbeatsCache.heartbeats=[],Ve._storage.overwrite(Ve._heartbeatsCache)),on})()}}function tn(){return(new Date).toISOString().substring(0,10)}class qt{constructor(Ve){this.app=Ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ve=this;return(0,I.Z)(function*(){return(yield Ve._canUseIndexedDBPromise)&&(yield function Mt(at){return Wt.apply(this,arguments)}(Ve.app))||{heartbeats:[]}})()}overwrite(Ve){var _t=this;return(0,I.Z)(function*(){var Pt;if(yield _t._canUseIndexedDBPromise){const on=yield _t.read();return Tn(_t.app,{lastSentHeartbeatDate:null!==(Pt=Ve.lastSentHeartbeatDate)&&void 0!==Pt?Pt:on.lastSentHeartbeatDate,heartbeats:Ve.heartbeats})}})()}add(Ve){var _t=this;return(0,I.Z)(function*(){var Pt;if(yield _t._canUseIndexedDBPromise){const on=yield _t.read();return Tn(_t.app,{lastSentHeartbeatDate:null!==(Pt=Ve.lastSentHeartbeatDate)&&void 0!==Pt?Pt:on.lastSentHeartbeatDate,heartbeats:[...on.heartbeats,...Ve.heartbeats]})}})()}}function Ut(at){return(0,ae.L)(JSON.stringify({version:2,heartbeats:at})).length}!function Vn(at){Tt(new j.wA("platform-logger",Ve=>new fe(Ve),"PRIVATE")),Tt(new j.wA("heartbeat",Ve=>new ei(Ve),"PRIVATE")),pr(ve,"0.9.4",at),pr(ve,"0.9.4","esm2017"),pr("fire-js","")}("")},4859:(mt,Te,V)=>{V.d(Te,{H0:()=>ve,wA:()=>p});var I=V(5861),j=V(2090);class p{constructor(re,te,ce){this.name=re,this.instanceFactory=te,this.type=ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const ae="[DEFAULT]";class ue{constructor(re,te){this.name=re,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const te=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(te)){const ce=new j.BH;if(this.instancesDeferred.set(te,ce),this.isInitialized(te)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:te});Je&&ce.resolve(Je)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(re){var te;const ce=this.normalizeInstanceIdentifier(re?.identifier),Je=null!==(te=re?.optional)&&void 0!==te&&te;if(!this.isInitialized(ce)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ce})}catch(qe){if(Je)return null;throw qe}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function Ee(we){return"EAGER"===we.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[te,ce]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(te);try{const qe=this.getOrInitializeService({instanceIdentifier:Je});ce.resolve(qe)}catch{}}}}clearInstance(re=ae){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,I.Z)(function*(){const te=Array.from(re.instances.values());yield Promise.all([...te.filter(ce=>"INTERNAL"in ce).map(ce=>ce.INTERNAL.delete()),...te.filter(ce=>"_delete"in ce).map(ce=>ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=ae){return this.instances.has(re)}getOptions(re=ae){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:te={}}=re,ce=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(ce))throw Error(`${this.name}(${ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:ce,options:te});for(const[qe,st]of this.instancesDeferred.entries())ce===this.normalizeInstanceIdentifier(qe)&&st.resolve(Je);return Je}onInit(re,te){var ce;const Je=this.normalizeInstanceIdentifier(te),qe=null!==(ce=this.onInitCallbacks.get(Je))&&void 0!==ce?ce:new Set;qe.add(re),this.onInitCallbacks.set(Je,qe);const st=this.instances.get(Je);return st&&re(st,Je),()=>{qe.delete(re)}}invokeOnInitCallbacks(re,te){const ce=this.onInitCallbacks.get(te);if(ce)for(const Je of ce)try{Je(re,te)}catch{}}getOrInitializeService({instanceIdentifier:re,options:te={}}){let ce=this.instances.get(re);if(!ce&&this.component&&(ce=this.component.instanceFactory(this.container,{instanceIdentifier:(we=re,we===ae?void 0:we),options:te}),this.instances.set(re,ce),this.instancesOptions.set(re,te),this.invokeOnInitCallbacks(ce,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,ce)}catch{}var we;return ce||null}normalizeInstanceIdentifier(re=ae){return this.component?this.component.multipleInstances?re:ae:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const te=this.getProvider(re.name);if(te.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);te.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const te=new ue(re,this);return this.providers.set(re,te),te}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,Te,V)=>{V.d(Te,{Am:()=>we,Ub:()=>ve,Yd:()=>Ee,in:()=>j});const I=[];var j=(()=>{return(re=j||(j={}))[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",j;var re})();const p={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ae=j.INFO,ue={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},fe=(re,te,...ce)=>{if(te<re.logLevel)return;const Je=(new Date).toISOString(),qe=ue[te];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[qe](`[${Je}]  ${re.name}:`,...ce)};class Ee{constructor(te){this.name=te,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in j))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?p[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...te),this._logHandler(this,j.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...te),this._logHandler(this,j.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,j.INFO,...te),this._logHandler(this,j.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,j.WARN,...te),this._logHandler(this,j.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...te),this._logHandler(this,j.ERROR,...te)}}function ve(re){I.forEach(te=>{te.setLogLevel(re)})}function we(re,te){for(const ce of I){let Je=null;te&&te.level&&(Je=p[te.level]),ce.userLogHandler=null===re?null:(qe,st,...vt)=>{const Oe=vt.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch{return null}}).filter($e=>$e).join(" ");st>=(Je??qe.logLevel)&&re({level:j[st].toLowerCase(),message:Oe,args:vt,type:qe.name})}}}},259:(mt,Te,V)=>{V.d(Te,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=V(9681);(0,I.registerVersion)("firebase","9.17.2","app")},9260:(mt,Te,V)=>{V.d(Te,{Z:()=>I.Z});var I=V(3942);I.Z.registerVersion("firebase","9.17.2","app-compat")},9568:(mt,Te,V)=>{V.r(Te);var I=V(5861),j=V(3942),p=V(8401),ae=V(2090),Ee=(V(9681),V(1877),V(4859));function ve(){return window}function te(){return(te=(0,I.Z)(function*(q,Z,z){var ye;const{BuildInfo:ke}=ve();(0,p.ap)(Z.sessionId,"AuthEvent did not contain a session ID");const gt=yield $e(Z.sessionId),oe={};return(0,p.aq)()?oe.ibi=ke.packageName:(0,p.ar)()?oe.apn=ke.packageName:(0,p.as)(q,"operation-not-supported-in-this-environment"),ke.displayName&&(oe.appDisplayName=ke.displayName),oe.sessionId=gt,(0,p.at)(q,z,Z.type,void 0,null!==(ye=Z.eventId)&&void 0!==ye?ye:void 0,oe)})).apply(this,arguments)}function Je(){return(Je=(0,I.Z)(function*(q){const{BuildInfo:Z}=ve(),z={};(0,p.aq)()?z.iosBundleId=Z.packageName:(0,p.ar)()?z.androidPackageName=Z.packageName:(0,p.as)(q,"operation-not-supported-in-this-environment"),yield(0,p.au)(q,z)})).apply(this,arguments)}function vt(){return(vt=(0,I.Z)(function*(q,Z,z){const{cordova:ye}=ve();let ke=()=>{};try{yield new Promise((gt,oe)=>{let ie=null;function K(){var rt;gt();const Ht=null===(rt=ye.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof Ht&&Ht(),"function"==typeof z?.close&&z.close()}function de(){ie||(ie=window.setTimeout(()=>{oe((0,p.aw)(q,"redirect-cancelled-by-user"))},2e3))}function ze(){"visible"===document?.visibilityState&&de()}Z.addPassiveListener(K),document.addEventListener("resume",de,!1),(0,p.ar)()&&document.addEventListener("visibilitychange",ze,!1),ke=()=>{Z.removePassiveListener(K),document.removeEventListener("resume",de,!1),document.removeEventListener("visibilitychange",ze,!1),ie&&window.clearTimeout(ie)}})}finally{ke()}})).apply(this,arguments)}function $e(q){return He.apply(this,arguments)}function He(){return(He=(0,I.Z)(function*(q){const Z=Ye(q),z=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(z)).map(ke=>ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ye(q){if((0,p.ap)(/[0-9a-zA-Z]+/.test(q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(q);const Z=new ArrayBuffer(q.length),z=new Uint8Array(Z);for(let ye=0;ye<q.length;ye++)z[ye]=q.charCodeAt(ye);return z}class Ue extends p.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(z=>z(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,I.Z)(function*(){yield Z.initPromise})()}}function pe(q){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,I.Z)(function*(q){const Z=yield nt()._get(dt(q));return Z&&(yield nt()._remove(dt(q))),Z})).apply(this,arguments)}function ut(){const q=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const ye=Math.floor(Math.random()*Z.length);q.push(Z.charAt(ye))}return q.join("")}function nt(){return(0,p.az)(p.b)}function dt(q){return(0,p.aA)("authEvent",q.config.apiKey,q.name)}function xe(q){if(!q?.includes("?"))return{};const[Z,...z]=q.split("?");return(0,ae.zd)(z.join("?"))}const et=class Ge{constructor(){this._redirectPersistence=p.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=p.aB,this._overrideRedirectResult=p.aC}_initialize(Z){var z=this;return(0,I.Z)(function*(){const ye=Z._key();let ke=z.eventManagers.get(ye);return ke||(ke=new Ue(Z),z.eventManagers.set(ye,ke),z.attachCallbackListeners(Z,ke)),ke})()}_openPopup(Z){(0,p.as)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,z,ye,ke){var gt=this;return(0,I.Z)(function*(){!function Oe(q){var Z,z,ye,ke,gt,oe,ie,K,de,ze;const rt=ve();(0,p.ax)("function"==typeof(null===(Z=rt?.universalLinks)||void 0===Z?void 0:Z.subscribe),q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,p.ax)(typeof(null===(z=rt?.BuildInfo)||void 0===z?void 0:z.packageName)<"u",q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,p.ax)("function"==typeof(null===(gt=null===(ke=null===(ye=rt?.cordova)||void 0===ye?void 0:ye.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===gt?void 0:gt.openUrl),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,p.ax)("function"==typeof(null===(K=null===(ie=null===(oe=rt?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===K?void 0:K.isAvailable),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,p.ax)("function"==typeof(null===(ze=null===(de=rt?.cordova)||void 0===de?void 0:de.InAppBrowser)||void 0===ze?void 0:ze.open),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const oe=yield gt._initialize(Z);yield oe.initialized(),oe.resetRedirect(),(0,p.aD)(),yield gt._originValidation(Z);const ie=function Be(q,Z,z=null){return{type:Z,eventId:z,urlResponse:null,sessionId:ut(),postBody:null,tenantId:q.tenantId,error:(0,p.aw)(q,"no-auth-event")}}(Z,ye,ke);yield function ot(q,Z){return nt()._set(dt(q),Z)}(Z,ie);const K=yield function re(q,Z,z){return te.apply(this,arguments)}(Z,ie,z),de=yield function qe(q){const{cordova:Z}=ve();return new Promise(z=>{Z.plugins.browsertab.isAvailable(ye=>{let ke=null;ye?Z.plugins.browsertab.openUrl(q):ke=Z.InAppBrowser.open(q,(0,p.av)()?"_blank":"_system","location=yes"),z(ke)})})}(K);return function st(q,Z,z){return vt.apply(this,arguments)}(Z,oe,de)})()}_isIframeWebStorageSupported(Z,z){throw new Error("Method not implemented.")}_originValidation(Z){const z=Z._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function ce(q){return Je.apply(this,arguments)}(Z)),this.originValidationPromises[z]}attachCallbackListeners(Z,z){const{universalLinks:ye,handleOpenURL:ke,BuildInfo:gt}=ve(),oe=setTimeout((0,I.Z)(function*(){yield pe(Z),z.onEvent(tt())}),500),ie=function(){var ze=(0,I.Z)(function*(rt){clearTimeout(oe);const Ht=yield pe(Z);let rr=null;Ht&&rt?.url&&(rr=function Fe(q,Z){var z,ye;const ke=function De(q){const Z=xe(q),z=Z.link?decodeURIComponent(Z.link):void 0,ye=xe(z).link,ke=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return xe(ke).link||ke||ye||z||q}(Z);if(ke.includes("/__/auth/callback")){const gt=xe(ke),oe=gt.firebaseError?function ht(q){try{return JSON.parse(q)}catch{return null}}(decodeURIComponent(gt.firebaseError)):null,ie=null===(ye=null===(z=oe?.code)||void 0===z?void 0:z.split("auth/"))||void 0===ye?void 0:ye[1],K=ie?(0,p.aw)(ie):null;return K?{type:q.type,eventId:q.eventId,tenantId:q.tenantId,error:K,urlResponse:null,sessionId:null,postBody:null}:{type:q.type,eventId:q.eventId,tenantId:q.tenantId,sessionId:q.sessionId,urlResponse:ke,postBody:null}}return null}(Ht,rt.url)),z.onEvent(rr||tt())});return function(Ht){return ze.apply(this,arguments)}}();typeof ye<"u"&&"function"==typeof ye.subscribe&&ye.subscribe(null,ie);const K=ke,de=`${gt.packageName.toLowerCase()}://`;ve().handleOpenURL=function(){var ze=(0,I.Z)(function*(rt){if(rt.toLowerCase().startsWith(de)&&ie({url:rt}),"function"==typeof K)try{K(rt)}catch(Ht){console.error(Ht)}});return function(rt){return ze.apply(this,arguments)}}()}};function tt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,p.aw)("no-auth-event")}}function Tt(){var q;return(null===(q=self?.location)||void 0===q?void 0:q.protocol)||null}function St(q=(0,ae.z$)()){return!("file:"!==Tt()&&"ionic:"!==Tt()&&"capacitor:"!==Tt()||!q.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dn(){try{const q=self.localStorage,Z=p.aI();if(q)return q.setItem(Z,"1"),q.removeItem(Z),!function Zn(q=(0,ae.z$)()){return function In(){return(0,ae.w1)()&&11===document?.documentMode}()||function cn(q=(0,ae.z$)()){return/Edge\/\d+/.test(q)}(q)}()||(0,ae.hl)()}catch{return Lt()&&(0,ae.hl)()}return!1}function Lt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pn(){return(function yt(){return"http:"===Tt()||"https:"===Tt()}()||(0,ae.ru)()||St())&&!function Mn(){return(0,ae.b$)()||(0,ae.UG)()}()&&Dn()&&!Lt()}function Rr(){return St()&&typeof document<"u"}function Ln(){return(Ln=(0,I.Z)(function*(){return!!Rr()&&new Promise(q=>{const Z=setTimeout(()=>{q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),q(!0)})})})).apply(this,arguments)}const pt={LOCAL:"local",NONE:"none",SESSION:"session"},gr=p.ax,wr="persistence";function er(q){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,I.Z)(function*(q){yield q._initializationPromise;const Z=Mt(),z=p.aA(wr,q.config.apiKey,q.name);Z&&Z.setItem(z,q._getPersistence())})).apply(this,arguments)}function Mt(){var q;try{return(null===(q=function pr(){return typeof window<"u"?window:null}())||void 0===q?void 0:q.sessionStorage)||null}catch{return null}}const Wt=p.ax;class Tn{constructor(){this.browserResolver=p.az(p.k),this.cordovaResolver=p.az(et),this.underlyingResolver=null,this._redirectPersistence=p.a,this._completeRedirectFn=p.aB,this._overrideRedirectResult=p.aC}_initialize(Z){var z=this;return(0,I.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,z,ye,ke){var gt=this;return(0,I.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openPopup(Z,z,ye,ke)})()}_openRedirect(Z,z,ye,ke){var gt=this;return(0,I.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openRedirect(Z,z,ye,ke)})()}_isIframeWebStorageSupported(Z,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,z)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Rr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,I.Z)(function*(){if(Z.underlyingResolver)return;const z=yield function ar(){return Ln.apply(this,arguments)}();Z.underlyingResolver=z?Z.cordovaResolver:Z.browserResolver})()}}function vn(q){return q.unwrap()}function mr(q){return ei(q)}function ei(q){const{_tokenResponse:Z}=q instanceof ae.ZR?q.customData:q;if(!Z)return null;if(!(q instanceof ae.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return p.P.credentialFromResult(q);const z=Z.providerId;if(!z||z===p.o.PASSWORD)return null;let ye;switch(z){case p.o.GOOGLE:ye=p.Q;break;case p.o.FACEBOOK:ye=p.N;break;case p.o.GITHUB:ye=p.T;break;case p.o.TWITTER:ye=p.W;break;default:const{oauthIdToken:ke,oauthAccessToken:gt,oauthTokenSecret:oe,pendingToken:ie,nonce:K}=Z;return gt||oe||ke||ie?ie?z.startsWith("saml.")?p.aL._create(z,ie):p.J._fromParams({providerId:z,signInMethod:z,pendingToken:ie,idToken:ke,accessToken:gt}):new p.U(z).credential({idToken:ke,accessToken:gt,rawNonce:K}):null}return q instanceof ae.ZR?ye.credentialFromError(q):ye.credentialFromResult(q)}function tn(q,Z){return Z.catch(z=>{throw z instanceof ae.ZR&&function tr(q,Z){var z;const ye=null===(z=Z.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===Z?.code)Z.resolver=new Ut(q,p.an(q,Z));else if(ye){const ke=ei(Z),gt=Z;ke&&(gt.credential=ke,gt.tenantId=ye.tenantId||void 0,gt.email=ye.email||void 0,gt.phoneNumber=ye.phoneNumber||void 0)}}(q,z),z}).then(z=>{const ke=z.user;return{operationType:z.operationType,credential:mr(z),additionalUserInfo:p.al(z),user:Vn.getOrCreate(ke)}})}function ti(q,Z){return qt.apply(this,arguments)}function qt(){return(qt=(0,I.Z)(function*(q,Z){const z=yield Z;return{verificationId:z.verificationId,confirm:ye=>tn(q,z.confirm(ye))}})).apply(this,arguments)}class Ut{constructor(Z,z){this.resolver=z,this.auth=function Kn(q){return q.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return tn(vn(this.auth),this.resolver.resolveSignIn(Z))}}class Vn{constructor(Z){this._delegate=Z,this.multiFactor=p.ao(Z)}static getOrCreate(Z){return Vn.USER_MAP.has(Z)||Vn.USER_MAP.set(Z,new Vn(Z)),Vn.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var z=this;return(0,I.Z)(function*(){return tn(z.auth,p.Z(z._delegate,Z))})()}linkWithPhoneNumber(Z,z){var ye=this;return(0,I.Z)(function*(){return ti(ye.auth,p.l(ye._delegate,Z,z))})()}linkWithPopup(Z){var z=this;return(0,I.Z)(function*(){return tn(z.auth,p.d(z._delegate,Z,Tn))})()}linkWithRedirect(Z){var z=this;return(0,I.Z)(function*(){return yield er(p.aE(z.auth)),p.g(z._delegate,Z,Tn)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var z=this;return(0,I.Z)(function*(){return tn(z.auth,p._(z._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,z){return ti(this.auth,p.r(this._delegate,Z,z))}reauthenticateWithPopup(Z){return tn(this.auth,p.e(this._delegate,Z,Tn))}reauthenticateWithRedirect(Z){var z=this;return(0,I.Z)(function*(){return yield er(p.aE(z.auth)),p.h(z._delegate,Z,Tn)})()}sendEmailVerification(Z){return p.ab(this._delegate,Z)}unlink(Z){var z=this;return(0,I.Z)(function*(){return yield p.ak(z._delegate,Z),z})()}updateEmail(Z){return p.ag(this._delegate,Z)}updatePassword(Z){return p.ah(this._delegate,Z)}updatePhoneNumber(Z){return p.u(this._delegate,Z)}updateProfile(Z){return p.af(this._delegate,Z)}verifyBeforeUpdateEmail(Z,z){return p.ac(this._delegate,Z,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vn.USER_MAP=new WeakMap;const at=p.ax;let Ve=(()=>{class q{constructor(z,ye){if(this.app=z,ye.isInitialized())return this._delegate=ye.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ke}=z.options;at(ke,"invalid-api-key",{appName:z.name}),at(ke,"invalid-api-key",{appName:z.name});const gt=typeof window<"u"?Tn:void 0;this._delegate=ye.initialize({options:{persistence:Pt(ke,z.name),popupRedirectResolver:gt}}),this._delegate._updateErrorMap(p.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,ye){p.G(this._delegate,z,ye)}applyActionCode(z){return p.a2(this._delegate,z)}checkActionCode(z){return p.a3(this._delegate,z)}confirmPasswordReset(z,ye){return p.a1(this._delegate,z,ye)}createUserWithEmailAndPassword(z,ye){var ke=this;return(0,I.Z)(function*(){return tn(ke._delegate,p.a5(ke._delegate,z,ye))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return p.aa(this._delegate,z)}isSignInWithEmailLink(z){return p.a8(this._delegate,z)}getRedirectResult(){var z=this;return(0,I.Z)(function*(){at(Pn(),z._delegate,"operation-not-supported-in-this-environment");const ye=yield p.j(z._delegate,Tn);return ye?tn(z._delegate,Promise.resolve(ye)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function ct(q,Z){(0,p.aE)(q)._logFramework(Z)}(this._delegate,z)}onAuthStateChanged(z,ye,ke){const{next:gt,error:oe,complete:ie}=_t(z,ye,ke);return this._delegate.onAuthStateChanged(gt,oe,ie)}onIdTokenChanged(z,ye,ke){const{next:gt,error:oe,complete:ie}=_t(z,ye,ke);return this._delegate.onIdTokenChanged(gt,oe,ie)}sendSignInLinkToEmail(z,ye){return p.a7(this._delegate,z,ye)}sendPasswordResetEmail(z,ye){return p.a0(this._delegate,z,ye||void 0)}setPersistence(z){var ye=this;return(0,I.Z)(function*(){let ke;switch(function Jn(q,Z){gr(Object.values(pt).includes(Z),q,"invalid-persistence-type"),(0,ae.b$)()?gr(Z!==pt.SESSION,q,"unsupported-persistence-type"):(0,ae.UG)()?gr(Z===pt.NONE,q,"unsupported-persistence-type"):Lt()?gr(Z===pt.NONE||Z===pt.LOCAL&&(0,ae.hl)(),q,"unsupported-persistence-type"):gr(Z===pt.NONE||Dn(),q,"unsupported-persistence-type")}(ye._delegate,z),z){case pt.SESSION:ke=p.a;break;case pt.LOCAL:ke=(yield p.az(p.i)._isAvailable())?p.i:p.b;break;case pt.NONE:ke=p.L;break;default:return p.as("argument-error",{appName:ye._delegate.name})}return ye._delegate.setPersistence(ke)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return tn(this._delegate,p.X(this._delegate))}signInWithCredential(z){return tn(this._delegate,p.Y(this._delegate,z))}signInWithCustomToken(z){return tn(this._delegate,p.$(this._delegate,z))}signInWithEmailAndPassword(z,ye){return tn(this._delegate,p.a6(this._delegate,z,ye))}signInWithEmailLink(z,ye){return tn(this._delegate,p.a9(this._delegate,z,ye))}signInWithPhoneNumber(z,ye){return ti(this._delegate,p.s(this._delegate,z,ye))}signInWithPopup(z){var ye=this;return(0,I.Z)(function*(){return at(Pn(),ye._delegate,"operation-not-supported-in-this-environment"),tn(ye._delegate,p.c(ye._delegate,z,Tn))})()}signInWithRedirect(z){var ye=this;return(0,I.Z)(function*(){return at(Pn(),ye._delegate,"operation-not-supported-in-this-environment"),yield er(ye._delegate),p.f(ye._delegate,z,Tn)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return p.a4(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return q.Persistence=pt,q})();function _t(q,Z,z){let ye=q;"function"!=typeof q&&({next:ye,error:Z,complete:z}=q);const ke=ye;return{next:oe=>ke(oe&&Vn.getOrCreate(oe)),error:Z,complete:z}}function Pt(q,Z){const z=function Nt(q,Z){const z=Mt();if(!z)return[];const ye=p.aA(wr,q,Z);switch(z.getItem(ye)){case pt.NONE:return[p.L];case pt.LOCAL:return[p.i,p.a];case pt.SESSION:return[p.a];default:return[]}}(q,Z);if(typeof self<"u"&&!z.includes(p.i)&&z.push(p.i),typeof window<"u")for(const ye of[p.b,p.a])z.includes(ye)||z.push(ye);return z.includes(p.L)||z.push(p.L),z}class $t{constructor(){this.providerId="phone",this._delegate=new p.P(vn(j.Z.auth()))}static credential(Z,z){return p.P.credential(Z,z)}verifyPhoneNumber(Z,z){return this._delegate.verifyPhoneNumber(Z,z)}unwrap(){return this._delegate}}$t.PHONE_SIGN_IN_METHOD=p.P.PHONE_SIGN_IN_METHOD,$t.PROVIDER_ID=p.P.PROVIDER_ID;const on=p.ax;class jn{constructor(Z,z,ye=j.Z.app()){var ke;on(null===(ke=ye.options)||void 0===ke?void 0:ke.apiKey,"invalid-api-key",{appName:ye.name}),this._delegate=new p.R(Z,z,ye.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ne(q){q.INTERNAL.registerComponent(new Ee.wA("auth-compat",Z=>{const z=Z.getProvider("app-compat").getImmediate(),ye=Z.getProvider("auth");return new Ve(z,ye)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:p.A.EMAIL_SIGNIN,PASSWORD_RESET:p.A.PASSWORD_RESET,RECOVER_EMAIL:p.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:p.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:p.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:p.A.VERIFY_EMAIL}},EmailAuthProvider:p.M,FacebookAuthProvider:p.N,GithubAuthProvider:p.T,GoogleAuthProvider:p.Q,OAuthProvider:p.U,SAMLAuthProvider:p.V,PhoneAuthProvider:$t,PhoneMultiFactorGenerator:p.m,RecaptchaVerifier:jn,TwitterAuthProvider:p.W,Auth:Ve,AuthCredential:p.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),q.registerVersion("@firebase/auth-compat","0.3.4")}(j.Z)},8766:(mt,Te,V)=>{V.d(Te,{Lj:()=>Ne,X3:()=>Ye});var I=V(5861);let p,ae;const Ee=new WeakMap,ve=new WeakMap,we=new WeakMap,re=new WeakMap,te=new WeakMap;let qe={get(Ce,Fe,ut){if(Ce instanceof IDBTransaction){if("done"===Fe)return ve.get(Ce);if("objectStoreNames"===Fe)return Ce.objectStoreNames||we.get(Ce);if("store"===Fe)return ut.objectStoreNames[1]?void 0:ut.objectStore(ut.objectStoreNames[0])}return $e(Ce[Fe])},set:(Ce,Fe,ut)=>(Ce[Fe]=ut,!0),has:(Ce,Fe)=>Ce instanceof IDBTransaction&&("done"===Fe||"store"===Fe)||Fe in Ce};function Oe(Ce){return"function"==typeof Ce?function vt(Ce){return Ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ce)?function(...Fe){return Ce.apply(He(this),Fe),$e(Ee.get(this))}:function(...Fe){return $e(Ce.apply(He(this),Fe))}:function(Fe,...ut){const nt=Ce.call(He(this),Fe,...ut);return we.set(nt,Fe.sort?Fe.sort():[Fe]),$e(nt)}}(Ce):(Ce instanceof IDBTransaction&&function Je(Ce){if(ve.has(Ce))return;const Fe=new Promise((ut,nt)=>{const dt=()=>{Ce.removeEventListener("complete",ht),Ce.removeEventListener("error",De),Ce.removeEventListener("abort",De)},ht=()=>{ut(),dt()},De=()=>{nt(Ce.error||new DOMException("AbortError","AbortError")),dt()};Ce.addEventListener("complete",ht),Ce.addEventListener("error",De),Ce.addEventListener("abort",De)});ve.set(Ce,Fe)}(Ce),((Ce,Fe)=>Fe.some(ut=>Ce instanceof ut))(Ce,function ue(){return p||(p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ce,qe):Ce)}function $e(Ce){if(Ce instanceof IDBRequest)return function ce(Ce){const Fe=new Promise((ut,nt)=>{const dt=()=>{Ce.removeEventListener("success",ht),Ce.removeEventListener("error",De)},ht=()=>{ut($e(Ce.result)),dt()},De=()=>{nt(Ce.error),dt()};Ce.addEventListener("success",ht),Ce.addEventListener("error",De)});return Fe.then(ut=>{ut instanceof IDBCursor&&Ee.set(ut,Ce)}).catch(()=>{}),te.set(Fe,Ce),Fe}(Ce);if(re.has(Ce))return re.get(Ce);const Fe=Oe(Ce);return Fe!==Ce&&(re.set(Ce,Fe),te.set(Fe,Ce)),Fe}const He=Ce=>te.get(Ce);function Ye(Ce,Fe,{blocked:ut,upgrade:nt,blocking:dt,terminated:ht}={}){const De=indexedDB.open(Ce,Fe),xe=$e(De);return nt&&De.addEventListener("upgradeneeded",Pe=>{nt($e(De.result),Pe.oldVersion,Pe.newVersion,$e(De.transaction))}),ut&&De.addEventListener("blocked",()=>ut()),xe.then(Pe=>{ht&&Pe.addEventListener("close",()=>ht()),dt&&Pe.addEventListener("versionchange",()=>dt())}).catch(()=>{}),xe}function Ne(Ce,{blocked:Fe}={}){const ut=indexedDB.deleteDatabase(Ce);return Fe&&ut.addEventListener("blocked",()=>Fe()),$e(ut).then(()=>{})}const Ue=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],ot=new Map;function pe(Ce,Fe){if(!(Ce instanceof IDBDatabase)||Fe in Ce||"string"!=typeof Fe)return;if(ot.get(Fe))return ot.get(Fe);const ut=Fe.replace(/FromIndex$/,""),nt=Fe!==ut,dt=Be.includes(ut);if(!(ut in(nt?IDBIndex:IDBObjectStore).prototype)||!dt&&!Ue.includes(ut))return;const ht=function(){var De=(0,I.Z)(function*(xe,...Pe){const Ge=this.transaction(xe,dt?"readwrite":"readonly");let et=Ge.store;return nt&&(et=et.index(Pe.shift())),(yield Promise.all([et[ut](...Pe),dt&&Ge.done]))[0]});return function(Pe){return De.apply(this,arguments)}}();return ot.set(Fe,ht),ht}!function st(Ce){qe=Ce(qe)}(Ce=>({...Ce,get:(Fe,ut,nt)=>pe(Fe,ut)||Ce.get(Fe,ut,nt),has:(Fe,ut)=>!!pe(Fe,ut)||Ce.has(Fe,ut)}))},5861:(mt,Te,V)=>{function I(p,ae,ue,fe,Ee,ve,we){try{var re=p[ve](we),te=re.value}catch(ce){return void ue(ce)}re.done?ae(te):Promise.resolve(te).then(fe,Ee)}function j(p){return function(){var ae=this,ue=arguments;return new Promise(function(fe,Ee){var ve=p.apply(ae,ue);function we(te){I(ve,fe,Ee,we,re,"next",te)}function re(te){I(ve,fe,Ee,we,re,"throw",te)}we(void 0)})}}V.d(Te,{Z:()=>j})}},mt=>{mt(mt.s=5256)}]);