"use strict";(self.webpackChunkexam=self.webpackChunkexam||[]).push([[179],{2011:(It,Re,j)=>{j.d(Re,{Dh:()=>Ie,GT:()=>ye,cc:()=>He,hO:()=>tt,on:()=>oe,pX:()=>he,xv:()=>Te});var g=j(4650),H=j(9260),m=j(2122);It=j.hmd(It);const de=["ngOnDestroy"],he=(qe,Ze,et,ke={})=>new Proxy(qe,{get:(Qe,je)=>et.runOutsideAngular(()=>{var ut;if(qe[je])return!(null===(ut=ke?.spy)||void 0===ut)&&ut.get&&ke.spy.get(je,qe[je]),qe[je];if(de.indexOf(je)>-1)return()=>{};const pe=Ze.toPromise().then(Se=>{const $e=Se&&Se[je];return"function"==typeof $e?$e.bind(Se):$e&&$e.then?$e.then(pt=>et.run(()=>pt)):et.run(()=>$e)});return new Proxy(()=>{},{get:(Se,$e)=>pe[$e],apply:(Se,$e,pt)=>pe.then(ot=>{var gt;const mt=ot&&ot(...pt);return!(null===(gt=ke?.spy)||void 0===gt)&&gt.apply&&ke.spy.apply(je,pt,mt),mt})})})}),ye=(qe,Ze)=>{Ze.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(ke=>{Object.defineProperty(qe.prototype,ke,Object.getOwnPropertyDescriptor(et.prototype||et,ke))})})};class Ce{constructor(Ze){return Ze}}const Ie=new g.OlP("angularfire2.app.options"),Te=new g.OlP("angularfire2.app.name");function oe(qe,Ze,et){const Qe="object"==typeof et&&et||{};Qe.name=Qe.name||"string"==typeof et&&et||"[DEFAULT]";const ut=H.Z.apps.filter(pe=>pe&&pe.name===Qe.name)[0]||Ze.runOutsideAngular(()=>H.Z.initializeApp(qe,Qe));try{JSON.stringify(qe)!==JSON.stringify(ut.options)&&se("error",`${ut.name} Firebase App already initialized with different options${It.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(ut)}const se=(qe,...Ze)=>{(0,g.X6Q)()&&typeof console<"u"&&console[qe](...Ze)},fe={provide:Ce,useFactory:oe,deps:[Ie,g.R0b,[new g.FiY,Te]]};let tt=(()=>{class qe{constructor(et){H.Z.registerVersion("angularfire",m.q4.full,"core"),H.Z.registerVersion("angularfire",m.q4.full,"app-compat"),H.Z.registerVersion("angular",g.q4F.full,et.toString())}static initializeApp(et,ke){return{ngModule:qe,providers:[{provide:Ie,useValue:et},{provide:Te,useValue:ke}]}}}return qe.\u0275fac=function(et){return new(et||qe)(g.LFG(g.Lbi))},qe.\u0275mod=g.oAB({type:qe}),qe.\u0275inj=g.cJS({providers:[fe]}),qe})();function He(qe,Ze,et,ke,Qe){const[,je,ut]=globalThis.\u0275AngularfireInstanceCache.find(pe=>pe[0]===qe)||[];if(je)return function nt(qe,Ze){try{return qe.toString()===Ze.toString()}catch{return qe===Ze}}(Qe,ut)||(Le("error",`${Ze} was already initialized on the ${et} Firebase App with different settings.${Dt?" You may need to reload as Firebase is not HMR aware.":""}`),Le("warn",{is:Qe,was:ut})),je;{const pe=ke();return globalThis.\u0275AngularfireInstanceCache.push([qe,pe,Qe]),pe}}const Dt=!!It.hot,Le=(qe,...Ze)=>{(0,g.X6Q)()&&typeof console<"u"&&console[qe](...Ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(It,Re,j)=>{j.d(Re,{q4:()=>Qa,iC:()=>kn,HU:()=>$,vb:()=>E,JM:()=>_});var g=j(4650),H=j(259),m=j(5861),de=j(9681),he=j(2090),ye=j(4859),Ce=j(1877),Ie=j(8766);const Te="@firebase/installations",oe="0.6.4",fe=`w:${oe}`,tt="FIS_v2",Ze=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(M){return M instanceof he.ZR&&M.code.includes("request-failed")}function ke({projectId:M}){return`https://firebaseinstallations.googleapis.com/v1/projects/${M}/installations`}function Qe(M){return{token:M.token,requestStatus:2,expiresIn:ot(M.expiresIn),creationTime:Date.now()}}function je(M,P){return ut.apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(M,P){const ne=(yield P.json()).error;return Ze.create("request-failed",{requestName:M,serverCode:ne.code,serverMessage:ne.message,serverStatus:ne.status})})).apply(this,arguments)}function pe({apiKey:M}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M})}function Se(M,{refreshToken:P}){const G=pe(M);return G.append("Authorization",function gt(M){return`${tt} ${M}`}(P)),G}function $e(M){return pt.apply(this,arguments)}function pt(){return(pt=(0,m.Z)(function*(M){const P=yield M();return P.status>=500&&P.status<600?M():P})).apply(this,arguments)}function ot(M){return Number(M.replace("s","000"))}function mt(M,P){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,m.Z)(function*({appConfig:M,heartbeatServiceProvider:P},{fid:G}){const ne=ke(M),_e=pe(M),Me=P.getImmediate({optional:!0});if(Me){const zt=yield Me.getHeartbeatsHeader();zt&&_e.append("x-firebase-client",zt)}const Lt={method:"POST",headers:_e,body:JSON.stringify({fid:G,authVersion:tt,appId:M.appId,sdkVersion:fe})},Kt=yield $e(()=>fetch(ne,Lt));if(Kt.ok){const zt=yield Kt.json();return{fid:zt.fid||G,registrationStatus:2,refreshToken:zt.refreshToken,authToken:Qe(zt.authToken)}}throw yield je("Create Installation",Kt)})).apply(this,arguments)}function Pe(M){return new Promise(P=>{setTimeout(P,M)})}const We=/^[cdef][\w-]{21}$/;function it(){try{const M=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(M),M[0]=112+M[0]%16;const G=function ft(M){return function Ve(M){return btoa(String.fromCharCode(...M)).replace(/\+/g,"-").replace(/\//g,"_")}(M).substr(0,22)}(M);return We.test(G)?G:""}catch{return""}}function yt(M){return`${M.appName}!${M.appId}`}const gn=new Map;function Ee(M,P){const G=yt(M);At(G,P),function Tn(M,P){const G=function hn(){return!vn&&"BroadcastChannel"in self&&(vn=new BroadcastChannel("[Firebase] FID Change"),vn.onmessage=M=>{At(M.data.key,M.data.fid)}),vn}();G&&G.postMessage({key:M,fid:P}),function Jn(){0===gn.size&&vn&&(vn.close(),vn=null)}()}(G,P)}function At(M,P){const G=gn.get(M);if(G)for(const ne of G)ne(P)}let vn=null;const Rn="firebase-installations-store";let yr=null;function cr(){return yr||(yr=(0,Ie.X3)("firebase-installations-database",1,{upgrade:(M,P)=>{0===P&&M.createObjectStore(Rn)}})),yr}function Ln(M,P){return vr.apply(this,arguments)}function vr(){return(vr=(0,m.Z)(function*(M,P){const G=yt(M),_e=(yield cr()).transaction(Rn,"readwrite"),Me=_e.objectStore(Rn),Je=yield Me.get(G);return yield Me.put(P,G),yield _e.done,(!Je||Je.fid!==P.fid)&&Ee(M,P.fid),P})).apply(this,arguments)}function ct(M){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,m.Z)(function*(M){const P=yt(M),ne=(yield cr()).transaction(Rn,"readwrite");yield ne.objectStore(Rn).delete(P),yield ne.done})).apply(this,arguments)}function wr(M,P){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(M,P){const G=yt(M),_e=(yield cr()).transaction(Rn,"readwrite"),Me=_e.objectStore(Rn),Je=yield Me.get(G),Lt=P(Je);return void 0===Lt?yield Me.delete(G):yield Me.put(Lt,G),yield _e.done,Lt&&(!Je||Je.fid!==Lt.fid)&&Ee(M,Lt.fid),Lt})).apply(this,arguments)}function dr(M){return en.apply(this,arguments)}function en(){return(en=(0,m.Z)(function*(M){let P;const G=yield wr(M.appConfig,ne=>{const _e=Vt(ne),Me=Ot(M,_e);return P=Me.registrationPromise,Me.installationEntry});return""===G.fid?{installationEntry:yield P}:{installationEntry:G,registrationPromise:P}})).apply(this,arguments)}function Vt(M){return hr(M||{fid:it(),registrationStatus:0})}function Ot(M,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(Ze.create("app-offline"))};const G={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},ne=function Ht(M,P){return Nn.apply(this,arguments)}(M,G);return{installationEntry:G,registrationPromise:ne}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:fn(M)}:{installationEntry:P}}function Nn(){return(Nn=(0,m.Z)(function*(M,P){try{const G=yield mt(M,P);return Ln(M.appConfig,G)}catch(G){throw et(G)&&409===G.customData.serverCode?yield ct(M.appConfig):yield Ln(M.appConfig,{fid:P.fid,registrationStatus:0}),G}})).apply(this,arguments)}function fn(M){return ar.apply(this,arguments)}function ar(){return(ar=(0,m.Z)(function*(M){let P=yield Tr(M.appConfig);for(;1===P.registrationStatus;)yield Pe(100),P=yield Tr(M.appConfig);if(0===P.registrationStatus){const{installationEntry:G,registrationPromise:ne}=yield dr(M);return ne||G}return P})).apply(this,arguments)}function Tr(M){return wr(M,P=>{if(!P)throw Ze.create("installation-not-found");return hr(P)})}function hr(M){return function ni(M){return 1===M.registrationStatus&&M.registrationTime+1e4<Date.now()}(M)?{fid:M.fid,registrationStatus:0}:M}function rn(M,P){return ri.apply(this,arguments)}function ri(){return(ri=(0,m.Z)(function*({appConfig:M,heartbeatServiceProvider:P},G){const ne=Xt(M,G),_e=Se(M,G),Me=P.getImmediate({optional:!0});if(Me){const zt=yield Me.getHeartbeatsHeader();zt&&_e.append("x-firebase-client",zt)}const Lt={method:"POST",headers:_e,body:JSON.stringify({installation:{sdkVersion:fe,appId:M.appId}})},Kt=yield $e(()=>fetch(ne,Lt));if(Kt.ok)return Qe(yield Kt.json());throw yield je("Generate Auth Token",Kt)})).apply(this,arguments)}function Xt(M,{fid:P}){return`${ke(M)}/${P}/authTokens:generate`}function Gt(M){return jn.apply(this,arguments)}function jn(){return(jn=(0,m.Z)(function*(M,P=!1){let G;const ne=yield wr(M.appConfig,Me=>{if(!sn(Me))throw Ze.create("not-registered");const Je=Me.authToken;if(!P&&Vn(Je))return Me;if(1===Je.requestStatus)return G=lt(M,P),Me;{if(!navigator.onLine)throw Ze.create("app-offline");const Lt=re(Me);return G=Ut(M,Lt),Lt}});return G?yield G:ne.authToken})).apply(this,arguments)}function lt(M,P){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,m.Z)(function*(M,P){let G=yield bt(M.appConfig);for(;1===G.authToken.requestStatus;)yield Pe(100),G=yield bt(M.appConfig);const ne=G.authToken;return 0===ne.requestStatus?Gt(M,P):ne})).apply(this,arguments)}function bt(M){return wr(M,P=>{if(!sn(P))throw Ze.create("not-registered");return function Q(M){return 1===M.requestStatus&&M.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function Ut(M,P){return $t.apply(this,arguments)}function $t(){return($t=(0,m.Z)(function*(M,P){try{const G=yield rn(M,P),ne=Object.assign(Object.assign({},P),{authToken:G});return yield Ln(M.appConfig,ne),G}catch(G){if(!et(G)||401!==G.customData.serverCode&&404!==G.customData.serverCode){const ne=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield Ln(M.appConfig,ne)}else yield ct(M.appConfig);throw G}})).apply(this,arguments)}function sn(M){return void 0!==M&&2===M.registrationStatus}function Vn(M){return 2===M.requestStatus&&!function ce(M){const P=Date.now();return P<M.creationTime||M.creationTime+M.expiresIn<P+36e5}(M)}function re(M){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},M),{authToken:P})}function q(){return(q=(0,m.Z)(function*(M){const P=M,{installationEntry:G,registrationPromise:ne}=yield dr(P);return ne?ne.catch(console.error):Gt(P).catch(console.error),G.fid})).apply(this,arguments)}function Fe(){return(Fe=(0,m.Z)(function*(M,P=!1){const G=M;return yield _t(G),(yield Gt(G,P)).token})).apply(this,arguments)}function _t(M){return le.apply(this,arguments)}function le(){return(le=(0,m.Z)(function*(M){const{registrationPromise:P}=yield dr(M);P&&(yield P)})).apply(this,arguments)}function gi(M){return Ze.create("missing-app-config-values",{valueName:M})}const qr="installations",Zr=M=>{const P=M.getProvider("app").getImmediate(),G=function Xn(M){if(!M||!M.options)throw gi("App Configuration");if(!M.name)throw gi("App Name");const P=["projectId","apiKey","appId"];for(const G of P)if(!M.options[G])throw gi(G);return{appName:M.name,projectId:M.options.projectId,apiKey:M.options.apiKey,appId:M.options.appId}}(P);return{app:P,appConfig:G,heartbeatServiceProvider:(0,de._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},wo=M=>{const P=M.getProvider("app").getImmediate(),G=(0,de._getProvider)(P,qr).getImmediate();return{getId:()=>function J(M){return q.apply(this,arguments)}(G),getToken:_e=>function we(M){return Fe.apply(this,arguments)}(G,_e)}};(function us(){(0,de._registerComponent)(new ye.wA(qr,Zr,"PUBLIC")),(0,de._registerComponent)(new ye.wA("installations-internal",wo,"PRIVATE"))})(),(0,de.registerVersion)(Te,oe),(0,de.registerVersion)(Te,oe,"esm2017");const Is="@firebase/remote-config",Zn=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ui{constructor(P,G,ne,_e){this.client=P,this.storage=G,this.storageCache=ne,this.logger=_e}isCachedDataFresh(P,G){if(!G)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-G,_e=ne<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${_e}.`),_e}fetch(P){var G=this;return(0,m.Z)(function*(){const[ne,_e]=yield Promise.all([G.storage.getLastSuccessfulFetchTimestampMillis(),G.storage.getLastSuccessfulFetchResponse()]);if(_e&&G.isCachedDataFresh(P.cacheMaxAgeMillis,ne))return _e;P.eTag=_e&&_e.eTag;const Me=yield G.client.fetch(P),Je=[G.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Me.status&&Je.push(G.storage.setLastSuccessfulFetchResponse(Me)),yield Promise.all(Je),Me})()}}function Mr(M=navigator){return M.languages&&M.languages[0]||M.language}class Bi{constructor(P,G,ne,_e,Me,Je){this.firebaseInstallations=P,this.sdkVersion=G,this.namespace=ne,this.projectId=_e,this.apiKey=Me,this.appId=Je}fetch(P){var G=this;return(0,m.Z)(function*(){const[ne,_e]=yield Promise.all([G.firebaseInstallations.getId(),G.firebaseInstallations.getToken()]),Je=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${G.projectId}/namespaces/${G.namespace}:fetch?key=${G.apiKey}`,Lt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},Kt={sdk_version:G.sdkVersion,app_instance_id:ne,app_instance_id_token:_e,app_id:G.appId,language_code:Mr()},zt={method:"POST",headers:Lt,body:JSON.stringify(Kt)},pn=fetch(Je,zt),on=new Promise((Zs,ko)=>{P.signal.addEventListener(()=>{const Xa=new Error("The operation was aborted.");Xa.name="AbortError",ko(Xa)})});let po;try{yield Promise.race([pn,on]),po=yield pn}catch(Zs){let ko="fetch-client-network";throw"AbortError"===Zs?.name&&(ko="fetch-timeout"),Zn.create(ko,{originalErrorMessage:Zs?.message})}let di=po.status;const Ra=po.headers.get("ETag")||void 0;let lc,qs;if(200===po.status){let Zs;try{Zs=yield po.json()}catch(ko){throw Zn.create("fetch-client-parse",{originalErrorMessage:ko?.message})}lc=Zs.entries,qs=Zs.state}if("INSTANCE_STATE_UNSPECIFIED"===qs?di=500:"NO_CHANGE"===qs?di=304:("NO_TEMPLATE"===qs||"EMPTY_CONFIG"===qs)&&(lc={}),304!==di&&200!==di)throw Zn.create("fetch-status",{httpStatus:di});return{status:di,eTag:Ra,config:lc}})()}}class Sr{constructor(P,G){this.client=P,this.storage=G}fetch(P){var G=this;return(0,m.Z)(function*(){const ne=(yield G.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return G.attemptFetch(P,ne)})()}attemptFetch(P,{throttleEndTimeMillis:G,backoffCount:ne}){var _e=this;return(0,m.Z)(function*(){yield function wa(M,P){return new Promise((G,ne)=>{const _e=Math.max(P-Date.now(),0),Me=setTimeout(G,_e);M.addEventListener(()=>{clearTimeout(Me),ne(Zn.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,G);try{const Me=yield _e.client.fetch(P);return yield _e.storage.deleteThrottleMetadata(),Me}catch(Me){if(!function nr(M){if(!(M instanceof he.ZR&&M.customData))return!1;const P=Number(M.customData.httpStatus);return 429===P||500===P||503===P||504===P}(Me))throw Me;const Je={throttleEndTimeMillis:Date.now()+(0,he.$s)(ne),backoffCount:ne+1};return yield _e.storage.setThrottleMetadata(Je),_e.attemptFetch(P,Je)}})()}}class to{constructor(P,G,ne,_e,Me){this.app=P,this._client=G,this._storageCache=ne,this._storage=_e,this._logger=Me,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function cs(M,P){const G=M.target.error||void 0;return Zn.create(P,{originalErrorMessage:G&&G?.message})}const Ur="app_namespace_store";class Yr{constructor(P,G,ne,_e=function yi(){return new Promise((M,P)=>{try{const G=indexedDB.open("firebase_remote_config",1);G.onerror=ne=>{P(cs(ne,"storage-open"))},G.onsuccess=ne=>{M(ne.target.result)},G.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Ur,{keyPath:"compositeKey"})}}catch(G){P(Zn.create("storage-open",{originalErrorMessage:G?.message}))}})}()){this.appId=P,this.appName=G,this.namespace=ne,this.openDbPromise=_e}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var G=this;return(0,m.Z)(function*(){const ne=yield G.openDbPromise;return new Promise((_e,Me)=>{const Lt=ne.transaction([Ur],"readonly").objectStore(Ur),Kt=G.createCompositeKey(P);try{const zt=Lt.get(Kt);zt.onerror=pn=>{Me(cs(pn,"storage-get"))},zt.onsuccess=pn=>{const on=pn.target.result;_e(on?on.value:void 0)}}catch(zt){Me(Zn.create("storage-get",{originalErrorMessage:zt?.message}))}})})()}set(P,G){var ne=this;return(0,m.Z)(function*(){const _e=yield ne.openDbPromise;return new Promise((Me,Je)=>{const Kt=_e.transaction([Ur],"readwrite").objectStore(Ur),zt=ne.createCompositeKey(P);try{const pn=Kt.put({compositeKey:zt,value:G});pn.onerror=on=>{Je(cs(on,"storage-set"))},pn.onsuccess=()=>{Me()}}catch(pn){Je(Zn.create("storage-set",{originalErrorMessage:pn?.message}))}})})()}delete(P){var G=this;return(0,m.Z)(function*(){const ne=yield G.openDbPromise;return new Promise((_e,Me)=>{const Lt=ne.transaction([Ur],"readwrite").objectStore(Ur),Kt=G.createCompositeKey(P);try{const zt=Lt.delete(Kt);zt.onerror=pn=>{Me(cs(pn,"storage-delete"))},zt.onsuccess=()=>{_e()}}catch(zt){Me(Zn.create("storage-delete",{originalErrorMessage:zt?.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class bs{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,m.Z)(function*(){const G=P.storage.getLastFetchStatus(),ne=P.storage.getLastSuccessfulFetchTimestampMillis(),_e=P.storage.getActiveConfig(),Me=yield G;Me&&(P.lastFetchStatus=Me);const Je=yield ne;Je&&(P.lastSuccessfulFetchTimestampMillis=Je);const Lt=yield _e;Lt&&(P.activeConfig=Lt)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function Au(){return Io.apply(this,arguments)}function Io(){return(Io=(0,m.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function $o(){(0,de._registerComponent)(new ye.wA("remote-config",function M(P,{instanceIdentifier:G}){const ne=P.getProvider("app").getImmediate(),_e=P.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,he.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:Me,apiKey:Je,appId:Lt}=ne.options;if(!Me)throw Zn.create("registration-project-id");if(!Je)throw Zn.create("registration-api-key");if(!Lt)throw Zn.create("registration-app-id");const Kt=new Yr(Lt,ne.name,G=G||"firebase"),zt=new bs(Kt),pn=new Ce.Yd(Is);pn.logLevel=Ce.in.ERROR;const on=new Bi(_e,de.SDK_VERSION,G,Me,Je,Lt),po=new Sr(on,Kt),di=new Ui(po,Kt,zt,pn),Ra=new to(ne,di,zt,Kt,pn);return function On(M){const P=(0,he.m9)(M);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Ra),Ra},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(Is,"0.4.4"),(0,de.registerVersion)(Is,"0.4.4","esm2017")}();const Ci="/firebase-messaging-sw.js",Bs="/firebase-cloud-messaging-push-scope",vi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ro="google.c.a.c_id",Da="google.c.a.c_l",oa="google.c.a.ts",Ti="google.c.a.e";var Si=(()=>{return(M=Si||(Si={})).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked",Si;var M})();function ji(M){const P=new Uint8Array(M);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ho(M){const G=(M+"=".repeat((4-M.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(G),_e=new Uint8Array(ne.length);for(let Me=0;Me<ne.length;++Me)_e[Me]=ne.charCodeAt(Me);return _e}const ls="fcm_token_details_db",io="fcm_token_object_Store";function ds(M){return so.apply(this,arguments)}function so(){return so=(0,m.Z)(function*(M){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Me=>Me.name).includes(ls))return null;let P=null;return(yield(0,Ie.X3)(ls,5,{upgrade:(ne=(0,m.Z)(function*(_e,Me,Je,Lt){var Kt;if(Me<2||!_e.objectStoreNames.contains(io))return;const zt=Lt.objectStore(io),pn=yield zt.index("fcmSenderId").get(M);if(yield zt.clear(),pn)if(2===Me){const on=pn;if(!on.auth||!on.p256dh||!on.endpoint)return;P={token:on.fcmToken,createTime:null!==(Kt=on.createTime)&&void 0!==Kt?Kt:Date.now(),subscriptionOptions:{auth:on.auth,p256dh:on.p256dh,endpoint:on.endpoint,swScope:on.swScope,vapidKey:"string"==typeof on.vapidKey?on.vapidKey:ji(on.vapidKey)}}}else if(3===Me){const on=pn;P={token:on.fcmToken,createTime:on.createTime,subscriptionOptions:{auth:ji(on.auth),p256dh:ji(on.p256dh),endpoint:on.endpoint,swScope:on.swScope,vapidKey:ji(on.vapidKey)}}}else if(4===Me){const on=pn;P={token:on.fcmToken,createTime:on.createTime,subscriptionOptions:{auth:ji(on.auth),p256dh:ji(on.p256dh),endpoint:on.endpoint,swScope:on.swScope,vapidKey:ji(on.vapidKey)}}}}),function(Me,Je,Lt,Kt){return ne.apply(this,arguments)})})).close(),yield(0,Ie.Lj)(ls),yield(0,Ie.Lj)("fcm_vapid_details_db"),yield(0,Ie.Lj)("undefined"),Cs(P)?P:null;var ne}),so.apply(this,arguments)}function Cs(M){if(!M||!M.subscriptionOptions)return!1;const{subscriptionOptions:P}=M;return"number"==typeof M.createTime&&M.createTime>0&&"string"==typeof M.token&&M.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const js="firebase-messaging-store";let fs=null;function Ts(){return fs||(fs=(0,Ie.X3)("firebase-messaging-database",1,{upgrade:(M,P)=>{0===P&&M.createObjectStore(js)}})),fs}function bo(M){return ps.apply(this,arguments)}function ps(){return(ps=(0,m.Z)(function*(M){const P=Zt(M),ne=yield(yield Ts()).transaction(js).objectStore(js).get(P);if(ne)return ne;{const _e=yield ds(M.appConfig.senderId);if(_e)return yield Ai(M,_e),_e}})).apply(this,arguments)}function Ai(M,P){return Br.apply(this,arguments)}function Br(){return(Br=(0,m.Z)(function*(M,P){const G=Zt(M),_e=(yield Ts()).transaction(js,"readwrite");return yield _e.objectStore(js).put(P,G),yield _e.done,P})).apply(this,arguments)}function Rt(M){return gs.apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(M){const P=Zt(M),ne=(yield Ts()).transaction(js,"readwrite");yield ne.objectStore(js).delete(P),yield ne.done})).apply(this,arguments)}function Zt({appConfig:M}){return M.appId}const Yn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ji(M,P){return pr.apply(this,arguments)}function pr(){return(pr=(0,m.Z)(function*(M,P){const G=yield _i(M),ne=oi(P),_e={method:"POST",headers:G,body:JSON.stringify(ne)};let Me;try{Me=yield(yield fetch(Dr(M.appConfig),_e)).json()}catch(Je){throw Yn.create("token-subscribe-failed",{errorInfo:Je?.toString()})}if(Me.error)throw Yn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Yn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function Co(M,P){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,m.Z)(function*(M,P){const G=yield _i(M),ne=oi(P.subscriptionOptions),_e={method:"PATCH",headers:G,body:JSON.stringify(ne)};let Me;try{Me=yield(yield fetch(`${Dr(M.appConfig)}/${P.token}`,_e)).json()}catch(Je){throw Yn.create("token-update-failed",{errorInfo:Je?.toString()})}if(Me.error)throw Yn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Yn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function jr(M,P){return As.apply(this,arguments)}function As(){return(As=(0,m.Z)(function*(M,P){const ne={method:"DELETE",headers:yield _i(M)};try{const Me=yield(yield fetch(`${Dr(M.appConfig)}/${P}`,ne)).json();if(Me.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(_e){throw Yn.create("token-unsubscribe-failed",{errorInfo:_e?.toString()})}})).apply(this,arguments)}function Dr({projectId:M}){return`https://fcmregistrations.googleapis.com/v1/projects/${M}/registrations`}function _i(M){return mn.apply(this,arguments)}function mn(){return(mn=(0,m.Z)(function*({appConfig:M,installations:P}){const G=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M.apiKey,"x-goog-firebase-installations-auth":`FIS ${G}`})})).apply(this,arguments)}function oi({p256dh:M,auth:P,endpoint:G,vapidKey:ne}){const _e={web:{endpoint:G,auth:P,p256dh:M}};return ne!==vi&&(_e.web.applicationPubKey=ne),_e}const Pr=6048e5;function ba(M){return $r.apply(this,arguments)}function $r(){return($r=(0,m.Z)(function*(M){const P=yield xs(M.swRegistration,M.vapidKey),G={vapidKey:M.vapidKey,swScope:M.swRegistration.scope,endpoint:P.endpoint,auth:ji(P.getKey("auth")),p256dh:ji(P.getKey("p256dh"))},ne=yield bo(M.firebaseDependencies);if(ne){if(ua(ne.subscriptionOptions,G))return Date.now()>=ne.createTime+Pr?tn(M,{token:ne.token,createTime:Date.now(),subscriptionOptions:G}):ne.token;try{yield jr(M.firebaseDependencies,ne.token)}catch(_e){console.warn(_e)}return aa(M.firebaseDependencies,G)}return aa(M.firebaseDependencies,G)})).apply(this,arguments)}function To(M){return ur.apply(this,arguments)}function ur(){return(ur=(0,m.Z)(function*(M){const P=yield bo(M.firebaseDependencies);P&&(yield jr(M.firebaseDependencies,P.token),yield Rt(M.firebaseDependencies));const G=yield M.swRegistration.pushManager.getSubscription();return!G||G.unsubscribe()})).apply(this,arguments)}function tn(M,P){return $i.apply(this,arguments)}function $i(){return($i=(0,m.Z)(function*(M,P){try{const G=yield Co(M.firebaseDependencies,P),ne=Object.assign(Object.assign({},P),{token:G,createTime:Date.now()});return yield Ai(M.firebaseDependencies,ne),G}catch(G){throw yield To(M),G}})).apply(this,arguments)}function aa(M,P){return $s.apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(M,P){const ne={token:yield Ji(M,P),createTime:Date.now(),subscriptionOptions:P};return yield Ai(M,ne),ne.token})).apply(this,arguments)}function xs(M,P){return kr.apply(this,arguments)}function kr(){return(kr=(0,m.Z)(function*(M,P){return(yield M.pushManager.getSubscription())||M.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ho(P)})})).apply(this,arguments)}function ua(M,P){return P.vapidKey===M.vapidKey&&P.endpoint===M.endpoint&&P.auth===M.auth&&P.p256dh===M.p256dh}function ca(M){const P={from:M.from,collapseKey:M.collapse_key,messageId:M.fcmMessageId};return function So(M,P){if(!P.notification)return;M.notification={};const G=P.notification.title;G&&(M.notification.title=G);const ne=P.notification.body;ne&&(M.notification.body=ne);const _e=P.notification.image;_e&&(M.notification.image=_e);const Me=P.notification.icon;Me&&(M.notification.icon=Me)}(P,M),function S(M,P){P.data&&(M.data=P.data)}(P,M),function R(M,P){var G,ne,_e,Me,Je;if(!(P.fcmOptions||null!==(G=P.notification)&&void 0!==G&&G.click_action))return;M.fcmOptions={};const Lt=null!==(_e=null===(ne=P.fcmOptions)||void 0===ne?void 0:ne.link)&&void 0!==_e?_e:null===(Me=P.notification)||void 0===Me?void 0:Me.click_action;Lt&&(M.fcmOptions.link=Lt);const Kt=null===(Je=P.fcmOptions)||void 0===Je?void 0:Je.analytics_label;Kt&&(M.fcmOptions.analyticsLabel=Kt)}(P,M),P}function A(M){return"object"==typeof M&&!!M&&ro in M}function Z(M,P){const G=[];for(let ne=0;ne<M.length;ne++)G.push(M.charAt(ne)),ne<P.length&&G.push(P.charAt(ne));return G.join("")}function Ct(M){return Yn.create("missing-app-config-values",{valueName:M})}Z("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Z("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class En{constructor(P,G,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const _e=function be(M){if(!M||!M.options)throw Ct("App Configuration Object");if(!M.name)throw Ct("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:G}=M;for(const ne of P)if(!G[ne])throw Ct(ne);return{appName:M.name,projectId:G.projectId,apiKey:G.apiKey,appId:G.appId,senderId:G.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:_e,installations:G,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function rr(M){return ai.apply(this,arguments)}function ai(){return(ai=(0,m.Z)(function*(M){try{M.swRegistration=yield navigator.serviceWorker.register(Ci,{scope:Bs}),M.swRegistration.update().catch(()=>{})}catch(P){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:P?.message})}})).apply(this,arguments)}function Hi(M,P){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,m.Z)(function*(M,P){if(!P&&!M.swRegistration&&(yield rr(M)),P||!M.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");M.swRegistration=P}})).apply(this,arguments)}function Ms(M,P){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,m.Z)(function*(M,P){P?M.vapidKey=P:M.vapidKey||(M.vapidKey=vi)})).apply(this,arguments)}function Ei(){return(Ei=(0,m.Z)(function*(M,P){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield Ms(M,P?.vapidKey),yield Hi(M,P?.serviceWorkerRegistration),ba(M)})).apply(this,arguments)}function Ns(M,P,G){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,m.Z)(function*(M,P,G){const ne=es(P);(yield M.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:G[ro],message_name:G[Da],message_time:G[oa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function es(M){switch(M){case Si.NOTIFICATION_CLICKED:return"notification_open";case Si.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zo(){return(zo=(0,m.Z)(function*(M,P){const G=P.data;if(!G.isFirebaseMessaging)return;M.onMessageHandler&&G.messageType===Si.PUSH_RECEIVED&&("function"==typeof M.onMessageHandler?M.onMessageHandler(ca(G)):M.onMessageHandler.next(ca(G)));const ne=G.data;A(ne)&&"1"===ne[Ti]&&(yield Ns(M,G.messageType,ne))})).apply(this,arguments)}const Wo="@firebase/messaging",Gs=M=>{const P=new En(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),M.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",G=>function au(M,P){return zo.apply(this,arguments)}(P,G)),P},oo=M=>{const P=M.getProvider("messaging").getImmediate();return{getToken:ne=>function Qr(M,P){return Ei.apply(this,arguments)}(P,ne)}};function ao(){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,m.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ua(){(0,de._registerComponent)(new ye.wA("messaging",Gs,"PUBLIC")),(0,de._registerComponent)(new ye.wA("messaging-internal",oo,"PRIVATE")),(0,de.registerVersion)(Wo,"0.12.4"),(0,de.registerVersion)(Wo,"0.12.4","esm2017")}();const xo="analytics",ui="firebase_id",la="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ha="https://www.googletagmanager.com/gtag/js",An=new Ce.Yd("@firebase/analytics");function Jr(M){return Promise.all(M.map(P=>P.catch(G=>G)))}function Ga(M,P){const G=document.createElement("script");G.src=`${Ha}?l=${M}&id=${P}`,G.async=!0,document.head.appendChild(G)}function ha(M,P,G,ne,_e,Me){return fa.apply(this,arguments)}function fa(){return(fa=(0,m.Z)(function*(M,P,G,ne,_e,Me){const Je=ne[_e];try{if(Je)yield P[Je];else{const Kt=(yield Jr(G)).find(zt=>zt.measurementId===_e);Kt&&(yield P[Kt.appId])}}catch(Lt){An.error(Lt)}M("config",_e,Me)})).apply(this,arguments)}function T(M,P,G,ne,_e){return V.apply(this,arguments)}function V(){return(V=(0,m.Z)(function*(M,P,G,ne,_e){try{let Me=[];if(_e&&_e.send_to){let Je=_e.send_to;Array.isArray(Je)||(Je=[Je]);const Lt=yield Jr(G);for(const Kt of Je){const zt=Lt.find(on=>on.measurementId===Kt),pn=zt&&P[zt.appId];if(!pn){Me=[];break}Me.push(pn)}}0===Me.length&&(Me=Object.values(P)),yield Promise.all(Me),M("event",ne,_e||{})}catch(Me){An.error(Me)}})).apply(this,arguments)}function ie(M){const P=window.document.getElementsByTagName("script");for(const G of Object.values(P))if(G.src&&G.src.includes(Ha)&&G.src.includes(M))return G;return null}const Ue=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Pn=new class Bn{constructor(P={},G=1e3){this.throttleMetadata=P,this.intervalMillis=G}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,G){this.throttleMetadata[P]=G}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function ln(M){return new Headers({Accept:"application/json","x-goog-api-key":M})}function Fr(M){return nn.apply(this,arguments)}function nn(){return(nn=(0,m.Z)(function*(M){var P;const{appId:G,apiKey:ne}=M,_e={method:"GET",headers:ln(ne)},Me=la.replace("{app-id}",G),Je=yield fetch(Me,_e);if(200!==Je.status&&304!==Je.status){let Lt="";try{const Kt=yield Je.json();null!==(P=Kt.error)&&void 0!==P&&P.message&&(Lt=Kt.error.message)}catch{}throw Ue.create("config-fetch-failed",{httpStatus:Je.status,responseMessage:Lt})}return Je.json()})).apply(this,arguments)}function gr(M){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(M,P=Pn,G){const{appId:ne,apiKey:_e,measurementId:Me}=M.options;if(!ne)throw Ue.create("no-app-id");if(!_e){if(Me)return{measurementId:Me,appId:ne};throw Ue.create("no-api-key")}const Je=P.getThrottleMetadata(ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Lt=new Ro;return setTimeout((0,m.Z)(function*(){Lt.abort()}),void 0!==G?G:6e4),Wi({appId:ne,apiKey:_e,measurementId:Me},Je,Lt,P)})).apply(this,arguments)}function Wi(M,P,G){return ci.apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(M,{throttleEndTimeMillis:P,backoffCount:G},ne,_e=Pn){var Me;const{appId:Je,measurementId:Lt}=M;try{yield qi(ne,P)}catch(Kt){if(Lt)return An.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Lt} provided in the "measurementId" field in the local Firebase config. [${Kt?.message}]`),{appId:Je,measurementId:Lt};throw Kt}try{const Kt=yield Fr(M);return _e.deleteThrottleMetadata(Je),Kt}catch(Kt){const zt=Kt;if(!Mo(zt)){if(_e.deleteThrottleMetadata(Je),Lt)return An.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Lt} provided in the "measurementId" field in the local Firebase config. [${zt?.message}]`),{appId:Je,measurementId:Lt};throw Kt}const pn=503===Number(null===(Me=zt?.customData)||void 0===Me?void 0:Me.httpStatus)?(0,he.$s)(G,_e.intervalMillis,30):(0,he.$s)(G,_e.intervalMillis),on={throttleEndTimeMillis:Date.now()+pn,backoffCount:G+1};return _e.setThrottleMetadata(Je,on),An.debug(`Calling attemptFetch again in ${pn} millis`),Wi(M,on,ne,_e)}})).apply(this,arguments)}function qi(M,P){return new Promise((G,ne)=>{const _e=Math.max(P-Date.now(),0),Me=setTimeout(G,_e);M.addEventListener(()=>{clearTimeout(Me),ne(Ue.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function Mo(M){if(!(M instanceof he.ZR&&M.customData))return!1;const P=Number(M.customData.httpStatus);return 429===P||500===P||503===P||504===P}class Ro{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}let Os,co;function Zo(){return(Zo=(0,m.Z)(function*(M,P,G,ne,_e){if(_e&&_e.global)M("event",G,ne);else{const Me=yield P;M("event",G,Object.assign(Object.assign({},ne),{send_to:Me}))}})).apply(this,arguments)}function Sa(M){co=M}function za(M){Os=M}function ma(){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,m.Z)(function*(){if(!(0,he.hl)())return An.warn(Ue.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(M){return An.warn(Ue.create("indexeddb-unavailable",{errorInfo:M?.toString()}).message),!1}return!0})).apply(this,arguments)}function Oo(){return(Oo=(0,m.Z)(function*(M,P,G,ne,_e,Me,Je){var Lt;const Kt=gr(M);Kt.then(di=>{G[di.measurementId]=di.appId,M.options.measurementId&&di.measurementId!==M.options.measurementId&&An.warn(`The measurement ID in the local Firebase config (${M.options.measurementId}) does not match the measurement ID fetched from the server (${di.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(di=>An.error(di)),P.push(Kt);const zt=ma().then(di=>{if(di)return ne.getId()}),[pn,on]=yield Promise.all([Kt,zt]);ie(Me)||Ga(Me,pn.measurementId),co&&(_e("consent","default",co),Sa(void 0)),_e("js",new Date);const po=null!==(Lt=Je?.config)&&void 0!==Lt?Lt:{};return po.origin="firebase",po.update=!0,null!=on&&(po[ui]=on),_e("config",pn.measurementId,po),Os&&(_e("set",Os),za(void 0)),pn.measurementId})).apply(this,arguments)}class lu{constructor(P){this.app=P}_delete(){return delete ns[this.app.options.appId],Promise.resolve()}}let ns={},du=[];const Po={};let Aa,Mi,ir="dataLayer",zs=!1;function qa(M,P,G){!function uc(){const M=[];if((0,he.ru)()&&M.push("This is a browser extension environment."),(0,he.zI)()||M.push("Cookies are not available."),M.length>0){const P=M.map((ne,_e)=>`(${_e+1}) ${ne}`).join(" "),G=Ue.create("invalid-analytics-context",{errorInfo:P});An.warn(G.message)}}();const ne=M.options.appId;if(!ne)throw Ue.create("no-app-id");if(!M.options.apiKey){if(!M.options.measurementId)throw Ue.create("no-api-key");An.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${M.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ns[ne])throw Ue.create("already-exists",{id:ne});if(!zs){!function da(M){let P=[];Array.isArray(window[M])?P=window[M]:window[M]=P}(ir);const{wrappedGtag:Me,gtagCore:Je}=function z(M,P,G,ne,_e){let Me=function(...Je){window[ne].push(arguments)};return window[_e]&&"function"==typeof window[_e]&&(Me=window[_e]),window[_e]=function N(M,P,G,ne){function Me(){return(Me=(0,m.Z)(function*(Je,Lt,Kt){try{"event"===Je?yield T(M,P,G,Lt,Kt):"config"===Je?yield ha(M,P,G,ne,Lt,Kt):"consent"===Je?M("consent","update",Kt):M("set",Lt)}catch(zt){An.error(zt)}})).apply(this,arguments)}return function _e(Je,Lt,Kt){return Me.apply(this,arguments)}}(Me,M,P,G),{gtagCore:Me,wrappedGtag:window[_e]}}(ns,du,Po,ir,"gtag");Mi=Me,Aa=Je,zs=!0}return ns[ne]=function Mu(M,P,G,ne,_e,Me,Je){return Oo.apply(this,arguments)}(M,du,Po,P,Aa,ir,G),new lu(M)}function Yo(){return rs.apply(this,arguments)}function rs(){return(rs=(0,m.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const zn="@firebase/analytics";!function lo(){(0,de._registerComponent)(new ye.wA(xo,(P,{options:G})=>qa(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),G),"PUBLIC")),(0,de._registerComponent)(new ye.wA("analytics-internal",function M(P){try{const G=P.getProvider(xo).getImmediate();return{logEvent:(ne,_e,Me)=>function Hc(M,P,G,ne){M=(0,he.m9)(M),function Ps(M,P,G,ne,_e){return Zo.apply(this,arguments)}(Mi,ns[M.app.options.appId],P,G,ne).catch(_e=>An.error(_e))}(G,ne,_e,Me)}}catch(G){throw Ue.create("interop-component-reg-failed",{reason:G})}},"PRIVATE")),(0,de.registerVersion)(zn,"0.9.4"),(0,de.registerVersion)(zn,"0.9.4","esm2017")}();var Qo=j(4408),Ma=j(7565);const br=new class fu extends Ma.v{}(class Ka extends Qo.o{constructor(P,G){super(P,G),this.scheduler=P,this.work=G}schedule(P,G=0){return G>0?super.schedule(P,G):(this.delay=G,this.state=P,this.scheduler.flush(this),this)}execute(P,G){return G>0||this.closed?super.execute(P,G):this._execute(P,G)}requestAsyncId(P,G,ne=0){return null!=ne&&ne>0||null==ne&&this.delay>0?super.requestAsyncId(P,G,ne):(P.flush(this),0)}});var Ou=j(4986),is=j(8505),Hr=j(9468),Ya=j(5363);const Qa=new g.GfV("7.5.0"),Pu="__angularfire_symbol__analyticsIsSupportedValue",Ri="__angularfire_symbol__analyticsIsSupported",ho="__angularfire_symbol__remoteConfigIsSupportedValue",Xo="__angularfire_symbol__remoteConfigIsSupported",ys="__angularfire_symbol__messagingIsSupportedValue",fo="__angularfire_symbol__messagingIsSupported";function _(M,P,G){if(P){if(1===P.length)return P[0];const Me=P.filter(Je=>Je.app===G);if(1===Me.length)return Me[0]}return G.container.getProvider(M).getImmediate({optional:!0})}globalThis[Ri]||(globalThis[Ri]=Yo().then(M=>globalThis[Pu]=M).catch(()=>globalThis[Pu]=!1)),globalThis[fo]||(globalThis[fo]=ao().then(M=>globalThis[ys]=M).catch(()=>globalThis[ys]=!1)),globalThis[Xo]||(globalThis[Xo]=Au().then(M=>globalThis[ho]=M).catch(()=>globalThis[ho]=!1));const E=(M,P)=>{const G=P?[P]:(0,H.C6)(),ne=[];return G.forEach(_e=>{_e.container.getProvider(M).instances.forEach(Je=>{ne.includes(Je)||ne.push(Je)})}),ne};function y(){}class C{constructor(P,G=br){this.zone=P,this.delegate=G}now(){return this.delegate.now()}schedule(P,G,ne){const _e=this.zone;return this.delegate.schedule(function(Je){_e.runGuarded(()=>{P.apply(this,[Je])})},G,ne)}}class k{constructor(P){this.zone=P,this.task=null}call(P,G){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",y,{},y,y)),G.pipe((0,is.b)({next:ne,complete:ne,error:ne})).subscribe(P).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $=(()=>{class M{constructor(G){this.ngZone=G,this.outsideAngular=G.runOutsideAngular(()=>new C(Zone.current)),this.insideAngular=G.run(()=>new C(Zone.current,Ou.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return M.\u0275fac=function(G){return new(G||M)(g.LFG(g.R0b))},M.\u0275prov=g.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function K(){const M=globalThis.\u0275AngularFireScheduler;if(!M)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return M}function kn(M){return K(),function Lr(M){return function(G){return(G=G.lift(new k(M.ngZone))).pipe((0,Hr.R)(M.outsideAngular),(0,Ya.Q)(M.insideAngular))}}(K())(M)}},5114:(It,Re,j)=>{j.d(Re,{$:()=>Dr,A:()=>se,B:()=>He,G:()=>wo,H:()=>$n,J:()=>Sr,L:()=>Vn,M:()=>Io,N:()=>no,P:()=>Ou,Q:()=>ro,R:()=>xa,T:()=>Da,U:()=>vi,V:()=>Si,W:()=>ji,X:()=>ds,Y:()=>Or,Z:()=>Ji,_:()=>Co,a:()=>wn,a0:()=>ba,a1:()=>To,a2:()=>tn,a3:()=>aa,a4:()=>xs,a5:()=>ua,a6:()=>So,a7:()=>S,a8:()=>A,a9:()=>Z,aA:()=>ce,aB:()=>Kt,aC:()=>xt,aD:()=>ze,aE:()=>fr,aI:()=>ln,aL:()=>Ti,aa:()=>rr,ab:()=>Hi,ac:()=>Ms,af:()=>Ns,ag:()=>es,ah:()=>au,ak:()=>js,al:()=>qo,an:()=>Ha,ao:()=>fa,ap:()=>$e,aq:()=>X,ar:()=>_t,as:()=>et,at:()=>Ml,au:()=>Zs,av:()=>me,aw:()=>ke,ax:()=>pe,ay:()=>di,az:()=>ot,b:()=>Ue,c:()=>ys,d:()=>Ja,e:()=>pu,f:()=>Lr,g:()=>ne,h:()=>M,i:()=>Wa,j:()=>Je,k:()=>ff,l:()=>cc,m:()=>Rl,o:()=>Ie,r:()=>Qo,s:()=>Tl,u:()=>br});var g=j(5861),H=j(2090),m=j(9681),de=j(1877),he=j(655),ye=j(4859);const Ie={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},se={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const He=function fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Dt=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new de.Yd("@firebase/auth");function Ze(w,...d){qe.logLevel<=de.in.ERROR&&qe.error(`Auth (${m.SDK_VERSION}): ${w}`,...d)}function et(w,...d){throw ut(w,...d)}function ke(w,...d){return ut(w,...d)}function Qe(w,d,f){const b=Object.assign(Object.assign({},nt()),{[d]:f});return new H.LL("auth","Firebase",b).create(d,{appName:w.name})}function je(w,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&et(w,"argument-error"),Qe(w,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ut(w,...d){if("string"!=typeof w){const f=d[0],b=[...d.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(f,...b)}return Dt.create(w,...d)}function pe(w,d,...f){if(!w)throw ut(d,...f)}function Se(w){const d="INTERNAL ASSERTION FAILED: "+w;throw Ze(d),new Error(d)}function $e(w,d){w||Se(d)}const pt=new Map;function ot(w){$e(w instanceof Function,"Expected a class definition");let d=pt.get(w);return d?($e(d instanceof w,"Instance stored in cache mismatched with class"),d):(d=new w,pt.set(w,d),d)}function Ae(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Pe(){return"http:"===Ve()||"https:"===Ve()}function Ve(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class it{constructor(d,f){this.shortDelay=d,this.longDelay=f,$e(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function We(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pe()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ft(w,d){$e(w.emulator,"Emulator should always be set here");const{url:f}=w.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class yt{static initialize(d,f,b){this.fetchImpl=d,f&&(this.headersImpl=f),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ee=new it(3e4,6e4);function Mt(w,d){return w.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:w.tenantId}):d}function wt(w,d,f,b){return At.apply(this,arguments)}function At(){return(At=(0,g.Z)(function*(w,d,f,b,L={}){return Tn(w,L,(0,g.Z)(function*(){let B={},te={};b&&("GET"===d?te=b:B={body:JSON.stringify(b)});const Ye=(0,H.xO)(Object.assign({key:w.config.apiKey},te)).slice(1),kt=yield w._getAdditionalHeaders();return kt["Content-Type"]="application/json",w.languageCode&&(kt["X-Firebase-Locale"]=w.languageCode),yt.fetch()(_n(w,w.config.apiHost,f,Ye),Object.assign({method:d,headers:kt,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function Tn(w,d,f){return vn.apply(this,arguments)}function vn(){return(vn=(0,g.Z)(function*(w,d,f){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},gn),d);try{const L=new jt(w),B=yield Promise.race([f(),L.promise]);L.clearNetworkTimeout();const te=yield B.json();if("needConfirmation"in te)throw Rn(w,"account-exists-with-different-credential",te);if(B.ok&&!("errorMessage"in te))return te;{const Ye=B.ok?te.errorMessage:te.error.message,[kt,Yt]=Ye.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===kt)throw Rn(w,"credential-already-in-use",te);if("EMAIL_EXISTS"===kt)throw Rn(w,"email-already-in-use",te);if("USER_DISABLED"===kt)throw Rn(w,"user-disabled",te);const xn=b[kt]||kt.toLowerCase().replace(/[_\s]+/g,"-");if(Yt)throw Qe(w,xn,Yt);et(w,xn)}}catch(L){if(L instanceof H.ZR)throw L;et(w,"internal-error",{message:String(L)})}})).apply(this,arguments)}function hn(w,d,f,b){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(w,d,f,b,L={}){const B=yield wt(w,d,f,b,L);return"mfaPendingCredential"in B&&et(w,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function _n(w,d,f,b){const L=`${d}${f}?${b}`;return w.config.emulator?ft(w.config,L):`${w.config.apiScheme}://${L}`}class jt{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,b)=>{this.timer=setTimeout(()=>b(ke(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(w,d,f){const b={appName:w.name};f.email&&(b.email=f.email),f.phoneNumber&&(b.phoneNumber=f.phoneNumber);const L=ke(w,d,b);return L.customData._tokenResponse=f,L}function cr(){return(cr=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Ln(w,d){return vr.apply(this,arguments)}function vr(){return(vr=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ct(w,d){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function wr(w){if(w)try{const d=new Date(Number(w));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function en(){return(en=(0,g.Z)(function*(w,d=!1){const f=(0,H.m9)(w),b=yield f.getIdToken(d),L=Ot(b);pe(L&&L.exp&&L.auth_time&&L.iat,f.auth,"internal-error");const B="object"==typeof L.firebase?L.firebase:void 0,te=B?.sign_in_provider;return{claims:L,token:b,authTime:wr(Vt(L.auth_time)),issuedAtTime:wr(Vt(L.iat)),expirationTime:wr(Vt(L.exp)),signInProvider:te||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function Vt(w){return 1e3*Number(w)}function Ot(w){const[d,f,b]=w.split(".");if(void 0===d||void 0===f||void 0===b)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,H.tV)(f);return L?JSON.parse(L):(Ze("Failed to decode base64 JWT payload"),null)}catch(L){return Ze("Caught error parsing JWT payload as JSON",L?.toString()),null}}function Nn(w,d){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(w,d,f=!1){if(f)return d;try{return yield d}catch(b){throw b instanceof H.ZR&&ar(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}function ar({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Tr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const L=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,L)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const b=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),b)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class hr{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ni(w){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(w){var d;const f=w.auth,b=yield w.getIdToken(),L=yield Nn(w,ct(f,{idToken:b}));pe(L?.users.length,f,"internal-error");const B=L.users[0];w._notifyReloadListener(B);const te=null!==(d=B.providerUserInfo)&&void 0!==d&&d.length?jn(B.providerUserInfo):[],Ye=Gt(w.providerData,te),xn=!!w.isAnonymous&&!(w.email&&B.passwordHash||Ye?.length),Gr={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Ye,metadata:new hr(B.createdAt,B.lastLoginAt),isAnonymous:xn};Object.assign(w,Gr)})).apply(this,arguments)}function Xt(){return(Xt=(0,g.Z)(function*(w){const d=(0,H.m9)(w);yield ni(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Gt(w,d){return[...w.filter(b=>!d.some(L=>L.providerId===b.providerId)),...d]}function jn(w){return w.map(d=>{var{providerId:f}=d,b=(0,he._T)(d,["providerId"]);return{providerId:f,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ge(){return(Ge=(0,g.Z)(function*(w,d){const f=yield Tn(w,{},(0,g.Z)(function*(){const b=(0,H.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:L,apiKey:B}=w.config,te=_n(w,L,"/v1/token",`key=${B}`),Ye=yield w._getAdditionalHeaders();return Ye["Content-Type"]="application/x-www-form-urlencoded",yt.fetch()(te,{method:"POST",headers:Ye,body:b})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){pe(d.idToken,"internal-error"),pe(typeof d.idToken<"u","internal-error"),pe(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Ht(w){const d=Ot(w);return pe(d,"internal-error"),pe(typeof d.exp<"u","internal-error"),pe(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var b=this;return(0,g.Z)(function*(){return pe(!b.accessToken||b.refreshToken,d,"user-token-expired"),f||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(d,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var b=this;return(0,g.Z)(function*(){const{accessToken:L,refreshToken:B,expiresIn:te}=yield function lt(w,d){return Ge.apply(this,arguments)}(d,f);b.updateTokensAndExpiration(L,B,Number(te))})()}updateTokensAndExpiration(d,f,b){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(d,f){const{refreshToken:b,accessToken:L,expirationTime:B}=f,te=new bt;return b&&(pe("string"==typeof b,"internal-error",{appName:d}),te.refreshToken=b),L&&(pe("string"==typeof L,"internal-error",{appName:d}),te.accessToken=L),B&&(pe("number"==typeof B,"internal-error",{appName:d}),te.expirationTime=B),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new bt,this.toJSON())}_performRefresh(){return Se("not implemented")}}function Ut(w,d){pe("string"==typeof w||typeof w>"u","internal-error",{appName:d})}class $t{constructor(d){var{uid:f,auth:b,stsTokenManager:L}=d,B=(0,he._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=b,this.stsTokenManager=L,this.accessToken=L.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new hr(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,g.Z)(function*(){const b=yield Nn(f,f.stsTokenManager.getToken(f.auth,d));return pe(b,f.auth,"internal-error"),f.accessToken!==b&&(f.accessToken=b,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),b})()}getIdTokenResult(d){return function dr(w){return en.apply(this,arguments)}(this,d)}reload(){return function ri(w){return Xt.apply(this,arguments)}(this)}_assign(d){this!==d&&(pe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new $t(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var b=this;return(0,g.Z)(function*(){let L=!1;d.idToken&&d.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(d),L=!0),f&&(yield ni(b)),yield b.auth._persistUserIfCurrent(b),L&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var d=this;return(0,g.Z)(function*(){const f=yield d.getIdToken();return yield Nn(d,function yr(w,d){return cr.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var b,L,B,te,Ye,kt,Yt,xn;const Gr=null!==(b=f.displayName)&&void 0!==b?b:void 0,ea=null!==(L=f.email)&&void 0!==L?L:void 0,Na=null!==(B=f.phoneNumber)&&void 0!==B?B:void 0,gc=null!==(te=f.photoURL)&&void 0!==te?te:void 0,Bu=null!==(Ye=f.tenantId)&&void 0!==Ye?Ye:void 0,Nl=null!==(kt=f._redirectEventId)&&void 0!==kt?kt:void 0,Jd=null!==(Yt=f.createdAt)&&void 0!==Yt?Yt:void 0,Xd=null!==(xn=f.lastLoginAt)&&void 0!==xn?xn:void 0,{uid:un,emailVerified:ju,isAnonymous:eh,providerData:Ar,stsTokenManager:Jt}=f;pe(un&&Jt,d,"internal-error");const Zc=bt.fromJSON(this.name,Jt);pe("string"==typeof un,d,"internal-error"),Ut(Gr,d.name),Ut(ea,d.name),pe("boolean"==typeof ju,d,"internal-error"),pe("boolean"==typeof eh,d,"internal-error"),Ut(Na,d.name),Ut(gc,d.name),Ut(Bu,d.name),Ut(Nl,d.name),Ut(Jd,d.name),Ut(Xd,d.name);const Hn=new $t({uid:un,auth:d,email:ea,emailVerified:ju,displayName:Gr,isAnonymous:eh,photoURL:gc,phoneNumber:Na,tenantId:Bu,stsTokenManager:Zc,createdAt:Jd,lastLoginAt:Xd});return Ar&&Array.isArray(Ar)&&(Hn.providerData=Ar.map(gf=>Object.assign({},gf))),Nl&&(Hn._redirectEventId=Nl),Hn}static _fromIdTokenResponse(d,f,b=!1){return(0,g.Z)(function*(){const L=new bt;L.updateFromServerResponse(f);const B=new $t({uid:f.localId,auth:d,stsTokenManager:L,isAnonymous:b});return yield ni(B),B})()}}const Vn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,b){var L=this;return(0,g.Z)(function*(){L.storage[f]=b})()}_get(f){var b=this;return(0,g.Z)(function*(){const L=b.storage[f];return void 0===L?null:L})()}_remove(f){var b=this;return(0,g.Z)(function*(){delete b.storage[f]})()}_addListener(f,b){}_removeListener(f,b){}}return w.type="NONE",w})();function ce(w,d,f){return`firebase:${w}:${d}:${f}`}class re{constructor(d,f,b){this.persistence=d,this.auth=f,this.userKey=b;const{config:L,name:B}=this.auth;this.fullUserKey=ce(this.userKey,L.apiKey,B),this.fullPersistenceKey=ce("persistence",L.apiKey,B),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?$t._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,g.Z)(function*(){if(f.persistence===d)return;const b=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,b?f.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,b="authUser"){return(0,g.Z)(function*(){if(!f.length)return new re(ot(Vn),d,b);const L=(yield Promise.all(f.map(function(){var Yt=(0,g.Z)(function*(xn){if(yield xn._isAvailable())return xn});return function(xn){return Yt.apply(this,arguments)}}()))).filter(Yt=>Yt);let B=L[0]||ot(Vn);const te=ce(b,d.config.apiKey,d.name);let Ye=null;for(const Yt of f)try{const xn=yield Yt._get(te);if(xn){const Gr=$t._fromJSON(d,xn);Yt!==B&&(Ye=Gr),B=Yt;break}}catch{}const kt=L.filter(Yt=>Yt._shouldAllowMigration);return B._shouldAllowMigration&&kt.length?(B=kt[0],Ye&&(yield B._set(te,Ye.toJSON())),yield Promise.all(f.map(function(){var Yt=(0,g.Z)(function*(xn){if(xn!==B)try{yield xn._remove(te)}catch{}});return function(xn){return Yt.apply(this,arguments)}}())),new re(B,d,b)):new re(B,d,b)})()}}function Q(w){const d=w.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Fe(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(J(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(le(d))return"Blackberry";if(ae(d))return"Webos";if(q(d))return"Safari";if((d.includes("chrome/")||we(d))&&!d.includes("edge/"))return"Chrome";if(_t(d))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function J(w=(0,H.z$)()){return/firefox\//i.test(w)}function q(w=(0,H.z$)()){const d=w.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function we(w=(0,H.z$)()){return/crios\//i.test(w)}function Fe(w=(0,H.z$)()){return/iemobile/i.test(w)}function _t(w=(0,H.z$)()){return/android/i.test(w)}function le(w=(0,H.z$)()){return/blackberry/i.test(w)}function ae(w=(0,H.z$)()){return/webos/i.test(w)}function X(w=(0,H.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function me(w=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Qt(w=(0,H.z$)()){return X(w)||_t(w)||ae(w)||le(w)||/windows phone/i.test(w)||Fe(w)}function Xn(w,d=[]){let f;switch(w){case"Browser":f=Q((0,H.z$)());break;case"Worker":f=`${Q((0,H.z$)())}-${w}`;break;default:f=w}const b=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${m.SDK_VERSION}/${b}`}class gi{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const b=B=>new Promise((te,Ye)=>{try{te(d(B))}catch(kt){Ye(kt)}});b.onAbort=f,this.queue.push(b);const L=this.queue.length-1;return()=>{this.queue[L]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,g.Z)(function*(){if(f.auth.currentUser===d)return;const b=[];try{for(const L of f.queue)yield L(d),L.onAbort&&b.push(L.onAbort)}catch(L){b.reverse();for(const B of b)try{B()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:L?.message})}})()}}class qr{constructor(d,f,b){this.app=d,this.heartbeatServiceProvider=f,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zr(this),this.idTokenSubscription=new Zr(this),this.beforeStateQueue=new gi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(d,f){var b=this;return f&&(this._popupRedirectResolver=ot(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var L,B;if(!b._deleted&&(b.persistenceManager=yield re.create(b,d),!b._deleted)){if(null!==(L=b._popupRedirectResolver)&&void 0!==L&&L._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(f),b.lastNotifiedUid=(null===(B=b.currentUser)||void 0===B?void 0:B.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,g.Z)(function*(){var b;const L=yield f.assertedPersistence.getCurrentUser();let B=L,te=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Ye=null===(b=f.redirectUser)||void 0===b?void 0:b._redirectEventId,kt=B?._redirectEventId,Yt=yield f.tryRedirectSignIn(d);(!Ye||Ye===kt)&&Yt?.user&&(B=Yt.user,te=!0)}if(!B)return f.directlySetCurrentUser(null);if(!B._redirectEventId){if(te)try{yield f.beforeStateQueue.runMiddleware(B)}catch(Ye){B=L,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Ye))}return B?f.reloadAndSetCurrentUserOrClear(B):f.directlySetCurrentUser(null)}return pe(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===B._redirectEventId?f.directlySetCurrentUser(B):f.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(d){var f=this;return(0,g.Z)(function*(){let b=null;try{b=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,g.Z)(function*(){try{yield ni(d)}catch(b){if("auth/network-request-failed"!==b?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function rt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,g.Z)(function*(){const b=d?(0,H.m9)(d):null;return b&&pe(b.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(b&&b._clone(f))})()}_updateCurrentUser(d,f=!1){var b=this;return(0,g.Z)(function*(){if(!b._deleted)return d&&pe(b.tenantId===d.tenantId,b,"tenant-id-mismatch"),f||(yield b.beforeStateQueue.runMiddleware(d)),b.queue((0,g.Z)(function*(){yield b.directlySetCurrentUser(d),b.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(ot(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new H.LL("auth","Firebase",d())}onAuthStateChanged(d,f,b){return this.registerStateListener(this.authStateSubscription,d,f,b)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,b){return this.registerStateListener(this.idTokenSubscription,d,f,b)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var b=this;return(0,g.Z)(function*(){const L=yield b.getOrInitRedirectPersistenceManager(f);return null===d?L.removeCurrentUser():L.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const b=d&&ot(d)||f._popupRedirectResolver;pe(b,f,"argument-error"),f.redirectPersistenceManager=yield re.create(f,[ot(b._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,g.Z)(function*(){var b,L;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(b=f._currentUser)||void 0===b?void 0:b._redirectEventId)===d?f._currentUser:(null===(L=f.redirectUser)||void 0===L?void 0:L._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,g.Z)(function*(){if(d===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,b,L){if(this._deleted)return()=>{};const B="function"==typeof f?f:f.next.bind(f),te=this._isInitialized?Promise.resolve():this._initializationPromise;return pe(te,this,"internal-error"),te.then(()=>B(this.currentUser)),"function"==typeof f?d.addObserver(f,b,L):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Xn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var f;const b={"X-Client-Version":d.clientVersion};d.app.options.appId&&(b["X-Firebase-gmpid"]=d.app.options.appId);const L=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return L&&(b["X-Firebase-Client"]=L),b})()}}function fr(w){return(0,H.m9)(w)}class Zr{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,H.ne)(f=>this.observer=f)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wo(w,d,f){const b=fr(w);pe(b._canInitEmulator,b,"emulator-config-failed"),pe(/^https?:\/\//.test(d),b,"invalid-emulator-scheme");const L=!!f?.disableWarnings,B=us(d),{host:te,port:Ye}=function Is(w){const d=us(w),f=/(\/\/)?([^?#/]+)/.exec(w.substr(d.length));if(!f)return{host:"",port:null};const b=f[2].split("@").pop()||"",L=/^(\[[^\]]+\])(:|$)/.exec(b);if(L){const B=L[1];return{host:B,port:eo(b.substr(B.length+1))}}{const[B,te]=b.split(":");return{host:B,port:eo(te)}}}(d);b.config.emulator={url:`${B}//${te}${null===Ye?"":`:${Ye}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:te,port:Ye,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:L})}),L||function Sn(){function w(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function us(w){const d=w.indexOf(":");return d<0?"":w.substr(0,d+1)}function eo(w){if(!w)return null;const d=Number(w);return isNaN(d)?null:d}class $n{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return Se("not implemented")}_getIdTokenResponse(d){return Se("not implemented")}_linkToIdToken(d,f){return Se("not implemented")}_getReauthenticationResolver(d){return Se("not implemented")}}function _r(w,d){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:resetPassword",Mt(w,d))})).apply(this,arguments)}function Kr(w,d){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Tt(w,d){return qt.apply(this,arguments)}function qt(){return(qt=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:update",Mt(w,d))})).apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(w,d){return hn(w,"POST","/v1/accounts:signInWithPassword",Mt(w,d))})).apply(this,arguments)}function ii(w,d){return Er.apply(this,arguments)}function Er(){return(Er=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:sendOobCode",Mt(w,d))})).apply(this,arguments)}function Di(w,d){return On.apply(this,arguments)}function On(){return(On=(0,g.Z)(function*(w,d){return ii(w,d)})).apply(this,arguments)}function Bo(w,d){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(w,d){return ii(w,d)})).apply(this,arguments)}function cn(w,d){return Li.apply(this,arguments)}function Li(){return(Li=(0,g.Z)(function*(w,d){return ii(w,d)})).apply(this,arguments)}function Vi(w,d){return bi.apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(w,d){return ii(w,d)})).apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(w,d){return hn(w,"POST","/v1/accounts:signInWithEmailLink",Mt(w,d))})).apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(w,d){return hn(w,"POST","/v1/accounts:signInWithEmailLink",Mt(w,d))})).apply(this,arguments)}class Mr extends $n{constructor(d,f,b,L=null){super("password",b),this._email=d,this._password=f,this._tenantId=L}static _fromEmailAndPassword(d,f){return new Mr(d,f,"password")}static _fromEmailAndCode(d,f,b=null){return new Mr(d,f,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,g.Z)(function*(){switch(f.signInMethod){case"password":return function er(w,d){return Vr.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ir(w,d){return tr.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:et(d,"internal-error")}})()}_linkToIdToken(d,f){var b=this;return(0,g.Z)(function*(){switch(b.signInMethod){case"password":return Kr(d,{idToken:f,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Ds(w,d){return Ui.apply(this,arguments)}(d,{idToken:f,email:b._email,oobCode:b._password});default:et(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Bi(w,d){return wa.apply(this,arguments)}function wa(){return(wa=(0,g.Z)(function*(w,d){return hn(w,"POST","/v1/accounts:signInWithIdp",Mt(w,d))})).apply(this,arguments)}class Sr extends $n{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Sr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):et("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:b,signInMethod:L}=f,B=(0,he._T)(f,["providerId","signInMethod"]);if(!b||!L)return null;const te=new Sr(b,L);return te.idToken=B.idToken||void 0,te.accessToken=B.accessToken||void 0,te.secret=B.secret,te.nonce=B.nonce,te.pendingToken=B.pendingToken||null,te}_getIdTokenResponse(d){return Bi(d,this.buildRequest())}_linkToIdToken(d,f){const b=this.buildRequest();return b.idToken=f,Bi(d,b)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Bi(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,H.xO)(f)}return d}}function jo(w,d){return Us.apply(this,arguments)}function Us(){return(Us=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:sendVerificationCode",Mt(w,d))})).apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(w,d){return hn(w,"POST","/v1/accounts:signInWithPhoneNumber",Mt(w,d))})).apply(this,arguments)}function Rr(){return(Rr=(0,g.Z)(function*(w,d){const f=yield hn(w,"POST","/v1/accounts:signInWithPhoneNumber",Mt(w,d));if(f.temporaryProof)throw Rn(w,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const ou={USER_NOT_FOUND:"user-not-found"};function Yr(){return(Yr=(0,g.Z)(function*(w,d){return hn(w,"POST","/v1/accounts:signInWithPhoneNumber",Mt(w,Object.assign(Object.assign({},d),{operation:"REAUTH"})),ou)})).apply(this,arguments)}class bs extends $n{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new bs({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new bs({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function to(w,d){return cs.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Ur(w,d){return Rr.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function yi(w,d){return Yr.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:b,verificationCode:L}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:b,code:L}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:b,phoneNumber:L,temporaryProof:B}=d;return b||f||L||B?new bs({verificationId:f,verificationCode:b,phoneNumber:L,temporaryProof:B}):null}}class Nr{constructor(d){var f,b,L,B,te,Ye;const kt=(0,H.zd)((0,H.pd)(d)),Yt=null!==(f=kt.apiKey)&&void 0!==f?f:null,xn=null!==(b=kt.oobCode)&&void 0!==b?b:null,Gr=function $o(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(L=kt.mode)&&void 0!==L?L:null);pe(Yt&&xn&&Gr,"argument-error"),this.apiKey=Yt,this.operation=Gr,this.code=xn,this.continueUrl=null!==(B=kt.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(te=kt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Ye=kt.tenantId)&&void 0!==Ye?Ye:null}static parseLink(d){const f=function Ia(w){const d=(0,H.zd)((0,H.pd)(w)).link,f=d?(0,H.zd)((0,H.pd)(d)).deep_link_id:null,b=(0,H.zd)((0,H.pd)(w)).deep_link_id;return(b?(0,H.zd)((0,H.pd)(b)).link:null)||b||f||d||w}(d);try{return new Nr(f)}catch{return null}}}let Io=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(f,b){return Mr._fromEmailAndPassword(f,b)}static credentialWithLink(f,b){const L=Nr.parseLink(b);return pe(L,"argument-error"),Mr._fromEmailAndCode(f,L.code,L.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ci{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Bs extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class vi extends Bs{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return pe("providerId"in f&&"signInMethod"in f,"argument-error"),Sr._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return pe(d.idToken||d.accessToken,"argument-error"),Sr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return vi.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return vi.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:b,oauthTokenSecret:L,pendingToken:B,nonce:te,providerId:Ye}=d;if(!b&&!L&&!f&&!B||!Ye)return null;try{return new vi(Ye)._credential({idToken:f,accessToken:b,nonce:te,pendingToken:B})}catch{return null}}}let no=(()=>{class w extends Bs{constructor(){super("facebook.com")}static credential(f){return Sr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return w.credentialFromTaggedObject(f)}static credentialFromError(f){return w.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return w.credential(f.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ro=(()=>{class w extends Bs{constructor(){super("google.com"),this.addScope("profile")}static credential(f,b){return Sr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:b})}static credentialFromResult(f){return w.credentialFromTaggedObject(f)}static credentialFromError(f){return w.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:b,oauthAccessToken:L}=f;if(!b&&!L)return null;try{return w.credential(b,L)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Da=(()=>{class w extends Bs{constructor(){super("github.com")}static credential(f){return Sr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return w.credentialFromTaggedObject(f)}static credentialFromError(f){return w.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return w.credential(f.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ti extends $n{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Bi(d,this.buildRequest())}_linkToIdToken(d,f){const b=this.buildRequest();return b.idToken=f,Bi(d,b)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Bi(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:b,signInMethod:L,pendingToken:B}=f;return b&&L&&B&&b===L?new Ti(b,B):null}static _create(d,f){return new Ti(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Si extends Ci{constructor(d){pe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Si.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Si.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Ti.fromJSON(d);return pe(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:b}=d;if(!f||!b)return null;try{return Ti._create(b,f)}catch{return null}}}let ji=(()=>{class w extends Bs{constructor(){super("twitter.com")}static credential(f,b){return Sr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:b})}static credentialFromResult(f){return w.credentialFromTaggedObject(f)}static credentialFromError(f){return w.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:b,oauthTokenSecret:L}=f;if(!b||!L)return null;try{return w.credential(b,L)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Ho(w,d){return ls.apply(this,arguments)}function ls(){return(ls=(0,g.Z)(function*(w,d){return hn(w,"POST","/v1/accounts:signUp",Mt(w,d))})).apply(this,arguments)}class si{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,b,L=!1){return(0,g.Z)(function*(){const B=yield $t._fromIdTokenResponse(d,b,L),te=io(b);return new si({user:B,providerId:te,_tokenResponse:b,operationType:f})})()}static _forOperation(d,f,b){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(b,!0);const L=io(b);return new si({user:d,providerId:L,_tokenResponse:b,operationType:f})})()}}function io(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function ds(w){return so.apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(w){var d;const f=fr(w);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new si({user:f.currentUser,providerId:null,operationType:"signIn"});const b=yield Ho(f,{returnSecureToken:!0}),L=yield si._fromIdTokenResponse(f,"signIn",b,!0);return yield f._updateCurrentUser(L.user),L})).apply(this,arguments)}class Cs extends H.ZR{constructor(d,f,b,L){var B;super(f.code,f.message),this.operationType=b,this.user=L,Object.setPrototypeOf(this,Cs.prototype),this.customData={appName:d.name,tenantId:null!==(B=d.tenantId)&&void 0!==B?B:void 0,_serverResponse:f.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(d,f,b,L){return new Cs(d,f,b,L)}}function Go(w,d,f,b){return("reauthenticate"===d?f._getReauthenticationResolver(w):f._getIdTokenResponse(w)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?Cs._fromErrorAndOperation(w,B,d,b):B})}function hs(w){return new Set(w.map(({providerId:d})=>d).filter(d=>!!d))}function js(w,d){return fs.apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(w,d){const f=(0,H.m9)(w);yield ps(!0,f,d);const{providerUserInfo:b}=yield Ln(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),L=hs(b||[]);return f.providerData=f.providerData.filter(B=>L.has(B.providerId)),L.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Ts(w,d){return bo.apply(this,arguments)}function bo(){return(bo=(0,g.Z)(function*(w,d,f=!1){const b=yield Nn(w,d._linkToIdToken(w.auth,yield w.getIdToken()),f);return si._forOperation(w,"link",b)})).apply(this,arguments)}function ps(w,d,f){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(function*(w,d,f){yield ni(d);const L=!1===w?"provider-already-linked":"no-such-provider";pe(hs(d.providerData).has(f)===w,d.auth,L)})).apply(this,arguments)}function Br(w,d){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,g.Z)(function*(w,d,f=!1){const{auth:b}=w,L="reauthenticate";try{const B=yield Nn(w,Go(b,L,d,w),f);pe(B.idToken,b,"internal-error");const te=Ot(B.idToken);pe(te,b,"internal-error");const{sub:Ye}=te;return pe(w.uid===Ye,b,"user-mismatch"),si._forOperation(w,L,B)}catch(B){throw"auth/user-not-found"===B?.code&&et(b,"user-mismatch"),B}})).apply(this,arguments)}function gs(w,d){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,g.Z)(function*(w,d,f=!1){const b="signIn",L=yield Go(w,b,d),B=yield si._fromIdTokenResponse(w,b,L);return f||(yield w._updateCurrentUser(B.user)),B})).apply(this,arguments)}function Or(w,d){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(w,d){return gs(fr(w),d)})).apply(this,arguments)}function Ji(w,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(w,d){const f=(0,H.m9)(w);return yield ps(!1,f,d.providerId),Ts(f,d)})).apply(this,arguments)}function Co(w,d){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(w,d){return Br((0,H.m9)(w),d)})).apply(this,arguments)}function jr(w,d){return As.apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(w,d){return hn(w,"POST","/v1/accounts:signInWithCustomToken",Mt(w,d))})).apply(this,arguments)}function Dr(w,d){return _i.apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(w,d){const f=fr(w),b=yield jr(f,{token:d,returnSecureToken:!0}),L=yield si._fromIdTokenResponse(f,"signIn",b);return yield f._updateCurrentUser(L.user),L})).apply(this,arguments)}class mn{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?oi._fromServerResponse(d,f):et(d,"internal-error")}}class oi extends mn{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new oi(f)}}function Pr(w,d,f){var b;pe((null===(b=f.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),pe(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(pe(f.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(pe(f.android.packageName.length>0,w,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function ba(w,d,f){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w),L={requestType:"PASSWORD_RESET",email:d};f&&Pr(b,L,f),yield Bo(b,L)})).apply(this,arguments)}function To(w,d,f){return ur.apply(this,arguments)}function ur(){return(ur=(0,g.Z)(function*(w,d,f){yield _r((0,H.m9)(w),{oobCode:d,newPassword:f})})).apply(this,arguments)}function tn(w,d){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(w,d){yield Tt((0,H.m9)(w),{oobCode:d})})).apply(this,arguments)}function aa(w,d){return $s.apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(w,d){const f=(0,H.m9)(w),b=yield _r(f,{oobCode:d}),L=b.requestType;switch(pe(L,f,"internal-error"),L){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(b.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(b.mfaInfo,f,"internal-error");default:pe(b.email,f,"internal-error")}let B=null;return b.mfaInfo&&(B=mn._fromServerResponse(fr(f),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:B},operation:L}})).apply(this,arguments)}function xs(w,d){return kr.apply(this,arguments)}function kr(){return(kr=(0,g.Z)(function*(w,d){const{data:f}=yield aa((0,H.m9)(w),d);return f.email})).apply(this,arguments)}function ua(w,d,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(w,d,f){const b=fr(w),L=yield Ho(b,{returnSecureToken:!0,email:d,password:f}),B=yield si._fromIdTokenResponse(b,"signIn",L);return yield b._updateCurrentUser(B.user),B})).apply(this,arguments)}function So(w,d,f){return Or((0,H.m9)(w),Io.credential(d,f))}function S(w,d,f){return R.apply(this,arguments)}function R(){return(R=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w),L={requestType:"EMAIL_SIGNIN",email:d};pe(f.handleCodeInApp,b,"argument-error"),f&&Pr(b,L,f),yield cn(b,L)})).apply(this,arguments)}function A(w,d){return"EMAIL_SIGNIN"===Nr.parseLink(d)?.operation}function Z(w,d,f){return be.apply(this,arguments)}function be(){return(be=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w),L=Io.credentialWithLink(d,f||Ae());return pe(L._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Or(b,L)})).apply(this,arguments)}function Ct(w,d){return En.apply(this,arguments)}function En(){return(En=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:createAuthUri",Mt(w,d))})).apply(this,arguments)}function rr(w,d){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.Z)(function*(w,d){const b={identifier:d,continueUri:Pe()?Ae():"http://localhost"},{signinMethods:L}=yield Ct((0,H.m9)(w),b);return L||[]})).apply(this,arguments)}function Hi(w,d){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(w,d){const f=(0,H.m9)(w),L={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};d&&Pr(f.auth,L,d);const{email:B}=yield Di(f.auth,L);B!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ms(w,d,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:d};f&&Pr(b.auth,B,f);const{email:te}=yield Vi(b.auth,B);te!==w.email&&(yield w.reload())})).apply(this,arguments)}function Qr(w,d){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,g.Z)(function*(w,d){return wt(w,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ns(w,d){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(w,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const b=(0,H.m9)(w),B={idToken:yield b.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},te=yield Nn(b,Qr(b.auth,B));b.displayName=te.displayName||null,b.photoURL=te.photoUrl||null;const Ye=b.providerData.find(({providerId:kt})=>"password"===kt);Ye&&(Ye.displayName=b.displayName,Ye.photoURL=b.photoURL),yield b._updateTokensIfNecessary(te)})).apply(this,arguments)}function es(w,d){return zo((0,H.m9)(w),d,null)}function au(w,d){return zo((0,H.m9)(w),null,d)}function zo(w,d,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,g.Z)(function*(w,d,f){const{auth:b}=w,B={idToken:yield w.getIdToken(),returnSecureToken:!0};d&&(B.email=d),f&&(B.password=f);const te=yield Nn(w,Kr(b,B));yield w._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Gs{constructor(d,f,b={}){this.isNewUser=d,this.providerId=f,this.profile=b}}class oo extends Gs{constructor(d,f,b,L){super(d,f,b),this.username=L}}class Ua extends Gs{constructor(d,f){super(d,"facebook.com",f)}}class ao extends oo{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Ao extends Gs{constructor(d,f){super(d,"google.com",f)}}class Ba extends oo{constructor(d,f,b){super(d,"twitter.com",f,b)}}function qo(w){const{user:d,_tokenResponse:f}=w;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Ca(w){var d,f;if(!w)return null;const{providerId:b}=w,L=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},B=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&w?.idToken){const te=null===(f=null===(d=Ot(w.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(te)return new Gs(B,"anonymous"!==te&&"custom"!==te?te:null)}if(!b)return null;switch(b){case"facebook.com":return new Ua(B,L);case"github.com":return new ao(B,L);case"google.com":return new Ao(B,L);case"twitter.com":return new Ba(B,L,w.screenName||null);case"custom":case"anonymous":return new Gs(B,null);default:return new Gs(B,b,L)}}(f)}class Un{constructor(d,f,b){this.type=d,this.credential=f,this.auth=b}static _fromIdtoken(d,f){return new Un("enroll",d,f)}static _fromMfaPendingCredential(d){return new Un("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,b;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Un._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(b=d.multiFactorSession)&&void 0!==b&&b.idToken)return Un._fromIdtoken(d.multiFactorSession.idToken)}return null}}class la{constructor(d,f,b){this.session=d,this.hints=f,this.signInResolver=b}static _fromError(d,f){const b=fr(d),L=f.customData._serverResponse,B=(L.mfaInfo||[]).map(Ye=>mn._fromServerResponse(b,Ye));pe(L.mfaPendingCredential,b,"internal-error");const te=Un._fromMfaPendingCredential(L.mfaPendingCredential);return new la(te,B,function(){var Ye=(0,g.Z)(function*(kt){const Yt=yield kt._process(b,te);delete L.mfaInfo,delete L.mfaPendingCredential;const xn=Object.assign(Object.assign({},L),{idToken:Yt.idToken,refreshToken:Yt.refreshToken});switch(f.operationType){case"signIn":const Gr=yield si._fromIdTokenResponse(b,f.operationType,xn);return yield b._updateCurrentUser(Gr.user),Gr;case"reauthenticate":return pe(f.user,b,"internal-error"),si._forOperation(f.user,f.operationType,xn);default:et(b,"internal-error")}});return function(kt){return Ye.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,g.Z)(function*(){return f.signInResolver(d)})()}}function Ha(w,d){var f;const b=(0,H.m9)(w),L=d;return pe(d.customData.operationType,b,"argument-error"),pe(null===(f=L.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,b,"argument-error"),la._fromError(b,L)}function An(w,d){return wt(w,"POST","/v2/accounts/mfaEnrollment:start",Mt(w,d))}class da{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(b=>mn._fromServerResponse(d.auth,b)))})}static _fromUser(d){return new da(d)}getSession(){var d=this;return(0,g.Z)(function*(){return Un._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,f){var b=this;return(0,g.Z)(function*(){const L=d,B=yield b.getSession(),te=yield Nn(b.user,L._process(b.user.auth,B,f));return yield b.user._updateTokensIfNecessary(te),b.user.reload()})()}unenroll(d){var f=this;return(0,g.Z)(function*(){const b="string"==typeof d?d:d.uid,L=yield f.user.getIdToken();try{const B=yield Nn(f.user,function Ga(w,d){return wt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Mt(w,d))}(f.user.auth,{idToken:L,mfaEnrollmentId:b}));f.enrolledFactors=f.enrolledFactors.filter(({uid:te})=>te!==b),yield f.user._updateTokensIfNecessary(B),yield f.user.reload()}catch(B){throw B}})()}}const ha=new WeakMap;function fa(w){const d=(0,H.m9)(w);return ha.has(d)||ha.set(d,da._fromUser(d)),ha.get(d)}const T="__sak";class V{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(T,"1"),this.storage.removeItem(T),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ue=(()=>{class w extends V{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,b)=>this.onStorageEvent(f,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function N(){const w=(0,H.z$)();return q(w)||X(w)}()&&function qn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Qt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const b of Object.keys(this.listeners)){const L=this.storage.getItem(b),B=this.localCache[b];L!==B&&f(b,B,L)}}onStorageEvent(f,b=!1){if(!f.key)return void this.forAllChangedKeys((Ye,kt,Yt)=>{this.notifyListeners(Ye,Yt)});const L=f.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ye=this.storage.getItem(L);if(f.newValue!==Ye)null!==f.newValue?this.storage.setItem(L,f.newValue):this.storage.removeItem(L);else if(this.localCache[L]===f.newValue&&!b)return}const B=()=>{const Ye=this.storage.getItem(L);!b&&this.localCache[L]===Ye||this.notifyListeners(L,Ye)},te=this.storage.getItem(L);!function at(){return(0,H.w1)()&&10===document.documentMode}()||te===f.newValue||f.newValue===f.oldValue?B():setTimeout(B,10)}notifyListeners(f,b){this.localCache[f]=b;const L=this.listeners[f];if(L)for(const B of Array.from(L))B(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,b,L)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:b,newValue:L}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(b)}_removeListener(f,b){this.listeners[f]&&(this.listeners[f].delete(b),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,b){var L=()=>super._set,B=this;return(0,g.Z)(function*(){yield L().call(B,f,b),B.localCache[f]=JSON.stringify(b)})()}_get(f){var b=()=>super._get,L=this;return(0,g.Z)(function*(){const B=yield b().call(L,f);return L.localCache[f]=JSON.stringify(B),B})()}_remove(f){var b=()=>super._remove,L=this;return(0,g.Z)(function*(){yield b().call(L,f),delete L.localCache[f]})()}}return w.type="LOCAL",w})(),wn=(()=>{class w extends V{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,b){}_removeListener(f,b){}}return w.type="SESSION",w})();let Pn=(()=>{class w{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const b=this.receivers.find(B=>B.isListeningto(f));if(b)return b;const L=new w(f);return this.receivers.push(L),L}isListeningto(f){return this.eventTarget===f}handleEvent(f){var b=this;return(0,g.Z)(function*(){const L=f,{eventId:B,eventType:te,data:Ye}=L.data,kt=b.handlersMap[te];if(!kt?.size)return;L.ports[0].postMessage({status:"ack",eventId:B,eventType:te});const Yt=Array.from(kt).map(function(){var Gr=(0,g.Z)(function*(ea){return ea(L.origin,Ye)});return function(ea){return Gr.apply(this,arguments)}}()),xn=yield function Bn(w){return Promise.all(w.map(function(){var d=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(b){return{fulfilled:!1,reason:b}}});return function(f){return d.apply(this,arguments)}}()))}(Yt);L.ports[0].postMessage({status:"done",eventId:B,eventType:te,response:xn})})()}_subscribe(f,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(b)}_unsubscribe(f,b){this.handlersMap[f]&&b&&this.handlersMap[f].delete(b),(!b||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ln(w="",d=10){let f="";for(let b=0;b<d;b++)f+=Math.floor(10*Math.random());return w+f}class Fr{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,b=50){var L=this;return(0,g.Z)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let te,Ye;return new Promise((kt,Yt)=>{const xn=ln("",20);B.port1.start();const Gr=setTimeout(()=>{Yt(new Error("unsupported_event"))},b);Ye={messageChannel:B,onMessage(ea){const Na=ea;if(Na.data.eventId===xn)switch(Na.data.status){case"ack":clearTimeout(Gr),te=setTimeout(()=>{Yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),kt(Na.data.response);break;default:clearTimeout(Gr),clearTimeout(te),Yt(new Error("invalid_response"))}}},L.handlers.add(Ye),B.port1.addEventListener("message",Ye.onMessage),L.target.postMessage({eventType:d,eventId:xn,data:f},[B.port2])}).finally(()=>{Ye&&L.removeMessageHandler(Ye)})})()}}function nn(){return window}function zi(){return typeof nn().WorkerGlobalScope<"u"&&"function"==typeof nn().importScripts}function ci(){return(ci=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ro="firebaseLocalStorageDb",Ps="firebaseLocalStorage",Zo="fbase_key";class ts{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function pa(w,d){return w.transaction([Ps],d?"readwrite":"readonly").objectStore(Ps)}function uo(){const w=indexedDB.open(Ro,1);return new Promise((d,f)=>{w.addEventListener("error",()=>{f(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(Ps,{keyPath:Zo})}catch(L){f(L)}}),w.addEventListener("success",(0,g.Z)(function*(){const b=w.result;b.objectStoreNames.contains(Ps)?d(b):(b.close(),yield function Ko(){const w=indexedDB.deleteDatabase(Ro);return new ts(w).toPromise()}(),d(yield uo()))}))})}function ga(w,d,f){return xi.apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(w,d,f){const b=pa(w,!0).put({[Zo]:d,value:f});return new ts(b).toPromise()})).apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(w,d){const f=pa(w,!1).get(d),b=yield new ts(f).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function co(w,d){const f=pa(w,!0).delete(d);return new ts(f).toPromise()}const Wa=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield uo()),f.db})()}_withRetries(f){var b=this;return(0,g.Z)(function*(){let L=0;for(;;)try{const B=yield b._openDb();return yield f(B)}catch(B){if(L++>3)throw B;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return zi()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=Pn._getInstance(function Mo(){return zi()?self:null}()),f.receiver._subscribe("keyChanged",function(){var b=(0,g.Z)(function*(L,B){return{keyProcessed:(yield f._poll()).includes(B.key)}});return function(L,B){return b.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var b=(0,g.Z)(function*(L,B){return["keyChanged"]});return function(L,B){return b.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var b,L;if(f.activeServiceWorker=yield function Wi(){return ci.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Fr(f.activeServiceWorker);const B=yield f.sender._send("ping",{},800);B&&null!==(b=B[0])&&void 0!==b&&b.fulfilled&&null!==(L=B[0])&&void 0!==L&&L.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var b=this;return(0,g.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function qi(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:f},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield uo();return yield ga(f,T,"1"),yield co(f,T),!0}catch{}return!1})()}_withPendingWrite(f){var b=this;return(0,g.Z)(function*(){b.pendingWrites++;try{yield f()}finally{b.pendingWrites--}})()}_set(f,b){var L=this;return(0,g.Z)(function*(){return L._withPendingWrite((0,g.Z)(function*(){return yield L._withRetries(B=>ga(B,f,b)),L.localCache[f]=b,L.notifyServiceWorker(f)}))})()}_get(f){var b=this;return(0,g.Z)(function*(){const L=yield b._withRetries(B=>function Zi(w,d){return No.apply(this,arguments)}(B,f));return b.localCache[f]=L,L})()}_remove(f){var b=this;return(0,g.Z)(function*(){return b._withPendingWrite((0,g.Z)(function*(){return yield b._withRetries(L=>co(L,f)),delete b.localCache[f],b.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const b=yield f._withRetries(te=>{const Ye=pa(te,!1).getAll();return new ts(Ye).toPromise()});if(!b)return[];if(0!==f.pendingWrites)return[];const L=[],B=new Set;for(const{fbase_key:te,value:Ye}of b)B.add(te),JSON.stringify(f.localCache[te])!==JSON.stringify(Ye)&&(f.notifyListeners(te,Ye),L.push(te));for(const te of Object.keys(f.localCache))f.localCache[te]&&!B.has(te)&&(f.notifyListeners(te,null),L.push(te));return L})()}notifyListeners(f,b){this.localCache[f]=b;const L=this.listeners[f];if(L)for(const B of Array.from(L))B(b)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(b)}_removeListener(f,b){this.listeners[f]&&(this.listeners[f].delete(b),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Mu(w,d){return wt(w,"POST","/v2/accounts/mfaSignIn:start",Mt(w,d))}function ns(){return(ns=(0,g.Z)(function*(w){return(yield wt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Po(w){return new Promise((d,f)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=d,b.onerror=L=>{const B=ke("internal-error");B.customData=L,f(B)},b.type="text/javascript",b.charset="UTF-8",function du(){var w,d;return null!==(d=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==d?d:document}().appendChild(b)})}function ir(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Mi=1e12;class zs{constructor(d){this.auth=d,this.counter=Mi,this._widgets=new Map}render(d,f){const b=this.counter;return this._widgets.set(b,new Nu(d,this.auth.name,f||{})),this.counter++,b}reset(d){var f;const b=d||Mi;null===(f=this._widgets.get(b))||void 0===f||f.delete(),this._widgets.delete(b)}getResponse(d){var f;return(null===(f=this._widgets.get(d||Mi))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,g.Z)(function*(){var b;return null===(b=f._widgets.get(d||Mi))||void 0===b||b.execute(),""})()}}class Nu{constructor(d,f,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const L="string"==typeof d?document.getElementById(d):d;pe(L,"argument-error",{appName:f}),this.container=L,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function uc(w){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qa=ir("rcb"),$c=new it(3e4,6e4);class Yo{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=nn().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return pe(function rs(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(nn().grecaptcha):new Promise((b,L)=>{const B=nn().setTimeout(()=>{L(ke(d,"network-request-failed"))},$c.get());nn()[qa]=()=>{nn().clearTimeout(B),delete nn()[qa];const Ye=nn().grecaptcha;if(!Ye)return void L(ke(d,"internal-error"));const kt=Ye.render;Ye.render=(Yt,xn)=>{const Gr=kt(Yt,xn);return this.counter++,Gr},this.hostLanguage=f,b(Ye)},Po(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:qa,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(B),L(ke(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=nn().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ya{load(d){return(0,g.Z)(function*(){return new zs(d)})()}clearedOneInstance(){}}const Ws="recaptcha",ms={theme:"light",type:"image"};class xa{constructor(d,f=Object.assign({},ms),b){this.parameters=f,this.type=Ws,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fr(b),this.isInvisible="invisible"===this.parameters.size,pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const L="string"==typeof d?document.getElementById(d):d;pe(L,this.auth,"argument-error"),this.container=L,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ya:new Yo,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),b=d.getAssertedRecaptcha();return b.getResponse(f)||new Promise(B=>{const te=Ye=>{Ye&&(d.tokenChangeListeners.delete(te),B(Ye))};d.tokenChangeListeners.add(te),d.isInvisible&&b.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(b=>b(f)),"function"==typeof d)d(f);else if("string"==typeof d){const b=nn()[d];"function"==typeof b&&b(f)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const b=document.createElement("div");f.appendChild(b),f=b}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){pe(Pe()&&!zi(),d.auth,"internal-error"),yield function Za(){let w=null;return new Promise(d=>{"complete"!==document.readyState?(w=()=>d(),window.addEventListener("load",w)):d()}).catch(d=>{throw w&&window.removeEventListener("load",w),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function lu(w){return ns.apply(this,arguments)}(d.auth);pe(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hc{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=bs._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function Tl(w,d,f){return zn.apply(this,arguments)}function zn(){return(zn=(0,g.Z)(function*(w,d,f){const b=fr(w),L=yield Ma(b,d,(0,H.m9)(f));return new Hc(L,B=>Or(b,B))})).apply(this,arguments)}function cc(w,d,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w);yield ps(!1,b,"phone");const L=yield Ma(b.auth,d,(0,H.m9)(f));return new Hc(L,B=>Ji(b,B))})).apply(this,arguments)}function Qo(w,d,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w),L=yield Ma(b.auth,d,(0,H.m9)(f));return new Hc(L,B=>Co(b,B))})).apply(this,arguments)}function Ma(w,d,f){return fu.apply(this,arguments)}function fu(){return(fu=(0,g.Z)(function*(w,d,f){var b;const L=yield f.verify();try{let B;if(pe("string"==typeof L,w,"argument-error"),pe(f.type===Ws,w,"argument-error"),B="string"==typeof d?{phoneNumber:d}:d,"session"in B){const te=B.session;if("phoneNumber"in B)return pe("enroll"===te.type,w,"internal-error"),(yield An(w,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:L}})).phoneSessionInfo.sessionInfo;{pe("signin"===te.type,w,"internal-error");const Ye=(null===(b=B.multiFactorHint)||void 0===b?void 0:b.uid)||B.multiFactorUid;return pe(Ye,w,"missing-multi-factor-info"),(yield Mu(w,{mfaPendingCredential:te.credential,mfaEnrollmentId:Ye,phoneSignInInfo:{recaptchaToken:L}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield jo(w,{phoneNumber:B.phoneNumber,recaptchaToken:L});return te}}finally{f._reset()}})).apply(this,arguments)}function br(w,d){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(w,d){yield Ts((0,H.m9)(w),d)})).apply(this,arguments)}let Ou=(()=>{class w{constructor(f){this.providerId=w.PROVIDER_ID,this.auth=fr(f)}verifyPhoneNumber(f,b){return Ma(this.auth,f,(0,H.m9)(b))}static credential(f,b){return bs._fromVerification(f,b)}static credentialFromResult(f){return w.credentialFromTaggedObject(f)}static credentialFromError(f){return w.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:b,temporaryProof:L}=f;return b&&L?bs._fromTokenResponse(b,L):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function is(w,d){return d?ot(d):(pe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Hr extends $n{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Bi(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Bi(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Bi(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function Ya(w){return gs(w.auth,new Hr(w),w.bypassAuthState)}function Qa(w){const{auth:d,user:f}=w;return pe(f,d,"internal-error"),Br(f,new Hr(w),w.bypassAuthState)}function Pu(w){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(w){const{auth:d,user:f}=w;return pe(f,d,"internal-error"),Ts(f,new Hr(w),w.bypassAuthState)})).apply(this,arguments)}class ho{constructor(d,f,b,L,B=!1){this.auth=d,this.resolver=b,this.user=L,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,g.Z)(function*(b,L){d.pendingPromise={resolve:b,reject:L};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(B){d.reject(B)}});return function(b,L){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,g.Z)(function*(){const{urlResponse:b,sessionId:L,postBody:B,tenantId:te,error:Ye,type:kt}=d;if(Ye)return void f.reject(Ye);const Yt={auth:f.auth,requestUri:b,sessionId:L,tenantId:te||void 0,postBody:B||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(kt)(Yt))}catch(xn){f.reject(xn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Ya;case"linkViaPopup":case"linkViaRedirect":return Pu;case"reauthViaPopup":case"reauthViaRedirect":return Qa;default:et(this.auth,"internal-error")}}resolve(d){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xo=new it(2e3,1e4);function ys(w,d,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,g.Z)(function*(w,d,f){const b=fr(w);je(w,d,Ci);const L=is(b,f);return new _(b,"signInViaPopup",d,L).executeNotNull()})).apply(this,arguments)}function pu(w,d,f){return ku.apply(this,arguments)}function ku(){return(ku=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w);je(b.auth,d,Ci);const L=is(b.auth,f);return new _(b.auth,"reauthViaPopup",d,L,b).executeNotNull()})).apply(this,arguments)}function Ja(w,d,f){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w);je(b.auth,d,Ci);const L=is(b.auth,f);return new _(b.auth,"linkViaPopup",d,L,b).executeNotNull()})).apply(this,arguments)}let _=(()=>{class w extends ho{constructor(f,b,L,B,te){super(f,b,B,te),this.provider=L,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const b=yield f.execute();return pe(b,f.auth,"internal-error"),b})()}onExecution(){var f=this;return(0,g.Z)(function*(){$e(1===f.filter.length,"Popup operations only handle one event");const b=ln();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],b),f.authWindow.associatedEvent=b,f.resolver._originValidation(f.auth).catch(L=>{f.reject(L)}),f.resolver._isIframeWebStorageSupported(f.auth,L=>{L||f.reject(ke(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const f=()=>{var b,L;this.pollId=null!==(L=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==L&&L.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Xo.get())};f()}}return w.currentPopupAction=null,w})();const y=new Map;class C extends ho{constructor(d,f,b=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,b),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,g.Z)(function*(){let b=y.get(f.auth._key());if(!b){try{const B=(yield function k(w,d){return $.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;b=()=>Promise.resolve(B)}catch(L){b=()=>Promise.reject(L)}y.set(f.auth._key(),b)}return f.bypassAuthState||y.set(f.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,b=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(b,d);if("unknown"!==d.type){if(d.eventId){const L=yield b.auth._redirectUserForId(d.eventId);if(L)return b.user=L,f().call(b,d);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function $(){return($=(0,g.Z)(function*(w,d){const f=kn(d),b=Nt(w);if(!(yield b._isAvailable()))return!1;const L="true"===(yield b._get(f));return yield b._remove(f),L})).apply(this,arguments)}function K(w,d){return ve.apply(this,arguments)}function ve(){return(ve=(0,g.Z)(function*(w,d){return Nt(w)._set(kn(d),"true")})).apply(this,arguments)}function ze(){y.clear()}function xt(w,d){y.set(w._key(),d)}function Nt(w){return ot(w._redirectPersistence)}function kn(w){return ce("pendingRedirect",w.config.apiKey,w.name)}function Lr(w,d,f){return function vs(w,d,f){return li.apply(this,arguments)}(w,d,f)}function li(){return(li=(0,g.Z)(function*(w,d,f){const b=fr(w);je(w,d,Ci),yield b._initializationPromise;const L=is(b,f);return yield K(L,b),L._openRedirect(b,d,"signInViaRedirect")})).apply(this,arguments)}function M(w,d,f){return function P(w,d,f){return G.apply(this,arguments)}(w,d,f)}function G(){return(G=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w);je(b.auth,d,Ci),yield b.auth._initializationPromise;const L=is(b.auth,f);yield K(L,b.auth);const B=yield pn(b);return L._openRedirect(b.auth,d,"reauthViaRedirect",B)})).apply(this,arguments)}function ne(w,d,f){return function _e(w,d,f){return Me.apply(this,arguments)}(w,d,f)}function Me(){return(Me=(0,g.Z)(function*(w,d,f){const b=(0,H.m9)(w);je(b.auth,d,Ci),yield b.auth._initializationPromise;const L=is(b.auth,f);yield ps(!1,b,d.providerId),yield K(L,b.auth);const B=yield pn(b);return L._openRedirect(b.auth,d,"linkViaRedirect",B)})).apply(this,arguments)}function Je(w,d){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(w,d){return yield fr(w)._initializationPromise,Kt(w,d,!1)})).apply(this,arguments)}function Kt(w,d){return zt.apply(this,arguments)}function zt(){return(zt=(0,g.Z)(function*(w,d,f=!1){const b=fr(w),L=is(b,d),te=yield new C(b,L,f).execute();return te&&!f&&(delete te.user._redirectEventId,yield b._persistUserIfCurrent(te.user),yield b._setRedirectUser(null,d)),te})).apply(this,arguments)}function pn(w){return on.apply(this,arguments)}function on(){return(on=(0,g.Z)(function*(w){const d=ln(`${w.uid}:::`);return w._redirectEventId=d,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),d})).apply(this,arguments)}class di{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(d,b)&&(f=!0,this.sendToConsumer(d,b),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function qs(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lc(w);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var b;if(d.error&&!lc(d)){const L=(null===(b=d.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";f.onError(ke(this.auth,L))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const b=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&b}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ra(d))}saveEventToCache(d){this.cachedEventUids.add(Ra(d)),this.lastProcessedEventTime=Date.now()}}function Ra(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(d=>d).join("-")}function lc({type:w,error:d}){return"unknown"===w&&"auth/no-auth-event"===d?.code}function Zs(w){return ko.apply(this,arguments)}function ko(){return(ko=(0,g.Z)(function*(w,d={}){return wt(w,"GET","/v1/projects",d)})).apply(this,arguments)}const Xa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dc=/^https?/;function hc(){return(hc=(0,g.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:d}=yield Zs(w);for(const f of d)try{if($d(f))return}catch{}et(w,"unauthorized-domain")})).apply(this,arguments)}function $d(w){const d=Ae(),{protocol:f,hostname:b}=new URL(d);if(w.startsWith("chrome-extension://")){const te=new URL(w);return""===te.hostname&&""===b?"chrome-extension:"===f&&w.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&te.hostname===b}if(!dc.test(f))return!1;if(Xa.test(w))return b===w;const L=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+L+"|"+L+")$","i").test(b)}const Hd=new it(3e4,6e4);function Al(){const w=nn().___jsl;if(w?.H)for(const d of Object.keys(w.H))if(w.H[d].r=w.H[d].r||[],w.H[d].L=w.H[d].L||[],w.H[d].r=[...w.H[d].L],w.CP)for(let f=0;f<w.CP.length;f++)w.CP[f]=null}let Gc=null;function Fu(w){return Gc=Gc||function dg(w){return new Promise((d,f)=>{var b,L,B;function te(){Al(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Al(),f(ke(w,"network-request-failed"))},timeout:Hd.get()})}if(null!==(L=null===(b=nn().gapi)||void 0===b?void 0:b.iframes)&&void 0!==L&&L.Iframe)d(gapi.iframes.getContext());else{if(null===(B=nn().gapi)||void 0===B||!B.load){const Ye=ir("iframefcb");return nn()[Ye]=()=>{gapi.load?te():f(ke(w,"network-request-failed"))},Po(`https://apis.google.com/js/api.js?onload=${Ye}`).catch(kt=>f(kt))}te()}}).catch(d=>{throw Gc=null,d})}(w),Gc}const hg=new it(5e3,15e3),lf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gd(w){const d=w.config;pe(d.authDomain,w,"auth-domain-config-required");const f=d.emulator?ft(d,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,b={apiKey:d.apiKey,appName:w.name,v:m.SDK_VERSION},L=pg.get(w.config.apiHost);L&&(b.eid=L);const B=w._getFrameworks();return B.length&&(b.fw=B.join(",")),`${f}?${(0,H.xO)(b).slice(1)}`}function zd(){return zd=(0,g.Z)(function*(w){const d=yield Fu(w),f=nn().gapi;return pe(f,w,"internal-error"),d.open({where:document.body,url:Gd(w),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lf,dontclear:!0},b=>new Promise(function(){var L=(0,g.Z)(function*(B,te){yield b.restyle({setHideOnLeave:!1});const Ye=ke(w,"network-request-failed"),kt=nn().setTimeout(()=>{te(Ye)},hg.get());function Yt(){nn().clearTimeout(kt),B(b)}b.ping(Yt).then(Yt,()=>{te(Ye)})});return function(B,te){return L.apply(this,arguments)}}()))}),zd.apply(this,arguments)}const Lu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fc{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ml(w,d,f,b,L,B){pe(w.config.authDomain,w,"auth-domain-config-required"),pe(w.config.apiKey,w,"invalid-api-key");const te={apiKey:w.config.apiKey,appName:w.name,authType:f,redirectUrl:b,v:m.SDK_VERSION,eventId:L};if(d instanceof Ci){d.setDefaultLanguage(w.languageCode),te.providerId=d.providerId||"",(0,H.xb)(d.getCustomParameters())||(te.customParameters=JSON.stringify(d.getCustomParameters()));for(const[kt,Yt]of Object.entries(B||{}))te[kt]=Yt}if(d instanceof Bs){const kt=d.getScopes().filter(Yt=>""!==Yt);kt.length>0&&(te.scopes=kt.join(","))}w.tenantId&&(te.tid=w.tenantId);const Ye=te;for(const kt of Object.keys(Ye))void 0===Ye[kt]&&delete Ye[kt];return`${function Kd({config:w}){return w.emulator?ft(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,H.xO)(Ye).slice(1)}`}const Wc="webStorageSupport",ff=class mg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wn,this._completeRedirectFn=Kt,this._overrideRedirectResult=xt}_openPopup(d,f,b,L){var B=this;return(0,g.Z)(function*(){var te;$e(null===(te=B.eventManagers[d._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Ye=Ml(d,f,b,Ae(),L);return function hi(w,d,f,b=500,L=600){const B=Math.max((window.screen.availHeight-L)/2,0).toString(),te=Math.max((window.screen.availWidth-b)/2,0).toString();let Ye="";const kt=Object.assign(Object.assign({},Lu),{width:b.toString(),height:L.toString(),top:B,left:te}),Yt=(0,H.z$)().toLowerCase();f&&(Ye=we(Yt)?"_blank":f),J(Yt)&&(d=d||"http://localhost",kt.scrollbars="yes");const xn=Object.entries(kt).reduce((ea,[Na,gc])=>`${ea}${Na}=${gc},`,"");if(function Ke(w=(0,H.z$)()){var d;return X(w)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Yt)&&"_self"!==Ye)return function df(w,d){const f=document.createElement("a");f.href=w,f.target=d;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(b)}(d||"",Ye),new fc(null);const Gr=window.open(d||"",Ye,xn);pe(Gr,w,"popup-blocked");try{Gr.focus()}catch{}return new fc(Gr)}(d,Ye,ln())})()}_openRedirect(d,f,b,L){var B=this;return(0,g.Z)(function*(){return yield B._originValidation(d),function gr(w){nn().location.href=w}(Ml(d,f,b,Ae(),L)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:L,promise:B}=this.eventManagers[f];return L?Promise.resolve(L):($e(B,"If manager is not set, promise should be"),B)}const b=this.initAndGetManager(d);return this.eventManagers[f]={promise:b},b.catch(()=>{delete this.eventManagers[f]}),b}initAndGetManager(d){var f=this;return(0,g.Z)(function*(){const b=yield function gg(w){return zd.apply(this,arguments)}(d),L=new di(d);return b.register("authEvent",B=>(pe(B?.authEvent,d,"invalid-auth-event"),{status:L.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:L},f.iframes[d._key()]=b,L})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(Wc,{type:Wc},L=>{var B;const te=null===(B=L?.[0])||void 0===B?void 0:B[Wc];void 0!==te&&f(!!te),et(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function cf(w){return hc.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return Qt()||q()||X()}};class Yd{constructor(d){this.factorId=d}_process(d,f,b){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,b);case"signin":return this._finalizeSignIn(d,f.credential);default:return Se("unexpected MultiFactorSessionType")}}}class Qd extends Yd{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Qd(d)}_finalizeEnroll(d,f,b){return function Jr(w,d){return wt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Mt(w,d))}(d,{idToken:f,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function Oo(w,d){return wt(w,"POST","/v2/accounts/mfaSignIn:finalize",Mt(w,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rl=(()=>{class w{constructor(){}static assertion(f){return Qd._fromCredential(f)}}return w.FACTOR_ID="phone",w})();var Ks="@firebase/auth";class Ki{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(b=>{d(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,H.Pz)("authIdTokenMaxAge"),function Xr(w){(0,m._registerComponent)(new ye.wA("auth",(d,{options:f})=>{const b=d.getProvider("app").getImmediate(),L=d.getProvider("heartbeat"),{apiKey:B,authDomain:te}=b.options;return((Ye,kt)=>{pe(B&&!B.includes(":"),"invalid-api-key",{appName:Ye.name}),pe(!te?.includes(":"),"argument-error",{appName:Ye.name});const Yt={apiKey:B,authDomain:te,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xn(w)},xn=new qr(Ye,kt,Yt);return function mt(w,d){const f=d?.persistence||[],b=(Array.isArray(f)?f:[f]).map(ot);d?.errorMap&&w._updateErrorMap(d.errorMap),w._initializeWithPersistence(b,d?.popupRedirectResolver)}(xn,f),xn})(b,L)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,b)=>{d.getProvider("auth-internal").initialize()})),(0,m._registerComponent)(new ye.wA("auth-internal",d=>{const f=fr(d.getProvider("auth").getImmediate());return new Ki(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,m.registerVersion)(Ks,"0.21.5",function gu(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,m.registerVersion)(Ks,"0.21.5","esm2017")}("Browser")},2090:(It,Re,j)=>{j.d(Re,{$s:()=>Ut,BH:()=>je,G6:()=>We,L:()=>Te,LL:()=>Ee,Pz:()=>Qe,Sg:()=>ut,UG:()=>$e,US:()=>ye,ZB:()=>fe,ZR:()=>gn,aH:()=>ke,b$:()=>gt,eu:()=>it,hl:()=>rt,jU:()=>pt,m9:()=>Vn,ne:()=>Vt,pd:()=>dr,r3:()=>Rn,ru:()=>ot,tV:()=>oe,uI:()=>Se,vZ:()=>vr,w1:()=>Ae,xO:()=>wr,xb:()=>cr,z$:()=>pe,zI:()=>ft,zd:()=>lr});const de=function(ce){const re=[];let Q=0;for(let J=0;J<ce.length;J++){let q=ce.charCodeAt(J);q<128?re[Q++]=q:q<2048?(re[Q++]=q>>6|192,re[Q++]=63&q|128):55296==(64512&q)&&J+1<ce.length&&56320==(64512&ce.charCodeAt(J+1))?(q=65536+((1023&q)<<10)+(1023&ce.charCodeAt(++J)),re[Q++]=q>>18|240,re[Q++]=q>>12&63|128,re[Q++]=q>>6&63|128,re[Q++]=63&q|128):(re[Q++]=q>>12|224,re[Q++]=q>>6&63|128,re[Q++]=63&q|128)}return re},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ce,re){if(!Array.isArray(ce))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=re?this.byteToCharMapWebSafe_:this.byteToCharMap_,J=[];for(let q=0;q<ce.length;q+=3){const we=ce[q],Fe=q+1<ce.length,_t=Fe?ce[q+1]:0,le=q+2<ce.length,ae=le?ce[q+2]:0;let Ke=(15&_t)<<2|ae>>6,at=63&ae;le||(at=64,Fe||(Ke=64)),J.push(Q[we>>2],Q[(3&we)<<4|_t>>4],Q[Ke],Q[at])}return J.join("")},encodeString(ce,re){return this.HAS_NATIVE_SUPPORT&&!re?btoa(ce):this.encodeByteArray(de(ce),re)},decodeString(ce,re){return this.HAS_NATIVE_SUPPORT&&!re?atob(ce):function(ce){const re=[];let Q=0,J=0;for(;Q<ce.length;){const q=ce[Q++];if(q<128)re[J++]=String.fromCharCode(q);else if(q>191&&q<224){const we=ce[Q++];re[J++]=String.fromCharCode((31&q)<<6|63&we)}else if(q>239&&q<365){const le=((7&q)<<18|(63&ce[Q++])<<12|(63&ce[Q++])<<6|63&ce[Q++])-65536;re[J++]=String.fromCharCode(55296+(le>>10)),re[J++]=String.fromCharCode(56320+(1023&le))}else{const we=ce[Q++],Fe=ce[Q++];re[J++]=String.fromCharCode((15&q)<<12|(63&we)<<6|63&Fe)}}return re.join("")}(this.decodeStringToByteArray(ce,re))},decodeStringToByteArray(ce,re){this.init_();const Q=re?this.charToByteMapWebSafe_:this.charToByteMap_,J=[];for(let q=0;q<ce.length;){const we=Q[ce.charAt(q++)],_t=q<ce.length?Q[ce.charAt(q)]:0;++q;const ae=q<ce.length?Q[ce.charAt(q)]:64;++q;const me=q<ce.length?Q[ce.charAt(q)]:64;if(++q,null==we||null==_t||null==ae||null==me)throw new Ce;J.push(we<<2|_t>>4),64!==ae&&(J.push(_t<<4&240|ae>>2),64!==me&&J.push(ae<<6&192|me))}return J},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ce=0;ce<this.ENCODED_VALS.length;ce++)this.byteToCharMap_[ce]=this.ENCODED_VALS.charAt(ce),this.charToByteMap_[this.byteToCharMap_[ce]]=ce,this.byteToCharMapWebSafe_[ce]=this.ENCODED_VALS_WEBSAFE.charAt(ce),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ce]]=ce,ce>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ce)]=ce,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ce)]=ce)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Te=function(ce){return function(ce){const re=de(ce);return ye.encodeByteArray(re,!0)}(ce).replace(/\./g,"")},oe=function(ce){try{return ye.decodeString(ce,!0)}catch(re){console.error("base64Decode failed: ",re)}return null};function fe(ce,re){if(!(re instanceof Object))return re;switch(re.constructor){case Date:return new Date(re.getTime());case Object:void 0===ce&&(ce={});break;case Array:ce=[];break;default:return re}for(const Q in re)!re.hasOwnProperty(Q)||!tt(Q)||(ce[Q]=fe(ce[Q],re[Q]));return ce}function tt(ce){return"__proto__"!==ce}const qe=()=>{try{return function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ce=process.env.__FIREBASE_DEFAULTS__;return ce?JSON.parse(ce):void 0})()||(()=>{if(typeof document>"u")return;let ce;try{ce=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const re=ce&&oe(ce[1]);return re&&JSON.parse(re)})()}catch(ce){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ce}`)}},ke=()=>{var ce;return null===(ce=qe())||void 0===ce?void 0:ce.config},Qe=ce=>{var re;return null===(re=qe())||void 0===re?void 0:re[`_${ce}`]};class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((re,Q)=>{this.resolve=re,this.reject=Q})}wrapCallback(re){return(Q,J)=>{Q?this.reject(Q):this.resolve(J),"function"==typeof re&&(this.promise.catch(()=>{}),1===re.length?re(Q):re(Q,J))}}}function ut(ce,re){if(ce.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const J=re||"demo-project",q=ce.iat||0,we=ce.sub||ce.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${J}`,aud:J,iat:q,exp:q+3600,auth_time:q,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},ce);return[Te(JSON.stringify({alg:"none",type:"JWT"})),Te(JSON.stringify(Fe)),""].join(".")}function pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function $e(){var ce;const re=null===(ce=qe())||void 0===ce?void 0:ce.forceEnvironment;if("node"===re)return!0;if("browser"===re)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pt(){return"object"==typeof self&&self.self===self}function ot(){const ce="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ce&&void 0!==ce.id}function gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){const ce=pe();return ce.indexOf("MSIE ")>=0||ce.indexOf("Trident/")>=0}function We(){return!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rt(){try{return"object"==typeof indexedDB}catch{return!1}}function it(){return new Promise((ce,re)=>{try{let Q=!0;const J="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(J);q.onsuccess=()=>{q.result.close(),Q||self.indexedDB.deleteDatabase(J),ce(!0)},q.onupgradeneeded=()=>{Q=!1},q.onerror=()=>{var we;re((null===(we=q.error)||void 0===we?void 0:we.message)||"")}}catch(Q){re(Q)}})}function ft(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class gn extends Error{constructor(re,Q,J){super(Q),this.code=re,this.customData=J,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ee.prototype.create)}}class Ee{constructor(re,Q,J){this.service=re,this.serviceName=Q,this.errors=J}create(re,...Q){const J=Q[0]||{},q=`${this.service}/${re}`,we=this.errors[re],Fe=we?function Mt(ce,re){return ce.replace(wt,(Q,J)=>{const q=re[J];return null!=q?String(q):`<${J}?>`})}(we,J):"Error";return new gn(q,`${this.serviceName}: ${Fe} (${q}).`,J)}}const wt=/\{\$([^}]+)}/g;function Rn(ce,re){return Object.prototype.hasOwnProperty.call(ce,re)}function cr(ce){for(const re in ce)if(Object.prototype.hasOwnProperty.call(ce,re))return!1;return!0}function vr(ce,re){if(ce===re)return!0;const Q=Object.keys(ce),J=Object.keys(re);for(const q of Q){if(!J.includes(q))return!1;const we=ce[q],Fe=re[q];if(ct(we)&&ct(Fe)){if(!vr(we,Fe))return!1}else if(we!==Fe)return!1}for(const q of J)if(!Q.includes(q))return!1;return!0}function ct(ce){return null!==ce&&"object"==typeof ce}function wr(ce){const re=[];for(const[Q,J]of Object.entries(ce))Array.isArray(J)?J.forEach(q=>{re.push(encodeURIComponent(Q)+"="+encodeURIComponent(q))}):re.push(encodeURIComponent(Q)+"="+encodeURIComponent(J));return re.length?"&"+re.join("&"):""}function lr(ce){const re={};return ce.replace(/^\?/,"").split("&").forEach(J=>{if(J){const[q,we]=J.split("=");re[decodeURIComponent(q)]=decodeURIComponent(we)}}),re}function dr(ce){const re=ce.indexOf("?");if(!re)return"";const Q=ce.indexOf("#",re);return ce.substring(re,Q>0?Q:void 0)}function Vt(ce,re){const Q=new Ot(ce,re);return Q.subscribe.bind(Q)}class Ot{constructor(re,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{re(this)}).catch(J=>{this.error(J)})}next(re){this.forEachObserver(Q=>{Q.next(re)})}error(re){this.forEachObserver(Q=>{Q.error(re)}),this.close(re)}complete(){this.forEachObserver(re=>{re.complete()}),this.close()}subscribe(re,Q,J){let q;if(void 0===re&&void 0===Q&&void 0===J)throw new Error("Missing Observer.");q=function Nn(ce,re){if("object"!=typeof ce||null===ce)return!1;for(const Q of re)if(Q in ce&&"function"==typeof ce[Q])return!0;return!1}(re,["next","error","complete"])?re:{next:re,error:Q,complete:J},void 0===q.next&&(q.next=fn),void 0===q.error&&(q.error=fn),void 0===q.complete&&(q.complete=fn);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),we}unsubscribeOne(re){void 0===this.observers||void 0===this.observers[re]||(delete this.observers[re],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(re){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,re)}sendOne(re,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[re])try{Q(this.observers[re])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})}close(re){this.finalized||(this.finalized=!0,void 0!==re&&(this.finalError=re),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fn(){}function Ut(ce,re=1e3,Q=2){const J=re*Math.pow(Q,ce),q=Math.round(.5*J*(Math.random()-.5)*2);return Math.min(144e5,J+q)}function Vn(ce){return ce&&ce._delegate?ce._delegate:ce}},2340:(It,Re,j)=>{j.d(Re,{N:()=>g});const g={production:!0,firebaseConfig:{apiKey:"AIzaSyC18SYhiI6FJ8ngA0EmXAbXl07rnUXHMKA",authDomain:"exam-project-46928.firebaseapp.com",projectId:"exam-project-46928",storageBucket:"exam-project-46928.appspot.com",messagingSenderId:"1062978260998",appId:"1:1062978260998:web:ee6a68f6b26523862bf387"}}},9959:(It,Re,j)=>{var g=j(1481),H=j(2011),m=j(4650),de=j(7579),he=j(9646),ye=j(9751),Ce=j(8996),Ie=j(6451),Te=j(5363),oe=j(3900),se=j(4004),fe=j(6063);class tt extends de.x{constructor(e=1/0,t=1/0,s=fe.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:p}=this;t||(s.push(e),!a&&s.push(l.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:a}=this,l=a.slice();for(let p=0;p<l.length&&!e.closed;p+=s?1:2)e.next(l[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<s.length&&s.splice(0,s.length-l),!a){const p=t.now();let I=0;for(let O=1;O<s.length&&s[O]<=p;O+=2)I=O;I&&s.splice(0,I+1)}}}var He=j(3099);function nt(n,e,t){let s,a=!1;return n&&"object"==typeof n?({bufferSize:s=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):s=n??1/0,(0,He.B)({connector:()=>new tt(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var Dt=j(590),Le=j(576);function qe(n,e){return(0,Le.m)(e)?(0,oe.w)(()=>n,e):(0,oe.w)(()=>n)}var Ze=j(9468),et=j(9300),ke=j(2122),Qe=j(6895);j(259);var Ee=j(5861),Mt=j(9681),wt=j(4859),At=j(2090),Tn=j(1877);const vn=new Map,hn={activated:!1,tokenObservers:[]},Jn={initialized:!1,enabled:!1};function _n(n){return vn.get(n)||Object.assign({},hn)}function Rn(){return Jn}class wr{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new At.BH,yield function lr(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new At.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const en=new At.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ot(n){if(!_n(n).activated)throw en.create("use-before-activation",{appName:n.name})}function fn(n,e){return ar.apply(this,arguments)}function ar(){return(ar=(0,Ee.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const ue=yield a.getHeartbeatsHeader();ue&&(s["X-Firebase-Client"]=ue)}const l={method:"POST",body:JSON.stringify(e),headers:s};let p,I;try{p=yield fetch(n,l)}catch(ue){throw en.create("fetch-network-error",{originalErrorMessage:ue?.message})}if(200!==p.status)throw en.create("fetch-status-error",{httpStatus:p.status});try{I=yield p.json()}catch(ue){throw en.create("fetch-parse-error",{originalErrorMessage:ue?.message})}const O=I.ttl.match(/^([\d.]+)(s)$/);if(!O||!O[2]||isNaN(Number(O[1])))throw en.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const U=1e3*Number(O[1]),Y=Date.now();return{token:I.token,expireTimeMillis:Y+U,issuedAtTimeMillis:Y}})).apply(this,arguments)}function ni(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Xt="firebase-app-check-store";let jn=null;function lt(){return jn||(jn=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(en.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(Xt,{keyPath:"compositeKey"})}}catch(t){e(en.create("storage-open",{originalErrorMessage:t?.message}))}}),jn)}function Vn(){return(Vn=(0,Ee.Z)(function*(n,e){const s=(yield lt()).transaction(Xt,"readwrite"),l=s.objectStore(Xt).put({compositeKey:n,value:e});return new Promise((p,I)=>{l.onsuccess=O=>{p()},s.onerror=O=>{var U;I(en.create("storage-set",{originalErrorMessage:null===(U=O.target.error)||void 0===U?void 0:U.message}))}})})).apply(this,arguments)}const J=new Tn.Yd("@firebase/app-check");function Fe(n,e){return(0,At.hl)()?function bt(n,e){return function sn(n,e){return Vn.apply(this,arguments)}(function Q(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{J.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ae(){return Rn().enabled}function X(){return me.apply(this,arguments)}function me(){return(me=(0,Ee.Z)(function*(){const n=Rn();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const at={error:"UNKNOWN_ERROR"};function Qt(n){return At.US.encodeString(JSON.stringify(n),!1)}function qn(n){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Ot(t);const s=_n(t);let l,a=s.token;if(a&&!us(a)&&(s.token=void 0,a=void 0),!a){const O=yield s.cachedTokenPromise;O&&(us(O)?a=O:yield Fe(t,void 0))}if(!e&&a&&us(a))return{token:a.token};let I,p=!1;if(ae()){s.exchangeTokenPromise||(s.exchangeTokenPromise=fn(ni(t,yield X()),n.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),p=!0);const O=yield s.exchangeTokenPromise;return yield Fe(t,O),s.token=O,{token:O.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),p=!0),a=yield _n(t).exchangeTokenPromise}catch(O){"appCheck/throttled"===O.code?J.warn(O.message):J.error(O),l=O}return a?l?I=us(a)?{token:a.token,internalError:l}:Is(l):(I={token:a.token},s.token=a,yield Fe(t,a)):I=Is(l),p&&wo(t,I),I})).apply(this,arguments)}function qr(n,e){const t=_n(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=s}function fr(n){const{app:e}=n,t=_n(e);let s=t.tokenRefresher;s||(s=function Zr(n){const{app:e}=n;return new wr((0,Ee.Z)(function*(){let s;if(s=_n(e).token?yield qn(n,!0):yield qn(n),s.error)throw s.error;if(s.internalError)throw s.internalError}),()=>!0,()=>{const t=_n(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=s),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function wo(n,e){const t=_n(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch{}}function us(n){return n.expireTimeMillis-Date.now()>0}function Is(n){return{token:Qt(at),error:n}}class eo{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_n(this.app);for(const t of e)qr(this.app,t.next);return Promise.resolve()}}const nr="app-check-internal";!function Sr(){(0,Mt._registerComponent)(new wt.wA("app-check",n=>function Sn(n,e){return new eo(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(nr).initialize()})),(0,Mt._registerComponent)(new wt.wA(nr,n=>function $n(n){return{getToken:e=>qn(n,e),addTokenListener:e=>function gi(n,e,t,s){const{app:a}=n,l=_n(a);if(l.tokenObservers=[...l.tokenObservers,{next:t,error:s,type:e}],l.token&&us(l.token)){const I=l.token;Promise.resolve().then(()=>{t({token:I.token}),fr(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>fr(n))}(n,"INTERNAL",e),removeTokenListener:e=>qr(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Mt.registerVersion)("@firebase/app-check","0.6.4")}();class to{constructor(){return(0,ke.vb)("app-check")}}typeof window<"u"&&window;var no=j(9260);const Da=new m.OlP("angularfire2.auth.use-emulator"),oa=new m.OlP("angularfire2.auth.settings"),Ti=new m.OlP("angularfire2.auth.tenant-id"),Do=new m.OlP("angularfire2.auth.langugage-code"),Si=new m.OlP("angularfire2.auth.use-device-language"),ji=new m.OlP("angularfire.auth.persistence"),Ho=(n,e,t,s,a,l,p,I)=>(0,H.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const O=e.runOutsideAngular(()=>n.auth());if(t&&O.useEmulator(...t),s&&(O.tenantId=s),O.languageCode=a,l&&O.useDeviceLanguage(),p)for(const[U,Y]of Object.entries(p))O.settings[U]=Y;return I&&O.setPersistence(I),O},[t,s,a,l,p,I]);let ls=(()=>{class n{constructor(t,s,a,l,p,I,O,U,Y,ue,De,Be){const st=new de.x,Et=(0,he.of)(void 0).pipe((0,Te.Q)(p.outsideAngular),(0,oe.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,se.U)(()=>(0,H.on)(t,l,s)),(0,se.U)(Bt=>Ho(Bt,l,I,U,Y,ue,O,De)),nt({bufferSize:1,refCount:!1}));if((0,Qe.PM)(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,he.of)(null);else{Et.pipe((0,Dt.P)()).subscribe();const Qn=Et.pipe((0,oe.w)(Fn=>Fn.getRedirectResult().then(bn=>bn,()=>null)),ke.iC,nt({bufferSize:1,refCount:!1})),ti=Et.pipe((0,oe.w)(Fn=>new ye.y(bn=>({unsubscribe:l.runOutsideAngular(()=>Fn.onAuthStateChanged(Mn=>bn.next(Mn),Mn=>bn.error(Mn),()=>bn.complete()))})))),Dn=Et.pipe((0,oe.w)(Fn=>new ye.y(bn=>({unsubscribe:l.runOutsideAngular(()=>Fn.onIdTokenChanged(Mn=>bn.next(Mn),Mn=>bn.error(Mn),()=>bn.complete()))}))));this.authState=Qn.pipe(qe(ti),(0,Ze.R)(p.outsideAngular),(0,Te.Q)(p.insideAngular)),this.user=Qn.pipe(qe(Dn),(0,Ze.R)(p.outsideAngular),(0,Te.Q)(p.insideAngular)),this.idToken=this.user.pipe((0,oe.w)(Fn=>Fn?(0,Ce.D)(Fn.getIdToken()):(0,he.of)(null))),this.idTokenResult=this.user.pipe((0,oe.w)(Fn=>Fn?(0,Ce.D)(Fn.getIdTokenResult()):(0,he.of)(null))),this.credential=(0,Ie.T)(Qn,st,this.authState.pipe((0,et.h)(Fn=>!Fn))).pipe((0,se.U)(Fn=>Fn?.user?Fn:null),(0,Ze.R)(p.outsideAngular),(0,Te.Q)(p.insideAngular))}return(0,H.pX)(this,Et,l,{spy:{apply:(Bt,Qn,ti)=>{(Bt.startsWith("signIn")||Bt.startsWith("createUser"))&&ti.then(Dn=>st.next(Dn))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(H.Dh),m.LFG(H.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ke.HU),m.LFG(Da,8),m.LFG(oa,8),m.LFG(Ti,8),m.LFG(Do,8),m.LFG(Si,8),m.LFG(ji,8),m.LFG(to,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),si=(()=>{class n{constructor(){no.Z.registerVersion("angularfire",ke.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[ls]}),n})();var io=j(4986),ds=j(8675),so=j(4482),Cs=j(5403);function Go(){return(0,so.e)((n,e)=>{let t,s=!1;n.subscribe((0,Cs.x)(e,a=>{const l=t;t=a,s&&e.next([l,a]),s=!0}))})}var hs=j(5026),js=j(4671);function Ts(n,e){return n===e}j(9568);var Rt,ps=j(3942),Ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={},gs=gs||{},Zt=Ai||self;function Or(){}function Yn(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ji(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Co="closure_uid_"+(1e9*Math.random()>>>0),Ss=0;function jr(n,e,t){return n.call.apply(n.bind,arguments)}function As(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Dr(n,e,t){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jr:As).apply(null,arguments)}function _i(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function mn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(s,a,l){for(var p=Array(arguments.length-2),I=2;I<arguments.length;I++)p[I-2]=arguments[I];return e.prototype[a].apply(s,p)}}function oi(){this.s=this.s,this.o=this.o}oi.prototype.s=!1,oi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function pr(n){Object.prototype.hasOwnProperty.call(n,Co)&&n[Co]||(n[Co]=++Ss)}(this)},oi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ba=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function $r(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function To(n,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Yn(s)){const a=n.length||0,l=s.length||0;n.length=a+l;for(let p=0;p<l;p++)n[a+p]=s[p]}else n.push(s)}}function ur(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ur.prototype.h=function(){this.defaultPrevented=!0};var tn=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",Or,e),Zt.removeEventListener("test",Or,e)}catch{}return n}();function $i(n){return/^[\s\xa0]*$/.test(n)}var aa=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $s(n,e){return n<e?-1:n>e?1:0}function xs(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function kr(n){return-1!=xs().indexOf(n)}function ua(n){return ua[" "](n),n}ua[" "]=Or;var En,n,So=kr("Opera"),S=kr("Trident")||kr("MSIE"),R=kr("Edge"),A=R||S,Z=kr("Gecko")&&!(-1!=xs().toLowerCase().indexOf("webkit")&&!kr("Edge"))&&!(kr("Trident")||kr("MSIE"))&&!kr("Edge"),be=-1!=xs().toLowerCase().indexOf("webkit")&&!kr("Edge");function Ct(){var n=Zt.document;return n?n.documentMode:void 0}e:{var rr="",ai=(n=xs(),Z?/rv:([^\);]+)(\)|;)/.exec(n):R?/Edge\/([\d\.]+)/.exec(n):S?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):be?/WebKit\/(\S+)/.exec(n):So?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ai&&(rr=ai?ai[1]:""),S){var Hi=Ct();if(null!=Hi&&Hi>parseFloat(rr)){En=String(Hi);break e}}En=rr}var Xi={};var Ei=Zt.document&&S&&(Ct()||parseInt(En,10))||void 0;function Ns(n,e){if(ur.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Z){e:{try{ua(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Hs[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ns.X.h.call(this)}}mn(Ns,ur);var Hs={2:"touch",3:"pen",4:"mouse"};Ns.prototype.h=function(){Ns.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var es="closure_listenable_"+(1e6*Math.random()|0),au=0;function zo(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=a,this.key=++au,this.ba=this.ea=!1}function Wo(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Ca(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function Gs(n){const e={};for(const t in n)e[t]=n[t];return e}const oo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ua(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<oo.length;l++)t=oo[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function ao(n){this.src=n,this.g={},this.h=0}function Ao(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=ba(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Wo(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ba(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==s)return a}return-1}ao.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=Ba(n,e,s,a);return-1<p?(e=n[p],t||(e.ea=!1)):((e=new zo(e,this.src,l,!!s,a)).ea=t,n.push(e)),e};var qo="closure_lm_"+(1e6*Math.random()|0),uu={};function xu(n,e,t,s,a){if(s&&s.once)return cu(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)xu(n,e[l],t,s,a);return null}return t=Ha(t),n&&n[es]?n.N(e,t,Ji(s)?!!s.capture:!!s,a):Ta(n,e,t,!1,s,a)}function Ta(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=Ji(a)?!!a.capture:!!a,I=Un(n);if(I||(n[qo]=I=new ao(n)),(t=I.add(e,t,s,p,l)).proxy)return t;if(s=function ja(){const e=Gi;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)tn||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(ui(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function cu(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)cu(n,e[l],t,s,a);return null}return t=Ha(t),n&&n[es]?n.O(e,t,Ji(s)?!!s.capture:!!s,a):Ta(n,e,t,!0,s,a)}function $a(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)$a(n,e[l],t,s,a);else s=Ji(s)?!!s.capture:!!s,t=Ha(t),n&&n[es]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ba(l=n.g[e],t,s,a))&&(Wo(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Un(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ba(e,t,s,a)),(t=-1<n?e[n]:null)&&xo(t))}function xo(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[es])Ao(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(ui(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Un(e))?(Ao(t,n),0==t.h&&(t.src=null,e[qo]=null)):Wo(n)}}}function ui(n){return n in uu?uu[n]:uu[n]="on"+n}function Gi(n,e){if(n.ba)n=!0;else{e=new Ns(e,this);var t=n.listener,s=n.ha||n.src;n.ea&&xo(n),n=t.call(s,e)}return n}function Un(n){return(n=n[qo])instanceof ao?n:null}var la="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ha(n){return"function"==typeof n?n:(n[la]||(n[la]=function(e){return n.handleEvent(e)}),n[la])}function An(){oi.call(this),this.i=new ao(this),this.P=this,this.I=null}function Jr(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new ur(e,n);else if(e instanceof ur)e.target=e.target||n;else{var a=e;Ua(e=new ur(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=Ga(p,s,!0,e)&&a}if(a=Ga(p=e.g=n,s,!0,e)&&a,a=Ga(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Ga(p=e.g=t[l],s,!1,e)&&a}function Ga(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ba&&p.capture==t){var I=p.listener,O=p.ha||p.src;p.ea&&Ao(n.i,p),a=!1!==I.call(O,s)&&a}}return a&&!s.defaultPrevented}mn(An,oi),An.prototype[es]=!0,An.prototype.removeEventListener=function(n,e,t,s){$a(this,n,e,t,s)},An.prototype.M=function(){if(An.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)Wo(t[s]);delete n.g[e],n.h--}}this.I=null},An.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},An.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var da=Zt.JSON.stringify;function ha(){var n=Ft;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ie,T=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new V,n=>n.reset());class V{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function N(n){Zt.setTimeout(()=>{throw n},0)}function z(n,e){ie||function Ne(){var n=Zt.Promise.resolve(void 0);ie=function(){n.then(wn)}}(),Ue||(ie(),Ue=!0),Ft.add(n,e)}var Ue=!1,Ft=new class fa{constructor(){this.h=this.g=null}add(e,t){const s=T.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function wn(){for(var n;n=ha();){try{n.h.call(n.g)}catch(t){N(t)}var e=T;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ue=!1}function Bn(n,e){An.call(this),this.h=n||1,this.g=e||Zt,this.j=Dr(this.lb,this),this.l=Date.now()}function Pn(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ln(n,e,t){if("function"==typeof n)t&&(n=Dr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Dr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Zt.setTimeout(n,e||0)}function Fr(n){n.g=ln(()=>{n.g=null,n.i&&(n.i=!1,Fr(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mn(Bn,An),(Rt=Bn.prototype).ca=!1,Rt.R=null,Rt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Jr(this,"tick"),this.ca&&(Pn(this),this.start()))}},Rt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Rt.M=function(){Bn.X.M.call(this),Pn(this),delete this.g};class nn extends oi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fr(this)}M(){super.M(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(n){oi.call(this),this.h=n,this.g={}}mn(gr,oi);var zi=[];function Wi(n,e,t,s){Array.isArray(t)||(t&&(zi[0]=t.toString()),t=zi);for(var a=0;a<t.length;a++){var l=xu(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function ci(n){Ca(n.g,function(e,t){this.g.hasOwnProperty(t)&&xo(e)},n),n.g={}}function qi(){this.g=!0}function Os(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zo(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return da(t)}catch{return e}}(n,t)+(s?" "+s:"")})}gr.prototype.M=function(){gr.X.M.call(this),ci(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qi.prototype.Aa=function(){this.g=!1},qi.prototype.info=function(){};var ts={},pa=null;function Ko(){return pa=pa||new An}function uo(n){ur.call(this,ts.Pa,n)}function ga(n){const e=Ko();Jr(e,new uo(e))}function xi(n,e){ur.call(this,ts.STAT_EVENT,n),this.stat=e}function Zi(n){const e=Ko();Jr(e,new xi(e,n))}function No(n,e){ur.call(this,ts.Qa,n),this.size=e}function co(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},e)}ts.Pa="serverreachability",mn(uo,ur),ts.STAT_EVENT="statevent",mn(xi,ur),ts.Qa="timingevent",mn(No,ur);var Sa={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},za={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ma(){}function Mu(){}ma.prototype.h=null;var du,Oo={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function lu(){ur.call(this,"d")}function ns(){ur.call(this,"c")}function Po(){}function ir(n,e,t,s){this.l=n,this.j=e,this.m=t,this.U=s||1,this.S=new gr(this),this.O=Aa,this.T=new Bn(n=A?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ru}function Ru(){this.i=null,this.g="",this.h=!1}mn(lu,ur),mn(ns,ur),mn(Po,ma),Po.prototype.g=function(){return new XMLHttpRequest},Po.prototype.i=function(){return{}},du=new Po;var Aa=45e3,Mi={},zs={};function Nu(n,e,t){n.K=1,n.v=Jo(Qo(e)),n.s=t,n.P=!0,uc(n,null)}function uc(n,e){n.F=Date.now(),Yo(n),n.A=Qo(n.v);var t=n.A,s=n.U;Array.isArray(s)||(s=[String(s)]),ku(t.i,"t",s),n.C=0,t=n.l.H,n.h=new Ru,n.g=qd(n.l,t?e:null,!n.s),0<n.N&&(n.L=new nn(Dr(n.La,n,n.g),n.N)),Wi(n.S,n.g,"readystatechange",n.ib),e=n.H?Gs(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),ga(),function Mo(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var p="",I=l.split("&"),O=0;O<I.length;O++){var U=I[O].split("=");if(1<U.length){var Y=U[0];U=U[1];var ue=Y.split("_");p=2<=ue.length&&"type"==ue[1]?p+(Y+"=")+U+"&":p+(Y+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.U,n.s)}function qa(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function $c(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=hu(n,t),a==zs){4==e&&(n.o=4,Zi(14),s=!1),Os(n.j,n.m,null,"[Incomplete Response]");break}if(a==Mi){n.o=4,Zi(15),Os(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Os(n.j,n.m,a,null),xa(n,a)}qa(n)&&a!=zs&&a!=Mi&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zi(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),lf(e),e.K=!0,Zi(11))):(Os(n.j,n.m,t,"[Invalid Chunked Response]"),ms(n),Ws(n))}function hu(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?zs:(t=Number(e.substring(t,s)),isNaN(t)?Mi:(s+=1)+t>e.length?zs:(e=e.substr(s,t),n.C=s+t,e))}function Yo(n){n.V=Date.now()+n.O,rs(n,n.O)}function rs(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=co(Dr(n.gb,n),e)}function ya(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function Ws(n){0==n.l.G||n.I||gg(n.l,n)}function ms(n){ya(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Pn(n.T),ci(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xa(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||$(t.h,n)))if(!n.J&&$(t.h,n)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Gd(t),$d(t)}zc(t),Zi(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=co(Dr(t.cb,t),6e3));if(1>=k(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Lu(t,11)}else if((n.J||t.g==n)&&Gd(t),!$i(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let U=a[e];if(t.T=U[0],U=U[1],2==t.G)if("c"==U[0]){t.I=U[1],t.ka=U[2];const Y=U[3];null!=Y&&(t.ma=Y,t.j.info("VER="+t.ma));const ue=U[4];null!=ue&&(t.Ca=ue,t.j.info("SVER="+t.Ca));const De=U[5];null!=De&&"number"==typeof De&&0<De&&(t.J=s=1.5*De,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Be=n.g;if(Be){const st=Be.g?Be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(st){var l=s.h;l.g||-1==st.indexOf("spdy")&&-1==st.indexOf("quic")&&-1==st.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(K(l,l.h),l.h=null))}if(s.D){const Et=Be.g?Be.g.getResponseHeader("X-HTTP-Session-Id"):null;Et&&(s.za=Et,br(s.F,s.D,Et))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var p=n;if((s=t).sa=xl(s,s.H?s.ka:null,s.V),p.J){ve(s.h,p);var I=p,O=s.J;O&&I.setTimeout(O),I.B&&(ya(I),Yo(I)),s.g=p}else fg(s);0<t.i.length&&Al(t)}else"stop"!=U[0]&&"close"!=U[0]||Lu(t,7);else 3==t.G&&("stop"==U[0]||"close"==U[0]?"stop"==U[0]?Lu(t,7):hc(t):"noop"!=U[0]&&t.l&&t.l.wa(U),t.A=0)}ga()}catch{}}function Tl(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Yn(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Hc(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Yn(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const s in n)e[t++]=s;return e}}}(n),s=function Za(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Yn(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n),a=s.length,l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}(Rt=ir.prototype).setTimeout=function(n){this.O=n},Rt.ib=function(n){n=n.target;const e=this.L;e&&3==qs(n)?e.l():this.La(n)},Rt.La=function(n){try{if(n==this.g)e:{const Y=qs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Y)&&(3!=Y||A||this.g&&(this.h.h||this.g.fa()||Zs(this.g)))){this.I||4!=Y||7==e||ga(),ya(this);var t=this.g.aa();this.Y=t;t:if(qa(this)){var s=Zs(this.g);n="";var a=s.length,l=4==qs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ms(this),Ws(this);var p="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.fa();if(this.i=200==t,function Ro(n,e,t,s,a,l,p){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.U,Y,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var I,O=this.g;if((I=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$i(I)){var U=I;break t}}U=null}if(!(t=U)){this.i=!1,this.o=3,Zi(12),ms(this),Ws(this);break e}Os(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xa(this,t)}this.P?($c(this,Y,p),A&&this.i&&3==Y&&(Wi(this.S,this.T,"tick",this.hb),this.T.start())):(Os(this.j,this.m,p,null),xa(this,p)),4==Y&&ms(this),this.i&&!this.I&&(4==Y?gg(this.l,this):(this.i=!1,Yo(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Zi(12)):(this.o=0,Zi(13)),ms(this),Ws(this)}}}catch{}},Rt.hb=function(){if(this.g){var n=qs(this.g),e=this.g.fa();this.C<e.length&&(ya(this),$c(this,n,e),this.i&&4!=n&&Yo(this))}},Rt.cancel=function(){this.I=!0,ms(this)},Rt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Ps(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ga(),Zi(17)),ms(this),this.o=2,Ws(this)):rs(this,this.V-n)};var zn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lo(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lo){this.h=void 0!==e?e:n.h,Ka(this,n.j),this.s=n.s,this.g=n.g,Ma(this,n.m),this.l=n.l,e=n.i;var t=new Xo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fu(this,t),this.o=n.o}else n&&(t=String(n).match(zn))?(this.h=!!e,Ka(this,t[1]||"",!0),this.s=Ou(t[2]||""),this.g=Ou(t[3]||"",!0),Ma(this,t[4]),this.l=Ou(t[5]||"",!0),fu(this,t[6]||"",!0),this.o=Ou(t[7]||"")):(this.h=!!e,this.i=new Xo(null,this.h))}function Qo(n){return new lo(n)}function Ka(n,e,t){n.j=t?Ou(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ma(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fu(n,e,t){e instanceof Xo?(n.i=e,function Sl(n,e){e&&!n.j&&(ys(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(fo(this,s),ku(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=is(e,Ri)),n.i=new Xo(e,n.h))}function br(n,e,t){n.i.set(e,t)}function Jo(n){return br(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ou(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function is(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Hr),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Hr(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(is(e,Ya,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(is(e,Ya,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(is(t,"/"==t.charAt(0)?Pu:Qa,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",is(t,ho)),n.join("")};var Ya=/[#\/\?@]/g,Qa=/[#\?:]/g,Pu=/[#\?]/g,Ri=/[#\?@]/g,ho=/#/g;function Xo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ys(n){n.g||(n.g=new Map,n.h=0,n.i&&function cc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fo(n,e){ys(n),e=Ja(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function pu(n,e){return ys(n),e=Ja(n,e),n.g.has(e)}function ku(n,e,t){fo(n,e),0<t.length&&(n.i=null,n.g.set(Ja(n,e),$r(t)),n.h+=t.length)}function Ja(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function E(n){this.l=n||y,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ga&&Zt.g.Ga()&&Zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Rt=Xo.prototype).add=function(n,e){ys(this),this.i=null,n=Ja(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Rt.forEach=function(n,e){ys(this),this.g.forEach(function(t,s){t.forEach(function(a){n.call(e,a,s,this)},this)},this)},Rt.oa=function(){ys(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=n[s];for(let l=0;l<a.length;l++)t.push(e[s])}return t},Rt.W=function(n){ys(this);let e=[];if("string"==typeof n)pu(this,n)&&(e=e.concat(this.g.get(Ja(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Rt.set=function(n,e){return ys(this),this.i=null,pu(this,n=Ja(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Rt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const l=encodeURIComponent(String(s)),p=this.W(s);for(s=0;s<p.length;s++){var a=l;""!==p[s]&&(a+="="+encodeURIComponent(String(p[s]))),n.push(a)}}return this.i=n.join("&")};var y=10;function C(n){return!!n.h||!!n.g&&n.g.size>=n.j}function k(n){return n.h?1:n.g?n.g.size:0}function $(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function K(n,e){n.g?n.g.add(e):n.h=e}function ve(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ze(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return $r(n.i)}function xt(){}function Nt(){this.g=new xt}function kn(n,e,t){const s=t||"";try{Tl(n,function(a,l){let p=a;Ji(a)&&(p=da(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function vs(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function li(n){this.l=n.ac||null,this.j=n.jb||!1}function M(n,e){An.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=P,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}E.prototype.cancel=function(){if(this.i=ze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},xt.prototype.stringify=function(n){return Zt.JSON.stringify(n,void 0)},xt.prototype.parse=function(n){return Zt.JSON.parse(n,void 0)},mn(li,ma),li.prototype.g=function(){return new M(this.l,this.j)},li.prototype.i=function(n){return function(){return n}}({}),mn(M,An);var P=0;function G(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function ne(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_e(n)}function _e(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Rt=M.prototype).open=function(n,e){if(this.readyState!=P)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_e(this)},Rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Zt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ne(this)),this.readyState=P},Rt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_e(this)),this.g&&(this.readyState=3,_e(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;G(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Rt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ne(this):_e(this),3==this.readyState&&G(this)}},Rt.Va=function(n){this.g&&(this.response=this.responseText=n,ne(this))},Rt.Ua=function(n){this.g&&(this.response=n,ne(this))},Rt.ga=function(){this.g&&ne(this)},Rt.setRequestHeader=function(n,e){this.v.append(n,e)},Rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(M.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Me=Zt.JSON.parse;function Je(n){An.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Lt,this.K=this.L=!1}mn(Je,An);var Lt="",Kt=/^https?$/i,zt=["POST","PUT"];function on(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,po(n),Ra(n)}function po(n){n.D||(n.D=!0,Jr(n,"complete"),Jr(n,"error"))}function di(n){if(n.h&&typeof gs<"u"&&(!n.C[1]||4!=qs(n)||2!=n.aa()))if(n.v&&4==qs(n))ln(n.Ha,0,n);else if(Jr(n,"readystatechange"),4==qs(n)){n.h=!1;try{const I=n.aa();e:switch(I){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===I){var a=String(n.H).match(zn)[1]||null;if(!a&&Zt.self&&Zt.self.location){var l=Zt.self.location.protocol;a=l.substr(0,l.length-1)}s=!Kt.test(a?a.toLowerCase():"")}t=s}if(t)Jr(n,"complete"),Jr(n,"success");else{n.m=6;try{var p=2<qs(n)?n.g.statusText:""}catch{p=""}n.j=p+" ["+n.aa()+"]",po(n)}}finally{Ra(n)}}}function Ra(n,e){if(n.g){lc(n);const t=n.g,s=n.C[0]?Or:null;n.g=null,n.C=null,e||Jr(n,"ready");try{t.onreadystatechange=s}catch{}}}function lc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function qs(n){return n.g?n.g.readyState:0}function Zs(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Lt:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ko(n){let e="";return Ca(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Xa(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ko(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):br(n,e,t))}function dc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cf(n){this.Ca=0,this.i=[],this.j=new qi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=dc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=dc("baseRetryDelayMs",5e3,n),this.bb=dc("retryDelaySeedMs",1e4,n),this.$a=dc("forwardChannelMaxRetries",2,n),this.ta=dc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new E(n&&n.concurrentRequestLimit),this.Fa=new Nt,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function hc(n){if(Hd(n),3==n.G){var e=n.U++,t=Qo(n.F);br(t,"SID",n.I),br(t,"RID",e),br(t,"TYPE","terminate"),Fu(n,t),(e=new ir(n,n.j,e,void 0)).K=2,e.v=Jo(Qo(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon&&(t=Zt.navigator.sendBeacon(e.v.toString(),"")),!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=qd(e.l,null),e.g.da(e.v)),e.F=Date.now(),Yo(e)}Wd(n)}function $d(n){n.g&&(lf(n),n.g.cancel(),n.g=null)}function Hd(n){$d(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),Gd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function Al(n){C(n.h)||n.m||(n.m=!0,z(n.Ja,n),n.C=0)}function Gc(n,e){var t;t=e?e.m:n.U++;const s=Qo(n.F);br(s,"SID",n.I),br(s,"RID",t),br(s,"AID",n.T),Fu(n,s),n.o&&n.s&&Xa(s,n.o,n.s),t=new ir(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=hg(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),K(n.h,t),Nu(t,s,e)}function Fu(n,e){n.ia&&Ca(n.ia,function(t,s){br(e,s,t)}),n.l&&Tl({},function(t,s){br(e,s,t)})}function hg(n,e,t){t=Math.min(n.i.length,t);var s=n.l?Dr(n.l.Ra,n.l,n):null;e:{var a=n.i;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let I=!0;for(let O=0;O<t;O++){let U=a[O].h;const Y=a[O].g;if(U-=l,0>U)l=Math.max(0,a[O].h-100),I=!1;else try{kn(Y,p,"req"+U+"_")}catch{s&&s(Y)}}if(I){s=p.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,s}function fg(n){n.g||n.u||(n.Z=1,z(n.Ia,n),n.A=0)}function zc(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=co(Dr(n.Ia,n),zd(n,n.A)),n.A++,0))}function lf(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function pg(n){n.g=new ir(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Qo(n.sa);br(e,"RID","rpc"),br(e,"SID",n.I),br(e,"CI",n.L?"0":"1"),br(e,"AID",n.T),br(e,"TYPE","xmlhttp"),Fu(n,e),n.o&&n.s&&Xa(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Jo(Qo(e)),t.s=null,t.P=!0,uc(t,n)}function Gd(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function gg(n,e){var t=null;if(n.g==e){Gd(n),lf(n),n.g=null;var s=2}else{if(!$(n.h,e))return;t=e.D,ve(n.h,e),s=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Jr(s=Ko(),new No(s,t)),Al(n)}else fg(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==s&&function dg(n,e){return!(k(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=co(Dr(n.Ja,n,e),zd(n,n.C)),n.C++,0)))}(n,e)||2==s&&zc(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Lu(n,5);break;case 4:Lu(n,10);break;case 3:Lu(n,6);break;default:Lu(n,2)}}function zd(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Lu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var s=Dr(n.kb,n);t||(t=new lo("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||Ka(t,"https"),Jo(t)),function Lr(n,e){const t=new qi;if(Zt.Image){const s=new Image;s.onload=_i(vs,t,s,"TestLoadImage: loaded",!0,e),s.onerror=_i(vs,t,s,"TestLoadImage: error",!1,e),s.onabort=_i(vs,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=_i(vs,t,s,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Zi(2);n.G=0,n.l&&n.l.va(e),Wd(n),Hd(n)}function Wd(n){if(n.G=0,n.la=[],n.l){const e=ze(n.h);(0!=e.length||0!=n.i.length)&&(To(n.la,e),To(n.la,n.i),n.h.i.length=0,$r(n.i),n.i.length=0),n.l.ua()}}function xl(n,e,t){var s=t instanceof lo?Qo(t):new lo(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Ma(s,s.m);else{var a=Zt.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new lo(null,void 0);s&&Ka(l,s),e&&(l.g=e),a&&Ma(l,a),t&&(l.l=t),s=l}return e=n.za,(t=n.D)&&e&&br(s,t,e),br(s,"VER",n.ma),Fu(n,s),s}function qd(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Je(t&&n.Da&&!n.ra?new li({jb:!0}):n.ra)).Ka(n.H),e}function Zd(){}function fc(){if(S&&!(10<=Number(Ei)))throw Error("Environmental error: no available transport.")}function hi(n,e){An.call(this),this.g=new cf(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!$i(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$i(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new pc(this)}function df(n){lu.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function hf(){ns.call(this),this.status=1}function pc(n){this.g=n}(Rt=Je.prototype).Ka=function(n){this.L=n},Rt.da=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():du.g(),this.C=function Wa(n){return n.h||(n.h=n.i())}(this.u?this.u:du),this.g.onreadystatechange=Dr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void on(this,l)}if(n=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())t.set(l,s.get(l))}s=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=Zt.FormData&&n instanceof Zt.FormData,!(0<=ba(zt,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,p]of t)this.g.setRequestHeader(l,p);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lc(this),0<this.B&&((this.K=function pn(n){return S&&function Ms(){return function ca(n){var e=Xi;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=aa(String(En)).split("."),t=aa("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==n&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=$s(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||$s(0==a[2].length,0==l[2].length)||$s(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.qa,this)):this.A=ln(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){on(this,l)}},Rt.qa=function(){typeof gs<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jr(this,"timeout"),this.abort(8))},Rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Jr(this,"complete"),Jr(this,"abort"),Ra(this))},Rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ra(this,!0)),Je.X.M.call(this)},Rt.Ha=function(){this.s||(this.F||this.v||this.l?di(this):this.fb())},Rt.fb=function(){di(this)},Rt.aa=function(){try{return 2<qs(this)?this.g.status:-1}catch{return-1}},Rt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Rt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Me(e)}},Rt.Ea=function(){return this.m},Rt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Rt=cf.prototype).ma=8,Rt.G=1,Rt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new ir(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=Gs(l),Ua(l,this.S)):l=this.S),null!==this.o||this.N||(a.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=hg(this,a,e),br(t=Qo(this.F),"RID",n),br(t,"CVER",22),this.D&&br(t,"X-HTTP-Session-Id",this.D),Fu(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(ko(l)))+"&"+e:this.o&&Xa(t,this.o,l)),K(this.h,a),this.Ya&&br(t,"TYPE","init"),this.O?(br(t,"$req",e),br(t,"SID","null"),a.Z=!0,Nu(a,t,null)):Nu(a,t,e),this.G=2}}else 3==this.G&&(n?Gc(this,n):0==this.i.length||C(this.h)||Gc(this))},Rt.Ia=function(){if(this.u=null,pg(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=co(Dr(this.eb,this),n)}},Rt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zi(10),$d(this),pg(this))},Rt.cb=function(){null!=this.v&&(this.v=null,$d(this),zc(this),Zi(19))},Rt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Zi(2)):(this.j.info("Failed to ping google.com"),Zi(1))},(Rt=Zd.prototype).xa=function(){},Rt.wa=function(){},Rt.va=function(){},Rt.ua=function(){},Rt.Ra=function(){},fc.prototype.g=function(n,e){return new hi(n,e)},mn(hi,An),hi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Zi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=xl(n,null,n.V),Al(n)},hi.prototype.close=function(){hc(this.g)},hi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=da(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Al(e)},hi.prototype.M=function(){this.g.l=null,delete this.j,hc(this.g),delete this.g,hi.X.M.call(this)},mn(df,lu),mn(hf,ns),mn(pc,Zd),pc.prototype.xa=function(){Jr(this.g,"a")},pc.prototype.wa=function(n){Jr(this.g,new df(n))},pc.prototype.va=function(n){Jr(this.g,new hf)},pc.prototype.ua=function(){Jr(this.g,"b")},fc.prototype.createWebChannel=fc.prototype.g,hi.prototype.send=hi.prototype.u,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,Sa.NO_ERROR=0,Sa.TIMEOUT=8,Sa.HTTP_ERROR=6,za.COMPLETE="complete",Mu.EventType=Oo,Oo.OPEN="a",Oo.CLOSE="b",Oo.ERROR="c",Oo.MESSAGE="d",An.prototype.listen=An.prototype.N,Je.prototype.listenOnce=Je.prototype.O,Je.prototype.getLastError=Je.prototype.Oa,Je.prototype.getLastErrorCode=Je.prototype.Ea,Je.prototype.getStatus=Je.prototype.aa,Je.prototype.getResponseJson=Je.prototype.Sa,Je.prototype.getResponseText=Je.prototype.fa,Je.prototype.send=Je.prototype.da,Je.prototype.setWithCredentials=Je.prototype.Ka;var Ml=Br.createWebChannelTransport=function(){return new fc},Kd=Br.getStatEventTarget=function(){return Ko()},Wc=Br.ErrorCode=Sa,mg=Br.EventType=za,ff=Br.Event=ts,Yd=Br.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Qd=Br.FetchXmlHttpFactory=li,Rl=Br.WebChannel=Mu,Ks=Br.XhrIo=Je;const qc="@firebase/firestore";class Ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");let gu="9.18.0";const Xr=new Tn.Yd("@firebase/firestore");function Vu(){return Xr.logLevel}function dt(n,...e){if(Xr.logLevel<=Tn.in.DEBUG){const t=e.map(w);Xr.debug(`Firestore (${gu}): ${n}`,...t)}}function wi(n,...e){if(Xr.logLevel<=Tn.in.ERROR){const t=e.map(w);Xr.error(`Firestore (${gu}): ${n}`,...t)}}function Uu(n,...e){if(Xr.logLevel<=Tn.in.WARN){const t=e.map(w);Xr.warn(`Firestore (${gu}): ${n}`,...t)}}function w(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function d(n="Unexpected state"){const e=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: `+n;throw wi(e),new Error(e)}function f(n,e){n||d()}function L(n,e){return n}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends At.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ye{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class xn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Gr{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=U=>this.i!==a?(a=this.i,t(U)):Promise.resolve();let p=new Ye;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Ye,e.enqueueRetryable(()=>l(this.currentUser))};const I=()=>{const U=p;e.enqueueRetryable((0,Ee.Z)(function*(){yield U.promise,yield l(s.currentUser)}))},O=U=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=U,this.auth.addAuthTokenListener(this.o),I()};this.t.onInit(U=>O(U)),setTimeout(()=>{if(!this.auth){const U=this.t.getImmediate({optional:!0});U?O(U):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Ye)}},0),I()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(f("string"==typeof s.accessToken),new kt(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return f(null===e||"string"==typeof e),new Ki(e)}}class ea{constructor(e,t,s,a){this.h=e,this.l=t,this.m=s,this.g=a,this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(f(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Na{constructor(e,t,s,a){this.h=e,this.l=t,this.m=s,this.g=a}getToken(){return Promise.resolve(new ea(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=l=>{null!=l.error&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.A;return this.A=l.token,dt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.T.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.T.getImmediate({optional:!0});l?a(l):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(f("string"==typeof t.token),this.A=t.token,new gc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jd(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class Xd{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Jd(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function un(n,e){return n<e?-1:n>e?1:0}function ju(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function eh(n){return n+"\0"}class Ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Ar(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Jt(e)}static min(){return new Jt(new Ar(0,0))}static max(){return new Jt(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zc{constructor(e,t,s){void 0===t?t=0:t>e.length&&d(),void 0===s?s=e.length-t:s>e.length-t&&d(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Zc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zc?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Hn extends Zc{construct(e,t,s){return new Hn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new te(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Hn(t)}static emptyPath(){return new Hn([])}}const gf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends Zc{construct(e,t,s){return new fi(e,t,s)}static isValidIdentifier(e){return gf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fi(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new te(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const I=e[a];if("\\"===I){if(a+1===e.length)throw new te(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const O=e[a+1];if("\\"!==O&&"."!==O&&"`"!==O)throw new te(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=O,a+=2}else"`"===I?(p=!p,a++):"."!==I||p?(s+=I,a++):(l(),a++)}if(l(),p)throw new te(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fi(t)}static emptyPath(){return new fi([])}}class St{constructor(e){this.path=e}static fromPath(e){return new St(Hn.fromString(e))}static fromName(e){return new St(Hn.fromString(e).popFirst(5))}static empty(){return new St(Hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new St(new Hn(e.slice()))}}class Ol{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function yg(n){return n.fields.find(e=>2===e.kind)}function Kc(n){return n.fields.filter(e=>2!==e.kind)}Ol.UNKNOWN_ID=-1;class th{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pl(0,Oa.min())}}function vg(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Jt.fromTimestamp(1e9===s?new Ar(t+1,0):new Ar(t,s));return new Oa(a,St.empty(),e)}function Fy(n){return new Oa(n.readTime,n.key,-1)}class Oa{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Oa(Jt.min(),St.empty(),-1)}static max(){return new Oa(Jt.max(),St.empty(),-1)}}function kl(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=St.comparator(n.documentKey,e.documentKey),0!==t?t:un(n.largestBatchId,e.largestBatchId))}const Ly="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _g{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function $u(n){return mf.apply(this,arguments)}function mf(){return mf=(0,Ee.Z)(function*(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==Ly)throw n;dt("LocalStore","Unexpectedly lost primary lease")}),mf.apply(this,arguments)}class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&d(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Oe((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Oe?t:Oe.resolve(t)}catch(t){return Oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Oe.reject(t)}static resolve(e){return new Oe((t,s)=>{t(e)})}static reject(e){return new Oe((t,s)=>{s(e)})}static waitFor(e){return new Oe((t,s)=>{let a=0,l=0,p=!1;e.forEach(I=>{++a,I.next(()=>{++l,p&&l===a&&t()},O=>s(O))}),p=!0,l===a&&t()})}static or(e){let t=Oe.resolve(!1);for(const s of e)t=t.next(a=>a?Oe.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new Oe((s,a)=>{const l=e.length,p=new Array(l);let I=0;for(let O=0;O<l;O++){const U=O;t(e[U]).next(Y=>{p[U]=Y,++I,I===l&&s(p)},Y=>a(Y))}})}static doWhile(e,t){return new Oe((s,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):s()};l()})}}class nh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ye,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Fl(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const a=wg(s.target.error);this.P.reject(new Fl(e,a))}}static open(e,t,s,a){try{return new nh(t,e.transaction(a,s))}catch(l){throw new Fl(t,l)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(dt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Eg(t)}}class ta{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===ta.D((0,At.z$)())&&wi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dt("SimpleDb","Removing database:",e),Hu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,At.hl)())return!1;if(ta.N())return!0;const e=(0,At.z$)(),t=ta.D(e),s=0<t&&t<10,a=ta.k(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(dt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new Fl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const I=p.target.error;a("VersionError"===I.name?new te(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===I.name?new te(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+I):new Fl(e,I))},l.onupgradeneeded=p=>{dt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.S.F(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{dt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,Ee.Z)(function*(){const p="readonly"===t;let I=0;for(;;){++I;try{l.db=yield l.O(e);const O=nh.open(l.db,e,p?"readonly":"readwrite",s),U=a(O).next(Y=>(O.V(),Y)).catch(Y=>(O.abort(Y),Oe.reject(Y))).toPromise();return U.catch(()=>{}),yield O.v,U}catch(O){const U=O,Y="FirebaseError"!==U.name&&I<3;if(dt("SimpleDb","Transaction failed with error:",U.message,"Retrying:",Y),l.close(),!Y)return Promise.reject(U)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class yf{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Hu(this.q.delete())}}class Fl extends te{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mu(n){return"IndexedDbTransactionError"===n.name}class Eg{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(dt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(dt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Hu(s)}add(e){return dt("SimpleDb","ADD",this.store.name,e,e),Hu(this.store.add(e))}get(e){return Hu(this.store.get(e)).next(t=>(void 0===t&&(t=null),dt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return dt("SimpleDb","DELETE",this.store.name,e),Hu(this.store.delete(e))}count(){return dt("SimpleDb","COUNT",this.store.name),Hu(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),l=[];return this.H(a,(p,I)=>{l.push(I)}).next(()=>l)}{const a=this.store.getAll(s.range);return new Oe((l,p)=>{a.onerror=I=>{p(I.target.error)},a.onsuccess=I=>{l(I.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Oe((a,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}Y(e,t){dt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Z=!1;const a=this.cursor(s);return this.H(a,(l,p,I)=>I.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.H(a,t)}tt(e){const t=this.cursor({});return new Oe((s,a)=>{t.onerror=l=>{const p=wg(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(I=>{I?p.continue():s()}):s()}})}H(e,t){const s=[];return new Oe((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const I=p.target.result;if(!I)return void a();const O=new yf(I),U=t(I.primaryKey,I.value,O);if(U instanceof Oe){const Y=U.catch(ue=>(O.done(),Oe.reject(ue)));s.push(Y)}O.isDone?a():null===O.G?I.continue():I.continue(O.G)}}).next(()=>Oe.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Z?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hu(n){return new Oe((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=wg(s.target.error);t(a)}})}let Ll=!1;function wg(n){const e=ta.D((0,At.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ll||(Ll=!0,setTimeout(()=>{throw s},0)),s}}return n}class Vy{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;dt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{dt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){mu(s)?dt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield $u(s)}yield t.nt(6e4)}))}}class j0{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let a=t,l=!0;return Oe.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return dt("IndexBackiller",`Processing collection: ${p}`),this.rt(e,p,a).next(I=>{a-=I,s.add(p)});l=!1})).next(()=>t-a)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.ot(a,l)).next(I=>(dt("IndexBackiller",`Updating offset: ${I}`),this.localStore.indexManager.updateCollectionGroup(e,t,I))).next(()=>p.size)}))}ot(e,t){let s=e;return t.changes.forEach((a,l)=>{const p=Fy(l);kl(p,s)>0&&(s=p)}),new Oa(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let va=(()=>{class n{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>s.writeSequenceNumber(a))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class _f{constructor(e,t,s,a,l,p,I,O){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=I,this.useFetchStreams=O}}class yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}function mc(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function By(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ef(n){return null==n}function rh(n){return 0===n&&1/n==-1/0}function wf(n){return"number"==typeof n&&Number.isInteger(n)&&!rh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class H0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw a instanceof DOMException?new H0("Invalid base64 string: "+a):a}}(e);return new Ni(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const Ig=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gu(n){if(f(!!n),"string"==typeof n){let e=0;const t=Ig.exec(n);if(f(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ii(n.seconds),nanos:Ii(n.nanos)}}function Ii(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yc(n){return"string"==typeof n?Ni.fromBase64String(n):Ni.fromUint8Array(n)}function If(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $y(n){const e=n.mapValue.fields.__previous_value__;return If(e)?$y(e):e}function ih(n){const e=Gu(n.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}const vc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Df={nullValue:"NULL_VALUE"};function Jc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?If(n)?4:Cf(n)?9007199254740991:10:d()}function Ys(n,e){if(n===e)return!0;const t=Jc(n);if(t!==Jc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ih(n).isEqual(ih(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Gu(s.timestampValue),p=Gu(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,yc(n.bytesValue).isEqual(yc(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Ii(s.geoPointValue.latitude)===Ii(a.geoPointValue.latitude)&&Ii(s.geoPointValue.longitude)===Ii(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ii(s.integerValue)===Ii(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ii(s.doubleValue),p=Ii(a.doubleValue);return l===p?rh(l)===rh(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return ju(n.arrayValue.values||[],e.arrayValue.values||[],Ys);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(mc(l)!==mc(p))return!1;for(const I in l)if(l.hasOwnProperty(I)&&(void 0===p[I]||!Ys(l[I],p[I])))return!1;return!0}(n,e);default:return d()}var a}function zu(n,e){return void 0!==(n.values||[]).find(t=>Ys(t,e))}function _c(n,e){if(n===e)return 0;const t=Jc(n),s=Jc(e);if(t!==s)return un(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return un(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=Ii(a.integerValue||a.doubleValue),I=Ii(l.integerValue||l.doubleValue);return p<I?-1:p>I?1:p===I?0:isNaN(p)?isNaN(I)?0:-1:1}(n,e);case 3:return G0(n.timestampValue,e.timestampValue);case 4:return G0(ih(n),ih(e));case 5:return un(n.stringValue,e.stringValue);case 6:return function(a,l){const p=yc(a),I=yc(l);return p.compareTo(I)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),I=l.split("/");for(let O=0;O<p.length&&O<I.length;O++){const U=un(p[O],I[O]);if(0!==U)return U}return un(p.length,I.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=un(Ii(a.latitude),Ii(l.latitude));return 0!==p?p:un(Ii(a.longitude),Ii(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],I=l.values||[];for(let O=0;O<p.length&&O<I.length;++O){const U=_c(p[O],I[O]);if(U)return U}return un(p.length,I.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===vc.mapValue&&l===vc.mapValue)return 0;if(a===vc.mapValue)return 1;if(l===vc.mapValue)return-1;const p=a.fields||{},I=Object.keys(p),O=l.fields||{},U=Object.keys(O);I.sort(),U.sort();for(let Y=0;Y<I.length&&Y<U.length;++Y){const ue=un(I[Y],U[Y]);if(0!==ue)return ue;const De=_c(p[I[Y]],O[U[Y]]);if(0!==De)return De}return un(I.length,U.length)}(n.mapValue,e.mapValue);default:throw d()}}function G0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return un(n,e);const t=Gu(n),s=Gu(e),a=un(t.seconds,s.seconds);return 0!==a?a:un(t.nanos,s.nanos)}function sh(n){return Hy(n)}function Hy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=Gu(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yc(n.bytesValue).toBase64():"referenceValue"in n?St.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=Hy(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const I of a)p?p=!1:l+=",",l+=`${I}:${Hy(s.fields[I])}`;return l+"}"}(n.mapValue):d();var e}function Vl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gy(n){return!!n&&"integerValue"in n}function Ul(n){return!!n&&"arrayValue"in n}function zy(n){return!!n&&"nullValue"in n}function Wy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bf(n){return!!n&&"mapValue"in n}function oh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qc(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=oh(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Cf(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Wu(n){return"nullValue"in n?Df:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vl(yu.empty(),St.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:d()}function ah(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vl(yu.empty(),St.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vc:d()}function Dg(n,e){const t=_c(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bg(n,e){const t=_c(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qu{constructor(e,t){this.position=e,this.inclusive=t}}function z0(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(s=l.field.isKeyField()?St.comparator(St.fromName(p.referenceValue),t.key):_c(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function W0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ys(n.position[t],e.position[t]))return!1;return!0}class q0{}class Gn extends q0{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Sf(e,t,s):"array-contains"===t?new ss(e,s):"in"===t?new Ag(e,s):"not-in"===t?new K0(e,s):"array-contains-any"===t?new xg(e,s):new Gn(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Z0(e,s):new Sg(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(_c(t,this.value)):null!==t&&Jc(this.value)===Jc(t)&&this.matchesComparison(_c(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return d()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mr extends q0{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new mr(e,t)}matches(e){return uh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function uh(n){return"and"===n.op}function qy(n){return"or"===n.op}function Tf(n){return Zy(n)&&uh(n)}function Zy(n){for(const e of n.filters)if(e instanceof mr)return!1;return!0}function Cg(n){if(n instanceof Gn)return n.field.canonicalString()+n.op.toString()+sh(n.value);if(Tf(n))return n.filters.map(e=>Cg(e)).join(",");{const e=n.filters.map(t=>Cg(t)).join(",");return`${n.op}(${e})`}}function Ky(n,e){return n instanceof Gn?(t=n,(s=e)instanceof Gn&&t.op===s.op&&t.field.isEqual(s.field)&&Ys(t.value,s.value)):n instanceof mr?function(t,s){return s instanceof mr&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,l,p)=>a&&Ky(l,s.filters[p]),!0)}(n,e):void d();var t,s}function Yy(n,e){const t=n.filters.concat(e);return mr.create(t,n.op)}function Tg(n){return n instanceof Gn?`${(e=n).field.canonicalString()} ${e.op} ${sh(e.value)}`:n instanceof mr?function(e){return e.op.toString()+" {"+e.getFilters().map(Tg).join(" ,")+"}"}(n):"Filter";var e}class Sf extends Gn{constructor(e,t,s){super(e,t,s),this.key=St.fromName(s.referenceValue)}matches(e){const t=St.comparator(e.key,this.key);return this.matchesComparison(t)}}class Z0 extends Gn{constructor(e,t){super(e,"in",t),this.keys=Qy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sg extends Gn{constructor(e,t){super(e,"not-in",t),this.keys=Qy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Qy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>St.fromName(s.referenceValue))}class ss extends Gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ul(t)&&zu(t.arrayValue,this.value)}}class Ag extends Gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zu(this.value.arrayValue,t)}}class K0 extends Gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zu(this.value.arrayValue,t)}}class xg extends Gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ul(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>zu(this.value.arrayValue,s))}}class Xc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Oi{constructor(e,t){this.comparator=e,this.root=t||Qs.EMPTY}insert(e,t){return new Oi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qs.BLACK,null,null))}remove(e){return new Oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Af(this.root,e,this.comparator,!1)}getReverseIterator(){return new Af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Af(this.root,e,this.comparator,!0)}}class Af{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qs{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Qs.RED,this.left=a??Qs.EMPTY,this.right=l??Qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Qs(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Qs.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw d();const e=this.left.check();if(e!==this.right.check())throw d();return e+(this.isRed()?0:1)}}Qs.EMPTY=null,Qs.RED=!0,Qs.BLACK=!1,Qs.EMPTY=new class{constructor(){this.size=0}get key(){throw d()}get value(){throw d()}get color(){throw d()}get left(){throw d()}get right(){throw d()}copy(n,e,t,s,a){return this}insert(n,e,t){return new Qs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cr{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q0(this.data.getIterator())}getIteratorFrom(e){return new Q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cr(this.comparator);return t.data=e,t}}class Q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ch(n){return n.hasNext()?n.getNext():void 0}class ks{constructor(e){this.fields=e,e.sort(fi.comparator)}static empty(){return new ks([])}unionWith(e){let t=new Cr(fi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ks(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ju(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class os{constructor(e){this.value=e}static empty(){return new os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!bf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oh(t)}setAll(e){let t=fi.emptyPath(),s={},a=[];e.forEach((p,I)=>{if(!t.isImmediateParentOf(I)){const O=this.getFieldsMap(t);this.applyChanges(O,s,a),s={},a=[],t=I.popLast()}p?s[I.lastSegment()]=oh(p):a.push(I.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());bf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ys(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];bf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Qc(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new os(oh(this.value))}}function Mg(n){const e=[];return Qc(n.fields,(t,s)=>{const a=new fi([t]);if(bf(s)){const l=Mg(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new ks(e)}class zr{constructor(e,t,s,a,l,p,I){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=p,this.documentState=I}static newInvalidDocument(e){return new zr(e,0,Jt.min(),Jt.min(),Jt.min(),os.empty(),0)}static newFoundDocument(e,t,s,a){return new zr(e,1,t,Jt.min(),s,a,0)}static newNoDocument(e,t){return new zr(e,2,t,Jt.min(),Jt.min(),os.empty(),0)}static newUnknownDocument(e,t){return new zr(e,3,t,Jt.min(),Jt.min(),os.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jy{constructor(e,t=null,s=[],a=[],l=null,p=null,I=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=I,this._t=null}}function Xy(n,e=null,t=[],s=[],a=null,l=null,p=null){return new Jy(n,e,t,s,a,l,p)}function el(n){const e=L(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Cg(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>sh(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>sh(s)).join(",")),e._t=t}return e._t}function Bl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y0(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ky(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!W0(n.startAt,e.startAt)&&W0(n.endAt,e.endAt)}function lh(n){return St.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jl(n,e){return n.filters.filter(t=>t instanceof Gn&&t.field.isEqual(e))}function J0(n,e,t){let s=Df,a=!0;for(const l of jl(n,e)){let p=Df,I=!0;switch(l.op){case"<":case"<=":p=Wu(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,I=!1;break;case"!=":case"not-in":p=Df}Dg({value:s,inclusive:a},{value:p,inclusive:I})<0&&(s=p,a=I)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];Dg({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function xf(n,e,t){let s=vc,a=!0;for(const l of jl(n,e)){let p=vc,I=!0;switch(l.op){case">=":case">":p=ah(l.value),I=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,I=!1;break;case"!=":case"not-in":p=vc}bg({value:s,inclusive:a},{value:p,inclusive:I})>0&&(s=p,a=I)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];bg({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class Zu{constructor(e,t=null,s=[],a=[],l=null,p="F",I=null,O=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=I,this.endAt=O,this.wt=null,this.gt=null}}function Mf(n,e,t,s,a,l,p,I){return new Zu(n,e,t,s,a,l,p,I)}function tl(n){return new Zu(n)}function Rg(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ku(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Rf(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function dh(n){return null!==n.collectionGroup}function vu(n){const e=L(n);if(null===e.wt){e.wt=[];const t=Rf(e),s=Ku(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Xc(t)),e.wt.push(new Xc(fi.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Xc(fi.keyField(),l))}}}return e.wt}function Fo(n){const e=L(n);if(!e.gt)if("F"===e.limitType)e.gt=Xy(e.path,e.collectionGroup,vu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of vu(e))t.push(new Xc(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new qu(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new qu(e.startAt.position,e.startAt.inclusive):null;e.gt=Xy(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.gt}function hh(n,e){e.getFirstInequalityField(),Rf(n);const t=n.filters.concat([e]);return new Zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function nl(n,e,t){return new Zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eu(n,e){return Bl(Fo(n),Fo(e))&&n.limitType===e.limitType}function Ng(n){return`${el(Fo(n))}|lt:${n.limitType}`}function fh(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Tg(s)).join(", ")}]`),Ef(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>sh(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>sh(s)).join(",")),`Target(${t})`}(Fo(n))}; limitType=${n.limitType})`}function ph(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):St.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of vu(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!function(a,l,p){const I=z0(a,l,p);return a.inclusive?I<=0:I<0}(t.startAt,vu(t),s)||t.endAt&&!function(a,l,p){const I=z0(a,l,p);return a.inclusive?I>=0:I>0}(t.endAt,vu(t),s)));var t,s}function ev(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Og(n){return(e,t)=>{let s=!1;for(const a of vu(n)){const l=$l(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function $l(n,e,t){const s=n.field.isKeyField()?St.comparator(e.key,t.key):function(a,l,p){const I=l.data.field(a),O=p.data.field(a);return null!==I&&null!==O?_c(I,O):d()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return d()}}function tv(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(e)?"-0":e}}function nv(n){return{integerValue:""+n}}function rv(n,e){return wf(e)?nv(e):tv(n,e)}class Hl{constructor(){this._=void 0}}function X0(n,e,t){return n instanceof rl?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof Gl?ov(n,e):n instanceof tu?av(n,e):function(s,a){const l=sv(s,a),p=zl(l)+zl(s.It);return Gy(l)&&Gy(s.It)?nv(p):tv(s.Tt,p)}(n,e)}function iv(n,e,t){return n instanceof Gl?ov(n,e):n instanceof tu?av(n,e):t}function sv(n,e){return n instanceof nu?Gy(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class rl extends Hl{}class Gl extends Hl{constructor(e){super(),this.elements=e}}function ov(n,e){const t=uv(e);for(const s of n.elements)t.some(a=>Ys(a,s))||t.push(s);return{arrayValue:{values:t}}}class tu extends Hl{constructor(e){super(),this.elements=e}}function av(n,e){let t=uv(e);for(const s of n.elements)t=t.filter(a=>!Ys(a,s));return{arrayValue:{values:t}}}class nu extends Hl{constructor(e,t){super(),this.Tt=e,this.It=t}}function zl(n){return Ii(n.integerValue||n.doubleValue)}function uv(n){return Ul(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wl{constructor(e,t){this.field=e,this.transform=t}}class tE{constructor(e,t){this.version=e,this.transformResults=t}}class pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pi}static exists(e){return new pi(void 0,e)}static updateTime(e){return new pi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mh{}function Nf(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kl(n.key,pi.none()):new Zl(n.key,n.data,pi.none());{const t=n.data,s=os.empty();let a=new Cr(fi.comparator);for(let l of e.fields)if(!a.has(l)){let p=t.field(l);null===p&&l.length>1&&(l=l.popLast(),p=t.field(l)),null===p?s.delete(l):s.set(l,p),a=a.add(l)}return new Yu(n.key,s,new ks(a.toArray()),pi.none())}}function Pg(n,e,t){n instanceof Zl?function(s,a,l){const p=s.value.clone(),I=lv(s.fieldTransforms,a,l.transformResults);p.setAll(I),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Yu?function(s,a,l){if(!gh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=lv(s.fieldTransforms,a,l.transformResults),I=a.data;I.setAll(cv(s)),I.setAll(p),a.convertToFoundDocument(l.version,I).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yh(n,e,t,s){return n instanceof Zl?function(a,l,p,I){if(!gh(a.precondition,l))return p;const O=a.value.clone(),U=Fg(a.fieldTransforms,I,l);return O.setAll(U),l.convertToFoundDocument(l.version,O).setHasLocalMutations(),null}(n,e,t,s):n instanceof Yu?function(a,l,p,I){if(!gh(a.precondition,l))return p;const O=Fg(a.fieldTransforms,I,l),U=l.data;return U.setAll(cv(a)),U.setAll(O),l.convertToFoundDocument(l.version,U).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(Y=>Y.field))}(n,e,t,s):(p=t,gh(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function kg(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=sv(s.transform,a||null);null!=l&&(null===t&&(t=os.empty()),t.set(s.field,l))}return t||null}function ql(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&ju(t,s,(a,l)=>function eE(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof Gl&&s instanceof Gl||t instanceof tu&&s instanceof tu?ju(t.elements,s.elements,Ys):t instanceof nu&&s instanceof nu?Ys(t.It,s.It):t instanceof rl&&s instanceof rl);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}class Zl extends mh{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Yu extends mh{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function lv(n,e,t){const s=new Map;f(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,I=e.data.field(l.field);s.set(l.field,iv(p,I,t[a]))}return s}function Fg(n,e,t){const s=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);s.set(a.field,X0(l,p,e))}return s}class Kl extends mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lg extends mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yl{constructor(e){this.count=e}}var xr,sr;function dv(n){switch(n){default:return d();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function nE(n){if(void 0===n)return wi("GRPC error has no .code"),B.UNKNOWN;switch(n){case xr.OK:return B.OK;case xr.CANCELLED:return B.CANCELLED;case xr.UNKNOWN:return B.UNKNOWN;case xr.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case xr.INTERNAL:return B.INTERNAL;case xr.UNAVAILABLE:return B.UNAVAILABLE;case xr.UNAUTHENTICATED:return B.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case xr.NOT_FOUND:return B.NOT_FOUND;case xr.ALREADY_EXISTS:return B.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return B.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case xr.ABORTED:return B.ABORTED;case xr.OUT_OF_RANGE:return B.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return B.UNIMPLEMENTED;case xr.DATA_LOSS:return B.DATA_LOSS;default:return d()}}(sr=xr||(xr={}))[sr.OK=0]="OK",sr[sr.CANCELLED=1]="CANCELLED",sr[sr.UNKNOWN=2]="UNKNOWN",sr[sr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sr[sr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sr[sr.NOT_FOUND=5]="NOT_FOUND",sr[sr.ALREADY_EXISTS=6]="ALREADY_EXISTS",sr[sr.PERMISSION_DENIED=7]="PERMISSION_DENIED",sr[sr.UNAUTHENTICATED=16]="UNAUTHENTICATED",sr[sr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sr[sr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sr[sr.ABORTED=10]="ABORTED",sr[sr.OUT_OF_RANGE=11]="OUT_OF_RANGE",sr[sr.UNIMPLEMENTED=12]="UNIMPLEMENTED",sr[sr.INTERNAL=13]="INTERNAL",sr[sr.UNAVAILABLE=14]="UNAVAILABLE",sr[sr.DATA_LOSS=15]="DATA_LOSS";class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Qc(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return By(this.inner)}size(){return this.innerSize}}const hv=new Oi(St.comparator);function _a(){return hv}const Vg=new Oi(St.comparator);function Ql(...n){let e=Vg;for(const t of n)e=e.insert(t.key,t);return e}function fv(n){let e=Vg;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ru(){return vh()}function pv(){return vh()}function vh(){return new il(n=>n.toString(),(n,e)=>n.isEqual(e))}const iu=new Oi(St.comparator),rE=new Cr(St.comparator);function In(...n){let e=rE;for(const t of n)e=e.add(t);return e}const iE=new Cr(un);function Of(){return iE}class _h{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Eh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new _h(Jt.min(),a,Of(),_a(),In())}}class Eh{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Eh(s,t,In(),In(),In())}}class wh{constructor(e,t,s,a){this.Et=e,this.removedTargetIds=t,this.key=s,this.At=a}}class gv{constructor(e,t){this.targetId=e,this.Rt=t}}class mv{constructor(e,t,s=Ni.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class yv{constructor(){this.Pt=0,this.vt=Bg(),this.bt=Ni.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=In(),t=In(),s=In();return this.vt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:d()}}),new Eh(this.bt,this.Vt,e,t,s)}kt(){this.St=!1,this.vt=Bg()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class yn{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=_a(),this.Kt=Ug(),this.Gt=new Cr(un)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const s=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&s.xt(e.resumeToken);break;case 1:s.Ft(),s.Dt||s.kt(),s.xt(e.resumeToken);break;case 2:s.Ft(),s.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(s.Bt(),s.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),s.xt(e.resumeToken));break;default:d()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((s,a)=>{this.Jt(a)&&t(a)})}Zt(e){const t=e.targetId,s=e.Rt.count,a=this.Xt(t);if(a){const l=a.target;if(lh(l))if(0===s){const p=new St(l.path);this.zt(t,p,zr.newNoDocument(p,Jt.min()))}else f(1===s);else this.te(t)!==s&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((l,p)=>{const I=this.Xt(p);if(I){if(l.current&&lh(I.target)){const O=new St(I.target.path);null!==this.Ut.get(O)||this.ne(p,O)||this.zt(p,O,zr.newNoDocument(O,e))}l.Ct&&(t.set(p,l.Nt()),l.kt())}});let s=In();this.Kt.forEach((l,p)=>{let I=!0;p.forEachWhile(O=>{const U=this.Xt(O);return!U||2===U.purpose||(I=!1,!1)}),I&&(s=s.add(l))}),this.Ut.forEach((l,p)=>p.setReadTime(e));const a=new _h(e,t,this.Gt,this.Ut,s);return this.Ut=_a(),this.Kt=Ug(),this.Gt=new Cr(un),a}jt(e,t){if(!this.Jt(e))return;const s=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,s),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,s){if(!this.Jt(e))return;const a=this.Ht(e);this.ne(e,t)?a.$t(t,1):a.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),s&&(this.Ut=this.Ut.insert(t,s))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new yv,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Cr(un),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||dt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new yv),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function Ug(){return new Oi(St.comparator)}function Bg(){return new Oi(St.comparator)}const vv={asc:"ASCENDING",desc:"DESCENDING"},sE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oE={and:"AND",or:"OR"};class _v{constructor(e,t){this.databaseId=e,this.yt=t}}function Jl(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jg(n,e){return n.yt?e.toBase64():e.toUint8Array()}function aE(n,e){return Jl(n,e.toTimestamp())}function Yi(n){return f(!!n),Jt.fromTimestamp(function(e){const t=Gu(e);return new Ar(t.seconds,t.nanos)}(n))}function Ev(n,e){return(t=n,new Hn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $g(n){const e=Hn.fromString(n);return f(Sv(e)),e}function Xl(n,e){return Ev(n.databaseId,e.path)}function go(n,e){const t=$g(e);if(t.get(1)!==n.databaseId.projectId)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new St(wv(t))}function Hg(n,e){return Ev(n.databaseId,e)}function Pf(n){const e=$g(n);return 4===e.length?Hn.emptyPath():wv(e)}function sl(n){return new Hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wv(n){return f(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function uE(n,e,t){return{name:Xl(n,e),fields:t.value.mapValue.fields}}function cE(n,e,t){const s=go(n,e.name),a=Yi(e.updateTime),l=e.createTime?Yi(e.createTime):Jt.min(),p=new os({mapValue:{fields:e.fields}}),I=zr.newFoundDocument(s,a,l,p);return t&&I.setHasCommittedMutations(),t?I.setHasCommittedMutations():I}function ed(n,e){let t;if(e instanceof Zl)t={update:uE(n,e.key,e.value)};else if(e instanceof Kl)t={delete:Xl(n,e.key)};else if(e instanceof Yu)t={update:uE(n,e.key,e.data),updateMask:Tv(e.fieldMask)};else{if(!(e instanceof Lg))return d();t={verify:Xl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof rl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Gl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof tu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof nu)return{fieldPath:l.field.canonicalString(),increment:p.It};throw d()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:aE(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:d()),t;var a}function Iv(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?pi.updateTime(Yi(a.updateTime)):void 0!==a.exists?pi.exists(a.exists):pi.none():pi.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let I=null;"setToServerValue"in p?(f("REQUEST_TIME"===p.setToServerValue),I=new rl):"appendMissingElements"in p?I=new Gl(p.appendMissingElements.values||[]):"removeAllFromArray"in p?I=new tu(p.removeAllFromArray.values||[]):"increment"in p?I=new nu(l,p.increment):d();const O=fi.fromServerFormat(p.fieldPath);return new Wl(O,I)}(n,a)):[];var a;if(e.update){const a=go(n,e.update.name),l=new os({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new ks((e.updateMask.fieldPaths||[]).map(U=>fi.fromServerFormat(U)));return new Yu(a,l,p,t,s)}return new Zl(a,l,t,s)}if(e.delete){const a=go(n,e.delete);return new Kl(a,t)}if(e.verify){const a=go(n,e.verify);return new Lg(a,t)}return d()}function ol(n,e){return{documents:[Hg(n,e.path)]}}function Gg(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Hg(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Hg(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(O){if(0!==O.length)return Cv(mr.create(O,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(O){if(0!==O.length)return O.map(U=>{return{field:Ec((Y=U).field),direction:bv(Y.dir)};var Y})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(U=e.limit,n.yt||Ef(U)?U:{value:U});var U,I,O;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(I=e.startAt).inclusive,values:I.position}),e.endAt&&(t.structuredQuery.endAt={before:!(O=e.endAt).inclusive,values:O.position}),t}function zg(n){let e=Pf(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){f(1===s);const Y=t.from[0];Y.allDescendants?a=Y.collectionId:e=e.child(Y.collectionId)}let l=[];t.where&&(l=function(Y){const ue=Dv(Y);return ue instanceof mr&&Tf(ue)?ue.getFilters():[ue]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(Y=>{return new Xc(td((ue=Y).field),function(De){switch(De){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ue.direction));var ue}));let I=null;t.limit&&(I=function(Y){let ue;return ue="object"==typeof Y?Y.value:Y,Ef(ue)?null:ue}(t.limit));let O=null;var Y;t.startAt&&(O=new qu((Y=t.startAt).values||[],!!Y.before));let U=null;return t.endAt&&(U=function(Y){return new qu(Y.values||[],!Y.before)}(t.endAt)),Mf(e,a,p,l,I,"F",O,U)}function Dv(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=td(e.unaryFilter.field);return Gn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=td(e.unaryFilter.field);return Gn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=td(e.unaryFilter.field);return Gn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=td(e.unaryFilter.field);return Gn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return d()}}(n):void 0!==n.fieldFilter?Gn.create(td((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return d()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return mr.create(e.compositeFilter.filters.map(t=>Dv(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return d()}}(e.compositeFilter.op))}(n):d();var e}function bv(n){return vv[n]}function hE(n){return sE[n]}function fE(n){return oE[n]}function Ec(n){return{fieldPath:n.canonicalString()}}function td(n){return fi.fromServerFormat(n.fieldPath)}function Cv(n){return n instanceof Gn?function(e){if("=="===e.op){if(Wy(e.value))return{unaryFilter:{field:Ec(e.field),op:"IS_NAN"}};if(zy(e.value))return{unaryFilter:{field:Ec(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wy(e.value))return{unaryFilter:{field:Ec(e.field),op:"IS_NOT_NAN"}};if(zy(e.value))return{unaryFilter:{field:Ec(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ec(e.field),op:hE(e.op),value:e.value}}}(n):n instanceof mr?function(e){const t=e.getFilters().map(s=>Cv(s));return 1===t.length?t[0]:{compositeFilter:{op:fE(e.op),filters:t}}}(n):d()}function Tv(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Sv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function mo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ff(e)),e=Av(n.get(t),e);return Ff(e)}function Av(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Ff(n){return n+"\x01\x01"}function Qu(n){const e=n.length;if(f(e>=2),2===e)return f("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Hn.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&d(),n.charAt(p+1)){case"\x01":const I=n.substring(l,p);let O;0===a.length?O=I:(a+=I,O=a,a=""),s.push(O);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:d()}l=p+2}return new Hn(s)}const Lf=["userId","batchId"];function Vf(n,e){return[n,mo(e)]}function pE(n,e,t){return[n,mo(e),t]}const nd={},xv=["prefixPath","collectionGroup","readTime","documentId"],gE=["prefixPath","collectionGroup","documentId"],Mv=["collectionGroup","readTime","prefixPath","documentId"],mE=["canonicalId","targetId"],yE=["targetId","path"],Uf=["path","targetId"],rd=["collectionId","parent"],Wg=["indexId","uid"],Ih=["uid","sequenceNumber"],qg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bf=["indexId","uid","orderedDocumentKey"],Rv=["userId","collectionPath","documentId"],Zg=["userId","collectionPath","largestBatchId"],Kg=["userId","collectionGroup","largestBatchId"],jf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nv=[...jf,"documentOverlays"],$f=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ov=$f,vE=[...Ov,"indexConfiguration","indexState","indexEntries"];class Hf extends _g{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function Fs(n,e){const t=L(n);return ta.M(t.re,e)}class Gf{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Pg(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=yh(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=yh(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=pv();return this.mutations.forEach(a=>{const l=e.get(a.key),p=l.overlayedDocument;let I=this.applyToLocalView(p,l.mutatedFields);I=t.has(a.key)?null:I;const O=Nf(p,I);null!==O&&s.set(a.key,O),p.isValidDocument()||p.convertToNoDocument(Jt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),In())}isEqual(e){return this.batchId===e.batchId&&ju(this.mutations,e.mutations,(t,s)=>ql(t,s))&&ju(this.baseMutations,e.baseMutations,(t,s)=>ql(t,s))}}class zf{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){f(e.mutations.length===s.length);let a=iu;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new zf(e,t,s,a)}}class Yg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wc{constructor(e,t,s,a,l=Jt.min(),p=Jt.min(),I=Ni.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=I}withSequenceNumber(e){return new wc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new wc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new wc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class na{constructor(e){this.oe=e}}function kv(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Qg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Xl(a=n.oe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Jl(a,l.version.toTimestamp()),createTime:Jl(a,l.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Ju(e.version)};else{if(!e.isUnknownDocument())return d();s.unknownDocument={path:t.path.toArray(),version:Ju(e.version)}}var a,l;return s}function Qg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ju(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ic(n){const e=new Ar(n.seconds,n.nanoseconds);return Jt.fromTimestamp(e)}function al(n,e){const t=(e.baseMutations||[]).map(l=>Iv(n.oe,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const s=e.mutations.map(l=>Iv(n.oe,l)),a=Ar.fromMillis(e.localWriteTimeMs);return new Gf(e.batchId,a,t,s)}function Dh(n){const e=Ic(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ic(n.lastLimboFreeSnapshotVersion):Jt.min();let s;var a;return void 0!==n.query.documents?(f(1===(a=n.query).documents.length),s=Fo(tl(Pf(a.documents[0])))):s=Fo(zg(n.query)),new wc(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Ni.fromBase64String(n.resumeToken))}function Fv(n,e){const t=Ju(e.snapshotVersion),s=Ju(e.lastLimboFreeSnapshotVersion);let a;a=lh(e.target)?ol(n.oe,e.target):Gg(n.oe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Wf(n){const e=zg({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?nl(e,e.limit,"L"):e}function Jg(n,e){return new Yg(e.largestBatchId,Iv(n.oe,e.overlayMutation))}function Lv(n,e){const t=e.path.lastSegment();return[n,mo(e.path.popLast()),t]}function qf(n,e,t,s){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ju(s.readTime),documentKey:mo(s.documentKey.path),largestBatchId:s.largestBatchId}}class _E{getBundleMetadata(e,t){return Vv(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Ic(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Vv(e).put({bundleId:(s=t).id,createTime:Ju(Yi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Uv(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Wf(a.bundledQuery),readTime:Ic(a.readTime)};var a})}saveNamedQuery(e,t){return Uv(e).put({name:(s=t).name,readTime:Ju(Yi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Vv(n){return Fs(n,"bundles")}function Uv(n){return Fs(n,"namedQueries")}class Zf{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new Zf(e,t.uid||"")}getOverlay(e,t){return bh(e).get(Lv(this.userId,t)).next(s=>s?Jg(this.Tt,s):null)}getOverlays(e,t){const s=ru();return Oe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((l,p)=>{const I=new Yg(t,p);a.push(this.ce(e,I))}),Oe.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(mo(p.getCollectionPath())));const l=[];return a.forEach(p=>{const I=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(bh(e).Y("collectionPathOverlayIndex",I))}),Oe.waitFor(l)}getOverlaysForCollection(e,t,s){const a=ru(),l=mo(t),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return bh(e).W("collectionPathOverlayIndex",p).next(I=>{for(const O of I){const U=Jg(this.Tt,O);a.set(U.getKey(),U)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const l=ru();let p;const I=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bh(e).X({index:"collectionGroupOverlayIndex",range:I},(O,U,Y)=>{const ue=Jg(this.Tt,U);l.size()<a||ue.largestBatchId===p?(l.set(ue.getKey(),ue),p=ue.largestBatchId):Y.done()}).next(()=>l)}ce(e,t){return bh(e).put(function(s,a,l){const[p,I,O]=Lv(a,l.mutation.key);return{userId:a,collectionPath:I,documentId:O,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:ed(s.oe,l.mutation)}}(this.Tt,this.userId,t))}}function bh(n){return Fs(n,"documentOverlays")}class yo{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(Ii(e.integerValue));else if("doubleValue"in e){const s=Ii(e.doubleValue);isNaN(s)?this.fe(t,13):(this.fe(t,15),rh(s)?t.de(0):t.de(s))}else if("timestampValue"in e){const s=e.timestampValue;this.fe(t,20),"string"==typeof s?t._e(s):(t._e(`${s.seconds||""}`),t.de(s.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(yc(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.fe(t,45),t.de(s.latitude||0),t.de(s.longitude||0)}else"mapValue"in e?Cf(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):d()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const s=e.fields||{};this.fe(t,55);for(const a of Object.keys(s))this.we(a,t),this.he(s[a],t)}Ie(e,t){const s=e.values||[];this.fe(t,50);for(const a of s)this.he(a,t)}ye(e,t){this.fe(t,37),St.fromName(e).path.forEach(s=>{this.fe(t,60),this.Te(s,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function Xg(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Bv(n){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const l=Xg(255&t[a]);if(s+=l,8!==l)break}return s}(n);return Math.ceil(e/8)}yo.Ee=new yo;class EE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Re(s.value),s=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Ve()}Se(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Re(s);else if(s<2048)this.Re(960|s>>>6),this.Re(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Re(480|s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s);else{const a=t.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}this.Pe()}De(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const a=t.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}this.Ve()}Ce(e){const t=this.xe(e),s=Bv(t);this.Ne(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}ke(e){const t=this.xe(e),s=Bv(t);this.Ne(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class jv{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class wE{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class Ch{constructor(){this.Le=new EE,this.qe=new jv(this.Le),this.Ue=new wE(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class ul{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new ul(this.indexId,this.documentKey,this.arrayValue,s)}}function _u(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$v(n.arrayValue,e.arrayValue),0!==t?t:(t=$v(n.directionalValue,e.directionalValue),0!==t?t:St.comparator(n.documentKey,e.documentKey)))}function $v(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(0!==s)return s}return n.length-e.length}class IE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const s=t;s.isInequality()?this.ze=s:this.je.push(s)}}We(e){f(e.collectionGroup===this.collectionId);const t=yg(e);if(void 0!==t&&!this.He(t))return!1;const s=Kc(e);let a=0,l=0;for(;a<s.length&&this.He(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.ze){const p=s[a];if(!this.Je(this.ze,p)||!this.Ye(this.Qe[l++],p))return!1;++a}for(;a<s.length;++a)if(l>=this.Qe.length||!this.Ye(this.Qe[l++],s[a]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Th(n){var e,t;if(f(n instanceof Gn||n instanceof mr),n instanceof Gn){if(n instanceof Ag){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>Gn.create(n.field,"==",l)))||[];return mr.create(a,"or")}return n}const s=n.filters.map(a=>Th(a));return mr.create(s,n.op)}function em(n){if(0===n.getFilters().length)return[];const e=Gv(Th(n));return f(Kf(e)),id(e)||Hv(e)?[e]:e.getFilters()}function id(n){return n instanceof Gn}function Hv(n){return n instanceof mr&&Tf(n)}function Kf(n){return id(n)||Hv(n)||function(e){if(e instanceof mr&&qy(e)){for(const t of e.getFilters())if(!id(t)&&!Hv(t))return!1;return!0}return!1}(n)}function Gv(n){if(f(n instanceof Gn||n instanceof mr),n instanceof Gn)return n;if(1===n.filters.length)return Gv(n.filters[0]);const e=n.filters.map(s=>Gv(s));let t=mr.create(e,n.op);return t=Sh(t),Kf(t)?t:(f(t instanceof mr),f(uh(t)),f(t.filters.length>1),t.filters.reduce((s,a)=>Yf(s,a)))}function Yf(n,e){let t;return f(n instanceof Gn||n instanceof mr),f(e instanceof Gn||e instanceof mr),t=n instanceof Gn?e instanceof Gn?mr.create([n,e],"and"):tm(n,e):e instanceof Gn?tm(e,n):function(s,a){if(f(s.filters.length>0&&a.filters.length>0),uh(s)&&uh(a))return Yy(s,a.getFilters());const l=qy(s)?s:a,p=qy(s)?a:s,I=l.filters.map(O=>Yf(O,p));return mr.create(I,"or")}(n,e),Sh(t)}function tm(n,e){if(uh(e))return Yy(e,n.getFilters());{const t=e.filters.map(s=>Yf(n,s));return mr.create(t,"or")}}function Sh(n){if(f(n instanceof Gn||n instanceof mr),n instanceof Gn)return n;const e=n.getFilters();if(1===e.length)return Sh(e[0]);if(Zy(n))return n;const t=e.map(a=>Sh(a)),s=[];return t.forEach(a=>{a instanceof Gn?s.push(a):a instanceof mr&&(a.op===n.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:mr.create(s,n.op)}class zv{constructor(){this.Ze=new Ah}addToCollectionParentIndex(e,t){return this.Ze.add(t),Oe.resolve()}getCollectionParents(e,t){return Oe.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return Oe.resolve()}deleteFieldIndex(e,t){return Oe.resolve()}getDocumentsMatchingTarget(e,t){return Oe.resolve(null)}getIndexType(e,t){return Oe.resolve(0)}getFieldIndexes(e,t){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,t){return Oe.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,t){return Oe.resolve(Oa.min())}updateCollectionGroup(e,t,s){return Oe.resolve()}updateIndexEntries(e,t){return Oe.resolve()}}class Ah{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Cr(Hn.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Cr(Hn.comparator)).toArray()}}const Pa=new Uint8Array(0);class Qf{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Ah,this.tn=new il(s=>el(s),(s,a)=>Bl(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const l={collectionId:s,parent:mo(a)};return xh(e).put(l)}return Oe.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[eh(t),""],!1,!0);return xh(e).W(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(Qu(p.parent))}return s})}addFieldIndex(e,t){const s=Jf(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(I=>[I.fieldPath.canonicalString(),I.kind])};var p;delete a.indexId;const l=s.add(a);if(t.indexState){const p=sd(e);return l.next(I=>{p.put(qf(I,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const s=Jf(e),a=sd(e),l=Xu(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Xu(e);let a=!0;const l=new Map;return Oe.forEach(this.en(t),p=>this.nn(e,p).next(I=>{a&&(a=!!I),l.set(p,I)})).next(()=>{if(a){let p=In();const I=[];return Oe.forEach(l,(O,U)=>{var Y;dt("IndexedDbIndexManager",`Using index ${Y=O,`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map(Dn=>`${Dn.fieldPath}:${Dn.kind}`).join(",")}`} to execute ${el(t)}`);const ue=function(Dn,Fn){const bn=yg(Fn);if(void 0===bn)return null;for(const Mn of jl(Dn,bn.fieldPath))switch(Mn.op){case"array-contains-any":return Mn.value.arrayValue.values||[];case"array-contains":return[Mn.value]}return null}(U,O),De=function(Dn,Fn){const bn=new Map;for(const Mn of Kc(Fn))for(const Vs of jl(Dn,Mn.fieldPath))switch(Vs.op){case"==":case"in":bn.set(Mn.fieldPath.canonicalString(),Vs.value);break;case"not-in":case"!=":return bn.set(Mn.fieldPath.canonicalString(),Vs.value),Array.from(bn.values())}return null}(U,O),Be=function(Dn,Fn){const bn=[];let Mn=!0;for(const Vs of Kc(Fn)){const ac=0===Vs.kind?J0(Dn,Vs.fieldPath,Dn.startAt):xf(Dn,Vs.fieldPath,Dn.startAt);bn.push(ac.value),Mn&&(Mn=ac.inclusive)}return new qu(bn,Mn)}(U,O),st=function(Dn,Fn){const bn=[];let Mn=!0;for(const Vs of Kc(Fn)){const ac=0===Vs.kind?xf(Dn,Vs.fieldPath,Dn.endAt):J0(Dn,Vs.fieldPath,Dn.endAt);bn.push(ac.value),Mn&&(Mn=ac.inclusive)}return new qu(bn,Mn)}(U,O),Et=this.sn(O,U,Be),Bt=this.sn(O,U,st),Qn=this.rn(O,U,De),ti=this.on(O.indexId,ue,Et,Be.inclusive,Bt,st.inclusive,Qn);return Oe.forEach(ti,Dn=>s.J(Dn,t.limit).next(Fn=>{Fn.forEach(bn=>{const Mn=St.fromSegments(bn.documentKey);p.has(Mn)||(p=p.add(Mn),I.push(Mn))})}))}).next(()=>I)}return Oe.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:em(mr.create(e.filters,"and")).map(s=>Xy(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,s,a,l,p,I){const O=(null!=t?t.length:1)*Math.max(s.length,l.length),U=O/(null!=t?t.length:1),Y=[];for(let ue=0;ue<O;++ue){const De=t?this.un(t[ue/U]):Pa,Be=this.cn(e,De,s[ue%U],a),st=this.an(e,De,l[ue%U],p),Et=I.map(Bt=>this.cn(e,De,Bt,!0));Y.push(...this.createRange(Be,st,Et))}return Y}cn(e,t,s,a){const l=new ul(e,St.empty(),t,s);return a?l:l.Ge()}an(e,t,s,a){const l=new ul(e,St.empty(),t,s);return a?l.Ge():l}nn(e,t){const s=new IE(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let p=null;for(const I of l)s.We(I)&&(!p||I.fields.length>p.fields.length)&&(p=I);return p})}getIndexType(e,t){let s=2;const a=this.en(t);return Oe.forEach(a,l=>this.nn(e,l).next(p=>{p?0!==s&&p.fields.length<function(I){let O=new Cr(fi.comparator),U=!1;for(const Y of I.filters)for(const ue of Y.getFlattenedFilters())ue.field.isKeyField()||("array-contains"===ue.op||"array-contains-any"===ue.op?U=!0:O=O.add(ue.field));for(const Y of I.orderBy)Y.field.isKeyField()||(O=O.add(Y.field));return O.size+(U?1:0)}(l)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}hn(e,t){const s=new Ch;for(const a of Kc(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=s.Ke(a.kind);yo.Ee.ae(l,p)}return s.Be()}un(e){const t=new Ch;return yo.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const s=new Ch;return yo.Ee.ae(Vl(this.databaseId,t),s.Ke(function(a){const l=Kc(a);return 0===l.length?0:l[l.length-1].kind}(e))),s.Be()}rn(e,t,s){if(null===s)return[];let a=[];a.push(new Ch);let l=0;for(const p of Kc(e)){const I=s[l++];for(const O of a)if(this.fn(t,p.fieldPath)&&Ul(I))a=this.dn(a,p,I);else{const U=O.Ke(p.kind);yo.Ee.ae(I,U)}}return this._n(a)}sn(e,t,s){return this.rn(e,t,s.position)}_n(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Be();return t}dn(e,t,s){const a=[...e],l=[];for(const p of s.arrayValue.values||[])for(const I of a){const O=new Ch;O.seed(I.Be()),yo.Ee.ae(p,O.Ke(t.kind)),l.push(O)}return l}fn(e,t){return!!e.filters.find(s=>s instanceof Gn&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Jf(e),a=sd(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(l=>{const p=[];return Oe.forEach(l,I=>a.get([I.indexId,this.uid]).next(O=>{p.push(function(U,Y){const ue=Y?new Pl(Y.sequenceNumber,new Oa(Ic(Y.readTime),new St(Qu(Y.documentKey)),Y.largestBatchId)):Pl.empty(),De=U.fields.map(([Be,st])=>new th(fi.fromServerFormat(Be),st));return new Ol(U.indexId,U.collectionGroup,De,ue)}(I,O))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:un(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Jf(e),l=sd(e);return this.wn(e).next(p=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(I=>Oe.forEach(I,O=>l.put(qf(O.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return Oe.forEach(t,(a,l)=>{const p=s.get(a.collectionGroup);return(p?Oe.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(I=>(s.set(a.collectionGroup,I),Oe.forEach(I,O=>this.mn(e,a,O).next(U=>{const Y=this.gn(l,O);return U.isEqual(Y)?Oe.resolve():this.yn(e,l,O,U,Y)}))))})}pn(e,t,s,a){return Xu(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.ln(s,t.key),documentKey:t.key.path.toArray()})}In(e,t,s,a){return Xu(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.ln(s,t.key),t.key.path.toArray()])}mn(e,t,s){const a=Xu(e);let l=new Cr(_u);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.ln(s,t)])},(p,I)=>{l=l.add(new ul(s.indexId,t,I.arrayValue,I.directionalValue))}).next(()=>l)}gn(e,t){let s=new Cr(_u);const a=this.hn(t,e);if(null==a)return s;const l=yg(t);if(null!=l){const p=e.data.field(l.fieldPath);if(Ul(p))for(const I of p.arrayValue.values||[])s=s.add(new ul(t.indexId,e.key,this.un(I),a))}else s=s.add(new ul(t.indexId,e.key,Pa,a));return s}yn(e,t,s,a,l){dt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(I,O,U,Y,ue){const De=I.getIterator(),Be=O.getIterator();let st=ch(De),Et=ch(Be);for(;st||Et;){let Bt=!1,Qn=!1;if(st&&Et){const ti=U(st,Et);ti<0?Qn=!0:ti>0&&(Bt=!0)}else null!=st?Qn=!0:Bt=!0;Bt?(Y(Et),Et=ch(Be)):Qn?(ue(st),st=ch(De)):(st=ch(De),Et=ch(Be))}}(a,l,_u,I=>{p.push(this.pn(e,t,s,I))},I=>{p.push(this.In(e,t,s,I))}),Oe.waitFor(p)}wn(e){let t=1;return sd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,I)=>_u(p,I)).filter((p,I,O)=>!I||0!==_u(p,O[I-1]));const a=[];a.push(e);for(const p of s){const I=_u(p,e),O=_u(p,t);if(0===I)a[0]=e.Ge();else if(I>0&&O<0)a.push(p),a.push(p.Ge());else if(O>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2){if(this.Tn(a[p],a[p+1]))return[];l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Pa,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Pa,[]]))}return l}Tn(e,t){return _u(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nm)}getMinOffset(e,t){return Oe.mapArray(this.en(t),s=>this.nn(e,s).next(a=>a||d())).next(nm)}}function xh(n){return Fs(n,"collectionParents")}function Xu(n){return Fs(n,"indexEntries")}function Jf(n){return Fs(n,"indexConfiguration")}function sd(n){return Fs(n,"indexState")}function nm(n){f(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const a=n[s].indexState.offset;kl(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Oa(e.readTime,e.documentKey,t)}const Wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ra{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ra(e,ra.DEFAULT_COLLECTION_PERCENTILE,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function od(n,e,t){const s=n.store("mutations"),a=n.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let I=0;const O=s.X({range:p},(Y,ue,De)=>(I++,De.delete()));l.push(O.next(()=>{f(1===I)}));const U=[];for(const Y of t.mutations){const ue=pE(e,Y.key.path,t.batchId);l.push(a.delete(ue)),U.push(Y.key)}return Oe.waitFor(l).next(()=>U)}function Xf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw d();e=n.noDocument}return JSON.stringify(e).length}ra.DEFAULT_COLLECTION_PERCENTILE=10,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ra.DEFAULT=new ra(41943040,ra.DEFAULT_COLLECTION_PERCENTILE,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ra.DISABLED=new ra(-1,0,0);class rm{constructor(e,t,s,a){this.userId=e,this.Tt=t,this.indexManager=s,this.referenceDelegate=a,this.En={}}static ue(e,t,s,a){f(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new rm(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).X({index:"userMutationsIndex",range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=ad(e),p=Dc(e);return p.add({}).next(I=>{f("number"==typeof I);const O=new Gf(I,t,s,a),U=function(De,Be,st){const Et=st.baseMutations.map(Qn=>ed(De.oe,Qn)),Bt=st.mutations.map(Qn=>ed(De.oe,Qn));return{userId:Be,batchId:st.batchId,localWriteTimeMs:st.localWriteTime.toMillis(),baseMutations:Et,mutations:Bt}}(this.Tt,this.userId,O),Y=[];let ue=new Cr((De,Be)=>un(De.canonicalString(),Be.canonicalString()));for(const De of a){const Be=pE(this.userId,De.key.path,I);ue=ue.add(De.key.path.popLast()),Y.push(p.put(U)),Y.push(l.put(Be,nd))}return ue.forEach(De=>{Y.push(this.indexManager.addToCollectionParentIndex(e,De))}),e.addOnCommittedListener(()=>{this.En[I]=O.keys()}),Oe.waitFor(Y).next(()=>O)})}lookupMutationBatch(e,t){return Dc(e).get(t).next(s=>s?(f(s.userId===this.userId),al(this.Tt,s)):null)}An(e,t){return this.En[t]?Oe.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.En[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Dc(e).X({index:"userMutationsIndex",range:a},(p,I,O)=>{I.userId===this.userId&&(f(I.batchId>=s),l=al(this.Tt,I)),O.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Dc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).W("userMutationsIndex",t).next(s=>s.map(a=>al(this.Tt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Vf(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return ad(e).X({range:a},(p,I,O)=>{const[U,Y,ue]=p,De=Qu(Y);if(U===this.userId&&t.path.isEqual(De))return Dc(e).get(ue).next(Be=>{if(!Be)throw d();f(Be.userId===this.userId),l.push(al(this.Tt,Be))});O.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Cr(un);const a=[];return t.forEach(l=>{const p=Vf(this.userId,l.path),I=IDBKeyRange.lowerBound(p),O=ad(e).X({range:I},(U,Y,ue)=>{const[De,Be,st]=U,Et=Qu(Be);De===this.userId&&l.path.isEqual(Et)?s=s.add(st):ue.done()});a.push(O)}),Oe.waitFor(a).next(()=>this.Rn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=Vf(this.userId,s),p=IDBKeyRange.lowerBound(l);let I=new Cr(un);return ad(e).X({range:p},(O,U,Y)=>{const[ue,De,Be]=O,st=Qu(De);ue===this.userId&&s.isPrefixOf(st)?st.length===a&&(I=I.add(Be)):Y.done()}).next(()=>this.Rn(e,I))}Rn(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Dc(e).get(l).next(p=>{if(null===p)throw d();f(p.userId===this.userId),s.push(al(this.Tt,p))}))}),Oe.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return od(e.re,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),Oe.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Oe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return ad(e).X({range:s},(l,p,I)=>{if(l[0]===this.userId){const O=Qu(l[1]);a.push(O)}else I.done()}).next(()=>{f(0===a.length)})})}containsKey(e,t){return qv(e,this.userId,t)}vn(e){return Zv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qv(n,e,t){const s=Vf(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return ad(n).X({range:l,Z:!0},(I,O,U)=>{const[Y,ue,De]=I;Y===e&&ue===a&&(p=!0),U.done()}).next(()=>p)}function Dc(n){return Fs(n,"mutations")}function ad(n){return Fs(n,"documentMutations")}function Zv(n){return Fs(n,"mutationQueues")}class cl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new cl(0)}static Sn(){return new cl(-1)}}class DE{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const s=new cl(t.highestTargetId);return t.highestTargetId=s.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>Jt.fromTimestamp(new Ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Dn(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Cn(e,a)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(s=>(s.targetCount+=1,this.Nn(t,s),this.Cn(e,s))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ud(e).delete(t.targetId)).next(()=>this.Dn(e)).next(s=>(f(s.targetCount>0),s.targetCount-=1,this.Cn(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return ud(e).X((p,I)=>{const O=Dh(I);O.sequenceNumber<=t&&null===s.get(O.targetId)&&(a++,l.push(this.removeTargetData(e,O)))}).next(()=>Oe.waitFor(l)).next(()=>a)}forEachTarget(e,t){return ud(e).X((s,a)=>{const l=Dh(a);t(l)})}Dn(e){return im(e).get("targetGlobalKey").next(t=>(f(null!==t),t))}Cn(e,t){return im(e).put("targetGlobalKey",t)}xn(e,t){return ud(e).put(Fv(this.Tt,t))}Nn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=el(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return ud(e).X({range:a,index:"queryTargetsIndex"},(p,I,O)=>{const U=Dh(I);Bl(t,U.target)&&(l=U,O.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Eu(e);return t.forEach(p=>{const I=mo(p.path);a.push(l.put({targetId:s,path:I})),a.push(this.referenceDelegate.addReference(e,s,p))}),Oe.waitFor(a)}removeMatchingKeys(e,t,s){const a=Eu(e);return Oe.forEach(t,l=>{const p=mo(l.path);return Oe.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Eu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Eu(e);let l=In();return a.X({range:s,Z:!0},(p,I,O)=>{const U=Qu(p[1]),Y=new St(U);l=l.add(Y)}).next(()=>l)}containsKey(e,t){const s=mo(t.path),a=IDBKeyRange.bound([s],[eh(s)],!1,!0);let l=0;return Eu(e).X({index:"documentTargetsIndex",Z:!0,range:a},([p,I],O,U)=>{0!==p&&(l++,U.done())}).next(()=>l>0)}ie(e,t){return ud(e).get(t).next(s=>s?Dh(s):null)}}function ud(n){return Fs(n,"targets")}function im(n){return Fs(n,"targetGlobal")}function Eu(n){return Fs(n,"targetDocuments")}function Kv([n,e],[t,s]){const a=un(n,t);return 0===a?un(e,s):a}class sm{constructor(e){this.kn=e,this.buffer=new Cr(Kv),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Kv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bE{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;dt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){mu(s)?dt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield $u(s)}yield t.Bn(3e5)}))}}class CE{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Oe.resolve(va.at);const s=new sm(t);return this.Ln.forEachTarget(e,a=>s.On(a.sequenceNumber)).next(()=>this.Ln.Un(e,a=>s.On(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Ln.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(Wv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wv):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let s,a,l,p,I,O,U;const Y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ue=>(ue>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ue}`),a=this.params.maximumSequenceNumbersToCollect):a=ue,p=Date.now(),this.nthSequenceNumber(e,a))).next(ue=>(s=ue,I=Date.now(),this.removeTargets(e,s,t))).next(ue=>(l=ue,O=Date.now(),this.removeOrphanedDocuments(e,s))).next(ue=>(U=Date.now(),Vu()<=Tn.in.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-Y}ms\n\tDetermined least recently used ${a} in `+(I-p)+`ms\n\tRemoved ${l} targets in `+(O-I)+`ms\n\tRemoved ${ue} documents in `+(U-O)+`ms\nTotal Duration: ${U-Y}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:ue})))}}class TE{constructor(e,t){this.db=e,this.garbageCollector=new CE(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Gn(e){let t=0;return this.Un(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(s,a)=>t(a))}addReference(e,t,s){return ep(e,s)}removeReference(e,t,s){return ep(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return ep(e,t)}jn(e,t){return function(s,a){let l=!1;return Zv(s).tt(p=>qv(s,p,a).next(I=>(I&&(l=!0),Oe.resolve(!I)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Qn(e,(p,I)=>{if(I<=t){const O=this.jn(e,p).next(U=>{if(!U)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,Jt.min()),Eu(e).delete([0,mo(p.path)])))});a.push(O)}}).next(()=>Oe.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return ep(e,t)}Qn(e,t){const s=Eu(e);let a,l=va.at;return s.X({index:"documentTargetsIndex"},([p,I],{path:O,sequenceNumber:U})=>{0===p?(l!==va.at&&t(new St(Qu(a)),l),l=U,a=O):l=va.at}).next(()=>{l!==va.at&&t(new St(Qu(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ep(n,e){return Eu(n).put((s=n.currentSequenceNumber,{targetId:0,path:mo(e.path),sequenceNumber:s}));var s}class Yv{constructor(){this.changes=new il(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Oe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class SE{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ll(e).put(s)}removeEntry(e,t,s){return ll(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Qg(l),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.zn(e,s)))}getEntry(e,t){let s=zr.newInvalidDocument(t);return ll(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tp(t))},(a,l)=>{s=this.Wn(t,l)}).next(()=>s)}Hn(e,t){let s={size:0,document:zr.newInvalidDocument(t)};return ll(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tp(t))},(a,l)=>{s={document:this.Wn(t,l),size:Xf(l)}}).next(()=>s)}getEntries(e,t){let s=_a();return this.Jn(e,t,(a,l)=>{const p=this.Wn(a,l);s=s.insert(a,p)}).next(()=>s)}Yn(e,t){let s=_a(),a=new Oi(St.comparator);return this.Jn(e,t,(l,p)=>{const I=this.Wn(l,p);s=s.insert(l,I),a=a.insert(l,Xf(p))}).next(()=>({documents:s,Zn:a}))}Jn(e,t,s){if(t.isEmpty())return Oe.resolve();let a=new Cr(Mh);t.forEach(O=>a=a.add(O));const l=IDBKeyRange.bound(tp(a.first()),tp(a.last())),p=a.getIterator();let I=p.getNext();return ll(e).X({index:"documentKeyIndex",range:l},(O,U,Y)=>{const ue=St.fromSegments([...U.prefixPath,U.collectionGroup,U.documentId]);for(;I&&Mh(I,ue)<0;)s(I,null),I=p.getNext();I&&I.isEqual(ue)&&(s(I,U),I=p.hasNext()?p.getNext():null),I?Y.j(tp(I)):Y.done()}).next(()=>{for(;I;)s(I,null),I=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const l=t.path,p=[l.popLast().toArray(),l.lastSegment(),Qg(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],I=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ll(e).W(IDBKeyRange.bound(p,I,!0)).next(O=>{let U=_a();for(const Y of O){const ue=this.Wn(St.fromSegments(Y.prefixPath.concat(Y.collectionGroup,Y.documentId)),Y);ue.isFoundDocument()&&(ph(t,ue)||a.has(ue.key))&&(U=U.insert(ue.key,ue))}return U})}getAllFromCollectionGroup(e,t,s,a){let l=_a();const p=am(t,s),I=am(t,Oa.max());return ll(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,I,!0)},(O,U,Y)=>{const ue=this.Wn(St.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);l=l.insert(ue.key,ue),l.size===a&&Y.done()}).next(()=>l)}newChangeBuffer(e){return new Jv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return om(e).get("remoteDocumentGlobalKey").next(t=>(f(!!t),t))}zn(e,t){return om(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const s=function Pv(n,e){let t;if(e.document)t=cE(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=St.fromSegments(e.noDocument.path),a=Ic(e.noDocument.readTime);t=zr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return d();{const s=St.fromSegments(e.unknownDocument.path),a=Ic(e.unknownDocument.version);t=zr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Ar(s[0],s[1]);return Jt.fromTimestamp(a)}(e.readTime)),t}(this.Tt,t);if(!s.isNoDocument()||!s.version.isEqual(Jt.min()))return s}return zr.newInvalidDocument(e)}}function Qv(n){return new SE(n)}class Jv extends Yv{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new il(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Cr((l,p)=>un(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const I=this.ts.get(l);if(t.push(this.Xn.removeEntry(e,l,I.readTime)),p.isValidDocument()){const O=kv(this.Xn.Tt,p);a=a.add(l.path.popLast());const U=Xf(O);s+=U-I.size,t.push(this.Xn.addEntry(e,l,O))}else if(s-=I.size,this.trackRemovals){const O=kv(this.Xn.Tt,p.convertToNoDocument(Jt.min()));t.push(this.Xn.addEntry(e,l,O))}}),a.forEach(l=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Xn.updateMetadata(e,s)),Oe.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(s=>(this.ts.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:s,Zn:a})=>(a.forEach((l,p)=>{this.ts.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function om(n){return Fs(n,"remoteDocumentGlobal")}function ll(n){return Fs(n,"remoteDocumentsV14")}function tp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function am(n,e){const t=e.documentKey.path.toArray();return[n,Qg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Mh(n,e){const t=n.path.toArray(),s=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<s.length-2;++l)if(a=un(t[l],s[l]),a)return a;return a=un(t.length,s.length),a||(a=un(t[t.length-2],s[s.length-2]),a||un(t[t.length-1],s[s.length-1]))}class dl{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class AE{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&yh(s.mutation,a,ks.empty(),Ar.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,In()).next(()=>s))}getLocalViewOfDocuments(e,t,s=In()){const a=ru();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let p=Ql();return l.forEach((I,O)=>{p=p.insert(I,O.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=ru();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,In()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((p,I)=>{t.set(p,I)})})}computeViews(e,t,s,a){let l=_a();const p=vh(),I=vh();return t.forEach((O,U)=>{const Y=s.get(U.key);a.has(U.key)&&(void 0===Y||Y.mutation instanceof Yu)?l=l.insert(U.key,U):void 0!==Y?(p.set(U.key,Y.mutation.getFieldMask()),yh(Y.mutation,U,Y.mutation.getFieldMask(),Ar.now())):p.set(U.key,ks.empty())}),this.recalculateAndSaveOverlays(e,l).next(O=>(O.forEach((U,Y)=>p.set(U,Y)),t.forEach((U,Y)=>{var ue;return I.set(U,new dl(Y,null!==(ue=p.get(U))&&void 0!==ue?ue:null))}),I))}recalculateAndSaveOverlays(e,t){const s=vh();let a=new Oi((p,I)=>p-I),l=In();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const I of p)I.keys().forEach(O=>{const U=t.get(O);if(null===U)return;let Y=s.get(O)||ks.empty();Y=I.applyToLocalView(U,Y),s.set(O,Y);const ue=(a.get(I.batchId)||In()).add(O);a=a.insert(I.batchId,ue)})}).next(()=>{const p=[],I=a.getReverseIterator();for(;I.hasNext();){const O=I.getNext(),U=O.key,Y=O.value,ue=pv();Y.forEach(De=>{if(!l.has(De)){const Be=Nf(t.get(De),s.get(De));null!==Be&&ue.set(De,Be),l=l.add(De)}}),p.push(this.documentOverlayCache.saveOverlays(e,U,ue))}return Oe.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return St.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const p=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):Oe.resolve(ru());let I=-1,O=l;return p.next(U=>Oe.forEach(U,(Y,ue)=>(I<ue.largestBatchId&&(I=ue.largestBatchId),l.get(Y)?Oe.resolve():this.remoteDocumentCache.getEntry(e,Y).next(De=>{O=O.insert(Y,De)}))).next(()=>this.populateOverlays(e,U,l)).next(()=>this.computeViews(e,O,U,In())).next(Y=>({batchId:I,changes:fv(Y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new St(t)).next(s=>{let a=Ql();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let l=Ql();return this.indexManager.getCollectionParents(e,a).next(p=>Oe.forEach(p,I=>{const O=(U=t,Y=I.child(a),new Zu(Y,null,U.explicitOrderBy.slice(),U.filters.slice(),U.limit,U.limitType,U.startAt,U.endAt));var U,Y;return this.getDocumentsMatchingCollectionQuery(e,O,s).next(U=>{U.forEach((Y,ue)=>{l=l.insert(Y,ue)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(l=>{a.forEach((I,O)=>{const U=O.getKey();null===l.get(U)&&(l=l.insert(U,zr.newInvalidDocument(U)))});let p=Ql();return l.forEach((I,O)=>{const U=a.get(I);void 0!==U&&yh(U.mutation,O,ks.empty(),Ar.now()),ph(t,O)&&(p=p.insert(I,O))}),p})}}class np{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return Oe.resolve(this.es.get(t))}saveBundleMetadata(e,t){var s;return this.es.set(t.id,{id:(s=t).id,version:s.version,createTime:Yi(s.createTime)}),Oe.resolve()}getNamedQuery(e,t){return Oe.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(s=t).name,query:Wf(s.bundledQuery),readTime:Yi(s.readTime)}),Oe.resolve();var s}}class xE{constructor(){this.overlays=new Oi(St.comparator),this.ss=new Map}getOverlay(e,t){return Oe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ru();return Oe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.ce(e,t,l)}),Oe.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ss.get(s);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.ss.delete(s)),Oe.resolve()}getOverlaysForCollection(e,t,s){const a=ru(),l=t.length+1,p=new St(t.child("")),I=this.overlays.getIteratorFrom(p);for(;I.hasNext();){const O=I.getNext().value,U=O.getKey();if(!t.isPrefixOf(U.path))break;U.path.length===l&&O.largestBatchId>s&&a.set(O.getKey(),O)}return Oe.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Oi((U,Y)=>U-Y);const p=this.overlays.getIterator();for(;p.hasNext();){const U=p.getNext().value;if(U.getKey().getCollectionGroup()===t&&U.largestBatchId>s){let Y=l.get(U.largestBatchId);null===Y&&(Y=ru(),l=l.insert(U.largestBatchId,Y)),Y.set(U.getKey(),U)}}const I=ru(),O=l.getIterator();for(;O.hasNext()&&(O.getNext().value.forEach((U,Y)=>I.set(U,Y)),!(I.size()>=a)););return Oe.resolve(I)}ce(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.ss.get(a.largestBatchId).delete(s.key);this.ss.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new Yg(t,s));let l=this.ss.get(t);void 0===l&&(l=In(),this.ss.set(t,l)),this.ss.set(t,l.add(s.key))}}class um{constructor(){this.rs=new Cr(as.os),this.us=new Cr(as.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const s=new as(e,t);this.rs=this.rs.add(s),this.us=this.us.add(s)}hs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ls(new as(e,t))}fs(e,t){e.forEach(s=>this.removeReference(s,t))}ds(e){const t=new St(new Hn([])),s=new as(t,e),a=new as(t,e+1),l=[];return this.us.forEachInRange([s,a],p=>{this.ls(p),l.push(p.key)}),l}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new St(new Hn([])),s=new as(t,e),a=new as(t,e+1);let l=In();return this.us.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new as(e,0),s=this.rs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class as{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return St.comparator(e.key,t.key)||un(e.gs,t.gs)}static cs(e,t){return un(e.gs,t.gs)||St.comparator(e.key,t.key)}}class ME{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Cr(as.os)}checkEmpty(e){return Oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const l=this.ys;this.ys++;const p=new Gf(l,t,s,a);this.mutationQueue.push(p);for(const I of a)this.ps=this.ps.add(new as(I.key,l)),this.indexManager.addToCollectionParentIndex(e,I.key.path.popLast());return Oe.resolve(p)}lookupMutationBatch(e,t){return Oe.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Ts(t+1),l=a<0?0:a;return Oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new as(t,0),a=new as(t,Number.POSITIVE_INFINITY),l=[];return this.ps.forEachInRange([s,a],p=>{const I=this.Is(p.gs);l.push(I)}),Oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Cr(un);return t.forEach(a=>{const l=new as(a,0),p=new as(a,Number.POSITIVE_INFINITY);this.ps.forEachInRange([l,p],I=>{s=s.add(I.gs)})}),Oe.resolve(this.Es(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;St.isDocumentKey(l)||(l=l.child(""));const p=new as(new St(l),0);let I=new Cr(un);return this.ps.forEachWhile(O=>{const U=O.key.path;return!!s.isPrefixOf(U)&&(U.length===a&&(I=I.add(O.gs)),!0)},p),Oe.resolve(this.Es(I))}Es(e){const t=[];return e.forEach(s=>{const a=this.Is(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){f(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ps;return Oe.forEach(t.mutations,a=>{const l=new as(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ps=s})}Pn(e){}containsKey(e,t){const s=new as(t,0),a=this.ps.firstAfterOrEqual(s);return Oe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Oe.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wu{constructor(e){this.Rs=e,this.docs=new Oi(St.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,p=this.Rs(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Oe.resolve(s?s.document.mutableCopy():zr.newInvalidDocument(t))}getEntries(e,t){let s=_a();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():zr.newInvalidDocument(a))}),Oe.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=_a();const p=t.path,I=new St(p.child("")),O=this.docs.getIteratorFrom(I);for(;O.hasNext();){const{key:U,value:{document:Y}}=O.getNext();if(!p.isPrefixOf(U.path))break;U.path.length>p.length+1||kl(Fy(Y),s)<=0||(a.has(Y.key)||ph(t,Y))&&(l=l.insert(Y.key,Y.mutableCopy()))}return Oe.resolve(l)}getAllFromCollectionGroup(e,t,s,a){d()}Ps(e,t){return Oe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Rh(this)}getSize(e){return Oe.resolve(this.size)}}class Rh extends Yv{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Xn.addEntry(e,a)):this.Xn.removeEntry(s)}),Oe.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class vo{constructor(e){this.persistence=e,this.vs=new il(t=>el(t),Bl),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this.bs=0,this.Vs=new um,this.targetCount=0,this.Ss=cl.Vn()}forEachTarget(e,t){return this.vs.forEach((s,a)=>t(a)),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),Oe.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new cl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,Oe.resolve()}updateTargetData(e,t){return this.xn(t),Oe.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.vs.forEach((p,I)=>{I.sequenceNumber<=t&&null===s.get(I.targetId)&&(this.vs.delete(p),l.push(this.removeMatchingKeysForTargetId(e,I.targetId)),a++)}),Oe.waitFor(l).next(()=>a)}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,t){const s=this.vs.get(t)||null;return Oe.resolve(s)}addMatchingKeys(e,t,s){return this.Vs.hs(t,s),Oe.resolve()}removeMatchingKeys(e,t,s){this.Vs.fs(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),Oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),Oe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Vs.ws(t);return Oe.resolve(s)}containsKey(e,t){return Oe.resolve(this.Vs.containsKey(t))}}class bc{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new va(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new vo(this),this.indexManager=new zv,this.remoteDocumentCache=new wu(s=>this.referenceDelegate.ks(s)),this.Tt=new na(t),this.$s=new np(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ds[e.toKey()];return s||(s=new ME(t,this.referenceDelegate),this.Ds[e.toKey()]=s),s}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,s){dt("MemoryPersistence","Starting transaction:",e);const a=new rp(this.Cs.next());return this.referenceDelegate.Ms(),s(a).next(l=>this.referenceDelegate.Os(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Fs(e,t){return Oe.or(Object.values(this.Ds).map(s=>()=>s.containsKey(e,t)))}}class rp extends _g{constructor(e){super(),this.currentSequenceNumber=e}}class Lo{constructor(e){this.persistence=e,this.Bs=new um,this.Ls=null}static qs(e){return new Lo(e)}get Us(){if(this.Ls)return this.Ls;throw d()}addReference(e,t,s){return this.Bs.addReference(s,t),this.Us.delete(s.toString()),Oe.resolve()}removeReference(e,t,s){return this.Bs.removeReference(s,t),this.Us.add(s.toString()),Oe.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),Oe.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(a=>this.Us.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Us.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Us,s=>{const a=St.fromPath(s);return this.Ks(e,a).next(l=>{l||t.removeEntry(a,Jt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(s=>{s?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return Oe.or([()=>Oe.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class cm{constructor(e){this.Tt=e}F(e,t,s,a){const l=new nh("createOrUpgrade",t);var I;s<1&&a>=1&&(e.createObjectStore("owner"),(I=e).createObjectStore("mutationQueues",{keyPath:"userId"}),I.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lf,{unique:!0}),I.createObjectStore("documentMutations"),hl(e),function(I){I.createObjectStore("remoteDocuments")}(e));let p=Oe.resolve();return s<3&&a>=3&&(0!==s&&(function(I){I.deleteObjectStore("targetDocuments"),I.deleteObjectStore("targets"),I.deleteObjectStore("targetGlobal")}(e),hl(e)),p=p.next(()=>function(I){const O=I.store("targetGlobal"),U={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Jt.min().toTimestamp(),targetCount:0};return O.put("targetGlobalKey",U)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(I,O){return O.store("mutations").W().next(U=>{I.deleteObjectStore("mutations"),I.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lf,{unique:!0});const Y=O.store("mutations"),ue=U.map(De=>Y.put(De));return Oe.waitFor(ue)})}(e,l))),p=p.next(()=>{!function(I){I.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Gs(l))),s<6&&a>=6&&(p=p.next(()=>(function(I){I.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(l)))),s<7&&a>=7&&(p=p.next(()=>this.js(l))),s<8&&a>=8&&(p=p.next(()=>this.zs(e,l))),s<9&&a>=9&&(p=p.next(()=>{!function(I){I.objectStoreNames.contains("remoteDocumentChanges")&&I.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.Ws(l))),s<11&&a>=11&&(p=p.next(()=>{(function(I){I.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(I){I.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(I){const O=I.createObjectStore("documentOverlays",{keyPath:Rv});O.createIndex("collectionPathOverlayIndex",Zg,{unique:!1}),O.createIndex("collectionGroupOverlayIndex",Kg,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(I){const O=I.createObjectStore("remoteDocumentsV14",{keyPath:xv});O.createIndex("documentKeyIndex",gE),O.createIndex("collectionGroupIndex",Mv)}(e)).next(()=>this.Hs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.Js(e,l))),s<15&&a>=15&&(p=p.next(()=>function(I){I.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),I.createObjectStore("indexState",{keyPath:Wg}).createIndex("sequenceNumberIndex",Ih,{unique:!1}),I.createObjectStore("indexEntries",{keyPath:qg}).createIndex("documentKeyIndex",Bf,{unique:!1})}(e))),p}Qs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Xf(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Gs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(a=>Oe.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",p).next(I=>Oe.forEach(I,O=>{f(O.userId===l.userId);const U=al(this.Tt,O);return od(e,l.userId,U).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return s.X((p,I)=>{const O=new Hn(p),U=[0,mo(O)];l.push(t.get(U).next(Y=>Y?Oe.resolve():t.put({targetId:0,path:mo(O),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Oe.waitFor(l))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:rd});const s=t.store("collectionParents"),a=new Ah,l=p=>{if(a.add(p)){const I=p.lastSegment(),O=p.popLast();return s.put({collectionId:I,parent:mo(O)})}};return t.store("remoteDocuments").X({Z:!0},(p,I)=>{const O=new Hn(p);return l(O.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([p,I,O],U)=>{const Y=Qu(I);return l(Y.popLast())}))}Ws(e){const t=e.store("targets");return t.X((s,a)=>{const l=Dh(a),p=Fv(this.Tt,l);return t.put(p)})}Hs(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((l,p)=>{const I=t.store("remoteDocumentsV14"),O=(U=p,U.document?new St(Hn.fromString(U.document.name).popFirst(5)):U.noDocument?St.fromSegments(U.noDocument.path):U.unknownDocument?St.fromSegments(U.unknownDocument.path):d()).path.toArray();var U;const Y={prefixPath:O.slice(0,O.length-2),collectionGroup:O[O.length-2],documentId:O[O.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(I.put(Y))}).next(()=>Oe.waitFor(a))}Js(e,t){const s=t.store("mutations"),a=Qv(this.Tt),l=new bc(Lo.qs,this.Tt.oe);return s.W().next(p=>{const I=new Map;return p.forEach(O=>{var U;let Y=null!==(U=I.get(O.userId))&&void 0!==U?U:In();al(this.Tt,O).keys().forEach(ue=>Y=Y.add(ue)),I.set(O.userId,Y)}),Oe.forEach(I,(O,U)=>{const Y=new Ki(U),ue=Zf.ue(this.Tt,Y),De=l.getIndexManager(Y),Be=rm.ue(Y,this.Tt,De,l.referenceDelegate);return new AE(a,Be,ue,De).recalculateAndSaveOverlaysForDocumentKeys(new Hf(t,va.at),O).next()})})}}function hl(n){n.createObjectStore("targetDocuments",{keyPath:yE}).createIndex("documentTargetsIndex",Uf,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mE,{unique:!0}),n.createObjectStore("targetGlobal")}const Cc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Tc{constructor(e,t,s,a,l,p,I,O,U,Y,ue=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ys=l,this.window=p,this.document=I,this.Zs=U,this.Xs=Y,this.ti=ue,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=De=>Promise.resolve(),!Tc.C())throw new te(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new TE(this,a),this.oi=t+"main",this.Tt=new na(O),this.ui=new ta(this.oi,this.ti,new cm(this.Tt)),this.Ns=new DE(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Qv(this.Tt),this.$s=new _E,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===Y&&wi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(B.FAILED_PRECONDITION,Cc);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new va(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var s=(0,Ee.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,Ee.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ec(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(mu(e))return dt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Iu(e).get("owner").next(t=>Oe.resolve(this.yi(t)))}pi(e){return ec(e).delete(this.clientId)}Ii(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Fs(s,"clientMetadata");return a.W().next(l=>{const p=e.Ei(l,18e5),I=l.filter(O=>-1===p.indexOf(O));return Oe.forEach(I,O=>a.delete(O.clientId)).next(()=>I)})}).catch(()=>[]);if(e.ci)for(const s of t)e.ci.removeItem(e.Ai(s.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?Oe.resolve(!0):Iu(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new te(B.FAILED_PRECONDITION,Cc);return!1}}return!(!this.networkEnabled||!this.inForeground)||ec(e).W().next(s=>void 0===this.Ei(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&dt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Hf(t,va.at);return e.mi(s).next(()=>e.pi(s))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(s=>this.Ti(s.updateTimeMs,t)&&!this.Ri(s.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>ec(e).W().next(t=>this.Ei(t,18e5).map(s=>s.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return rm.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qf(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Zf.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,s){dt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(p=this.ti)?vE:14===p?Ov:13===p?$f:12===p?Nv:11===p?jf:void d();var p;let I;return this.ui.runTransaction(e,a,l,O=>(I=new Hf(O,this.Cs?this.Cs.next():va.at),"readwrite-primary"===t?this._i(I).next(U=>!!U||this.wi(I)).next(U=>{if(!U)throw wi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new te(B.FAILED_PRECONDITION,Ly);return s(I)}).next(U=>this.gi(I).next(()=>U)):this.Di(I).next(()=>s(I)))).then(O=>(I.raiseOnCommittedEvent(),O))}Di(e){return Iu(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new te(B.FAILED_PRECONDITION,Cc)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Iu(e).put("owner",t)}static C(){return ta.C()}mi(e){const t=Iu(e);return t.get("owner").next(s=>this.yi(s)?(dt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Oe.resolve())}Ti(e,t){const s=Date.now();return!(e<s-t||e>s&&(wi(`Detected an update time that is in the future: ${e} > ${s}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,At.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const s=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return dt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return wi("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){wi("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Iu(n){return Fs(n,"owner")}function ec(n){return Fs(n,"clientMetadata")}function Sc(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ac{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ci=s,this.xi=a}static Ni(e,t){let s=In(),a=In();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ac(e,t.fromCache,s,a)}}class fl{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Mi(e,t).next(l=>l||this.Oi(e,t,a,s)).next(l=>l||this.Fi(e,t))}Mi(e,t){if(Rg(t))return Oe.resolve(null);let s=Fo(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=nl(t,null,"F"),s=Fo(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const p=In(...l);return this.$i.getDocuments(e,p).next(I=>this.indexManager.getMinOffset(e,s).next(O=>{const U=this.Bi(t,I);return this.Li(t,U,p,O.readTime)?this.Mi(e,nl(t,null,"F")):this.qi(e,U,t,O)}))})))}Oi(e,t,s,a){return Rg(t)||a.isEqual(Jt.min())?this.Fi(e,t):this.$i.getDocuments(e,s).next(l=>{const p=this.Bi(t,l);return this.Li(t,p,s,a)?this.Fi(e,t):(Vu()<=Tn.in.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),fh(t)),this.qi(e,p,t,vg(a,-1)))})}Bi(e,t){let s=new Cr(Og(e));return t.forEach((a,l)=>{ph(e,l)&&(s=s.add(l))}),s}Li(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Fi(e,t){return Vu()<=Tn.in.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",fh(t)),this.$i.getDocumentsMatchingQuery(e,t,Oa.min())}qi(e,t,s,a){return this.$i.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(p=>{l=l.insert(p.key,p)}),l))}}class cd{constructor(e,t,s,a){this.persistence=e,this.Ui=t,this.Tt=a,this.Ki=new Oi(un),this.Gi=new il(l=>el(l),Bl),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(s)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AE(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function lm(n,e,t,s){return new cd(n,e,t,s)}function dm(n,e){return ip.apply(this,arguments)}function ip(){return ip=(0,Ee.Z)(function*(n,e){const t=L(n);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.zi(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const p=[],I=[];let O=In();for(const U of a){p.push(U.batchId);for(const Y of U.mutations)O=O.add(Y.key)}for(const U of l){I.push(U.batchId);for(const Y of U.mutations)O=O.add(Y.key)}return t.localDocuments.getDocuments(s,O).next(U=>({Wi:U,removedBatchIds:p,addedBatchIds:I}))})})}),ip.apply(this,arguments)}function Xv(n,e){const t=L(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.ji.newChangeBuffer({trackRemovals:!0});return function(p,I,O,U){const Y=O.batch,ue=Y.keys();let De=Oe.resolve();return ue.forEach(Be=>{De=De.next(()=>U.getEntry(I,Be)).next(st=>{const Et=O.docVersions.get(Be);f(null!==Et),st.version.compareTo(Et)<0&&(Y.applyToRemoteDocument(st,O),st.isValidDocument()&&(st.setReadTime(O.commitVersion),U.addEntry(st)))})}),De.next(()=>p.mutationQueue.removeMutationBatch(I,Y))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let I=In();for(let O=0;O<p.mutationResults.length;++O)p.mutationResults[O].transformResults.length>0&&(I=I.add(p.batch.mutations[O].key));return I}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function hm(n){const e=L(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function e_(n,e){const t=L(n),s=e.snapshotVersion;let a=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.ji.newChangeBuffer({trackRemovals:!0});a=t.Ki;const I=[];e.targetChanges.forEach((Y,ue)=>{const De=a.get(ue);if(!De)return;I.push(t.Ns.removeMatchingKeys(l,Y.removedDocuments,ue).next(()=>t.Ns.addMatchingKeys(l,Y.addedDocuments,ue)));let Be=De.withSequenceNumber(l.currentSequenceNumber);var st,Et,Bt;e.targetMismatches.has(ue)?Be=Be.withResumeToken(Ni.EMPTY_BYTE_STRING,Jt.min()).withLastLimboFreeSnapshotVersion(Jt.min()):Y.resumeToken.approximateByteSize()>0&&(Be=Be.withResumeToken(Y.resumeToken,s)),a=a.insert(ue,Be),Et=Be,Bt=Y,(0===(st=De).resumeToken.approximateByteSize()||Et.snapshotVersion.toMicroseconds()-st.snapshotVersion.toMicroseconds()>=3e8||Bt.addedDocuments.size+Bt.modifiedDocuments.size+Bt.removedDocuments.size>0)&&I.push(t.Ns.updateTargetData(l,Be))});let O=_a(),U=In();if(e.documentUpdates.forEach(Y=>{e.resolvedLimboDocuments.has(Y)&&I.push(t.persistence.referenceDelegate.updateLimboDocument(l,Y))}),I.push(fm(l,p,e.documentUpdates).next(Y=>{O=Y.Hi,U=Y.Ji})),!s.isEqual(Jt.min())){const Y=t.Ns.getLastRemoteSnapshotVersion(l).next(ue=>t.Ns.setTargetsMetadata(l,l.currentSequenceNumber,s));I.push(Y)}return Oe.waitFor(I).next(()=>p.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,O,U)).next(()=>O)}).then(l=>(t.Ki=a,l))}function fm(n,e,t){let s=In(),a=In();return t.forEach(l=>s=s.add(l)),e.getEntries(n,s).next(l=>{let p=_a();return t.forEach((I,O)=>{const U=l.get(I);O.isFoundDocument()!==U.isFoundDocument()&&(a=a.add(I)),O.isNoDocument()&&O.version.isEqual(Jt.min())?(e.removeEntry(I,O.readTime),p=p.insert(I,O)):!U.isValidDocument()||O.version.compareTo(U.version)>0||0===O.version.compareTo(U.version)&&U.hasPendingWrites?(e.addEntry(O),p=p.insert(I,O)):dt("LocalStore","Ignoring outdated watch update for ",I,". Current version:",U.version," Watch version:",O.version)}),{Hi:p,Ji:a}})}function t_(n,e){const t=L(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function pl(n,e){const t=L(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Ns.getTargetData(s,e).next(l=>l?(a=l,Oe.resolve(a)):t.Ns.allocateTargetId(s).next(p=>(a=new wc(e,p,0,s.currentSequenceNumber),t.Ns.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ki.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(s.targetId,s),t.Gi.set(e,s.targetId)),s})}function ld(n,e,t){return pm.apply(this,arguments)}function pm(){return pm=(0,Ee.Z)(function*(n,e,t){const s=L(n),a=s.Ki.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!mu(p))throw p;dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ki=s.Ki.remove(e),s.Gi.delete(a.target)}),pm.apply(this,arguments)}function Nh(n,e,t){const s=L(n);let a=Jt.min(),l=In();return s.persistence.runTransaction("Execute query","readonly",p=>function(I,O,U){const Y=L(I),ue=Y.Gi.get(U);return void 0!==ue?Oe.resolve(Y.Ki.get(ue)):Y.Ns.getTargetData(O,U)}(s,p,Fo(e)).next(I=>{if(I)return a=I.lastLimboFreeSnapshotVersion,s.Ns.getMatchingKeysForTargetId(p,I.targetId).next(O=>{l=O})}).next(()=>s.Ui.getDocumentsMatchingQuery(p,e,t?a:Jt.min(),t?l:In())).next(I=>(sp(s,ev(e),I),{documents:I,Yi:l})))}function n_(n,e){const t=L(n),s=L(t.Ns),a=t.Ki.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.ie(l,e).next(p=>p?p.target:null))}function r_(n,e){const t=L(n),s=t.Qi.get(e)||Jt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ji.getAllFromCollectionGroup(a,e,vg(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(sp(t,e,a),a))}function sp(n,e,t){let s=n.Qi.get(e)||Jt.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),n.Qi.set(e,s)}function mm(){return mm=(0,Ee.Z)(function*(n,e,t,s){const a=L(n);let l=In(),p=_a();for(const U of t){const Y=e.Zi(U.metadata.name);U.document&&(l=l.add(Y));const ue=e.Xi(U);ue.setReadTime(e.tr(U.metadata.readTime)),p=p.insert(Y,ue)}const I=a.ji.newChangeBuffer({trackRemovals:!0}),O=yield pl(a,(U=s,Fo(tl(Hn.fromString(`__bundle__/docs/${U}`)))));var U;return a.persistence.runTransaction("Apply bundle documents","readwrite",U=>fm(U,I,p).next(Y=>(I.apply(U),Y)).next(Y=>a.Ns.removeMatchingKeysForTargetId(U,O.targetId).next(()=>a.Ns.addMatchingKeys(U,l,O.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(U,Y.Hi,Y.Ji)).next(()=>Y.Hi)))}),mm.apply(this,arguments)}function op(n,e){return dd.apply(this,arguments)}function dd(){return dd=(0,Ee.Z)(function*(n,e,t=In()){const s=yield pl(n,Fo(Wf(e.bundledQuery))),a=L(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=Yi(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.$s.saveNamedQuery(l,e);const I=s.withResumeToken(Ni.EMPTY_BYTE_STRING,p);return a.Ki=a.Ki.insert(I.targetId,I),a.Ns.updateTargetData(l,I).next(()=>a.Ns.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.Ns.addMatchingKeys(l,t,s.targetId)).next(()=>a.$s.saveNamedQuery(l,e))})}),dd.apply(this,arguments)}function ap(n,e){return`firestore_clients_${n}_${e}`}function i_(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Oh(n,e){return`firestore_targets_${n}_${e}`}class hd{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static er(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new te(a.error.code,a.error.message))),p?new hd(e,t,a.state,l):(wi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fd{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static er(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new te(s.error.code,s.error.message))),l?new fd(e,s.state,a):(wi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=Of();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=wf(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new Ph(e,l):(wi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class kh{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kh(t.clientId,t.onlineState):(wi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class up{constructor(){this.activeTargetIds=Of()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cp{constructor(e,t,s,a,l){this.window=e,this.Ys=t,this.persistenceKey=s,this.rr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Oi(un),this.started=!1,this.hr=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.lr=ap(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new up),this._r=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(I){return`firestore_bundle_loaded_v2_${I}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Si();for(const a of t){if(a===e.rr)continue;const l=e.getItem(ap(e.persistenceKey,a));if(l){const p=Ph.er(a,l);p&&(e.ar=e.ar.insert(p.clientId,p))}}e.pr();const s=e.storage.getItem(e.gr);if(s){const a=e.Ir(s);a&&e.Tr(a)}for(const a of e.hr)e.cr(a);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,s){this.Ar(e,t,s),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Oh(this.persistenceKey,e));if(s){const a=fd.er(e,s);a&&(t=a.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Oh(this.persistenceKey,e))}updateQueryState(e,t,s){this.vr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Rr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return dt("SharedClientState","READ",e,t),t}setItem(e,t){dt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){dt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(dt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.lr)return void wi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==s.key)if(t._r.test(s.key)){if(null==s.newValue){const a=t.Sr(s.key);return t.Dr(a,null)}{const a=t.Cr(s.key,s.newValue);if(a)return t.Dr(a.clientId,a)}}else if(t.wr.test(s.key)){if(null!==s.newValue){const a=t.Nr(s.key,s.newValue);if(a)return t.kr(a)}}else if(t.mr.test(s.key)){if(null!==s.newValue){const a=t.$r(s.key,s.newValue);if(a)return t.Mr(a)}}else if(s.key===t.gr){if(null!==s.newValue){const a=t.Ir(s.newValue);if(a)return t.Tr(a)}}else if(s.key===t.dr){const a=function(l){let p=va.at;if(null!=l)try{const I=JSON.parse(l);f("number"==typeof I),p=I}catch(I){wi("SharedClientState","Failed to read sequence number from WebStorage",I)}return p}(s.newValue);a!==va.at&&t.sequenceNumberHandler(a)}else if(s.key===t.yr){const a=t.Or(s.newValue);yield Promise.all(a.map(l=>t.syncEngine.Fr(l)))}}else t.hr.push(s)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,s){const a=new hd(this.currentUser,e,t,s),l=i_(this.persistenceKey,this.currentUser,e);this.setItem(l,a.nr())}Rr(e){const t=i_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,s){const a=Oh(this.persistenceKey,e),l=new fd(e,t,s);this.setItem(a,l.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const s=this.Sr(e);return Ph.er(s,t)}Nr(e,t){const s=this.wr.exec(e),a=Number(s[1]);return hd.er(new Ki(void 0!==s[2]?s[2]:null),a,t)}$r(e,t){const s=this.mr.exec(e),a=Number(s[1]);return fd.er(a,t)}Ir(e){return kh.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);dt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const s=t?this.ar.insert(e,t):this.ar.remove(e),a=this.Er(this.ar),l=this.Er(s),p=[],I=[];return l.forEach(O=>{a.has(O)||p.push(O)}),a.forEach(O=>{l.has(O)||I.push(O)}),this.syncEngine.qr(p,I).then(()=>{this.ar=s})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=Of();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class lp{constructor(){this.Ur=new up,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,s){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new up,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class s_{Gr(e){}shutdown(){}}class o_{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fh=null;function dp(){return null===Fh?Fh=268435456+Math.round(2147483648*Math.random()):Fh++,"0x"+Fh.toString(16)}const a_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u_{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const _o="WebChannelConnection";class c_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,s,a,l){const p=dp(),I=this.fo(e,t);dt("RestConnection",`Sending RPC '${e}' ${p}:`,I,s);const O={};return this._o(O,a,l),this.wo(e,I,O,s).then(U=>(dt("RestConnection",`Received RPC '${e}' ${p}: `,U),U),U=>{throw Uu("RestConnection",`RPC '${e}' ${p} failed with error: `,U,"url: ",I,"request:",s),U})}mo(e,t,s,a,l,p){return this.lo(e,t,s,a,l)}_o(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+gu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}fo(e,t){return`${this.co}/v1/${t}:${a_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,s,a){const l=dp();return new Promise((p,I)=>{const O=new Ks;O.setWithCredentials(!0),O.listenOnce(mg.COMPLETE,()=>{try{switch(O.getLastErrorCode()){case Wc.NO_ERROR:const Y=O.getResponseJson();dt(_o,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(Y)),p(Y);break;case Wc.TIMEOUT:dt(_o,`RPC '${e}' ${l} timed out`),I(new te(B.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const ue=O.getStatus();if(dt(_o,`RPC '${e}' ${l} failed with status:`,ue,"response text:",O.getResponseText()),ue>0){let De=O.getResponseJson();Array.isArray(De)&&(De=De[0]);const Be=De?.error;if(Be&&Be.status&&Be.message){const st=function(Et){const Bt=Et.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(Bt)>=0?Bt:B.UNKNOWN}(Be.status);I(new te(st,Be.message))}else I(new te(B.UNKNOWN,"Server responded with status "+O.getStatus()))}else I(new te(B.UNAVAILABLE,"Connection failed."));break;default:d()}}finally{dt(_o,`RPC '${e}' ${l} completed.`)}});const U=JSON.stringify(a);dt(_o,`RPC '${e}' ${l} sending request:`,a),O.send(t,"POST",U,s,15)})}yo(e,t,s){const a=dp(),l=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Ml(),I=Kd(),O={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(O.xmlHttpFactory=new Qd({})),this._o(O.initMessageHeaders,t,s),O.encodeInitMessageHeaders=!0;const U=l.join("");dt(_o,`Creating RPC '${e}' stream ${a}: ${U}`,O);const Y=p.createWebChannel(U,O);let ue=!1,De=!1;const Be=new u_({Yr:Et=>{De?dt(_o,`Not sending because RPC '${e}' stream ${a} is closed:`,Et):(ue||(dt(_o,`Opening RPC '${e}' stream ${a} transport.`),Y.open(),ue=!0),dt(_o,`RPC '${e}' stream ${a} sending:`,Et),Y.send(Et))},Zr:()=>Y.close()}),st=(Et,Bt,Qn)=>{Et.listen(Bt,ti=>{try{Qn(ti)}catch(Dn){setTimeout(()=>{throw Dn},0)}})};return st(Y,Rl.EventType.OPEN,()=>{De||dt(_o,`RPC '${e}' stream ${a} transport opened.`)}),st(Y,Rl.EventType.CLOSE,()=>{De||(De=!0,dt(_o,`RPC '${e}' stream ${a} transport closed`),Be.oo())}),st(Y,Rl.EventType.ERROR,Et=>{De||(De=!0,Uu(_o,`RPC '${e}' stream ${a} transport errored:`,Et),Be.oo(new te(B.UNAVAILABLE,"The operation could not be completed")))}),st(Y,Rl.EventType.MESSAGE,Et=>{var Bt;if(!De){const Qn=Et.data[0];f(!!Qn);const Dn=Qn.error||(null===(Bt=Qn[0])||void 0===Bt?void 0:Bt.error);if(Dn){dt(_o,`RPC '${e}' stream ${a} received error:`,Dn);const Fn=Dn.status;let bn=function(Vs){const ac=xr[Vs];if(void 0!==ac)return nE(ac)}(Fn),Mn=Dn.message;void 0===bn&&(bn=B.INTERNAL,Mn="Unknown error status: "+Fn+" with message "+Dn.message),De=!0,Be.oo(new te(bn,Mn)),Y.close()}else dt(_o,`RPC '${e}' stream ${a} received:`,Qn),Be.uo(Qn)}}),st(I,ff.STAT_EVENT,Et=>{Et.stat===Yd.PROXY?dt(_o,`RPC '${e}' stream ${a} detected buffering proxy`):Et.stat===Yd.NOPROXY&&dt(_o,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Be.ro()},0),Be}}function ym(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}function xc(n){return new _v(n,!0)}class Vh{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Ys=e,this.timerId=t,this.po=s,this.Io=a,this.To=l,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),s=Math.max(0,Date.now()-this.Ro),a=Math.max(0,t-s);a>0&&dt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,a,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class hp{constructor(e,t,s,a,l,p,I,O){this.Ys=e,this.So=s,this.Do=a,this.connection=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=I,this.listener=O,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Vh(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,Ee.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var s=this;return(0,Ee.Z)(function*(){s.Uo(),s.Ko(),s.ko.cancel(),s.Co++,4!==e?s.ko.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(wi(t.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),s.ko.Po()):t&&t.code===B.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Go(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Co===t&&this.jo(s,a)},s=>{e(()=>{const a=new te(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.zo(a)})})}jo(e,t){const s=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{s(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(a=>{s(()=>this.zo(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.ko.vo((0,Ee.Z)(function*(){e.state=0,e.start()}))}zo(e){return dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l_ extends hp{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.Tt=l}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function lE(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(O=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===O?1:"REMOVE"===O?2:"CURRENT"===O?3:"RESET"===O?4:d(),a=e.targetChange.targetIds||[],l=function(O,U){return O.yt?(f(void 0===U||"string"==typeof U),Ni.fromBase64String(U||"")):(f(void 0===U||U instanceof Uint8Array),Ni.fromUint8Array(U||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,I=p&&function(O){const U=void 0===O.code?B.UNKNOWN:nE(O.code);return new te(U,O.message||"")}(p);t=new mv(s,a,l,I||null)}else if("documentChange"in e){const s=e.documentChange,a=go(n,s.document.name),l=Yi(s.document.updateTime),p=s.document.createTime?Yi(s.document.createTime):Jt.min(),I=new os({mapValue:{fields:s.document.fields}}),O=zr.newFoundDocument(a,l,p,I);t=new wh(s.targetIds||[],s.removedTargetIds||[],O.key,O)}else if("documentDelete"in e){const s=e.documentDelete,a=go(n,s.document),l=s.readTime?Yi(s.readTime):Jt.min(),p=zr.newNoDocument(a,l);t=new wh([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=go(n,s.document);t=new wh([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return d();{const s=e.filter,l=new Yl(s.count||0);t=new gv(s.targetId,l)}}var O;return t}(this.Tt,e),s=function(a){if(!("targetChange"in a))return Jt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Jt.min():l.readTime?Yi(l.readTime):Jt.min()}(e);return this.listener.Ho(t,s)}Jo(e){const t={};t.database=sl(this.Tt),t.addTarget=function(a,l){let p;const I=l.target;return p=lh(I)?{documents:ol(a,I)}:{query:Gg(a,I)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=jg(a,l.resumeToken):l.snapshotVersion.compareTo(Jt.min())>0&&(p.readTime=Jl(a,l.snapshotVersion.toTimestamp())),p}(this.Tt,e);const s=function kf(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return d()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.qo(t)}Yo(e){const t={};t.database=sl(this.Tt),t.removeTarget=e,this.qo(t)}}class d_ extends hp{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.Tt=l,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(f(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function dE(n,e){return n&&n.length>0?(f(void 0!==e),n.map(t=>function(s,a){let l=Yi(s.updateTime?s.updateTime:a);return l.isEqual(Jt.min())&&(l=Yi(a)),new tE(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Yi(e.commitTime);return this.listener.eu(s,t)}return f(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=sl(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>ed(this.Tt,s))};this.qo(t)}}class h_ extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.Tt=a,this.iu=!1}ru(){if(this.iu)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,s){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.lo(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new te(B.UNKNOWN,a.toString())})}mo(e,t,s,a){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.mo(e,t,s,l,p,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new te(B.UNKNOWN,l.toString())})}terminate(){this.iu=!0}}class p_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(wi(t),this.cu=!1):dt("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class pp{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=l,this.yu.Gr(I=>{s.enqueueAndForget((0,Ee.Z)(function*(){var O;tc(p)&&(dt("RemoteStore","Restarting streams for network reachability change."),yield(O=(0,Ee.Z)(function*(U){const Y=L(U);Y.mu.add(4),yield pd(Y),Y.pu.set("Unknown"),Y.mu.delete(4),yield ka(Y)}),function(U){return O.apply(this,arguments)})(p))}))}),this.pu=new p_(s,a)}}function ka(n){return vm.apply(this,arguments)}function vm(){return vm=(0,Ee.Z)(function*(n){if(tc(n))for(const e of n.gu)yield e(!0)}),vm.apply(this,arguments)}function pd(n){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,Ee.Z)(function*(n){for(const e of n.gu)yield e(!1)}),Uh.apply(this,arguments)}function Du(n,e){const t=L(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),m_(t)?g_(t):gd(t).Mo()&&_m(t,e))}function gl(n,e){const t=L(n),s=gd(t);t.wu.delete(e),s.Mo()&&gp(t,e),0===t.wu.size&&(s.Mo()?s.Bo():tc(t)&&t.pu.set("Unknown"))}function _m(n,e){n.Iu.Ot(e.targetId),gd(n).Jo(e)}function gp(n,e){n.Iu.Ot(e),gd(n).Yo(e)}function g_(n){n.Iu=new yn({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),gd(n).start(),n.pu.au()}function m_(n){return tc(n)&&!gd(n).$o()&&n.wu.size>0}function tc(n){return 0===L(n).mu.size}function y_(n){n.Iu=void 0}function v_(n){return Em.apply(this,arguments)}function Em(){return Em=(0,Ee.Z)(function*(n){n.wu.forEach((e,t)=>{_m(n,e)})}),Em.apply(this,arguments)}function _s(n,e){return mp.apply(this,arguments)}function mp(){return mp=(0,Ee.Z)(function*(n,e){y_(n),m_(n)?(n.pu.fu(e),g_(n)):n.pu.set("Unknown")}),mp.apply(this,arguments)}function RE(n,e,t){return wm.apply(this,arguments)}function wm(){return wm=(0,Ee.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof mv&&2===e.state&&e.cause)try{yield(s=(0,Ee.Z)(function*(a,l){const p=l.cause;for(const I of l.targetIds)a.wu.has(I)&&(yield a.remoteSyncer.rejectListen(I,p),a.wu.delete(I),a.Iu.removeTarget(I))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Bh(n,s)}else if(e instanceof wh?n.Iu.Qt(e):e instanceof gv?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(Jt.min()))try{const s=yield hm(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.Iu.ee(l);return p.targetChanges.forEach((I,O)=>{if(I.resumeToken.approximateByteSize()>0){const U=a.wu.get(O);U&&a.wu.set(O,U.withResumeToken(I.resumeToken,l))}}),p.targetMismatches.forEach(I=>{const O=a.wu.get(I);if(!O)return;a.wu.set(I,O.withResumeToken(Ni.EMPTY_BYTE_STRING,O.snapshotVersion)),gp(a,I);const U=new wc(O.target,I,1,O.sequenceNumber);_m(a,U)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(s){dt("RemoteStore","Failed to raise snapshot:",s),yield Bh(n,s)}var s}),wm.apply(this,arguments)}function Bh(n,e,t){return Im.apply(this,arguments)}function Im(){return Im=(0,Ee.Z)(function*(n,e,t){if(!mu(e))throw e;n.mu.add(1),yield pd(n),n.pu.set("Offline"),t||(t=()=>hm(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){dt("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield ka(n)}))}),Im.apply(this,arguments)}function Dm(n,e){return e().catch(t=>Bh(n,t,e))}function ml(n){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,Ee.Z)(function*(n){const e=L(n),t=Rc(e);let s=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;NE(e);)try{const a=yield t_(e.localStore,s);if(null===a){0===e._u.length&&t.Bo();break}s=a.batchId,OE(e,a)}catch(a){yield Bh(e,a)}bm(e)&&__(e)}),Mc.apply(this,arguments)}function NE(n){return tc(n)&&n._u.length<10}function OE(n,e){n._u.push(e);const t=Rc(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function bm(n){return tc(n)&&!Rc(n).$o()&&n._u.length>0}function __(n){Rc(n).start()}function E_(n){return w_.apply(this,arguments)}function w_(){return w_=(0,Ee.Z)(function*(n){Rc(n).su()}),w_.apply(this,arguments)}function Cm(n){return jh.apply(this,arguments)}function jh(){return jh=(0,Ee.Z)(function*(n){const e=Rc(n);for(const t of n._u)e.tu(t.mutations)}),jh.apply(this,arguments)}function bu(n,e,t){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Ee.Z)(function*(n,e,t){const s=n._u.shift(),a=zf.from(s,e,t);yield Dm(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield ml(n)}),Tm.apply(this,arguments)}function PE(n,e){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,Ee.Z)(function*(n,e){var t;e&&Rc(n).Xo&&(yield(t=(0,Ee.Z)(function*(s,a){if(dv(l=a.code)&&l!==B.ABORTED){const p=s._u.shift();Rc(s).Fo(),yield Dm(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield ml(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),bm(n)&&__(n)}),Fa.apply(this,arguments)}function La(n,e){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,Ee.Z)(function*(n,e){const t=L(n);t.asyncQueue.verifyOperationInProgress(),dt("RemoteStore","RemoteStore received new credentials");const s=tc(t);t.mu.add(3),yield pd(t),s&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield ka(t)}),Ea.apply(this,arguments)}function yp(n,e){return vp.apply(this,arguments)}function vp(){return vp=(0,Ee.Z)(function*(n,e){const t=L(n);e?(t.mu.delete(2),yield ka(t)):e||(t.mu.add(2),yield pd(t),t.pu.set("Unknown"))}),vp.apply(this,arguments)}function gd(n){return n.Tu||(n.Tu=function(e,t,s){const a=L(e);return a.ru(),new l_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.Tt,s)}(n.datastore,n.asyncQueue,{Xr:v_.bind(null,n),no:_s.bind(null,n),Ho:RE.bind(null,n)}),n.gu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Tu.Fo(),m_(n)?g_(n):n.pu.set("Unknown")):(yield n.Tu.stop(),y_(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function Rc(n){return n.Eu||(n.Eu=function(e,t,s){const a=L(e);return a.ru(),new d_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.Tt,s)}(n.datastore,n.asyncQueue,{Xr:E_.bind(null,n),no:PE.bind(null,n),nu:Cm.bind(null,n),eu:bu.bind(null,n)}),n.gu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Eu.Fo(),yield ml(n)):(yield n.Eu.stop(),n._u.length>0&&(dt("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class Sm{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Ye,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,I=new Sm(e,t,p,a,l);return I.start(s),I}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new te(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function md(n,e){if(wi("AsyncQueue",`${e}: ${n}`),mu(n))return new te(B.UNAVAILABLE,`${e}: ${n}`);throw n}class Nc{constructor(e){this.comparator=e?(t,s)=>e(t,s)||St.comparator(t.key,s.key):(t,s)=>St.comparator(t.key,s.key),this.keyedMap=Ql(),this.sortedSet=new Oi(this.comparator)}static emptySet(e){return new Nc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Nc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class yd{constructor(){this.Au=new Oi(St.comparator)}track(e){const t=e.doc.key,s=this.Au.get(t);s?0!==e.type&&3===s.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==s.type?this.Au=this.Au.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Au=this.Au.remove(t):1===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):d():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,s)=>{e.push(s)}),e}}class vd{constructor(e,t,s,a,l,p,I,O,U){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=I,this.excludesMetadataChanges=O,this.hasCachedResults=U}static fromInitialDocuments(e,t,s,a,l){const p=[];return t.forEach(I=>{p.push({type:0,doc:I})}),new vd(e,t,Nc.emptySet(t),p,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class I_{constructor(){this.Pu=void 0,this.listeners=[]}}class kE{constructor(){this.queries=new il(e=>Ng(e),eu),this.onlineState="Unknown",this.vu=new Set}}function _p(n,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,Ee.Z)(function*(n,e){const t=L(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new I_),a)try{l.Pu=yield t.onListen(s)}catch(p){const I=md(p,`Initialization of query '${fh(e.query)}' failed`);return void e.onError(I)}t.queries.set(s,l),l.listeners.push(e),e.bu(t.onlineState),l.Pu&&e.Vu(l.Pu)&&$h(t)}),Ep.apply(this,arguments)}function _d(n,e){return Am.apply(this,arguments)}function Am(){return Am=(0,Ee.Z)(function*(n,e){const t=L(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Am.apply(this,arguments)}function D_(n,e){const t=L(n);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const I of p.listeners)I.Vu(a)&&(s=!0);p.Pu=a}}s&&$h(t)}function b_(n,e,t){const s=L(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function $h(n){n.vu.forEach(e=>{e.next()})}class Ed{constructor(e,t,s){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=s||{}}Vu(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new vd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=vd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class xm{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class wp{constructor(e){this.Tt=e}Zi(e){return go(this.Tt,e)}Xi(e){return e.metadata.exists?cE(this.Tt,e.document,!1):zr.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Yi(e)}}class C_{constructor(e,t,s){this.Fu=e,this.localStore=t,this.Tt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mm(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const s=Hn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,s=new wp(this.Tt);for(const a of e)if(a.metadata.queries){const l=s.Zi(a.metadata.name);for(const p of a.metadata.queries){const I=(t.get(p)||In()).add(l);t.set(p,I)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function gm(n,e,t,s){return mm.apply(this,arguments)}(e.localStore,new wp(e.Tt),e.documents,e.Fu.id),s=e.Lu(e.documents);for(const a of e.queries)yield op(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function Mm(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Rm{constructor(e){this.key=e}}class Nm{constructor(e){this.key=e}}class Om{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=In(),this.mutatedKeys=In(),this.ju=Og(e),this.zu=new Nc(this.ju)}get Wu(){return this.Ku}Hu(e,t){const s=t?t.Ju:new yd,a=t?t.zu:this.zu;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,I=!1;const O="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,U="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((Y,ue)=>{const De=a.get(Y),Be=ph(this.query,ue)?ue:null,st=!!De&&this.mutatedKeys.has(De.key),Et=!!Be&&(Be.hasLocalMutations||this.mutatedKeys.has(Be.key)&&Be.hasCommittedMutations);let Bt=!1;De&&Be?De.data.isEqual(Be.data)?st!==Et&&(s.track({type:3,doc:Be}),Bt=!0):this.Yu(De,Be)||(s.track({type:2,doc:Be}),Bt=!0,(O&&this.ju(Be,O)>0||U&&this.ju(Be,U)<0)&&(I=!0)):!De&&Be?(s.track({type:0,doc:Be}),Bt=!0):De&&!Be&&(s.track({type:1,doc:De}),Bt=!0,(O||U)&&(I=!0)),Bt&&(Be?(p=p.add(Be),l=Et?l.add(Y):l.delete(Y)):(p=p.delete(Y),l=l.delete(Y)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const Y="F"===this.query.limitType?p.last():p.first();p=p.delete(Y.key),l=l.delete(Y.key),s.track({type:1,doc:Y})}return{zu:p,Ju:s,Li:I,mutatedKeys:l}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const l=e.Ju.Ru();l.sort((U,Y)=>function(ue,De){const Be=st=>{switch(st){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return d()}};return Be(ue)-Be(De)}(U.type,Y.type)||this.ju(U.doc,Y.doc)),this.Zu(s);const p=t?this.Xu():[],I=0===this.Qu.size&&this.current?1:0,O=I!==this.Gu;return this.Gu=I,0!==l.length||O?{snapshot:new vd(this.query,e.zu,a,l,e.mutatedKeys,0===I,O,!1,!!s&&s.resumeToken.approximateByteSize()>0),tc:p}:{tc:p}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new yd,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=In(),this.zu.forEach(s=>{this.ec(s.key)&&(this.Qu=this.Qu.add(s.key))});const t=[];return e.forEach(s=>{this.Qu.has(s)||t.push(new Nm(s))}),this.Qu.forEach(s=>{e.has(s)||t.push(new Rm(s))}),t}nc(e){this.Ku=e.Yi,this.Qu=In();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return vd.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class T_{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class S_{constructor(e){this.key=e,this.ic=!1}}class FE{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.rc={},this.oc=new il(I=>Ng(I),eu),this.uc=new Map,this.cc=new Set,this.ac=new Oi(St.comparator),this.hc=new Map,this.lc=new um,this.fc={},this.dc=new Map,this._c=cl.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function LE(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,Ee.Z)(function*(n,e){const t=Mp(n);let s,a;const l=t.oc.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.sc();else{const p=yield pl(t.localStore,Fo(e));t.isPrimaryClient&&Du(t.remoteStore,p);const I=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield km(t,e,s,"current"===I,p.resumeToken)}return a}),Pm.apply(this,arguments)}function km(n,e,t,s,a){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Ee.Z)(function*(n,e,t,s,a){n.mc=(ue,De,Be)=>{return(st=(0,Ee.Z)(function*(Et,Bt,Qn,ti){let Dn=Bt.view.Hu(Qn);Dn.Li&&(Dn=yield Nh(Et.localStore,Bt.query,!1).then(({documents:Mn})=>Bt.view.Hu(Mn,Dn)));const Fn=ti&&ti.targetChanges.get(Bt.targetId),bn=Bt.view.applyChanges(Dn,Et.isPrimaryClient,Fn);return Tp(Et,Bt.targetId,bn.tc),bn.snapshot}),function(Et,Bt,Qn,ti){return st.apply(this,arguments)})(n,ue,De,Be);var st};const l=yield Nh(n.localStore,e,!0),p=new Om(e,l.Yi),I=p.Hu(l.documents),O=Eh.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState,a),U=p.applyChanges(I,n.isPrimaryClient,O);Tp(n,t,U.tc);const Y=new T_(e,t,p);return n.oc.set(e,Y),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),U.snapshot}),Fm.apply(this,arguments)}function VE(n,e){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,Ee.Z)(function*(n,e){const t=L(n),s=t.oc.get(e),a=t.uc.get(s.targetId);if(a.length>1)return t.uc.set(s.targetId,a.filter(l=>!eu(l,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ld(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),gl(t.remoteStore,s.targetId),yl(t,s.targetId)}).catch($u))):(yl(t,s.targetId),yield ld(t.localStore,s.targetId,!0))}),Lm.apply(this,arguments)}function Vm(){return Vm=(0,Ee.Z)(function*(n,e,t){const s=Rp(n);try{const a=yield function(l,p){const I=L(l),O=Ar.now(),U=p.reduce((De,Be)=>De.add(Be.key),In());let Y,ue;return I.persistence.runTransaction("Locally write mutations","readwrite",De=>{let Be=_a(),st=In();return I.ji.getEntries(De,U).next(Et=>{Be=Et,Be.forEach((Bt,Qn)=>{Qn.isValidDocument()||(st=st.add(Bt))})}).next(()=>I.localDocuments.getOverlayedDocuments(De,Be)).next(Et=>{Y=Et;const Bt=[];for(const Qn of p){const ti=kg(Qn,Y.get(Qn.key).overlayedDocument);null!=ti&&Bt.push(new Yu(Qn.key,ti,Mg(ti.value.mapValue),pi.exists(!0)))}return I.mutationQueue.addMutationBatch(De,O,Bt,p)}).next(Et=>{ue=Et;const Bt=Et.applyToLocalDocumentSet(Y,st);return I.documentOverlayCache.saveOverlays(De,Et.batchId,Bt)})}).then(()=>({batchId:ue.batchId,changes:fv(Y)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,I){let O=l.fc[l.currentUser.toKey()];O||(O=new Oi(un)),O=O.insert(p,I),l.fc[l.currentUser.toKey()]=O}(s,a.batchId,t),yield Cu(s,a.changes),yield ml(s.remoteStore)}catch(a){const l=md(a,"Failed to persist write");t.reject(l)}}),Vm.apply(this,arguments)}function A_(n,e){return Um.apply(this,arguments)}function Um(){return Um=(0,Ee.Z)(function*(n,e){const t=L(n);try{const s=yield e_(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.hc.get(l);p&&(f(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.ic=!0:a.modifiedDocuments.size>0?f(p.ic):a.removedDocuments.size>0&&(f(p.ic),p.ic=!1))}),yield Cu(t,s,e)}catch(s){yield $u(s)}}),Um.apply(this,arguments)}function x_(n,e,t){const s=L(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.oc.forEach((l,p)=>{const I=p.view.bu(e);I.snapshot&&a.push(I.snapshot)}),function(l,p){const I=L(l);I.onlineState=p;let O=!1;I.queries.forEach((U,Y)=>{for(const ue of Y.listeners)ue.bu(p)&&(O=!0)}),O&&$h(I)}(s.eventManager,e),a.length&&s.rc.Ho(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function BE(n,e,t){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,Ee.Z)(function*(n,e,t){const s=L(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.hc.get(e),l=a&&a.key;if(l){let p=new Oi(St.comparator);p=p.insert(l,zr.newNoDocument(l,Jt.min()));const I=In().add(l),O=new _h(Jt.min(),new Map,new Cr(un),p,I);yield A_(s,O),s.ac=s.ac.remove(l),s.hc.delete(e),Sp(s)}else yield ld(s.localStore,e,!1).then(()=>yl(s,e,t)).catch($u)}),Bm.apply(this,arguments)}function jE(n,e){return jm.apply(this,arguments)}function jm(){return jm=(0,Ee.Z)(function*(n,e){const t=L(n),s=e.batch.batchId;try{const a=yield Xv(t.localStore,e);Cp(t,s,null),bp(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Cu(t,a)}catch(a){yield $u(a)}}),jm.apply(this,arguments)}function $E(n,e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,Ee.Z)(function*(n,e,t){const s=L(n);try{const a=yield function(l,p){const I=L(l);return I.persistence.runTransaction("Reject batch","readwrite-primary",O=>{let U;return I.mutationQueue.lookupMutationBatch(O,p).next(Y=>(f(null!==Y),U=Y.keys(),I.mutationQueue.removeMutationBatch(O,Y))).next(()=>I.mutationQueue.performConsistencyCheck(O)).next(()=>I.documentOverlayCache.removeOverlaysForBatchId(O,U,p)).next(()=>I.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(O,U)).next(()=>I.localDocuments.getDocuments(O,U))})}(s.localStore,e);Cp(s,e,t),bp(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Cu(s,a)}catch(a){yield $u(a)}}),Ip.apply(this,arguments)}function Dp(){return Dp=(0,Ee.Z)(function*(n,e){const t=L(n);tc(t.remoteStore)||dt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=L(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",I=>p.mutationQueue.getHighestUnacknowledgedBatchId(I))}(t.localStore);if(-1===s)return void e.resolve();const a=t.dc.get(s)||[];a.push(e),t.dc.set(s,a)}catch(s){const a=md(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Dp.apply(this,arguments)}function bp(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function Cp(n,e,t){const s=L(n);let a=s.fc[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.fc[s.currentUser.toKey()]=a}}function yl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.uc.get(e))n.oc.delete(s),t&&n.rc.gc(s,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(s=>{n.lc.containsKey(s)||$m(n,s)})}function $m(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(gl(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),Sp(n))}function Tp(n,e,t){for(const s of t)s instanceof Rm?(n.lc.addReference(s.key,e),R_(n,s)):s instanceof Nm?(dt("SyncEngine","Document no longer in limbo: "+s.key),n.lc.removeReference(s.key,e),n.lc.containsKey(s.key)||$m(n,s.key)):d()}function R_(n,e){const t=e.key,s=t.path.canonicalString();n.ac.get(t)||n.cc.has(s)||(dt("SyncEngine","New document in limbo: "+t),n.cc.add(s),Sp(n))}function Sp(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new St(Hn.fromString(e)),s=n._c.next();n.hc.set(s,new S_(t)),n.ac=n.ac.insert(t,s),Du(n.remoteStore,new wc(Fo(tl(t.path)),s,2,va.at))}}function Cu(n,e,t){return nc.apply(this,arguments)}function nc(){return nc=(0,Ee.Z)(function*(n,e,t){const s=L(n),a=[],l=[],p=[];var I;s.oc.isEmpty()||(s.oc.forEach((I,O)=>{p.push(s.mc(O,e,t).then(U=>{if((U||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(O.targetId,U?.fromCache?"not-current":"current"),U){a.push(U);const Y=Ac.Ni(O.targetId,U);l.push(Y)}}))}),yield Promise.all(p),s.rc.Ho(a),yield(I=(0,Ee.Z)(function*(O,U){const Y=L(O);try{yield Y.persistence.runTransaction("notifyLocalViewChanges","readwrite",ue=>Oe.forEach(U,De=>Oe.forEach(De.Ci,Be=>Y.persistence.referenceDelegate.addReference(ue,De.targetId,Be)).next(()=>Oe.forEach(De.xi,Be=>Y.persistence.referenceDelegate.removeReference(ue,De.targetId,Be)))))}catch(ue){if(!mu(ue))throw ue;dt("LocalStore","Failed to update sequence numbers: "+ue)}for(const ue of U){const De=ue.targetId;if(!ue.fromCache){const Be=Y.Ki.get(De),Et=Be.withLastLimboFreeSnapshotVersion(Be.snapshotVersion);Y.Ki=Y.Ki.insert(De,Et)}}}),function(O,U){return I.apply(this,arguments)})(s.localStore,l))}),nc.apply(this,arguments)}function HE(n,e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,Ee.Z)(function*(n,e){const t=L(n);if(!t.currentUser.isEqual(e)){dt("SyncEngine","User change. New user:",e.toKey());const s=yield dm(t.localStore,e);t.currentUser=e,(a=t).dc.forEach(p=>{p.forEach(I=>{I.reject(new te(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.dc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Cu(t,s.Wi)}var a}),Hm.apply(this,arguments)}function wd(n,e){const t=L(n),s=t.hc.get(e);if(s&&s.ic)return In().add(s.key);{let a=In();const l=t.uc.get(e);if(!l)return a;for(const p of l){const I=t.oc.get(p);a=a.unionWith(I.view.Wu)}return a}}function Kw(n,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,Ee.Z)(function*(n,e){const t=L(n),s=yield Nh(t.localStore,e.query,!0),a=e.view.nc(s);return t.isPrimaryClient&&Tp(t,e.targetId,a.tc),a}),Hh.apply(this,arguments)}function Yw(n,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,Ee.Z)(function*(n,e){const t=L(n);return r_(t.localStore,e).then(s=>Cu(t,s))}),Ap.apply(this,arguments)}function N_(n,e,t,s){return O_.apply(this,arguments)}function O_(){return O_=(0,Ee.Z)(function*(n,e,t,s){const a=L(n),l=yield function(p,I){const O=L(p),U=L(O.mutationQueue);return O.persistence.runTransaction("Lookup mutation documents","readonly",Y=>U.An(Y,I).next(ue=>ue?O.localDocuments.getDocuments(Y,ue):Oe.resolve(null)))}(a.localStore,e);var I;null!==l?("pending"===t?yield ml(a.remoteStore):"acknowledged"===t||"rejected"===t?(Cp(a,e,s||null),bp(a,e),I=e,L(L(a.localStore).mutationQueue).Pn(I)):d(),yield Cu(a,l)):dt("SyncEngine","Cannot apply mutation batch with id: "+e)}),O_.apply(this,arguments)}function Gm(){return Gm=(0,Ee.Z)(function*(n,e){const t=L(n);if(Mp(t),Rp(t),!0===e&&!0!==t.wc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield P_(t,s.toArray());t.wc=!0,yield yp(t.remoteStore,!0);for(const l of a)Du(t.remoteStore,l)}else if(!1===e&&!1!==t.wc){const s=[];let a=Promise.resolve();t.uc.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(yl(t,p),ld(t.localStore,p,!0))),gl(t.remoteStore,p)}),yield a,yield P_(t,s),function(l){const p=L(l);p.hc.forEach((I,O)=>{gl(p.remoteStore,O)}),p.lc._s(),p.hc=new Map,p.ac=new Oi(St.comparator)}(t),t.wc=!1,yield yp(t.remoteStore,!1)}}),Gm.apply(this,arguments)}function P_(n,e,t){return zm.apply(this,arguments)}function zm(){return zm=(0,Ee.Z)(function*(n,e,t){const s=L(n),a=[],l=[];for(const p of e){let I;const O=s.uc.get(p);if(O&&0!==O.length){I=yield pl(s.localStore,Fo(O[0]));for(const U of O){const Y=s.oc.get(U),ue=yield Kw(s,Y);ue.snapshot&&l.push(ue.snapshot)}}else{const U=yield n_(s.localStore,p);I=yield pl(s.localStore,U),yield km(s,vl(U),p,!1,I.resumeToken)}a.push(I)}return s.rc.Ho(l),a}),zm.apply(this,arguments)}function vl(n){return Mf(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function GE(n){const e=L(n);return L(L(e.localStore).persistence).Si()}function xp(n,e,t,s){return Id.apply(this,arguments)}function Id(){return Id=(0,Ee.Z)(function*(n,e,t,s){const a=L(n);if(a.wc)return void dt("SyncEngine","Ignoring unexpected query state notification.");const l=a.uc.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield r_(a.localStore,ev(l[0])),I=_h.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ni.EMPTY_BYTE_STRING);yield Cu(a,p,I);break}case"rejected":yield ld(a.localStore,e,!0),yl(a,e,s);break;default:d()}}),Id.apply(this,arguments)}function Pi(n,e,t){return k_.apply(this,arguments)}function k_(){return k_=(0,Ee.Z)(function*(n,e,t){const s=Mp(n);if(s.wc){for(const a of e){if(s.uc.has(a)){dt("SyncEngine","Adding an already active target "+a);continue}const l=yield n_(s.localStore,a),p=yield pl(s.localStore,l);yield km(s,vl(l),p.targetId,!1,p.resumeToken),Du(s.remoteStore,p)}for(const a of t)s.uc.has(a)&&(yield ld(s.localStore,a,!1).then(()=>{gl(s.remoteStore,a),yl(s,a)}).catch($u))}}),k_.apply(this,arguments)}function Mp(n){const e=L(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=A_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BE.bind(null,e),e.rc.Ho=D_.bind(null,e.eventManager),e.rc.gc=b_.bind(null,e.eventManager),e}function Rp(n){const e=L(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$E.bind(null,e),e}class Wm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.Tt=xc(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return lm(this.persistence,new fl,e.initialUser,this.Tt)}Tc(e){return new bc(Lo.qs,this.Tt)}Ic(e){return new lp}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qm extends Wm{constructor(e,t,s){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield t().call(s,e),yield s.Pc.initialize(s,e),yield Rp(s.Pc.syncEngine),yield ml(s.Pc.remoteStore),yield s.persistence.di(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return lm(this.persistence,new fl,e.initialUser,this.Tt)}Ac(e,t){return new bE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const s=new j0(t,this.persistence);return new Vy(e.asyncQueue,s)}Tc(e){const t=Sc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ra.withCacheSize(this.cacheSizeBytes):ra.DEFAULT;return new Tc(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,ym(),Lh(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new lp}}class F_ extends qm{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield t().call(s,e);const a=s.Pc.syncEngine;s.sharedClientState instanceof cp&&(s.sharedClientState.syncEngine={Br:N_.bind(null,a),Lr:xp.bind(null,a),qr:Pi.bind(null,a),Si:GE.bind(null,a),Fr:Yw.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.di(function(){var l=(0,Ee.Z)(function*(p){yield function an(n,e){return Gm.apply(this,arguments)}(s.Pc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}Ic(e){const t=ym();if(!cp.C(t))throw new te(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Sc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cp(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Np{initialize(e,t){var s=this;return(0,Ee.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>x_(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=HE.bind(null,s.syncEngine),yield yp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kE}createDatastore(e){const t=xc(e.databaseInfo.databaseId),s=new c_(e.databaseInfo);return new h_(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=I=>x_(this.syncEngine,I,0),p=o_.C()?new o_:new s_,new pp(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,I,O,U){const Y=new FE(s,a,l,p,I,O);return U&&(Y.wc=!0),Y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const s=L(t);dt("RemoteStore","RemoteStore shutting down."),s.mu.add(5),yield pd(s),s.yu.shutdown(),s.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function L_(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Op{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class WE{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Ye,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Mu)}`))},s=>this.metadata.reject(s))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const s=e.Sc.decode(t),a=Number(s);isNaN(a)&&e.xc(`length string (${s}) is not valid number`);const l=yield e.Nc(a);return new xm(JSON.parse(l),t.length+a)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,Ee.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Nc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const s=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Gh{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new te(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,Ee.Z)(function*(l,p){const I=L(l),O=sl(I.Tt)+"/documents",U={documents:p.map(Be=>Xl(I.Tt,Be))},Y=yield I.mo("BatchGetDocuments",O,U,p.length),ue=new Map;Y.forEach(Be=>{const st=function Zw(n,e){return"found"in e?function(t,s){f(!!s.found);const a=go(t,s.found.name),l=Yi(s.found.updateTime),p=s.found.createTime?Yi(s.found.createTime):Jt.min(),I=new os({mapValue:{fields:s.found.fields}});return zr.newFoundDocument(a,l,p,I)}(n,e):"missing"in e?function(t,s){f(!!s.missing),f(!!s.readTime);const a=go(t,s.missing),l=Yi(s.readTime);return zr.newNoDocument(a,l)}(n,e):d()}(I.Tt,Be);ue.set(st.key.toString(),st)});const De=[];return p.forEach(Be=>{const st=ue.get(Be.toString());f(!!st),De.push(st)}),De}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=St.fromPath(a);e.mutations.push(new Lg(l,e.precondition(l)))}),yield(s=(0,Ee.Z)(function*(a,l){const p=L(a),I=sl(p.Tt)+"/documents",O={writes:l.map(U=>ed(p.Tt,U))};yield p.lo("Commit",I,O)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw d();t=Jt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new te(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Jt.min())?pi.exists(!1):pi.updateTime(t):pi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Jt.min()))throw new te(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pi.updateTime(t)}return pi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qE{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Mc=s.maxAttempts,this.ko=new Vh(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,Ee.Z)(function*(){const t=new Gh(e.datastore),s=e.Fc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Bc(l)}))}).catch(a=>{e.Bc(a)})}))}Fc(e){try{const t=this.updateFunction(e);return!Ef(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!dv(t)}return!1}}class ZE{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Ki.UNAUTHENTICATED,this.clientId=Xd.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,Ee.Z)(function*(I){dt("FirestoreClient","Received user=",I.uid),yield l.authCredentialListener(I),l.user=I});return function(I){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(dt("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ye;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=md(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function V_(n,e){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),dt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,Ee.Z)(function*(l){s.isEqual(l)||(yield dm(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Dd.apply(this,arguments)}function Zm(n,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield kp(n);dt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>La(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>La(e.remoteStore,l)),n.onlineComponents=e}),Pp.apply(this,arguments)}function kp(n){return Km.apply(this,arguments)}function Km(){return Km=(0,Ee.Z)(function*(n){return n.offlineComponents||(dt("FirestoreClient","Using default OfflineComponentProvider"),yield V_(n,new Wm)),n.offlineComponents}),Km.apply(this,arguments)}function Oc(n){return _l.apply(this,arguments)}function _l(){return _l=(0,Ee.Z)(function*(n){return n.onlineComponents||(dt("FirestoreClient","Using default OnlineComponentProvider"),yield Zm(n,new Np)),n.onlineComponents}),_l.apply(this,arguments)}function U_(n){return kp(n).then(e=>e.persistence)}function Fp(n){return kp(n).then(e=>e.localStore)}function Ym(n){return Oc(n).then(e=>e.remoteStore)}function Lp(n){return Oc(n).then(e=>e.syncEngine)}function El(n){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Ee.Z)(function*(n){const e=yield Oc(n),t=e.eventManager;return t.onListen=LE.bind(null,e.syncEngine),t.onUnlisten=VE.bind(null,e.syncEngine),t}),Jm.apply(this,arguments)}function QE(n,e,t={}){const s=new Ye;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(a,l,p,I,O){const U=new Op({next:ue=>{l.enqueueAndForget(()=>_d(a,Y));const De=ue.docs.has(p);!De&&ue.fromCache?O.reject(new te(B.UNAVAILABLE,"Failed to get document because the client is offline.")):De&&ue.fromCache&&I&&"server"===I.source?O.reject(new te(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):O.resolve(ue)},error:ue=>O.reject(ue)}),Y=new Ed(tl(p.path),U,{includeMetadataChanges:!0,$u:!0});return _p(a,Y)}(yield El(n),n.asyncQueue,e,t,s)})),s.promise}function JE(n,e,t={}){const s=new Ye;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(a,l,p,I,O){const U=new Op({next:ue=>{l.enqueueAndForget(()=>_d(a,Y)),ue.fromCache&&"server"===I.source?O.reject(new te(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):O.resolve(ue)},error:ue=>O.reject(ue)}),Y=new Ed(p,U,{includeMetadataChanges:!0,$u:!0});return _p(a,Y)}(yield El(n),n.asyncQueue,e,t,s)})),s.promise}const $_=new Map;function Xm(n,e,t){if(!t)throw new te(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ey(n,e,t,s){if(!0===e&&!0===s)throw new te(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bd(n){if(!St.isDocumentKey(n))throw new te(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function H_(n){if(St.isDocumentKey(n))throw new te(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Up(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":d()}function Kn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Up(n);throw new te(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function G_(n,e){if(e<=0)throw new te(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class XE{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new te(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new te(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ey("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new te(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new te(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Yt;switch(t.type){case"gapi":return new Na(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new te(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$_.get(e);t&&(dt("ComponentProvider","Removing Datastore"),$_.delete(e),t.terminate())}(this),Promise.resolve()}}class ei{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ei(this.firestore,e,this._key)}}class Js{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class ia extends Js{constructor(e,t,s){super(e,t,tl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ei(this.firestore,null,new St(e))}withConverter(e){return new ia(this.firestore,e,this._path)}}function z_(n,e,...t){if(n=(0,At.m9)(n),Xm("collection","path",e),n instanceof zh){const s=Hn.fromString(e,...t);return H_(s),new ia(n,null,s)}{if(!(n instanceof ei||n instanceof ia))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Hn.fromString(e,...t));return H_(s),new ia(n.firestore,null,s)}}function Bp(n,e,...t){if(n=(0,At.m9)(n),1===arguments.length&&(e=Xd.R()),Xm("doc","path",e),n instanceof zh){const s=Hn.fromString(e,...t);return bd(s),new ei(n,null,new St(s))}{if(!(n instanceof ei||n instanceof ia))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Hn.fromString(e,...t));return bd(s),new ei(n.firestore,n instanceof ia?n.converter:null,new St(s))}}function ny(n,e){return n=(0,At.m9)(n),e=(0,At.m9)(e),(n instanceof ei||n instanceof ia)&&(e instanceof ei||e instanceof ia)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ry(n,e){return n=(0,At.m9)(n),e=(0,At.m9)(e),n instanceof Js&&e instanceof Js&&n.firestore===e.firestore&&eu(n._query,e._query)&&n.converter===e.converter}class q_{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Vh(this,"async_queue_retry"),this.Hc=()=>{const t=Lh();t&&dt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=Lh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=Lh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Ye;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!mu(t))throw t;dt("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(s=>{throw this.Qc=s,this.jc=!1,wi("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.jc=!1,s))));return this.qc=t,t}enqueueAfterDelay(e,t,s){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const a=Sm.createAndSchedule(this,e,t,s,l=>this.Xc(l));return this.Gc.push(a),a}Jc(){this.Qc&&d()}verifyOperationInProgress(){}ta(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function iy(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class sy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ye,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wr extends zh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new q_,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Z_(this),this._firestoreClient.terminate()}}function Qi(n){return n._firestoreClient||Z_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Z_(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _f(n._databaseId,l,n._persistenceKey,(I=t).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,I.useFetchStreams));var l,I;n._firestoreClient=new ZE(n._authCredentials,n._appCheckCredentials,n._queue,s)}function ay(n,e,t){const s=new Ye;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield V_(n,t),yield Zm(n,e),s.resolve()}catch(a){const l=a;if(!("FirebaseError"===(p=l).name?p.code===B.FAILED_PRECONDITION||p.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw l;Uu("Error enabling offline persistence. Falling back to persistence disabled: "+l),s.reject(l)}var p})).then(()=>s.promise)}function K_(n){if(n._initialized||n._terminated)throw new te(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tu(Ni.fromBase64String(e))}catch(t){throw new te(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tu(Ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new te(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wl{constructor(e){this._methodName=e}}class jp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}}const lw=/^__.*__$/;class uy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Yu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zl(e,this.data,t,this.fieldTransforms)}}class $p{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Yu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw d()}}class Td{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.Tt=s,this.ignoreUndefinedProperties=a,void 0===l&&this.ia(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Td(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.oa({path:s,ca:!1});return a.aa(e),a}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.oa({path:s,ca:!1});return a.ia(),a}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Yh(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(cy(this.ra)&&lw.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class dw{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=s||xc(e)}wa(e,t,s,a=!1){return new Td({ra:e,methodName:t,_a:s,path:fi.emptyPath(),ca:!1,da:a},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Il(n){const e=n._freezeSettings(),t=xc(n._databaseId);return new dw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Sd(n,e,t,s,a,l={}){const p=n.wa(l.merge||l.mergeFields?2:0,e,t,a);Zh("Data must be an object, but it was:",p,s);const I=X_(s,p);let O,U;if(l.merge)O=new ks(p.fieldMask),U=p.fieldTransforms;else if(l.mergeFields){const Y=[];for(const ue of l.mergeFields){const De=Ad(e,ue,t);if(!p.contains(De))throw new te(B.INVALID_ARGUMENT,`Field '${De}' is specified in your field mask but missing from your input data.`);t0(Y,De)||Y.push(De)}O=new ks(Y),U=p.fieldTransforms.filter(ue=>O.covers(ue.field))}else O=null,U=p.fieldTransforms;return new uy(new os(I),O,U)}class Wh extends wl{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wh}}function ly(n,e,t){return new Td({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class Pc extends wl{_toFieldTransform(e){return new Wl(e.path,new rl)}isEqual(e){return e instanceof Pc}}class Q_ extends wl{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=ly(this,e,!0),s=this.ma.map(l=>ic(l,t)),a=new Gl(s);return new Wl(e.path,a)}isEqual(e){return this===e}}class hw extends wl{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=ly(this,e,!0),s=this.ma.map(l=>ic(l,t)),a=new tu(s);return new Wl(e.path,a)}isEqual(e){return this===e}}class tI extends wl{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new nu(e.Tt,rv(e.Tt,this.ga));return new Wl(e.path,t)}isEqual(e){return this===e}}function Hp(n,e,t,s){const a=n.wa(1,e,t);Zh("Data must be an object, but it was:",a,s);const l=[],p=os.empty();Qc(s,(O,U)=>{const Y=Kh(e,O,t);U=(0,At.m9)(U);const ue=a.ha(Y);if(U instanceof Wh)l.push(Y);else{const De=ic(U,ue);null!=De&&(l.push(Y),p.set(Y,De))}});const I=new ks(l);return new $p(p,I,a.fieldTransforms)}function qh(n,e,t,s,a,l){const p=n.wa(1,e,t),I=[Ad(e,s,t)],O=[a];if(l.length%2!=0)throw new te(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let De=0;De<l.length;De+=2)I.push(Ad(e,l[De])),O.push(l[De+1]);const U=[],Y=os.empty();for(let De=I.length-1;De>=0;--De)if(!t0(U,I[De])){const Be=I[De];let st=O[De];st=(0,At.m9)(st);const Et=p.ha(Be);if(st instanceof Wh)U.push(Be);else{const Bt=ic(st,Et);null!=Bt&&(U.push(Be),Y.set(Be,Bt))}}const ue=new ks(U);return new $p(Y,ue,p.fieldTransforms)}function J_(n,e,t,s=!1){return ic(t,n.wa(s?4:3,e))}function ic(n,e){if(dy(n=(0,At.m9)(n)))return Zh("Unsupported field value:",e,n),X_(n,e);if(n instanceof wl)return function(t,s){if(!cy(s.ra))throw s.fa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.fa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let I=ic(p,s.la(l));null==I&&(I={nullValue:"NULL_VALUE"}),a.push(I),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,At.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rv(s.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Ar.fromDate(t);return{timestampValue:Jl(s.Tt,a)}}if(t instanceof Ar){const a=new Ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jl(s.Tt,a)}}if(t instanceof jp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tu)return{bytesValue:jg(s.Tt,t._byteString)};if(t instanceof ei){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.fa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ev(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.fa(`Unsupported field value: ${Up(t)}`)}(n,e)}function X_(n,e){const t={};return By(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qc(n,(s,a)=>{const l=ic(a,e.ua(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function dy(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ar||n instanceof jp||n instanceof Tu||n instanceof ei||n instanceof wl)}function Zh(n,e,t){if(!dy(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Up(t);throw e.fa("an object"===s?n+" a custom object":n+" "+s)}var s}function Ad(n,e,t){if((e=(0,At.m9)(e))instanceof rc)return e._internalPath;if("string"==typeof e)return Kh(n,e);throw Yh("Field path arguments must be of type string or ",n,!1,void 0,t)}const e0=new RegExp("[~\\*/\\[\\]]");function Kh(n,e,t){if(e.search(e0)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rc(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yh(n,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let I=`Function ${e}() called with invalid data`;t&&(I+=" (via `toFirestore()`)"),I+=". ";let O="";return(l||p)&&(O+=" (found",l&&(O+=` in field ${s}`),p&&(O+=` in document ${a}`),O+=")"),new te(B.INVALID_ARGUMENT,I+n+O)}function t0(n,e){return n.some(t=>t.isEqual(e))}class Qh{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new fw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fw extends Qh{data(){return super.data()}}function Gp(n,e){return"string"==typeof e?Kh(n,e):e instanceof rc?e._internalPath:e._delegate._internalPath}function hy(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new te(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}class xd extends n0{}function kc(n,e,...t){let s=[];e instanceof n0&&s.push(e),s=s.concat(t),function(a){const l=a.filter(I=>I instanceof Md).length,p=a.filter(I=>I instanceof Jh).length;if(l>1||l>0&&p>0)throw new te(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class Jh extends xd{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Jh(e,t,s)}_apply(e){const t=this._parse(e);return my(e._query,t),new Js(e.firestore,e.converter,hh(e._query,t))}_parse(e){const t=Il(e.firestore);return function(a,l,p,I,O,U,Y){let ue;if(O.isKeyField()){if("array-contains"===U||"array-contains-any"===U)throw new te(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${U}' queries on documentId().`);if("in"===U||"not-in"===U){gy(Y,U);const De=[];for(const Be of Y)De.push(py(I,a,Be));ue={arrayValue:{values:De}}}else ue=py(I,a,Y)}else"in"!==U&&"not-in"!==U&&"array-contains-any"!==U||gy(Y,U),ue=J_(p,"where",Y,"in"===U||"not-in"===U);return Gn.create(O,U,ue)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Md extends n0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Md(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:mr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let l=s;const p=a.getFlattenedFilters();for(const I of p)my(l,I),l=hh(l,I)}(e._query,t),new Js(e.firestore,e.converter,hh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zp extends xd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zp(e,t)}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new te(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new te(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Xc(a,l);return function(I,O){if(null===Ku(I)){const U=Rf(I);null!==U&&yy(0,U,O.field)}}(s,p),p}(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Zu(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Wp extends xd{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Wp(e,t,s)}_apply(e){return new Js(e.firestore,e.converter,nl(e._query,this._limit,this._limitType))}}class qp extends xd{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new qp(e,t,s)}_apply(e){const t=fy(e,this.type,this._docOrFields,this._inclusive);return new Js(e.firestore,e.converter,(a=t,new Zu((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Zp extends xd{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Zp(e,t,s)}_apply(e){const t=fy(e,this.type,this._docOrFields,this._inclusive);return new Js(e.firestore,e.converter,(a=t,new Zu((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function fy(n,e,t,s){if(t[0]=(0,At.m9)(t[0]),t[0]instanceof Qh)return function(a,l,p,I,O){if(!I)throw new te(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const U=[];for(const Y of vu(a))if(Y.field.isKeyField())U.push(Vl(l,I.key));else{const ue=I.data.field(Y.field);if(If(ue))throw new te(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ue){const De=Y.field.canonicalString();throw new te(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${De}' (used as the orderBy) does not exist.`)}U.push(ue)}return new qu(U,O)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=Il(n.firestore);return function(l,p,I,O,U,Y){const ue=l.explicitOrderBy;if(U.length>ue.length)throw new te(B.INVALID_ARGUMENT,`Too many arguments provided to ${O}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const De=[];for(let Be=0;Be<U.length;Be++){const st=U[Be];if(ue[Be].field.isKeyField()){if("string"!=typeof st)throw new te(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${O}(), but got a ${typeof st}`);if(!dh(l)&&-1!==st.indexOf("/"))throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${O}() must be a plain document ID, but '${st}' contains a slash.`);const Et=l.path.child(Hn.fromString(st));if(!St.isDocumentKey(Et))throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${O}() must result in a valid document path, but '${Et}' is not because it contains an odd number of segments.`);const Bt=new St(Et);De.push(Vl(p,Bt))}else{const Et=J_(I,O,st);De.push(Et)}}return new qu(De,Y)}(n._query,n.firestore._databaseId,a,e,t,s)}}function py(n,e,t){if("string"==typeof(t=(0,At.m9)(t))){if(""===t)throw new te(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dh(e)&&-1!==t.indexOf("/"))throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Hn.fromString(t));if(!St.isDocumentKey(s))throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Vl(n,new St(s))}if(t instanceof ei)return Vl(n,t._key);throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Up(t)}.`)}function gy(n,e){if(!Array.isArray(n)||0===n.length)throw new te(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function my(n,e){if(e.isInequality()){const s=Rf(n),a=e.field;if(null!==s&&!s.isEqual(a))throw new te(B.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const l=Ku(n);null!==l&&yy(0,a,l)}const t=function(s,a){for(const l of s)for(const p of l.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new te(B.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function yy(n,e,t){if(!t.isEqual(e))throw new te(B.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class a0{convertValue(e,t="none"){switch(Jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw d()}}convertObject(e,t){const s={};return Qc(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new jp(Ii(e.latitude),Ii(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=$y(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ih(e));default:return null}}convertTimestamp(e){const t=Gu(e);return new Ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Hn.fromString(e);f(Sv(s));const a=new yu(s.get(1),s.get(3)),l=new St(s.popFirst(5));return a.isEqual(t)||wi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function ef(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class _w extends a0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}class sc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends Qh{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Gp("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class tf extends Ls{data(e={}){return super.data(e)}}class Su{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new sc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new tf(this._firestore,this._userDataWriter,s.key,s,new sc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new tf(s._firestore,s._userDataWriter,p.doc.key,p.doc,new sc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const I=new tf(s._firestore,s._userDataWriter,p.doc.key,p.doc,new sc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let O=-1,U=-1;return 0!==p.type&&(O=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),U=l.indexOf(p.doc.key)),{type:nf(p.type),doc:I,oldIndex:O,newIndex:U}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nf(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return d()}}function u0(n,e){return n instanceof Ls&&e instanceof Ls?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Su&&e instanceof Su&&n._firestore===e._firestore&&ry(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Fc extends a0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}function vy(n,e,t){n=Kn(n,ei);const s=Kn(n.firestore,Wr),a=ef(n.converter,e,t);return Lc(s,[Sd(Il(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,pi.none())])}function Jp(n,e,t,...s){n=Kn(n,ei);const a=Kn(n.firestore,Wr),l=Il(a);let p;return p="string"==typeof(e=(0,At.m9)(e))||e instanceof rc?qh(l,"updateDoc",n._key,e,t,s):Hp(l,"updateDoc",n._key,e),Lc(a,[p.toMutation(n._key,pi.exists(!0))])}function Xp(n,...e){var t,s,a;n=(0,At.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||iy(e[p])||(l=e[p],p++);const I={includeMetadataChanges:l.includeMetadataChanges};if(iy(e[p])){const ue=e[p];e[p]=null===(t=ue.next)||void 0===t?void 0:t.bind(ue),e[p+1]=null===(s=ue.error)||void 0===s?void 0:s.bind(ue),e[p+2]=null===(a=ue.complete)||void 0===a?void 0:a.bind(ue)}let O,U,Y;if(n instanceof ei)U=Kn(n.firestore,Wr),Y=tl(n._key.path),O={next:ue=>{e[p]&&e[p](rf(U,n,ue))},error:e[p+1],complete:e[p+2]};else{const ue=Kn(n,Js);U=Kn(ue.firestore,Wr),Y=ue._query;const De=new Fc(U);O={next:Be=>{e[p]&&e[p](new Su(U,De,ue,Be))},error:e[p+1],complete:e[p+2]},hy(n._query)}return function(ue,De,Be,st){const Et=new Op(st),Bt=new Ed(De,Et,Be);return ue.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return _p(yield El(ue),Bt)})),()=>{Et.bc(),ue.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return _d(yield El(ue),Bt)}))}}(Qi(U),Y,I,O)}function Lc(n,e){return function(t,s){const a=new Ye;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function UE(n,e,t){return Vm.apply(this,arguments)}(yield Lp(t),s,a)})),a.promise}(Qi(n),e)}function rf(n,e,t){const s=t.docs.get(e._key),a=new Fc(n);return new Ls(n,a,e._key,s,new sc(t.hasPendingWrites,t.fromCache),e.converter)}const Cw={maxAttempts:5};class h0{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Il(e)}set(e,t,s){this._verifyNotCommitted();const a=oc(e,this._firestore),l=ef(a.converter,t,s),p=Sd(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,pi.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=oc(e,this._firestore);let p;return p="string"==typeof(t=(0,At.m9)(t))||t instanceof rc?qh(this._dataReader,"WriteBatch.update",l._key,t,s,a):Hp(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=oc(e,this._firestore);return this._mutations=this._mutations.concat(new Kl(t._key,pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oc(n,e){if((n=(0,At.m9)(n)).firestore!==e)throw new te(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ey extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Il(e)}get(e){const t=oc(e,this._firestore),s=new _w(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return d();const l=a[0];if(l.isFoundDocument())return new Qh(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Qh(this._firestore,s,t._key,null,t.converter);throw d()})}set(e,t,s){const a=oc(e,this._firestore),l=ef(a.converter,t,s),p=Sd(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=oc(e,this._firestore);let p;return p="string"==typeof(t=(0,At.m9)(t))||t instanceof rc?qh(this._dataReader,"Transaction.update",l._key,t,s,a):Hp(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=oc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=oc(e,this._firestore),s=new Fc(this._firestore);return super.get(e).then(a=>new Ls(this._firestore,s,t._key,a._document,new sc(!1,!1),t.converter))}}function Vc(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function v0(){if(typeof Uint8Array>"u")throw new te("unimplemented","Uint8Arrays are not available in this environment.")}function _0(){if(!function jy(){return typeof atob<"u"}())throw new te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){gu=Mt.SDK_VERSION,(0,Mt._registerComponent)(new wt.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const l=t.getProvider("app").getImmediate(),p=new Wr(new Gr(t.getProvider("auth-internal")),new Bu(t.getProvider("app-check-internal")),function(I,O){if(!Object.prototype.hasOwnProperty.apply(I.options,["projectId"]))throw new te(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(I.options.projectId,O)}(l,s),l);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,Mt.registerVersion)(qc,"3.9.0",n),(0,Mt.registerVersion)(qc,"3.9.0","esm2017")}();class eg{constructor(e){this._delegate=e}static fromBase64String(e){return _0(),new eg(Tu.fromBase64String(e))}static fromUint8Array(e){return v0(),new eg(Tu.fromUint8Array(e))}toBase64(){return _0(),this._delegate.toBase64()}toUint8Array(){return v0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function E0(n){return function w0(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(n,["next","error","complete"])}class I0{enableIndexedDbPersistence(e,t){return function oy(n,e){K_(n=Kn(n,Wr));const t=Qi(n),s=n._freezeSettings(),a=new Np;return ay(t,a,new qm(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function nw(n){K_(n=Kn(n,Wr));const e=Qi(n),t=n._freezeSettings(),s=new Np;return ay(e,s,new F_(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rw(n){if(n._initialized&&!n._terminated)throw new te(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ye;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(s){if(!ta.C())return Promise.resolve();const a=s+"main";yield ta.delete(a)}),function(s){return t.apply(this,arguments)})(Sc(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Rd{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof yu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Uu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function ty(n,e,t,s={}){var a;const l=(n=Kn(n,zh))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Uu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,I;if("string"==typeof s.mockUserToken)p=s.mockUserToken,I=Ki.MOCK_USER;else{p=(0,At.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new te(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Ki(O)}n._authCredentials=new xn(new kt(p,I))}}(this._delegate,e,t,s)}enableNetwork(){return function sw(n){return function B_(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield U_(n),t=yield Ym(n);return e.setNetworkEnabled(!0),function(s){const a=L(s);return a.mu.delete(0),ka(a)}(t)}))}(Qi(n=Kn(n,Wr)))}(this._delegate)}disableNetwork(){return function ow(n){return function KE(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield U_(n),t=yield Ym(n);return e.setNetworkEnabled(!1),(s=(0,Ee.Z)(function*(a){const l=L(a);l.mu.add(0),yield pd(l),l.pu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Qi(n=Kn(n,Wr)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,ey("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iw(n){return function(e){const t=new Ye;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function M_(n,e){return Dp.apply(this,arguments)}(yield Lp(e),t)})),t.promise}(Qi(n=Kn(n,Wr)))}(this._delegate)}onSnapshotsInSync(e){return function d0(n,e){return function Jw(n,e){const t=new Op(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return s=yield El(n),a=t,L(s).vu.add(a),void a.next();var s,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return s=yield El(n),a=t,void L(s).vu.delete(a);var s,a}))}}(Qi(n=Kn(n,Wr)),iy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Od(this,z_(this._delegate,e))}catch(t){throw Uo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Va(this,Bp(this._delegate,e))}catch(t){throw Uo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xs(this,function W_(n,e){if(n=Kn(n,zh),Xm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Js(n,null,(t=e,new Zu(Hn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Uo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function f0(n,e,t){n=Kn(n,Wr);const s=Object.assign(Object.assign({},Cw),t);return function(a){if(a.maxAttempts<1)throw new te(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,l,p){const I=new Ye;return a.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const O=yield function Qm(n){return Oc(n).then(e=>e.datastore)}(a);new qE(a.asyncQueue,O,p,l,I).run()})),I.promise}(Qi(n),a=>e(new Ey(n,a)),s)}(this._delegate,t=>e(new D0(this,t)))}batch(){return Qi(this._delegate),new Dy(new h0(this._delegate,e=>Lc(this._delegate,e)))}loadBundle(e){return function aw(n,e){const t=Qi(n=Kn(n,Wr)),s=new sy;return function j_(n,e,t,s){const a=function(l,p){let I;return I="string"==typeof l?(new TextEncoder).encode(l):l,O=function(O,U){if(O instanceof Uint8Array)return L_(O,U);if(O instanceof ArrayBuffer)return L_(new Uint8Array(O),U);if(O instanceof ReadableStream)return O.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(I),new WE(O,p);var O}(t,xc(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function zE(n,e,t){const s=L(n);var a;(a=(0,Ee.Z)(function*(l,p,I){try{const O=yield p.getMetadata();if(yield function(De,Be){const st=L(De),Et=Yi(Be.createTime);return st.persistence.runTransaction("hasNewerBundle","readonly",Bt=>st.$s.getBundleMetadata(Bt,Be.id)).then(Bt=>!!Bt&&Bt.createTime.compareTo(Et)>=0)}(l.localStore,O))return yield p.close(),I._completeWith({taskState:"Success",documentsLoaded:(De=O).totalDocuments,bytesLoaded:De.totalBytes,totalDocuments:De.totalDocuments,totalBytes:De.totalBytes}),Promise.resolve(new Set);I._updateProgress(Mm(O));const U=new C_(O,l.localStore,p.Tt);let Y=yield p.yc();for(;Y;){const De=yield U.Bu(Y);De&&I._updateProgress(De),Y=yield p.yc()}const ue=yield U.complete();return yield Cu(l,ue.Uu,void 0),yield function(De,Be){const st=L(De);return st.persistence.runTransaction("Save bundle","readwrite",Et=>st.$s.saveBundleMetadata(Et,Be))}(l.localStore,O),I._completeWith(ue.progress),Promise.resolve(ue.qu)}catch(O){return Uu("SyncEngine",`Loading bundle failed with ${O}`),I._failWith(O),Promise.resolve(new Set)}var De}),function(l,p,I){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Lp(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function uw(n,e){return function Vp(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,s){const a=L(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.$s.getNamedQuery(l,s))}(yield Fp(n),e)}))}(Qi(n=Kn(n,Wr)),e).then(t=>t?new Js(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xs(this,t):null)}}class tg extends a0{constructor(e){super(),this.firestore=e}convertBytes(e){return new eg(new Tu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Va.forKey(t,this.firestore,null)}}class D0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tg(e)}get(e){const t=Bc(e);return this._delegate.get(t).then(s=>new Nd(this._firestore,new Ls(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Bc(e);return s?(Vc("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Bc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Bc(e);return this._delegate.delete(t),this}}class Dy{constructor(e){this._delegate=e}set(e,t,s){const a=Bc(e);return s?(Vc("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Bc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Bc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dl{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new tf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Uc(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Dl.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new Dl(e,new tg(e),t),a.set(t,l)),l}}Dl.INSTANCES=new WeakMap;class Va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tg(e)}static forPath(e,t,s){if(e.length%2!=0)throw new te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Va(t,new ei(t._delegate,s,new St(e)))}static forKey(e,t,s){return new Va(t,new ei(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Od(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Od(this.firestore,z_(this._delegate,e))}catch(t){throw Uo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,At.m9)(e))instanceof ei&&ny(this._delegate,e)}set(e,t){t=Vc("DocumentReference.set",t);try{return t?vy(this._delegate,e,t):vy(this._delegate,e)}catch(s){throw Uo(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Jp(this._delegate,e):Jp(this._delegate,e,t,...s)}catch(a){throw Uo(a,"updateDoc()","DocumentReference.update()")}}delete(){return function l0(n){return Lc(Kn(n.firestore,Wr),[new Kl(n._key,pi.none())])}(this._delegate)}onSnapshot(...e){const t=ng(e),s=by(e,a=>new Nd(this.firestore,new Ls(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Xp(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function Yp(n){n=Kn(n,ei);const e=Kn(n.firestore,Wr),t=Qi(e),s=new Fc(e);return function YE(n,e){const t=new Ye;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(s=(0,Ee.Z)(function*(a,l,p){try{const I=yield function(O,U){const Y=L(O);return Y.persistence.runTransaction("read document","readonly",ue=>Y.localDocuments.getDocument(ue,U))}(a,l);I.isFoundDocument()?p.resolve(I):I.isNoDocument()?p.resolve(null):p.reject(new te(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(I){const O=md(I,`Failed to get document '${l} from cache`);p.reject(O)}}),function(a,l,p){return s.apply(this,arguments)})(yield Fp(n),e,t);var s})),t.promise}(t,n._key).then(a=>new Ls(e,s,n._key,a,new sc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Qp(n){n=Kn(n,ei);const e=Kn(n.firestore,Wr);return QE(Qi(e),n._key,{source:"server"}).then(t=>rf(e,n,t))}(this._delegate):function ww(n){n=Kn(n,ei);const e=Kn(n.firestore,Wr);return QE(Qi(e),n._key).then(t=>rf(e,n,t))}(this._delegate),t.then(s=>new Nd(this.firestore,new Ls(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Va(this.firestore,this._delegate.withConverter(e?Dl.getInstance(this.firestore,e):null))}}function Uo(n,e,t){return n.message=n.message.replace(e,t),n}function ng(n){for(const e of n)if("object"==typeof e&&!E0(e))return e;return{}}function by(n,e){var t,s;let a;return a=E0(n[0])?n[0]:E0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Nd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return u0(this._delegate,e._delegate)}}class Uc extends Nd{data(e){const t=this._delegate.data(e);return function b(n,e){n||d()}(void 0!==t),t}}class Xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tg(e)}where(e,t,s){try{return new Xs(this.firestore,kc(this._delegate,function nI(n,e,t){const s=e,a=Gp("where",n);return Jh._create(a,s,t)}(e,t,s)))}catch(a){throw Uo(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xs(this.firestore,kc(this._delegate,function r0(n,e="asc"){const t=e,s=Gp("orderBy",n);return zp._create(s,t)}(e,t)))}catch(s){throw Uo(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xs(this.firestore,kc(this._delegate,function gw(n){return G_("limit",n),Wp._create("limit",n,"F")}(e)))}catch(t){throw Uo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xs(this.firestore,kc(this._delegate,function mw(n){return G_("limitToLast",n),Wp._create("limitToLast",n,"L")}(e)))}catch(t){throw Uo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xs(this.firestore,kc(this._delegate,function yw(...n){return qp._create("startAt",n,!0)}(...e)))}catch(t){throw Uo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xs(this.firestore,kc(this._delegate,function vw(...n){return qp._create("startAfter",n,!1)}(...e)))}catch(t){throw Uo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xs(this.firestore,kc(this._delegate,function Xh(...n){return Zp._create("endBefore",n,!1)}(...e)))}catch(t){throw Uo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xs(this.firestore,kc(this._delegate,function s0(...n){return Zp._create("endAt",n,!0)}(...e)))}catch(t){throw Uo(t,"endAt()","Query.endAt()")}}isEqual(e){return ry(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Dw(n){n=Kn(n,Js);const e=Kn(n.firestore,Wr),t=Qi(e),s=new Fc(e);return function Qw(n,e){const t=new Ye;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(s=(0,Ee.Z)(function*(a,l,p){try{const I=yield Nh(a,l,!0),O=new Om(l,I.Yi),U=O.Hu(I.documents),Y=O.applyChanges(U,!1);p.resolve(Y.snapshot)}catch(I){const O=md(I,`Failed to execute query '${l} against cache`);p.reject(O)}}),function(a,l,p){return s.apply(this,arguments)})(yield Fp(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Su(e,s,n,a))}(this._delegate):"server"===e?.source?function c0(n){n=Kn(n,Js);const e=Kn(n.firestore,Wr),t=Qi(e),s=new Fc(e);return JE(t,n._query,{source:"server"}).then(a=>new Su(e,s,n,a))}(this._delegate):function Iw(n){n=Kn(n,Js);const e=Kn(n.firestore,Wr),t=Qi(e),s=new Fc(e);return hy(n._query),JE(t,n._query).then(a=>new Su(e,s,n,a))}(this._delegate),t.then(s=>new rg(this.firestore,new Su(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=ng(e),s=by(e,a=>new rg(this.firestore,new Su(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Xp(this._delegate,t,s)}withConverter(e){return new Xs(this.firestore,this._delegate.withConverter(e?Dl.getInstance(this.firestore,e):null))}}class cI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Uc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Uc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cI(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Uc(this._firestore,s))})}isEqual(e){return u0(this._delegate,e._delegate)}}class Od extends Xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Va(this.firestore,e):null}doc(e){try{return new Va(this.firestore,void 0===e?Bp(this._delegate):Bp(this._delegate,e))}catch(t){throw Uo(t,"doc()","CollectionReference.doc()")}}add(e){return function _y(n,e){const t=Kn(n.firestore,Wr),s=Bp(n),a=ef(n.converter,e);return Lc(t,[Sd(Il(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,pi.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Va(this.firestore,t))}isEqual(e){return ny(this._delegate,e._delegate)}withConverter(e){return new Od(this.firestore,this._delegate.withConverter(e?Dl.getInstance(this.firestore,e):null))}}function Bc(n){return Kn(n,ei)}class jc{constructor(...e){this._delegate=new rc(...e)}static documentId(){return new jc(fi.keyField().canonicalString())}isEqual(e){return(e=(0,At.m9)(e))instanceof rc&&this._delegate._internalPath.isEqual(e._internalPath)}}class bl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function g0(){return new Pc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bl(e)}static delete(){const e=function p0(){return new Wh("deleteField")}();return e._methodName="FieldValue.delete",new bl(e)}static arrayUnion(...e){const t=function m0(...n){return new Q_("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bl(t)}static arrayRemove(...e){const t=function Tw(...n){return new hw("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bl(t)}static increment(e){const t=function y0(n){return new tI("increment",n)}(e);return t._methodName="FieldValue.increment",new bl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const b0={Firestore:Rd,GeoPoint:jp,Timestamp:Ar,Blob:eg,Transaction:D0,WriteBatch:Dy,DocumentReference:Va,DocumentSnapshot:Nd,Query:Xs,QueryDocumentSnapshot:Uc,QuerySnapshot:rg,CollectionReference:Od,FieldPath:jc,FieldValue:bl,setLogLevel:function Iy(n){!function pf(n){Xr.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Mw(n,e){return function xw(n,e=io.z){return new ye.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(n,e)}function Ty(n,e){return Mw(n,e).pipe((0,se.U)(t=>({payload:t,type:"query"})))}function ig(n,e){return Ty(n,e).pipe((0,ds.O)(void 0),Go(),(0,se.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,I)=>{const O=a.find(Y=>Y.doc.ref.isEqual(p.ref)),U=t?.payload.docs.find(Y=>Y.ref.isEqual(p.ref));O&&JSON.stringify(O.doc.metadata)===JSON.stringify(p.metadata)||!O&&U&&JSON.stringify(U.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:I,newIndex:I,type:"modified",doc:p}})}),l}))}function Sy(n,e,t){return ig(n,t).pipe((0,hs.R)((s,a)=>function C0(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function T0(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ay(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ay(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ay(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),function fs(n,e=js.y){return n=n??Ts,(0,so.e)((t,s)=>{let a,l=!0;t.subscribe((0,Cs.x)(s,p=>{const I=e(p);(l||!n(a,I))&&(l=!1,a=I,s.next(p))}))})}(),(0,se.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Ay(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function xy(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function lI(n){(function Cy(n,e){n.INTERNAL.registerComponent(new wt.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},b0)))})(n,(e,t)=>new Rd(e,t,new I0)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(ps.Z);class S0{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=ig(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,se.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,ds.O)(void 0),Go(),(0,et.h)(([s,a])=>a.length>0||!s),(0,se.U)(([s,a])=>a),ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,hs.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=xy(e);return Sy(this.query,t,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return Ty(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),ke.iC)}get(e){return(0,Ce.D)(this.query.get(e)).pipe(ke.iC)}add(e){return this.ref.add(e)}doc(e){return new A0(this.ref.doc(e),this.afs)}}class A0{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=Ry(s,t);return new S0(a,l,this.afs)}snapshotChanges(){return function Rw(n,e){return Mw(n,e).pipe((0,ds.O)(void 0),Go(),(0,se.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,se.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ce.D)(this.ref.get(e)).pipe(ke.iC)}}class x0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ig(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,et.h)(t=>t.length>0),ke.iC):ig(this.query,this.afs.schedulers.outsideAngular).pipe(ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,hs.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=xy(e);return Sy(this.query,t,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return Ty(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),ke.iC)}get(e){return(0,Ce.D)(this.query.get(e)).pipe(ke.iC)}}const M0=new m.OlP("angularfire2.enableFirestorePersistence"),My=new m.OlP("angularfire2.firestore.persistenceSettings"),R0=new m.OlP("angularfire2.firestore.settings"),N0=new m.OlP("angularfire2.firestore.use-emulator");function Ry(n,e=(t=>t)){return{query:e(n),ref:n}}let O0=(()=>{class n{constructor(t,s,a,l,p,I,O,U,Y,ue,De,Be,st,Et,Bt,Qn,ti){this.schedulers=O;const Dn=(0,H.on)(t,I,s),Fn=Y;ue&&Ho(Dn,I,De,st,Et,Bt,Be,Qn),[this.firestore,this.persistenceEnabled$]=(0,H.cc)(`${Dn.name}.firestore`,"AngularFirestore",Dn.name,()=>{const bn=I.runOutsideAngular(()=>Dn.firestore());if(l&&bn.settings(l),Fn&&bn.useEmulator(...Fn),a&&!(0,Qe.PM)(p)){const Mn=()=>{try{return(0,Ce.D)(bn.enablePersistence(U||void 0).then(()=>!0,()=>!1))}catch(Vs){return typeof console<"u"&&console.warn(Vs),(0,he.of)(!1)}};return[bn,I.runOutsideAngular(Mn)]}return[bn,(0,he.of)(!1)]},[l,Fn,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=Ry(a,s),I=this.schedulers.ngZone.run(()=>l);return new S0(I,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new x0(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new A0(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(H.Dh),m.LFG(H.xv,8),m.LFG(M0,8),m.LFG(R0,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ke.HU),m.LFG(My,8),m.LFG(N0,8),m.LFG(ls,8),m.LFG(Da,8),m.LFG(oa,8),m.LFG(Ti,8),m.LFG(Do,8),m.LFG(Si,8),m.LFG(ji,8),m.LFG(to,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Nw=(()=>{class n{constructor(){no.Z.registerVersion("angularfire",ke.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:M0,useValue:!0},{provide:My,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[O0]}),n})();var or=j(433),sg=j(2340),dI=j(8395),Es=j(2435),hI=j(5114),Ow=j(1135);class sa{constructor(e,t,s,a){this.afs=e,this.afAuth=t,this.router=s,this.ngZone=a,this.user$=new Ow.X(null),this.loggedIn$=new Ow.X(!1),this.afAuth.authState.subscribe(l=>{l?(this.userData=l,this.user$.next(l),this.loggedIn$.next(!0),localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(this.loggedIn$.next(!1),localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(s=>{this.SetUserData(s.user),this.afAuth.authState.subscribe(a=>{a&&(this.loggedIn$.next(!0),this.router.navigate(["dashboard"]))})}).catch(s=>{window.alert(s.message)})}SignUp(e,t,s){return this.afAuth.createUserWithEmailAndPassword(e,t).then(a=>{this.SendVerificationMail(),this.afAuth.currentUser.then(l=>{l?.updateProfile({displayName:s}),this.SetUserData(a.user)})}).catch(a=>{window.alert(a.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.loggedIn$.next(!0),this.router.navigate(["payment"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}GoogleAuth(){return this.AuthLogin(new hI.Q).then(e=>{this.loggedIn$.next(!0),this.router.navigate(["/dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.loggedIn$.next(!0),this.router.navigate(["/dashboard"]),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.loggedIn$.next(!1),this.router.navigate(["login"])})}}sa.\u0275fac=function(e){return new(e||sa)(m.LFG(O0),m.LFG(ls),m.LFG(Es.F0),m.LFG(m.R0b))},sa.\u0275prov=m.Yz7({token:sa,factory:sa.\u0275fac,providedIn:"root"});class og{constructor(e,t,s){this.templateRef=e,this.auth=t,this.viewContainer=s}ngOnInit(){this.auth.loggedIn$.subscribe(e=>{e&&this.isLogged||!e&&!this.isLogged?(this.viewContainer.clear(),this.el=this.viewContainer.createEmbeddedView(this.templateRef)):this.viewContainer.clear()})}ngOnDestroy(){this.viewContainer.clear()}}og.\u0275fac=function(e){return new(e||og)(m.Y36(m.Rgc),m.Y36(sa),m.Y36(m.s_b))},og.\u0275dir=m.lG2({type:og,selectors:[["","isLogged",""]],inputs:{isLogged:"isLogged"}});const fI=function(){return["/dashboard"]},pI=function(){return{exact:!0}};function ag(n,e){1&n&&(m.TgZ(0,"li")(1,"a",11),m._uU(2," Dashboard "),m.qZA()()),2&n&&(m.xp6(1),m.Q6J("routerLink",m.DdM(2,fI))("routerLinkActiveOptions",m.DdM(3,pI)))}function gI(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"li")(1,"button",12),m.NdJ("click",function(){m.CHM(t);const a=m.oxw();return m.KtG(a.logout())}),m._uU(2," Log out "),m.qZA()()}}class Pd{constructor(e,t){this.auth=e,this.router=t}logout(){this.auth.SignOut(),this.router.navigate(["login"])}}Pd.\u0275fac=function(e){return new(e||Pd)(m.Y36(sa),m.Y36(Es.F0))},Pd.\u0275cmp=m.Xpm({type:Pd,selectors:[["app-navbar"]],decls:13,vars:2,consts:[[1,"border-gray-200","px-2","sm:px-4","py-2.5","bg-primary"],[1,"container","flex","flex-wrap","items-center","justify-between","mx-auto"],["routerLink","/",1,"flex","items-center"],["src","/assets/images/logo.png","alt","EXA Logo",1,"h-28","sm:h-9"],["data-collapse-toggle","navbar-default","type","button","aria-controls","navbar-default","aria-expanded","false",1,"inline-flex","items-center","p-2","ml-3","text-sm","rounded-lg","md:hidden","focus:outline-none","focus:ring-2","focus:ring-gray-200","text-gray-400","hover:bg-gray-700","focus:ring-gray-600"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["fill-rule","evenodd","d","M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule","evenodd"],["id","navbar-default",1,"hidden","w-full","md:block","md:w-auto"],[1,"flex","flex-col","border","md:flex-row","md:space-x-8","md:mt-0","md:text-sm","md:font-medium","md:border-0"],[4,"isLogged"],["routerLinkActive","active",1,"block","py-2","pl-3","pr-4","rounded","md:border-0","md:p-0","text-gray-400","md:hover:text-white","hover:bg-gray-700","hover:text-white","md:hover:bg-transparent",3,"routerLink","routerLinkActiveOptions"],[1,"block","py-2","pl-3","pr-4","rounded","md:border-0","md:p-0","text-gray-400","md:hover:text-white","hover:bg-gray-700","hover:text-white","md:hover:bg-transparent",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),m._UZ(3,"img",3),m.qZA(),m.TgZ(4,"button",4)(5,"span",5),m._uU(6,"Open main menu"),m.qZA(),m.O4$(),m.TgZ(7,"svg",6),m._UZ(8,"path",7),m.qZA()(),m.kcU(),m.TgZ(9,"div",8)(10,"ul",9),m.YNc(11,ag,3,4,"li",10),m.YNc(12,gI,3,0,"li",10),m.qZA()()()()),2&e&&(m.xp6(11),m.Q6J("isLogged",!0),m.xp6(1),m.Q6J("isLogged",!0))},dependencies:[Es.rH,Es.Od,og],styles:[".active[_ngcontent-%COMP%]{font-weight:700;color:#fff}"]});class kd{}kd.\u0275fac=function(e){return new(e||kd)},kd.\u0275cmp=m.Xpm({type:kd,selectors:[["app-main"]],ngContentSelectors:["*"],decls:2,vars:0,template:function(e,t){1&e&&(m.F$t(),m._UZ(0,"app-navbar"),m.Hsn(1))},dependencies:[Pd]});class Fd{constructor(){this.title="exam"}}function mI(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"form",5)(1,"div",6)(2,"label",7),m._uU(3,"E-mail"),m.qZA(),m._UZ(4,"input",8),m.qZA(),m.TgZ(5,"div",9)(6,"button",10),m.NdJ("click",function(){m.CHM(t);const a=m.oxw();return m.KtG(a.forgetPass())}),m._uU(7," Recuperar palavra-passe "),m.qZA()()()}}function Ny(n,e){1&n&&(m.TgZ(0,"form",5)(1,"div",6)(2,"label",11),m._uU(3,"Nova palavra-passe"),m.qZA(),m._UZ(4,"input",12),m.qZA(),m.TgZ(5,"div",6)(6,"label",11),m._uU(7," Repete a tua nova palavra-passe "),m.qZA(),m._UZ(8,"input",13),m.qZA(),m.TgZ(9,"div",9)(10,"button",14),m._uU(11," Guardar "),m.qZA()()())}Fd.\u0275fac=function(e){return new(e||Fd)},Fd.\u0275cmp=m.Xpm({type:Fd,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(m.TgZ(0,"app-main"),m._UZ(1,"router-outlet"),m.qZA())},dependencies:[Es.lC,kd]});class Ld{constructor(){this.step=1}forgetPass(){this.step=2}}Ld.\u0275fac=function(e){return new(e||Ld)},Ld.\u0275cmp=m.Xpm({type:Ld,selectors:[["app-forget-pass"]],decls:7,vars:2,consts:[[1,"py-20","container"],["src","/assets/images/aww.png",1,"h-48","mx-auto","-mb-2"],[1,"max-w-2xl","bg-[#F2F2F2]","shadow-2xl","py-6","mx-auto"],["src","/assets/images/tlogo.png",1,"h-20","mx-auto","mb-6"],["class","max-w-[80%] mx-auto mb-20",4,"ngIf"],[1,"max-w-[80%]","mx-auto","mb-20"],[1,"flex","flex-col","mb-6"],["for","email",1,"font-bold","text-lg"],["type","email","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","justify-center"],["type","button",1,"button","text-xl",3,"click"],["for","password",1,"font-bold","text-lg"],["type","password","placeholder","Nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","password","placeholder","Repete a tua nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","button","routerLink","/dashboard",1,"button","text-xl"]],template:function(e,t){1&e&&(m.TgZ(0,"section")(1,"div",0),m._UZ(2,"img",1),m.TgZ(3,"div",2),m._UZ(4,"img",3),m.YNc(5,mI,8,0,"form",4),m.YNc(6,Ny,12,0,"form",4),m.qZA()()()),2&e&&(m.xp6(5),m.Q6J("ngIf",1===t.step),m.xp6(1),m.Q6J("ngIf",2===t.step))},dependencies:[Qe.O5,or._Y,or.JL,or.F,Es.rH]});class sf{constructor(e,t,s){this.router=e,this.auth=t,this.fb=s,this.isLoading=!1,this.form=this.fb.group({username:[""],password:[""]})}login(){const{username:e,password:t}=this.form.value;this.isLoading=!0,this.auth.SignIn(e,t).then(s=>{this.isLoading=!1})}}sf.\u0275fac=function(e){return new(e||sf)(m.Y36(Es.F0),m.Y36(sa),m.Y36(or.qu))},sf.\u0275cmp=m.Xpm({type:sf,selectors:[["app-login"]],decls:25,vars:3,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg","pt-3"],["type","email","formControlName","username","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],[1,"mb-6","flex","flex-col"],["for","password",1,"font-bold","text-lg"],["type","password","formControlName","password","placeholder","Password",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","items-center","justify-between","mb-10"],[1,"button","text-xl",3,"disabled","click"],["routerLink","/register",1,"mb-4"],[1,"underline","text-blue-500"],["routerLink","/forget-password"],[1,"fixed","right-0","top-[3.5rem]"],["src","/assets/images/login-bg.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),m._uU(3,"Log-in"),m.qZA(),m.TgZ(4,"form",3)(5,"div",4)(6,"label",5),m._uU(7,"E-mail"),m.qZA(),m._UZ(8,"input",6),m.qZA(),m.TgZ(9,"div",7)(10,"label",8),m._uU(11,"Password"),m.qZA(),m._UZ(12,"input",9),m.qZA(),m.TgZ(13,"div",10)(14,"button",11),m.NdJ("click",function(){return t.login()}),m._uU(15),m.qZA()()(),m.TgZ(16,"a",12)(17,"p",13),m._uU(18,"Ainda n\xe3o tens conta? Cria agora"),m.qZA()(),m.TgZ(19,"a",14)(20,"p",13),m._uU(21,"Esqueci-me da palavra-passe"),m.qZA()()(),m._UZ(22,"div"),m.qZA(),m.TgZ(23,"div",15),m._UZ(24,"img",16),m.qZA()),2&e&&(m.xp6(4),m.Q6J("formGroup",t.form),m.xp6(10),m.Q6J("disabled",!t.form.valid||t.isLoading),m.xp6(1),m.hij(" ",t.isLoading?"Loading...":"Keep"," "))},dependencies:[or._Y,or.Fj,or.JJ,or.JL,or.sg,or.u,Es.rH]});class Vd{constructor(e,t,s){this.router=e,this.auth=t,this.fb=s,this.isLoading=!1,this.form=this.fb.group({name:[""],username:[""],password:[""]}),console.log(sg.N),sg.N.production||this.form.setValue({name:"test",username:"aib.tmkm@gmail.com",password:"123456"})}login(){this.isLoading=!0;const{username:e,password:t,name:s}=this.form.value;this.auth.SignUp(e,t,s).then(()=>{this.isLoading=!1}).catch(()=>{this.isLoading=!1})}}Vd.\u0275fac=function(e){return new(e||Vd)(m.Y36(Es.F0),m.Y36(sa),m.Y36(or.qu))},Vd.\u0275cmp=m.Xpm({type:Vd,selectors:[["app-register"]],decls:31,vars:3,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full","flex","flex-col","mb-6",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg"],["type","text","formControlName","name","placeholder","Enter Your Name",1,"border","border-[#4472c4]","p-2","w-full"],["type","email","formControlName","username","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],["for","password",1,"font-bold","text-lg"],["type","password","formControlName","password","placeholder","Nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","password","placeholder","Repete a tua nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","mb-10"],[1,"button",3,"disabled","click"],["routerLink","/login"],[1,"underline","text-blue-500"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(m.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1",2),m._uU(4,"My personal data"),m.qZA(),m.TgZ(5,"form",3)(6,"div",4)(7,"label",5),m._uU(8,"Name"),m.qZA(),m._UZ(9,"input",6),m.qZA(),m.TgZ(10,"div",4)(11,"label",5),m._uU(12,"E-mail"),m.qZA(),m._UZ(13,"input",7),m.qZA(),m.TgZ(14,"div",4)(15,"label",8),m._uU(16,"Nova palavra-passe"),m.qZA(),m._UZ(17,"input",9),m.qZA(),m.TgZ(18,"div",4)(19,"label",8),m._uU(20," Repete a tua nova palavra-passe "),m.qZA(),m._UZ(21,"input",10),m.qZA()(),m.TgZ(22,"div",11)(23,"button",12),m.NdJ("click",function(){return t.login()}),m._uU(24),m.qZA()(),m.TgZ(25,"a",13)(26,"p",14),m._uU(27,"Already have an account? Log in"),m.qZA()()(),m._UZ(28,"div"),m.qZA(),m.TgZ(29,"div",15),m._UZ(30,"img",16),m.qZA()()),2&e&&(m.xp6(5),m.Q6J("formGroup",t.form),m.xp6(18),m.Q6J("disabled",t.isLoading),m.xp6(1),m.hij(" ",t.isLoading?"Loading...":"Continue"," "))},dependencies:[or._Y,or.Fj,or.JJ,or.JL,or.sg,or.u,Es.rH]});class Cl{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.loggedIn$.pipe((0,se.U)(s=>(console.log(s),!s||(this.router.navigate(["dashboard"]),!1))))}}Cl.\u0275fac=function(e){return new(e||Cl)(m.LFG(sa),m.LFG(Es.F0))},Cl.\u0275prov=m.Yz7({token:Cl,factory:Cl.\u0275fac,providedIn:"root"});const yI=function(n){return{"box-active":n}};function Pw(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",9),m.NdJ("click",function(){const l=m.CHM(t).index,p=m.oxw(2);return m.KtG(p.selectCard(l))}),m._UZ(1,"img",10),m.TgZ(2,"strong"),m._uU(3),m.qZA()()}if(2&n){const t=e.$implicit;m.Q6J("ngClass",m.VKq(3,yI,t.selected)),m.xp6(1),m.Q6J("src",t.icon,m.LSH),m.xp6(2),m.hij(" ",t.name," ")}}const kw=function(){return{isExisting:!0}};function cg(n,e){if(1&n&&(m.TgZ(0,"section")(1,"div",1)(2,"div",2)(3,"h1",3),m._uU(4),m.qZA(),m.TgZ(5,"p",4),m._uU(6,"ESCOLHE A(S) TUA(S) DISCIPLINAS"),m.qZA()(),m.TgZ(7,"div",5),m.YNc(8,Pw,4,5,"div",6),m.qZA(),m.TgZ(9,"div",7)(10,"button",8),m._uU(11," Come\xe7ar "),m.qZA()()()()),2&n){const t=m.oxw();m.xp6(4),m.hij(" Bem-vindo ao EXA, (",null==t.user?null:t.user.displayName,") "),m.xp6(4),m.Q6J("ngForOf",t.cards),m.xp6(2),m.Q6J("queryParams",m.DdM(3,kw))}}function Fw(n,e){if(1&n&&(m.TgZ(0,"option",28),m._uU(1),m.qZA()),2&n){const t=e.$implicit;m.Q6J("value",t.name),m.xp6(1),m.hij(" ",t.name," ")}}function vI(n,e){if(1&n&&(m.TgZ(0,"section")(1,"div",11)(2,"div",12)(3,"h1",13),m._uU(4,"Ol\xe1, (User name)"),m.qZA(),m.TgZ(5,"h4",14),m._uU(6,"Que exames queres praticar hoje?"),m.qZA(),m.TgZ(7,"select",15),m.YNc(8,Fw,2,2,"option",16),m.qZA()()(),m.TgZ(9,"div",17)(10,"div",18)(11,"div",19)(12,"h2",20),m._uU(13,"O meu perfil"),m.qZA(),m._UZ(14,"img",21),m.TgZ(15,"button",22),m._uU(16," Alterar dados "),m.qZA()(),m.TgZ(17,"div",19)(18,"h2",23),m._uU(19," Praticar escolhas m\xfaltiplas "),m.qZA(),m._UZ(20,"img",24),m.TgZ(21,"button",25),m._uU(22," Come\xe7ar "),m.qZA()(),m.TgZ(23,"div",19)(24,"h2",26),m._uU(25," Fazer "),m._UZ(26,"br"),m._uU(27," um exame "),m.qZA(),m._UZ(28,"img",24),m.TgZ(29,"button",27),m._uU(30," Escolher exame "),m.qZA()()()()()),2&n){const t=m.oxw();m.xp6(8),m.Q6J("ngForOf",t.cards)}}class lg{constructor(e,t){this.route=e,this.auth=t,this.isExisting=!0,this.cards=[{name:"Portugu\xeas",icon:"/assets/images/subjects/1.png",selected:!1},{name:"Matem\xe1tica A",icon:"/assets/images/subjects/2.png",selected:!1},{name:"Hist\xf3ria",icon:"/assets/images/subjects/3.png",selected:!1},{name:"Biologia e Geologia",icon:"/assets/images/subjects/4.png",selected:!1},{name:"Geografia",icon:"/assets/images/subjects/5.png",selected:!1},{name:"Filosofia",icon:"/assets/images/subjects/6.png",selected:!1},{name:"Economia A",icon:"/assets/images/subjects/7.png",selected:!1},{name:"F\xedsica e Qu\xedmica A",icon:"/assets/images/subjects/8.png",selected:!1}],this.user=null}ngOnInit(){this.auth.user$.subscribe(e=>{this.user=e}),this.route.queryParams.subscribe(e=>{this.isExisting="true"===e.isExisting})}selectCard(e){this.cards[e].selected=!this.cards[e].selected}}lg.\u0275fac=function(e){return new(e||lg)(m.Y36(Es.gz),m.Y36(sa))},lg.\u0275cmp=m.Xpm({type:lg,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container"],[1,"text-center","py-10"],[1,"text-4xl","font-bold","mb-2"],[1,"text-[#6A99D0]","font-medium"],[1,"grid","grid-cols-4","gap-6","mb-10","max-w-2xl","mx-auto"],["class","p-6 bg-[#F2F2F2] text-center border-[2px] cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-center"],["routerLink","/dashboard",1,"button",3,"queryParams"],[1,"p-6","bg-[#F2F2F2]","text-center","border-[2px]","cursor-pointer",3,"ngClass","click"],[1,"mx-auto","max-h-12","mb-4",3,"src"],[1,"bg-[#deebf7]","h-52"],[1,"container","flex","flex-col","items-center","py-10"],[1,"text-5xl","font-bold","mb-2"],[1,"text-lg","font-bold","mb-4"],[1,"py-2","px-6","shadow-md"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-white","pt-9","container"],[1,"flex","items-stretch","justify-center","gap-10"],[1,"d-card"],[1,"text-2xl","font-bold","pb-4"],["src","/assets/images/hi-img.png","alt","hi-img"],["routerLink","/edit-profile",1,"bg-[#00216e]","text-white","font-semibold","py-4","px-8","rounded-2xl"],[1,"text-2xl","font-bold","pb-4","text-[#4472c4]"],["src","/assets/images/pc-1.png","alt","pc-1",1,"pb-4","pl-5"],[1,"bg-[#4472c4]","text-white","font-semibold","py-4","px-12","rounded-2xl"],[1,"text-2xl","font-bold","pb-4","text-[#70ad47]"],["routerLink","/exam/choose",1,"bg-[#70ad47]","text-white","font-semibold","py-4","px-8","rounded-2xl"],[3,"value"]],template:function(e,t){1&e&&(m.YNc(0,cg,12,4,"section",0),m.YNc(1,vI,31,1,"section",0)),2&e&&(m.Q6J("ngIf",!t.isExisting),m.xp6(1),m.Q6J("ngIf",t.isExisting))},dependencies:[Qe.mk,Qe.sg,Qe.O5,or.YN,or.Kr,Es.rH],styles:[".d-card[_ngcontent-%COMP%]{flex:1 1 0%;--tw-bg-opacity: 1;background-color:rgb(242 242 242 / var(--tw-bg-opacity));padding:1.5rem 5rem;--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);display:flex;flex-direction:column;justify-content:space-between;align-items:center;gap:1rem}.d-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;object-fit:contain}.d-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.box-active[_ngcontent-%COMP%]{border:2px solid #4f71be}"]});const _I=function(){return{isExisting:!0}},Lw=function(){return{change:!0}};class af{constructor(e,t,s){this.router=e,this.auth=t,this.fb=s,this.isLoading=!1,this.form=this.fb.group({name:[""],username:[""]})}login(){this.isLoading=!0;const{username:e,password:t,name:s}=this.form.value;this.auth.SignUp(e,t,s).then(()=>{this.router.navigate(["dashboard"]),this.isLoading=!1}).catch(()=>{this.isLoading=!1})}}function Vw(n,e){if(1&n&&(m.TgZ(0,"div",10)(1,"h1",11),m._uU(2," My current subscription "),m.qZA(),m.TgZ(3,"form",12)(4,"div",13)(5,"label",14),m._uU(6," Selected plan "),m.qZA(),m._UZ(7,"input",15),m.qZA(),m.TgZ(8,"div",13)(9,"label",16),m._uU(10," In use since "),m.qZA(),m._UZ(11,"input",17),m.qZA(),m.TgZ(12,"div",18)(13,"label",16),m._uU(14," Expires in "),m.qZA(),m._UZ(15,"input",19),m.qZA()(),m.TgZ(16,"div",20)(17,"a",21),m._uU(18," Cancel and go back "),m.qZA()()()),2&n){const t=m.oxw(2);m.xp6(7),m.cQ8("value","",t.packages[t.selectedPackage].price," ",t.packages[t.selectedPackage].name," ",t.packages[t.selectedPackage].desc,"")}}function EI(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",22)(1,"div",23),m.NdJ("click",function(){const l=m.CHM(t).index,p=m.oxw(2);return m.KtG(p.selectPackage(l))}),m.TgZ(2,"span"),m._uU(3," \u2713 "),m.qZA()(),m.TgZ(4,"div",24)(5,"h3",25),m._uU(6),m.qZA(),m.TgZ(7,"p",26),m._uU(8),m.qZA(),m.TgZ(9,"p",27)(10,"del"),m._uU(11),m.qZA()(),m.TgZ(12,"div",28)(13,"button",29),m.NdJ("click",function(){const l=m.CHM(t).index,p=m.oxw(2);return m.KtG(p.selectPackage(l))}),m._uU(14),m.qZA()()()()}if(2&n){const t=e.$implicit;m.xp6(2),m.Gre("font-bold text-4xl group-hover:block ",t.selected?"!block":"hidden",""),m.Udp("color",t.color),m.xp6(3),m.Udp("color",t.color),m.xp6(1),m.hij(" ",t.name," "),m.xp6(2),m.hij(" ",t.desc," "),m.xp6(1),m.Udp("color",t.color),m.xp6(2),m.hij(" ",t.originalPrice," "),m.xp6(2),m.Udp("background-color",t.color),m.xp6(1),m.hij(" ",t.price," ")}}af.\u0275fac=function(e){return new(e||af)(m.Y36(Es.F0),m.Y36(sa),m.Y36(or.qu))},af.\u0275cmp=m.Xpm({type:af,selectors:[["app-edit-profile"]],decls:25,vars:7,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full","flex","flex-col","mb-6",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg"],["type","text","formControlName","name","placeholder","Enter Your Name",1,"border","border-[#4472c4]","p-2","w-full"],["type","email","formControlName","username","placeholder","Enter Your E-mail","readonly","",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","mb-10","gap-4"],["routerLink","/dashboard",1,"button","!bg-gray-400",3,"queryParams"],[1,"button",3,"disabled"],[1,"mt-20"],["routerLink","/payment",1,"button","!bg-[#808080]","!rounded-lg","!px-6","!py-3","cursor-pointer","text-2xl","absolute","bottom-5",3,"queryParams"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(m.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1",2),m._uU(4,"My personal data"),m.qZA(),m.TgZ(5,"form",3)(6,"div",4)(7,"label",5),m._uU(8,"Name"),m.qZA(),m._UZ(9,"input",6),m.qZA(),m.TgZ(10,"div",4)(11,"label",5),m._uU(12,"E-mail"),m.qZA(),m._UZ(13,"input",7),m.qZA()(),m.TgZ(14,"div",8)(15,"button",9),m._uU(16," Go Back "),m.qZA(),m.TgZ(17,"button",10),m._uU(18),m.qZA()(),m.TgZ(19,"div",11)(20,"a",12),m._uU(21," Change current plan "),m.qZA()()(),m._UZ(22,"div"),m.qZA(),m.TgZ(23,"div",13),m._UZ(24,"img",14),m.qZA()()),2&e&&(m.xp6(5),m.Q6J("formGroup",t.form),m.xp6(10),m.Q6J("queryParams",m.DdM(5,_I)),m.xp6(2),m.Q6J("disabled",t.isLoading),m.xp6(1),m.hij(" ",t.isLoading?"Loading...":"Save"," "),m.xp6(2),m.Q6J("queryParams",m.DdM(6,Lw)))},dependencies:[or._Y,or.Fj,or.JJ,or.JL,or.sg,or.u,Es.rH],styles:["input[readonly][_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #f5f5f5;cursor:not-allowed}"]});const P0=function(){return{step:2}};function k0(n,e){1&n&&(m.TgZ(0,"div",30)(1,"button",31),m._uU(2," Continue "),m.qZA()()),2&n&&(m.xp6(1),m.Q6J("queryParams",m.DdM(1,P0)))}const F0=function(){return{step:3}};function wI(n,e){1&n&&(m.TgZ(0,"div",32)(1,"button",33),m._uU(2," Pay new subscription "),m.qZA(),m.TgZ(3,"button",34),m._uU(4," Cancel my subscription "),m.qZA()()),2&n&&(m.xp6(1),m.Q6J("queryParams",m.DdM(2,P0)),m.xp6(2),m.Q6J("queryParams",m.DdM(3,F0)))}function su(n,e){if(1&n&&(m.TgZ(0,"section")(1,"div",1),m.YNc(2,Vw,19,3,"div",2),m.TgZ(3,"div",3)(4,"h1",4),m._uU(5,"Pick your plan"),m.qZA(),m.TgZ(6,"div",5),m.YNc(7,EI,15,15,"div",6),m.qZA(),m.TgZ(8,"p",7),m._uU(9," * Oferta limitada aos primeiros 1,000 alunos a efetuar registo no EXA "),m.qZA(),m.YNc(10,k0,3,2,"div",8),m.YNc(11,wI,5,4,"div",9),m.qZA()()()),2&n){const t=m.oxw();m.xp6(2),m.Q6J("ngIf",t.isChange),m.xp6(5),m.Q6J("ngForOf",t.packages),m.xp6(3),m.Q6J("ngIf",!t.isChange),m.xp6(1),m.Q6J("ngIf",t.isChange)}}function Uw(n,e){if(1&n&&(m.TgZ(0,"option",45),m._uU(1),m.qZA()),2&n){const t=e.$implicit;m.Q6J("value",e.index),m.xp6(1),m.lnq(" ",t.price," ",t.name," ",t.desc," ")}}function Oy(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"section")(1,"div",35)(2,"div",36)(3,"h1",37),m._uU(4,"Pagamento"),m.qZA(),m.TgZ(5,"form",12)(6,"div",13)(7,"label",14),m._uU(8,"Plano selecionado "),m.qZA(),m.TgZ(9,"select",38),m.NdJ("ngModelChange",function(a){m.CHM(t);const l=m.oxw();return m.KtG(l.selectedPackage=a)}),m.YNc(10,Uw,2,4,"option",39),m.qZA()()(),m.TgZ(11,"div",40)(12,"button",41),m._uU(13," Pay "),m.qZA()(),m.TgZ(14,"p",42),m._uU(15," * Oferta limitada aos primeiros 1,000 alunos a efetuar registo no EXA "),m.qZA()(),m._UZ(16,"div"),m.qZA(),m.TgZ(17,"div",43),m._UZ(18,"img",44),m.qZA()()}if(2&n){const t=m.oxw();m.xp6(9),m.Q6J("ngModel",t.selectedPackage),m.xp6(1),m.Q6J("ngForOf",t.packages)}}const Bw=function(){return{change:!0}};function II(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"section")(1,"div",46),m._UZ(2,"img",47),m.TgZ(3,"div",48),m._UZ(4,"img",49),m.TgZ(5,"div",50)(6,"h2",51),m._uU(7," Are you sure you want to cancel your subscription? "),m.qZA(),m.TgZ(8,"div",32)(9,"button",52),m.NdJ("click",function(){m.CHM(t);const a=m.oxw();return m.KtG(a.cancelSubscription())}),m._uU(10," Yes, Cancel "),m.qZA(),m.TgZ(11,"button",53),m._uU(12," No, Go back "),m.qZA()()()()()()}2&n&&(m.xp6(11),m.Q6J("queryParams",m.DdM(1,Bw)))}class Eo{constructor(e,t){this.route=e,this.auth=t,this.step=1,this.packages=[{name:"B\xe1sico",desc:"1 Disciplina | 10 Exames | 1 M\xeas",originalPrice:"7,99\u20ac/m\xeas",price:"4,99\u20ac/m\xeas*",color:"#00216e",selected:!0},{name:"Premium",desc:"2 Disciplinas | 20 Exames | 1 Meses",originalPrice:"19,99\u20ac/m\xeas",price:"14,99\u20ac/m\xeas*",color:"#7EAB55",selected:!1},{name:"Oferta limitada",desc:"Todas as Disciplinas | Todos os exames | 1 M\xeas",originalPrice:"29,99\u20ac/m\xeas",price:"24,99\u20ac/m\xeas*",color:"#2254C9",selected:!1}],this.selectedPackage=0,this.isChange=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{console.log(e),this.step=e.step?+e.step:1,e.change&&(this.isChange=!0)})}selectPackage(e){this.selectedPackage=e,this.packages.forEach((t,s)=>{this.packages[s].selected=s===e})}cancelSubscription(){alert("subscription will be canceld and user will be logged out"),console.log("cancel")}}Eo.\u0275fac=function(e){return new(e||Eo)(m.Y36(Es.gz),m.Y36(sa))},Eo.\u0275cmp=m.Xpm({type:Eo,selectors:[["app-payment"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"container","gap-10","py-10","lg:flex","justify-center"],["class","mb-10",4,"ngIf"],[1,"max-w-5xl"],[1,"text-4xl","font-bold","text-center","mb-20"],[1,"flex","justify-center","gap-3","mb-12"],["class","flex-1 relative group",4,"ngFor","ngForOf"],[1,"text-sm","text-center","mb-20"],["class","flex items-center justify-center mb-10",4,"ngIf"],["class","flex items-center justify-center mb-10 gap-6",4,"ngIf"],[1,"mb-10"],[1,"text-4xl","font-bold","text-center","mb-6"],[1,"w-full","flex","flex-col","mb-10"],[1,"mb-3","flex","flex-col"],["for","email",1,"font-bold","text-lg"],["type","email","placeholder","Premium (14,99\u20ac/m\xeas*) 2 disciplinas | 20 exames",1,"border","border-[#4472c4]","p-2",3,"value"],["for","password",1,"font-bold","text-lg"],["type","text","placeholder","Data de subscri\xe7\xe3o","value","31-02-2023","readonly","",1,"border","border-[#4472c4]","p-2"],[1,"flex","flex-col"],["readonly","","type","text","placeholder","Data de subscri\xe7\xe3o  + 1 mes","value","Subscription date + 1 month",1,"border","border-[#4472c4]","p-2"],[1,"text-center"],["routerLink","/edit-profile",1,"button","!bg-gray-400","font-bold","cursor-pointer"],[1,"flex-1","relative","group"],[1,"cursor-pointer","flex","items-center","justify-center","w-[50px]","h-[50px]","border-2","border-blue-700","shadow-2xl","bg-white","absolute","right-1/2","top-0","z-10","translate-x-1/2","-translate-y-[90%]",3,"click"],[1,"text-center","shadow-lg","border-2","pt-8","px-6","rounded-[70px]","relative","flex","flex-col","bg-white"],[1,"text-2xl","font-bold"],[1,"mb-4","text-sm","min-h-[40px]"],[1,"font-bold","mb-4"],[1,"flex","justify-center"],[1,"py-2","px-6","font-bold","text-white","rounded-full","-mb-6",3,"click"],[1,"flex","items-center","justify-center","mb-10"],["routerLink","/payment",1,"bg-[#70ad47]","py-2","px-8","text-white","text-xl","font-semibold","rounded-lg",3,"queryParams"],[1,"flex","items-center","justify-center","mb-10","gap-6"],["routerLink","/payment",1,"button","!rounded-lg","!px-6","!py-3","cursor-pointer","font-bold",3,"queryParams"],["routerLink","/payment",1,"button","!bg-red-500","!rounded-lg","!px-6","!py-3","cursor-pointer","font-bold",3,"queryParams"],[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],["name","select-package",1,"border","border-[#4472c4]","p-2",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","mb-10"],["routerLink","/payment",1,"button","!rounded-lg","!px-6","!py-3","cursor-pointer","text-xl","font-bold","min-w-[200px]"],[1,"text-sm","text-center"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"],[3,"value"],[1,"py-20","container"],["src","/assets/images/aww.png",1,"h-48","mx-auto","-mb-2"],[1,"max-w-2xl","bg-[#F2F2F2]","shadow-2xl","py-10","mx-auto"],["src","/assets/images/tlogo.png",1,"h-20","mx-auto","mb-6"],[1,"px-10","font-bold"],[1,"font-bold","text-4xl","text-center","mb-10"],[1,"button","!bg-red-500",3,"click"],["routerLink","/payment",1,"button","cursor-pointer",3,"queryParams"]],template:function(e,t){1&e&&(m.YNc(0,su,12,4,"section",0),m.YNc(1,Oy,19,2,"section",0),m.YNc(2,II,13,2,"section",0)),2&e&&(m.Q6J("ngIf",1===t.step),m.xp6(1),m.Q6J("ngIf",2===t.step),m.xp6(1),m.Q6J("ngIf",3===t.step))},dependencies:[Qe.sg,Qe.O5,or._Y,or.YN,or.Kr,or.EJ,or.JJ,or.JL,or.On,or.F,Es.rH]});class Ud{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["/login"]),!0}}Ud.\u0275fac=function(e){return new(e||Ud)(m.LFG(sa),m.LFG(Es.F0))},Ud.\u0275prov=m.Yz7({token:Ud,factory:Ud.\u0275fac,providedIn:"root"});const Py=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",canActivate:[Cl],component:sf},{path:"forget-password",canActivate:[Cl],component:Ld},{path:"register",canActivate:[Cl],component:Vd},{path:"",canActivate:[Ud],children:[{path:"home",redirectTo:"dashboard"},{path:"payment",component:Eo},{path:"dashboard",component:lg},{path:"edit-profile",component:af},{path:"exam",loadChildren:()=>j.e(255).then(j.bind(j,3255)).then(n=>n.ExamModule)}]}];class Bd{}Bd.\u0275fac=function(e){return new(e||Bd)},Bd.\u0275mod=m.oAB({type:Bd}),Bd.\u0275inj=m.cJS({imports:[Es.Bz.forRoot(Py,{useHash:!0}),Es.Bz]});class jd{}jd.\u0275fac=function(e){return new(e||jd)},jd.\u0275mod=m.oAB({type:jd,bootstrap:[Fd]}),jd.\u0275inj=m.cJS({providers:[sa],imports:[dI.m,g.b2,or.UX,H.hO.initializeApp(sg.N.firebaseConfig),si,Nw,Bd]}),g.q6().bootstrapModule(jd).catch(n=>console.error(n))},8395:(It,Re,j)=>{j.d(Re,{m:()=>de});var g=j(6895),H=j(433),m=j(4650);class de{}de.\u0275fac=function(ye){return new(ye||de)},de.\u0275mod=m.oAB({type:de}),de.\u0275inj=m.cJS({imports:[g.ez,H.u5,g.ez,H.u5]})},1135:(It,Re,j)=>{j.d(Re,{X:()=>H});var g=j(7579);class H extends g.x{constructor(de){super(),this._value=de}get value(){return this.getValue()}_subscribe(de){const he=super._subscribe(de);return!he.closed&&de.next(this._value),he}getValue(){const{hasError:de,thrownError:he,_value:ye}=this;if(de)throw he;return this._throwIfClosed(),ye}next(de){super.next(this._value=de)}}},9751:(It,Re,j)=>{j.d(Re,{y:()=>Ie});var g=j(930),H=j(727),m=j(8822),de=j(9635),he=j(2416),ye=j(576),Ce=j(2806);let Ie=(()=>{class fe{constructor(He){He&&(this._subscribe=He)}lift(He){const nt=new fe;return nt.source=this,nt.operator=He,nt}subscribe(He,nt,Dt){const Le=function se(fe){return fe&&fe instanceof g.Lv||function oe(fe){return fe&&(0,ye.m)(fe.next)&&(0,ye.m)(fe.error)&&(0,ye.m)(fe.complete)}(fe)&&(0,H.Nn)(fe)}(He)?He:new g.Hp(He,nt,Dt);return(0,Ce.x)(()=>{const{operator:qe,source:Ze}=this;Le.add(qe?qe.call(Le,Ze):Ze?this._subscribe(Le):this._trySubscribe(Le))}),Le}_trySubscribe(He){try{return this._subscribe(He)}catch(nt){He.error(nt)}}forEach(He,nt){return new(nt=Te(nt))((Dt,Le)=>{const qe=new g.Hp({next:Ze=>{try{He(Ze)}catch(et){Le(et),qe.unsubscribe()}},error:Le,complete:Dt});this.subscribe(qe)})}_subscribe(He){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(He)}[m.L](){return this}pipe(...He){return(0,de.U)(He)(this)}toPromise(He){return new(He=Te(He))((nt,Dt)=>{let Le;this.subscribe(qe=>Le=qe,qe=>Dt(qe),()=>nt(Le))})}}return fe.create=tt=>new fe(tt),fe})();function Te(fe){var tt;return null!==(tt=fe??he.v.Promise)&&void 0!==tt?tt:Promise}},7579:(It,Re,j)=>{j.d(Re,{x:()=>Ce});var g=j(9751),H=j(727);const de=(0,j(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=j(8737),ye=j(2806);let Ce=(()=>{class Te extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(se){const fe=new Ie(this,this);return fe.operator=se,fe}_throwIfClosed(){if(this.closed)throw new de}next(se){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const fe of this.currentObservers)fe.next(se)}})}error(se){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=se;const{observers:fe}=this;for(;fe.length;)fe.shift().error(se)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:se}=this;for(;se.length;)se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var se;return(null===(se=this.observers)||void 0===se?void 0:se.length)>0}_trySubscribe(se){return this._throwIfClosed(),super._trySubscribe(se)}_subscribe(se){return this._throwIfClosed(),this._checkFinalizedStatuses(se),this._innerSubscribe(se)}_innerSubscribe(se){const{hasError:fe,isStopped:tt,observers:He}=this;return fe||tt?H.Lc:(this.currentObservers=null,He.push(se),new H.w0(()=>{this.currentObservers=null,(0,he.P)(He,se)}))}_checkFinalizedStatuses(se){const{hasError:fe,thrownError:tt,isStopped:He}=this;fe?se.error(tt):He&&se.complete()}asObservable(){const se=new g.y;return se.source=this,se}}return Te.create=(oe,se)=>new Ie(oe,se),Te})();class Ie extends Ce{constructor(oe,se){super(),this.destination=oe,this.source=se}next(oe){var se,fe;null===(fe=null===(se=this.destination)||void 0===se?void 0:se.next)||void 0===fe||fe.call(se,oe)}error(oe){var se,fe;null===(fe=null===(se=this.destination)||void 0===se?void 0:se.error)||void 0===fe||fe.call(se,oe)}complete(){var oe,se;null===(se=null===(oe=this.destination)||void 0===oe?void 0:oe.complete)||void 0===se||se.call(oe)}_subscribe(oe){var se,fe;return null!==(fe=null===(se=this.source)||void 0===se?void 0:se.subscribe(oe))&&void 0!==fe?fe:H.Lc}}},930:(It,Re,j)=>{j.d(Re,{Hp:()=>Dt,Lv:()=>fe});var g=j(576),H=j(727),m=j(2416),de=j(7849),he=j(5032);const ye=Te("C",void 0,void 0);function Te(ke,Qe,je){return{kind:ke,value:Qe,error:je}}var oe=j(3410),se=j(2806);class fe extends H.w0{constructor(Qe){super(),this.isStopped=!1,Qe?(this.destination=Qe,(0,H.Nn)(Qe)&&Qe.add(this)):this.destination=et}static create(Qe,je,ut){return new Dt(Qe,je,ut)}next(Qe){this.isStopped?Ze(function Ie(ke){return Te("N",ke,void 0)}(Qe),this):this._next(Qe)}error(Qe){this.isStopped?Ze(function Ce(ke){return Te("E",void 0,ke)}(Qe),this):(this.isStopped=!0,this._error(Qe))}complete(){this.isStopped?Ze(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Qe){this.destination.next(Qe)}_error(Qe){try{this.destination.error(Qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function He(ke,Qe){return tt.call(ke,Qe)}class nt{constructor(Qe){this.partialObserver=Qe}next(Qe){const{partialObserver:je}=this;if(je.next)try{je.next(Qe)}catch(ut){Le(ut)}}error(Qe){const{partialObserver:je}=this;if(je.error)try{je.error(Qe)}catch(ut){Le(ut)}else Le(Qe)}complete(){const{partialObserver:Qe}=this;if(Qe.complete)try{Qe.complete()}catch(je){Le(je)}}}class Dt extends fe{constructor(Qe,je,ut){let pe;if(super(),(0,g.m)(Qe)||!Qe)pe={next:Qe??void 0,error:je??void 0,complete:ut??void 0};else{let Se;this&&m.v.useDeprecatedNextContext?(Se=Object.create(Qe),Se.unsubscribe=()=>this.unsubscribe(),pe={next:Qe.next&&He(Qe.next,Se),error:Qe.error&&He(Qe.error,Se),complete:Qe.complete&&He(Qe.complete,Se)}):pe=Qe}this.destination=new nt(pe)}}function Le(ke){m.v.useDeprecatedSynchronousErrorHandling?(0,se.O)(ke):(0,de.h)(ke)}function Ze(ke,Qe){const{onStoppedNotification:je}=m.v;je&&oe.z.setTimeout(()=>je(ke,Qe))}const et={closed:!0,next:he.Z,error:function qe(ke){throw ke},complete:he.Z}},727:(It,Re,j)=>{j.d(Re,{Lc:()=>ye,w0:()=>he,Nn:()=>Ce});var g=j(576);const m=(0,j(3888).d)(Te=>function(se){Te(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((fe,tt)=>`${tt+1}) ${fe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se});var de=j(8737);class he{constructor(oe){this.initialTeardown=oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let oe;if(!this.closed){this.closed=!0;const{_parentage:se}=this;if(se)if(this._parentage=null,Array.isArray(se))for(const He of se)He.remove(this);else se.remove(this);const{initialTeardown:fe}=this;if((0,g.m)(fe))try{fe()}catch(He){oe=He instanceof m?He.errors:[He]}const{_finalizers:tt}=this;if(tt){this._finalizers=null;for(const He of tt)try{Ie(He)}catch(nt){oe=oe??[],nt instanceof m?oe=[...oe,...nt.errors]:oe.push(nt)}}if(oe)throw new m(oe)}}add(oe){var se;if(oe&&oe!==this)if(this.closed)Ie(oe);else{if(oe instanceof he){if(oe.closed||oe._hasParent(this))return;oe._addParent(this)}(this._finalizers=null!==(se=this._finalizers)&&void 0!==se?se:[]).push(oe)}}_hasParent(oe){const{_parentage:se}=this;return se===oe||Array.isArray(se)&&se.includes(oe)}_addParent(oe){const{_parentage:se}=this;this._parentage=Array.isArray(se)?(se.push(oe),se):se?[se,oe]:oe}_removeParent(oe){const{_parentage:se}=this;se===oe?this._parentage=null:Array.isArray(se)&&(0,de.P)(se,oe)}remove(oe){const{_finalizers:se}=this;se&&(0,de.P)(se,oe),oe instanceof he&&oe._removeParent(this)}}he.EMPTY=(()=>{const Te=new he;return Te.closed=!0,Te})();const ye=he.EMPTY;function Ce(Te){return Te instanceof he||Te&&"closed"in Te&&(0,g.m)(Te.remove)&&(0,g.m)(Te.add)&&(0,g.m)(Te.unsubscribe)}function Ie(Te){(0,g.m)(Te)?Te():Te.unsubscribe()}},2416:(It,Re,j)=>{j.d(Re,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(It,Re,j)=>{j.d(Re,{z:()=>he});var g=j(8189),m=j(3269),de=j(8996);function he(...ye){return function H(){return(0,g.J)(1)}()((0,de.D)(ye,(0,m.yG)(ye)))}},515:(It,Re,j)=>{j.d(Re,{E:()=>H});const H=new(j(9751).y)(he=>he.complete())},8996:(It,Re,j)=>{j.d(Re,{D:()=>Qe});var g=j(8421),H=j(5363),m=j(9468),ye=j(9751),Ie=j(2202),Te=j(576),oe=j(9672);function fe(je,ut){if(!je)throw new Error("Iterable cannot be null");return new ye.y(pe=>{(0,oe.f)(pe,ut,()=>{const Se=je[Symbol.asyncIterator]();(0,oe.f)(pe,ut,()=>{Se.next().then($e=>{$e.done?pe.complete():pe.next($e.value)})},0,!0)})})}var tt=j(3670),He=j(8239),nt=j(1144),Dt=j(6495),Le=j(2206),qe=j(4532),Ze=j(3260);function Qe(je,ut){return ut?function ke(je,ut){if(null!=je){if((0,tt.c)(je))return function de(je,ut){return(0,g.Xf)(je).pipe((0,m.R)(ut),(0,H.Q)(ut))}(je,ut);if((0,nt.z)(je))return function Ce(je,ut){return new ye.y(pe=>{let Se=0;return ut.schedule(function(){Se===je.length?pe.complete():(pe.next(je[Se++]),pe.closed||this.schedule())})})}(je,ut);if((0,He.t)(je))return function he(je,ut){return(0,g.Xf)(je).pipe((0,m.R)(ut),(0,H.Q)(ut))}(je,ut);if((0,Le.D)(je))return fe(je,ut);if((0,Dt.T)(je))return function se(je,ut){return new ye.y(pe=>{let Se;return(0,oe.f)(pe,ut,()=>{Se=je[Ie.h](),(0,oe.f)(pe,ut,()=>{let $e,pt;try{({value:$e,done:pt}=Se.next())}catch(ot){return void pe.error(ot)}pt?pe.complete():pe.next($e)},0,!0)}),()=>(0,Te.m)(Se?.return)&&Se.return()})}(je,ut);if((0,Ze.L)(je))return function et(je,ut){return fe((0,Ze.Q)(je),ut)}(je,ut)}throw(0,qe.z)(je)}(je,ut):(0,g.Xf)(je)}},8421:(It,Re,j)=>{j.d(Re,{Xf:()=>tt});var g=j(655),H=j(1144),m=j(8239),de=j(9751),he=j(3670),ye=j(2206),Ce=j(4532),Ie=j(6495),Te=j(3260),oe=j(576),se=j(7849),fe=j(8822);function tt(ke){if(ke instanceof de.y)return ke;if(null!=ke){if((0,he.c)(ke))return function He(ke){return new de.y(Qe=>{const je=ke[fe.L]();if((0,oe.m)(je.subscribe))return je.subscribe(Qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,H.z)(ke))return function nt(ke){return new de.y(Qe=>{for(let je=0;je<ke.length&&!Qe.closed;je++)Qe.next(ke[je]);Qe.complete()})}(ke);if((0,m.t)(ke))return function Dt(ke){return new de.y(Qe=>{ke.then(je=>{Qe.closed||(Qe.next(je),Qe.complete())},je=>Qe.error(je)).then(null,se.h)})}(ke);if((0,ye.D)(ke))return qe(ke);if((0,Ie.T)(ke))return function Le(ke){return new de.y(Qe=>{for(const je of ke)if(Qe.next(je),Qe.closed)return;Qe.complete()})}(ke);if((0,Te.L)(ke))return function Ze(ke){return qe((0,Te.Q)(ke))}(ke)}throw(0,Ce.z)(ke)}function qe(ke){return new de.y(Qe=>{(function et(ke,Qe){var je,ut,pe,Se;return(0,g.mG)(this,void 0,void 0,function*(){try{for(je=(0,g.KL)(ke);!(ut=yield je.next()).done;)if(Qe.next(ut.value),Qe.closed)return}catch($e){pe={error:$e}}finally{try{ut&&!ut.done&&(Se=je.return)&&(yield Se.call(je))}finally{if(pe)throw pe.error}}Qe.complete()})})(ke,Qe).catch(je=>Qe.error(je))})}},6451:(It,Re,j)=>{j.d(Re,{T:()=>ye});var g=j(8189),H=j(8421),m=j(515),de=j(3269),he=j(8996);function ye(...Ce){const Ie=(0,de.yG)(Ce),Te=(0,de._6)(Ce,1/0),oe=Ce;return oe.length?1===oe.length?(0,H.Xf)(oe[0]):(0,g.J)(Te)((0,he.D)(oe,Ie)):m.E}},9646:(It,Re,j)=>{j.d(Re,{of:()=>m});var g=j(3269),H=j(8996);function m(...de){const he=(0,g.yG)(de);return(0,H.D)(de,he)}},5403:(It,Re,j)=>{j.d(Re,{x:()=>H});var g=j(930);function H(de,he,ye,Ce,Ie){return new m(de,he,ye,Ce,Ie)}class m extends g.Lv{constructor(he,ye,Ce,Ie,Te,oe){super(he),this.onFinalize=Te,this.shouldUnsubscribe=oe,this._next=ye?function(se){try{ye(se)}catch(fe){he.error(fe)}}:super._next,this._error=Ie?function(se){try{Ie(se)}catch(fe){he.error(fe)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(se){he.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},6590:(It,Re,j)=>{j.d(Re,{d:()=>m});var g=j(4482),H=j(5403);function m(de){return(0,g.e)((he,ye)=>{let Ce=!1;he.subscribe((0,H.x)(ye,Ie=>{Ce=!0,ye.next(Ie)},()=>{Ce||ye.next(de),ye.complete()}))})}},9300:(It,Re,j)=>{j.d(Re,{h:()=>m});var g=j(4482),H=j(5403);function m(de,he){return(0,g.e)((ye,Ce)=>{let Ie=0;ye.subscribe((0,H.x)(Ce,Te=>de.call(he,Te,Ie++)&&Ce.next(Te)))})}},590:(It,Re,j)=>{j.d(Re,{P:()=>Ce});var g=j(6805),H=j(9300),m=j(5698),de=j(6590),he=j(8068),ye=j(4671);function Ce(Ie,Te){const oe=arguments.length>=2;return se=>se.pipe(Ie?(0,H.h)((fe,tt)=>Ie(fe,tt,se)):ye.y,(0,m.q)(1),oe?(0,de.d)(Te):(0,he.T)(()=>new g.K))}},4004:(It,Re,j)=>{j.d(Re,{U:()=>m});var g=j(4482),H=j(5403);function m(de,he){return(0,g.e)((ye,Ce)=>{let Ie=0;ye.subscribe((0,H.x)(Ce,Te=>{Ce.next(de.call(he,Te,Ie++))}))})}},8189:(It,Re,j)=>{j.d(Re,{J:()=>m});var g=j(5577),H=j(4671);function m(de=1/0){return(0,g.z)(H.y,de)}},5577:(It,Re,j)=>{j.d(Re,{z:()=>Ie});var g=j(4004),H=j(8421),m=j(4482),de=j(9672),he=j(5403),Ce=j(576);function Ie(Te,oe,se=1/0){return(0,Ce.m)(oe)?Ie((fe,tt)=>(0,g.U)((He,nt)=>oe(fe,He,tt,nt))((0,H.Xf)(Te(fe,tt))),se):("number"==typeof oe&&(se=oe),(0,m.e)((fe,tt)=>function ye(Te,oe,se,fe,tt,He,nt,Dt){const Le=[];let qe=0,Ze=0,et=!1;const ke=()=>{et&&!Le.length&&!qe&&oe.complete()},Qe=ut=>qe<fe?je(ut):Le.push(ut),je=ut=>{He&&oe.next(ut),qe++;let pe=!1;(0,H.Xf)(se(ut,Ze++)).subscribe((0,he.x)(oe,Se=>{tt?.(Se),He?Qe(Se):oe.next(Se)},()=>{pe=!0},void 0,()=>{if(pe)try{for(qe--;Le.length&&qe<fe;){const Se=Le.shift();nt?(0,de.f)(oe,nt,()=>je(Se)):je(Se)}ke()}catch(Se){oe.error(Se)}}))};return Te.subscribe((0,he.x)(oe,Qe,()=>{et=!0,ke()})),()=>{Dt?.()}}(fe,tt,Te,se)))}},5363:(It,Re,j)=>{j.d(Re,{Q:()=>de});var g=j(9672),H=j(4482),m=j(5403);function de(he,ye=0){return(0,H.e)((Ce,Ie)=>{Ce.subscribe((0,m.x)(Ie,Te=>(0,g.f)(Ie,he,()=>Ie.next(Te),ye),()=>(0,g.f)(Ie,he,()=>Ie.complete(),ye),Te=>(0,g.f)(Ie,he,()=>Ie.error(Te),ye)))})}},5026:(It,Re,j)=>{j.d(Re,{R:()=>de});var g=j(4482),H=j(5403);function m(he,ye,Ce,Ie,Te){return(oe,se)=>{let fe=Ce,tt=ye,He=0;oe.subscribe((0,H.x)(se,nt=>{const Dt=He++;tt=fe?he(tt,nt,Dt):(fe=!0,nt),Ie&&se.next(tt)},Te&&(()=>{fe&&se.next(tt),se.complete()})))}}function de(he,ye){return(0,g.e)(m(he,ye,arguments.length>=2,!0))}},3099:(It,Re,j)=>{j.d(Re,{B:()=>he});var g=j(8421),H=j(7579),m=j(930),de=j(4482);function he(Ce={}){const{connector:Ie=(()=>new H.x),resetOnError:Te=!0,resetOnComplete:oe=!0,resetOnRefCountZero:se=!0}=Ce;return fe=>{let tt,He,nt,Dt=0,Le=!1,qe=!1;const Ze=()=>{He?.unsubscribe(),He=void 0},et=()=>{Ze(),tt=nt=void 0,Le=qe=!1},ke=()=>{const Qe=tt;et(),Qe?.unsubscribe()};return(0,de.e)((Qe,je)=>{Dt++,!qe&&!Le&&Ze();const ut=nt=nt??Ie();je.add(()=>{Dt--,0===Dt&&!qe&&!Le&&(He=ye(ke,se))}),ut.subscribe(je),!tt&&Dt>0&&(tt=new m.Hp({next:pe=>ut.next(pe),error:pe=>{qe=!0,Ze(),He=ye(et,Te,pe),ut.error(pe)},complete:()=>{Le=!0,Ze(),He=ye(et,oe),ut.complete()}}),(0,g.Xf)(Qe).subscribe(tt))})(fe)}}function ye(Ce,Ie,...Te){if(!0===Ie)return void Ce();if(!1===Ie)return;const oe=new m.Hp({next:()=>{oe.unsubscribe(),Ce()}});return(0,g.Xf)(Ie(...Te)).subscribe(oe)}},8675:(It,Re,j)=>{j.d(Re,{O:()=>de});var g=j(7272),H=j(3269),m=j(4482);function de(...he){const ye=(0,H.yG)(he);return(0,m.e)((Ce,Ie)=>{(ye?(0,g.z)(he,Ce,ye):(0,g.z)(he,Ce)).subscribe(Ie)})}},9468:(It,Re,j)=>{j.d(Re,{R:()=>H});var g=j(4482);function H(m,de=0){return(0,g.e)((he,ye)=>{ye.add(m.schedule(()=>he.subscribe(ye),de))})}},3900:(It,Re,j)=>{j.d(Re,{w:()=>de});var g=j(8421),H=j(4482),m=j(5403);function de(he,ye){return(0,H.e)((Ce,Ie)=>{let Te=null,oe=0,se=!1;const fe=()=>se&&!Te&&Ie.complete();Ce.subscribe((0,m.x)(Ie,tt=>{Te?.unsubscribe();let He=0;const nt=oe++;(0,g.Xf)(he(tt,nt)).subscribe(Te=(0,m.x)(Ie,Dt=>Ie.next(ye?ye(tt,Dt,nt,He++):Dt),()=>{Te=null,fe()}))},()=>{se=!0,fe()}))})}},5698:(It,Re,j)=>{j.d(Re,{q:()=>de});var g=j(515),H=j(4482),m=j(5403);function de(he){return he<=0?()=>g.E:(0,H.e)((ye,Ce)=>{let Ie=0;ye.subscribe((0,m.x)(Ce,Te=>{++Ie<=he&&(Ce.next(Te),he<=Ie&&Ce.complete())}))})}},8505:(It,Re,j)=>{j.d(Re,{b:()=>he});var g=j(576),H=j(4482),m=j(5403),de=j(4671);function he(ye,Ce,Ie){const Te=(0,g.m)(ye)||Ce||Ie?{next:ye,error:Ce,complete:Ie}:ye;return Te?(0,H.e)((oe,se)=>{var fe;null===(fe=Te.subscribe)||void 0===fe||fe.call(Te);let tt=!0;oe.subscribe((0,m.x)(se,He=>{var nt;null===(nt=Te.next)||void 0===nt||nt.call(Te,He),se.next(He)},()=>{var He;tt=!1,null===(He=Te.complete)||void 0===He||He.call(Te),se.complete()},He=>{var nt;tt=!1,null===(nt=Te.error)||void 0===nt||nt.call(Te,He),se.error(He)},()=>{var He,nt;tt&&(null===(He=Te.unsubscribe)||void 0===He||He.call(Te)),null===(nt=Te.finalize)||void 0===nt||nt.call(Te)}))}):de.y}},8068:(It,Re,j)=>{j.d(Re,{T:()=>de});var g=j(6805),H=j(4482),m=j(5403);function de(ye=he){return(0,H.e)((Ce,Ie)=>{let Te=!1;Ce.subscribe((0,m.x)(Ie,oe=>{Te=!0,Ie.next(oe)},()=>Te?Ie.complete():Ie.error(ye())))})}function he(){return new g.K}},4408:(It,Re,j)=>{j.d(Re,{o:()=>he});var g=j(727);class H extends g.w0{constructor(Ce,Ie){super()}schedule(Ce,Ie=0){return this}}const m={setInterval(ye,Ce,...Ie){const{delegate:Te}=m;return Te?.setInterval?Te.setInterval(ye,Ce,...Ie):setInterval(ye,Ce,...Ie)},clearInterval(ye){const{delegate:Ce}=m;return(Ce?.clearInterval||clearInterval)(ye)},delegate:void 0};var de=j(8737);class he extends H{constructor(Ce,Ie){super(Ce,Ie),this.scheduler=Ce,this.work=Ie,this.pending=!1}schedule(Ce,Ie=0){var Te;if(this.closed)return this;this.state=Ce;const oe=this.id,se=this.scheduler;return null!=oe&&(this.id=this.recycleAsyncId(se,oe,Ie)),this.pending=!0,this.delay=Ie,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(se,this.id,Ie),this}requestAsyncId(Ce,Ie,Te=0){return m.setInterval(Ce.flush.bind(Ce,this),Te)}recycleAsyncId(Ce,Ie,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return Ie;null!=Ie&&m.clearInterval(Ie)}execute(Ce,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(Ce,Ie);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,Ie){let oe,Te=!1;try{this.work(Ce)}catch(se){Te=!0,oe=se||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),oe}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:Ie}=this,{actions:Te}=Ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(Te,this),null!=Ce&&(this.id=this.recycleAsyncId(Ie,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(It,Re,j)=>{j.d(Re,{v:()=>m});var g=j(6063);class H{constructor(he,ye=H.now){this.schedulerActionCtor=he,this.now=ye}schedule(he,ye=0,Ce){return new this.schedulerActionCtor(this,he).schedule(Ce,ye)}}H.now=g.l.now;class m extends H{constructor(he,ye=H.now){super(he,ye),this.actions=[],this._active=!1}flush(he){const{actions:ye}=this;if(this._active)return void ye.push(he);let Ce;this._active=!0;do{if(Ce=he.execute(he.state,he.delay))break}while(he=ye.shift());if(this._active=!1,Ce){for(;he=ye.shift();)he.unsubscribe();throw Ce}}}},4986:(It,Re,j)=>{j.d(Re,{P:()=>de,z:()=>m});var g=j(4408);const m=new(j(7565).v)(g.o),de=m},6063:(It,Re,j)=>{j.d(Re,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(It,Re,j)=>{j.d(Re,{z:()=>g});const g={setTimeout(H,m,...de){const{delegate:he}=g;return he?.setTimeout?he.setTimeout(H,m,...de):setTimeout(H,m,...de)},clearTimeout(H){const{delegate:m}=g;return(m?.clearTimeout||clearTimeout)(H)},delegate:void 0}},2202:(It,Re,j)=>{j.d(Re,{h:()=>H});const H=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(It,Re,j)=>{j.d(Re,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(It,Re,j)=>{j.d(Re,{K:()=>H});const H=(0,j(3888).d)(m=>function(){m(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(It,Re,j)=>{j.d(Re,{_6:()=>ye,jO:()=>de,yG:()=>he});var g=j(576),H=j(3532);function m(Ce){return Ce[Ce.length-1]}function de(Ce){return(0,g.m)(m(Ce))?Ce.pop():void 0}function he(Ce){return(0,H.K)(m(Ce))?Ce.pop():void 0}function ye(Ce,Ie){return"number"==typeof m(Ce)?Ce.pop():Ie}},4742:(It,Re,j)=>{j.d(Re,{D:()=>he});const{isArray:g}=Array,{getPrototypeOf:H,prototype:m,keys:de}=Object;function he(Ce){if(1===Ce.length){const Ie=Ce[0];if(g(Ie))return{args:Ie,keys:null};if(function ye(Ce){return Ce&&"object"==typeof Ce&&H(Ce)===m}(Ie)){const Te=de(Ie);return{args:Te.map(oe=>Ie[oe]),keys:Te}}}return{args:Ce,keys:null}}},8737:(It,Re,j)=>{function g(H,m){if(H){const de=H.indexOf(m);0<=de&&H.splice(de,1)}}j.d(Re,{P:()=>g})},3888:(It,Re,j)=>{function g(H){const de=H(he=>{Error.call(he),he.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}j.d(Re,{d:()=>g})},1810:(It,Re,j)=>{function g(H,m){return H.reduce((de,he,ye)=>(de[he]=m[ye],de),{})}j.d(Re,{n:()=>g})},2806:(It,Re,j)=>{j.d(Re,{O:()=>de,x:()=>m});var g=j(2416);let H=null;function m(he){if(g.v.useDeprecatedSynchronousErrorHandling){const ye=!H;if(ye&&(H={errorThrown:!1,error:null}),he(),ye){const{errorThrown:Ce,error:Ie}=H;if(H=null,Ce)throw Ie}}else he()}function de(he){g.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=he)}},9672:(It,Re,j)=>{function g(H,m,de,he=0,ye=!1){const Ce=m.schedule(function(){de(),ye?H.add(this.schedule(null,he)):this.unsubscribe()},he);if(H.add(Ce),!ye)return Ce}j.d(Re,{f:()=>g})},4671:(It,Re,j)=>{function g(H){return H}j.d(Re,{y:()=>g})},1144:(It,Re,j)=>{j.d(Re,{z:()=>g});const g=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(It,Re,j)=>{j.d(Re,{D:()=>H});var g=j(576);function H(m){return Symbol.asyncIterator&&(0,g.m)(m?.[Symbol.asyncIterator])}},576:(It,Re,j)=>{function g(H){return"function"==typeof H}j.d(Re,{m:()=>g})},3670:(It,Re,j)=>{j.d(Re,{c:()=>m});var g=j(8822),H=j(576);function m(de){return(0,H.m)(de[g.L])}},6495:(It,Re,j)=>{j.d(Re,{T:()=>m});var g=j(2202),H=j(576);function m(de){return(0,H.m)(de?.[g.h])}},8239:(It,Re,j)=>{j.d(Re,{t:()=>H});var g=j(576);function H(m){return(0,g.m)(m?.then)}},3260:(It,Re,j)=>{j.d(Re,{L:()=>de,Q:()=>m});var g=j(655),H=j(576);function m(he){return(0,g.FC)(this,arguments,function*(){const Ce=he.getReader();try{for(;;){const{value:Ie,done:Te}=yield(0,g.qq)(Ce.read());if(Te)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Ie)}}finally{Ce.releaseLock()}})}function de(he){return(0,H.m)(he?.getReader)}},3532:(It,Re,j)=>{j.d(Re,{K:()=>H});var g=j(576);function H(m){return m&&(0,g.m)(m.schedule)}},4482:(It,Re,j)=>{j.d(Re,{A:()=>H,e:()=>m});var g=j(576);function H(de){return(0,g.m)(de?.lift)}function m(de){return he=>{if(H(he))return he.lift(function(ye){try{return de(ye,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(It,Re,j)=>{j.d(Re,{Z:()=>de});var g=j(4004);const{isArray:H}=Array;function de(he){return(0,g.U)(ye=>function m(he,ye){return H(ye)?he(...ye):he(ye)}(he,ye))}},5032:(It,Re,j)=>{function g(){}j.d(Re,{Z:()=>g})},9635:(It,Re,j)=>{j.d(Re,{U:()=>m,z:()=>H});var g=j(4671);function H(...de){return m(de)}function m(de){return 0===de.length?g.y:1===de.length?de[0]:function(ye){return de.reduce((Ce,Ie)=>Ie(Ce),ye)}}},7849:(It,Re,j)=>{j.d(Re,{h:()=>m});var g=j(2416),H=j(3410);function m(de){H.z.setTimeout(()=>{const{onUnhandledError:he}=g.v;if(!he)throw de;he(de)})}},4532:(It,Re,j)=>{function g(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Re,{z:()=>g})},655:(It,Re,j)=>{function de(Ae,Pe){var Ve={};for(var We in Ae)Object.prototype.hasOwnProperty.call(Ae,We)&&Pe.indexOf(We)<0&&(Ve[We]=Ae[We]);if(null!=Ae&&"function"==typeof Object.getOwnPropertySymbols){var rt=0;for(We=Object.getOwnPropertySymbols(Ae);rt<We.length;rt++)Pe.indexOf(We[rt])<0&&Object.prototype.propertyIsEnumerable.call(Ae,We[rt])&&(Ve[We[rt]]=Ae[We[rt]])}return Ve}function fe(Ae,Pe,Ve,We){return new(Ve||(Ve=Promise))(function(it,ft){function yt(Mt){try{Ee(We.next(Mt))}catch(wt){ft(wt)}}function gn(Mt){try{Ee(We.throw(Mt))}catch(wt){ft(wt)}}function Ee(Mt){Mt.done?it(Mt.value):function rt(it){return it instanceof Ve?it:new Ve(function(ft){ft(it)})}(Mt.value).then(yt,gn)}Ee((We=We.apply(Ae,Pe||[])).next())})}function ke(Ae){return this instanceof ke?(this.v=Ae,this):new ke(Ae)}function Qe(Ae,Pe,Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt,We=Ve.apply(Ae,Pe||[]),it=[];return rt={},ft("next"),ft("throw"),ft("return"),rt[Symbol.asyncIterator]=function(){return this},rt;function ft(At){We[At]&&(rt[At]=function(Tn){return new Promise(function(vn,hn){it.push([At,Tn,vn,hn])>1||yt(At,Tn)})})}function yt(At,Tn){try{!function gn(At){At.value instanceof ke?Promise.resolve(At.value.v).then(Ee,Mt):wt(it[0][2],At)}(We[At](Tn))}catch(vn){wt(it[0][3],vn)}}function Ee(At){yt("next",At)}function Mt(At){yt("throw",At)}function wt(At,Tn){At(Tn),it.shift(),it.length&&yt(it[0][0],it[0][1])}}function ut(Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Pe=Ae[Symbol.asyncIterator];return Pe?Pe.call(Ae):(Ae=function Dt(Ae){var Pe="function"==typeof Symbol&&Symbol.iterator,Ve=Pe&&Ae[Pe],We=0;if(Ve)return Ve.call(Ae);if(Ae&&"number"==typeof Ae.length)return{next:function(){return Ae&&We>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[We++],done:!Ae}}};throw new TypeError(Pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ae),Ve={},We("next"),We("throw"),We("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve);function We(it){Ve[it]=Ae[it]&&function(ft){return new Promise(function(yt,gn){!function rt(it,ft,yt,gn){Promise.resolve(gn).then(function(Ee){it({value:Ee,done:yt})},ft)}(yt,gn,(ft=Ae[it](ft)).done,ft.value)})}}}j.d(Re,{FC:()=>Qe,KL:()=>ut,_T:()=>de,mG:()=>fe,qq:()=>ke})},6895:(It,Re,j)=>{j.d(Re,{Do:()=>Ze,ED:()=>tr,EM:()=>Ts,HT:()=>de,JF:()=>Rt,K0:()=>ye,Mx:()=>Kr,NF:()=>Cs,O5:()=>Fi,PM:()=>Go,RF:()=>bi,S$:()=>Dt,V_:()=>Te,Ye:()=>et,b0:()=>qe,bD:()=>si,ez:()=>ls,gd:()=>Yr,mk:()=>qt,n9:()=>Ir,q:()=>m,sg:()=>Di,w_:()=>he});var g=j(4650);let H=null;function m(){return H}function de(T){H||(H=T)}class he{}const ye=new g.OlP("DocumentToken");let Ce=(()=>{class T{historyGo(N){throw new Error("Not implemented")}}return T.\u0275fac=function(N){return new(N||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return function Ie(){return(0,g.LFG)(oe)}()},providedIn:"platform"}),T})();const Te=new g.OlP("Location Initialized");let oe=(()=>{class T extends Ce{constructor(N){super(),this._doc=N,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return m().getBaseHref(this._doc)}onPopState(N){const z=m().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",N,!1),()=>z.removeEventListener("popstate",N)}onHashChange(N){const z=m().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",N,!1),()=>z.removeEventListener("hashchange",N)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(N){this._location.pathname=N}pushState(N,z,ie){se()?this._history.pushState(N,z,ie):this._location.hash=ie}replaceState(N,z,ie){se()?this._history.replaceState(N,z,ie):this._location.hash=ie}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return T.\u0275fac=function(N){return new(N||T)(g.LFG(ye))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function fe(){return new oe((0,g.LFG)(ye))}()},providedIn:"platform"}),T})();function se(){return!!window.history.pushState}function tt(T,V){if(0==T.length)return V;if(0==V.length)return T;let N=0;return T.endsWith("/")&&N++,V.startsWith("/")&&N++,2==N?T+V.substring(1):1==N?T+V:T+"/"+V}function He(T){const V=T.match(/#|\?|$/),N=V&&V.index||T.length;return T.slice(0,N-("/"===T[N-1]?1:0))+T.slice(N)}function nt(T){return T&&"?"!==T[0]?"?"+T:T}let Dt=(()=>{class T{historyGo(N){throw new Error("Not implemented")}}return T.\u0275fac=function(N){return new(N||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return(0,g.f3M)(qe)},providedIn:"root"}),T})();const Le=new g.OlP("appBaseHref");let qe=(()=>{class T extends Dt{constructor(N,z){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=z??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return tt(this._baseHref,N)}path(N=!1){const z=this._platformLocation.pathname+nt(this._platformLocation.search),ie=this._platformLocation.hash;return ie&&N?`${z}${ie}`:z}pushState(N,z,ie,Ne){const Ue=this.prepareExternalUrl(ie+nt(Ne));this._platformLocation.pushState(N,z,Ue)}replaceState(N,z,ie,Ne){const Ue=this.prepareExternalUrl(ie+nt(Ne));this._platformLocation.replaceState(N,z,Ue)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return T.\u0275fac=function(N){return new(N||T)(g.LFG(Ce),g.LFG(Le,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Ze=(()=>{class T extends Dt{constructor(N,z){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let z=this._platformLocation.hash;return null==z&&(z="#"),z.length>0?z.substring(1):z}prepareExternalUrl(N){const z=tt(this._baseHref,N);return z.length>0?"#"+z:z}pushState(N,z,ie,Ne){let Ue=this.prepareExternalUrl(ie+nt(Ne));0==Ue.length&&(Ue=this._platformLocation.pathname),this._platformLocation.pushState(N,z,Ue)}replaceState(N,z,ie,Ne){let Ue=this.prepareExternalUrl(ie+nt(Ne));0==Ue.length&&(Ue=this._platformLocation.pathname),this._platformLocation.replaceState(N,z,Ue)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return T.\u0275fac=function(N){return new(N||T)(g.LFG(Ce),g.LFG(Le,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})(),et=(()=>{class T{constructor(N){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const z=this._locationStrategy.getBaseHref();this._basePath=function ut(T){if(new RegExp("^(https?:)?//").test(T)){const[,N]=T.split(/\/\/[^\/]+/);return N}return T}(He(je(z))),this._locationStrategy.onPopState(ie=>{this._subject.emit({url:this.path(!0),pop:!0,state:ie.state,type:ie.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,z=""){return this.path()==this.normalize(N+nt(z))}normalize(N){return T.stripTrailingSlash(function Qe(T,V){return T&&new RegExp(`^${T}([/;?#]|$)`).test(V)?V.substring(T.length):V}(this._basePath,je(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,z="",ie=null){this._locationStrategy.pushState(ie,"",N,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+nt(z)),ie)}replaceState(N,z="",ie=null){this._locationStrategy.replaceState(ie,"",N,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+nt(z)),ie)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)})),()=>{const z=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",z){this._urlChangeListeners.forEach(ie=>ie(N,z))}subscribe(N,z,ie){return this._subject.subscribe({next:N,error:z,complete:ie})}}return T.normalizeQueryParams=nt,T.joinWithSlash=tt,T.stripTrailingSlash=He,T.\u0275fac=function(N){return new(N||T)(g.LFG(Dt))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function ke(){return new et((0,g.LFG)(Dt))}()},providedIn:"root"}),T})();function je(T){return T.replace(/\/index.html$/,"")}function Kr(T,V){V=encodeURIComponent(V);for(const N of T.split(";")){const z=N.indexOf("="),[ie,Ne]=-1==z?[N,""]:[N.slice(0,z),N.slice(z+1)];if(ie.trim()===V)return decodeURIComponent(Ne)}return null}const mi=/\s+/,Tt=[];let qt=(()=>{class T{constructor(N,z,ie,Ne){this._iterableDiffers=N,this._keyValueDiffers=z,this._ngEl=ie,this._renderer=Ne,this.initialClasses=Tt,this.stateMap=new Map}set klass(N){this.initialClasses=null!=N?N.trim().split(mi):Tt}set ngClass(N){this.rawClass="string"==typeof N?N.trim().split(mi):N}ngDoCheck(){for(const z of this.initialClasses)this._updateState(z,!0);const N=this.rawClass;if(Array.isArray(N)||N instanceof Set)for(const z of N)this._updateState(z,!0);else if(null!=N)for(const z of Object.keys(N))this._updateState(z,Boolean(N[z]));this._applyStateDiff()}_updateState(N,z){const ie=this.stateMap.get(N);void 0!==ie?(ie.enabled!==z&&(ie.changed=!0,ie.enabled=z),ie.touched=!0):this.stateMap.set(N,{enabled:z,changed:!0,touched:!0})}_applyStateDiff(){for(const N of this.stateMap){const z=N[0],ie=N[1];ie.changed?(this._toggleClass(z,ie.enabled),ie.changed=!1):ie.touched||(ie.enabled&&this._toggleClass(z,!1),this.stateMap.delete(z)),ie.touched=!1}}_toggleClass(N,z){(N=N.trim()).length>0&&N.split(mi).forEach(ie=>{z?this._renderer.addClass(this._ngEl.nativeElement,ie):this._renderer.removeClass(this._ngEl.nativeElement,ie)})}}return T.\u0275fac=function(N){return new(N||T)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),T})();class Er{constructor(V,N,z,ie){this.$implicit=V,this.ngForOf=N,this.index=z,this.count=ie}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Di=(()=>{class T{set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}constructor(N,z,ie){this._viewContainer=N,this._template=z,this._differs=ie,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const z=this._viewContainer;N.forEachOperation((ie,Ne,Ue)=>{if(null==ie.previousIndex)z.createEmbeddedView(this._template,new Er(ie.item,this._ngForOf,-1,-1),null===Ue?void 0:Ue);else if(null==Ue)z.remove(null===Ne?void 0:Ne);else if(null!==Ne){const Ft=z.get(Ne);z.move(Ft,Ue),On(Ft,ie)}});for(let ie=0,Ne=z.length;ie<Ne;ie++){const Ft=z.get(ie).context;Ft.index=ie,Ft.count=Ne,Ft.ngForOf=this._ngForOf}N.forEachIdentityChange(ie=>{On(z.get(ie.currentIndex),ie)})}static ngTemplateContextGuard(N,z){return!0}}return T.\u0275fac=function(N){return new(N||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function On(T,V){T.context.$implicit=V.item}let Fi=(()=>{class T{constructor(N,z){this._viewContainer=N,this._context=new cn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Li("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Li("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,z){return!0}}return T.\u0275fac=function(N){return new(N||T)(g.Y36(g.s_b),g.Y36(g.Rgc))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class cn{constructor(){this.$implicit=null,this.ngIf=null}}function Li(T,V){if(V&&!V.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,g.AaK)(V)}'.`)}class Vi{constructor(V,N){this._viewContainerRef=V,this._templateRef=N,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(V){V&&!this._created?this.create():!V&&this._created&&this.destroy()}}let bi=(()=>{class T{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(N){this._ngSwitch=N,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(N){this._defaultViews.push(N)}_matchCase(N){const z=N==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||z,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),z}_updateDefaultCases(N){if(this._defaultViews.length>0&&N!==this._defaultUsed){this._defaultUsed=N;for(const z of this._defaultViews)z.enforceState(N)}}}return T.\u0275fac=function(N){return new(N||T)},T.\u0275dir=g.lG2({type:T,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),T})(),Ir=(()=>{class T{constructor(N,z,ie){this.ngSwitch=ie,ie._addCase(),this._view=new Vi(N,z)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return T.\u0275fac=function(N){return new(N||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(bi,9))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),T})(),tr=(()=>{class T{constructor(N,z,ie){ie._addDefault(new Vi(N,z))}}return T.\u0275fac=function(N){return new(N||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(bi,9))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngSwitchDefault",""]],standalone:!0}),T})();let Yr=(()=>{class T{transform(N){if(null==N)return null;if("string"!=typeof N)throw function Sr(T,V){return new g.vHH(2100,!1)}();return N.toUpperCase()}}return T.\u0275fac=function(N){return new(N||T)},T.\u0275pipe=g.Yjl({name:"uppercase",type:T,pure:!0,standalone:!0}),T})(),ls=(()=>{class T{}return T.\u0275fac=function(N){return new(N||T)},T.\u0275mod=g.oAB({type:T}),T.\u0275inj=g.cJS({}),T})();const si="browser";function Cs(T){return T===si}function Go(T){return"server"===T}let Ts=(()=>{class T{}return T.\u0275prov=(0,g.Yz7)({token:T,providedIn:"root",factory:()=>new bo((0,g.LFG)(ye),window)}),T})();class bo{constructor(V,N){this.document=V,this.window=N,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const N=function Ai(T,V){const N=T.getElementById(V)||T.getElementsByName(V)[0];if(N)return N;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const z=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let ie=z.currentNode;for(;ie;){const Ne=ie.shadowRoot;if(Ne){const Ue=Ne.getElementById(V)||Ne.querySelector(`[name="${V}"]`);if(Ue)return Ue}ie=z.nextNode()}}return null}(this.document,V);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=V)}}scrollToElement(V){const N=V.getBoundingClientRect(),z=N.left+this.window.pageXOffset,ie=N.top+this.window.pageYOffset,Ne=this.offset();this.window.scrollTo(z-Ne[0],ie-Ne[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=ps(this.window.history)||ps(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ps(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class Rt{}},4650:(It,Re,j)=>{j.d(Re,{$8M:()=>Yo,$WT:()=>Zn,$Z:()=>xv,AFp:()=>kd,ALo:()=>yy,AaK:()=>Ie,AsE:()=>xm,CHM:()=>A,CRH:()=>m0,CZH:()=>ug,CqO:()=>cp,D6c:()=>rD,DdM:()=>pw,EJc:()=>Fw,EpF:()=>Ph,F$t:()=>c_,F4k:()=>up,FYo:()=>Wl,FiY:()=>li,Gf:()=>p0,GfV:()=>gh,Gpc:()=>se,Gre:()=>S_,Hsn:()=>ym,JOm:()=>hi,Jf7:()=>Fg,KtG:()=>Z,LFG:()=>lt,LSH:()=>xg,Lbi:()=>sf,Lck:()=>hw,MGl:()=>xc,MMx:()=>ic,NdJ:()=>lp,O4$:()=>la,OlP:()=>zn,Oqu:()=>$h,P3R:()=>Cr,PXZ:()=>Qn,Q6J:()=>sp,QGY:()=>kh,Qsj:()=>eE,R0b:()=>Eo,RDi:()=>H0,Rgc:()=>nf,SBq:()=>zl,Sil:()=>af,Suo:()=>g0,TTD:()=>fs,TgZ:()=>op,Udp:()=>Cm,VKq:()=>zp,WLB:()=>r0,X6Q:()=>UI,XFs:()=>ct,Xpm:()=>Xn,Xts:()=>os,Y36:()=>nd,YKP:()=>Q_,YNc:()=>Nh,Yjl:()=>eo,Yz7:()=>wt,Z0I:()=>hn,ZZ4:()=>Ww,_Bn:()=>ly,_UZ:()=>ap,_Vd:()=>tu,_c5:()=>tD,_uU:()=>b_,aQg:()=>qw,c2e:()=>Pw,cJS:()=>Tn,cQ8:()=>hp,cg1:()=>Hh,dDg:()=>p,dqk:()=>Vt,eFA:()=>Mn,ekj:()=>jh,eoX:()=>I,f3M:()=>bt,g9A:()=>Ld,h0i:()=>Pc,hGG:()=>nD,hYB:()=>Vh,hij:()=>Ed,iGM:()=>f0,ifc:()=>Fe,ip1:()=>Pd,jDz:()=>dy,kL8:()=>Ap,kcU:()=>An,lG2:()=>Is,lcZ:()=>ef,lnq:()=>wp,lqb:()=>eu,lri:()=>a,n5z:()=>uc,oAB:()=>Zr,oJD:()=>Ag,oxw:()=>u_,q4F:()=>mh,qLn:()=>ql,qOj:()=>Eu,qZA:()=>dd,rWj:()=>l,sBO:()=>BI,s_b:()=>Qp,soG:()=>cg,tb:()=>Vd,tp0:()=>P,uIk:()=>cm,vHH:()=>Le,vpe:()=>Ls,wAp:()=>an,xp6:()=>Ug,z2F:()=>L0,zSh:()=>dh,zs3:()=>go});var g=j(7579),H=j(727),m=j(9751),de=j(6451),he=j(3099);function ye(r){for(let i in r)if(r[i]===ye)return i;throw Error("Could not find renamed property on target object.")}function Ce(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function Ie(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Ie).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Te(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const oe=ye({__forward_ref__:ye});function se(r){return r.__forward_ref__=se,r.toString=function(){return Ie(this())},r}function fe(r){return tt(r)?r():r}function tt(r){return"function"==typeof r&&r.hasOwnProperty(oe)&&r.__forward_ref__===se}function He(r){return r&&!!r.\u0275providers}const Dt="https://g.co/ng/security#xss";class Le extends Error{constructor(i,o){super(function qe(r,i){return`NG0${Math.abs(r)}${i?": "+i.trim():""}`}(i,o)),this.code=i}}function Ze(r){return"string"==typeof r?r:null==r?"":String(r)}function ut(r,i){throw new Le(-201,!1)}function ft(r,i){null==r&&function yt(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function wt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Tn(r){return{providers:r.providers||[],imports:r.imports||[]}}function vn(r){return Jn(r,yr)||Jn(r,Ln)}function hn(r){return null!==vn(r)}function Jn(r,i){return r.hasOwnProperty(i)?r[i]:null}function Rn(r){return r&&(r.hasOwnProperty(cr)||r.hasOwnProperty(vr))?r[cr]:null}const yr=ye({\u0275prov:ye}),cr=ye({\u0275inj:ye}),Ln=ye({ngInjectableDef:ye}),vr=ye({ngInjectorDef:ye});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let Wn;function lr(r){const i=Wn;return Wn=r,i}function dr(r,i,o){const u=vn(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&ct.Optional?null:void 0!==i?i:void ut(Ie(r))}const Vt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fn={},ar="__NG_DI_FLAG__",Tr="ngTempTokenPath",ni=/\n/gm,ri="__source";let Xt;function Gt(r){const i=Xt;return Xt=r,i}function jn(r,i=ct.Default){if(void 0===Xt)throw new Le(-203,!1);return null===Xt?dr(r,void 0,i):Xt.get(r,i&ct.Optional?null:void 0,i)}function lt(r,i=ct.Default){return(function wr(){return Wn}()||jn)(fe(r),i)}function bt(r,i=ct.Default){return lt(r,Ut(i))}function Ut(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function $t(r){const i=[];for(let o=0;o<r.length;o++){const u=fe(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Le(900,!1);let c,h=ct.Default;for(let v=0;v<u.length;v++){const D=u[v],x=Vn(D);"number"==typeof x?-1===x?c=D.token:h|=x:c=D}i.push(lt(c,h))}else i.push(lt(u))}return i}function sn(r,i){return r[ar]=i,r.prototype[ar]=i,r}function Vn(r){return r[ar]}function Q(r){return{toString:r}.toString()}var J=(()=>((J=J||{})[J.OnPush=0]="OnPush",J[J.Default=1]="Default",J))(),Fe=(()=>{return(r=Fe||(Fe={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Fe;var r})();const _t={},le=[],ae=ye({\u0275cmp:ye}),X=ye({\u0275dir:ye}),me=ye({\u0275pipe:ye}),Ke=ye({\u0275mod:ye}),at=ye({\u0275fac:ye}),Qt=ye({__NG_ELEMENT_ID__:ye});let qn=0;function Xn(r){return Q(()=>{const o=!0===r.standalone,u={},c={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===J.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||le,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Fe.Emulated,id:"c"+qn++,styles:r.styles||le,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=r.dependencies,v=r.features;return c.inputs=us(r.inputs,u),c.outputs=us(r.outputs),v&&v.forEach(D=>D(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(qr).filter(fr):null,c.pipeDefs=h?()=>("function"==typeof h?h():h).map(_r).filter(fr):null,c})}function qr(r){return Sn(r)||$n(r)}function fr(r){return null!==r}function Zr(r){return Q(()=>({type:r.type,bootstrap:r.bootstrap||le,declarations:r.declarations||le,imports:r.imports||le,exports:r.exports||le,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function us(r,i){if(null==r)return _t;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=u,i&&(i[c]=h)}return o}const Is=Xn;function eo(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Sn(r){return r[ae]||null}function $n(r){return r[X]||null}function _r(r){return r[me]||null}function Zn(r){const i=Sn(r)||$n(r)||_r(r);return null!==i&&i.standalone}function Kr(r,i){const o=r[Ke]||null;if(!o&&!0===i)throw new Error(`Type ${Ie(r)} does not have '\u0275mod' property.`);return o}function yi(r){return Array.isArray(r)&&"object"==typeof r[1]}function Yr(r){return Array.isArray(r)&&!0===r[1]}function bs(r){return 0!=(4&r.flags)}function $o(r){return r.componentOffset>-1}function Ia(r){return 1==(1&r.flags)}function Nr(r){return null!==r.template}function Au(r){return 0!=(256&r[2])}function hs(r,i){return r.hasOwnProperty(at)?r[at]:null}class js{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function fs(){return Ts}function Ts(r){return r.type.prototype.ngOnChanges&&(r.setInput=ps),bo}function bo(){const r=Br(this),i=r?.current;if(i){const o=r.previous;if(o===_t)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function ps(r,i,o,u){const c=this.declaredInputs[o],h=Br(r)||function Rt(r,i){return r[Ai]=i}(r,{previous:_t,current:null}),v=h.current||(h.current={}),D=h.previous,x=D[c];v[c]=new js(x&&x.currentValue,i,D===_t),r[u]=i}fs.ngInherit=!0;const Ai="__ngSimpleChanges__";function Br(r){return r[Ai]||null}function pr(r){for(;Array.isArray(r);)r=r[0];return r}function Ss(r,i){return pr(i[r])}function jr(r,i){return pr(i[r.index])}function Dr(r,i){return r.data[i]}function mn(r,i){const o=i[r];return yi(o)?o:o[0]}function Pr(r){return 64==(64&r[2])}function $r(r,i){return null==i?null:r[i]}function To(r){r[18]=0}function ur(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const tn={lFrame:xu(null),bindingsEnabled:!0};function ua(){return tn.bindingsEnabled}function S(){return tn.lFrame.lView}function R(){return tn.lFrame.tView}function A(r){return tn.lFrame.contextLView=r,r[8]}function Z(r){return tn.lFrame.contextLView=null,r}function be(){let r=Ct();for(;null!==r&&64===r.type;)r=r.parent;return r}function Ct(){return tn.lFrame.currentTNode}function rr(r,i){const o=tn.lFrame;o.currentTNode=r,o.isParent=i}function ai(){return tn.lFrame.isParent}function Hi(){tn.lFrame.isParent=!1}function Qr(){const r=tn.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function Ei(){return tn.lFrame.bindingIndex}function Hs(){return tn.lFrame.bindingIndex++}function es(r){const i=tn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}function Wo(r,i){const o=tn.lFrame;o.bindingIndex=o.bindingRootIndex=r,Gs(i)}function Gs(r){tn.lFrame.currentDirectiveIndex=r}function Ua(){return tn.lFrame.currentQueryIndex}function ao(r){tn.lFrame.currentQueryIndex=r}function Ao(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Ba(r,i,o){if(o&ct.SkipSelf){let c=i,h=r;for(;!(c=c.parent,null!==c||o&ct.Host||(c=Ao(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;i=c,r=h}const u=tn.lFrame=uu();return u.currentTNode=i,u.lView=r,!0}function qo(r){const i=uu(),o=r[1];tn.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function uu(){const r=tn.lFrame,i=null===r?null:r.child;return null===i?xu(r):i}function xu(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Ta(){const r=tn.lFrame;return tn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const ja=Ta;function cu(){const r=Ta();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function ui(){return tn.lFrame.selectedIndex}function Gi(r){tn.lFrame.selectedIndex=r}function Un(){const r=tn.lFrame;return Dr(r.tView,r.selectedIndex)}function la(){tn.lFrame.currentNamespace="svg"}function An(){!function Jr(){tn.lFrame.currentNamespace=null}()}function ha(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:D,ngAfterViewInit:x,ngAfterViewChecked:F,ngOnDestroy:W}=h;v&&(r.contentHooks||(r.contentHooks=[])).push(-o,v),D&&((r.contentHooks||(r.contentHooks=[])).push(o,D),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,D)),x&&(r.viewHooks||(r.viewHooks=[])).push(-o,x),F&&((r.viewHooks||(r.viewHooks=[])).push(o,F),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,F)),null!=W&&(r.destroyHooks||(r.destroyHooks=[])).push(o,W)}}function fa(r,i,o){N(r,i,3,o)}function T(r,i,o,u){(3&r[2])===o&&N(r,i,o,u)}function V(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function N(r,i,o,u){const h=u??-1,v=i.length-1;let D=0;for(let x=void 0!==u?65535&r[18]:0;x<v;x++)if("number"==typeof i[x+1]){if(D=i[x],null!=u&&D>=u)break}else i[x]<0&&(r[18]+=65536),(D<h||-1==h)&&(z(r,o,i,x),r[18]=(4294901760&r[18])+x+2),x++}function z(r,i,o,u){const c=o[u]<0,h=o[u+1],D=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{h.call(D)}finally{}}}else try{h.call(D)}finally{}}class Ne{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function gr(r,i,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const h=o[u++],v=o[u++],D=o[u++];r.setAttribute(i,v,D,h)}else{const h=c,v=o[++u];Wi(h)?r.setProperty(i,h,v):r.setAttribute(i,h,v),u++}}return u}function zi(r){return 3===r||4===r||6===r}function Wi(r){return 64===r.charCodeAt(0)}function ci(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||qi(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function qi(r,i,o,u,c){let h=0,v=r.length;if(-1===i)v=-1;else for(;h<r.length;){const D=r[h++];if("number"==typeof D){if(D===i){v=-1;break}if(D>i){v=h-1;break}}}for(;h<r.length;){const D=r[h];if("number"==typeof D)break;if(D===o){if(null===u)return void(null!==c&&(r[h+1]=c));if(u===r[h+1])return void(r[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==v&&(r.splice(v,0,i),h=v+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==c&&r.splice(h++,0,c)}function Mo(r){return-1!==r}function Ro(r){return 32767&r}function Ps(r,i){let o=function Os(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let Zo=!0;function ts(r){const i=Zo;return Zo=r,i}let ga=0;const xi={};function No(r,i){const o=Sa(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,co(u.data,r),co(i,null),co(u.blueprint,null));const c=za(r,i),h=r.injectorIndex;if(Mo(c)){const v=Ro(c),D=Ps(c,i),x=D[1].data;for(let F=0;F<8;F++)i[h+F]=D[v+F]|x[v+F]}return i[h+8]=c,h}function co(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Sa(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function za(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){if(u=hu(c),null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function ma(r,i,o){!function Zi(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Qt)&&(u=o[Qt]),null==u&&(u=o[Qt]=ga++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function Mu(r,i,o){if(o&ct.Optional||void 0!==r)return r;ut()}function Oo(r,i,o,u){if(o&ct.Optional&&void 0===u&&(u=null),!(o&(ct.Self|ct.Host))){const c=r[9],h=lr(void 0);try{return c?c.get(i,u,o&ct.Optional):dr(i,u,o&ct.Optional)}finally{lr(h)}}return Mu(u,0,o)}function lu(r,i,o,u=ct.Default,c){if(null!==r){if(1024&i[2]){const v=function $c(r,i,o,u,c){let h=r,v=i;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const D=ns(h,v,o,u|ct.Self,xi);if(D!==xi)return D;let x=h.parent;if(!x){const F=v[21];if(F){const W=F.get(o,xi,u);if(W!==xi)return W}x=hu(v),v=v[15]}h=x}return c}(r,i,o,u,xi);if(v!==xi)return v}const h=ns(r,i,o,u,xi);if(h!==xi)return h}return Oo(i,o,u,c)}function ns(r,i,o,u,c){const h=function Ru(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Qt)?r[Qt]:void 0;return"number"==typeof i?i>=0?255&i:Nu:i}(o);if("function"==typeof h){if(!Ba(i,r,u))return u&ct.Host?Mu(c,0,u):Oo(i,o,u,c);try{const v=h(u);if(null!=v||u&ct.Optional)return v;ut()}finally{ja()}}else if("number"==typeof h){let v=null,D=Sa(r,i),x=-1,F=u&ct.Host?i[16][6]:null;for((-1===D||u&ct.SkipSelf)&&(x=-1===D?za(r,i):i[D+8],-1!==x&&Mi(u,!1)?(v=i[1],D=Ro(x),i=Ps(x,i)):D=-1);-1!==D;){const W=i[1];if(Aa(h,D,W.data)){const ee=du(D,i,o,v,u,F);if(ee!==xi)return ee}x=i[D+8],-1!==x&&Mi(u,i[1].data[D+8]===F)&&Aa(h,D,i)?(v=W,D=Ro(x),i=Ps(x,i)):D=-1}}return c}function du(r,i,o,u,c,h){const v=i[1],D=v.data[r+8],W=Po(D,v,o,null==u?$o(D)&&Zo:u!=v&&0!=(3&D.type),c&ct.Host&&h===D);return null!==W?ir(i,v,W,D):xi}function Po(r,i,o,u,c){const h=r.providerIndexes,v=i.data,D=1048575&h,x=r.directiveStart,W=h>>20,ge=c?D+W:r.directiveEnd;for(let xe=u?D:D+W;xe<ge;xe++){const Xe=v[xe];if(xe<x&&o===Xe||xe>=x&&Xe.type===o)return xe}if(c){const xe=v[x];if(xe&&Nr(xe)&&xe.type===o)return x}return null}function ir(r,i,o,u){let c=r[o];const h=i.data;if(function Ue(r){return r instanceof Ne}(c)){const v=c;v.resolving&&function ke(r,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new Le(-200,`Circular dependency in DI detected for ${r}${o}`)}(function et(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Ze(r)}(h[o]));const D=ts(v.canSeeViewProviders);v.resolving=!0;const x=v.injectImpl?lr(v.injectImpl):null;Ba(r,u,ct.Default);try{c=r[o]=v.factory(void 0,h,r,u),i.firstCreatePass&&o>=u.directiveStart&&function da(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=i.type.prototype;if(u){const v=Ts(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,v)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],i)}finally{null!==x&&lr(x),ts(D),v.resolving=!1,ja()}}return c}function Aa(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function Mi(r,i){return!(r&ct.Self||r&ct.Host&&i)}class zs{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return lu(this._tNode,this._lView,i,Ut(u),o)}}function Nu(){return new zs(be(),S())}function uc(r){return Q(()=>{const i=r.prototype.constructor,o=i[at]||qa(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const h=c[at]||qa(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function qa(r){return tt(r)?()=>{const i=qa(fe(r));return i&&i()}:hs(r)}function hu(r){const i=r[1],o=i.type;return 2===o?i.declTNode:1===o?r[6]:null}function Yo(r){return function Wa(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const h=o[c];if(zi(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(h===i)return o[c+1];c+=2}}}return null}(be(),r)}const ya="__parameters__";function Za(r,i,o){return Q(()=>{const u=function xa(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...h){if(this instanceof c)return u.apply(this,h),this;const v=new c(...h);return D.annotation=v,D;function D(x,F,W){const ee=x.hasOwnProperty(ya)?x[ya]:Object.defineProperty(x,ya,{value:[]})[ya];for(;ee.length<=W;)ee.push(null);return(ee[W]=ee[W]||[]).push(v),x}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class zn{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=wt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ho(r,i){r.forEach(o=>Array.isArray(o)?ho(o,i):i(o))}function Xo(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function ys(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function fo(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}function _(r,i,o){let u=y(r,i);return u>=0?r[1|u]=o:(u=~u,function Ja(r,i,o,u){let c=r.length;if(c==i)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>i;)r[c]=r[c-2],c--;r[i]=o,r[i+1]=u}}(r,u,i,o)),u}function E(r,i){const o=y(r,i);if(o>=0)return r[1|o]}function y(r,i){return function k(r,i,o){let u=0,c=r.length>>o;for(;c!==u;){const h=u+(c-u>>1),v=r[h<<o];if(i===v)return h<<o;v>i?c=h:u=h+1}return~(c<<o)}(r,i,1)}const li=sn(Za("Optional"),8),P=sn(Za("SkipSelf"),4);var hi=(()=>((hi=hi||{})[hi.Important=1]="Important",hi[hi.DashCase=2]="DashCase",hi))();const Kd=new Map;let Wc=0;const gu="__ngContext__";function Xr(r,i){yi(i)?(r[gu]=i[20],function ff(r){Kd.set(r[20],r)}(i)):r[gu]=i}function Ye(r,i){return undefined(r,i)}function Yt(r){const i=r[3];return Yr(i)?i[3]:i}function ea(r){return gc(r[13])}function Na(r){return gc(r[4])}function gc(r){for(;null!==r&&!Yr(r);)r=r[4];return r}function Bu(r,i,o,u,c){if(null!=u){let h,v=!1;Yr(u)?h=u:yi(u)&&(v=!0,u=u[0]);const D=pr(u);0===r&&null!==o?null==c?Pl(i,o,D):Yc(i,o,D,c||null,!0):1===r&&null!==o?Yc(i,o,D,c||null,!0):2===r?function Eg(r,i,o){const u=kl(r,i);u&&function Fy(r,i,o,u){r.removeChild(i,o,u)}(r,u,i,o)}(i,D,v):3===r&&i.destroyNode(D),null!=h&&function j0(r,i,o,u,c){const h=o[7];h!==pr(o)&&Bu(i,r,u,h,c);for(let D=10;D<o.length;D++){const x=o[D];Ll(x[1],x,r,i,u,h)}}(i,r,h,o,c)}}function un(r,i,o){return r.createElement(i,o)}function gf(r,i){const o=r[9],u=o.indexOf(i),c=i[3];512&i[2]&&(i[2]&=-513,ur(c,-1)),o.splice(u,1)}function fi(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&gf(c,u),i>0&&(r[o-1][4]=u[4]);const h=ys(r,10+i);!function ju(r,i){Ll(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const v=h[19];null!==v&&v.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function St(r,i){if(!(128&i[2])){const o=i[11];o.destroyNode&&Ll(r,i,o,3,null,null),function Jt(r){let i=r[13];if(!i)return Ol(r[1],r);for(;i;){let o=null;if(yi(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)yi(i)&&Ol(i[1],i),i=i[3];null===i&&(i=r),yi(i)&&Ol(i[1],i),o=i&&i[4]}i=o}}(i)}}function Ol(r,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function Kc(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Ne)){const h=o[u+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const D=c[h[v]],x=h[v+1];try{x.call(D)}finally{}}else try{h.call(c)}finally{}}}}(r,i),function yg(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const v=o[h+3];v>=0?u[c=v]():u[c=-v].unsubscribe(),h+=2}else{const v=u[c=o[h+1]];o[h].call(v)}if(null!==u){for(let h=c+1;h<u.length;h++)(0,u[h])();i[7]=null}}(r,i),1===i[1].type&&i[11].destroy();const o=i[17];if(null!==o&&Yr(i[3])){o!==i[3]&&gf(o,i);const u=i[19];null!==u&&u.detachView(r)}!function Qd(r){Kd.delete(r[20])}(i)}}function ky(r,i,o){return function th(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];{const{componentOffset:c}=u;if(c>-1){const{encapsulation:h}=r.data[u.directiveStart+c];if(h===Fe.None||h===Fe.Emulated)return null}return jr(u,o)}}(r,i.parent,o)}function Yc(r,i,o,u,c){r.insertBefore(i,o,u,c)}function Pl(r,i,o){r.appendChild(i,o)}function vg(r,i,o,u,c){null!==u?Yc(r,i,o,u,c):Pl(r,i,o)}function kl(r,i){return r.parentNode(i)}function _g(r,i,o){return mf(r,i,o)}let _f,wf,Ni,mf=function $u(r,i,o){return 40&r.type?jr(r,o):null};function ta(r,i,o,u){const c=ky(r,u,i),h=i[11],D=_g(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let x=0;x<o.length;x++)vg(h,c,o[x],D,!1);else vg(h,c,o,D,!1)}function yf(r,i){if(null!==i){const o=i.type;if(3&o)return jr(i,r);if(4&o)return mu(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return yf(r,u);{const c=r[i.index];return Yr(c)?mu(-1,c):pr(c)}}if(32&o)return Ye(i,r)()||pr(r[i.index]);{const u=Fl(r,i);return null!==u?Array.isArray(u)?u[0]:yf(Yt(r[16]),u):yf(r,i.next)}}return null}function Fl(r,i){return null!==i?r[16][6].projection[i.projection]:null}function mu(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return yf(u,c)}return i[7]}function Hu(r,i,o,u,c,h,v){for(;null!=o;){const D=u[o.index],x=o.type;if(v&&0===i&&(D&&Xr(pr(D),u),o.flags|=2),32!=(32&o.flags))if(8&x)Hu(r,i,o.child,u,c,h,!1),Bu(i,r,c,D,h);else if(32&x){const F=Ye(o,u);let W;for(;W=F();)Bu(i,r,c,W,h);Bu(i,r,c,D,h)}else 16&x?Vy(r,i,u,o,c,h):Bu(i,r,c,D,h);o=v?o.projectionNext:o.next}}function Ll(r,i,o,u,c,h){Hu(o,u,r.firstChild,i,c,h,!1)}function Vy(r,i,o,u,c,h){const v=o[16],x=v[6].projection[u.projection];if(Array.isArray(x))for(let F=0;F<x.length;F++)Bu(i,r,c,x[F],h);else Hu(r,i,x,v[3],c,h,!0)}function vf(r,i,o){""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o)}function Uy(r,i,o){const{mergedAttrs:u,classes:c,styles:h}=o;null!==u&&gr(r,i,u),null!==c&&vf(r,i,c),null!==h&&function $0(r,i,o){r.setAttribute(i,"style",o)}(r,i,h)}function mc(r){return function yu(){if(void 0===_f&&(_f=null,Vt.trustedTypes))try{_f=Vt.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return _f}()?.createHTML(r)||r}function H0(r){wf=r}function Ig(){if(void 0===Ni&&(Ni=null,Vt.trustedTypes))try{Ni=Vt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Ni}function Gu(r){return Ig()?.createHTML(r)||r}function yc(r){return Ig()?.createScriptURL(r)||r}class If{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dt})`}}function Ys(r){return r instanceof If?r.changingThisBreaksApplicationSecurity:r}function zu(r,i){const o=function _c(r){return r instanceof If&&r.getTypeName()||null}(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Dt})`)}return o===i}class zy{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(mc(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class Wy{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=mc(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=mc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const v=o.item(c).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&i.removeAttribute(v)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const oh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Cf(r){return(r=String(r)).match(oh)?r:"unsafe:"+r}function Wu(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function ah(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const Dg=Wu("area,br,col,hr,img,wbr"),bg=Wu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qu=Wu("rp,rt"),Gn=ah(Dg,ah(bg,Wu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ah(qu,Wu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ah(qu,bg)),mr=Wu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Tf=ah(mr,Wu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zy=Wu("script,style,template");class Cg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Gn.hasOwnProperty(o))return this.sanitizedSomething=!0,!Zy.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const h=u.item(c),v=h.name,D=v.toLowerCase();if(!Tf.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let x=h.value;mr[D]&&(x=Cf(x)),this.buf.push(" ",v,'="',Tg(x),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Gn.hasOwnProperty(o)&&!Dg.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(Tg(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const Ky=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yy=/([^\#-~ |!])/g;function Tg(r){return r.replace(/&/g,"&amp;").replace(Ky,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Yy,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sf;function Sg(r){return"content"in r&&function Qy(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var ss=(()=>((ss=ss||{})[ss.NONE=0]="NONE",ss[ss.HTML=1]="HTML",ss[ss.STYLE=2]="STYLE",ss[ss.SCRIPT=3]="SCRIPT",ss[ss.URL=4]="URL",ss[ss.RESOURCE_URL=5]="RESOURCE_URL",ss))();function Ag(r){const i=ks();return i?Gu(i.sanitize(ss.HTML,r)||""):zu(r,"HTML")?Gu(Ys(r)):function Z0(r,i){let o=null;try{Sf=Sf||function Ul(r){const i=new Wy(r);return function bf(){try{return!!(new window.DOMParser).parseFromString(mc(""),"text/html")}catch{return!1}}()?new zy(i):i}(r);let u=i?String(i):"";o=Sf.getInertBodyElement(u);let c=5,h=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=h,h=o.innerHTML,o=Sf.getInertBodyElement(u)}while(u!==h);return mc((new Cg).sanitizeChildren(Sg(o)||o))}finally{if(o){const u=Sg(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}(function jy(){return void 0!==wf?wf:typeof document<"u"?document:void 0}(),Ze(r))}function xg(r){const i=ks();return i?i.sanitize(ss.URL,r)||"":zu(r,"URL")?Ys(r):Cf(Ze(r))}function Xc(r){const i=ks();if(i)return yc(i.sanitize(ss.RESOURCE_URL,r)||"");if(zu(r,"ResourceURL"))return yc(Ys(r));throw new Le(904,!1)}function Cr(r,i,o){return function Qs(r,i){return"src"===i&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===i&&("base"===r||"link"===r)?Xc:xg}(i,o)(r)}function ks(){const r=S();return r&&r[12]}const os=new zn("ENVIRONMENT_INITIALIZER"),Mg=new zn("INJECTOR",-1),zr=new zn("INJECTOR_DEF_TYPES");class Jy{get(i,o=fn){if(o===fn){const u=new Error(`NullInjectorError: No provider for ${Ie(i)}!`);throw u.name="NullInjectorError",u}return o}}function el(...r){return{\u0275providers:Bl(0,r),\u0275fromNgModule:!0}}function Bl(r,...i){const o=[],u=new Set;let c;return ho(i,h=>{const v=h;jl(v,o,[],u)&&(c||(c=[]),c.push(v))}),void 0!==c&&lh(c,o),o}function lh(r,i){for(let o=0;o<r.length;o++){const{providers:c}=r[o];xf(c,h=>{i.push(h)})}}function jl(r,i,o,u){if(!(r=fe(r)))return!1;let c=null,h=Rn(r);const v=!h&&Sn(r);if(h||v){if(v&&!v.standalone)return!1;c=r}else{const x=r.ngModule;if(h=Rn(x),!h)return!1;c=x}const D=u.has(c);if(v){if(D)return!1;if(u.add(c),v.dependencies){const x="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const F of x)jl(F,i,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!D){let F;u.add(c);try{ho(h.imports,W=>{jl(W,i,o,u)&&(F||(F=[]),F.push(W))})}finally{}void 0!==F&&lh(F,i)}if(!D){const F=hs(c)||(()=>new c);i.push({provide:c,useFactory:F,deps:le},{provide:zr,useValue:c,multi:!0},{provide:os,useValue:()=>lt(c),multi:!0})}const x=h.providers;null==x||D||xf(x,W=>{i.push(W)})}}return c!==r&&void 0!==r.providers}function xf(r,i){for(let o of r)He(o)&&(o=o.\u0275providers),Array.isArray(o)?xf(o,i):i(o)}const Zu=ye({provide:String,useValue:ye});function Mf(r){return null!==r&&"object"==typeof r&&Zu in r}function Ku(r){return"function"==typeof r}const dh=new zn("Set Injector scope."),vu={},Fo={};let hh;function nl(){return void 0===hh&&(hh=new Jy),hh}class eu{}class Ng extends eu{get destroyed(){return this._destroyed}constructor(i,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hl(i,v=>this.processProvider(v)),this.records.set(Mg,$l(void 0,this)),c.has("environment")&&this.records.set(eu,$l(void 0,this));const h=this.records.get(dh);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(zr.multi,le,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Gt(this),u=lr(void 0);try{return i()}finally{Gt(o),lr(u)}}get(i,o=fn,u=ct.Default){this.assertNotDestroyed(),u=Ut(u);const c=Gt(this),h=lr(void 0);try{if(!(u&ct.SkipSelf)){let D=this.records.get(i);if(void 0===D){const x=function rv(r){return"function"==typeof r||"object"==typeof r&&r instanceof zn}(i)&&vn(i);D=x&&this.injectableDefInScope(x)?$l(fh(i),vu):null,this.records.set(i,D)}if(null!=D)return this.hydrate(i,D)}return(u&ct.Self?nl():this.parent).get(i,o=u&ct.Optional&&o===fn?null:o)}catch(v){if("NullInjectorError"===v.name){if((v[Tr]=v[Tr]||[]).unshift(Ie(i)),c)throw v;return function ce(r,i,o,u){const c=r[Tr];throw i[ri]&&c.unshift(i[ri]),r.message=function re(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let c=Ie(i);if(Array.isArray(i))c=i.map(Ie).join(" -> ");else if("object"==typeof i){let h=[];for(let v in i)if(i.hasOwnProperty(v)){let D=i[v];h.push(v+":"+("string"==typeof D?JSON.stringify(D):Ie(D)))}c=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(ni,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Tr]=null,r}(v,i,"R3InjectorError",this.source)}throw v}finally{lr(h),Gt(c)}}resolveInjectorInitializers(){const i=Gt(this),o=lr(void 0);try{const u=this.get(os.multi,le,ct.Self);for(const c of u)c()}finally{Gt(i),lr(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(Ie(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processProvider(i){let o=Ku(i=fe(i))?i:fe(i&&i.provide);const u=function ev(r){return Mf(r)?$l(void 0,r.useValue):$l(Og(r),vu)}(i);if(Ku(i)||!0!==i.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=$l(void 0,vu,!0),c.factory=()=>$t(c.multi),this.records.set(o,c)),o=i,c.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===vu&&(o.value=Fo,o.value=o.factory()),"object"==typeof o.value&&o.value&&function nv(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=fe(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function fh(r){const i=vn(r),o=null!==i?i.factory:hs(r);if(null!==o)return o;if(r instanceof zn)throw new Le(204,!1);if(r instanceof Function)return function ph(r){const i=r.length;if(i>0)throw fo(i,"?"),new Le(204,!1);const o=function _n(r){const i=r&&(r[yr]||r[Ln]);if(i){const o=function jt(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Le(204,!1)}function Og(r,i,o){let u;if(Ku(r)){const c=fe(r);return hs(c)||fh(c)}if(Mf(r))u=()=>fe(r.useValue);else if(function Rg(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...$t(r.deps||[]));else if(function tl(r){return!(!r||!r.useExisting)}(r))u=()=>lt(fe(r.useExisting));else{const c=fe(r&&(r.useClass||r.provide));if(!function tv(r){return!!r.deps}(r))return hs(c)||fh(c);u=()=>new c(...$t(r.deps))}return u}function $l(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Hl(r,i){for(const o of r)Array.isArray(o)?Hl(o,i):o&&He(o)?Hl(o.\u0275providers,i):i(o)}class X0{}class iv{}class ov{resolveComponentFactory(i){throw function sv(r){const i=Error(`No component factory found for ${Ie(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let tu=(()=>{class r{}return r.NULL=new ov,r})();function av(){return nu(be(),S())}function nu(r,i){return new zl(jr(r,i))}let zl=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=av,r})();function uv(r){return r instanceof zl?r.nativeElement:r}class Wl{}let eE=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function tE(){const r=S(),o=mn(be().index,r);return(yi(o)?o:r)[11]}(),r})(),pi=(()=>{class r{}return r.\u0275prov=wt({token:r,providedIn:"root",factory:()=>null}),r})();class gh{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const mh=new gh("15.1.4"),Nf={};function kg(r){return r.ngOriginalError}class ql{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&kg(i);for(;o&&kg(o);)o=kg(o);return o||null}}function Fg(r){return r.ownerDocument.defaultView}function xr(r){return r instanceof Function?r():r}function Vg(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const h=i.length;if(c+h===u||r.charCodeAt(c+h)<=32)return c}o=c+1}}const Ql="ng-template";function fv(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==Vg(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function ru(r){return 4===r.type&&r.value!==Ql}function pv(r,i,o){return i===(4!==r.type||o?r.value:Ql)}function vh(r,i,o){let u=4;const c=r.attrs||[],h=function Of(r){for(let i=0;i<r.length;i++)if(zi(r[i]))return i;return r.length}(c);let v=!1;for(let D=0;D<i.length;D++){const x=i[D];if("number"!=typeof x){if(!v)if(4&u){if(u=2|1&u,""!==x&&!pv(r,x,o)||""===x&&1===i.length){if(iu(u))return!1;v=!0}}else{const F=8&u?x:i[++D];if(8&u&&null!==r.attrs){if(!fv(r.attrs,F,o)){if(iu(u))return!1;v=!0}continue}const ee=rE(8&u?"class":x,c,ru(r),o);if(-1===ee){if(iu(u))return!1;v=!0;continue}if(""!==F){let ge;ge=ee>h?"":c[ee+1].toLowerCase();const xe=8&u?ge:null;if(xe&&-1!==Vg(xe,F,0)||2&u&&F!==ge){if(iu(u))return!1;v=!0}}}}else{if(!v&&!iu(u)&&!iu(x))return!1;if(v&&iu(x))continue;v=!1,u=x|1&u}}return iu(u)||v}function iu(r){return 0==(1&r)}function rE(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let h=!1;for(;c<i.length;){const v=i[c];if(v===r)return c;if(3===v||6===v)h=!0;else{if(1===v||2===v){let D=i[++c];for(;"string"==typeof D;)D=i[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=h?1:2}return-1}return function _h(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function In(r,i,o=!1){for(let u=0;u<i.length;u++)if(vh(r,i[u],o))return!0;return!1}function Eh(r,i){e:for(let o=0;o<i.length;o++){const u=i[o];if(r.length===u.length){for(let c=0;c<r.length;c++)if(r[c]!==u[c])continue e;return!0}}return!1}function wh(r,i){return r?":not("+i.trim()+")":i}function gv(r){let i=r[0],o=1,u=2,c="",h=!1;for(;o<r.length;){let v=r[o];if("string"==typeof v)if(2&u){const D=r[++o];c+="["+v+(D.length>0?'="'+D+'"':"")+"]"}else 8&u?c+="."+v:4&u&&(c+=" "+v);else""!==c&&!iu(v)&&(i+=wh(h,c),c=""),u=v,h=h||!iu(u);o++}return""!==c&&(i+=wh(h,c)),i}const yn={};function Ug(r){Bg(R(),S(),ui()+r,!1)}function Bg(r,i,o,u){if(!u)if(3==(3&i[2])){const h=r.preOrderCheckHooks;null!==h&&fa(i,h,o)}else{const h=r.preOrderHooks;null!==h&&T(i,h,0,o)}Gi(o)}function $g(r,i=null,o=null,u){const c=Xl(r,i,o,u);return c.resolveInjectorInitializers(),c}function Xl(r,i=null,o=null,u,c=new Set){const h=[o||le,el(r)];return u=u||("object"==typeof r?void 0:Ie(r)),new Ng(h,i||nl(),u||null,c)}let go=(()=>{class r{static create(o,u){if(Array.isArray(o))return $g({name:""},u,o,"");{const c=o.name??"";return $g({name:c},o.parent,o.providers,c)}}}return r.THROW_IF_NOT_FOUND=fn,r.NULL=new Jy,r.\u0275prov=wt({token:r,providedIn:"any",factory:()=>lt(Mg)}),r.__NG_ELEMENT_ID__=-1,r})();function nd(r,i=ct.Default){const o=S();return null===o?lt(r,i):lu(be(),o,fe(r),i)}function xv(){throw new Error("invalid")}function Mv(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const h=o[u+1];if(-1!==h){const v=r.data[h];ao(o[u]),v.contentQueries(2,i[h],h)}}}function Uf(r,i,o,u,c,h,v,D,x,F,W){const ee=i.blueprint.slice();return ee[0]=c,ee[2]=76|u,(null!==W||r&&1024&r[2])&&(ee[2]|=1024),To(ee),ee[3]=ee[15]=r,ee[8]=o,ee[10]=v||r&&r[10],ee[11]=D||r&&r[11],ee[12]=x||r&&r[12]||null,ee[9]=F||r&&r[9]||null,ee[6]=h,ee[20]=function mg(){return Wc++}(),ee[21]=W,ee[16]=2==i.type?r[16]:ee,ee}function rd(r,i,o,u,c){let h=r.data[i];if(null===h)h=function Wg(r,i,o,u,c){const h=Ct(),v=ai(),x=r.data[i]=function Fs(r,i,o,u,c,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=x),null!==h&&(v?null==h.child&&null!==x.parent&&(h.child=x):null===h.next&&(h.next=x)),x}(r,i,o,u,c),function au(){return tn.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=o,h.value=u,h.attrs=c;const v=function En(){const r=tn.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return rr(h,!0),h}function Ih(r,i,o,u){if(0===o)return-1;const c=i.length;for(let h=0;h<o;h++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function qg(r,i,o){qo(i);try{const u=r.viewQuery;null!==u&&Kf(1,u,o);const c=r.template;null!==c&&Rv(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Mv(r,i),r.staticViewQueries&&Kf(2,r.viewQuery,o);const h=r.components;null!==h&&function yE(r,i){for(let o=0;o<i.length;o++)$v(r,i[o])}(i,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,cu()}}function Bf(r,i,o,u){const c=i[2];if(128!=(128&c)){qo(i);try{To(i),function Ns(r){return tn.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Rv(r,i,o,2,u);const v=3==(3&c);if(v){const F=r.preOrderCheckHooks;null!==F&&fa(i,F,null)}else{const F=r.preOrderHooks;null!==F&&T(i,F,0,null),V(i,0)}if(function Ch(r){for(let i=ea(r);null!==i;i=Na(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u];512&c[2]||ur(c[3],1),c[2]|=512}}}(i),function wE(r){for(let i=ea(r);null!==i;i=Na(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];Pr(u)&&Bf(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&Mv(r,i),v){const F=r.contentCheckHooks;null!==F&&fa(i,F)}else{const F=r.contentHooks;null!==F&&T(i,F,1),V(i,1)}!function gE(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Gi(~c);else{const h=c,v=o[++u],D=o[++u];Wo(v,h),D(2,i[h])}}}finally{Gi(-1)}}(r,i);const D=r.components;null!==D&&function mE(r,i){for(let o=0;o<i.length;o++)ul(r,i[o])}(i,D);const x=r.viewQuery;if(null!==x&&Kf(2,x,u),v){const F=r.viewCheckHooks;null!==F&&fa(i,F)}else{const F=r.viewHooks;null!==F&&T(i,F,2),V(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,ur(i[3],-1))}finally{cu()}}}function Rv(r,i,o,u,c){const h=ui(),v=2&u;try{Gi(-1),v&&i.length>22&&Bg(r,i,22,!1),o(u,c)}finally{Gi(h)}}function Zg(r,i,o){if(bs(i)){const c=i.directiveEnd;for(let h=i.directiveStart;h<c;h++){const v=r.data[h];v.contentQueries&&v.contentQueries(1,o[h],h)}}}function Kg(r,i,o){ua()&&(function Fv(r,i,o,u){const c=o.directiveStart,h=o.directiveEnd;$o(o)&&function bh(r,i,o){const u=jr(i,r),c=Nv(o),h=r[10],v=Th(r,Uf(r,c,null,o.onPush?32:16,u,i,h,h.createRenderer(u,o),null,null,null));r[i.index]=v}(i,o,r.data[c+o.componentOffset]),r.firstCreatePass||No(o,i),Xr(u,i);const v=o.initialInputs;for(let D=c;D<h;D++){const x=r.data[D],F=ir(i,r,D,o);Xr(F,i),null!==v&&Bv(0,D-c,F,x,0,v),Nr(x)&&(mn(o.index,i)[8]=ir(i,r,D,o))}}(r,i,o,jr(o,i)),64==(64&o.flags)&&Wf(r,i,o))}function jf(r,i,o=jr){const u=i.localNames;if(null!==u){let c=i.index+1;for(let h=0;h<u.length;h+=2){const v=u[h+1],D=-1===v?o(i,r):r[v];r[c++]=D}}}function Nv(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=$f(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function $f(r,i,o,u,c,h,v,D,x,F){const W=22+u,ee=W+c,ge=function Ov(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:yn);return o}(W,ee),xe="function"==typeof F?F():F;return ge[1]={type:r,blueprint:ge,template:o,queries:null,viewQuery:D,declTNode:i,data:ge.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:x,consts:xe,incompleteFirstPass:!1}}function Hf(r,i,o,u){const c=Yf(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&tm(r).push(u,c.length-1))}function Gf(r,i,o,u){for(let c in r)if(r.hasOwnProperty(c)){o=null===o?{}:o;const h=r[c];null===u?zf(o,i,c,h):u.hasOwnProperty(c)&&zf(o,i,u[c],h)}return o}function zf(r,i,o,u){r.hasOwnProperty(o)?r[o].push(i,u):r[o]=[i,u]}function na(r,i,o,u,c,h,v,D){const x=jr(i,o);let W,F=i.inputs;!D&&null!=F&&(W=F[u])?(Ah(r,o,W,u,c),$o(i)&&Pv(o,i.index)):3&i.type&&(u=function wc(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=v?v(c,i.value||"",u):c,h.setProperty(x,u,c))}function Pv(r,i){const o=mn(i,r);16&o[2]||(o[2]|=32)}function Ju(r,i,o,u){let c=!1;if(ua()){const h=null===u?null:{"":-1},v=function Lv(r,i){const o=r.directiveRegistry;let u=null,c=null;if(o)for(let h=0;h<o.length;h++){const v=o[h];if(In(i,v.selectors,!1))if(u||(u=[]),Nr(v))if(null!==v.findHostDirectiveDefs){const D=[];c=c||new Map,v.findHostDirectiveDefs(v,D,c),u.unshift(...D,v),qf(r,i,D.length)}else u.unshift(v),qf(r,i,0);else c=c||new Map,v.findHostDirectiveDefs?.(v,u,c),u.push(v)}return null===u?null:[u,c]}(r,o);let D,x;null===v?D=x=null:[D,x]=v,null!==D&&(c=!0,Ic(r,i,o,D,h,x)),h&&function _E(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const h=o[i[c+1]];if(null==h)throw new Le(-301,!1);u.push(i[c],h)}}}(o,u,h)}return o.mergedAttrs=ci(o.mergedAttrs,o.attrs),c}function Ic(r,i,o,u,c,h){for(let F=0;F<u.length;F++)ma(No(o,i),r,u[F].type);!function Uv(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}(o,r.data.length,u.length);for(let F=0;F<u.length;F++){const W=u[F];W.providersResolver&&W.providersResolver(W)}let v=!1,D=!1,x=Ih(r,i,u.length,null);for(let F=0;F<u.length;F++){const W=u[F];o.mergedAttrs=ci(o.mergedAttrs,W.hostAttrs),Zf(r,o,i,x,W),Vv(x,W,c),null!==W.contentQueries&&(o.flags|=4),(null!==W.hostBindings||null!==W.hostAttrs||0!==W.hostVars)&&(o.flags|=64);const ee=W.type.prototype;!v&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),v=!0),!D&&(ee.ngOnChanges||ee.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),D=!0),x++}!function Yg(r,i,o){const c=i.directiveEnd,h=r.data,v=i.attrs,D=[];let x=null,F=null;for(let W=i.directiveStart;W<c;W++){const ee=h[W],ge=o?o.get(ee):null,Xe=ge?ge.outputs:null;x=Gf(ee.inputs,W,x,ge?ge.inputs:null),F=Gf(ee.outputs,W,F,Xe);const vt=null===x||null===v||ru(i)?null:EE(x,W,v);D.push(vt)}null!==x&&(x.hasOwnProperty("class")&&(i.flags|=8),x.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=D,i.inputs=x,i.outputs=F}(r,o,h)}function Wf(r,i,o){const u=o.directiveStart,c=o.directiveEnd,h=o.index,v=function Ca(){return tn.lFrame.currentDirectiveIndex}();try{Gi(h);for(let D=u;D<c;D++){const x=r.data[D],F=i[D];Gs(D),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&Jg(x,F)}}finally{Gi(-1),Gs(v)}}function Jg(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function qf(r,i,o){i.componentOffset=o,(r.components||(r.components=[])).push(i.index)}function Vv(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;Nr(i)&&(o[""]=r)}}function Zf(r,i,o,u,c){r.data[u]=c;const h=c.factory||(c.factory=hs(c.type)),v=new Ne(h,Nr(c),nd);r.blueprint[u]=v,o[u]=v,function al(r,i,o,u,c){const h=c.hostBindings;if(h){let v=r.hostBindingOpCodes;null===v&&(v=r.hostBindingOpCodes=[]);const D=~i.index;(function Dh(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(v)!=D&&v.push(D),v.push(o,u,h)}}(r,i,u,Ih(r,o,c.hostVars,yn),c)}function yo(r,i,o,u,c,h){const v=jr(r,i);!function Xg(r,i,o,u,c,h,v){if(null==h)r.removeAttribute(i,c,o);else{const D=null==v?Ze(h):v(h,u||"",c);r.setAttribute(i,c,D,o)}}(i[11],v,h,r.value,o,u,c)}function Bv(r,i,o,u,c,h){const v=h[i];if(null!==v){const D=u.setInput;for(let x=0;x<v.length;){const F=v[x++],W=v[x++],ee=v[x++];null!==D?u.setInput(o,ee,F,W):o[W]=ee}}}function EE(r,i,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;if(r.hasOwnProperty(h)){null===u&&(u=[]);const v=r[h];for(let D=0;D<v.length;D+=2)if(v[D]===i){u.push(h,v[D+1],o[c+1]);break}}c+=2}else c+=2;else c+=4}return u}function jv(r,i,o,u){return[r,!0,!1,i,null,0,u,o,null,null]}function ul(r,i){const o=mn(i,r);if(Pr(o)){const u=o[1];48&o[2]?Bf(u,o,u.template,o[8]):o[5]>0&&_u(o)}}function _u(r){for(let u=ea(r);null!==u;u=Na(u))for(let c=10;c<u.length;c++){const h=u[c];if(Pr(h))if(512&h[2]){const v=h[1];Bf(v,h,v.template,h[8])}else h[5]>0&&_u(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=mn(o[u],r);Pr(c)&&c[5]>0&&_u(c)}}function $v(r,i){const o=mn(i,r),u=o[1];(function IE(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),qg(u,o,o[8])}function Th(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function em(r){for(;r;){r[2]|=32;const i=Yt(r);if(Au(r)&&!i)return r;r=i}return null}function id(r,i,o,u=!0){const c=i[10];c.begin&&c.begin();try{Bf(r,i,r.template,o)}catch(v){throw u&&zv(i,v),v}finally{c.end&&c.end()}}function Kf(r,i,o){ao(0),i(r,o)}function Yf(r){return r[7]||(r[7]=[])}function tm(r){return r.cleanup||(r.cleanup=[])}function zv(r,i){const o=r[9],u=o?o.get(ql,null):null;u&&u.handleError(i)}function Ah(r,i,o,u,c){for(let h=0;h<o.length;){const v=o[h++],D=o[h++],x=i[v],F=r.data[v];null!==F.setInput?F.setInput(x,c,u,D):x[D]=c}}function Pa(r,i,o){const u=Ss(i,r);!function Jd(r,i,o){r.setValue(i,o)}(r[11],u,o)}function Qf(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,h=0;if(null!==i)for(let v=0;v<i.length;v++){const D=i[v];"number"==typeof D?h=D:1==h?c=Te(c,D):2==h&&(u=Te(u,D+": "+i[++v]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}function xh(r,i,o,u,c=!1){for(;null!==o;){const h=i[o.index];if(null!==h&&u.push(pr(h)),Yr(h))for(let D=10;D<h.length;D++){const x=h[D],F=x[1].firstChild;null!==F&&xh(x[1],x,F,u)}const v=o.type;if(8&v)xh(r,i,o.child,u);else if(32&v){const D=Ye(o,i);let x;for(;x=D();)u.push(x)}else if(16&v){const D=Fl(i,o);if(Array.isArray(D))u.push(...D);else{const x=Yt(i[16]);xh(x[1],x,D,u,!0)}}o=c?o.projectionNext:o.next}return u}class Xu{get rootNodes(){const i=this._lView,o=i[1];return xh(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Yr(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(fi(i,u),ys(o,u))}this._attachedToViewContainer=!1}St(this._lView[1],this._lView)}onDestroy(i){Hf(this._lView[1],this._lView,null,i)}markForCheck(){em(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){id(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ar(r,i){Ll(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Le(902,!1);this._appRef=i}}class Jf extends Xu{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;id(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class sd extends tu{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Sn(i);return new od(o,this.ngModule)}}function nm(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}class ra{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){u=Ut(u);const c=this.injector.get(i,Nf,u);return c!==Nf||o===Nf?c:this.parentInjector.get(i,o,u)}}class od extends iv{get inputs(){return nm(this.componentDef.inputs)}get outputs(){return nm(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function mv(r){return r.map(gv).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,u,c){let h=(c=c||this.ngModule)instanceof eu?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new ra(i,h):i,D=v.get(Wl,null);if(null===D)throw new Le(407,!1);const x=v.get(pi,null),F=D.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",ee=u?function vE(r,i,o){return r.selectRootElement(i,o===Fe.ShadowDom)}(F,u,this.componentDef.encapsulation):un(F,W,function Wv(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(W)),ge=this.componentDef.onPush?288:272,xe=$f(0,null,null,1,0,null,null,null,null,null),Xe=Uf(null,xe,null,ge,null,null,D,F,x,v,null);let vt,Pt;qo(Xe);try{const Wt=this.componentDef;let dn,ht=null;Wt.findHostDirectiveDefs?(dn=[],ht=new Map,Wt.findHostDirectiveDefs(Wt,dn,ht),dn.push(Wt)):dn=[Wt];const Cn=function qv(r,i){const o=r[1];return r[22]=i,rd(o,22,2,"#host",null)}(Xe,ee),ki=function Dc(r,i,o,u,c,h,v,D){const x=c[1];!function ad(r,i,o,u){for(const c of r)i.mergedAttrs=ci(i.mergedAttrs,c.hostAttrs);null!==i.mergedAttrs&&(Qf(i,i.mergedAttrs,!0),null!==o&&Uy(u,o,i))}(u,r,i,v);const F=h.createRenderer(i,o),W=Uf(c,Nv(o),null,o.onPush?32:16,c[r.index],r,h,F,D||null,null,null);return x.firstCreatePass&&qf(x,r,u.length-1),Th(c,W),c[r.index]=W}(Cn,ee,Wt,dn,Xe,D,F);Pt=Dr(xe,22),ee&&function cl(r,i,o,u){if(u)gr(r,o,["ng-version",mh.full]);else{const{attrs:c,classes:h}=function yv(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===c?""!==h&&i.push(h,r[++u]):8===c&&o.push(h);else{if(!iu(c))break;c=h}u++}return{attrs:i,classes:o}}(i.selectors[0]);c&&gr(r,o,c),h&&h.length>0&&vf(r,o,h.join(" "))}}(F,Wt,ee,u),void 0!==o&&function DE(r,i,o){const u=r.projection=[];for(let c=0;c<i.length;c++){const h=o[c];u.push(null!=h?Array.from(h):null)}}(Pt,this.ngContentSelectors,o),vt=function Zv(r,i,o,u,c,h){const v=be(),D=c[1],x=jr(v,c);Ic(D,c,v,o,null,u);for(let W=0;W<o.length;W++)Xr(ir(c,D,v.directiveStart+W,v),c);Wf(D,c,v),x&&Xr(x,c);const F=ir(c,D,v.directiveStart+v.componentOffset,v);if(r[8]=c[8]=F,null!==h)for(const W of h)W(F,i);return Zg(D,v,r),F}(ki,Wt,dn,ht,Xe,[ud]),qg(xe,Xe,null)}finally{cu()}return new Xf(this.componentType,vt,nu(Pt,Xe),Xe,Pt)}}class Xf extends X0{constructor(i,o,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new Jf(c),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[i])){const h=this._rootLView;Ah(h[1],h,c,i,o),Pv(h,this._tNode.index)}}get injector(){return new zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function ud(){const r=be();ha(S()[1],r)}function Eu(r){let i=function im(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;i;){let c;if(Nr(r))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Le(903,!1);c=i.\u0275dir}if(c){if(o){u.push(c);const v=r;v.inputs=sm(r.inputs),v.declaredInputs=sm(r.declaredInputs),v.outputs=sm(r.outputs);const D=c.hostBindings;D&&TE(r,D);const x=c.viewQuery,F=c.contentQueries;if(x&&bE(r,x),F&&CE(r,F),Ce(r.inputs,c.inputs),Ce(r.declaredInputs,c.declaredInputs),Ce(r.outputs,c.outputs),Nr(c)&&c.data.animation){const W=r.data;W.animation=(W.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let v=0;v<h.length;v++){const D=h[v];D&&D.ngInherit&&D(r),D===Eu&&(o=!1)}}i=Object.getPrototypeOf(i)}!function Kv(r){let i=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=i+=c.hostVars,c.hostAttrs=ci(c.hostAttrs,o=ci(o,c.hostAttrs))}}(u)}function sm(r){return r===_t?{}:r===le?[]:r}function bE(r,i){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{i(u,c),o(u,c)}:i}function CE(r,i){const o=r.contentQueries;r.contentQueries=o?(u,c,h)=>{i(u,c,h),o(u,c,h)}:i}function TE(r,i){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{i(u,c),o(u,c)}:i}let Mh=null;function dl(){if(!Mh){const r=Vt.Symbol;if(r&&r.iterator)Mh=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Mh=u)}}}return Mh}function np(r){return!!as(r)&&(Array.isArray(r)||!(r instanceof Map)&&dl()in r)}function as(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function wu(r,i,o){return r[i]=o}function vo(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function bc(r,i,o,u){const c=vo(r,i,o);return vo(r,i+1,u)||c}function cm(r,i,o,u){const c=S();return vo(c,Hs(),i)&&(R(),yo(Un(),c,r,i,o,u)),cm}function Cc(r,i,o,u){return vo(r,Hs(),o)?i+Ze(o)+u:yn}function Tc(r,i,o,u,c,h){const D=bc(r,Ei(),o,c);return es(2),D?i+Ze(o)+u+Ze(c)+h:yn}function Iu(r,i,o,u,c,h,v,D){const F=function rp(r,i,o,u,c){const h=bc(r,i,o,u);return vo(r,i+2,c)||h}(r,Ei(),o,c,v);return es(3),F?i+Ze(o)+u+Ze(c)+h+Ze(v)+D:yn}function Nh(r,i,o,u,c,h,v,D){const x=S(),F=R(),W=r+22,ee=F.firstCreatePass?function pm(r,i,o,u,c,h,v,D,x){const F=i.consts,W=rd(i,r,4,v||null,$r(F,D));Ju(i,o,W,$r(F,x)),ha(i,W);const ee=W.tViews=$f(2,W,u,c,h,i.directiveRegistry,i.pipeRegistry,null,i.schemas,F);return null!==i.queries&&(i.queries.template(i,W),ee.queries=i.queries.embeddedTView(W)),W}(W,F,x,i,o,u,c,h,v):F.data[W];rr(ee,!1);const ge=x[11].createComment("");ta(F,x,ge,ee),Xr(ge,x),Th(x,x[W]=jv(ge,x,ge,ee)),Ia(ee)&&Kg(F,x,ee),null!=v&&jf(x,ee,D)}function sp(r,i,o){const u=S();return vo(u,Hs(),i)&&na(R(),Un(),u,r,i,u[11],o,!1),sp}function gm(r,i,o,u,c){const v=c?"class":"style";Ah(r,o,i.inputs[v],v,u)}function op(r,i,o,u){const c=S(),h=R(),v=22+r,D=c[11],x=c[v]=un(D,i,function Ga(){return tn.lFrame.currentNamespace}()),F=h.firstCreatePass?function mm(r,i,o,u,c,h,v){const D=i.consts,F=rd(i,r,2,c,$r(D,h));return Ju(i,o,F,$r(D,v)),null!==F.attrs&&Qf(F,F.attrs,!1),null!==F.mergedAttrs&&Qf(F,F.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,F),F}(v,h,c,0,i,o,u):h.data[v];return rr(F,!0),Uy(D,x,F),32!=(32&F.flags)&&ta(h,c,x,F),0===function $s(){return tn.lFrame.elementDepthCount}()&&Xr(x,c),function xs(){tn.lFrame.elementDepthCount++}(),Ia(F)&&(Kg(h,c,F),Zg(h,F,c)),null!==u&&jf(c,F),op}function dd(){let r=be();ai()?Hi():(r=r.parent,rr(r,!1));const i=r;!function kr(){tn.lFrame.elementDepthCount--}();const o=R();return o.firstCreatePass&&(ha(o,r),bs(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Pn(r){return 0!=(8&r.flags)}(i)&&gm(o,i,S(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function ln(r){return 0!=(16&r.flags)}(i)&&gm(o,i,S(),i.stylesWithoutHost,!1),dd}function ap(r,i,o,u){return op(r,i,o,u),dd(),ap}function Ph(){return S()}function kh(r){return!!r&&"function"==typeof r.then}function up(r){return!!r&&"function"==typeof r.subscribe}const cp=up;function lp(r,i,o,u){const c=S(),h=R(),v=be();return function Fh(r,i,o,u,c,h,v){const D=Ia(u),F=r.firstCreatePass&&tm(r),W=i[8],ee=Yf(i);let ge=!0;if(3&u.type||v){const vt=jr(u,i),Pt=v?v(vt):vt,Wt=ee.length,dn=v?Cn=>v(pr(Cn[u.index])):u.index;let ht=null;if(!v&&D&&(ht=function o_(r,i,o,u){const c=r.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const v=c[h];if(v===o&&c[h+1]===u){const D=i[7],x=c[h+2];return D.length>x?D[x]:null}"string"==typeof v&&(h+=2)}return null}(r,i,c,u.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=h,ht.__ngLastListenerFn__=h,ge=!1;else{h=a_(u,i,W,h,!1);const Cn=o.listen(Pt,c,h);ee.push(h,Cn),F&&F.push(c,dn,Wt,Wt+1)}}else h=a_(u,i,W,h,!1);const xe=u.outputs;let Xe;if(ge&&null!==xe&&(Xe=xe[c])){const vt=Xe.length;if(vt)for(let Pt=0;Pt<vt;Pt+=2){const ki=i[Xe[Pt]][Xe[Pt+1]].subscribe(h),ws=ee.length;ee.push(h,ki),F&&F.push(c,u.index,ws,-(ws+1))}}}(h,c,c[11],v,r,i,u),lp}function dp(r,i,o,u){try{return!1!==o(u)}catch(c){return zv(r,c),!1}}function a_(r,i,o,u,c){return function h(v){if(v===Function)return u;em(r.componentOffset>-1?mn(r.index,i):i);let x=dp(i,0,u,v),F=h.__ngNextListenerFn__;for(;F;)x=dp(i,0,F,v)&&x,F=F.__ngNextListenerFn__;return c&&!1===x&&(v.preventDefault(),v.returnValue=!1),x}}function u_(r=1){return function $a(r){return(tn.lFrame.contextLView=function xo(r,i){for(;r>0;)i=i[15],r--;return i}(r,tn.lFrame.contextLView))[8]}(r)}function _o(r,i){let o=null;const u=function iE(r){const i=r.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(r);for(let c=0;c<i.length;c++){const h=i[c];if("*"!==h){if(null===u?In(r,h,!0):Eh(u,h))return c}else o=c}return o}function c_(r){const i=S()[16][6];if(!i.projection){const u=i.projection=fo(r?r.length:1,null),c=u.slice();let h=i.child;for(;null!==h;){const v=r?_o(h,r):0;null!==v&&(c[v]?c[v].projectionNext=h:u[v]=h,c[v]=h),h=h.next}}}function ym(r,i=0,o){const u=S(),c=R(),h=rd(c,22+r,16,null,o||null);null===h.projection&&(h.projection=i),Hi(),32!=(32&h.flags)&&function wg(r,i,o){Vy(i[11],0,i,o,ky(r,o,i),_g(o.parent||i[6],o,i))}(c,u,h)}function xc(r,i,o,u,c){const h=S(),v=Cc(h,i,o,u);return v!==yn&&na(R(),Un(),h,r,v,h[11],c,!1),xc}function Vh(r,i,o,u,c,h,v){const D=S(),x=Tc(D,i,o,u,c,h);return x!==yn&&na(R(),Un(),D,r,x,D[11],v,!1),Vh}function hp(r,i,o,u,c,h,v,D,x){const F=S(),W=Iu(F,i,o,u,c,h,v,D);return W!==yn&&na(R(),Un(),F,r,W,F[11],x,!1),hp}function pp(r,i){return r<<17|i<<2}function ka(r){return r>>17&32767}function Uh(r){return 2|r}function Du(r){return(131068&r)>>2}function gl(r,i){return-131069&r|i<<2}function gp(r){return 1|r}function v_(r,i,o,u,c){const h=r[o+1],v=null===i;let D=u?ka(h):Du(h),x=!1;for(;0!==D&&(!1===x||v);){const W=r[D+1];Em(r[D],i)&&(x=!0,r[D+1]=u?gp(W):Uh(W)),D=u?ka(W):Du(W)}x&&(r[o+1]=u?Uh(h):gp(h))}function Em(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&y(r,i)>=0}const _s={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mp(r){return r.substring(_s.key,_s.keyEnd)}function Bh(r,i){const o=_s.textEnd;return o===i?-1:(i=_s.keyEnd=function NE(r,i,o){for(;i<o&&r.charCodeAt(i)>32;)i++;return i}(r,_s.key=i,o),Mc(r,i,o))}function Mc(r,i,o){for(;i<o&&r.charCodeAt(i)<=32;)i++;return i}function Cm(r,i,o){return La(r,i,o,!1),Cm}function jh(r,i){return La(r,i,null,!0),jh}function Fa(r,i){for(let o=function wm(r){return function ml(r){_s.key=0,_s.keyEnd=0,_s.value=0,_s.valueEnd=0,_s.textEnd=r.length}(r),Bh(r,Mc(r,0,_s.textEnd))}(i);o>=0;o=Bh(i,o))_(r,mp(i),!0)}function La(r,i,o,u){const c=S(),h=R(),v=es(2);h.firstUpdatePass&&vp(h,r,v,u),i!==yn&&vo(c,v,i)&&_p(h,h.data[ui()],c,c[11],r,c[v+1]=function Am(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=Ie(Ys(r)))),r}(i,o),u,v)}function yp(r,i){return i>=r.expandoStartIndex}function vp(r,i,o,u){const c=r.data;if(null===c[o+1]){const h=c[ui()],v=yp(r,o);D_(h,u)&&null===i&&!v&&(i=!1),i=function gd(r,i,o,u){const c=function oo(r){const i=tn.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let h=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(o=yd(o=Nc(null,r,i,o,u),i.attrs,u),h=null);else{const v=i.directiveStylingLast;if(-1===v||r[v]!==c)if(o=Nc(c,r,i,o,u),null===h){let x=function Rc(r,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Du(u))return r[ka(u)]}(r,i,u);void 0!==x&&Array.isArray(x)&&(x=Nc(null,r,i,x[1],u),x=yd(x,i.attrs,u),function Sm(r,i,o,u){r[ka(o?i.classBindings:i.styleBindings)]=u}(r,i,u,x))}else h=function md(r,i,o){let u;const c=i.directiveEnd;for(let h=1+i.directiveStylingLast;h<c;h++)u=yd(u,r[h].hostAttrs,o);return yd(u,i.attrs,o)}(r,i,u)}return void 0!==h&&(u?i.residualClasses=h:i.residualStyles=h),o}(c,h,i,u),function tc(r,i,o,u,c,h){let v=h?i.classBindings:i.styleBindings,D=ka(v),x=Du(v);r[u]=o;let W,F=!1;if(Array.isArray(o)?(W=o[1],(null===W||y(o,W)>0)&&(F=!0)):W=o,c)if(0!==x){const ge=ka(r[D+1]);r[u+1]=pp(ge,D),0!==ge&&(r[ge+1]=gl(r[ge+1],u)),r[D+1]=function pd(r,i){return 131071&r|i<<17}(r[D+1],u)}else r[u+1]=pp(D,0),0!==D&&(r[D+1]=gl(r[D+1],u)),D=u;else r[u+1]=pp(x,0),0===D?D=u:r[x+1]=gl(r[x+1],u),x=u;F&&(r[u+1]=Uh(r[u+1])),v_(r,W,u,!0),v_(r,W,u,!1),function y_(r,i,o,u,c){const h=c?r.residualClasses:r.residualStyles;null!=h&&"string"==typeof i&&y(h,i)>=0&&(o[u+1]=gp(o[u+1]))}(i,W,r,u,h),v=pp(D,x),h?i.classBindings=v:i.styleBindings=v}(c,h,i,o,v,u)}}function Nc(r,i,o,u,c){let h=null;const v=o.directiveEnd;let D=o.directiveStylingLast;for(-1===D?D=o.directiveStart:D++;D<v&&(h=i[D],u=yd(u,h.hostAttrs,c),h!==r);)D++;return null!==r&&(o.directiveStylingLast=D),u}function yd(r,i,o){const u=o?1:2;let c=-1;if(null!==i)for(let h=0;h<i.length;h++){const v=i[h];"number"==typeof v?c=v:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),_(r,v,!!o||i[++h]))}return void 0===r?null:r}function _p(r,i,o,u,c,h,v,D){if(!(3&i.type))return;const x=r.data,F=x[D+1],W=function _m(r){return 1==(1&r)}(F)?Ep(x,i,o,c,Du(F),v):void 0;_d(W)||(_d(h)||function vm(r){return 2==(2&r)}(F)&&(h=Ep(x,null,o,c,D,v)),function va(r,i,o,u,c){if(i)c?r.addClass(o,u):r.removeClass(o,u);else{let h=-1===u.indexOf("-")?void 0:hi.DashCase;null==c?r.removeStyle(o,u,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=hi.Important),r.setStyle(o,u,c,h))}}(u,v,Ss(ui(),o),c,h))}function Ep(r,i,o,u,c,h){const v=null===i;let D;for(;c>0;){const x=r[c],F=Array.isArray(x),W=F?x[1]:x,ee=null===W;let ge=o[c+1];ge===yn&&(ge=ee?le:void 0);let xe=ee?E(ge,u):W===u?ge:void 0;if(F&&!_d(xe)&&(xe=E(x,u)),_d(xe)&&(D=xe,v))return D;const Xe=r[c+1];c=v?ka(Xe):Du(Xe)}if(null!==i){let x=h?i.residualClasses:i.residualStyles;null!=x&&(D=E(x,u))}return D}function _d(r){return void 0!==r}function D_(r,i){return 0!=(r.flags&(i?8:16))}function b_(r,i=""){const o=S(),u=R(),c=r+22,h=u.firstCreatePass?rd(u,c,1,i,null):u.data[c],v=o[c]=function Nl(r,i){return r.createText(i)}(o[11],i);ta(u,o,v,h),rr(h,!1)}function $h(r){return Ed("",r,""),$h}function Ed(r,i,o){const u=S(),c=Cc(u,r,i,o);return c!==yn&&Pa(u,ui(),c),Ed}function xm(r,i,o,u,c){const h=S(),v=Tc(h,r,i,o,u,c);return v!==yn&&Pa(h,ui(),v),xm}function wp(r,i,o,u,c,h,v){const D=S(),x=Iu(D,r,i,o,u,c,h,v);return x!==yn&&Pa(D,ui(),x),wp}function S_(r,i,o){!function Ea(r,i,o,u){const c=R(),h=es(2);c.firstUpdatePass&&vp(c,null,h,u);const v=S();if(o!==yn&&vo(v,h,o)){const D=c.data[ui()];if(D_(D,u)&&!yp(c,h)){let x=u?D.classesWithoutHost:D.stylesWithoutHost;null!==x&&(o=Te(x,o||"")),gm(c,D,v,o,u)}else!function kE(r,i,o,u,c,h,v,D){c===yn&&(c=le);let x=0,F=0,W=0<c.length?c[0]:null,ee=0<h.length?h[0]:null;for(;null!==W||null!==ee;){const ge=x<c.length?c[x+1]:void 0,xe=F<h.length?h[F+1]:void 0;let vt,Xe=null;W===ee?(x+=2,F+=2,ge!==xe&&(Xe=ee,vt=xe)):null===ee||null!==W&&W<ee?(x+=2,Xe=W):(F+=2,Xe=ee,vt=xe),null!==Xe&&_p(r,i,o,u,Xe,vt,v,D),W=x<c.length?c[x]:null,ee=F<h.length?h[F]:null}}(c,D,v,v[11],v[h+1],v[h+1]=function vd(r,i,o){if(null==o||""===o)return le;const u=[],c=Ys(o);if(Array.isArray(c))for(let h=0;h<c.length;h++)r(u,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&r(u,h,c[h]);else"string"==typeof c&&i(u,c);return u}(r,i,o),u,h)}}(_,Fa,Cc(S(),r,i,o),!0)}const nc=void 0;var Hm=["en",[["a","p"],["AM","PM"],nc],[["AM","PM"],nc,nc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nc,"{1} 'at' {0}",nc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function HE(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let wd={};function Hh(r){const i=function Gm(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=N_(i);if(o)return o;const u=i.split("-")[0];if(o=N_(u),o)return o;if("en"===u)return Hm;throw new Le(701,!1)}function Ap(r){return Hh(r)[an.PluralCase]}function N_(r){return r in wd||(wd[r]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[r]),wd[r]}var an=(()=>((an=an||{})[an.LocaleId=0]="LocaleId",an[an.DayPeriodsFormat=1]="DayPeriodsFormat",an[an.DayPeriodsStandalone=2]="DayPeriodsStandalone",an[an.DaysFormat=3]="DaysFormat",an[an.DaysStandalone=4]="DaysStandalone",an[an.MonthsFormat=5]="MonthsFormat",an[an.MonthsStandalone=6]="MonthsStandalone",an[an.Eras=7]="Eras",an[an.FirstDayOfWeek=8]="FirstDayOfWeek",an[an.WeekendRange=9]="WeekendRange",an[an.DateFormat=10]="DateFormat",an[an.TimeFormat=11]="TimeFormat",an[an.DateTimeFormat=12]="DateTimeFormat",an[an.NumberSymbols=13]="NumberSymbols",an[an.NumberFormats=14]="NumberFormats",an[an.CurrencyCode=15]="CurrencyCode",an[an.CurrencySymbol=16]="CurrencySymbol",an[an.CurrencyName=17]="CurrencyName",an[an.Currencies=18]="Currencies",an[an.Directionality=19]="Directionality",an[an.PluralCase=20]="PluralCase",an[an.ExtraData=21]="ExtraData",an))();const vl="en-US";let Mp=vl;function uy(r,i,o,u,c){if(r=fe(r),Array.isArray(r))for(let h=0;h<r.length;h++)uy(r[h],i,o,u,c);else{const h=R(),v=S();let D=Ku(r)?r:fe(r.provide),x=Og(r);const F=be(),W=1048575&F.providerIndexes,ee=F.directiveStart,ge=F.providerIndexes>>20;if(Ku(r)||!r.multi){const xe=new Ne(x,c,nd),Xe=Td(D,i,c?W:W+ge,ee);-1===Xe?(ma(No(F,v),h,D),$p(h,r,i.length),i.push(D),F.directiveStart++,F.directiveEnd++,c&&(F.providerIndexes+=1048576),o.push(xe),v.push(xe)):(o[Xe]=xe,v[Xe]=xe)}else{const xe=Td(D,i,W+ge,ee),Xe=Td(D,i,W,W+ge),Pt=Xe>=0&&o[Xe];if(c&&!Pt||!c&&!(xe>=0&&o[xe])){ma(No(F,v),h,D);const Wt=function Wh(r,i,o,u,c){const h=new Ne(r,o,nd);return h.multi=[],h.index=i,h.componentProviders=0,cy(h,c,u&&!o),h}(c?Il:dw,o.length,c,u,x);!c&&Pt&&(o[Xe].providerFactory=Wt),$p(h,r,i.length,0),i.push(D),F.directiveStart++,F.directiveEnd++,c&&(F.providerIndexes+=1048576),o.push(Wt),v.push(Wt)}else $p(h,r,xe>-1?xe:Xe,cy(o[c?Xe:xe],x,!c&&u));!c&&u&&Pt&&o[Xe].componentProviders++}}}function $p(r,i,o,u){const c=Ku(i),h=function Rf(r){return!!r.useClass}(i);if(c||h){const x=(h?fe(i.useClass):i).prototype.ngOnDestroy;if(x){const F=r.destroyHooks||(r.destroyHooks=[]);if(!c&&i.multi){const W=F.indexOf(o);-1===W?F.push(o,[u,x]):F[W+1].push(u,x)}else F.push(o,x)}}}function cy(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function Td(r,i,o,u){for(let c=o;c<u;c++)if(i[c]===r)return c;return-1}function dw(r,i,o,u){return Sd(this.multi,[])}function Il(r,i,o,u){const c=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,D=ir(o,o[1],this.providerFactory.index,u);h=D.slice(0,v),Sd(c,h);for(let x=v;x<D.length;x++)h.push(D[x])}else h=[],Sd(c,h);return h}function Sd(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function ly(r,i=[]){return o=>{o.providersResolver=(u,c)=>function lw(r,i,o){const u=R();if(u.firstCreatePass){const c=Nr(r);uy(o,u.data,u.blueprint,c,!0),uy(i,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,i)}}class Pc{}class Q_{}function hw(r,i){return new Hp(r,i??null)}class Hp extends Pc{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sd(this);const u=Kr(i);this._bootstrapComponents=xr(u.bootstrap),this._r3Injector=Xl(i,o,[{provide:Pc,useValue:this},{provide:tu,useValue:this.componentFactoryResolver}],Ie(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class qh extends Q_{constructor(i){super(),this.moduleType=i}create(i){return new Hp(this.moduleType,i)}}class J_ extends Pc{constructor(i,o,u){super(),this.componentFactoryResolver=new sd(this),this.instance=null;const c=new Ng([...i,{provide:Pc,useValue:this},{provide:tu,useValue:this.componentFactoryResolver}],o||nl(),u,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function ic(r,i,o=null){return new J_(r,i,o).injector}let X_=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Bl(0,o.type),c=u.length>0?ic([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=wt({token:r,providedIn:"environment",factory:()=>new r(lt(eu))}),r})();function dy(r){r.getStandaloneInjector=i=>i.get(X_).getOrCreateStandaloneInjector(r)}function pw(r,i,o){const u=Qr()+r,c=S();return c[u]===yn?wu(c,u,o?i.call(o):i()):function Rh(r,i){return r[i]}(c,u)}function zp(r,i,o,u){return s0(S(),Qr(),r,i,o,u)}function r0(r,i,o,u,c){return function fy(r,i,o,u,c,h,v){const D=i+o;return bc(r,D,c,h)?wu(r,D+2,v?u.call(v,c,h):u(c,h)):Xh(r,D+2)}(S(),Qr(),r,i,o,u,c)}function Xh(r,i){const o=r[i];return o===yn?void 0:o}function s0(r,i,o,u,c,h){const v=i+o;return vo(r,v,c)?wu(r,v+1,h?u.call(h,c):u(c)):Xh(r,v+1)}function yy(r,i){const o=R();let u;const c=r+22;o.firstCreatePass?(u=function o0(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const h=u.factory||(u.factory=hs(u.type)),v=lr(nd);try{const D=ts(!1),x=h();return ts(D),function n_(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,S(),c,x),x}finally{lr(v)}}function ef(r,i,o){const u=r+22,c=S(),h=function _i(r,i){return r[i]}(c,u);return function Kp(r,i){return r[1].data[i].pure}(c,u)?s0(c,Qr(),i,h.transform,o,h):h.transform(o)}function sc(r){return i=>{setTimeout(r,void 0,i)}}const Ls=class oI extends g.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let c=i,h=o||(()=>null),v=u;if(i&&"object"==typeof i){const x=i;c=x.next?.bind(x),h=x.error?.bind(x),v=x.complete?.bind(x)}this.__isAsync&&(h=sc(h),c&&(c=sc(c)),v&&(v=sc(v)));const D=super.subscribe({next:c,error:h,complete:v});return i instanceof H.w0&&i.add(D),D}};function tf(){return this._results[dl()]()}class Su{get changes(){return this._changes||(this._changes=new Ls)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=dl(),u=Su.prototype;u[o]||(u[o]=tf)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=function Ri(r){return r.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Pu(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],h=i[u];if(o&&(c=o(c),h=o(h)),h!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let nf=(()=>{class r{}return r.__NG_ELEMENT_ID__=Fc,r})();const u0=nf,ww=class extends u0{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tViews,c=Uf(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(c[19]=v.createEmbeddedView(u)),qg(u,c,i),new Xu(c)}};function Fc(){return Yp(be(),S())}function Yp(r,i){return 4&r.type?new ww(i,r,nu(r,i)):null}let Qp=(()=>{class r{}return r.__NG_ELEMENT_ID__=Iw,r})();function Iw(){return l0(be(),S())}const Dw=Qp,c0=class extends Dw{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return nu(this._hostTNode,this._hostLView)}get injector(){return new zs(this._hostTNode,this._hostLView)}get parentInjector(){const i=za(this._hostTNode,this._hostLView);if(Mo(i)){const o=Ps(i,this._hostLView),u=Ro(i);return new zs(o[1].data[u+8],o)}return new zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=vy(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){let c,h;"number"==typeof u?c=u:null!=u&&(c=u.index,h=u.injector);const v=i.createEmbeddedView(o||{},h);return this.insert(v,c),v}createComponent(i,o,u,c,h){const v=i&&!function Qa(r){return"function"==typeof r}(i);let D;if(v)D=o;else{const ee=o||{};D=ee.index,u=ee.injector,c=ee.projectableNodes,h=ee.environmentInjector||ee.ngModuleRef}const x=v?i:new od(Sn(i)),F=u||this.parentInjector;if(!h&&null==x.ngModule){const ge=(v?F:this.parentInjector).get(eu,null);ge&&(h=ge)}const W=x.create(F,c,void 0,h);return this.insert(W.hostView,D),W}insert(i,o){const u=i._lView,c=u[1];if(function ba(r){return Yr(r[3])}(u)){const W=this.indexOf(i);if(-1!==W)this.detach(W);else{const ee=u[3],ge=new c0(ee,ee[6],ee[3]);ge.detach(ge.indexOf(i))}}const h=this._adjustIndex(o),v=this._lContainer;!function Zc(r,i,o,u){const c=10+u,h=o.length;u>0&&(o[c-1][4]=i),u<h-10?(i[4]=o[c],Xo(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const v=i[17];null!==v&&o!==v&&function Hn(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(v,i);const D=i[19];null!==D&&D.insertView(r),i[2]|=64}(c,u,v,h);const D=mu(h,v),x=u[11],F=kl(x,v[7]);return null!==F&&function eh(r,i,o,u,c,h){u[0]=c,u[6]=i,Ll(r,u,o,1,c,h)}(c,v[6],x,u,F,D),i.attachToViewContainerRef(),Xo(Jp(v),h,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=vy(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=fi(this._lContainer,o);u&&(ys(Jp(this._lContainer),o),St(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=fi(this._lContainer,o);return u&&null!=ys(Jp(this._lContainer),o)?new Xu(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function vy(r){return r[8]}function Jp(r){return r[8]||(r[8]=[])}function l0(r,i){let o;const u=i[r.index];if(Yr(u))o=u;else{let c;if(8&r.type)c=pr(u);else{const h=i[11];c=h.createComment("");const v=jr(r,i);Yc(h,kl(h,v),c,function Ly(r,i){return r.nextSibling(i)}(h,v),!1)}i[r.index]=o=jv(u,i,c,r),Th(i,o)}return new c0(o,r,i)}class _y{constructor(i){this.queryList=i,this.matches=null}clone(){return new _y(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xp{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let h=0;h<u;h++){const v=o.getByIndex(h);c.push(this.queries[v.indexInDeclarationView].clone())}return new Xp(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==wy(i,o).matches&&this.queries[o].setDirty()}}class d0{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class Lc{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,h=this.getByIndex(u).embeddedTView(i,c);h&&(h.indexInDeclarationView=u,null!==o?o.push(h):o=[h])}return null!==o?new Lc(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class rf{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new rf(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const h=u[c];this.matchTNodeWithReadOption(i,o,aI(o,h)),this.matchTNodeWithReadOption(i,o,Po(o,i,h,!1,!1))}else u===nf?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Po(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===zl||c===Qp||c===nf&&4&o.type)this.addMatch(o.index,-2);else{const h=Po(o,i,c,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function aI(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function Cw(r,i,o,u){return-1===o?function bw(r,i){return 11&r.type?nu(r,i):4&r.type?Yp(r,i):null}(i,r):-2===o?function h0(r,i,o){return o===zl?nu(i,r):o===nf?Yp(i,r):o===Qp?l0(i,r):void 0}(r,i,u):ir(r,r[1],o,i)}function oc(r,i,o,u){const c=i[19].queries[u];if(null===c.matches){const h=r.data,v=o.matches,D=[];for(let x=0;x<v.length;x+=2){const F=v[x];D.push(F<0?null:Cw(i,h[F],v[x+1],o.metadata.read))}c.matches=D}return c.matches}function Ey(r,i,o,u){const c=r.queries.getByIndex(o),h=c.matches;if(null!==h){const v=oc(r,i,c,o);for(let D=0;D<h.length;D+=2){const x=h[D];if(x>0)u.push(v[D/2]);else{const F=h[D+1],W=i[-x];for(let ee=10;ee<W.length;ee++){const ge=W[ee];ge[17]===ge[3]&&Ey(ge[1],ge,F,u)}if(null!==W[9]){const ee=W[9];for(let ge=0;ge<ee.length;ge++){const xe=ee[ge];Ey(xe[1],xe,F,u)}}}}}return u}function f0(r){const i=S(),o=R(),u=Ua();ao(u+1);const c=wy(o,u);if(r.dirty&&function oi(r){return 4==(4&r[2])}(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const h=c.crossesNgTemplate?Ey(o,i,u,[]):oc(o,i,c,u);r.reset(h,uv),r.notifyOnChanges()}return!0}return!1}function p0(r,i,o){const u=R();u.firstCreatePass&&(Sw(u,new d0(r,i,o),-1),2==(2&i)&&(u.staticViewQueries=!0)),y0(u,S(),i)}function g0(r,i,o,u){const c=R();if(c.firstCreatePass){const h=be();Sw(c,new d0(i,o,u),h.index),function uI(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}y0(c,S(),o)}function m0(){return function Tw(r,i){return r[19].queries[i].queryList}(S(),Ua())}function y0(r,i,o){const u=new Su(4==(4&o));Hf(r,i,u,u.destroy),null===i[19]&&(i[19]=new Xp),i[19].queries.push(new _y(u))}function Sw(r,i,o){null===r.queries&&(r.queries=new Lc),r.queries.track(new rf(i,o))}function wy(r,i){return r.queries.getByIndex(i)}function ag(...r){}const Pd=new zn("Application Initializer");let ug=(()=>{class r{constructor(o){this.appInits=o,this.resolve=ag,this.reject=ag,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(kh(h))o.push(h);else if(cp(h)){const v=new Promise((D,x)=>{h.subscribe({complete:D,error:x})});o.push(v)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(lt(Pd,8))},r.\u0275prov=wt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const kd=new zn("AppId",{providedIn:"root",factory:function Fd(){return`${Ny()}${Ny()}${Ny()}`}});function Ny(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ld=new zn("Platform Initializer"),sf=new zn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Vd=new zn("appBootstrapListener");let Pw=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=wt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const cg=new zn("LocaleId",{providedIn:"root",factory:()=>bt(cg,ct.Optional|ct.SkipSelf)||function kw(){return typeof $localize<"u"&&$localize.locale||vl}()}),Fw=new zn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Lw{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let af=(()=>{class r{compileModuleSync(o){return new qh(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),h=xr(Kr(o).declarations).reduce((v,D)=>{const x=Sn(D);return x&&v.push(new od(x)),v},[]);return new Lw(u,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=wt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Uw=(()=>Promise.resolve(0))();function Oy(r){typeof Zone>"u"?Uw.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Eo{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ls(!1),this.onMicrotaskEmpty=new Ls(!1),this.onStable=new Ls(!1),this.onError=new Ls(!1),typeof Zone>"u")throw new Le(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Bw(){let r=Vt.requestAnimationFrame,i=Vt.cancelAnimationFrame;if(typeof Zone<"u"&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function jd(r){const i=()=>{!function Bd(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Vt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,n(r),r.isCheckStableRunning=!0,Py(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),n(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,h,v,D)=>{try{return e(r),o.invokeTask(c,h,v,D)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&i(),t(r)}},onInvoke:(o,u,c,h,v,D,x)=>{try{return e(r),o.invoke(c,h,v,D,x)}finally{r.shouldCoalesceRunChangeDetection&&i(),t(r)}},onHasTask:(o,u,c,h)=>{o.hasTask(c,h),u===c&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,n(r),Py(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,c,h)=>(o.handleError(c,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Eo.isInAngularZone())throw new Le(909,!1)}static assertNotInAngularZone(){if(Eo.isInAngularZone())throw new Le(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+c,i,Ud,ag,ag);try{return h.runTask(v,o,u)}finally{h.cancelTask(v)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const Ud={};function Py(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function n(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function e(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function t(r){r._nesting--,Py(r)}class s{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ls,this.onMicrotaskEmpty=new Ls,this.onStable=new Ls,this.onError=new Ls}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}const a=new zn(""),l=new zn("");let U,p=(()=>{class r{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,U||(function O(r){U=r}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Eo.assertNotInAngularZone(),Oy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Oy(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(lt(Eo),lt(I),lt(l))},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})(),I=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return U?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=wt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Y=null;const ue=new zn("AllowMultipleToken"),De=new zn("PlatformDestroyListeners");class Qn{constructor(i,o){this.name=i,this.token=o}}function Mn(r,i,o=[]){const u=`Platform: ${i}`,c=new zn(u);return(h=[])=>{let v=jw();if(!v||v.injector.get(ue,!1)){const D=[...o,...h,{provide:c,useValue:!0}];r?r(D):function ti(r){if(Y&&!Y.get(ue,!1))throw new Le(400,!1);Y=r;const i=r.get(DI);(function Fn(r){const i=r.get(Ld,null);i&&i.forEach(o=>o())})(r)}(function ac(r=[],i){return go.create({name:i,providers:[{provide:dh,useValue:"platform"},{provide:De,useValue:new Set([()=>Y=null])},...r]})}(D,u))}return function Vs(r){const i=jw();if(!i)throw new Le(401,!1);return i}()}}function jw(){return Y?.get(DI)??null}let DI=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function CI(r,i){let o;return o="noop"===r?new s:("zone.js"===r?void 0:r)||new Eo(i),o}(u?.ngZone,function bI(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Eo,useValue:c}];return c.run(()=>{const v=go.create({providers:h,parent:this.injector,name:o.moduleType.name}),D=o.create(v),x=D.injector.get(ql,null);if(!x)throw new Le(402,!1);return c.runOutsideAngular(()=>{const F=c.onError.subscribe({next:W=>{x.handleError(W)}});D.onDestroy(()=>{V0(this._modules,D),F.unsubscribe()})}),function TI(r,i,o){try{const u=o();return kh(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(x,c,()=>{const F=D.injector.get(ug);return F.runInitializers(),F.donePromise.then(()=>(function Rp(r){ft(r,"Expected localeId to be defined"),"string"==typeof r&&(Mp=r.toLowerCase().replace(/_/g,"-"))}(D.injector.get(cg,vl)||vl),this._moduleDoBootstrap(D),D))})})}bootstrapModule(o,u=[]){const c=SI({},u);return function st(r,i,o){const u=new qh(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const u=o.injector.get(L0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Le(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(De,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(lt(go))},r.\u0275prov=wt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function SI(r,i){return Array.isArray(i)?i.reduce(SI,r):{...r,...i}}let L0=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new m.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),v=new m.y(D=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Eo.assertNotInAngularZone(),Oy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Eo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{x.unsubscribe(),F.unsubscribe()}});this.isStable=(0,de.T)(h,v.pipe((0,he.B)()))}bootstrap(o,u){const c=o instanceof iv;if(!this._injector.get(ug).done)throw!c&&Zn(o),new Le(405,false);let v;v=c?o:this._injector.get(tu).resolveComponentFactory(o),this.componentTypes.push(v.componentType);const D=function Bt(r){return r.isBoundToModule}(v)?void 0:this._injector.get(Pc),F=v.create(go.NULL,[],u||v.selector,D),W=F.location.nativeElement,ee=F.injector.get(a,null);return ee?.registerApplication(W),F.onDestroy(()=>{this.detachView(F.hostView),V0(this.components,F),ee?.unregisterApplication(W)}),this._loadComponent(F),F}tick(){if(this._runningTick)throw new Le(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;V0(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(Vd,[]);u.push(...this._bootstrapListeners),u.forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>V0(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Le(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(lt(Eo),lt(eu),lt(ql))},r.\u0275prov=wt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function V0(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}function UI(){return!1}let BI=(()=>{class r{}return r.__NG_ELEMENT_ID__=jI,r})();function jI(r){return function $I(r,i,o){if($o(r)&&!o){const u=mn(r.index,i);return new Xu(u,u)}return 47&r.type?new Xu(i[16],i):null}(be(),S(),16==(16&r))}class NI{constructor(){}supports(i){return np(i)}create(i){return new ZI(i)}}const qI=(r,i)=>i;class ZI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||qI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,h=null;for(;o||u;){const v=!u||o&&o.currentIndex<PI(u,c,h)?o:u,D=PI(v,c,h),x=v.currentIndex;if(v===u)c--,u=u._nextRemoved;else if(o=o._next,null==v.previousIndex)c++;else{h||(h=[]);const F=D-c,W=x-c;if(F!=W){for(let ge=0;ge<F;ge++){const xe=ge<h.length?h[ge]:h[ge]=0,Xe=xe+ge;W<=Xe&&Xe<F&&(h[ge]=xe+1)}h[v.previousIndex]=W-F}}D!==x&&i(v,D,x)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!np(i))throw new Le(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,h,v,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let D=0;D<this.length;D++)h=i[D],v=this._trackByFn(D,h),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,h,v,D)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,v,D),u=!0),o=o._next}else c=0,function um(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[dl()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,D=>{v=this._trackByFn(c,D),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,D,v,c)),Object.is(o.item,D)||this._addIdentityChange(o,D)):(o=this._mismatch(o,D,v,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let h;return null===i?h=this._itTail:(h=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,h,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,h,c)):i=this._addAfter(new KI(o,u),h,c),i}_verifyReinsertion(i,o,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?i=this._reinsertAfter(h,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,h=i._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new OI),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class KI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class YI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class OI{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new YI,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PI(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class kI{constructor(){}supports(i){return i instanceof Map||as(i)}create(){return new QI}}class QI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||as(i)))throw new Le(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const h=c._prev,v=c._next;return h&&(h._next=v),v&&(v._prev=h),c._next=null,c._prev=null,c}const u=new JI(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class JI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FI(){return new Ww([new NI])}let Ww=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||FI()),deps:[[r,new P,new li]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Le(901,!1)}}return r.\u0275prov=wt({token:r,providedIn:"root",factory:FI}),r})();function LI(){return new qw([new kI])}let qw=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||LI()),deps:[[r,new P,new li]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Le(901,!1)}}return r.\u0275prov=wt({token:r,providedIn:"root",factory:LI}),r})();const tD=Mn(null,"core",[]);let nD=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(lt(L0))},r.\u0275mod=Zr({type:r}),r.\u0275inj=Tn({}),r})();function rD(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},433:(It,Re,j)=>{j.d(Re,{Fj:()=>ke,qu:()=>$s,u:()=>Ho,sg:()=>ro,u5:()=>ca,JJ:()=>en,JL:()=>Vt,F:()=>Vi,On:()=>Ur,YN:()=>so,UX:()=>So,EJ:()=>ds,_Y:()=>Rr,Kr:()=>Ts});var g=j(4650),H=j(6895),m=j(8996),de=j(9751),he=j(4742),ye=j(8421),Ce=j(3269),Ie=j(5403),Te=j(3268),oe=j(1810),fe=j(4004);let tt=(()=>{class S{constructor(A,Z){this._renderer=A,this._elementRef=Z,this.onChange=be=>{},this.onTouched=()=>{}}setProperty(A,Z){this._renderer.setProperty(this._elementRef.nativeElement,A,Z)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.Qsj),g.Y36(g.SBq))},S.\u0275dir=g.lG2({type:S}),S})(),He=(()=>{class S extends tt{}return S.\u0275fac=function(){let R;return function(Z){return(R||(R=g.n5z(S)))(Z||S)}}(),S.\u0275dir=g.lG2({type:S,features:[g.qOj]}),S})();const nt=new g.OlP("NgValueAccessor"),qe={provide:nt,useExisting:(0,g.Gpc)(()=>ke),multi:!0},et=new g.OlP("CompositionEventMode");let ke=(()=>{class S extends tt{constructor(A,Z,be){super(A,Z),this._compositionMode=be,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ze(){const S=(0,H.q)()?(0,H.q)().getUserAgent():"";return/android (\d+)/.test(S.toLowerCase())}())}writeValue(A){this.setProperty("value",A??"")}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(et,8))},S.\u0275dir=g.lG2({type:S,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,Z){1&A&&g.NdJ("input",function(Ct){return Z._handleInput(Ct.target.value)})("blur",function(){return Z.onTouched()})("compositionstart",function(){return Z._compositionStart()})("compositionend",function(Ct){return Z._compositionEnd(Ct.target.value)})},features:[g._Bn([qe]),g.qOj]}),S})();const pe=new g.OlP("NgValidators"),Se=new g.OlP("NgAsyncValidators");function ft(S){return null!=S}function yt(S){return(0,g.QGY)(S)?(0,m.D)(S):S}function gn(S){let R={};return S.forEach(A=>{R=null!=A?{...R,...A}:R}),0===Object.keys(R).length?null:R}function Ee(S,R){return R.map(A=>A(S))}function wt(S){return S.map(R=>function Mt(S){return!S.validate}(R)?R:A=>R.validate(A))}function Tn(S){return null!=S?function At(S){if(!S)return null;const R=S.filter(ft);return 0==R.length?null:function(A){return gn(Ee(A,R))}}(wt(S)):null}function hn(S){return null!=S?function vn(S){if(!S)return null;const R=S.filter(ft);return 0==R.length?null:function(A){return function se(...S){const R=(0,Ce.jO)(S),{args:A,keys:Z}=(0,he.D)(S),be=new de.y(Ct=>{const{length:En}=A;if(!En)return void Ct.complete();const rr=new Array(En);let ai=En,Hi=En;for(let Xi=0;Xi<En;Xi++){let Ms=!1;(0,ye.Xf)(A[Xi]).subscribe((0,Ie.x)(Ct,Rs=>{Ms||(Ms=!0,Hi--),rr[Xi]=Rs},()=>ai--,void 0,()=>{(!ai||!Ms)&&(Hi||Ct.next(Z?(0,oe.n)(Z,rr):rr),Ct.complete())}))}});return R?be.pipe((0,Te.Z)(R)):be}(Ee(A,R).map(yt)).pipe((0,fe.U)(gn))}}(wt(S)):null}function Jn(S,R){return null===S?[R]:Array.isArray(S)?[...S,R]:[S,R]}function _n(S){return S._rawValidators}function jt(S){return S._rawAsyncValidators}function Rn(S){return S?Array.isArray(S)?S:[S]:[]}function yr(S,R){return Array.isArray(S)?S.includes(R):S===R}function cr(S,R){const A=Rn(R);return Rn(S).forEach(be=>{yr(A,be)||A.push(be)}),A}function Ln(S,R){return Rn(R).filter(A=>!yr(S,A))}class vr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=Tn(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=hn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,A){return!!this.control&&this.control.hasError(R,A)}getError(R,A){return this.control?this.control.getError(R,A):null}}class ct extends vr{get formDirective(){return null}get path(){return null}}class Wn extends vr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wr{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let en=(()=>{class S extends wr{constructor(A){super(A)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(Wn,2))},S.\u0275dir=g.lG2({type:S,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,Z){2&A&&g.ekj("ng-untouched",Z.isUntouched)("ng-touched",Z.isTouched)("ng-pristine",Z.isPristine)("ng-dirty",Z.isDirty)("ng-valid",Z.isValid)("ng-invalid",Z.isInvalid)("ng-pending",Z.isPending)},features:[g.qOj]}),S})(),Vt=(()=>{class S extends wr{constructor(A){super(A)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(ct,10))},S.\u0275dir=g.lG2({type:S,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,Z){2&A&&g.ekj("ng-untouched",Z.isUntouched)("ng-touched",Z.isTouched)("ng-pristine",Z.isPristine)("ng-dirty",Z.isDirty)("ng-valid",Z.isValid)("ng-invalid",Z.isInvalid)("ng-pending",Z.isPending)("ng-submitted",Z.isSubmitted)},features:[g.qOj]}),S})();const sn="VALID",Vn="INVALID",ce="PENDING",re="DISABLED";function Q(S){return(Fe(S)?S.validators:S)||null}function q(S,R){return(Fe(R)?R.asyncValidators:S)||null}function Fe(S){return null!=S&&!Array.isArray(S)&&"object"==typeof S}function _t(S,R,A){const Z=S.controls;if(!(R?Object.keys(Z):Z).length)throw new g.vHH(1e3,"");if(!Z[A])throw new g.vHH(1001,"")}function le(S,R,A){S._forEachChild((Z,be)=>{if(void 0===A[be])throw new g.vHH(1002,"")})}class ae{constructor(R,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(R),this._assignAsyncValidators(A)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===sn}get invalid(){return this.status===Vn}get pending(){return this.status==ce}get disabled(){return this.status===re}get enabled(){return this.status!==re}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._assignValidators(R)}setAsyncValidators(R){this._assignAsyncValidators(R)}addValidators(R){this.setValidators(cr(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(cr(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(Ln(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(Ln(R,this._rawAsyncValidators))}hasValidator(R){return yr(this._rawValidators,R)}hasAsyncValidator(R){return yr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=ce,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const A=this._parentMarkedDirty(R.onlySelf);this.status=re,this.errors=null,this._forEachChild(Z=>{Z.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:A}),this._onDisabledChange.forEach(Z=>Z(!0))}enable(R={}){const A=this._parentMarkedDirty(R.onlySelf);this.status=sn,this._forEachChild(Z=>{Z.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:A}),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sn||this.status===ce)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?re:sn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=ce,this._hasOwnPendingAsyncValidator=!0;const A=yt(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,A={}){this.errors=R,this._updateControlsErrors(!1!==A.emitEvent)}get(R){let A=R;return null==A||(Array.isArray(A)||(A=A.split(".")),0===A.length)?null:A.reduce((Z,be)=>Z&&Z._find(be),this)}getError(R,A){const Z=A?this.get(A):this;return Z&&Z.errors?Z.errors[R]:null}hasError(R,A){return!!this.getError(R,A)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?re:this.errors?Vn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ce)?ce:this._anyControlsHaveStatus(Vn)?Vn:sn}_anyControlsHaveStatus(R){return this._anyControls(A=>A.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){Fe(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}_assignValidators(R){this._rawValidators=Array.isArray(R)?R.slice():R,this._composedValidatorFn=function J(S){return Array.isArray(S)?Tn(S):S||null}(this._rawValidators)}_assignAsyncValidators(R){this._rawAsyncValidators=Array.isArray(R)?R.slice():R,this._composedAsyncValidatorFn=function we(S){return Array.isArray(S)?hn(S):S||null}(this._rawAsyncValidators)}}class X extends ae{constructor(R,A,Z){super(Q(A),q(Z,A)),this.controls=R,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,A){return this.controls[R]?this.controls[R]:(this.controls[R]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(R,A,Z={}){this.registerControl(R,A),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(R,A={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(R,A,Z={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],A&&this.registerControl(R,A),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,A={}){le(this,0,R),Object.keys(R).forEach(Z=>{_t(this,!0,Z),this.controls[Z].setValue(R[Z],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(R,A={}){null!=R&&(Object.keys(R).forEach(Z=>{const be=this.controls[Z];be&&be.patchValue(R[Z],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(R={},A={}){this._forEachChild((Z,be)=>{Z.reset(R[be],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(R,A,Z)=>(R[Z]=A.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(A,Z)=>!!Z._syncPendingControls()||A);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(A=>{const Z=this.controls[A];Z&&R(Z,A)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[A,Z]of Object.entries(this.controls))if(this.contains(A)&&R(Z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(A,Z,be)=>((Z.enabled||this.disabled)&&(A[be]=Z.value),A))}_reduceChildren(R,A){let Z=R;return this._forEachChild((be,Ct)=>{Z=A(Z,be,Ct)}),Z}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}class at extends X{}const qn=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Xn}),Xn="always";function gi(S,R){return[...R.path,S]}function qr(S,R,A=Xn){us(S,R),R.valueAccessor.writeValue(S.value),(S.disabled||"always"===A)&&R.valueAccessor.setDisabledState?.(S.disabled),function eo(S,R){R.valueAccessor.registerOnChange(A=>{S._pendingValue=A,S._pendingChange=!0,S._pendingDirty=!0,"change"===S.updateOn&&$n(S,R)})}(S,R),function _r(S,R){const A=(Z,be)=>{R.valueAccessor.writeValue(Z),be&&R.viewToModelUpdate(Z)};S.registerOnChange(A),R._registerOnDestroy(()=>{S._unregisterOnChange(A)})}(S,R),function Sn(S,R){R.valueAccessor.registerOnTouched(()=>{S._pendingTouched=!0,"blur"===S.updateOn&&S._pendingChange&&$n(S,R),"submit"!==S.updateOn&&S.markAsTouched()})}(S,R),function wo(S,R){if(R.valueAccessor.setDisabledState){const A=Z=>{R.valueAccessor.setDisabledState(Z)};S.registerOnDisabledChange(A),R._registerOnDestroy(()=>{S._unregisterOnDisabledChange(A)})}}(S,R)}function fr(S,R,A=!0){const Z=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(Z),R.valueAccessor.registerOnTouched(Z)),Is(S,R),S&&(R._invokeOnDestroyCallbacks(),S._registerOnCollectionChange(()=>{}))}function Zr(S,R){S.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(R)})}function us(S,R){const A=_n(S);null!==R.validator?S.setValidators(Jn(A,R.validator)):"function"==typeof A&&S.setValidators([A]);const Z=jt(S);null!==R.asyncValidator?S.setAsyncValidators(Jn(Z,R.asyncValidator)):"function"==typeof Z&&S.setAsyncValidators([Z]);const be=()=>S.updateValueAndValidity();Zr(R._rawValidators,be),Zr(R._rawAsyncValidators,be)}function Is(S,R){let A=!1;if(null!==S){if(null!==R.validator){const be=_n(S);if(Array.isArray(be)&&be.length>0){const Ct=be.filter(En=>En!==R.validator);Ct.length!==be.length&&(A=!0,S.setValidators(Ct))}}if(null!==R.asyncValidator){const be=jt(S);if(Array.isArray(be)&&be.length>0){const Ct=be.filter(En=>En!==R.asyncValidator);Ct.length!==be.length&&(A=!0,S.setAsyncValidators(Ct))}}}const Z=()=>{};return Zr(R._rawValidators,Z),Zr(R._rawAsyncValidators,Z),A}function $n(S,R){S._pendingDirty&&S.markAsDirty(),S.setValue(S._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(S._pendingValue),S._pendingChange=!1}function Zn(S,R){us(S,R)}function ii(S,R){if(!S.hasOwnProperty("model"))return!1;const A=S.model;return!!A.isFirstChange()||!Object.is(R,A.currentValue)}function Di(S,R){S._syncPendingControls(),R.forEach(A=>{const Z=A.control;"submit"===Z.updateOn&&Z._pendingChange&&(A.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}function On(S,R){if(!R)return null;let A,Z,be;return Array.isArray(R),R.forEach(Ct=>{Ct.constructor===ke?A=Ct:function Er(S){return Object.getPrototypeOf(S.constructor)===He}(Ct)?Z=Ct:be=Ct}),be||Z||A||null}const cn={provide:ct,useExisting:(0,g.Gpc)(()=>Vi)},Li=(()=>Promise.resolve())();let Vi=(()=>{class S extends ct{constructor(A,Z,be){super(),this.callSetDisabledState=be,this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new X({},Tn(A),hn(Z))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(A){Li.then(()=>{const Z=this._findContainer(A.path);A.control=Z.registerControl(A.name,A.control),qr(A.control,A,this.callSetDisabledState),A.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(A)})}getControl(A){return this.form.get(A.path)}removeControl(A){Li.then(()=>{const Z=this._findContainer(A.path);Z&&Z.removeControl(A.name),this._directives.delete(A)})}addFormGroup(A){Li.then(()=>{const Z=this._findContainer(A.path),be=new X({});Zn(be,A),Z.registerControl(A.name,be),be.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(A){Li.then(()=>{const Z=this._findContainer(A.path);Z&&Z.removeControl(A.name)})}getFormGroup(A){return this.form.get(A.path)}updateModel(A,Z){Li.then(()=>{this.form.get(A.path).setValue(Z)})}setValue(A){this.control.setValue(A)}onSubmit(A){return this.submitted=!0,Di(this.form,this._directives),this.ngSubmit.emit(A),"dialog"===A?.target?.method}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(A){return A.pop(),A.length?this.form.get(A):this.form}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(pe,10),g.Y36(Se,10),g.Y36(qn,8))},S.\u0275dir=g.lG2({type:S,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(A,Z){1&A&&g.NdJ("submit",function(Ct){return Z.onSubmit(Ct)})("reset",function(){return Z.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([cn]),g.qOj]}),S})();function bi(S,R){const A=S.indexOf(R);A>-1&&S.splice(A,1)}function Ir(S){return"object"==typeof S&&null!==S&&2===Object.keys(S).length&&"value"in S&&"disabled"in S}const tr=class extends ae{constructor(R=null,A,Z){super(Q(A),q(Z,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fe(A)&&(A.nonNullable||A.initialValueIsDefault)&&(this.defaultValue=Ir(R)?R.value:R)}setValue(R,A={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(R,A={}){this.setValue(R,A)}reset(R=this.defaultValue,A={}){this._applyFormState(R),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){bi(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){bi(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Ir(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},to={provide:Wn,useExisting:(0,g.Gpc)(()=>Ur)},cs=(()=>Promise.resolve())();let Ur=(()=>{class S extends Wn{constructor(A,Z,be,Ct,En,rr){super(),this._changeDetectorRef=En,this.callSetDisabledState=rr,this.control=new tr,this._registered=!1,this.update=new g.vpe,this._parent=A,this._setValidators(Z),this._setAsyncValidators(be),this.valueAccessor=On(0,Ct)}ngOnChanges(A){if(this._checkForErrors(),!this._registered||"name"in A){if(this._registered&&(this._checkName(),this.formDirective)){const Z=A.name.previousValue;this.formDirective.removeControl({name:Z,path:this._getPath(Z)})}this._setUpControl()}"isDisabled"in A&&this._updateDisabled(A),ii(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){cs.then(()=>{this.control.setValue(A,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(A){const Z=A.isDisabled.currentValue,be=0!==Z&&(0,g.D6c)(Z);cs.then(()=>{be&&!this.control.disabled?this.control.disable():!be&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(A){return this._parent?gi(A,this._parent):[A]}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(ct,9),g.Y36(pe,10),g.Y36(Se,10),g.Y36(nt,10),g.Y36(g.sBO,8),g.Y36(qn,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([to]),g.qOj,g.TTD]}),S})(),Rr=(()=>{class S{}return S.\u0275fac=function(A){return new(A||S)},S.\u0275dir=g.lG2({type:S,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),S})(),$o=(()=>{class S{}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({}),S})();const Ci=new g.OlP("NgModelWithFormControlWarning"),no={provide:ct,useExisting:(0,g.Gpc)(()=>ro)};let ro=(()=>{class S extends ct{constructor(A,Z,be){super(),this.callSetDisabledState=be,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(A),this._setAsyncValidators(Z)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Is(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const Z=this.form.get(A.path);return qr(Z,A,this.callSetDisabledState),Z.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),Z}getControl(A){return this.form.get(A.path)}removeControl(A){fr(A.control||null,A,!1),function Bo(S,R){const A=S.indexOf(R);A>-1&&S.splice(A,1)}(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,Z){this.form.get(A.path).setValue(Z)}onSubmit(A){return this.submitted=!0,Di(this.form,this.directives),this.ngSubmit.emit(A),"dialog"===A?.target?.method}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const Z=A.control,be=this.form.get(A.path);Z!==be&&(fr(Z||null,A),(S=>S instanceof tr)(be)&&(qr(be,A,this.callSetDisabledState),A.control=be))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const Z=this.form.get(A.path);Zn(Z,A),Z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const Z=this.form.get(A.path);Z&&function Kr(S,R){return Is(S,R)}(Z,A)&&Z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){us(this.form,this),this._oldForm&&Is(this._oldForm,this)}_checkFormPresent(){}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(pe,10),g.Y36(Se,10),g.Y36(qn,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","formGroup",""]],hostBindings:function(A,Z){1&A&&g.NdJ("submit",function(Ct){return Z.onSubmit(Ct)})("reset",function(){return Z.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([no]),g.qOj,g.TTD]}),S})();const ji={provide:Wn,useExisting:(0,g.Gpc)(()=>Ho)};let Ho=(()=>{class S extends Wn{set isDisabled(A){}constructor(A,Z,be,Ct,En){super(),this._ngModelWarningConfig=En,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=A,this._setValidators(Z),this._setAsyncValidators(be),this.valueAccessor=On(0,Ct)}ngOnChanges(A){this._added||this._setUpControl(),ii(A,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}get path(){return gi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return S._ngModelWarningSentOnce=!1,S.\u0275fac=function(A){return new(A||S)(g.Y36(ct,13),g.Y36(pe,10),g.Y36(Se,10),g.Y36(nt,10),g.Y36(Ci,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([ji]),g.qOj,g.TTD]}),S})();const ls={provide:nt,useExisting:(0,g.Gpc)(()=>ds),multi:!0};function si(S,R){return null==S?`${R}`:(R&&"object"==typeof R&&(R="Object"),`${S}: ${R}`.slice(0,50))}let ds=(()=>{class S extends He{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){this.value=A;const be=si(this._getOptionId(A),A);this.setProperty("value",be)}registerOnChange(A){this.onChange=Z=>{this.value=this._getOptionValue(Z),A(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(A){for(const Z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Z),A))return Z;return null}_getOptionValue(A){const Z=function io(S){return S.split(":")[0]}(A);return this._optionMap.has(Z)?this._optionMap.get(Z):A}}return S.\u0275fac=function(){let R;return function(Z){return(R||(R=g.n5z(S)))(Z||S)}}(),S.\u0275dir=g.lG2({type:S,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(A,Z){1&A&&g.NdJ("change",function(Ct){return Z.onChange(Ct.target.value)})("blur",function(){return Z.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([ls]),g.qOj]}),S})(),so=(()=>{class S{constructor(A,Z,be){this._element=A,this._renderer=Z,this._select=be,this._select&&(this.id=this._select._registerOption())}set ngValue(A){null!=this._select&&(this._select._optionMap.set(this.id,A),this._setElementValue(si(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._setElementValue(A),this._select&&this._select.writeValue(this._select.value)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(ds,9))},S.\u0275dir=g.lG2({type:S,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),S})();const Cs={provide:nt,useExisting:(0,g.Gpc)(()=>fs),multi:!0};function Go(S,R){return null==S?`${R}`:("string"==typeof R&&(R=`'${R}'`),R&&"object"==typeof R&&(R="Object"),`${S}: ${R}`.slice(0,50))}let fs=(()=>{class S extends He{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){let Z;if(this.value=A,Array.isArray(A)){const be=A.map(Ct=>this._getOptionId(Ct));Z=(Ct,En)=>{Ct._setSelected(be.indexOf(En.toString())>-1)}}else Z=(be,Ct)=>{be._setSelected(!1)};this._optionMap.forEach(Z)}registerOnChange(A){this.onChange=Z=>{const be=[],Ct=Z.selectedOptions;if(void 0!==Ct){const En=Ct;for(let rr=0;rr<En.length;rr++){const Hi=this._getOptionValue(En[rr].value);be.push(Hi)}}else{const En=Z.options;for(let rr=0;rr<En.length;rr++){const ai=En[rr];if(ai.selected){const Hi=this._getOptionValue(ai.value);be.push(Hi)}}}this.value=be,A(be)}}_registerOption(A){const Z=(this._idCounter++).toString();return this._optionMap.set(Z,A),Z}_getOptionId(A){for(const Z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Z)._value,A))return Z;return null}_getOptionValue(A){const Z=function hs(S){return S.split(":")[0]}(A);return this._optionMap.has(Z)?this._optionMap.get(Z)._value:A}}return S.\u0275fac=function(){let R;return function(Z){return(R||(R=g.n5z(S)))(Z||S)}}(),S.\u0275dir=g.lG2({type:S,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(A,Z){1&A&&g.NdJ("change",function(Ct){return Z.onChange(Ct.target)})("blur",function(){return Z.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([Cs]),g.qOj]}),S})(),Ts=(()=>{class S{constructor(A,Z,be){this._element=A,this._renderer=Z,this._select=be,this._select&&(this.id=this._select._registerOption(this))}set ngValue(A){null!=this._select&&(this._value=A,this._setElementValue(Go(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._select?(this._value=A,this._setElementValue(Go(this.id,A)),this._select.writeValue(this._select.value)):this._setElementValue(A)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}_setSelected(A){this._renderer.setProperty(this._element.nativeElement,"selected",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(fs,9))},S.\u0275dir=g.lG2({type:S,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),S})(),To=(()=>{class S{}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[$o]}),S})();class ur extends ae{constructor(R,A,Z){super(Q(A),q(Z,A)),this.controls=R,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(R){return this.controls[this._adjustIndex(R)]}push(R,A={}){this.controls.push(R),this._registerControl(R),this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}insert(R,A,Z={}){this.controls.splice(R,0,A),this._registerControl(A),this.updateValueAndValidity({emitEvent:Z.emitEvent})}removeAt(R,A={}){let Z=this._adjustIndex(R);Z<0&&(Z=0),this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),this.controls.splice(Z,1),this.updateValueAndValidity({emitEvent:A.emitEvent})}setControl(R,A,Z={}){let be=this._adjustIndex(R);be<0&&(be=0),this.controls[be]&&this.controls[be]._registerOnCollectionChange(()=>{}),this.controls.splice(be,1),A&&(this.controls.splice(be,0,A),this._registerControl(A)),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(R,A={}){le(this,0,R),R.forEach((Z,be)=>{_t(this,!1,be),this.at(be).setValue(Z,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(R,A={}){null!=R&&(R.forEach((Z,be)=>{this.at(be)&&this.at(be).patchValue(Z,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(R=[],A={}){this._forEachChild((Z,be)=>{Z.reset(R[be],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this.controls.map(R=>R.getRawValue())}clear(R={}){this.controls.length<1||(this._forEachChild(A=>A._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:R.emitEvent}))}_adjustIndex(R){return R<0?R+this.length:R}_syncPendingControls(){let R=this.controls.reduce((A,Z)=>!!Z._syncPendingControls()||A,!1);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){this.controls.forEach((A,Z)=>{R(A,Z)})}_updateValue(){this.value=this.controls.filter(R=>R.enabled||this.disabled).map(R=>R.value)}_anyControls(R){return this.controls.some(A=>A.enabled&&R(A))}_setUpControls(){this._forEachChild(R=>this._registerControl(R))}_allControlsDisabled(){for(const R of this.controls)if(R.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(R){R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)}_find(R){return this.at(R)??null}}function aa(S){return!!S&&(void 0!==S.asyncValidators||void 0!==S.validators||void 0!==S.updateOn)}let $s=(()=>{class S{constructor(){this.useNonNullable=!1}get nonNullable(){const A=new S;return A.useNonNullable=!0,A}group(A,Z=null){const be=this._reduceControls(A);let Ct={};return aa(Z)?Ct=Z:null!==Z&&(Ct.validators=Z.validator,Ct.asyncValidators=Z.asyncValidator),new X(be,Ct)}record(A,Z=null){const be=this._reduceControls(A);return new at(be,Z)}control(A,Z,be){let Ct={};return this.useNonNullable?(aa(Z)?Ct=Z:(Ct.validators=Z,Ct.asyncValidators=be),new tr(A,{...Ct,nonNullable:!0})):new tr(A,Z,be)}array(A,Z,be){const Ct=A.map(En=>this._createControl(En));return new ur(Ct,Z,be)}_reduceControls(A){const Z={};return Object.keys(A).forEach(be=>{Z[be]=this._createControl(A[be])}),Z}_createControl(A){return A instanceof tr||A instanceof ae?A:Array.isArray(A)?this.control(A[0],A.length>1?A[1]:null,A.length>2?A[2]:null):this.control(A)}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),ca=(()=>{class S{static withConfig(A){return{ngModule:S,providers:[{provide:qn,useValue:A.callSetDisabledState??Xn}]}}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[To]}),S})(),So=(()=>{class S{static withConfig(A){return{ngModule:S,providers:[{provide:Ci,useValue:A.warnOnNgModelWithFormControl??"always"},{provide:qn,useValue:A.callSetDisabledState??Xn}]}}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[To]}),S})()},1481:(It,Re,j)=>{j.d(Re,{Dx:()=>dr,b2:()=>vr,q6:()=>Rn});var g=j(6895),H=j(4650);class m extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class de extends m{static makeCurrent(){(0,g.HT)(new de)}onAndCancel(ae,X,me){return ae.addEventListener(X,me,!1),()=>{ae.removeEventListener(X,me,!1)}}dispatchEvent(ae,X){ae.dispatchEvent(X)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,X){return(X=X||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,X){return"window"===X?window:"document"===X?ae:"body"===X?ae.body:null}getBaseHref(ae){const X=function ye(){return he=he||document.querySelector("base"),he?he.getAttribute("href"):null}();return null==X?null:function Ie(le){Ce=Ce||document.createElement("a"),Ce.setAttribute("href",le);const ae=Ce.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(X)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,g.Mx)(document.cookie,ae)}}let Ce,he=null;const Te=new H.OlP("TRANSITION_ID"),se=[{provide:H.ip1,useFactory:function oe(le,ae,X){return()=>{X.get(H.CZH).donePromise.then(()=>{const me=(0,g.q)(),Ke=ae.querySelectorAll(`style[ng-transition="${le}"]`);for(let at=0;at<Ke.length;at++)me.remove(Ke[at])})}},deps:[Te,g.K0,H.zs3],multi:!0}];let tt=(()=>{class le{build(){return new XMLHttpRequest}}return le.\u0275fac=function(X){return new(X||le)},le.\u0275prov=H.Yz7({token:le,factory:le.\u0275fac}),le})();const He=new H.OlP("EventManagerPlugins");let nt=(()=>{class le{constructor(X,me){this._zone=me,this._eventNameToPlugin=new Map,X.forEach(Ke=>Ke.manager=this),this._plugins=X.slice().reverse()}addEventListener(X,me,Ke){return this._findPluginFor(me).addEventListener(X,me,Ke)}addGlobalEventListener(X,me,Ke){return this._findPluginFor(me).addGlobalEventListener(X,me,Ke)}getZone(){return this._zone}_findPluginFor(X){const me=this._eventNameToPlugin.get(X);if(me)return me;const Ke=this._plugins;for(let at=0;at<Ke.length;at++){const Qt=Ke[at];if(Qt.supports(X))return this._eventNameToPlugin.set(X,Qt),Qt}throw new Error(`No event manager plugin found for event ${X}`)}}return le.\u0275fac=function(X){return new(X||le)(H.LFG(He),H.LFG(H.R0b))},le.\u0275prov=H.Yz7({token:le,factory:le.\u0275fac}),le})();class Dt{constructor(ae){this._doc=ae}addGlobalEventListener(ae,X,me){const Ke=(0,g.q)().getGlobalEventTarget(this._doc,ae);if(!Ke)throw new Error(`Unsupported event target ${Ke} for event ${X}`);return this.addEventListener(Ke,X,me)}}let Le=(()=>{class le{constructor(){this._stylesSet=new Set}addStyles(X){const me=new Set;X.forEach(Ke=>{this._stylesSet.has(Ke)||(this._stylesSet.add(Ke),me.add(Ke))}),this.onStylesAdded(me)}onStylesAdded(X){}getAllStyles(){return Array.from(this._stylesSet)}}return le.\u0275fac=function(X){return new(X||le)},le.\u0275prov=H.Yz7({token:le,factory:le.\u0275fac}),le})(),qe=(()=>{class le extends Le{constructor(X){super(),this._doc=X,this._hostNodes=new Map,this._hostNodes.set(X.head,[])}_addStylesToHost(X,me,Ke){X.forEach(at=>{const Qt=this._doc.createElement("style");Qt.textContent=at,Ke.push(me.appendChild(Qt))})}addHost(X){const me=[];this._addStylesToHost(this._stylesSet,X,me),this._hostNodes.set(X,me)}removeHost(X){const me=this._hostNodes.get(X);me&&me.forEach(Ze),this._hostNodes.delete(X)}onStylesAdded(X){this._hostNodes.forEach((me,Ke)=>{this._addStylesToHost(X,Ke,me)})}ngOnDestroy(){this._hostNodes.forEach(X=>X.forEach(Ze))}}return le.\u0275fac=function(X){return new(X||le)(H.LFG(g.K0))},le.\u0275prov=H.Yz7({token:le,factory:le.\u0275fac}),le})();function Ze(le){(0,g.q)().remove(le)}const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ke=/%COMP%/g;function pt(le,ae){return ae.flat(100).map(X=>X.replace(ke,le))}function ot(le){return ae=>{if("__ngUnwrap__"===ae)return le;!1===le(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let gt=(()=>{class le{constructor(X,me,Ke){this.eventManager=X,this.sharedStylesHost=me,this.appId=Ke,this.rendererByCompId=new Map,this.defaultRenderer=new mt(X)}createRenderer(X,me){if(!X||!me)return this.defaultRenderer;switch(me.encapsulation){case H.ifc.Emulated:{let Ke=this.rendererByCompId.get(me.id);return Ke||(Ke=new We(this.eventManager,this.sharedStylesHost,me,this.appId),this.rendererByCompId.set(me.id,Ke)),Ke.applyToHost(X),Ke}case H.ifc.ShadowDom:return new rt(this.eventManager,this.sharedStylesHost,X,me);default:if(!this.rendererByCompId.has(me.id)){const Ke=pt(me.id,me.styles);this.sharedStylesHost.addStyles(Ke),this.rendererByCompId.set(me.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return le.\u0275fac=function(X){return new(X||le)(H.LFG(nt),H.LFG(qe),H.LFG(H.AFp))},le.\u0275prov=H.Yz7({token:le,factory:le.\u0275fac}),le})();class mt{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,X){return X?document.createElementNS(et[X]||X,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,X){(Ve(ae)?ae.content:ae).appendChild(X)}insertBefore(ae,X,me){ae&&(Ve(ae)?ae.content:ae).insertBefore(X,me)}removeChild(ae,X){ae&&ae.removeChild(X)}selectRootElement(ae,X){let me="string"==typeof ae?document.querySelector(ae):ae;if(!me)throw new Error(`The selector "${ae}" did not match any elements`);return X||(me.textContent=""),me}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,X,me,Ke){if(Ke){X=Ke+":"+X;const at=et[Ke];at?ae.setAttributeNS(at,X,me):ae.setAttribute(X,me)}else ae.setAttribute(X,me)}removeAttribute(ae,X,me){if(me){const Ke=et[me];Ke?ae.removeAttributeNS(Ke,X):ae.removeAttribute(`${me}:${X}`)}else ae.removeAttribute(X)}addClass(ae,X){ae.classList.add(X)}removeClass(ae,X){ae.classList.remove(X)}setStyle(ae,X,me,Ke){Ke&(H.JOm.DashCase|H.JOm.Important)?ae.style.setProperty(X,me,Ke&H.JOm.Important?"important":""):ae.style[X]=me}removeStyle(ae,X,me){me&H.JOm.DashCase?ae.style.removeProperty(X):ae.style[X]=""}setProperty(ae,X,me){ae[X]=me}setValue(ae,X){ae.nodeValue=X}listen(ae,X,me){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,X,ot(me)):this.eventManager.addEventListener(ae,X,ot(me))}}function Ve(le){return"TEMPLATE"===le.tagName&&void 0!==le.content}class We extends mt{constructor(ae,X,me,Ke){super(ae),this.component=me;const at=pt(Ke+"-"+me.id,me.styles);X.addStyles(at),this.contentAttr=function Se(le){return"_ngcontent-%COMP%".replace(ke,le)}(Ke+"-"+me.id),this.hostAttr=function $e(le){return"_nghost-%COMP%".replace(ke,le)}(Ke+"-"+me.id)}applyToHost(ae){super.setAttribute(ae,this.hostAttr,"")}createElement(ae,X){const me=super.createElement(ae,X);return super.setAttribute(me,this.contentAttr,""),me}}class rt extends mt{constructor(ae,X,me,Ke){super(ae),this.sharedStylesHost=X,this.hostEl=me,this.shadowRoot=me.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const at=pt(Ke.id,Ke.styles);for(let Qt=0;Qt<at.length;Qt++){const qn=document.createElement("style");qn.textContent=at[Qt],this.shadowRoot.appendChild(qn)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ae,X){return super.appendChild(this.nodeOrShadowRoot(ae),X)}insertBefore(ae,X,me){return super.insertBefore(this.nodeOrShadowRoot(ae),X,me)}removeChild(ae,X){return super.removeChild(this.nodeOrShadowRoot(ae),X)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}}let it=(()=>{class le extends Dt{constructor(X){super(X)}supports(X){return!0}addEventListener(X,me,Ke){return X.addEventListener(me,Ke,!1),()=>this.removeEventListener(X,me,Ke)}removeEventListener(X,me,Ke){return X.removeEventListener(me,Ke)}}return le.\u0275fac=function(X){return new(X||le)(H.LFG(g.K0))},le.\u0275prov=H.Yz7({token:le,factory:le.\u0275fac}),le})();const ft=["alt","control","meta","shift"],yt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gn={alt:le=>le.altKey,control:le=>le.ctrlKey,meta:le=>le.metaKey,shift:le=>le.shiftKey};let Ee=(()=>{class le extends Dt{constructor(X){super(X)}supports(X){return null!=le.parseEventName(X)}addEventListener(X,me,Ke){const at=le.parseEventName(me),Qt=le.eventCallback(at.fullKey,Ke,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(X,at.domEventName,Qt))}static parseEventName(X){const me=X.toLowerCase().split("."),Ke=me.shift();if(0===me.length||"keydown"!==Ke&&"keyup"!==Ke)return null;const at=le._normalizeKey(me.pop());let Qt="",qn=me.indexOf("code");if(qn>-1&&(me.splice(qn,1),Qt="code."),ft.forEach(gi=>{const qr=me.indexOf(gi);qr>-1&&(me.splice(qr,1),Qt+=gi+".")}),Qt+=at,0!=me.length||0===at.length)return null;const Xn={};return Xn.domEventName=Ke,Xn.fullKey=Qt,Xn}static matchEventFullKeyCode(X,me){let Ke=yt[X.key]||X.key,at="";return me.indexOf("code.")>-1&&(Ke=X.code,at="code."),!(null==Ke||!Ke)&&(Ke=Ke.toLowerCase()," "===Ke?Ke="space":"."===Ke&&(Ke="dot"),ft.forEach(Qt=>{Qt!==Ke&&(0,gn[Qt])(X)&&(at+=Qt+".")}),at+=Ke,at===me)}static eventCallback(X,me,Ke){return at=>{le.matchEventFullKeyCode(at,X)&&Ke.runGuarded(()=>me(at))}}static _normalizeKey(X){return"esc"===X?"escape":X}}return le.\u0275fac=function(X){return new(X||le)(H.LFG(g.K0))},le.\u0275prov=H.Yz7({token:le,factory:le.\u0275fac}),le})();const Rn=(0,H.eFA)(H._c5,"browser",[{provide:H.Lbi,useValue:g.bD},{provide:H.g9A,useValue:function hn(){de.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function _n(){return(0,H.RDi)(document),document},deps:[]}]),yr=new H.OlP(""),cr=[{provide:H.rWj,useClass:class fe{addToWindow(ae){H.dqk.getAngularTestability=(me,Ke=!0)=>{const at=ae.findTestabilityInTree(me,Ke);if(null==at)throw new Error("Could not find testability for element.");return at},H.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),H.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),H.dqk.frameworkStabilizers||(H.dqk.frameworkStabilizers=[]),H.dqk.frameworkStabilizers.push(me=>{const Ke=H.dqk.getAllAngularTestabilities();let at=Ke.length,Qt=!1;const qn=function(Xn){Qt=Qt||Xn,at--,0==at&&me(Qt)};Ke.forEach(function(Xn){Xn.whenStable(qn)})})}findTestabilityInTree(ae,X,me){return null==X?null:ae.getTestability(X)??(me?(0,g.q)().isShadowRoot(X)?this.findTestabilityInTree(ae,X.host,!0):this.findTestabilityInTree(ae,X.parentElement,!0):null)}},deps:[]},{provide:H.lri,useClass:H.dDg,deps:[H.R0b,H.eoX,H.rWj]},{provide:H.dDg,useClass:H.dDg,deps:[H.R0b,H.eoX,H.rWj]}],Ln=[{provide:H.zSh,useValue:"root"},{provide:H.qLn,useFactory:function Jn(){return new H.qLn},deps:[]},{provide:He,useClass:it,multi:!0,deps:[g.K0,H.R0b,H.Lbi]},{provide:He,useClass:Ee,multi:!0,deps:[g.K0]},{provide:gt,useClass:gt,deps:[nt,qe,H.AFp]},{provide:H.FYo,useExisting:gt},{provide:Le,useExisting:qe},{provide:qe,useClass:qe,deps:[g.K0]},{provide:nt,useClass:nt,deps:[He,H.R0b]},{provide:g.JF,useClass:tt,deps:[]},[]];let vr=(()=>{class le{constructor(X){}static withServerTransition(X){return{ngModule:le,providers:[{provide:H.AFp,useValue:X.appId},{provide:Te,useExisting:H.AFp},se]}}}return le.\u0275fac=function(X){return new(X||le)(H.LFG(yr,12))},le.\u0275mod=H.oAB({type:le}),le.\u0275inj=H.cJS({providers:[...Ln,...cr],imports:[g.ez,H.hGG]}),le})(),dr=(()=>{class le{constructor(X){this._doc=X}getTitle(){return this._doc.title}setTitle(X){this._doc.title=X||""}}return le.\u0275fac=function(X){return new(X||le)(H.LFG(g.K0))},le.\u0275prov=H.Yz7({token:le,factory:function(X){let me=null;return me=X?new X:function lr(){return new dr((0,H.LFG)(g.K0))}(),me},providedIn:"root"}),le})();typeof window<"u"&&window},2435:(It,Re,j)=>{j.d(Re,{gz:()=>Ti,F0:()=>ir,rH:()=>Aa,Od:()=>Mi,Bz:()=>Ri,lC:()=>gs});var g=j(4650),H=j(8996),m=j(9646),de=j(1135),he=j(6805),ye=j(9751),Ce=j(4742),Ie=j(4671),Te=j(3268),oe=j(3269),se=j(1810),fe=j(5403),tt=j(9672);function He(..._){const E=(0,oe.yG)(_),y=(0,oe.jO)(_),{args:C,keys:k}=(0,Ce.D)(_);if(0===C.length)return(0,H.D)([],E);const $=new ye.y(function nt(_,E,y=Ie.y){return C=>{Dt(E,()=>{const{length:k}=_,$=new Array(k);let K=k,ve=k;for(let ze=0;ze<k;ze++)Dt(E,()=>{const xt=(0,H.D)(_[ze],E);let Nt=!1;xt.subscribe((0,fe.x)(C,kn=>{$[ze]=kn,Nt||(Nt=!0,ve--),ve||C.next(y($.slice()))},()=>{--K||C.complete()}))},C)},C)}}(C,E,k?K=>(0,se.n)(k,K):Ie.y));return y?$.pipe((0,Te.Z)(y)):$}function Dt(_,E,y){_?(0,tt.f)(y,_,E):E()}var Le=j(7272),qe=j(8421);function Ze(_){return new ye.y(E=>{(0,qe.Xf)(_()).subscribe(E)})}var et=j(9635),ke=j(576);function Qe(_,E){const y=(0,ke.m)(_)?_:()=>_,C=k=>k.error(y());return new ye.y(E?k=>E.schedule(C,0,k):C)}var je=j(515),ut=j(727),pe=j(4482);function Se(){return(0,pe.e)((_,E)=>{let y=null;_._refCount++;const C=(0,fe.x)(E,void 0,void 0,void 0,()=>{if(!_||_._refCount<=0||0<--_._refCount)return void(y=null);const k=_._connection,$=y;y=null,k&&(!$||k===$)&&k.unsubscribe(),E.unsubscribe()});_.subscribe(C),C.closed||(y=_.connect())})}class $e extends ye.y{constructor(E,y){super(),this.source=E,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,pe.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,E?.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new ut.w0;const y=this.getSubject();E.add(this.source.subscribe((0,fe.x)(y,void 0,()=>{this._teardown(),y.complete()},C=>{this._teardown(),y.error(C)},()=>this._teardown()))),E.closed&&(this._connection=null,E=ut.w0.EMPTY)}return E}refCount(){return Se()(this)}}var pt=j(7579),ot=j(6895),gt=j(4004),mt=j(3900),Ae=j(5698),Pe=j(8675),Ve=j(9300),We=j(5577),rt=j(590);function it(_,E){return(0,ke.m)(E)?(0,We.z)(_,E,1):(0,We.z)(_,1)}var ft=j(8505);function yt(_){return(0,pe.e)((E,y)=>{let $,C=null,k=!1;C=E.subscribe((0,fe.x)(y,void 0,void 0,K=>{$=(0,qe.Xf)(_(K,yt(_)(E))),C?(C.unsubscribe(),C=null,$.subscribe(y)):k=!0})),k&&(C.unsubscribe(),C=null,$.subscribe(y))})}var gn=j(5026);function Ee(_){return _<=0?()=>je.E:(0,pe.e)((E,y)=>{let C=[];E.subscribe((0,fe.x)(y,k=>{C.push(k),_<C.length&&C.shift()},()=>{for(const k of C)y.next(k);y.complete()},void 0,()=>{C=null}))})}var Mt=j(8068),wt=j(6590);function At(_,E){const y=arguments.length>=2;return C=>C.pipe(_?(0,Ve.h)((k,$)=>_(k,$,C)):Ie.y,Ee(1),y?(0,wt.d)(E):(0,Mt.T)(()=>new he.K))}function hn(_){return(0,pe.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(_)}})}var Jn=j(8189),_n=j(1481);const jt="primary",Rn=Symbol("RouteTitle");class yr{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function cr(_){return new yr(_)}function Ln(_,E,y){const C=y.path.split("/");if(C.length>_.length||"full"===y.pathMatch&&(E.hasChildren()||C.length<_.length))return null;const k={};for(let $=0;$<C.length;$++){const K=C[$],ve=_[$];if(K.startsWith(":"))k[K.substring(1)]=ve;else if(K!==ve.path)return null}return{consumed:_.slice(0,C.length),posParams:k}}function ct(_,E){const y=_?Object.keys(_):void 0,C=E?Object.keys(E):void 0;if(!y||!C||y.length!=C.length)return!1;let k;for(let $=0;$<y.length;$++)if(k=y[$],!Wn(_[k],E[k]))return!1;return!0}function Wn(_,E){if(Array.isArray(_)&&Array.isArray(E)){if(_.length!==E.length)return!1;const y=[..._].sort(),C=[...E].sort();return y.every((k,$)=>C[$]===k)}return _===E}function wr(_){return Array.prototype.concat.apply([],_)}function lr(_){return _.length>0?_[_.length-1]:null}function en(_,E){for(const y in _)_.hasOwnProperty(y)&&E(_[y],y)}function Vt(_){return(0,g.CqO)(_)?_:(0,g.QGY)(_)?(0,H.D)(Promise.resolve(_)):(0,m.of)(_)}const Ot=!1,Ht={exact:function Tr(_,E,y){if(!Ge(_.segments,E.segments)||!ri(_.segments,E.segments,y)||_.numberOfChildren!==E.numberOfChildren)return!1;for(const C in E.children)if(!_.children[C]||!Tr(_.children[C],E.children[C],y))return!1;return!0},subset:ni},Nn={exact:function ar(_,E){return ct(_,E)},subset:function hr(_,E){return Object.keys(E).length<=Object.keys(_).length&&Object.keys(E).every(y=>Wn(_[y],E[y]))},ignored:()=>!0};function fn(_,E,y){return Ht[y.paths](_.root,E.root,y.matrixParams)&&Nn[y.queryParams](_.queryParams,E.queryParams)&&!("exact"===y.fragment&&_.fragment!==E.fragment)}function ni(_,E,y){return rn(_,E,E.segments,y)}function rn(_,E,y,C){if(_.segments.length>y.length){const k=_.segments.slice(0,y.length);return!(!Ge(k,y)||E.hasChildren()||!ri(k,y,C))}if(_.segments.length===y.length){if(!Ge(_.segments,y)||!ri(_.segments,y,C))return!1;for(const k in E.children)if(!_.children[k]||!ni(_.children[k],E.children[k],C))return!1;return!0}{const k=y.slice(0,_.segments.length),$=y.slice(_.segments.length);return!!(Ge(_.segments,k)&&ri(_.segments,k,C)&&_.children[jt])&&rn(_.children[jt],E,$,C)}}function ri(_,E,y){return E.every((C,k)=>Nn[y](_[k].parameters,C.parameters))}class Xt{constructor(E=new Gt([],{}),y={},C=null){this.root=E,this.queryParams=y,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return sn.serialize(this)}}class Gt{constructor(E,y){this.segments=E,this.children=y,this.parent=null,en(y,(C,k)=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vn(this)}}class jn{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=cr(this.parameters)),this._parameterMap}toString(){return _t(this)}}function Ge(_,E){return _.length===E.length&&_.every((y,C)=>y.path===E[C].path)}let Ut=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(){return new $t},providedIn:"root"}),_})();class $t{parse(E){const y=new Xn(E);return new Xt(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${ce(E.root,!0)}`,C=function ae(_){const E=Object.keys(_).map(y=>{const C=_[y];return Array.isArray(C)?C.map(k=>`${Q(y)}=${Q(k)}`).join("&"):`${Q(y)}=${Q(C)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${C}${"string"==typeof E.fragment?`#${function J(_){return encodeURI(_)}(E.fragment)}`:""}`}}const sn=new $t;function Vn(_){return _.segments.map(E=>_t(E)).join("/")}function ce(_,E){if(!_.hasChildren())return Vn(_);if(E){const y=_.children[jt]?ce(_.children[jt],!1):"",C=[];return en(_.children,(k,$)=>{$!==jt&&C.push(`${$}:${ce(k,!1)}`)}),C.length>0?`${y}(${C.join("//")})`:y}{const y=function bt(_,E){let y=[];return en(_.children,(C,k)=>{k===jt&&(y=y.concat(E(C,k)))}),en(_.children,(C,k)=>{k!==jt&&(y=y.concat(E(C,k)))}),y}(_,(C,k)=>k===jt?[ce(_.children[jt],!1)]:[`${k}:${ce(C,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[jt]?`${Vn(_)}/${y[0]}`:`${Vn(_)}/(${y.join("//")})`}}function re(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Q(_){return re(_).replace(/%3B/gi,";")}function q(_){return re(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function we(_){return decodeURIComponent(_)}function Fe(_){return we(_.replace(/\+/g,"%20"))}function _t(_){return`${q(_.path)}${function le(_){return Object.keys(_).map(E=>`;${q(E)}=${q(_[E])}`).join("")}(_.parameters)}`}const X=/^[^\/()?;=#]+/;function me(_){const E=_.match(X);return E?E[0]:""}const Ke=/^[^=?&#]+/,Qt=/^[^&#]+/;class Xn{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(C[jt]=new Gt(E,y)),C}parseSegment(){const E=me(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new g.vHH(4009,Ot);return this.capture(E),new jn(we(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=me(this.remaining);if(!y)return;this.capture(y);let C="";if(this.consumeOptional("=")){const k=me(this.remaining);k&&(C=k,this.capture(C))}E[we(y)]=we(C)}parseQueryParam(E){const y=function at(_){const E=_.match(Ke);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let C="";if(this.consumeOptional("=")){const K=function qn(_){const E=_.match(Qt);return E?E[0]:""}(this.remaining);K&&(C=K,this.capture(C))}const k=Fe(y),$=Fe(C);if(E.hasOwnProperty(k)){let K=E[k];Array.isArray(K)||(K=[K],E[k]=K),K.push($)}else E[k]=$}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=me(this.remaining),k=this.remaining[C.length];if("/"!==k&&")"!==k&&";"!==k)throw new g.vHH(4010,Ot);let $;C.indexOf(":")>-1?($=C.slice(0,C.indexOf(":")),this.capture($),this.capture(":")):E&&($=jt);const K=this.parseChildren();y[$]=1===Object.keys(K).length?K[jt]:new Gt([],K),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new g.vHH(4011,Ot)}}function gi(_){return _.segments.length>0?new Gt([],{[jt]:_}):_}function qr(_){const E={};for(const C of Object.keys(_.children)){const $=qr(_.children[C]);($.segments.length>0||$.hasChildren())&&(E[C]=$)}return function fr(_){if(1===_.numberOfChildren&&_.children[jt]){const E=_.children[jt];return new Gt(_.segments.concat(E.segments),E.children)}return _}(new Gt(_.segments,E))}function Zr(_){return _ instanceof Xt}function Sn(_,E,y,C,k){if(0===y.length)return Zn(E.root,E.root,E.root,C,k);const $=function Tt(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new mi(!0,0,_);let E=0,y=!1;const C=_.reduce((k,$,K)=>{if("object"==typeof $&&null!=$){if($.outlets){const ve={};return en($.outlets,(ze,xt)=>{ve[xt]="string"==typeof ze?ze.split("/"):ze}),[...k,{outlets:ve}]}if($.segmentPath)return[...k,$.segmentPath]}return"string"!=typeof $?[...k,$]:0===K?($.split("/").forEach((ve,ze)=>{0==ze&&"."===ve||(0==ze&&""===ve?y=!0:".."===ve?E++:""!=ve&&k.push(ve))}),k):[...k,$]},[]);return new mi(y,E,C)}(y);return $.toRoot()?Zn(E.root,E.root,new Gt([],{}),C,k):function K(ze){const xt=function Vr(_,E,y,C){if(_.isAbsolute)return new qt(E.root,!0,0);if(-1===C)return new qt(y,y===E.root,0);return function ii(_,E,y){let C=_,k=E,$=y;for(;$>k;){if($-=k,C=C.parent,!C)throw new g.vHH(4005,!1);k=C.segments.length}return new qt(C,!1,k-$)}(y,C+($n(_.commands[0])?0:1),_.numberOfDoubleDots)}($,E,_.snapshot?._urlSegment,ze),Nt=xt.processChildren?On(xt.segmentGroup,xt.index,$.commands):Di(xt.segmentGroup,xt.index,$.commands);return Zn(E.root,xt.segmentGroup,Nt,C,k)}(_.snapshot?._lastPathIndex)}function $n(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function _r(_){return"object"==typeof _&&null!=_&&_.outlets}function Zn(_,E,y,C,k){let K,$={};C&&en(C,(ze,xt)=>{$[xt]=Array.isArray(ze)?ze.map(Nt=>`${Nt}`):`${ze}`}),K=_===E?y:Kr(_,E,y);const ve=gi(qr(K));return new Xt(ve,$,k)}function Kr(_,E,y){const C={};return en(_.children,(k,$)=>{C[$]=k===E?y:Kr(k,E,y)}),new Gt(_.segments,C)}class mi{constructor(E,y,C){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=C,E&&C.length>0&&$n(C[0]))throw new g.vHH(4003,!1);const k=C.find(_r);if(k&&k!==lr(C))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qt{constructor(E,y,C){this.segmentGroup=E,this.processChildren=y,this.index=C}}function Di(_,E,y){if(_||(_=new Gt([],{})),0===_.segments.length&&_.hasChildren())return On(_,E,y);const C=function Bo(_,E,y){let C=0,k=E;const $={match:!1,pathIndex:0,commandIndex:0};for(;k<_.segments.length;){if(C>=y.length)return $;const K=_.segments[k],ve=y[C];if(_r(ve))break;const ze=`${ve}`,xt=C<y.length-1?y[C+1]:null;if(k>0&&void 0===ze)break;if(ze&&xt&&"object"==typeof xt&&void 0===xt.outlets){if(!Vi(ze,xt,K))return $;C+=2}else{if(!Vi(ze,{},K))return $;C++}k++}return{match:!0,pathIndex:k,commandIndex:C}}(_,E,y),k=y.slice(C.commandIndex);if(C.match&&C.pathIndex<_.segments.length){const $=new Gt(_.segments.slice(0,C.pathIndex),{});return $.children[jt]=new Gt(_.segments.slice(C.pathIndex),_.children),On($,0,k)}return C.match&&0===k.length?new Gt(_.segments,{}):C.match&&!_.hasChildren()?Fi(_,E,y):C.match?On(_,0,k):Fi(_,E,y)}function On(_,E,y){if(0===y.length)return new Gt(_.segments,{});{const C=function Er(_){return _r(_[0])?_[0].outlets:{[jt]:_}}(y),k={};return!C[jt]&&_.children[jt]&&1===_.numberOfChildren&&0===_.children[jt].segments.length?On(_.children[jt],E,y):(en(C,($,K)=>{"string"==typeof $&&($=[$]),null!==$&&(k[K]=Di(_.children[K],E,$))}),en(_.children,($,K)=>{void 0===C[K]&&(k[K]=$)}),new Gt(_.segments,k))}}function Fi(_,E,y){const C=_.segments.slice(0,E);let k=0;for(;k<y.length;){const $=y[k];if(_r($)){const ze=cn($.outlets);return new Gt(C,ze)}if(0===k&&$n(y[0])){C.push(new jn(_.segments[E].path,Li(y[0]))),k++;continue}const K=_r($)?$.outlets[jt]:`${$}`,ve=k<y.length-1?y[k+1]:null;K&&ve&&$n(ve)?(C.push(new jn(K,Li(ve))),k+=2):(C.push(new jn(K,{})),k++)}return new Gt(C,{})}function cn(_){const E={};return en(_,(y,C)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[C]=Fi(new Gt([],{}),0,y))}),E}function Li(_){const E={};return en(_,(y,C)=>E[C]=`${y}`),E}function Vi(_,E,y){return _==y.path&&ct(E,y.parameters)}const bi="imperative";class Ir{constructor(E,y){this.id=E,this.url=y}}class tr extends Ir{constructor(E,y,C="imperative",k=null){super(E,y),this.type=0,this.navigationTrigger=C,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ds extends Ir{constructor(E,y,C){super(E,y),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ui extends Ir{constructor(E,y,C,k){super(E,y),this.reason=C,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mr extends Ir{constructor(E,y,C,k){super(E,y),this.reason=C,this.code=k,this.type=16}}class Bi extends Ir{constructor(E,y,C,k){super(E,y),this.error=C,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wa extends Ir{constructor(E,y,C,k){super(E,y),this.urlAfterRedirects=C,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nr extends Ir{constructor(E,y,C,k){super(E,y),this.urlAfterRedirects=C,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends Ir{constructor(E,y,C,k,$){super(E,y),this.urlAfterRedirects=C,this.state=k,this.shouldActivate=$,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jo extends Ir{constructor(E,y,C,k){super(E,y),this.urlAfterRedirects=C,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Us extends Ir{constructor(E,y,C,k){super(E,y),this.urlAfterRedirects=C,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class to{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cs{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ur{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rr{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ou{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yi{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yr{constructor(E,y,C){this.routerEvent=E,this.position=y,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ia=(()=>{class _{createUrlTree(y,C,k,$,K,ve){return Sn(y||C.root,k,$,K,ve)}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac}),_})(),Au=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(E){return Ia.\u0275fac(E)},providedIn:"root"}),_})();class Io{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=Ci(E,this._root);return y?y.children.map(C=>C.value):[]}firstChild(E){const y=Ci(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=Bs(E,this._root);return y.length<2?[]:y[y.length-2].children.map(k=>k.value).filter(k=>k!==E)}pathFromRoot(E){return Bs(E,this._root).map(y=>y.value)}}function Ci(_,E){if(_===E.value)return E;for(const y of E.children){const C=Ci(_,y);if(C)return C}return null}function Bs(_,E){if(_===E.value)return[E];for(const y of E.children){const C=Bs(_,y);if(C.length)return C.unshift(E),C}return[]}class vi{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function no(_){const E={};return _&&_.children.forEach(y=>E[y.value.outlet]=y),E}class ro extends Io{constructor(E,y){super(E),this.snapshot=y,ls(this,E)}toString(){return this.snapshot.toString()}}function Da(_,E){const y=function oa(_,E){const K=new ji([],{},{},"",{},jt,E,null,_.root,-1,{});return new Ho("",new vi(K,[]))}(_,E),C=new de.X([new jn("",{})]),k=new de.X({}),$=new de.X({}),K=new de.X({}),ve=new de.X(""),ze=new Ti(C,k,K,ve,$,jt,E,y.root);return ze.snapshot=y.root,new ro(new vi(ze,[]),y)}class Ti{constructor(E,y,C,k,$,K,ve,ze){this.url=E,this.params=y,this.queryParams=C,this.fragment=k,this.data=$,this.outlet=K,this.component=ve,this.title=this.data?.pipe((0,gt.U)(xt=>xt[Rn]))??(0,m.of)(void 0),this._futureSnapshot=ze}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(E=>cr(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(E=>cr(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Do(_,E="emptyOnly"){const y=_.pathFromRoot;let C=0;if("always"!==E)for(C=y.length-1;C>=1;){const k=y[C],$=y[C-1];if(k.routeConfig&&""===k.routeConfig.path)C--;else{if($.component)break;C--}}return function Si(_){return _.reduce((E,y)=>({params:{...E.params,...y.params},data:{...E.data,...y.data},resolve:{...y.data,...E.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(C))}class ji{get title(){return this.data?.[Rn]}constructor(E,y,C,k,$,K,ve,ze,xt,Nt,kn){this.url=E,this.params=y,this.queryParams=C,this.fragment=k,this.data=$,this.outlet=K,this.component=ve,this.routeConfig=ze,this._urlSegment=xt,this._lastPathIndex=Nt,this._resolve=kn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ho extends Io{constructor(E,y){super(y),this.url=E,ls(this,y)}toString(){return si(this._root)}}function ls(_,E){E.value._routerState=_,E.children.forEach(y=>ls(_,y))}function si(_){const E=_.children.length>0?` { ${_.children.map(si).join(", ")} } `:"";return`${_.value}${E}`}function io(_){if(_.snapshot){const E=_.snapshot,y=_._futureSnapshot;_.snapshot=y,ct(E.queryParams,y.queryParams)||_.queryParams.next(y.queryParams),E.fragment!==y.fragment&&_.fragment.next(y.fragment),ct(E.params,y.params)||_.params.next(y.params),function vr(_,E){if(_.length!==E.length)return!1;for(let y=0;y<_.length;++y)if(!ct(_[y],E[y]))return!1;return!0}(E.url,y.url)||_.url.next(y.url),ct(E.data,y.data)||_.data.next(y.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function ds(_,E){const y=ct(_.params,E.params)&&function lt(_,E){return Ge(_,E)&&_.every((y,C)=>ct(y.parameters,E[C].parameters))}(_.url,E.url);return y&&!(!_.parent!=!E.parent)&&(!_.parent||ds(_.parent,E.parent))}function Cs(_,E,y){if(y&&_.shouldReuseRoute(E.value,y.value.snapshot)){const C=y.value;C._futureSnapshot=E.value;const k=function Go(_,E,y){return E.children.map(C=>{for(const k of y.children)if(_.shouldReuseRoute(C.value,k.value.snapshot))return Cs(_,C,k);return Cs(_,C)})}(_,E,y);return new vi(C,k)}{if(_.shouldAttach(E.value)){const $=_.retrieve(E.value);if(null!==$){const K=$.route;return K.value._futureSnapshot=E.value,K.children=E.children.map(ve=>Cs(_,ve)),K}}const C=function hs(_){return new Ti(new de.X(_.url),new de.X(_.params),new de.X(_.queryParams),new de.X(_.fragment),new de.X(_.data),_.outlet,_.component,_)}(E.value),k=E.children.map($=>Cs(_,$));return new vi(C,k)}}const js="ngNavigationCancelingError";function fs(_,E){const{redirectTo:y,navigationBehaviorOptions:C}=Zr(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,k=Ts(!1,0,E);return k.url=y,k.navigationBehaviorOptions=C,k}function Ts(_,E,y){const C=new Error("NavigationCancelingError: "+(_||""));return C[js]=!0,C.cancellationCode=E,y&&(C.url=y),C}function bo(_){return ps(_)&&Zr(_.url)}function ps(_){return _&&_[js]}class Ai{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Br,this.attachRef=null}}let Br=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(y,C){const k=this.getOrCreateContext(y);k.outlet=C,this.contexts.set(y,k)}onChildOutletDestroyed(y){const C=this.getContext(y);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let C=this.getContext(y);return C||(C=new Ai,this.contexts.set(y,C)),C}getContext(y){return this.contexts.get(y)||null}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Rt=!1;let gs=(()=>{class _{constructor(){this.activated=null,this._activatedRoute=null,this.name=jt,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(Br),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb)}ngOnChanges(y){if(y.name){const{firstChange:C,previousValue:k}=y.name;if(C)return;this.isTrackedInParentContexts(k)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(k)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(y){return this.parentContexts.getContext(y)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const y=this.parentContexts.getContext(this.name);y?.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Rt);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Rt);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Rt);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,C){this.activated=y,this._activatedRoute=C,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,C){if(this.isActivated)throw new g.vHH(4013,Rt);this._activatedRoute=y;const k=this.location,K=y.snapshot.component,ve=this.parentContexts.getOrCreateContext(this.name).children,ze=new Zt(y,ve,k.injector);if(C&&function Or(_){return!!_.resolveComponentFactory}(C)){const xt=C.resolveComponentFactory(K);this.activated=k.createComponent(xt,k.length,ze)}else this.activated=k.createComponent(K,{index:k.length,injector:ze,environmentInjector:C??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275dir=g.lG2({type:_,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]}),_})();class Zt{constructor(E,y,C){this.route=E,this.childContexts=y,this.parent=C}get(E,y){return E===Ti?this.route:E===Br?this.childContexts:this.parent.get(E,y)}}let Yn=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275cmp=g.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(y,C){1&y&&g._UZ(0,"router-outlet")},dependencies:[gs],encapsulation:2}),_})();function Ji(_,E){return _.providers&&!_._injector&&(_._injector=(0,g.MMx)(_.providers,E,`Route: ${_.path}`)),_._injector??E}function oi(_){const E=_.children&&_.children.map(oi),y=E?{..._,children:E}:{..._};return!y.component&&!y.loadComponent&&(E||y.loadChildren)&&y.outlet&&y.outlet!==jt&&(y.component=Yn),y}function Pr(_){return _.outlet||jt}function ba(_,E){const y=_.filter(C=>Pr(C)===E);return y.push(..._.filter(C=>Pr(C)!==E)),y}function $r(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let E=_.parent;E;E=E.parent){const y=E.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class ur{constructor(E,y,C,k){this.routeReuseStrategy=E,this.futureState=y,this.currState=C,this.forwardEvent=k}activate(E){const y=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,C,E),io(this.futureState.root),this.activateChildRoutes(y,C,E)}deactivateChildRoutes(E,y,C){const k=no(y);E.children.forEach($=>{const K=$.value.outlet;this.deactivateRoutes($,k[K],C),delete k[K]}),en(k,($,K)=>{this.deactivateRouteAndItsChildren($,C)})}deactivateRoutes(E,y,C){const k=E.value,$=y?y.value:null;if(k===$)if(k.component){const K=C.getContext(k.outlet);K&&this.deactivateChildRoutes(E,y,K.children)}else this.deactivateChildRoutes(E,y,C);else $&&this.deactivateRouteAndItsChildren(y,C)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const C=y.getContext(E.value.outlet),k=C&&E.value.component?C.children:y,$=no(E);for(const K of Object.keys($))this.deactivateRouteAndItsChildren($[K],k);if(C&&C.outlet){const K=C.outlet.detach(),ve=C.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:K,route:E,contexts:ve})}}deactivateRouteAndOutlet(E,y){const C=y.getContext(E.value.outlet),k=C&&E.value.component?C.children:y,$=no(E);for(const K of Object.keys($))this.deactivateRouteAndItsChildren($[K],k);C&&C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated(),C.attachRef=null,C.resolver=null,C.route=null)}activateChildRoutes(E,y,C){const k=no(y);E.children.forEach($=>{this.activateRoutes($,k[$.value.outlet],C),this.forwardEvent(new yi($.value.snapshot))}),E.children.length&&this.forwardEvent(new Rr(E.value.snapshot))}activateRoutes(E,y,C){const k=E.value,$=y?y.value:null;if(io(k),k===$)if(k.component){const K=C.getOrCreateContext(k.outlet);this.activateChildRoutes(E,y,K.children)}else this.activateChildRoutes(E,y,C);else if(k.component){const K=C.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const ve=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),K.children.onOutletReAttached(ve.contexts),K.attachRef=ve.componentRef,K.route=ve.route.value,K.outlet&&K.outlet.attach(ve.componentRef,ve.route.value),io(ve.route.value),this.activateChildRoutes(E,null,K.children)}else{const ve=$r(k.snapshot),ze=ve?.get(g._Vd)??null;K.attachRef=null,K.route=k,K.resolver=ze,K.injector=ve,K.outlet&&K.outlet.activateWith(k,K.injector),this.activateChildRoutes(E,null,K.children)}}else this.activateChildRoutes(E,null,C)}}class tn{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class $i{constructor(E,y){this.component=E,this.route=y}}function aa(_,E,y){const C=_._root;return kr(C,E?E._root:null,y,[C.value])}function xs(_,E){const y=Symbol(),C=E.get(_,y);return C===y?"function"!=typeof _||(0,g.Z0I)(_)?E.get(_):_:C}function kr(_,E,y,C,k={canDeactivateChecks:[],canActivateChecks:[]}){const $=no(E);return _.children.forEach(K=>{(function ua(_,E,y,C,k={canDeactivateChecks:[],canActivateChecks:[]}){const $=_.value,K=E?E.value:null,ve=y?y.getContext(_.value.outlet):null;if(K&&$.routeConfig===K.routeConfig){const ze=function ca(_,E,y){if("function"==typeof y)return y(_,E);switch(y){case"pathParamsChange":return!Ge(_.url,E.url);case"pathParamsOrQueryParamsChange":return!Ge(_.url,E.url)||!ct(_.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ds(_,E)||!ct(_.queryParams,E.queryParams);default:return!ds(_,E)}}(K,$,$.routeConfig.runGuardsAndResolvers);ze?k.canActivateChecks.push(new tn(C)):($.data=K.data,$._resolvedData=K._resolvedData),kr(_,E,$.component?ve?ve.children:null:y,C,k),ze&&ve&&ve.outlet&&ve.outlet.isActivated&&k.canDeactivateChecks.push(new $i(ve.outlet.component,K))}else K&&So(E,ve,k),k.canActivateChecks.push(new tn(C)),kr(_,null,$.component?ve?ve.children:null:y,C,k)})(K,$[K.value.outlet],y,C.concat([K.value]),k),delete $[K.value.outlet]}),en($,(K,ve)=>So(K,y.getContext(ve),k)),k}function So(_,E,y){const C=no(_),k=_.value;en(C,($,K)=>{So($,k.component?E?E.children.getContext(K):null:E,y)}),y.canDeactivateChecks.push(new $i(k.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,k))}function S(_){return"function"==typeof _}function Hi(_){return _ instanceof he.K||"EmptyError"===_?.name}const Xi=Symbol("INITIAL_VALUE");function Ms(){return(0,mt.w)(_=>He(_.map(E=>E.pipe((0,Ae.q)(1),(0,Pe.O)(Xi)))).pipe((0,gt.U)(E=>{for(const y of E)if(!0!==y){if(y===Xi)return Xi;if(!1===y||y instanceof Xt)return y}return!0}),(0,Ve.h)(E=>E!==Xi),(0,Ae.q)(1)))}function Ca(_){return(0,et.z)((0,ft.b)(E=>{if(Zr(E))throw fs(0,E)}),(0,gt.U)(E=>!0===E))}const oo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ua(_,E,y,C,k){const $=ao(_,E,y);return $.matched?function Gs(_,E,y,C){const k=E.canMatch;if(!k||0===k.length)return(0,m.of)(!0);const $=k.map(K=>{const ve=xs(K,_);return Vt(function En(_){return _&&S(_.canMatch)}(ve)?ve.canMatch(E,y):_.runInContext(()=>ve(E,y)))});return(0,m.of)($).pipe(Ms(),Ca())}(C=Ji(E,C),E,y).pipe((0,gt.U)(K=>!0===K?$:{...oo})):(0,m.of)($)}function ao(_,E,y){if(""===E.path)return"full"===E.pathMatch&&(_.hasChildren()||y.length>0)?{...oo}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const k=(E.matcher||Ln)(y,_,E);if(!k)return{...oo};const $={};en(k.posParams,(ve,ze)=>{$[ze]=ve.path});const K=k.consumed.length>0?{...$,...k.consumed[k.consumed.length-1].parameters}:$;return{matched:!0,consumedSegments:k.consumed,remainingSegments:y.slice(k.consumed.length),parameters:K,positionalParamSegments:k.posParams??{}}}function Ao(_,E,y,C){if(y.length>0&&function uu(_,E,y){return y.some(C=>Ta(_,E,C)&&Pr(C)!==jt)}(_,y,C)){const $=new Gt(E,function qo(_,E,y,C){const k={};k[jt]=C,C._sourceSegment=_,C._segmentIndexShift=E.length;for(const $ of y)if(""===$.path&&Pr($)!==jt){const K=new Gt([],{});K._sourceSegment=_,K._segmentIndexShift=E.length,k[Pr($)]=K}return k}(_,E,C,new Gt(y,_.children)));return $._sourceSegment=_,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:[]}}if(0===y.length&&function xu(_,E,y){return y.some(C=>Ta(_,E,C))}(_,y,C)){const $=new Gt(_.segments,function Ba(_,E,y,C,k){const $={};for(const K of C)if(Ta(_,y,K)&&!k[Pr(K)]){const ve=new Gt([],{});ve._sourceSegment=_,ve._segmentIndexShift=E.length,$[Pr(K)]=ve}return{...k,...$}}(_,E,y,C,_.children));return $._sourceSegment=_,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:y}}const k=new Gt(_.segments,_.children);return k._sourceSegment=_,k._segmentIndexShift=E.length,{segmentGroup:k,slicedSegments:y}}function Ta(_,E,y){return(!(_.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function ja(_,E,y,C){return!!(Pr(_)===C||C!==jt&&Ta(E,y,_))&&("**"===_.path||ao(E,_,y).matched)}function cu(_,E,y){return 0===E.length&&!_.children[y]}const $a=!1;class xo{constructor(E){this.segmentGroup=E||null}}class ui{constructor(E){this.urlTree=E}}function Gi(_){return Qe(new xo(_))}function Un(_){return Qe(new ui(_))}class Jr{constructor(E,y,C,k,$){this.injector=E,this.configLoader=y,this.urlSerializer=C,this.urlTree=k,this.config=$,this.allowRedirects=!0}apply(){const E=Ao(this.urlTree.root,[],[],this.config).segmentGroup,y=new Gt(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,y,jt).pipe((0,gt.U)($=>this.createUrlTree(qr($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yt($=>{if($ instanceof ui)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof xo?this.noMatchError($):$}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,jt).pipe((0,gt.U)(k=>this.createUrlTree(qr(k),E.queryParams,E.fragment))).pipe(yt(k=>{throw k instanceof xo?this.noMatchError(k):k}))}noMatchError(E){return new g.vHH(4002,$a)}createUrlTree(E,y,C){const k=gi(E);return new Xt(k,y,C)}expandSegmentGroup(E,y,C,k){return 0===C.segments.length&&C.hasChildren()?this.expandChildren(E,y,C).pipe((0,gt.U)($=>new Gt([],$))):this.expandSegment(E,C,y,C.segments,k,!0)}expandChildren(E,y,C){const k=[];for(const $ of Object.keys(C.children))"primary"===$?k.unshift($):k.push($);return(0,H.D)(k).pipe(it($=>{const K=C.children[$],ve=ba(y,$);return this.expandSegmentGroup(E,ve,K,$).pipe((0,gt.U)(ze=>({segment:ze,outlet:$})))}),(0,gn.R)(($,K)=>($[K.outlet]=K.segment,$),{}),At())}expandSegment(E,y,C,k,$,K){return(0,H.D)(C).pipe(it(ve=>this.expandSegmentAgainstRoute(E,y,C,ve,k,$,K).pipe(yt(xt=>{if(xt instanceof xo)return(0,m.of)(null);throw xt}))),(0,rt.P)(ve=>!!ve),yt((ve,ze)=>{if(Hi(ve))return cu(y,k,$)?(0,m.of)(new Gt([],{})):Gi(y);throw ve}))}expandSegmentAgainstRoute(E,y,C,k,$,K,ve){return ja(k,y,$,K)?void 0===k.redirectTo?this.matchSegmentAgainstRoute(E,y,k,$,K):ve&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,C,k,$,K):Gi(y):Gi(y)}expandSegmentAgainstRouteUsingRedirect(E,y,C,k,$,K){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,C,k,K):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,C,k,$,K)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,C,k){const $=this.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?Un($):this.lineralizeSegments(C,$).pipe((0,We.z)(K=>{const ve=new Gt(K,{});return this.expandSegment(E,ve,y,K,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,C,k,$,K){const{matched:ve,consumedSegments:ze,remainingSegments:xt,positionalParamSegments:Nt}=ao(y,k,$);if(!ve)return Gi(y);const kn=this.applyRedirectCommands(ze,k.redirectTo,Nt);return k.redirectTo.startsWith("/")?Un(kn):this.lineralizeSegments(k,kn).pipe((0,We.z)(Lr=>this.expandSegment(E,y,C,Lr.concat(xt),K,!1)))}matchSegmentAgainstRoute(E,y,C,k,$){return"**"===C.path?(E=Ji(C,E),C.loadChildren?(C._loadedRoutes?(0,m.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):this.configLoader.loadChildren(E,C)).pipe((0,gt.U)(ve=>(C._loadedRoutes=ve.routes,C._loadedInjector=ve.injector,new Gt(k,{})))):(0,m.of)(new Gt(k,{}))):Ua(y,C,k,E).pipe((0,mt.w)(({matched:K,consumedSegments:ve,remainingSegments:ze})=>K?this.getChildConfig(E=C._injector??E,C,k).pipe((0,We.z)(Nt=>{const kn=Nt.injector??E,Lr=Nt.routes,{segmentGroup:vs,slicedSegments:li}=Ao(y,ve,ze,Lr),M=new Gt(vs.segments,vs.children);if(0===li.length&&M.hasChildren())return this.expandChildren(kn,Lr,M).pipe((0,gt.U)(_e=>new Gt(ve,_e)));if(0===Lr.length&&0===li.length)return(0,m.of)(new Gt(ve,{}));const P=Pr(C)===$;return this.expandSegment(kn,M,Lr,li,P?jt:$,!0).pipe((0,gt.U)(ne=>new Gt(ve.concat(ne.segments),ne.children)))})):Gi(y)))}getChildConfig(E,y,C){return y.children?(0,m.of)({routes:y.children,injector:E}):y.loadChildren?void 0!==y._loadedRoutes?(0,m.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function Wo(_,E,y,C){const k=E.canLoad;if(void 0===k||0===k.length)return(0,m.of)(!0);const $=k.map(K=>{const ve=xs(K,_);return Vt(function A(_){return _&&S(_.canLoad)}(ve)?ve.canLoad(E,y):_.runInContext(()=>ve(E,y)))});return(0,m.of)($).pipe(Ms(),Ca())}(E,y,C).pipe((0,We.z)(k=>k?this.configLoader.loadChildren(E,y).pipe((0,ft.b)($=>{y._loadedRoutes=$.routes,y._loadedInjector=$.injector})):function Ha(_){return Qe(Ts($a,3))}())):(0,m.of)({routes:[],injector:E})}lineralizeSegments(E,y){let C=[],k=y.root;for(;;){if(C=C.concat(k.segments),0===k.numberOfChildren)return(0,m.of)(C);if(k.numberOfChildren>1||!k.children[jt])return Qe(new g.vHH(4e3,$a));k=k.children[jt]}}applyRedirectCommands(E,y,C){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),E,C)}applyRedirectCreateUrlTree(E,y,C,k){const $=this.createSegmentGroup(E,y.root,C,k);return new Xt($,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const C={};return en(E,(k,$)=>{if("string"==typeof k&&k.startsWith(":")){const ve=k.substring(1);C[$]=y[ve]}else C[$]=k}),C}createSegmentGroup(E,y,C,k){const $=this.createSegments(E,y.segments,C,k);let K={};return en(y.children,(ve,ze)=>{K[ze]=this.createSegmentGroup(E,ve,C,k)}),new Gt($,K)}createSegments(E,y,C,k){return y.map($=>$.path.startsWith(":")?this.findPosParam(E,$,k):this.findOrReturn($,C))}findPosParam(E,y,C){const k=C[y.path.substring(1)];if(!k)throw new g.vHH(4001,$a);return k}findOrReturn(E,y){let C=0;for(const k of y){if(k.path===E.path)return y.splice(C),k;C++}return E}}class ha{}class V{constructor(E,y,C,k,$,K,ve){this.injector=E,this.rootComponentType=y,this.config=C,this.urlTree=k,this.url=$,this.paramsInheritanceStrategy=K,this.urlSerializer=ve}recognize(){const E=Ao(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,jt).pipe((0,gt.U)(y=>{if(null===y)return null;const C=new ji([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),k=new vi(C,y),$=new Ho(this.url,k);return this.inheritParamsAndData($._root),$}))}inheritParamsAndData(E){const y=E.value,C=Do(y,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),E.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(E,y,C,k){return 0===C.segments.length&&C.hasChildren()?this.processChildren(E,y,C):this.processSegment(E,y,C,C.segments,k)}processChildren(E,y,C){return(0,H.D)(Object.keys(C.children)).pipe(it(k=>{const $=C.children[k],K=ba(y,k);return this.processSegmentGroup(E,K,$,k)}),(0,gn.R)((k,$)=>k&&$?(k.push(...$),k):null),function Tn(_,E=!1){return(0,pe.e)((y,C)=>{let k=0;y.subscribe((0,fe.x)(C,$=>{const K=_($,k++);(K||E)&&C.next($),!K&&C.complete()}))})}(k=>null!==k),(0,wt.d)(null),At(),(0,gt.U)(k=>{if(null===k)return null;const $=Ne(k);return function N(_){_.sort((E,y)=>E.value.outlet===jt?-1:y.value.outlet===jt?1:E.value.outlet.localeCompare(y.value.outlet))}($),$}))}processSegment(E,y,C,k,$){return(0,H.D)(y).pipe(it(K=>this.processSegmentAgainstRoute(K._injector??E,K,C,k,$)),(0,rt.P)(K=>!!K),yt(K=>{if(Hi(K))return cu(C,k,$)?(0,m.of)([]):(0,m.of)(null);throw K}))}processSegmentAgainstRoute(E,y,C,k,$){if(y.redirectTo||!ja(y,C,k,$))return(0,m.of)(null);let K;if("**"===y.path){const ve=k.length>0?lr(k).parameters:{},ze=wn(C)+k.length,xt=new ji(k,ve,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pn(y),Pr(y),y.component??y._loadedComponent??null,y,Ft(C),ze,ln(y));K=(0,m.of)({snapshot:xt,consumedSegments:[],remainingSegments:[]})}else K=Ua(C,y,k,E).pipe((0,gt.U)(({matched:ve,consumedSegments:ze,remainingSegments:xt,parameters:Nt})=>{if(!ve)return null;const kn=wn(C)+ze.length;return{snapshot:new ji(ze,Nt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pn(y),Pr(y),y.component??y._loadedComponent??null,y,Ft(C),kn,ln(y)),consumedSegments:ze,remainingSegments:xt}}));return K.pipe((0,mt.w)(ve=>{if(null===ve)return(0,m.of)(null);const{snapshot:ze,consumedSegments:xt,remainingSegments:Nt}=ve;E=y._injector??E;const kn=y._loadedInjector??E,Lr=function z(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(y),{segmentGroup:vs,slicedSegments:li}=Ao(C,xt,Nt,Lr.filter(P=>void 0===P.redirectTo));if(0===li.length&&vs.hasChildren())return this.processChildren(kn,Lr,vs).pipe((0,gt.U)(P=>null===P?null:[new vi(ze,P)]));if(0===Lr.length&&0===li.length)return(0,m.of)([new vi(ze,[])]);const M=Pr(y)===$;return this.processSegment(kn,Lr,vs,li,M?jt:$).pipe((0,gt.U)(P=>null===P?null:[new vi(ze,P)]))}))}}function ie(_){const E=_.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function Ne(_){const E=[],y=new Set;for(const C of _){if(!ie(C)){E.push(C);continue}const k=E.find($=>C.value.routeConfig===$.value.routeConfig);void 0!==k?(k.children.push(...C.children),y.add(k)):E.push(C)}for(const C of y){const k=Ne(C.children);E.push(new vi(C.value,k))}return E.filter(C=>!y.has(C))}function Ft(_){let E=_;for(;E._sourceSegment;)E=E._sourceSegment;return E}function wn(_){let E=_,y=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift??0;return y-1}function Pn(_){return _.data||{}}function ln(_){return _.resolve||{}}function qi(_){return"string"==typeof _.title||null===_.title}function Mo(_){return(0,mt.w)(E=>{const y=_(E);return y?(0,H.D)(y).pipe((0,gt.U)(()=>E)):(0,m.of)(E)})}const Ps=new g.OlP("ROUTES");let Zo=(()=>{class _{constructor(y,C){this.injector=y,this.compiler=C,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,m.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const C=Vt(y.loadComponent()).pipe((0,gt.U)(pa),(0,ft.b)($=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=$}),hn(()=>{this.componentLoaders.delete(y)})),k=new $e(C,()=>new pt.x).pipe(Se());return this.componentLoaders.set(y,k),k}loadChildren(y,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,m.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const $=this.loadModuleFactoryOrRoutes(C.loadChildren).pipe((0,gt.U)(ve=>{this.onLoadEndListener&&this.onLoadEndListener(C);let ze,xt,Nt=!1;Array.isArray(ve)?xt=ve:(ze=ve.create(y).injector,xt=wr(ze.get(Ps,[],g.XFs.Self|g.XFs.Optional)));return{routes:xt.map(oi),injector:ze}}),hn(()=>{this.childrenLoaders.delete(C)})),K=new $e($,()=>new pt.x).pipe(Se());return this.childrenLoaders.set(C,K),K}loadModuleFactoryOrRoutes(y){return Vt(y()).pipe((0,gt.U)(pa),(0,We.z)(k=>k instanceof g.YKP||Array.isArray(k)?(0,m.of)(k):(0,H.D)(this.compiler.compileModuleAsync(k))))}}return _.\u0275fac=function(y){return new(y||_)(g.LFG(g.zs3),g.LFG(g.Sil))},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();function pa(_){return function ts(_){return _&&"object"==typeof _&&"default"in _}(_)?_.default:_}let uo=(()=>{class _{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new pt.x,this.configLoader=(0,g.f3M)(Zo),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(Ut),this.rootContexts=(0,g.f3M)(Br),this.navigationId=0,this.afterPreactivation=()=>(0,m.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=k=>this.events.next(new cs(k)),this.configLoader.onLoadStartListener=k=>this.events.next(new to(k))}complete(){this.transitions?.complete()}handleNavigationRequest(y){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,...y,id:C})}setupNavigations(y){return this.transitions=new de.X({id:0,targetPageId:0,currentUrlTree:y.currentUrlTree,currentRawUrl:y.currentUrlTree,extractedUrl:y.urlHandlingStrategy.extract(y.currentUrlTree),urlAfterRedirects:y.urlHandlingStrategy.extract(y.currentUrlTree),rawUrl:y.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bi,restoredState:null,currentSnapshot:y.routerState.snapshot,targetSnapshot:null,currentRouterState:y.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ve.h)(C=>0!==C.id),(0,gt.U)(C=>({...C,extractedUrl:y.urlHandlingStrategy.extract(C.rawUrl)})),(0,mt.w)(C=>{let k=!1,$=!1;return(0,m.of)(C).pipe((0,ft.b)(K=>{this.currentNavigation={id:K.id,initialUrl:K.rawUrl,extractedUrl:K.extractedUrl,trigger:K.source,extras:K.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,mt.w)(K=>{const ve=y.browserUrlTree.toString(),ze=!y.navigated||K.extractedUrl.toString()!==ve||ve!==y.currentUrlTree.toString();if(!ze&&"reload"!==(K.extras.onSameUrlNavigation??y.onSameUrlNavigation)){const Nt="";return this.events.next(new Mr(K.id,y.serializeUrl(C.rawUrl),Nt,0)),y.rawUrlTree=K.rawUrl,K.resolve(null),je.E}if(y.urlHandlingStrategy.shouldProcessUrl(K.rawUrl))return ga(K.source)&&(y.browserUrlTree=K.extractedUrl),(0,m.of)(K).pipe((0,mt.w)(Nt=>{const kn=this.transitions?.getValue();return this.events.next(new tr(Nt.id,this.urlSerializer.serialize(Nt.extractedUrl),Nt.source,Nt.restoredState)),kn!==this.transitions?.getValue()?je.E:Promise.resolve(Nt)}),function Ga(_,E,y,C){return(0,mt.w)(k=>function An(_,E,y,C,k){return new Jr(_,E,y,C,k).apply()}(_,E,y,k.extractedUrl,C).pipe((0,gt.U)($=>({...k,urlAfterRedirects:$}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,y.config),(0,ft.b)(Nt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Nt.urlAfterRedirects},C.urlAfterRedirects=Nt.urlAfterRedirects}),function Fr(_,E,y,C,k){return(0,We.z)($=>function T(_,E,y,C,k,$,K="emptyOnly"){return new V(_,E,y,C,k,K,$).recognize().pipe((0,mt.w)(ve=>null===ve?function fa(_){return new ye.y(E=>E.error(_))}(new ha):(0,m.of)(ve)))}(_,E,y,$.urlAfterRedirects,C.serialize($.urlAfterRedirects),C,k).pipe((0,gt.U)(K=>({...$,targetSnapshot:K}))))}(this.environmentInjector,this.rootComponentType,y.config,this.urlSerializer,y.paramsInheritanceStrategy),(0,ft.b)(Nt=>{if(C.targetSnapshot=Nt.targetSnapshot,"eager"===y.urlUpdateStrategy){if(!Nt.extras.skipLocationChange){const Lr=y.urlHandlingStrategy.merge(Nt.urlAfterRedirects,Nt.rawUrl);y.setBrowserUrl(Lr,Nt)}y.browserUrlTree=Nt.urlAfterRedirects}const kn=new wa(Nt.id,this.urlSerializer.serialize(Nt.extractedUrl),this.urlSerializer.serialize(Nt.urlAfterRedirects),Nt.targetSnapshot);this.events.next(kn)}));if(ze&&y.urlHandlingStrategy.shouldProcessUrl(y.rawUrlTree)){const{id:Nt,extractedUrl:kn,source:Lr,restoredState:vs,extras:li}=K,M=new tr(Nt,this.urlSerializer.serialize(kn),Lr,vs);this.events.next(M);const P=Da(kn,this.rootComponentType).snapshot;return C={...K,targetSnapshot:P,urlAfterRedirects:kn,extras:{...li,skipLocationChange:!1,replaceUrl:!1}},(0,m.of)(C)}{const Nt="";return this.events.next(new Mr(K.id,y.serializeUrl(C.extractedUrl),Nt,1)),y.rawUrlTree=K.rawUrl,K.resolve(null),je.E}}),(0,ft.b)(K=>{const ve=new nr(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(K.urlAfterRedirects),K.targetSnapshot);this.events.next(ve)}),(0,gt.U)(K=>C={...K,guards:aa(K.targetSnapshot,K.currentSnapshot,this.rootContexts)}),function Rs(_,E){return(0,We.z)(y=>{const{targetSnapshot:C,currentSnapshot:k,guards:{canActivateChecks:$,canDeactivateChecks:K}}=y;return 0===K.length&&0===$.length?(0,m.of)({...y,guardsResult:!0}):function Qr(_,E,y,C){return(0,H.D)(_).pipe((0,We.z)(k=>function zo(_,E,y,C,k){const $=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,m.of)(!0);const K=$.map(ve=>{const ze=$r(E)??k,xt=xs(ve,ze);return Vt(function Ct(_){return _&&S(_.canDeactivate)}(xt)?xt.canDeactivate(_,E,y,C):ze.runInContext(()=>xt(_,E,y,C))).pipe((0,rt.P)())});return(0,m.of)(K).pipe(Ms())}(k.component,k.route,y,E,C)),(0,rt.P)(k=>!0!==k,!0))}(K,C,k,_).pipe((0,We.z)(ve=>ve&&function R(_){return"boolean"==typeof _}(ve)?function Ei(_,E,y,C){return(0,H.D)(E).pipe(it(k=>(0,Le.z)(function Hs(_,E){return null!==_&&E&&E(new Ur(_)),(0,m.of)(!0)}(k.route.parent,C),function Ns(_,E){return null!==_&&E&&E(new ou(_)),(0,m.of)(!0)}(k.route,C),function au(_,E,y){const C=E[E.length-1],$=E.slice(0,E.length-1).reverse().map(K=>function $s(_){const E=_.routeConfig?_.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:_,guards:E}:null}(K)).filter(K=>null!==K).map(K=>Ze(()=>{const ve=K.guards.map(ze=>{const xt=$r(K.node)??y,Nt=xs(ze,xt);return Vt(function be(_){return _&&S(_.canActivateChild)}(Nt)?Nt.canActivateChild(C,_):xt.runInContext(()=>Nt(C,_))).pipe((0,rt.P)())});return(0,m.of)(ve).pipe(Ms())}));return(0,m.of)($).pipe(Ms())}(_,k.path,y),function es(_,E,y){const C=E.routeConfig?E.routeConfig.canActivate:null;if(!C||0===C.length)return(0,m.of)(!0);const k=C.map($=>Ze(()=>{const K=$r(E)??y,ve=xs($,K);return Vt(function Z(_){return _&&S(_.canActivate)}(ve)?ve.canActivate(E,_):K.runInContext(()=>ve(E,_))).pipe((0,rt.P)())}));return(0,m.of)(k).pipe(Ms())}(_,k.route,y))),(0,rt.P)(k=>!0!==k,!0))}(C,$,_,E):(0,m.of)(ve)),(0,gt.U)(ve=>({...y,guardsResult:ve})))})}(this.environmentInjector,K=>this.events.next(K)),(0,ft.b)(K=>{if(C.guardsResult=K.guardsResult,Zr(K.guardsResult))throw fs(0,K.guardsResult);const ve=new Sr(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(K.urlAfterRedirects),K.targetSnapshot,!!K.guardsResult);this.events.next(ve)}),(0,Ve.h)(K=>!!K.guardsResult||(y.restoreHistory(K),this.cancelNavigationTransition(K,"",3),!1)),Mo(K=>{if(K.guards.canActivateChecks.length)return(0,m.of)(K).pipe((0,ft.b)(ve=>{const ze=new jo(ve.id,this.urlSerializer.serialize(ve.extractedUrl),this.urlSerializer.serialize(ve.urlAfterRedirects),ve.targetSnapshot);this.events.next(ze)}),(0,mt.w)(ve=>{let ze=!1;return(0,m.of)(ve).pipe(function nn(_,E){return(0,We.z)(y=>{const{targetSnapshot:C,guards:{canActivateChecks:k}}=y;if(!k.length)return(0,m.of)(y);let $=0;return(0,H.D)(k).pipe(it(K=>function gr(_,E,y,C){const k=_.routeConfig,$=_._resolve;return void 0!==k?.title&&!qi(k)&&($[Rn]=k.title),function zi(_,E,y,C){const k=function Wi(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===k.length)return(0,m.of)({});const $={};return(0,H.D)(k).pipe((0,We.z)(K=>function ci(_,E,y,C){const k=$r(E)??C,$=xs(_,k);return Vt($.resolve?$.resolve(E,y):k.runInContext(()=>$(E,y)))}(_[K],E,y,C).pipe((0,rt.P)(),(0,ft.b)(ve=>{$[K]=ve}))),Ee(1),function vn(_){return(0,gt.U)(()=>_)}($),yt(K=>Hi(K)?je.E:Qe(K)))}($,_,E,C).pipe((0,gt.U)(K=>(_._resolvedData=K,_.data=Do(_,y).resolve,k&&qi(k)&&(_.data[Rn]=k.title),null)))}(K.route,C,_,E)),(0,ft.b)(()=>$++),Ee(1),(0,We.z)(K=>$===k.length?(0,m.of)(y):je.E))})}(y.paramsInheritanceStrategy,this.environmentInjector),(0,ft.b)({next:()=>ze=!0,complete:()=>{ze||(y.restoreHistory(ve),this.cancelNavigationTransition(ve,"",2))}}))}),(0,ft.b)(ve=>{const ze=new Us(ve.id,this.urlSerializer.serialize(ve.extractedUrl),this.urlSerializer.serialize(ve.urlAfterRedirects),ve.targetSnapshot);this.events.next(ze)}))}),Mo(K=>{const ve=ze=>{const xt=[];ze.routeConfig?.loadComponent&&!ze.routeConfig._loadedComponent&&xt.push(this.configLoader.loadComponent(ze.routeConfig).pipe((0,ft.b)(Nt=>{ze.component=Nt}),(0,gt.U)(()=>{})));for(const Nt of ze.children)xt.push(...ve(Nt));return xt};return He(ve(K.targetSnapshot.root)).pipe((0,wt.d)(),(0,Ae.q)(1))}),Mo(()=>this.afterPreactivation()),(0,gt.U)(K=>{const ve=function so(_,E,y){const C=Cs(_,E._root,y?y._root:void 0);return new ro(C,E)}(y.routeReuseStrategy,K.targetSnapshot,K.currentRouterState);return C={...K,targetRouterState:ve}}),(0,ft.b)(K=>{y.currentUrlTree=K.urlAfterRedirects,y.rawUrlTree=y.urlHandlingStrategy.merge(K.urlAfterRedirects,K.rawUrl),y.routerState=K.targetRouterState,"deferred"===y.urlUpdateStrategy&&(K.extras.skipLocationChange||y.setBrowserUrl(y.rawUrlTree,K),y.browserUrlTree=K.urlAfterRedirects)}),((_,E,y)=>(0,gt.U)(C=>(new ur(E,C.targetRouterState,C.currentRouterState,y).activate(_),C)))(this.rootContexts,y.routeReuseStrategy,K=>this.events.next(K)),(0,ft.b)({next:K=>{k=!0,this.lastSuccessfulNavigation=this.currentNavigation,y.navigated=!0,this.events.next(new Ds(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(y.currentUrlTree))),y.titleStrategy?.updateTitle(K.targetRouterState.snapshot),K.resolve(!0)},complete:()=>{k=!0}}),hn(()=>{k||$||this.cancelNavigationTransition(C,"",1),this.currentNavigation?.id===C.id&&(this.currentNavigation=null)}),yt(K=>{if($=!0,ps(K)){bo(K)||(y.navigated=!0,y.restoreHistory(C,!0));const ve=new Ui(C.id,this.urlSerializer.serialize(C.extractedUrl),K.message,K.cancellationCode);if(this.events.next(ve),bo(K)){const ze=y.urlHandlingStrategy.merge(K.url,y.rawUrlTree),xt={skipLocationChange:C.extras.skipLocationChange,replaceUrl:"eager"===y.urlUpdateStrategy||ga(C.source)};y.scheduleNavigation(ze,bi,null,xt,{resolve:C.resolve,reject:C.reject,promise:C.promise})}else C.resolve(!1)}else{y.restoreHistory(C,!0);const ve=new Bi(C.id,this.urlSerializer.serialize(C.extractedUrl),K,C.targetSnapshot??void 0);this.events.next(ve);try{C.resolve(y.errorHandler(K))}catch(ze){C.reject(ze)}}return je.E}))}))}cancelNavigationTransition(y,C,k){const $=new Ui(y.id,this.urlSerializer.serialize(y.extractedUrl),C,k);this.events.next($),y.resolve(!1)}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();function ga(_){return _!==bi}let xi=(()=>{class _{buildTitle(y){let C,k=y.root;for(;void 0!==k;)C=this.getResolvedTitleForRoute(k)??C,k=k.children.find($=>$.outlet===jt);return C}getResolvedTitleForRoute(y){return y.data[Rn]}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(){return(0,g.f3M)(Zi)},providedIn:"root"}),_})(),Zi=(()=>{class _ extends xi{constructor(y){super(),this.title=y}updateTitle(y){const C=this.buildTitle(y);void 0!==C&&this.title.setTitle(C)}}return _.\u0275fac=function(y){return new(y||_)(g.LFG(_n.Dx))},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),No=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(){return(0,g.f3M)(Sa)},providedIn:"root"}),_})();class co{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}let Sa=(()=>{class _ extends co{}return _.\u0275fac=function(){let E;return function(C){return(E||(E=g.n5z(_)))(C||_)}}(),_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const ma=new g.OlP("",{providedIn:"root",factory:()=>({})});let Wa=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(){return(0,g.f3M)(Mu)},providedIn:"root"}),_})(),Mu=(()=>{class _{shouldProcessUrl(y){return!0}extract(y){return y}merge(y,C){return y}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();function lu(_){throw _}function ns(_,E,y){return E.parse("/")}const du={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Po={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ir=(()=>{class _{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this.options=(0,g.f3M)(ma,{optional:!0})||{},this.errorHandler=this.options.errorHandler||lu,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ns,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)(Wa),this.routeReuseStrategy=(0,g.f3M)(No),this.urlCreationStrategy=(0,g.f3M)(Au),this.titleStrategy=(0,g.f3M)(xi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=wr((0,g.f3M)(Ps,{optional:!0})??[]),this.navigationTransitions=(0,g.f3M)(uo),this.urlSerializer=(0,g.f3M)(Ut),this.location=(0,g.f3M)(ot.Ye),this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Xt,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Da(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(y=>{this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}resetRootComponentType(y){this.routerState.root.component=y,this.navigationTransitions.rootComponentType=y}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const y=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),bi,y)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const C="popstate"===y.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(y.url,C,y.state)},0)}))}navigateToSyncWithBrowser(y,C,k){const $={replaceUrl:!0},K=k?.navigationId?k:null;if(k){const ze={...k};delete ze.navigationId,delete ze.\u0275routerPageId,0!==Object.keys(ze).length&&($.state=ze)}const ve=this.parseUrl(y);this.scheduleNavigation(ve,C,K,$)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(y){this.config=y.map(oi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,C={}){const{relativeTo:k,queryParams:$,fragment:K,queryParamsHandling:ve,preserveFragment:ze}=C,xt=ze?this.currentUrlTree.fragment:K;let Nt=null;switch(ve){case"merge":Nt={...this.currentUrlTree.queryParams,...$};break;case"preserve":Nt=this.currentUrlTree.queryParams;break;default:Nt=$||null}return null!==Nt&&(Nt=this.removeEmptyProps(Nt)),this.urlCreationStrategy.createUrlTree(k,this.routerState,this.currentUrlTree,y,Nt,xt??null)}navigateByUrl(y,C={skipLocationChange:!1}){const k=Zr(y)?y:this.parseUrl(y),$=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation($,bi,null,C)}navigate(y,C={skipLocationChange:!1}){return function Ru(_){for(let E=0;E<_.length;E++){if(null==_[E])throw new g.vHH(4008,!1)}}(y),this.navigateByUrl(this.createUrlTree(y,C),C)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let C;try{C=this.urlSerializer.parse(y)}catch(k){C=this.malformedUriErrorHandler(k,this.urlSerializer,y)}return C}isActive(y,C){let k;if(k=!0===C?{...du}:!1===C?{...Po}:C,Zr(y))return fn(this.currentUrlTree,y,k);const $=this.parseUrl(y);return fn(this.currentUrlTree,$,k)}removeEmptyProps(y){return Object.keys(y).reduce((C,k)=>{const $=y[k];return null!=$&&(C[k]=$),C},{})}scheduleNavigation(y,C,k,$,K){if(this.disposed)return Promise.resolve(!1);let ve,ze,xt,Nt;return K?(ve=K.resolve,ze=K.reject,xt=K.promise):xt=new Promise((kn,Lr)=>{ve=kn,ze=Lr}),Nt="computed"===this.canceledNavigationResolution?k&&k.\u0275routerPageId?k.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Nt,source:C,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:y,extras:$,resolve:ve,reject:ze,promise:xt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xt.catch(kn=>Promise.reject(kn))}setBrowserUrl(y,C){const k=this.urlSerializer.serialize(y),$={...C.extras.state,...this.generateNgRouterState(C.id,C.targetPageId)};this.location.isCurrentPathEqualTo(k)||C.extras.replaceUrl?this.location.replaceState(k,"",$):this.location.go(k,"",$)}restoreHistory(y,C=!1){if("computed"===this.canceledNavigationResolution){const k=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===k?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===k&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(k)}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(y,C){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:C}:{navigationId:y}}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),Aa=(()=>{class _{constructor(y,C,k,$,K,ve){this.router=y,this.route=C,this.tabIndexAttribute=k,this.renderer=$,this.el=K,this.locationStrategy=ve,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new pt.x;const ze=K.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ze||"area"===ze,this.isAnchorElement?this.subscription=y.events.subscribe(xt=>{xt instanceof Ds&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,g.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,g.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,g.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",y)}ngOnChanges(y){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(y,C,k,$,K){return!!(null===this.urlTree||this.isAnchorElement&&(0!==y||C||k||$||K||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const y=null===this.href?null:(0,g.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",y)}applyAttributeValue(y,C){const k=this.renderer,$=this.el.nativeElement;null!==C?k.setAttribute($,y,C):k.removeAttribute($,y)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(g.Y36(ir),g.Y36(Ti),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ot.S$))},_.\u0275dir=g.lG2({type:_,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(y,C){1&y&&g.NdJ("click",function($){return C.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&y&&g.uIk("target",C.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),_})(),Mi=(()=>{class _{get isActive(){return this._isActive}constructor(y,C,k,$,K){this.router=y,this.element=C,this.renderer=k,this.cdr=$,this.link=K,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new g.vpe,this.routerEventsSubscription=y.events.subscribe(ve=>{ve instanceof Ds&&this.update()})}ngAfterContentInit(){(0,m.of)(this.links.changes,(0,m.of)(null)).pipe((0,Jn.J)()).subscribe(y=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const y=[...this.links.toArray(),this.link].filter(C=>!!C).map(C=>C.onChanges);this.linkInputChangesSubscription=(0,H.D)(y).pipe((0,Jn.J)()).subscribe(C=>{this._isActive!==this.isLinkActive(this.router)(C)&&this.update()})}set routerLinkActive(y){const C=Array.isArray(y)?y:y.split(" ");this.classes=C.filter(k=>!!k)}ngOnChanges(y){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const y=this.hasActiveLinks();this._isActive!==y&&(this._isActive=y,this.cdr.markForCheck(),this.classes.forEach(C=>{y?this.renderer.addClass(this.element.nativeElement,C):this.renderer.removeClass(this.element.nativeElement,C)}),y&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(y))})}isLinkActive(y){const C=function zs(_){return!!_.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return k=>!!k.urlTree&&y.isActive(k.urlTree,C)}hasActiveLinks(){const y=this.isLinkActive(this.router);return this.link&&y(this.link)||this.links.some(y)}}return _.\u0275fac=function(y){return new(y||_)(g.Y36(ir),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(Aa,8))},_.\u0275dir=g.lG2({type:_,selectors:[["","routerLinkActive",""]],contentQueries:function(y,C,k){if(1&y&&g.Suo(k,Aa,5),2&y){let $;g.iGM($=g.CRH())&&(C.links=$)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[g.TTD]}),_})();class Nu{}let $c=(()=>{class _{constructor(y,C,k,$,K){this.router=y,this.injector=k,this.preloadingStrategy=$,this.loader=K}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ve.h)(y=>y instanceof Ds),it(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,C){const k=[];for(const $ of C){$.providers&&!$._injector&&($._injector=(0,g.MMx)($.providers,y,`Route: ${$.path}`));const K=$._injector??y,ve=$._loadedInjector??K;$.loadChildren&&!$._loadedRoutes&&void 0===$.canLoad||$.loadComponent&&!$._loadedComponent?k.push(this.preloadConfig(K,$)):($.children||$._loadedRoutes)&&k.push(this.processRoutes(ve,$.children??$._loadedRoutes))}return(0,H.D)(k).pipe((0,Jn.J)())}preloadConfig(y,C){return this.preloadingStrategy.preload(C,()=>{let k;k=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(y,C):(0,m.of)(null);const $=k.pipe((0,We.z)(K=>null===K?(0,m.of)(void 0):(C._loadedRoutes=K.routes,C._loadedInjector=K.injector,this.processRoutes(K.injector??y,K.routes))));if(C.loadComponent&&!C._loadedComponent){const K=this.loader.loadComponent(C);return(0,H.D)([$,K]).pipe((0,Jn.J)())}return $})}}return _.\u0275fac=function(y){return new(y||_)(g.LFG(ir),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Nu),g.LFG(Zo))},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const hu=new g.OlP("");let Yo=(()=>{class _{constructor(y,C,k,$,K={}){this.urlSerializer=y,this.transitions=C,this.viewportScroller=k,this.zone=$,this.options=K,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},K.scrollPositionRestoration=K.scrollPositionRestoration||"disabled",K.anchorScrolling=K.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof tr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Ds&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.urlSerializer.parse(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof Yr&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Yr(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return _.\u0275fac=function(y){g.$Z()},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac}),_})();function ms(_,E){return{\u0275kind:_,\u0275providers:E}}function zn(){const _=(0,g.f3M)(g.zs3);return E=>{const y=_.get(g.z2F);if(E!==y.components[0])return;const C=_.get(ir),k=_.get(cc);1===_.get(lo)&&C.initialNavigation(),_.get(fu,null,g.XFs.Optional)?.setUpPreloading(),_.get(hu,null,g.XFs.Optional)?.init(),C.resetRootComponentType(y.componentTypes[0]),k.closed||(k.next(),k.unsubscribe())}}const cc=new g.OlP("",{factory:()=>new pt.x}),lo=new g.OlP("",{providedIn:"root",factory:()=>1});const fu=new g.OlP("");function br(_){return ms(0,[{provide:fu,useExisting:$c},{provide:Nu,useExisting:_}])}const Ya=new g.OlP("ROUTER_FORROOT_GUARD"),Qa=[ot.Ye,{provide:Ut,useClass:$t},ir,Br,{provide:Ti,useFactory:function Ws(_){return _.routerState.root},deps:[ir]},Zo,[]];function Pu(){return new g.PXZ("Router",ir)}let Ri=(()=>{class _{constructor(y){}static forRoot(y,C){return{ngModule:_,providers:[Qa,[],{provide:Ps,multi:!0,useValue:y},{provide:Ya,useFactory:fo,deps:[[ir,new g.FiY,new g.tp0]]},{provide:ma,useValue:C||{}},C?.useHash?{provide:ot.S$,useClass:ot.Do}:{provide:ot.S$,useClass:ot.b0},{provide:hu,useFactory:()=>{const _=(0,g.f3M)(ot.EM),E=(0,g.f3M)(g.R0b),y=(0,g.f3M)(ma),C=(0,g.f3M)(uo),k=(0,g.f3M)(Ut);return y.scrollOffset&&_.setOffset(y.scrollOffset),new Yo(k,C,_,E,y)}},C?.preloadingStrategy?br(C.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Pu},C?.initialNavigation?pu(C):[],[{provide:ku,useFactory:zn},{provide:g.tb,multi:!0,useExisting:ku}]]}}static forChild(y){return{ngModule:_,providers:[{provide:Ps,multi:!0,useValue:y}]}}}return _.\u0275fac=function(y){return new(y||_)(g.LFG(Ya,8))},_.\u0275mod=g.oAB({type:_}),_.\u0275inj=g.cJS({imports:[Yn]}),_})();function fo(_){return"guarded"}function pu(_){return["disabled"===_.initialNavigation?ms(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const E=(0,g.f3M)(ir);return()=>{E.setUpLocationChangeListener()}}},{provide:lo,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?ms(2,[{provide:lo,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:E=>{const y=E.get(ot.V_,Promise.resolve());return()=>y.then(()=>new Promise(k=>{const $=E.get(ir),K=E.get(cc);(function C(k){E.get(ir).events.pipe((0,Ve.h)(K=>K instanceof Ds||K instanceof Ui||K instanceof Bi),(0,gt.U)(K=>K instanceof Ds||K instanceof Ui&&(0===K.code||1===K.code)&&null),(0,Ve.h)(K=>null!==K),(0,Ae.q)(1)).subscribe(()=>{k()})})(()=>{k(!0)}),E.get(uo).afterPreactivation=()=>(k(!0),K.closed?(0,m.of)(void 0):K),$.initialNavigation()}))}}]).\u0275providers:[]]}const ku=new g.OlP("")},3942:(It,Re,j)=>{j.d(Re,{Z:()=>nt});var g=j(2090),H=j(4859),m=j(9681),de=j(1877);class he{constructor(Le,qe){this._delegate=Le,this.firebase=qe,(0,m._addComponent)(Le,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this._delegate.automaticDataCollectionEnabled=Le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Le=>{this._delegate.checkDestroyed(),Le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,m.deleteApp)(this._delegate)))}_getService(Le,qe=m._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(Le);return!et.isInitialized()&&"EXPLICIT"===(null===(Ze=et.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&et.initialize(),et.getImmediate({identifier:qe})}_removeServiceInstance(Le,qe=m._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Le).clearInstance(qe)}_addComponent(Le){(0,m._addComponent)(this._delegate,Le)}_addOrOverwriteComponent(Le){(0,m._addOrOverwriteComponent)(this._delegate,Le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Te(){const Dt=function Ie(Dt){const Le={},qe={__esModule:!0,initializeApp:function ke(pe,Se={}){const $e=m.initializeApp(pe,Se);if((0,g.r3)(Le,$e.name))return Le[$e.name];const pt=new Dt($e,qe);return Le[$e.name]=pt,pt},app:et,registerVersion:m.registerVersion,setLogLevel:m.setLogLevel,onLog:m.onLog,apps:null,SDK_VERSION:m.SDK_VERSION,INTERNAL:{registerComponent:function je(pe){const Se=pe.name,$e=Se.replace("-compat","");if(m._registerComponent(pe)&&"PUBLIC"===pe.type){const pt=(ot=et())=>{if("function"!=typeof ot[$e])throw Ce.create("invalid-app-argument",{appName:Se});return ot[$e]()};void 0!==pe.serviceProps&&(0,g.ZB)(pt,pe.serviceProps),qe[$e]=pt,Dt.prototype[$e]=function(...ot){return this._getService.bind(this,Se).apply(this,pe.multipleInstances?ot:[])}}return"PUBLIC"===pe.type?qe[$e]:null},removeApp:function Ze(pe){delete Le[pe]},useAsService:function ut(pe,Se){return"serverAuth"===Se?null:Se},modularAPIs:m}};function et(pe){if(!(0,g.r3)(Le,pe=pe||m._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:pe});return Le[pe]}return qe.default=qe,Object.defineProperty(qe,"apps",{get:function Qe(){return Object.keys(Le).map(pe=>Le[pe])}}),et.App=Dt,qe}(he);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function Le(qe){(0,g.ZB)(Dt,qe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Dt}(),se=new de.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=oe;!function He(Dt){(0,m.registerVersion)("@firebase/app-compat","0.2.5",Dt)}()},9681:(It,Re,j)=>{j.r(Re),j.d(Re,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>_n,_DEFAULT_ENTRY_NAME:()=>rt,_addComponent:()=>gn,_addOrOverwriteComponent:()=>Ee,_apps:()=>ft,_clearComponents:()=>Tn,_components:()=>yt,_getProvider:()=>wt,_registerComponent:()=>Mt,_removeServiceInstance:()=>At,deleteApp:()=>cr,getApp:()=>Rn,getApps:()=>yr,initializeApp:()=>jt,onLog:()=>ct,registerVersion:()=>vr,setLogLevel:()=>Wn});var g=j(5861),H=j(4859),m=j(1877),de=j(2090),he=j(8766);class ye{constructor(Ge){this.container=Ge}getPlatformInfoString(){return this.container.getProviders().map(bt=>{if(function Ce(lt){return"VERSION"===lt.getComponent()?.type}(bt)){const Ut=bt.getImmediate();return`${Ut.library}/${Ut.version}`}return null}).filter(bt=>bt).join(" ")}}const Ie="@firebase/app",oe=new m.Yd("@firebase/app"),rt="[DEFAULT]",it={[Ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ft=new Map,yt=new Map;function gn(lt,Ge){try{lt.container.addComponent(Ge)}catch(bt){oe.debug(`Component ${Ge.name} failed to register with FirebaseApp ${lt.name}`,bt)}}function Ee(lt,Ge){lt.container.addOrOverwriteComponent(Ge)}function Mt(lt){const Ge=lt.name;if(yt.has(Ge))return oe.debug(`There were multiple attempts to register component ${Ge}.`),!1;yt.set(Ge,lt);for(const bt of ft.values())gn(bt,lt);return!0}function wt(lt,Ge){const bt=lt.container.getProvider("heartbeat").getImmediate({optional:!0});return bt&&bt.triggerHeartbeat(),lt.container.getProvider(Ge)}function At(lt,Ge,bt=rt){wt(lt,Ge).clearInstance(bt)}function Tn(){yt.clear()}const hn=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Jn{constructor(Ge,bt,Ut){this._isDeleted=!1,this._options=Object.assign({},Ge),this._config=Object.assign({},bt),this._name=bt.name,this._automaticDataCollectionEnabled=bt.automaticDataCollectionEnabled,this._container=Ut,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ge){this._isDeleted=Ge}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}const _n="9.18.0";function jt(lt,Ge={}){let bt=lt;"object"!=typeof Ge&&(Ge={name:Ge});const Ut=Object.assign({name:rt,automaticDataCollectionEnabled:!1},Ge),$t=Ut.name;if("string"!=typeof $t||!$t)throw hn.create("bad-app-name",{appName:String($t)});if(bt||(bt=(0,de.aH)()),!bt)throw hn.create("no-options");const sn=ft.get($t);if(sn){if((0,de.vZ)(bt,sn.options)&&(0,de.vZ)(Ut,sn.config))return sn;throw hn.create("duplicate-app",{appName:$t})}const Vn=new H.H0($t);for(const re of yt.values())Vn.addComponent(re);const ce=new Jn(bt,Ut,Vn);return ft.set($t,ce),ce}function Rn(lt=rt){const Ge=ft.get(lt);if(!Ge&&lt===rt)return jt();if(!Ge)throw hn.create("no-app",{appName:lt});return Ge}function yr(){return Array.from(ft.values())}function cr(lt){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(lt){const Ge=lt.name;ft.has(Ge)&&(ft.delete(Ge),yield Promise.all(lt.container.getProviders().map(bt=>bt.delete())),lt.isDeleted=!0)})).apply(this,arguments)}function vr(lt,Ge,bt){var Ut;let $t=null!==(Ut=it[lt])&&void 0!==Ut?Ut:lt;bt&&($t+=`-${bt}`);const sn=$t.match(/\s|\//),Vn=Ge.match(/\s|\//);if(sn||Vn){const ce=[`Unable to register library "${$t}" with version "${Ge}":`];return sn&&ce.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),sn&&Vn&&ce.push("and"),Vn&&ce.push(`version name "${Ge}" contains illegal characters (whitespace or "/")`),void oe.warn(ce.join(" "))}Mt(new H.wA(`${$t}-version`,()=>({library:$t,version:Ge}),"VERSION"))}function ct(lt,Ge){if(null!==lt&&"function"!=typeof lt)throw hn.create("invalid-log-argument");(0,m.Am)(lt,Ge)}function Wn(lt){(0,m.Ub)(lt)}const dr="firebase-heartbeat-store";let en=null;function Vt(){return en||(en=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(lt,Ge)=>{0===Ge&&lt.createObjectStore(dr)}}).catch(lt=>{throw hn.create("idb-open",{originalErrorMessage:lt.message})})),en}function Ht(){return(Ht=(0,g.Z)(function*(lt){try{return(yield Vt()).transaction(dr).objectStore(dr).get(ar(lt))}catch(Ge){if(Ge instanceof de.ZR)oe.warn(Ge.message);else{const bt=hn.create("idb-get",{originalErrorMessage:Ge?.message});oe.warn(bt.message)}}})).apply(this,arguments)}function Nn(lt,Ge){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(lt,Ge){try{const Ut=(yield Vt()).transaction(dr,"readwrite");return yield Ut.objectStore(dr).put(Ge,ar(lt)),Ut.done}catch(bt){if(bt instanceof de.ZR)oe.warn(bt.message);else{const Ut=hn.create("idb-set",{originalErrorMessage:bt?.message});oe.warn(Ut.message)}}})).apply(this,arguments)}function ar(lt){return`${lt.name}!${lt.options.appId}`}class ni{constructor(Ge){this.container=Ge,this._heartbeatsCache=null;const bt=this.container.getProvider("app").getImmediate();this._storage=new Xt(bt),this._heartbeatsCachePromise=this._storage.read().then(Ut=>(this._heartbeatsCache=Ut,Ut))}triggerHeartbeat(){var Ge=this;return(0,g.Z)(function*(){const Ut=Ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=rn();if(null===Ge._heartbeatsCache&&(Ge._heartbeatsCache=yield Ge._heartbeatsCachePromise),Ge._heartbeatsCache.lastSentHeartbeatDate!==$t&&!Ge._heartbeatsCache.heartbeats.some(sn=>sn.date===$t))return Ge._heartbeatsCache.heartbeats.push({date:$t,agent:Ut}),Ge._heartbeatsCache.heartbeats=Ge._heartbeatsCache.heartbeats.filter(sn=>{const Vn=new Date(sn.date).valueOf();return Date.now()-Vn<=2592e6}),Ge._storage.overwrite(Ge._heartbeatsCache)})()}getHeartbeatsHeader(){var Ge=this;return(0,g.Z)(function*(){if(null===Ge._heartbeatsCache&&(yield Ge._heartbeatsCachePromise),null===Ge._heartbeatsCache||0===Ge._heartbeatsCache.heartbeats.length)return"";const bt=rn(),{heartbeatsToSend:Ut,unsentEntries:$t}=function ri(lt,Ge=1024){const bt=[];let Ut=lt.slice();for(const $t of lt){const sn=bt.find(Vn=>Vn.agent===$t.agent);if(sn){if(sn.dates.push($t.date),Gt(bt)>Ge){sn.dates.pop();break}}else if(bt.push({agent:$t.agent,dates:[$t.date]}),Gt(bt)>Ge){bt.pop();break}Ut=Ut.slice(1)}return{heartbeatsToSend:bt,unsentEntries:Ut}}(Ge._heartbeatsCache.heartbeats),sn=(0,de.L)(JSON.stringify({version:2,heartbeats:Ut}));return Ge._heartbeatsCache.lastSentHeartbeatDate=bt,$t.length>0?(Ge._heartbeatsCache.heartbeats=$t,yield Ge._storage.overwrite(Ge._heartbeatsCache)):(Ge._heartbeatsCache.heartbeats=[],Ge._storage.overwrite(Ge._heartbeatsCache)),sn})()}}function rn(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(Ge){this.app=Ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ge=this;return(0,g.Z)(function*(){return(yield Ge._canUseIndexedDBPromise)&&(yield function Ot(lt){return Ht.apply(this,arguments)}(Ge.app))||{heartbeats:[]}})()}overwrite(Ge){var bt=this;return(0,g.Z)(function*(){var Ut;if(yield bt._canUseIndexedDBPromise){const sn=yield bt.read();return Nn(bt.app,{lastSentHeartbeatDate:null!==(Ut=Ge.lastSentHeartbeatDate)&&void 0!==Ut?Ut:sn.lastSentHeartbeatDate,heartbeats:Ge.heartbeats})}})()}add(Ge){var bt=this;return(0,g.Z)(function*(){var Ut;if(yield bt._canUseIndexedDBPromise){const sn=yield bt.read();return Nn(bt.app,{lastSentHeartbeatDate:null!==(Ut=Ge.lastSentHeartbeatDate)&&void 0!==Ut?Ut:sn.lastSentHeartbeatDate,heartbeats:[...sn.heartbeats,...Ge.heartbeats]})}})()}}function Gt(lt){return(0,de.L)(JSON.stringify({version:2,heartbeats:lt})).length}!function jn(lt){Mt(new H.wA("platform-logger",Ge=>new ye(Ge),"PRIVATE")),Mt(new H.wA("heartbeat",Ge=>new ni(Ge),"PRIVATE")),vr(Ie,"0.9.5",lt),vr(Ie,"0.9.5","esm2017"),vr("fire-js","")}("")},4859:(It,Re,j)=>{j.d(Re,{H0:()=>Ie,wA:()=>m});var g=j(5861),H=j(2090);class m{constructor(oe,se,fe){this.name=oe,this.instanceFactory=se,this.type=fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const de="[DEFAULT]";class he{constructor(oe,se){this.name=oe,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const se=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(se)){const fe=new H.BH;if(this.instancesDeferred.set(se,fe),this.isInitialized(se)||this.shouldAutoInitialize())try{const tt=this.getOrInitializeService({instanceIdentifier:se});tt&&fe.resolve(tt)}catch{}}return this.instancesDeferred.get(se).promise}getImmediate(oe){var se;const fe=this.normalizeInstanceIdentifier(oe?.identifier),tt=null!==(se=oe?.optional)&&void 0!==se&&se;if(!this.isInitialized(fe)&&!this.shouldAutoInitialize()){if(tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:fe})}catch(He){if(tt)return null;throw He}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Ce(Te){return"EAGER"===Te.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:de})}catch{}for(const[se,fe]of this.instancesDeferred.entries()){const tt=this.normalizeInstanceIdentifier(se);try{const He=this.getOrInitializeService({instanceIdentifier:tt});fe.resolve(He)}catch{}}}}clearInstance(oe=de){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,g.Z)(function*(){const se=Array.from(oe.instances.values());yield Promise.all([...se.filter(fe=>"INTERNAL"in fe).map(fe=>fe.INTERNAL.delete()),...se.filter(fe=>"_delete"in fe).map(fe=>fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=de){return this.instances.has(oe)}getOptions(oe=de){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:se={}}=oe,fe=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(fe))throw Error(`${this.name}(${fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tt=this.getOrInitializeService({instanceIdentifier:fe,options:se});for(const[He,nt]of this.instancesDeferred.entries())fe===this.normalizeInstanceIdentifier(He)&&nt.resolve(tt);return tt}onInit(oe,se){var fe;const tt=this.normalizeInstanceIdentifier(se),He=null!==(fe=this.onInitCallbacks.get(tt))&&void 0!==fe?fe:new Set;He.add(oe),this.onInitCallbacks.set(tt,He);const nt=this.instances.get(tt);return nt&&oe(nt,tt),()=>{He.delete(oe)}}invokeOnInitCallbacks(oe,se){const fe=this.onInitCallbacks.get(se);if(fe)for(const tt of fe)try{tt(oe,se)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:se={}}){let fe=this.instances.get(oe);if(!fe&&this.component&&(fe=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=oe,Te===de?void 0:Te),options:se}),this.instances.set(oe,fe),this.instancesOptions.set(oe,se),this.invokeOnInitCallbacks(fe,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,fe)}catch{}var Te;return fe||null}normalizeInstanceIdentifier(oe=de){return this.component?this.component.multipleInstances?oe:de:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ie{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const se=this.getProvider(oe.name);if(se.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);se.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const se=new he(oe,this);return this.providers.set(oe,se),se}getProviders(){return Array.from(this.providers.values())}}},1877:(It,Re,j)=>{j.d(Re,{Am:()=>Te,Ub:()=>Ie,Yd:()=>Ce,in:()=>H});const g=[];var H=(()=>{return(oe=H||(H={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",H;var oe})();const m={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},de=H.INFO,he={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},ye=(oe,se,...fe)=>{if(se<oe.logLevel)return;const tt=(new Date).toISOString(),He=he[se];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[He](`[${tt}]  ${oe.name}:`,...fe)};class Ce{constructor(se){this.name=se,this._logLevel=de,this._logHandler=ye,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in H))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?m[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...se),this._logHandler(this,H.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...se),this._logHandler(this,H.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,H.INFO,...se),this._logHandler(this,H.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,H.WARN,...se),this._logHandler(this,H.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...se),this._logHandler(this,H.ERROR,...se)}}function Ie(oe){g.forEach(se=>{se.setLogLevel(oe)})}function Te(oe,se){for(const fe of g){let tt=null;se&&se.level&&(tt=m[se.level]),fe.userLogHandler=null===oe?null:(He,nt,...Dt)=>{const Le=Dt.map(qe=>{if(null==qe)return null;if("string"==typeof qe)return qe;if("number"==typeof qe||"boolean"==typeof qe)return qe.toString();if(qe instanceof Error)return qe.message;try{return JSON.stringify(qe)}catch{return null}}).filter(qe=>qe).join(" ");nt>=(tt??He.logLevel)&&oe({level:H[nt].toLowerCase(),message:Le,args:Dt,type:He.name})}}}},259:(It,Re,j)=>{j.d(Re,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=j(9681);(0,g.registerVersion)("firebase","9.18.0","app")},9260:(It,Re,j)=>{j.d(Re,{Z:()=>g.Z});var g=j(3942);g.Z.registerVersion("firebase","9.18.0","app-compat")},9568:(It,Re,j)=>{j.r(Re);var g=j(5861),H=j(3942),m=j(5114),de=j(2090),Ce=(j(9681),j(1877),j(4859));function Ie(){return window}function se(){return(se=(0,g.Z)(function*(Q,J,q){var we;const{BuildInfo:Fe}=Ie();(0,m.ap)(J.sessionId,"AuthEvent did not contain a session ID");const _t=yield qe(J.sessionId),le={};return(0,m.aq)()?le.ibi=Fe.packageName:(0,m.ar)()?le.apn=Fe.packageName:(0,m.as)(Q,"operation-not-supported-in-this-environment"),Fe.displayName&&(le.appDisplayName=Fe.displayName),le.sessionId=_t,(0,m.at)(Q,q,J.type,void 0,null!==(we=J.eventId)&&void 0!==we?we:void 0,le)})).apply(this,arguments)}function tt(){return(tt=(0,g.Z)(function*(Q){const{BuildInfo:J}=Ie(),q={};(0,m.aq)()?q.iosBundleId=J.packageName:(0,m.ar)()?q.androidPackageName=J.packageName:(0,m.as)(Q,"operation-not-supported-in-this-environment"),yield(0,m.au)(Q,q)})).apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(Q,J,q){const{cordova:we}=Ie();let Fe=()=>{};try{yield new Promise((_t,le)=>{let ae=null;function X(){var at;_t();const Qt=null===(at=we.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Qt&&Qt(),"function"==typeof q?.close&&q.close()}function me(){ae||(ae=window.setTimeout(()=>{le((0,m.aw)(Q,"redirect-cancelled-by-user"))},2e3))}function Ke(){"visible"===document?.visibilityState&&me()}J.addPassiveListener(X),document.addEventListener("resume",me,!1),(0,m.ar)()&&document.addEventListener("visibilitychange",Ke,!1),Fe=()=>{J.removePassiveListener(X),document.removeEventListener("resume",me,!1),document.removeEventListener("visibilitychange",Ke,!1),ae&&window.clearTimeout(ae)}})}finally{Fe()}})).apply(this,arguments)}function qe(Q){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,g.Z)(function*(Q){const J=et(Q),q=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(q)).map(Fe=>Fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function et(Q){if((0,m.ap)(/[0-9a-zA-Z]+/.test(Q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Q);const J=new ArrayBuffer(Q.length),q=new Uint8Array(J);for(let we=0;we<Q.length;we++)q[we]=Q.charCodeAt(we);return q}class Qe extends m.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(J)),super.onEvent(J)}initialized(){var J=this;return(0,g.Z)(function*(){yield J.initPromise})()}}function pe(Q){return Se.apply(this,arguments)}function Se(){return(Se=(0,g.Z)(function*(Q){const J=yield ot()._get(gt(Q));return J&&(yield ot()._remove(gt(Q))),J})).apply(this,arguments)}function pt(){const Q=[],J="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<20;q++){const we=Math.floor(Math.random()*J.length);Q.push(J.charAt(we))}return Q.join("")}function ot(){return(0,m.az)(m.b)}function gt(Q){return(0,m.aA)("authEvent",Q.config.apiKey,Q.name)}function Pe(Q){if(!Q?.includes("?"))return{};const[J,...q]=Q.split("?");return(0,de.zd)(q.join("?"))}const rt=class We{constructor(){this._redirectPersistence=m.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=m.aB,this._overrideRedirectResult=m.aC}_initialize(J){var q=this;return(0,g.Z)(function*(){const we=J._key();let Fe=q.eventManagers.get(we);return Fe||(Fe=new Qe(J),q.eventManagers.set(we,Fe),q.attachCallbackListeners(J,Fe)),Fe})()}_openPopup(J){(0,m.as)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,q,we,Fe){var _t=this;return(0,g.Z)(function*(){!function Le(Q){var J,q,we,Fe,_t,le,ae,X,me,Ke;const at=Ie();(0,m.ax)("function"==typeof(null===(J=at?.universalLinks)||void 0===J?void 0:J.subscribe),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,m.ax)(typeof(null===(q=at?.BuildInfo)||void 0===q?void 0:q.packageName)<"u",Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,m.ax)("function"==typeof(null===(_t=null===(Fe=null===(we=at?.cordova)||void 0===we?void 0:we.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===_t?void 0:_t.openUrl),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,m.ax)("function"==typeof(null===(X=null===(ae=null===(le=at?.cordova)||void 0===le?void 0:le.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===X?void 0:X.isAvailable),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,m.ax)("function"==typeof(null===(Ke=null===(me=at?.cordova)||void 0===me?void 0:me.InAppBrowser)||void 0===Ke?void 0:Ke.open),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const le=yield _t._initialize(J);yield le.initialized(),le.resetRedirect(),(0,m.aD)(),yield _t._originValidation(J);const ae=function je(Q,J,q=null){return{type:J,eventId:q,urlResponse:null,sessionId:pt(),postBody:null,tenantId:Q.tenantId,error:(0,m.aw)(Q,"no-auth-event")}}(J,we,Fe);yield function ut(Q,J){return ot()._set(gt(Q),J)}(J,ae);const X=yield function oe(Q,J,q){return se.apply(this,arguments)}(J,ae,q),me=yield function He(Q){const{cordova:J}=Ie();return new Promise(q=>{J.plugins.browsertab.isAvailable(we=>{let Fe=null;we?J.plugins.browsertab.openUrl(Q):Fe=J.InAppBrowser.open(Q,(0,m.av)()?"_blank":"_system","location=yes"),q(Fe)})})}(X);return function nt(Q,J,q){return Dt.apply(this,arguments)}(J,le,me)})()}_isIframeWebStorageSupported(J,q){throw new Error("Method not implemented.")}_originValidation(J){const q=J._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function fe(Q){return tt.apply(this,arguments)}(J)),this.originValidationPromises[q]}attachCallbackListeners(J,q){const{universalLinks:we,handleOpenURL:Fe,BuildInfo:_t}=Ie(),le=setTimeout((0,g.Z)(function*(){yield pe(J),q.onEvent(it())}),500),ae=function(){var Ke=(0,g.Z)(function*(at){clearTimeout(le);const Qt=yield pe(J);let qn=null;Qt&&at?.url&&(qn=function $e(Q,J){var q,we;const Fe=function Ae(Q){const J=Pe(Q),q=J.link?decodeURIComponent(J.link):void 0,we=Pe(q).link,Fe=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return Pe(Fe).link||Fe||we||q||Q}(J);if(Fe.includes("/__/auth/callback")){const _t=Pe(Fe),le=_t.firebaseError?function mt(Q){try{return JSON.parse(Q)}catch{return null}}(decodeURIComponent(_t.firebaseError)):null,ae=null===(we=null===(q=le?.code)||void 0===q?void 0:q.split("auth/"))||void 0===we?void 0:we[1],X=ae?(0,m.aw)(ae):null;return X?{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,error:X,urlResponse:null,sessionId:null,postBody:null}:{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,sessionId:Q.sessionId,urlResponse:Fe,postBody:null}}return null}(Qt,at.url)),q.onEvent(qn||it())});return function(Qt){return Ke.apply(this,arguments)}}();typeof we<"u"&&"function"==typeof we.subscribe&&we.subscribe(null,ae);const X=Fe,me=`${_t.packageName.toLowerCase()}://`;Ie().handleOpenURL=function(){var Ke=(0,g.Z)(function*(at){if(at.toLowerCase().startsWith(me)&&ae({url:at}),"function"==typeof X)try{X(at)}catch(Qt){console.error(Qt)}});return function(at){return Ke.apply(this,arguments)}}()}};function it(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,m.aw)("no-auth-event")}}function Mt(){var Q;return(null===(Q=self?.location)||void 0===Q?void 0:Q.protocol)||null}function At(Q=(0,de.z$)()){return!("file:"!==Mt()&&"ionic:"!==Mt()&&"capacitor:"!==Mt()||!Q.toLowerCase().match(/iphone|ipad|ipod|android/))}function _n(){try{const Q=self.localStorage,J=m.aI();if(Q)return Q.setItem(J,"1"),Q.removeItem(J),!function Jn(Q=(0,de.z$)()){return function vn(){return(0,de.w1)()&&11===document?.documentMode}()||function hn(Q=(0,de.z$)()){return/Edge\/\d+/.test(Q)}(Q)}()||(0,de.hl)()}catch{return jt()&&(0,de.hl)()}return!1}function jt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rn(){return(function wt(){return"http:"===Mt()||"https:"===Mt()}()||(0,de.ru)()||At())&&!function Tn(){return(0,de.b$)()||(0,de.UG)()}()&&_n()&&!jt()}function yr(){return At()&&typeof document<"u"}function Ln(){return(Ln=(0,g.Z)(function*(){return!!yr()&&new Promise(Q=>{const J=setTimeout(()=>{Q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),Q(!0)})})})).apply(this,arguments)}const ct={LOCAL:"local",NONE:"none",SESSION:"session"},Wn=m.ax,wr="persistence";function dr(Q){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(Q){yield Q._initializationPromise;const J=Ot(),q=m.aA(wr,Q.config.apiKey,Q.name);J&&J.setItem(q,Q._getPersistence())})).apply(this,arguments)}function Ot(){var Q;try{return(null===(Q=function vr(){return typeof window<"u"?window:null}())||void 0===Q?void 0:Q.sessionStorage)||null}catch{return null}}const Ht=m.ax;class Nn{constructor(){this.browserResolver=m.az(m.k),this.cordovaResolver=m.az(rt),this.underlyingResolver=null,this._redirectPersistence=m.a,this._completeRedirectFn=m.aB,this._overrideRedirectResult=m.aC}_initialize(J){var q=this;return(0,g.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,q,we,Fe){var _t=this;return(0,g.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openPopup(J,q,we,Fe)})()}_openRedirect(J,q,we,Fe){var _t=this;return(0,g.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openRedirect(J,q,we,Fe)})()}_isIframeWebStorageSupported(J,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,q)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return yr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ht(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,g.Z)(function*(){if(J.underlyingResolver)return;const q=yield function cr(){return Ln.apply(this,arguments)}();J.underlyingResolver=q?J.cordovaResolver:J.browserResolver})()}}function fn(Q){return Q.unwrap()}function Tr(Q){return ni(Q)}function ni(Q){const{_tokenResponse:J}=Q instanceof de.ZR?Q.customData:Q;if(!J)return null;if(!(Q instanceof de.ZR)&&"temporaryProof"in J&&"phoneNumber"in J)return m.P.credentialFromResult(Q);const q=J.providerId;if(!q||q===m.o.PASSWORD)return null;let we;switch(q){case m.o.GOOGLE:we=m.Q;break;case m.o.FACEBOOK:we=m.N;break;case m.o.GITHUB:we=m.T;break;case m.o.TWITTER:we=m.W;break;default:const{oauthIdToken:Fe,oauthAccessToken:_t,oauthTokenSecret:le,pendingToken:ae,nonce:X}=J;return _t||le||Fe||ae?ae?q.startsWith("saml.")?m.aL._create(q,ae):m.J._fromParams({providerId:q,signInMethod:q,pendingToken:ae,idToken:Fe,accessToken:_t}):new m.U(q).credential({idToken:Fe,accessToken:_t,rawNonce:X}):null}return Q instanceof de.ZR?we.credentialFromError(Q):we.credentialFromResult(Q)}function rn(Q,J){return J.catch(q=>{throw q instanceof de.ZR&&function hr(Q,J){var q;const we=null===(q=J.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===J?.code)J.resolver=new Gt(Q,m.an(Q,J));else if(we){const Fe=ni(J),_t=J;Fe&&(_t.credential=Fe,_t.tenantId=we.tenantId||void 0,_t.email=we.email||void 0,_t.phoneNumber=we.phoneNumber||void 0)}}(Q,q),q}).then(q=>{const Fe=q.user;return{operationType:q.operationType,credential:Tr(q),additionalUserInfo:m.al(q),user:jn.getOrCreate(Fe)}})}function ri(Q,J){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,g.Z)(function*(Q,J){const q=yield J;return{verificationId:q.verificationId,confirm:we=>rn(Q,q.confirm(we))}})).apply(this,arguments)}class Gt{constructor(J,q){this.resolver=q,this.auth=function ar(Q){return Q.wrapped()}(J)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return rn(fn(this.auth),this.resolver.resolveSignIn(J))}}class jn{constructor(J){this._delegate=J,this.multiFactor=m.ao(J)}static getOrCreate(J){return jn.USER_MAP.has(J)||jn.USER_MAP.set(J,new jn(J)),jn.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var q=this;return(0,g.Z)(function*(){return rn(q.auth,m.Z(q._delegate,J))})()}linkWithPhoneNumber(J,q){var we=this;return(0,g.Z)(function*(){return ri(we.auth,m.l(we._delegate,J,q))})()}linkWithPopup(J){var q=this;return(0,g.Z)(function*(){return rn(q.auth,m.d(q._delegate,J,Nn))})()}linkWithRedirect(J){var q=this;return(0,g.Z)(function*(){return yield dr(m.aE(q.auth)),m.g(q._delegate,J,Nn)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var q=this;return(0,g.Z)(function*(){return rn(q.auth,m._(q._delegate,J))})()}reauthenticateWithPhoneNumber(J,q){return ri(this.auth,m.r(this._delegate,J,q))}reauthenticateWithPopup(J){return rn(this.auth,m.e(this._delegate,J,Nn))}reauthenticateWithRedirect(J){var q=this;return(0,g.Z)(function*(){return yield dr(m.aE(q.auth)),m.h(q._delegate,J,Nn)})()}sendEmailVerification(J){return m.ab(this._delegate,J)}unlink(J){var q=this;return(0,g.Z)(function*(){return yield m.ak(q._delegate,J),q})()}updateEmail(J){return m.ag(this._delegate,J)}updatePassword(J){return m.ah(this._delegate,J)}updatePhoneNumber(J){return m.u(this._delegate,J)}updateProfile(J){return m.af(this._delegate,J)}verifyBeforeUpdateEmail(J,q){return m.ac(this._delegate,J,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jn.USER_MAP=new WeakMap;const lt=m.ax;let Ge=(()=>{class Q{constructor(q,we){if(this.app=q,we.isInitialized())return this._delegate=we.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Fe}=q.options;lt(Fe,"invalid-api-key",{appName:q.name}),lt(Fe,"invalid-api-key",{appName:q.name});const _t=typeof window<"u"?Nn:void 0;this._delegate=we.initialize({options:{persistence:Ut(Fe,q.name),popupRedirectResolver:_t}}),this._delegate._updateErrorMap(m.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,we){m.G(this._delegate,q,we)}applyActionCode(q){return m.a2(this._delegate,q)}checkActionCode(q){return m.a3(this._delegate,q)}confirmPasswordReset(q,we){return m.a1(this._delegate,q,we)}createUserWithEmailAndPassword(q,we){var Fe=this;return(0,g.Z)(function*(){return rn(Fe._delegate,m.a5(Fe._delegate,q,we))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return m.aa(this._delegate,q)}isSignInWithEmailLink(q){return m.a8(this._delegate,q)}getRedirectResult(){var q=this;return(0,g.Z)(function*(){lt(Rn(),q._delegate,"operation-not-supported-in-this-environment");const we=yield m.j(q._delegate,Nn);return we?rn(q._delegate,Promise.resolve(we)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function ft(Q,J){(0,m.aE)(Q)._logFramework(J)}(this._delegate,q)}onAuthStateChanged(q,we,Fe){const{next:_t,error:le,complete:ae}=bt(q,we,Fe);return this._delegate.onAuthStateChanged(_t,le,ae)}onIdTokenChanged(q,we,Fe){const{next:_t,error:le,complete:ae}=bt(q,we,Fe);return this._delegate.onIdTokenChanged(_t,le,ae)}sendSignInLinkToEmail(q,we){return m.a7(this._delegate,q,we)}sendPasswordResetEmail(q,we){return m.a0(this._delegate,q,we||void 0)}setPersistence(q){var we=this;return(0,g.Z)(function*(){let Fe;switch(function lr(Q,J){Wn(Object.values(ct).includes(J),Q,"invalid-persistence-type"),(0,de.b$)()?Wn(J!==ct.SESSION,Q,"unsupported-persistence-type"):(0,de.UG)()?Wn(J===ct.NONE,Q,"unsupported-persistence-type"):jt()?Wn(J===ct.NONE||J===ct.LOCAL&&(0,de.hl)(),Q,"unsupported-persistence-type"):Wn(J===ct.NONE||_n(),Q,"unsupported-persistence-type")}(we._delegate,q),q){case ct.SESSION:Fe=m.a;break;case ct.LOCAL:Fe=(yield m.az(m.i)._isAvailable())?m.i:m.b;break;case ct.NONE:Fe=m.L;break;default:return m.as("argument-error",{appName:we._delegate.name})}return we._delegate.setPersistence(Fe)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return rn(this._delegate,m.X(this._delegate))}signInWithCredential(q){return rn(this._delegate,m.Y(this._delegate,q))}signInWithCustomToken(q){return rn(this._delegate,m.$(this._delegate,q))}signInWithEmailAndPassword(q,we){return rn(this._delegate,m.a6(this._delegate,q,we))}signInWithEmailLink(q,we){return rn(this._delegate,m.a9(this._delegate,q,we))}signInWithPhoneNumber(q,we){return ri(this._delegate,m.s(this._delegate,q,we))}signInWithPopup(q){var we=this;return(0,g.Z)(function*(){return lt(Rn(),we._delegate,"operation-not-supported-in-this-environment"),rn(we._delegate,m.c(we._delegate,q,Nn))})()}signInWithRedirect(q){var we=this;return(0,g.Z)(function*(){return lt(Rn(),we._delegate,"operation-not-supported-in-this-environment"),yield dr(we._delegate),m.f(we._delegate,q,Nn)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return m.a4(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Q.Persistence=ct,Q})();function bt(Q,J,q){let we=Q;"function"!=typeof Q&&({next:we,error:J,complete:q}=Q);const Fe=we;return{next:le=>Fe(le&&jn.getOrCreate(le)),error:J,complete:q}}function Ut(Q,J){const q=function Vt(Q,J){const q=Ot();if(!q)return[];const we=m.aA(wr,Q,J);switch(q.getItem(we)){case ct.NONE:return[m.L];case ct.LOCAL:return[m.i,m.a];case ct.SESSION:return[m.a];default:return[]}}(Q,J);if(typeof self<"u"&&!q.includes(m.i)&&q.push(m.i),typeof window<"u")for(const we of[m.b,m.a])q.includes(we)||q.push(we);return q.includes(m.L)||q.push(m.L),q}class $t{constructor(){this.providerId="phone",this._delegate=new m.P(fn(H.Z.auth()))}static credential(J,q){return m.P.credential(J,q)}verifyPhoneNumber(J,q){return this._delegate.verifyPhoneNumber(J,q)}unwrap(){return this._delegate}}$t.PHONE_SIGN_IN_METHOD=m.P.PHONE_SIGN_IN_METHOD,$t.PROVIDER_ID=m.P.PROVIDER_ID;const sn=m.ax;class Vn{constructor(J,q,we=H.Z.app()){var Fe;sn(null===(Fe=we.options)||void 0===Fe?void 0:Fe.apiKey,"invalid-api-key",{appName:we.name}),this._delegate=new m.R(J,q,we.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function re(Q){Q.INTERNAL.registerComponent(new Ce.wA("auth-compat",J=>{const q=J.getProvider("app-compat").getImmediate(),we=J.getProvider("auth");return new Ge(q,we)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:m.A.EMAIL_SIGNIN,PASSWORD_RESET:m.A.PASSWORD_RESET,RECOVER_EMAIL:m.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:m.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:m.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:m.A.VERIFY_EMAIL}},EmailAuthProvider:m.M,FacebookAuthProvider:m.N,GithubAuthProvider:m.T,GoogleAuthProvider:m.Q,OAuthProvider:m.U,SAMLAuthProvider:m.V,PhoneAuthProvider:$t,PhoneMultiFactorGenerator:m.m,RecaptchaVerifier:Vn,TwitterAuthProvider:m.W,Auth:Ge,AuthCredential:m.H,Error:de.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Q.registerVersion("@firebase/auth-compat","0.3.5")}(H.Z)},8766:(It,Re,j)=>{j.d(Re,{Lj:()=>ke,X3:()=>et});var g=j(5861);let m,de;const Ce=new WeakMap,Ie=new WeakMap,Te=new WeakMap,oe=new WeakMap,se=new WeakMap;let He={get(Se,$e,pt){if(Se instanceof IDBTransaction){if("done"===$e)return Ie.get(Se);if("objectStoreNames"===$e)return Se.objectStoreNames||Te.get(Se);if("store"===$e)return pt.objectStoreNames[1]?void 0:pt.objectStore(pt.objectStoreNames[0])}return qe(Se[$e])},set:(Se,$e,pt)=>(Se[$e]=pt,!0),has:(Se,$e)=>Se instanceof IDBTransaction&&("done"===$e||"store"===$e)||$e in Se};function Le(Se){return"function"==typeof Se?function Dt(Se){return Se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Se)?function(...$e){return Se.apply(Ze(this),$e),qe(Ce.get(this))}:function(...$e){return qe(Se.apply(Ze(this),$e))}:function($e,...pt){const ot=Se.call(Ze(this),$e,...pt);return Te.set(ot,$e.sort?$e.sort():[$e]),qe(ot)}}(Se):(Se instanceof IDBTransaction&&function tt(Se){if(Ie.has(Se))return;const $e=new Promise((pt,ot)=>{const gt=()=>{Se.removeEventListener("complete",mt),Se.removeEventListener("error",Ae),Se.removeEventListener("abort",Ae)},mt=()=>{pt(),gt()},Ae=()=>{ot(Se.error||new DOMException("AbortError","AbortError")),gt()};Se.addEventListener("complete",mt),Se.addEventListener("error",Ae),Se.addEventListener("abort",Ae)});Ie.set(Se,$e)}(Se),((Se,$e)=>$e.some(pt=>Se instanceof pt))(Se,function he(){return m||(m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Se,He):Se)}function qe(Se){if(Se instanceof IDBRequest)return function fe(Se){const $e=new Promise((pt,ot)=>{const gt=()=>{Se.removeEventListener("success",mt),Se.removeEventListener("error",Ae)},mt=()=>{pt(qe(Se.result)),gt()},Ae=()=>{ot(Se.error),gt()};Se.addEventListener("success",mt),Se.addEventListener("error",Ae)});return $e.then(pt=>{pt instanceof IDBCursor&&Ce.set(pt,Se)}).catch(()=>{}),se.set($e,Se),$e}(Se);if(oe.has(Se))return oe.get(Se);const $e=Le(Se);return $e!==Se&&(oe.set(Se,$e),se.set($e,Se)),$e}const Ze=Se=>se.get(Se);function et(Se,$e,{blocked:pt,upgrade:ot,blocking:gt,terminated:mt}={}){const Ae=indexedDB.open(Se,$e),Pe=qe(Ae);return ot&&Ae.addEventListener("upgradeneeded",Ve=>{ot(qe(Ae.result),Ve.oldVersion,Ve.newVersion,qe(Ae.transaction))}),pt&&Ae.addEventListener("blocked",()=>pt()),Pe.then(Ve=>{mt&&Ve.addEventListener("close",()=>mt()),gt&&Ve.addEventListener("versionchange",()=>gt())}).catch(()=>{}),Pe}function ke(Se,{blocked:$e}={}){const pt=indexedDB.deleteDatabase(Se);return $e&&pt.addEventListener("blocked",()=>$e()),qe(pt).then(()=>{})}const Qe=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],ut=new Map;function pe(Se,$e){if(!(Se instanceof IDBDatabase)||$e in Se||"string"!=typeof $e)return;if(ut.get($e))return ut.get($e);const pt=$e.replace(/FromIndex$/,""),ot=$e!==pt,gt=je.includes(pt);if(!(pt in(ot?IDBIndex:IDBObjectStore).prototype)||!gt&&!Qe.includes(pt))return;const mt=function(){var Ae=(0,g.Z)(function*(Pe,...Ve){const We=this.transaction(Pe,gt?"readwrite":"readonly");let rt=We.store;return ot&&(rt=rt.index(Ve.shift())),(yield Promise.all([rt[pt](...Ve),gt&&We.done]))[0]});return function(Ve){return Ae.apply(this,arguments)}}();return ut.set($e,mt),mt}!function nt(Se){He=Se(He)}(Se=>({...Se,get:($e,pt,ot)=>pe($e,pt)||Se.get($e,pt,ot),has:($e,pt)=>!!pe($e,pt)||Se.has($e,pt)}))},5861:(It,Re,j)=>{function g(m,de,he,ye,Ce,Ie,Te){try{var oe=m[Ie](Te),se=oe.value}catch(fe){return void he(fe)}oe.done?de(se):Promise.resolve(se).then(ye,Ce)}function H(m){return function(){var de=this,he=arguments;return new Promise(function(ye,Ce){var Ie=m.apply(de,he);function Te(se){g(Ie,ye,Ce,Te,oe,"next",se)}function oe(se){g(Ie,ye,Ce,Te,oe,"throw",se)}Te(void 0)})}}j.d(Re,{Z:()=>H})}},It=>{It(It.s=9959)}]);