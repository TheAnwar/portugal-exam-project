"use strict";(self.webpackChunkexam=self.webpackChunkexam||[]).push([[179],{2011:(bt,Me,B)=>{B.d(Me,{Dh:()=>Ie,GT:()=>ve,cc:()=>He,hO:()=>nt,on:()=>ae,pX:()=>fe,xv:()=>Te});var g=B(4650),H=B(9260),m=B(2122);bt=B.hmd(bt);const he=["ngOnDestroy"],fe=(qe,Qe,ct,Fe={})=>new Proxy(qe,{get:(Be,Ge)=>ct.runOutsideAngular(()=>{var lt;if(qe[Ge])return!(null===(lt=Fe?.spy)||void 0===lt)&&lt.get&&Fe.spy.get(Ge,qe[Ge]),qe[Ge];if(he.indexOf(Ge)>-1)return()=>{};const Ze=Qe.toPromise().then(le=>{const $e=le&&le[Ge];return"function"==typeof $e?$e.bind(le):$e&&$e.then?$e.then(dt=>ct.run(()=>dt)):ct.run(()=>$e)});return new Proxy(()=>{},{get:(le,$e)=>Ze[$e],apply:(le,$e,dt)=>Ze.then(ht=>{var yt;const _t=ht&&ht(...dt);return!(null===(yt=Fe?.spy)||void 0===yt)&&yt.apply&&Fe.spy.apply(Ge,dt,_t),_t})})})}),ve=(qe,Qe)=>{Qe.forEach(ct=>{Object.getOwnPropertyNames(ct.prototype||ct).forEach(Fe=>{Object.defineProperty(qe.prototype,Fe,Object.getOwnPropertyDescriptor(ct.prototype||ct,Fe))})})};class be{constructor(Qe){return Qe}}const Ie=new g.OlP("angularfire2.app.options"),Te=new g.OlP("angularfire2.app.name");function ae(qe,Qe,ct){const Be="object"==typeof ct&&ct||{};Be.name=Be.name||"string"==typeof ct&&ct||"[DEFAULT]";const lt=H.Z.apps.filter(Ze=>Ze&&Ze.name===Be.name)[0]||Qe.runOutsideAngular(()=>H.Z.initializeApp(qe,Be));try{JSON.stringify(qe)!==JSON.stringify(lt.options)&&ie("error",`${lt.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new be(lt)}const ie=(qe,...Qe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[qe](...Qe)},pe={provide:be,useFactory:ae,deps:[Ie,g.R0b,[new g.FiY,Te]]};let nt=(()=>{class qe{constructor(ct){H.Z.registerVersion("angularfire",m.q4.full,"core"),H.Z.registerVersion("angularfire",m.q4.full,"app-compat"),H.Z.registerVersion("angular",g.q4F.full,ct.toString())}static initializeApp(ct,Fe){return{ngModule:qe,providers:[{provide:Ie,useValue:ct},{provide:Te,useValue:Fe}]}}}return qe.\u0275fac=function(ct){return new(ct||qe)(g.LFG(g.Lbi))},qe.\u0275mod=g.oAB({type:qe}),qe.\u0275inj=g.cJS({providers:[pe]}),qe})();function He(qe,Qe,ct,Fe,Be){const[,Ge,lt]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===qe)||[];if(Ge)return function it(qe,Qe){try{return qe.toString()===Qe.toString()}catch{return qe===Qe}}(Be,lt)||(Ue("error",`${Qe} was already initialized on the ${ct} Firebase App with different settings.${Ct?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:Be,was:lt})),Ge;{const Ze=Fe();return globalThis.\u0275AngularfireInstanceCache.push([qe,Ze,Be]),Ze}}const Ct=!!bt.hot,Ue=(qe,...Qe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[qe](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(bt,Me,B)=>{B.d(Me,{q4:()=>ks,iC:()=>Ri,HU:()=>Ee,vb:()=>C,JM:()=>y});var g=B(4650),H=B(259),m=B(5861),he=B(9681),fe=B(2090),ve=B(4859),be=B(1877),Ie=B(8766);const Te="@firebase/installations",ae="0.6.4",pe=`w:${ae}`,nt="FIS_v2",Qe=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ct(M){return M instanceof fe.ZR&&M.code.includes("request-failed")}function Fe({projectId:M}){return`https://firebaseinstallations.googleapis.com/v1/projects/${M}/installations`}function Be(M){return{token:M.token,requestStatus:2,expiresIn:ht(M.expiresIn),creationTime:Date.now()}}function Ge(M,k){return lt.apply(this,arguments)}function lt(){return(lt=(0,m.Z)(function*(M,k){const ne=(yield k.json()).error;return Qe.create("request-failed",{requestName:M,serverCode:ne.code,serverMessage:ne.message,serverStatus:ne.status})})).apply(this,arguments)}function Ze({apiKey:M}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M})}function le(M,{refreshToken:k}){const j=Ze(M);return j.append("Authorization",function yt(M){return`${nt} ${M}`}(k)),j}function $e(M){return dt.apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(M){const k=yield M();return k.status>=500&&k.status<600?M():k})).apply(this,arguments)}function ht(M){return Number(M.replace("s","000"))}function _t(M,k){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,m.Z)(function*({appConfig:M,heartbeatServiceProvider:k},{fid:j}){const ne=Fe(M),ge=Ze(M),xe=k.getImmediate({optional:!0});if(xe){const rn=yield xe.getHeartbeatsHeader();rn&&ge.append("x-firebase-client",rn)}const Vt={method:"POST",headers:ge,body:JSON.stringify({fid:j,authVersion:nt,appId:M.appId,sdkVersion:pe})},Kt=yield $e(()=>fetch(ne,Vt));if(Kt.ok){const rn=yield Kt.json();return{fid:rn.fid||j,registrationStatus:2,refreshToken:rn.refreshToken,authToken:Be(rn.authToken)}}throw yield Ge("Create Installation",Kt)})).apply(this,arguments)}function ke(M){return new Promise(k=>{setTimeout(k,M)})}const ze=/^[cdef][\w-]{21}$/;function ut(){try{const M=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(M),M[0]=112+M[0]%16;const j=function vt(M){return function Le(M){return btoa(String.fromCharCode(...M)).replace(/\+/g,"-").replace(/\//g,"_")}(M).substr(0,22)}(M);return ze.test(j)?j:""}catch{return""}}function tt(M){return`${M.appName}!${M.appId}`}const qt=new Map;function _e(M,k){const j=tt(M);Tt(j,k),function bn(M,k){const j=function Ln(){return!xn&&"BroadcastChannel"in self&&(xn=new BroadcastChannel("[Firebase] FID Change"),xn.onmessage=M=>{Tt(M.data.key,M.data.fid)}),xn}();j&&j.postMessage({key:M,fid:k}),function Zn(){0===qt.size&&xn&&(xn.close(),xn=null)}()}(j,k)}function Tt(M,k){const j=qt.get(M);if(j)for(const ne of j)ne(k)}let xn=null;const Hn="firebase-installations-store";let pr=null;function Ar(){return pr||(pr=(0,Ie.X3)("firebase-installations-database",1,{upgrade:(M,k)=>{0===k&&M.createObjectStore(Hn)}})),pr}function Pn(M,k){return gr.apply(this,arguments)}function gr(){return(gr=(0,m.Z)(function*(M,k){const j=tt(M),ge=(yield Ar()).transaction(Hn,"readwrite"),xe=ge.objectStore(Hn),at=yield xe.get(j);return yield xe.put(k,j),yield ge.done,(!at||at.fid!==k.fid)&&_e(M,k.fid),k})).apply(this,arguments)}function gt(M){return rr.apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(M){const k=tt(M),ne=(yield Ar()).transaction(Hn,"readwrite");yield ne.objectStore(Hn).delete(k),yield ne.done})).apply(this,arguments)}function Nr(M,k){return ir.apply(this,arguments)}function ir(){return(ir=(0,m.Z)(function*(M,k){const j=tt(M),ge=(yield Ar()).transaction(Hn,"readwrite"),xe=ge.objectStore(Hn),at=yield xe.get(j),Vt=k(at);return void 0===Vt?yield xe.delete(j):yield xe.put(Vt,j),yield ge.done,Vt&&(!at||at.fid!==Vt.fid)&&_e(M,Vt.fid),Vt})).apply(this,arguments)}function sr(M){return an.apply(this,arguments)}function an(){return(an=(0,m.Z)(function*(M){let k;const j=yield Nr(M.appConfig,ne=>{const ge=kt(ne),xe=Lt(M,ge);return k=xe.registrationPromise,xe.installationEntry});return""===j.fid?{installationEntry:yield k}:{installationEntry:j,registrationPromise:k}})).apply(this,arguments)}function kt(M){return br(M||{fid:ut(),registrationStatus:0})}function Lt(M,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(Qe.create("app-offline"))};const j={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},ne=function Yt(M,k){return ur.apply(this,arguments)}(M,j);return{installationEntry:j,registrationPromise:ne}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:wn(M)}:{installationEntry:k}}function ur(){return(ur=(0,m.Z)(function*(M,k){try{const j=yield _t(M,k);return Pn(M.appConfig,j)}catch(j){throw ct(j)&&409===j.customData.serverCode?yield gt(M.appConfig):yield Pn(M.appConfig,{fid:k.fid,registrationStatus:0}),j}})).apply(this,arguments)}function wn(M){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,m.Z)(function*(M){let k=yield Dr(M.appConfig);for(;1===k.registrationStatus;)yield ke(100),k=yield Dr(M.appConfig);if(0===k.registrationStatus){const{installationEntry:j,registrationPromise:ne}=yield sr(M);return ne||j}return k})).apply(this,arguments)}function Dr(M){return Nr(M,k=>{if(!k)throw Qe.create("installation-not-found");return br(k)})}function br(M){return function Ti(M){return 1===M.registrationStatus&&M.registrationTime+1e4<Date.now()}(M)?{fid:M.fid,registrationStatus:0}:M}function fn(M,k){return ri.apply(this,arguments)}function ri(){return(ri=(0,m.Z)(function*({appConfig:M,heartbeatServiceProvider:k},j){const ne=sn(M,j),ge=le(M,j),xe=k.getImmediate({optional:!0});if(xe){const rn=yield xe.getHeartbeatsHeader();rn&&ge.append("x-firebase-client",rn)}const Vt={method:"POST",headers:ge,body:JSON.stringify({installation:{sdkVersion:pe,appId:M.appId}})},Kt=yield $e(()=>fetch(ne,Vt));if(Kt.ok)return Be(yield Kt.json());throw yield Ge("Generate Auth Token",Kt)})).apply(this,arguments)}function sn(M,{fid:k}){return`${Fe(M)}/${k}/authTokens:generate`}function Zt(M){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,m.Z)(function*(M,k=!1){let j;const ne=yield Nr(M.appConfig,xe=>{if(!cn(xe))throw Qe.create("not-registered");const at=xe.authToken;if(!k&&On(at))return xe;if(1===at.requestStatus)return j=st(M,k),xe;{if(!navigator.onLine)throw Qe.create("app-offline");const Vt=oe(xe);return j=Ut(M,Vt),Vt}});return j?yield j:ne.authToken})).apply(this,arguments)}function st(M,k){return je.apply(this,arguments)}function je(){return(je=(0,m.Z)(function*(M,k){let j=yield Pt(M.appConfig);for(;1===j.authToken.requestStatus;)yield ke(100),j=yield Pt(M.appConfig);const ne=j.authToken;return 0===ne.requestStatus?Zt(M,k):ne})).apply(this,arguments)}function Pt(M){return Nr(M,k=>{if(!cn(k))throw Qe.create("not-registered");return function Q(M){return 1===M.requestStatus&&M.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function Ut(M,k){return on.apply(this,arguments)}function on(){return(on=(0,m.Z)(function*(M,k){try{const j=yield fn(M,k),ne=Object.assign(Object.assign({},k),{authToken:j});return yield Pn(M.appConfig,ne),j}catch(j){if(!ct(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const ne=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield Pn(M.appConfig,ne)}else yield gt(M.appConfig);throw j}})).apply(this,arguments)}function cn(M){return void 0!==M&&2===M.registrationStatus}function On(M){return 2===M.requestStatus&&!function ce(M){const k=Date.now();return k<M.creationTime||M.creationTime+M.expiresIn<k+36e5}(M)}function oe(M){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},M),{authToken:k})}function Z(){return(Z=(0,m.Z)(function*(M){const k=M,{installationEntry:j,registrationPromise:ne}=yield sr(k);return ne?ne.catch(console.error):Zt(k).catch(console.error),j.fid})).apply(this,arguments)}function Ve(){return(Ve=(0,m.Z)(function*(M,k=!1){const j=M;return yield It(j),(yield Zt(j,k)).token})).apply(this,arguments)}function It(M){return de.apply(this,arguments)}function de(){return(de=(0,m.Z)(function*(M){const{registrationPromise:k}=yield sr(M);k&&(yield k)})).apply(this,arguments)}function Gr(M){return Qe.create("missing-app-config-values",{valueName:M})}const Ur="installations",zr=M=>{const k=M.getProvider("app").getImmediate(),j=function cr(M){if(!M||!M.options)throw Gr("App Configuration");if(!M.name)throw Gr("App Name");const k=["projectId","apiKey","appId"];for(const j of k)if(!M.options[j])throw Gr(j);return{appName:M.name,projectId:M.options.projectId,apiKey:M.options.apiKey,appId:M.options.appId}}(k);return{app:k,appConfig:j,heartbeatServiceProvider:(0,he._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},xo=M=>{const k=M.getProvider("app").getImmediate(),j=(0,he._getProvider)(k,Ur).getImmediate();return{getId:()=>function J(M){return Z.apply(this,arguments)}(j),getToken:ge=>function we(M){return Ve.apply(this,arguments)}(j,ge)}};(function ds(){(0,he._registerComponent)(new ve.wA(Ur,zr,"PUBLIC")),(0,he._registerComponent)(new ve.wA("installations-internal",xo,"PRIVATE"))})(),(0,he.registerVersion)(Te,ae),(0,he.registerVersion)(Te,ae,"esm2017");const Cs="@firebase/remote-config",er=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ui{constructor(k,j,ne,ge){this.client=k,this.storage=j,this.storageCache=ne,this.logger=ge}isCachedDataFresh(k,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-j,ge=ne<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${ge}.`),ge}fetch(k){var j=this;return(0,m.Z)(function*(){const[ne,ge]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(ge&&j.isCachedDataFresh(k.cacheMaxAgeMillis,ne))return ge;k.eTag=ge&&ge.eTag;const xe=yield j.client.fetch(k),at=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===xe.status&&at.push(j.storage.setLastSuccessfulFetchResponse(xe)),yield Promise.all(at),xe})()}}function qr(M=navigator){return M.languages&&M.languages[0]||M.language}class Mo{constructor(k,j,ne,ge,xe,at){this.firebaseInstallations=k,this.sdkVersion=j,this.namespace=ne,this.projectId=ge,this.apiKey=xe,this.appId=at}fetch(k){var j=this;return(0,m.Z)(function*(){const[ne,ge]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),at=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Vt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},Kt={sdk_version:j.sdkVersion,app_instance_id:ne,app_instance_id_token:ge,app_id:j.appId,language_code:qr()},rn={method:"POST",headers:Vt,body:JSON.stringify(Kt)},kn=fetch(at,rn),hn=new Promise((cs,ro)=>{k.signal.addEventListener(()=>{const Vu=new Error("The operation was aborted.");Vu.name="AbortError",ro(Vu)})});let _s;try{yield Promise.race([kn,hn]),_s=yield kn}catch(cs){let ro="fetch-client-network";throw"AbortError"===cs?.name&&(ro="fetch-timeout"),er.create(ro,{originalErrorMessage:cs?.message})}let Di=_s.status;const Eo=_s.headers.get("ETag")||void 0;let cc,qa;if(200===_s.status){let cs;try{cs=yield _s.json()}catch(ro){throw er.create("fetch-client-parse",{originalErrorMessage:ro?.message})}cc=cs.entries,qa=cs.state}if("INSTANCE_STATE_UNSPECIFIED"===qa?Di=500:"NO_CHANGE"===qa?Di=304:("NO_TEMPLATE"===qa||"EMPTY_CONFIG"===qa)&&(cc={}),304!==Di&&200!==Di)throw er.create("fetch-status",{httpStatus:Di});return{status:Di,eTag:Eo,config:cc}})()}}class hs{constructor(k,j){this.client=k,this.storage=j}fetch(k){var j=this;return(0,m.Z)(function*(){const ne=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(k,ne)})()}attemptFetch(k,{throttleEndTimeMillis:j,backoffCount:ne}){var ge=this;return(0,m.Z)(function*(){yield function ua(M,k){return new Promise((j,ne)=>{const ge=Math.max(k-Date.now(),0),xe=setTimeout(j,ge);M.addEventListener(()=>{clearTimeout(xe),ne(er.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,j);try{const xe=yield ge.client.fetch(k);return yield ge.storage.deleteThrottleMetadata(),xe}catch(xe){if(!function Kn(M){if(!(M instanceof fe.ZR&&M.customData))return!1;const k=Number(M.customData.httpStatus);return 429===k||500===k||503===k||504===k}(xe))throw xe;const at={throttleEndTimeMillis:Date.now()+(0,fe.$s)(ne),backoffCount:ne+1};return yield ge.storage.setThrottleMetadata(at),ge.attemptFetch(k,at)}})()}}class Ss{constructor(k,j,ne,ge,xe){this.app=k,this._client=j,this._storageCache=ne,this._storage=ge,this._logger=xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fs(M,k){const j=M.target.error||void 0;return er.create(k,{originalErrorMessage:j&&j?.message})}const Pr="app_namespace_store";class Kr{constructor(k,j,ne,ge=function yi(){return new Promise((M,k)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ne=>{k(fs(ne,"storage-open"))},j.onsuccess=ne=>{M(ne.target.result)},j.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Pr,{keyPath:"compositeKey"})}}catch(j){k(er.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=k,this.appName=j,this.namespace=ne,this.openDbPromise=ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var j=this;return(0,m.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((ge,xe)=>{const Vt=ne.transaction([Pr],"readonly").objectStore(Pr),Kt=j.createCompositeKey(k);try{const rn=Vt.get(Kt);rn.onerror=kn=>{xe(fs(kn,"storage-get"))},rn.onsuccess=kn=>{const hn=kn.target.result;ge(hn?hn.value:void 0)}}catch(rn){xe(er.create("storage-get",{originalErrorMessage:rn?.message}))}})})()}set(k,j){var ne=this;return(0,m.Z)(function*(){const ge=yield ne.openDbPromise;return new Promise((xe,at)=>{const Kt=ge.transaction([Pr],"readwrite").objectStore(Pr),rn=ne.createCompositeKey(k);try{const kn=Kt.put({compositeKey:rn,value:j});kn.onerror=hn=>{at(fs(hn,"storage-set"))},kn.onsuccess=()=>{xe()}}catch(kn){at(er.create("storage-set",{originalErrorMessage:kn?.message}))}})})()}delete(k){var j=this;return(0,m.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((ge,xe)=>{const Vt=ne.transaction([Pr],"readwrite").objectStore(Pr),Kt=j.createCompositeKey(k);try{const rn=Vt.delete(Kt);rn.onerror=kn=>{xe(fs(kn,"storage-delete"))},rn.onsuccess=()=>{ge()}}catch(rn){xe(er.create("storage-delete",{originalErrorMessage:rn?.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class Pa{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,m.Z)(function*(){const j=k.storage.getLastFetchStatus(),ne=k.storage.getLastSuccessfulFetchTimestampMillis(),ge=k.storage.getActiveConfig(),xe=yield j;xe&&(k.lastFetchStatus=xe);const at=yield ne;at&&(k.lastSuccessfulFetchTimestampMillis=at);const Vt=yield ge;Vt&&(k.activeConfig=Vt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function Oa(){return ca.apply(this,arguments)}function ca(){return(ca=(0,m.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}!function uo(){(0,he._registerComponent)(new ve.wA("remote-config",function M(k,{instanceIdentifier:j}){const ne=k.getProvider("app").getImmediate(),ge=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw er.create("registration-window");if(!(0,fe.hl)())throw er.create("indexed-db-unavailable");const{projectId:xe,apiKey:at,appId:Vt}=ne.options;if(!xe)throw er.create("registration-project-id");if(!at)throw er.create("registration-api-key");if(!Vt)throw er.create("registration-app-id");const Kt=new Kr(Vt,ne.name,j=j||"firebase"),rn=new Pa(Kt),kn=new be.Yd(Cs);kn.logLevel=be.in.ERROR;const hn=new Mo(ge,he.SDK_VERSION,j,xe,at,Vt),_s=new hs(hn,Kt),Di=new Ui(_s,Kt,rn,kn),Eo=new Ss(ne,Di,rn,Kt,kn);return function Vn(M){const k=(0,fe.m9)(M);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(Eo),Eo},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(Cs,"0.4.4"),(0,he.registerVersion)(Cs,"0.4.4","esm2017")}();const vi="/firebase-messaging-sw.js",Na="/firebase-cloud-messaging-push-scope",Bi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",As="google.c.a.c_id",ka="google.c.a.c_l",Ro="google.c.a.ts",Bs="google.c.a.e";var ji=(()=>{return(M=ji||(ji={})).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked",ji;var M})();function kr(M){const k=new Uint8Array(M);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function la(M){const j=(M+"=".repeat((4-M.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(j),ge=new Uint8Array(ne.length);for(let xe=0;xe<ne.length;++xe)ge[xe]=ne.charCodeAt(xe);return ge}const js="fcm_token_details_db",Ko="fcm_token_object_Store";function $i(M){return xi.apply(this,arguments)}function xi(){return xi=(0,m.Z)(function*(M){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(xe=>xe.name).includes(js))return null;let k=null;return(yield(0,Ie.X3)(js,5,{upgrade:(ne=(0,m.Z)(function*(ge,xe,at,Vt){var Kt;if(xe<2||!ge.objectStoreNames.contains(Ko))return;const rn=Vt.objectStore(Ko),kn=yield rn.index("fcmSenderId").get(M);if(yield rn.clear(),kn)if(2===xe){const hn=kn;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;k={token:hn.fcmToken,createTime:null!==(Kt=hn.createTime)&&void 0!==Kt?Kt:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:kr(hn.vapidKey)}}}else if(3===xe){const hn=kn;k={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:kr(hn.auth),p256dh:kr(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:kr(hn.vapidKey)}}}else if(4===xe){const hn=kn;k={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:kr(hn.auth),p256dh:kr(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:kr(hn.vapidKey)}}}}),function(xe,at,Vt,Kt){return ne.apply(this,arguments)})})).close(),yield(0,Ie.Lj)(js),yield(0,Ie.Lj)("fcm_vapid_details_db"),yield(0,Ie.Lj)("undefined"),Xi(k)?k:null;var ne}),xi.apply(this,arguments)}function Xi(M){if(!M||!M.subscriptionOptions)return!1;const{subscriptionOptions:k}=M;return"number"==typeof M.createTime&&M.createTime>0&&"string"==typeof M.token&&M.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const Gs="firebase-messaging-store";let zs=null;function ho(){return zs||(zs=(0,Ie.X3)("firebase-messaging-database",1,{upgrade:(M,k)=>{0===k&&M.createObjectStore(Gs)}})),zs}function Ms(M){return fo.apply(this,arguments)}function fo(){return(fo=(0,m.Z)(function*(M){const k=Bt(M),ne=yield(yield ho()).transaction(Gs).objectStore(Gs).get(k);if(ne)return ne;{const ge=yield $i(M.appConfig.senderId);if(ge)return yield _i(M,ge),ge}})).apply(this,arguments)}function _i(M,k){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,m.Z)(function*(M,k){const j=Bt(M),ge=(yield ho()).transaction(Gs,"readwrite");return yield ge.objectStore(Gs).put(k,j),yield ge.done,k})).apply(this,arguments)}function Ot(M){return es.apply(this,arguments)}function es(){return(es=(0,m.Z)(function*(M){const k=Bt(M),ne=(yield ho()).transaction(Gs,"readwrite");yield ne.objectStore(Gs).delete(k),yield ne.done})).apply(this,arguments)}function Bt({appConfig:M}){return M.appId}const dr=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hi(M,k){return mr.apply(this,arguments)}function mr(){return(mr=(0,m.Z)(function*(M,k){const j=yield Ei(M),ne=si(k),ge={method:"POST",headers:j,body:JSON.stringify(ne)};let xe;try{xe=yield(yield fetch(wr(M.appConfig),ge)).json()}catch(at){throw dr.create("token-subscribe-failed",{errorInfo:at?.toString()})}if(xe.error)throw dr.create("token-subscribe-failed",{errorInfo:xe.error.message});if(!xe.token)throw dr.create("token-subscribe-no-token");return xe.token})).apply(this,arguments)}function Oo(M,k){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,m.Z)(function*(M,k){const j=yield Ei(M),ne=si(k.subscriptionOptions),ge={method:"PATCH",headers:j,body:JSON.stringify(ne)};let xe;try{xe=yield(yield fetch(`${wr(M.appConfig)}/${k.token}`,ge)).json()}catch(at){throw dr.create("token-update-failed",{errorInfo:at?.toString()})}if(xe.error)throw dr.create("token-update-failed",{errorInfo:xe.error.message});if(!xe.token)throw dr.create("token-update-no-token");return xe.token})).apply(this,arguments)}function Br(M,k){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,m.Z)(function*(M,k){const ne={method:"DELETE",headers:yield Ei(M)};try{const xe=yield(yield fetch(`${wr(M.appConfig)}/${k}`,ne)).json();if(xe.error)throw dr.create("token-unsubscribe-failed",{errorInfo:xe.error.message})}catch(ge){throw dr.create("token-unsubscribe-failed",{errorInfo:ge?.toString()})}})).apply(this,arguments)}function wr({projectId:M}){return`https://fcmregistrations.googleapis.com/v1/projects/${M}/registrations`}function Ei(M){return In.apply(this,arguments)}function In(){return(In=(0,m.Z)(function*({appConfig:M,installations:k}){const j=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function si({p256dh:M,auth:k,endpoint:j,vapidKey:ne}){const ge={web:{endpoint:j,auth:k,p256dh:M}};return ne!==Bi&&(ge.web.applicationPubKey=ne),ge}const Jr=6048e5;function Yo(M){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,m.Z)(function*(M){const k=yield ns(M.swRegistration,M.vapidKey),j={vapidKey:M.vapidKey,swScope:M.swRegistration.scope,endpoint:k.endpoint,auth:kr(k.getKey("auth")),p256dh:kr(k.getKey("p256dh"))},ne=yield Ms(M.firebaseDependencies);if(ne){if(No(ne.subscriptionOptions,j))return Date.now()>=ne.createTime+Jr?un(M,{token:ne.token,createTime:Date.now(),subscriptionOptions:j}):ne.token;try{yield Br(M.firebaseDependencies,ne.token)}catch(ge){console.warn(ge)}return Qo(M.firebaseDependencies,j)}return Qo(M.firebaseDependencies,j)})).apply(this,arguments)}function qs(M){return ar.apply(this,arguments)}function ar(){return(ar=(0,m.Z)(function*(M){const k=yield Ms(M.firebaseDependencies);k&&(yield Br(M.firebaseDependencies,k.token),yield Ot(M.firebaseDependencies));const j=yield M.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function un(M,k){return ts.apply(this,arguments)}function ts(){return(ts=(0,m.Z)(function*(M,k){try{const j=yield Oo(M.firebaseDependencies,k),ne=Object.assign(Object.assign({},k),{token:j,createTime:Date.now()});return yield _i(M.firebaseDependencies,ne),j}catch(j){throw yield qs(M),j}})).apply(this,arguments)}function Qo(M,k){return po.apply(this,arguments)}function po(){return(po=(0,m.Z)(function*(M,k){const ne={token:yield Hi(M,k),createTime:Date.now(),subscriptionOptions:k};return yield _i(M,ne),ne.token})).apply(this,arguments)}function ns(M,k){return ei.apply(this,arguments)}function ei(){return(ei=(0,m.Z)(function*(M,k){return(yield M.pushManager.getSubscription())||M.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:la(k)})})).apply(this,arguments)}function No(M,k){return k.vapidKey===M.vapidKey&&k.endpoint===M.endpoint&&k.auth===M.auth&&k.p256dh===M.p256dh}function eu(M){const k={from:M.from,collapseKey:M.collapse_key,messageId:M.fcmMessageId};return function Zs(M,k){if(!k.notification)return;M.notification={};const j=k.notification.title;j&&(M.notification.title=j);const ne=k.notification.body;ne&&(M.notification.body=ne);const ge=k.notification.image;ge&&(M.notification.image=ge);const xe=k.notification.icon;xe&&(M.notification.icon=xe)}(k,M),function S(M,k){k.data&&(M.data=k.data)}(k,M),function R(M,k){var j,ne,ge,xe,at;if(!(k.fcmOptions||null!==(j=k.notification)&&void 0!==j&&j.click_action))return;M.fcmOptions={};const Vt=null!==(ge=null===(ne=k.fcmOptions)||void 0===ne?void 0:ne.link)&&void 0!==ge?ge:null===(xe=k.notification)||void 0===xe?void 0:xe.click_action;Vt&&(M.fcmOptions.link=Vt);const Kt=null===(at=k.fcmOptions)||void 0===at?void 0:at.analytics_label;Kt&&(M.fcmOptions.analyticsLabel=Kt)}(k,M),k}function A(M){return"object"==typeof M&&!!M&&As in M}function z(M,k){const j=[];for(let ne=0;ne<M.length;ne++)j.push(M.charAt(ne)),ne<k.length&&j.push(k.charAt(ne));return j.join("")}function St(M){return dr.create("missing-app-config-values",{valueName:M})}z("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),z("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Nn{constructor(k,j,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ge=function Ce(M){if(!M||!M.options)throw St("App Configuration Object");if(!M.name)throw St("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:j}=M;for(const ne of k)if(!j[ne])throw St(ne);return{appName:M.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:ge,installations:j,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function Yn(M){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,m.Z)(function*(M){try{M.swRegistration=yield navigator.serviceWorker.register(vi,{scope:Na}),M.swRegistration.update().catch(()=>{})}catch(k){throw dr.create("failed-service-worker-registration",{browserErrorMessage:k?.message})}})).apply(this,arguments)}function wi(M,k){return ps.apply(this,arguments)}function ps(){return(ps=(0,m.Z)(function*(M,k){if(!k&&!M.swRegistration&&(yield Yn(M)),k||!M.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw dr.create("invalid-sw-registration");M.swRegistration=k}})).apply(this,arguments)}function rs(M,k){return go.apply(this,arguments)}function go(){return(go=(0,m.Z)(function*(M,k){k?M.vapidKey=k:M.vapidKey||(M.vapidKey=Bi)})).apply(this,arguments)}function Gi(){return(Gi=(0,m.Z)(function*(M,k){if(!navigator)throw dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dr.create("permission-blocked");return yield rs(M,k?.vapidKey),yield wi(M,k?.serviceWorkerRegistration),Yo(M)})).apply(this,arguments)}function is(M,k,j){return ko.apply(this,arguments)}function ko(){return(ko=(0,m.Z)(function*(M,k,j){const ne=ss(k);(yield M.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:j[As],message_name:j[ka],message_time:j[Ro],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ss(M){switch(M){case ji.NOTIFICATION_CLICKED:return"notification_open";case ji.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function da(){return(da=(0,m.Z)(function*(M,k){const j=k.data;if(!j.isFirebaseMessaging)return;M.onMessageHandler&&j.messageType===ji.PUSH_RECEIVED&&("function"==typeof M.onMessageHandler?M.onMessageHandler(eu(j)):M.onMessageHandler.next(eu(j)));const ne=j.data;A(ne)&&"1"===ne[Bs]&&(yield is(M,j.messageType,ne))})).apply(this,arguments)}const La="@firebase/messaging",Va=M=>{const k=new Nn(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),M.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function Fa(M,k){return da.apply(this,arguments)}(k,j)),k},Ks=M=>{const k=M.getProvider("messaging").getImmediate();return{getToken:ne=>function Fr(M,k){return Gi.apply(this,arguments)}(k,ne)}};function Ps(){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,m.Z)(function*(){try{yield(0,fe.eu)()}catch{return!1}return typeof window<"u"&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function tu(){(0,he._registerComponent)(new ve.wA("messaging",Va,"PUBLIC")),(0,he._registerComponent)(new ve.wA("messaging-internal",Ks,"PRIVATE")),(0,he.registerVersion)(La,"0.12.4"),(0,he.registerVersion)(La,"0.12.4","esm2017")}();const mo="analytics",jr="firebase_id",yo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ga="https://www.googletagmanager.com/gtag/js",Tn=new be.Yd("@firebase/analytics"),ai=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function nu(M){if(!M.startsWith(ga)){const k=ai.create("invalid-gtag-resource",{gtagURL:M});return Tn.warn(k.message),""}return M}function ja(M){return Promise.all(M.map(k=>k.catch(j=>j)))}function T(M,k){const j=function pu(M,k){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(M,k)),j}("firebase-js-sdk-policy",{createScriptURL:nu}),ne=document.createElement("script"),ge=`${ga}?l=${M}&id=${k}`;ne.src=j?j?.createScriptURL(ge):ge,ne.async=!0,document.head.appendChild(ne)}function P(M,k,j,ne,ge,xe){return G.apply(this,arguments)}function G(){return(G=(0,m.Z)(function*(M,k,j,ne,ge,xe){const at=ne[ge];try{if(at)yield k[at];else{const Kt=(yield ja(j)).find(rn=>rn.measurementId===ge);Kt&&(yield k[Kt.appId])}}catch(Vt){Tn.error(Vt)}M("config",ge,xe)})).apply(this,arguments)}function re(M,k,j,ne,ge){return Re.apply(this,arguments)}function Re(){return(Re=(0,m.Z)(function*(M,k,j,ne,ge){try{let xe=[];if(ge&&ge.send_to){let at=ge.send_to;Array.isArray(at)||(at=[at]);const Vt=yield ja(j);for(const Kt of at){const rn=Vt.find(hn=>hn.measurementId===Kt),kn=rn&&k[rn.appId];if(!kn){xe=[];break}xe.push(kn)}}0===xe.length&&(xe=Object.values(k)),yield Promise.all(xe),M("event",ne,ge||{})}catch(xe){Tn.error(xe)}})).apply(this,arguments)}function Sn(M){const k=window.document.getElementsByTagName("script");for(const j of Object.values(k))if(j.src&&j.src.includes(ga)&&j.src.includes(M))return j;return null}const Or=new class _n{constructor(k={},j=1e3){this.throttleMetadata=k,this.intervalMillis=j}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,j){this.throttleMetadata[k]=j}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function fr(M){return new Headers({Accept:"application/json","x-goog-api-key":M})}function Tr(M){return gs.apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(M){var k;const{appId:j,apiKey:ne}=M,ge={method:"GET",headers:fr(ne)},xe=yo.replace("{app-id}",j),at=yield fetch(xe,ge);if(200!==at.status&&304!==at.status){let Vt="";try{const Kt=yield at.json();null!==(k=Kt.error)&&void 0!==k&&k.message&&(Vt=Kt.error.message)}catch{}throw ai.create("config-fetch-failed",{httpStatus:at.status,responseMessage:Vt})}return at.json()})).apply(this,arguments)}function os(M){return ui.apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(M,k=Or,j){const{appId:ne,apiKey:ge,measurementId:xe}=M.options;if(!ne)throw ai.create("no-app-id");if(!ge){if(xe)return{measurementId:xe,appId:ne};throw ai.create("no-api-key")}const at=k.getThrottleMetadata(ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Vt=new Lo;return setTimeout((0,m.Z)(function*(){Vt.abort()}),void 0!==j?j:6e4),ci({appId:ne,apiKey:ge,measurementId:xe},at,Vt,k)})).apply(this,arguments)}function ci(M,k,j){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,m.Z)(function*(M,{throttleEndTimeMillis:k,backoffCount:j},ne,ge=Or){var xe;const{appId:at,measurementId:Vt}=M;try{yield Qs(ne,k)}catch(Kt){if(Vt)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vt} provided in the "measurementId" field in the local Firebase config. [${Kt?.message}]`),{appId:at,measurementId:Vt};throw Kt}try{const Kt=yield Tr(M);return ge.deleteThrottleMetadata(at),Kt}catch(Kt){const rn=Kt;if(!Js(rn)){if(ge.deleteThrottleMetadata(at),Vt)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vt} provided in the "measurementId" field in the local Firebase config. [${rn?.message}]`),{appId:at,measurementId:Vt};throw Kt}const kn=503===Number(null===(xe=rn?.customData)||void 0===xe?void 0:xe.httpStatus)?(0,fe.$s)(j,ge.intervalMillis,30):(0,fe.$s)(j,ge.intervalMillis),hn={throttleEndTimeMillis:Date.now()+kn,backoffCount:j+1};return ge.setThrottleMetadata(at,hn),Tn.debug(`Calling attemptFetch again in ${kn} millis`),ci(M,hn,ne,ge)}})).apply(this,arguments)}function Qs(M,k){return new Promise((j,ne)=>{const ge=Math.max(k-Date.now(),0),xe=setTimeout(j,ge);M.addEventListener(()=>{clearTimeout(xe),ne(ai.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function Js(M){if(!(M instanceof fe.ZR&&M.customData))return!1;const k=Number(M.customData.httpStatus);return 429===k||500===k||503===k||504===k}class Lo{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let ma,$a;function Pu(){return(Pu=(0,m.Z)(function*(M,k,j,ne,ge){if(ge&&ge.global)M("event",j,ne);else{const xe=yield k;M("event",j,Object.assign(Object.assign({},ne),{send_to:xe}))}})).apply(this,arguments)}function eo(M){$a=M}function Ou(M){ma=M}function ru(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,m.Z)(function*(){if(!(0,fe.hl)())return Tn.warn(ai.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(M){return Tn.warn(ai.create("indexeddb-unavailable",{errorInfo:M?.toString()}).message),!1}return!0})).apply(this,arguments)}function _a(){return(_a=(0,m.Z)(function*(M,k,j,ne,ge,xe,at){var Vt;const Kt=os(M);Kt.then(Di=>{j[Di.measurementId]=Di.appId,M.options.measurementId&&Di.measurementId!==M.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${M.options.measurementId}) does not match the measurement ID fetched from the server (${Di.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Di=>Tn.error(Di)),k.push(Kt);const rn=ru().then(Di=>{if(Di)return ne.getId()}),[kn,hn]=yield Promise.all([Kt,rn]);Sn(xe)||T(xe,kn.measurementId),$a&&(ge("consent","default",$a),eo(void 0)),ge("js",new Date);const _s=null!==(Vt=at?.config)&&void 0!==Vt?Vt:{};return _s.origin="firebase",_s.update=!0,null!=hn&&(_s[jr]=hn),ge("config",kn.measurementId,_s),ma&&(ge("set",ma),Ou(void 0)),kn.measurementId})).apply(this,arguments)}class Nu{constructor(k){this.app=k}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},vr=[];const Ea={};let Os,ms,to="dataLayer",Ga=!1;function iu(M,k,j){!function mu(){const M=[];if((0,fe.ru)()&&M.push("This is a browser extension environment."),(0,fe.zI)()||M.push("Cookies are not available."),M.length>0){const k=M.map((ne,ge)=>`(${ge+1}) ${ne}`).join(" "),j=ai.create("invalid-analytics-context",{errorInfo:k});Tn.warn(j.message)}}();const ne=M.options.appId;if(!ne)throw ai.create("no-app-id");if(!M.options.apiKey){if(!M.options.measurementId)throw ai.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${M.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[ne])throw ai.create("already-exists",{id:ne});if(!Ga){!function V(M){let k=[];Array.isArray(window[M])?k=window[M]:window[M]=k}(to);const{wrappedGtag:xe,gtagCore:at}=function jt(M,k,j,ne,ge){let xe=function(...at){window[ne].push(arguments)};return window[ge]&&"function"==typeof window[ge]&&(xe=window[ge]),window[ge]=function Je(M,k,j,ne){function xe(){return(xe=(0,m.Z)(function*(at,Vt,Kt){try{"event"===at?yield re(M,k,j,Vt,Kt):"config"===at?yield P(M,k,j,ne,Vt,Kt):"consent"===at?M("consent","update",Kt):M("set",Vt)}catch(rn){Tn.error(rn)}})).apply(this,arguments)}return function ge(at,Vt,Kt){return xe.apply(this,arguments)}}(xe,M,k,j),{gtagCore:xe,wrappedGtag:window[ge]}}(li,vr,Ea,to,"gtag");ms=xe,Os=at,Ga=!0}return li[ne]=function gu(M,k,j,ne,ge,xe,at){return _a.apply(this,arguments)}(M,vr,Ea,k,Os,to,j),new Nu(M)}function Ia(){return us.apply(this,arguments)}function us(){return(us=(0,m.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}const Bo="@firebase/analytics";!function ou(){(0,he._registerComponent)(new ve.wA(mo,(k,{options:j})=>iu(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,he._registerComponent)(new ve.wA("analytics-internal",function M(k){try{const j=k.getProvider(mo).getImmediate();return{logEvent:(ne,ge,xe)=>function Wn(M,k,j,ne){M=(0,fe.m9)(M),function vo(M,k,j,ne,ge){return Pu.apply(this,arguments)}(ms,li[M.app.options.appId],k,j,ne).catch(ge=>Tn.error(ge))}(j,ne,ge,xe)}}catch(j){throw ai.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,he.registerVersion)(Bo,"0.9.5"),(0,he.registerVersion)(Bo,"0.9.5","esm2017")}();var ku=B(4408),Mr=B(7565);const Fu=new class Da extends Mr.v{}(class uc extends ku.o{constructor(k,j){super(k,j),this.scheduler=k,this.work=j}schedule(k,j=0){return j>0?super.schedule(k,j):(this.delay=j,this.state=k,this.scheduler.flush(this),this)}execute(k,j){return j>0||this.closed?super.execute(k,j):this._execute(k,j)}requestAsyncId(k,j,ne=0){return null!=ne&&ne>0||null==ne&&this.delay>0?super.requestAsyncId(k,j,ne):(k.flush(this),0)}});var di=B(4986),au=B(8505),uu=B(9468),Lu=B(5363);const ks=new g.GfV("7.5.0"),no="__angularfire_symbol__analyticsIsSupportedValue",ra="__angularfire_symbol__analyticsIsSupported",qi="__angularfire_symbol__remoteConfigIsSupportedValue",ia="__angularfire_symbol__remoteConfigIsSupported",Wa="__angularfire_symbol__messagingIsSupportedValue",ba="__angularfire_symbol__messagingIsSupported";function y(M,k,j){if(k){if(1===k.length)return k[0];const xe=k.filter(at=>at.app===j);if(1===xe.length)return xe[0]}return j.container.getProvider(M).getImmediate({optional:!0})}globalThis[ra]||(globalThis[ra]=Ia().then(M=>globalThis[no]=M).catch(()=>globalThis[no]=!1)),globalThis[ba]||(globalThis[ba]=Ps().then(M=>globalThis[Wa]=M).catch(()=>globalThis[Wa]=!1)),globalThis[ia]||(globalThis[ia]=Oa().then(M=>globalThis[qi]=M).catch(()=>globalThis[qi]=!1));const C=(M,k)=>{const j=k?[k]:(0,H.C6)(),ne=[];return j.forEach(ge=>{ge.container.getProvider(M).instances.forEach(at=>{ne.includes(at)||ne.push(at)})}),ne};function N(){}class ${constructor(k,j=Fu){this.zone=k,this.delegate=j}now(){return this.delegate.now()}schedule(k,j,ne){const ge=this.zone;return this.delegate.schedule(function(at){ge.runGuarded(()=>{k.apply(this,[at])})},j,ne)}}class Y{constructor(k){this.zone=k,this.task=null}call(k,j){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",N,{},N,N)),j.pipe((0,au.b)({next:ne,complete:ne,error:ne})).subscribe(k).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ee=(()=>{class M{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new $(Zone.current)),this.insideAngular=j.run(()=>new $(Zone.current,di.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return M.\u0275fac=function(j){return new(j||M)(g.LFG(g.R0b))},M.\u0275prov=g.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function We(){const M=globalThis.\u0275AngularFireScheduler;if(!M)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return M}function Ri(M){return We(),function Ii(M){return function(j){return(j=j.lift(new Y(M.ngZone))).pipe((0,uu.R)(M.outsideAngular),(0,Lu.Q)(M.insideAngular))}}(We())(M)}},8277:(bt,Me,B)=>{B.d(Me,{$:()=>ar,A:()=>ie,D:()=>He,I:()=>mi,J:()=>ii,L:()=>vi,N:()=>cn,P:()=>w,Q:()=>$i,R:()=>au,U:()=>xs,V:()=>Gs,W:()=>zs,X:()=>Hs,Y:()=>_i,Z:()=>Yr,_:()=>dr,a:()=>ta,a0:()=>ts,a1:()=>po,a2:()=>eu,a3:()=>Ce,a4:()=>Nn,a5:()=>Mi,a6:()=>ps,a7:()=>go,a8:()=>Gi,a9:()=>ko,aA:()=>le,aB:()=>Ef,aC:()=>Ut,aD:()=>On,aE:()=>nl,aF:()=>Kt,aG:()=>Vt,aH:()=>ln,aL:()=>Xs,aO:()=>Ms,aa:()=>ss,ab:()=>da,ac:()=>La,ad:()=>tu,ae:()=>Fo,af:()=>Xo,ai:()=>Ua,aj:()=>Ba,ak:()=>mo,an:()=>Br,ao:()=>ja,aq:()=>_n,ar:()=>Ys,as:()=>dt,at:()=>se,au:()=>Ve,av:()=>Fe,aw:()=>$o,ax:()=>Df,ay:()=>X,az:()=>Be,b:()=>Vo,c:()=>xt,d:()=>Ii,e:()=>$r,f:()=>hn,g:()=>cs,h:()=>Eo,i:()=>us,j:()=>td,k:()=>Rt,l:()=>ra,m:()=>Ci,p:()=>Ie,r:()=>ia,s:()=>ks,u:()=>vf});var g=B(5861),H=B(2090),m=B(9681),he=B(655),fe=B(1877),ve=B(4859);const Ie={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const He=function pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},it=function nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new fe.Yd("@firebase/auth");function ct(E,...d){qe.logLevel<=fe.in.ERROR&&qe.error(`Auth (${m.SDK_VERSION}): ${E}`,...d)}function Fe(E,...d){throw Ze(E,...d)}function Be(E,...d){return Ze(E,...d)}function Ge(E,d,f){const I=Object.assign(Object.assign({},it()),{[d]:f});return new H.LL("auth","Firebase",I).create(d,{appName:E.name})}function lt(E,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Fe(E,"argument-error"),Ge(E,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(E,...d){if("string"!=typeof E){const f=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(f,...I)}return Ct.create(E,...d)}function le(E,d,...f){if(!E)throw Ze(d,...f)}function $e(E){const d="INTERNAL ASSERTION FAILED: "+E;throw ct(d),new Error(d)}function dt(E,d){E||$e(d)}function ht(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function yt(){return"http:"===_t()||"https:"===_t()}function _t(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Le{constructor(d,f){this.shortDelay=d,this.longDelay=f,dt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function Ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yt()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ze(E,d){dt(E.emulator,"Emulator should always be set here");const{url:f}=E.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class rt{static initialize(d,f,I){this.fetchImpl=d,f&&(this.headersImpl=f),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void $e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void $e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void $e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ut={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},vt=new Le(3e4,6e4);function tt(E,d){return E.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:E.tenantId}):d}function qt(E,d,f,I){return _e.apply(this,arguments)}function _e(){return(_e=(0,g.Z)(function*(E,d,f,I,U={}){return nn(E,U,(0,g.Z)(function*(){let q={},te={};I&&("GET"===d?te=I:q={body:JSON.stringify(I)});const Oe=(0,H.xO)(Object.assign({key:E.config.apiKey},te)).slice(1),Et=yield E._getAdditionalHeaders();return Et["Content-Type"]="application/json",E.languageCode&&(Et["X-Firebase-Locale"]=E.languageCode),rt.fetch()(xn(E,E.config.apiHost,f,Oe),Object.assign({method:d,headers:Et,referrerPolicy:"no-referrer"},q))}))})).apply(this,arguments)}function nn(E,d,f){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,g.Z)(function*(E,d,f){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},ut),d);try{const U=new Ln(E),q=yield Promise.race([f(),U.promise]);U.clearNetworkTimeout();const te=yield q.json();if("needConfirmation"in te)throw Zn(E,"account-exists-with-different-credential",te);if(q.ok&&!("errorMessage"in te))return te;{const Oe=q.ok?te.errorMessage:te.error.message,[Et,Dt]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Et)throw Zn(E,"credential-already-in-use",te);if("EMAIL_EXISTS"===Et)throw Zn(E,"email-already-in-use",te);if("USER_DISABLED"===Et)throw Zn(E,"user-disabled",te);const Xt=I[Et]||Et.toLowerCase().replace(/[_\s]+/g,"-");if(Dt)throw Ge(E,Xt,Dt);Fe(E,Xt)}}catch(U){if(U instanceof H.ZR)throw U;Fe(E,"network-request-failed",{message:String(U)})}})).apply(this,arguments)}function Tt(E,d,f,I){return bn.apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(E,d,f,I,U={}){const q=yield qt(E,d,f,I,U);return"mfaPendingCredential"in q&&Fe(E,"multi-factor-auth-required",{_serverResponse:q}),q})).apply(this,arguments)}function xn(E,d,f,I){const U=`${d}${f}?${I}`;return E.config.emulator?ze(E.config,U):`${E.config.apiScheme}://${U}`}class Ln{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,I)=>{this.timer=setTimeout(()=>I(Be(this.auth,"network-request-failed")),vt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zn(E,d,f){const I={appName:E.name};f.email&&(I.email=f.email),f.phoneNumber&&(I.phoneNumber=f.phoneNumber);const U=Be(E,d,I);return U.customData._tokenResponse=f,U}function Gt(){return(Gt=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Hn(E,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ar(E,d){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function gr(E){if(E)try{const d=new Date(Number(E));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Nr(){return(Nr=(0,g.Z)(function*(E,d=!1){const f=(0,H.m9)(E),I=yield f.getIdToken(d),U=sr(I);le(U&&U.exp&&U.auth_time&&U.iat,f.auth,"internal-error");const q="object"==typeof U.firebase?U.firebase:void 0,te=q?.sign_in_provider;return{claims:U,token:I,authTime:gr(ir(U.auth_time)),issuedAtTime:gr(ir(U.iat)),expirationTime:gr(ir(U.exp)),signInProvider:te||null,signInSecondFactor:q?.sign_in_second_factor||null}})).apply(this,arguments)}function ir(E){return 1e3*Number(E)}function sr(E){const[d,f,I]=E.split(".");if(void 0===d||void 0===f||void 0===I)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,H.tV)(f);return U?JSON.parse(U):(ct("Failed to decode base64 JWT payload"),null)}catch(U){return ct("Caught error parsing JWT payload as JSON",U?.toString()),null}}function kt(E,d){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(E,d,f=!1){if(f)return d;try{return yield d}catch(I){throw I instanceof H.ZR&&Yt(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}function Yt({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class ur{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const U=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),I)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class wn{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gn(E){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(E){var d;const f=E.auth,I=yield E.getIdToken(),U=yield kt(E,Ar(f,{idToken:I}));le(U?.users.length,f,"internal-error");const q=U.users[0];E._notifyReloadListener(q);const te=null!==(d=q.providerUserInfo)&&void 0!==d&&d.length?ri(q.providerUserInfo):[],Oe=fn(E.providerData,te),Xt=!!E.isAnonymous&&!(E.email&&q.passwordHash||Oe?.length),yn={uid:q.localId,displayName:q.displayName||null,photoURL:q.photoUrl||null,email:q.email||null,emailVerified:q.emailVerified||!1,phoneNumber:q.phoneNumber||null,tenantId:q.tenantId||null,providerData:Oe,metadata:new wn(q.createdAt,q.lastLoginAt),isAnonymous:Xt};Object.assign(E,yn)})).apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(E){const d=(0,H.m9)(E);yield Gn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function fn(E,d){return[...E.filter(I=>!d.some(U=>U.providerId===I.providerId)),...d]}function ri(E){return E.map(d=>{var{providerId:f}=d,I=(0,he._T)(d,["providerId"]);return{providerId:f,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Zt(){return(Zt=(0,g.Z)(function*(E,d){const f=yield nn(E,{},(0,g.Z)(function*(){const I=(0,H.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:U,apiKey:q}=E.config,te=xn(E,U,"/v1/token",`key=${q}`),Oe=yield E._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",rt.fetch()(te,{method:"POST",headers:Oe,body:I})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Mn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){le(d.idToken,"internal-error"),le(typeof d.idToken<"u","internal-error"),le(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function an(E){const d=sr(E);return le(d,"internal-error"),le(typeof d.exp<"u","internal-error"),le(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var I=this;return(0,g.Z)(function*(){return le(!I.accessToken||I.refreshToken,d,"user-token-expired"),f||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var I=this;return(0,g.Z)(function*(){const{accessToken:U,refreshToken:q,expiresIn:te}=yield function sn(E,d){return Zt.apply(this,arguments)}(d,f);I.updateTokensAndExpiration(U,q,Number(te))})()}updateTokensAndExpiration(d,f,I){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,f){const{refreshToken:I,accessToken:U,expirationTime:q}=f,te=new Mn;return I&&(le("string"==typeof I,"internal-error",{appName:d}),te.refreshToken=I),U&&(le("string"==typeof U,"internal-error",{appName:d}),te.accessToken=U),q&&(le("number"==typeof q,"internal-error",{appName:d}),te.expirationTime=q),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Mn,this.toJSON())}_performRefresh(){return $e("not implemented")}}function st(E,d){le("string"==typeof E||typeof E>"u","internal-error",{appName:d})}class je{constructor(d){var{uid:f,auth:I,stsTokenManager:U}=d,q=(0,he._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ur(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=I,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=q.displayName||null,this.email=q.email||null,this.emailVerified=q.emailVerified||!1,this.phoneNumber=q.phoneNumber||null,this.photoURL=q.photoURL||null,this.isAnonymous=q.isAnonymous||!1,this.tenantId=q.tenantId||null,this.providerData=q.providerData?[...q.providerData]:[],this.metadata=new wn(q.createdAt||void 0,q.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,g.Z)(function*(){const I=yield kt(f,f.stsTokenManager.getToken(f.auth,d));return le(I,f.auth,"internal-error"),f.accessToken!==I&&(f.accessToken=I,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),I})()}getIdTokenResult(d){return function rr(E){return Nr.apply(this,arguments)}(this,d)}reload(){return function br(E){return Ti.apply(this,arguments)}(this)}_assign(d){this!==d&&(le(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new je(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var I=this;return(0,g.Z)(function*(){let U=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),U=!0),f&&(yield Gn(I)),yield I.auth._persistUserIfCurrent(I),U&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,g.Z)(function*(){const f=yield d.getIdToken();return yield kt(d,function vn(E,d){return Gt.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var I,U,q,te,Oe,Et,Dt,Xt;const yn=null!==(I=f.displayName)&&void 0!==I?I:void 0,Pi=null!==(U=f.email)&&void 0!==U?U:void 0,Ho=null!==(q=f.phoneNumber)&&void 0!==q?q:void 0,pc=null!==(te=f.photoURL)&&void 0!==te?te:void 0,Xd=null!==(Oe=f.tenantId)&&void 0!==Oe?Oe:void 0,Io=null!==(Et=f._redirectEventId)&&void 0!==Et?Et:void 0,Hu=null!==(Dt=f.createdAt)&&void 0!==Dt?Dt:void 0,eh=null!==(Xt=f.lastLoginAt)&&void 0!==Xt?Xt:void 0,{uid:cl,emailVerified:Za,isAnonymous:ll,providerData:Pe,stsTokenManager:gc}=f;le(cl&&gc,d,"internal-error");const Do=Mn.fromJSON(this.name,gc);le("string"==typeof cl,d,"internal-error"),st(yn,d.name),st(Pi,d.name),le("boolean"==typeof Za,d,"internal-error"),le("boolean"==typeof ll,d,"internal-error"),st(Ho,d.name),st(pc,d.name),st(Xd,d.name),st(Io,d.name),st(Hu,d.name),st(eh,d.name);const mc=new je({uid:cl,auth:d,email:Pi,emailVerified:Za,displayName:yn,isAnonymous:ll,photoURL:pc,phoneNumber:Ho,tenantId:Xd,stsTokenManager:Do,createdAt:Hu,lastLoginAt:eh});return Pe&&Array.isArray(Pe)&&(mc.providerData=Pe.map(yc=>Object.assign({},yc))),Io&&(mc._redirectEventId=Io),mc}static _fromIdTokenResponse(d,f,I=!1){return(0,g.Z)(function*(){const U=new Mn;U.updateFromServerResponse(f);const q=new je({uid:f.localId,auth:d,stsTokenManager:U,isAnonymous:I});return yield Gn(q),q})()}}const Pt=new Map;function Ut(E){dt(E instanceof Function,"Expected a class definition");let d=Pt.get(E);return d?(dt(d instanceof E,"Instance stored in cache mismatched with class"),d):(d=new E,Pt.set(E,d),d)}const cn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,I){var U=this;return(0,g.Z)(function*(){U.storage[f]=I})()}_get(f){var I=this;return(0,g.Z)(function*(){const U=I.storage[f];return void 0===U?null:U})()}_remove(f){var I=this;return(0,g.Z)(function*(){delete I.storage[f]})()}_addListener(f,I){}_removeListener(f,I){}}return E.type="NONE",E})();function On(E,d,f){return`firebase:${E}:${d}:${f}`}class ce{constructor(d,f,I){this.persistence=d,this.auth=f,this.userKey=I;const{config:U,name:q}=this.auth;this.fullUserKey=On(this.userKey,U.apiKey,q),this.fullPersistenceKey=On("persistence",U.apiKey,q),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?je._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,g.Z)(function*(){if(f.persistence===d)return;const I=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,I?f.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,I="authUser"){return(0,g.Z)(function*(){if(!f.length)return new ce(Ut(cn),d,I);const U=(yield Promise.all(f.map(function(){var Dt=(0,g.Z)(function*(Xt){if(yield Xt._isAvailable())return Xt});return function(Xt){return Dt.apply(this,arguments)}}()))).filter(Dt=>Dt);let q=U[0]||Ut(cn);const te=On(I,d.config.apiKey,d.name);let Oe=null;for(const Dt of f)try{const Xt=yield Dt._get(te);if(Xt){const yn=je._fromJSON(d,Xt);Dt!==q&&(Oe=yn),q=Dt;break}}catch{}const Et=U.filter(Dt=>Dt._shouldAllowMigration);return q._shouldAllowMigration&&Et.length?(q=Et[0],Oe&&(yield q._set(te,Oe.toJSON())),yield Promise.all(f.map(function(){var Dt=(0,g.Z)(function*(Xt){if(Xt!==q)try{yield Xt._remove(te)}catch{}});return function(Xt){return Dt.apply(this,arguments)}}())),new ce(q,d,I)):new ce(q,d,I)})()}}function oe(E){const d=E.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(we(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Q(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(It(d))return"Blackberry";if(de(d))return"Webos";if(J(d))return"Safari";if((d.includes("chrome/")||Z(d))&&!d.includes("edge/"))return"Chrome";if(Ve(d))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Q(E=(0,H.z$)()){return/firefox\//i.test(E)}function J(E=(0,H.z$)()){const d=E.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Z(E=(0,H.z$)()){return/crios\//i.test(E)}function we(E=(0,H.z$)()){return/iemobile/i.test(E)}function Ve(E=(0,H.z$)()){return/android/i.test(E)}function It(E=(0,H.z$)()){return/blackberry/i.test(E)}function de(E=(0,H.z$)()){return/webos/i.test(E)}function se(E=(0,H.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function X(E=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function ot(E=(0,H.z$)()){return se(E)||Ve(E)||de(E)||It(E)||/windows phone/i.test(E)||we(E)}function zn(E,d=[]){let f;switch(E){case"Browser":f=oe((0,H.z$)());break;case"Worker":f=`${oe((0,H.z$)())}-${E}`;break;default:f=E}const I=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${m.SDK_VERSION}/${I}`}function Gr(){return(Gr=(0,g.Z)(function*(E){return(yield qt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ur(E,d){return bs.apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(E,d){return qt(E,"GET","/v2/recaptchaConfig",tt(E,d))})).apply(this,arguments)}function zr(E){return void 0!==E&&void 0!==E.getResponse}function xo(E){return void 0!==E&&void 0!==E.enterprise}class ds{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(f=>"EMAIL_PASSWORD_PROVIDER"===f.provider&&"OFF"!==f.enforcementState)}}function Vs(E){return new Promise((d,f)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=d,I.onerror=U=>{const q=Be("internal-error");q.customData=U,f(q)},I.type="text/javascript",I.charset="UTF-8",function Cs(){var E,d;return null!==(d=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==d?d:document}().appendChild(I)})}function Cn(E){return`__${E}${Math.floor(1e6*Math.random())}`}class er{constructor(d){this.type="recaptcha-enterprise",this.auth=ln(d)}verify(d="verify",f=!1){var I=this;return(0,g.Z)(function*(){function q(){return q=(0,g.Z)(function*(Oe){if(!f){if(null==Oe.tenantId&&null!=Oe._agentRecaptchaConfig)return Oe._agentRecaptchaConfig.siteKey;if(null!=Oe.tenantId&&void 0!==Oe._tenantRecaptchaConfigs[Oe.tenantId])return Oe._tenantRecaptchaConfigs[Oe.tenantId].siteKey}return new Promise(function(){var Et=(0,g.Z)(function*(Dt,Xt){Ur(Oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(yn=>{if(void 0!==yn.recaptchaKey){const Pi=new ds(yn);return null==Oe.tenantId?Oe._agentRecaptchaConfig=Pi:Oe._tenantRecaptchaConfigs[Oe.tenantId]=Pi,Dt(Pi.siteKey)}Xt(new Error("recaptcha Enterprise site key undefined"))}).catch(yn=>{Xt(yn)})});return function(Dt,Xt){return Et.apply(this,arguments)}}())}),q.apply(this,arguments)}function te(Oe,Et,Dt){const Xt=window.grecaptcha;xo(Xt)?Xt.enterprise.ready(()=>{try{Xt.enterprise.execute(Oe,{action:d}).then(yn=>{Et(yn)}).catch(yn=>{Dt(yn)})}catch(yn){Dt(yn)}}):Dt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Oe,Et)=>{(function U(Oe){return q.apply(this,arguments)})(I.auth).then(Dt=>{if(!f&&xo(window.grecaptcha))te(Dt,Oe,Et);else{if(typeof window>"u")return void Et(new Error("RecaptchaVerifier is only supported in browser"));Vs("https://www.google.com/recaptcha/enterprise.js?render="+Dt).then(()=>{te(Dt,Oe,Et)}).catch(Xt=>{Et(Xt)})}}).catch(Dt=>{Et(Dt)})})})()}}function _r(E,d,f){return gi.apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(E,d,f,I=!1){const U=new er(E);let q;try{q=yield U.verify(f)}catch{q=yield U.verify(f,!0)}const te=Object.assign({},d);return Object.assign(te,I?{captchaResp:q}:{captchaResponse:q}),Object.assign(te,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(te,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),te})).apply(this,arguments)}class Mt{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const I=q=>new Promise((te,Oe)=>{try{te(d(q))}catch(Et){Oe(Et)}});I.onAbort=f,this.queue.push(I);const U=this.queue.length-1;return()=>{this.queue[U]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,g.Z)(function*(){if(f.auth.currentUser===d)return;const I=[];try{for(const U of f.queue)yield U(d),U.onAbort&&I.push(U.onAbort)}catch(U){I.reverse();for(const q of I)try{q()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:U?.message})}})()}}class tn{constructor(d,f,I,U){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=I,this.config=U,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wr(this),this.idTokenSubscription=new Wr(this),this.beforeStateQueue=new Mt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=U.sdkClientVersion}_initializeWithPersistence(d,f){var I=this;return f&&(this._popupRedirectResolver=Ut(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var U,q;if(!I._deleted&&(I.persistenceManager=yield ce.create(I,d),!I._deleted)){if(null!==(U=I._popupRedirectResolver)&&void 0!==U&&U._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(f),I.lastNotifiedUid=(null===(q=I.currentUser)||void 0===q?void 0:q.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,g.Z)(function*(){var I;const U=yield f.assertedPersistence.getCurrentUser();let q=U,te=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Oe=null===(I=f.redirectUser)||void 0===I?void 0:I._redirectEventId,Et=q?._redirectEventId,Dt=yield f.tryRedirectSignIn(d);(!Oe||Oe===Et)&&Dt?.user&&(q=Dt.user,te=!0)}if(!q)return f.directlySetCurrentUser(null);if(!q._redirectEventId){if(te)try{yield f.beforeStateQueue.runMiddleware(q)}catch(Oe){q=U,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Oe))}return q?f.reloadAndSetCurrentUserOrClear(q):f.directlySetCurrentUser(null)}return le(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===q._redirectEventId?f.directlySetCurrentUser(q):f.reloadAndSetCurrentUserOrClear(q)})()}tryRedirectSignIn(d){var f=this;return(0,g.Z)(function*(){let I=null;try{I=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,g.Z)(function*(){try{yield Gn(d)}catch(I){if("auth/network-request-failed"!==I?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function ke(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,g.Z)(function*(){const I=d?(0,H.m9)(d):null;return I&&le(I.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(I&&I._clone(f))})()}_updateCurrentUser(d,f=!1){var I=this;return(0,g.Z)(function*(){if(!I._deleted)return d&&le(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),f||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,g.Z)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(Ut(d))}))}initializeRecaptchaConfig(){var d=this;return(0,g.Z)(function*(){const f=yield Ur(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new ds(f);null==d.tenantId?d._agentRecaptchaConfig=I:d._tenantRecaptchaConfigs[d.tenantId]=I,I.emailPasswordEnabled&&new er(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new H.LL("auth","Firebase",d())}onAuthStateChanged(d,f,I){return this.registerStateListener(this.authStateSubscription,d,f,I)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,I){return this.registerStateListener(this.idTokenSubscription,d,f,I)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var I=this;return(0,g.Z)(function*(){const U=yield I.getOrInitRedirectPersistenceManager(f);return null===d?U.removeCurrentUser():U.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const I=d&&Ut(d)||f._popupRedirectResolver;le(I,f,"argument-error"),f.redirectPersistenceManager=yield ce.create(f,[Ut(I._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,g.Z)(function*(){var I,U;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(I=f._currentUser)||void 0===I?void 0:I._redirectEventId)===d?f._currentUser:(null===(U=f.redirectUser)||void 0===U?void 0:U._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,g.Z)(function*(){if(d===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,I,U){if(this._deleted)return()=>{};const q="function"==typeof f?f:f.next.bind(f),te=this._isInitialized?Promise.resolve():this._initializationPromise;return le(te,this,"internal-error"),te.then(()=>q(this.currentUser)),"function"==typeof f?d.addObserver(f,I,U):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var f;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const U=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();U&&(I["X-Firebase-Client"]=U);const q=yield d._getAppCheckToken();return q&&(I["X-Firebase-AppCheck"]=q),I})()}_getAppCheckToken(){var d=this;return(0,g.Z)(function*(){var f;const I=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return I?.error&&function Qe(E,...d){qe.logLevel<=fe.in.WARN&&qe.warn(`Auth (${m.SDK_VERSION}): ${E}`,...d)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function ln(E){return(0,H.m9)(E)}class Wr{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,H.ne)(f=>this.observer=f)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mi(E,d,f){const I=ln(E);le(I._canInitEmulator,I,"emulator-config-failed"),le(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const U=!!f?.disableWarnings,q=Vn(d),{host:te,port:Oe}=function Zo(E){const d=Vn(E),f=/(\/\/)?([^?#/]+)/.exec(E.substr(d.length));if(!f)return{host:"",port:null};const I=f[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(I);if(U){const q=U[1];return{host:q,port:Ji(I.substr(q.length+1))}}{const[q,te]=I.split(":");return{host:q,port:Ji(te)}}}(d);I.config.emulator={url:`${q}//${te}${null===Oe?"":`:${Oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:te,port:Oe,protocol:q.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function pn(){function E(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function Vn(E){const d=E.indexOf(":");return d<0?"":E.substr(0,d+1)}function Ji(E){if(!E)return null;const d=Number(E);return isNaN(d)?null:d}class ii{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return $e("not implemented")}_getIdTokenResponse(d){return $e("not implemented")}_linkToIdToken(d,f){return $e("not implemented")}_getReauthenticationResolver(d){return $e("not implemented")}}function Si(E,d){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:resetPassword",tt(E,d))})).apply(this,arguments)}function Cr(E,d){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ts(E,d){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:update",tt(E,d))})).apply(this,arguments)}function qr(E,d){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,g.Z)(function*(E,d){return Tt(E,"POST","/v1/accounts:signInWithPassword",tt(E,d))})).apply(this,arguments)}function ua(E,d){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:sendOobCode",tt(E,d))})).apply(this,arguments)}function hs(E,d){return ao.apply(this,arguments)}function ao(){return(ao=(0,g.Z)(function*(E,d){return ua(E,d)})).apply(this,arguments)}function Us(E,d){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(E,d){return ua(E,d)})).apply(this,arguments)}function fs(E,d){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(E,d){return ua(E,d)})).apply(this,arguments)}function Zr(E,d){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,g.Z)(function*(E,d){return ua(E,d)})).apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(E,d){return Tt(E,"POST","/v1/accounts:signInWithEmailLink",tt(E,d))})).apply(this,arguments)}function uo(){return(uo=(0,g.Z)(function*(E,d){return Tt(E,"POST","/v1/accounts:signInWithEmailLink",tt(E,d))})).apply(this,arguments)}class co extends ii{constructor(d,f,I,U=null){super("password",I),this._email=d,this._password=f,this._tenantId=U}static _fromEmailAndPassword(d,f){return new co(d,f,"password")}static _fromEmailAndCode(d,f,I=null){return new co(d,f,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,g.Z)(function*(){var I;switch(f.signInMethod){case"password":const U={returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=d._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const q=yield _r(d,U,"signInWithPassword");return qr(d,q)}return qr(d,U).catch(function(){var q=(0,g.Z)(function*(te){if("auth/missing-recaptcha-token"===te.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Oe=yield _r(d,U,"signInWithPassword");return qr(d,Oe)}return Promise.reject(te)});return function(te){return q.apply(this,arguments)}}());case"emailLink":return function yi(E,d){return Kr.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Fe(d,"internal-error")}})()}_linkToIdToken(d,f){var I=this;return(0,g.Z)(function*(){switch(I.signInMethod){case"password":return Cr(d,{idToken:f,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Pa(E,d){return uo.apply(this,arguments)}(d,{idToken:f,email:I._email,oobCode:I._password});default:Fe(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Er(E,d){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,g.Z)(function*(E,d){return Tt(E,"POST","/v1/accounts:signInWithIdp",tt(E,d))})).apply(this,arguments)}class vi extends ii{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new vi(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Fe("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:U}=f,q=(0,he._T)(f,["providerId","signInMethod"]);if(!I||!U)return null;const te=new vi(I,U);return te.idToken=q.idToken||void 0,te.accessToken=q.accessToken||void 0,te.secret=q.secret,te.nonce=q.nonce,te.pendingToken=q.pendingToken||null,te}_getIdTokenResponse(d){return Er(d,this.buildRequest())}_linkToIdToken(d,f){const I=this.buildRequest();return I.idToken=f,Er(d,I)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Er(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,H.xO)(f)}return d}}function Na(E,d){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:sendVerificationCode",tt(E,d))})).apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(E,d){return Tt(E,"POST","/v1/accounts:signInWithPhoneNumber",tt(E,d))})).apply(this,arguments)}function Ro(){return(Ro=(0,g.Z)(function*(E,d){const f=yield Tt(E,"POST","/v1/accounts:signInWithPhoneNumber",tt(E,d));if(f.temporaryProof)throw Zn(E,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Bs={USER_NOT_FOUND:"user-not-found"};function ji(){return(ji=(0,g.Z)(function*(E,d){return Tt(E,"POST","/v1/accounts:signInWithPhoneNumber",tt(E,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Bs)})).apply(this,arguments)}class kr extends ii{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new kr({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new kr({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function lo(E,d){return As.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function ka(E,d){return Ro.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Po(E,d){return ji.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:I,verificationCode:U}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:I,code:U}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:I,phoneNumber:U,temporaryProof:q}=d;return I||f||U||q?new kr({verificationId:f,verificationCode:I,phoneNumber:U,temporaryProof:q}):null}}class $s{constructor(d){var f,I,U,q,te,Oe;const Et=(0,H.zd)((0,H.pd)(d)),Dt=null!==(f=Et.apiKey)&&void 0!==f?f:null,Xt=null!==(I=Et.oobCode)&&void 0!==I?I:null,yn=function la(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=Et.mode)&&void 0!==U?U:null);le(Dt&&Xt&&yn,"argument-error"),this.apiKey=Dt,this.operation=yn,this.code=Xt,this.continueUrl=null!==(q=Et.continueUrl)&&void 0!==q?q:null,this.languageCode=null!==(te=Et.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Oe=Et.tenantId)&&void 0!==Oe?Oe:null}static parseLink(d){const f=function js(E){const d=(0,H.zd)((0,H.pd)(E)).link,f=d?(0,H.zd)((0,H.pd)(d)).deep_link_id:null,I=(0,H.zd)((0,H.pd)(E)).deep_link_id;return(I?(0,H.zd)((0,H.pd)(I)).link:null)||I||f||d||E}(d);try{return new $s(f)}catch{return null}}}let $i=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(f,I){return co._fromEmailAndPassword(f,I)}static credentialWithLink(f,I){const U=$s.parseLink(I);return le(U,"argument-error"),co._fromEmailAndCode(f,U.code,U.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class xi{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Xi extends xi{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Hs extends Xi{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return le("providerId"in f&&"signInMethod"in f,"argument-error"),vi._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return le(d.idToken||d.accessToken,"argument-error"),vi._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Hs.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Hs.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:I,oauthTokenSecret:U,pendingToken:q,nonce:te,providerId:Oe}=d;if(!I&&!U&&!f&&!q||!Oe)return null;try{return new Hs(Oe)._credential({idToken:f,accessToken:I,nonce:te,pendingToken:q})}catch{return null}}}let xs=(()=>{class E extends Xi{constructor(){super("facebook.com")}static credential(f){return vi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return E.credential(f.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Gs=(()=>{class E extends Xi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,I){return vi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:I})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:I,oauthAccessToken:U}=f;if(!I&&!U)return null;try{return E.credential(I,U)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),zs=(()=>{class E extends Xi{constructor(){super("github.com")}static credential(f){return vi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return E.credential(f.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ms extends ii{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Er(d,this.buildRequest())}_linkToIdToken(d,f){const I=this.buildRequest();return I.idToken=f,Er(d,I)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Er(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:U,pendingToken:q}=f;return I&&U&&q&&I===U?new Ms(I,q):null}static _create(d,f){return new Ms(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _i extends xi{constructor(d){le(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return _i.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return _i.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Ms.fromJSON(d);return le(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:I}=d;if(!f||!I)return null;try{return Ms._create(I,f)}catch{return null}}}let Yr=(()=>{class E extends Xi{constructor(){super("twitter.com")}static credential(f,I){return vi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:I})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:I,oauthTokenSecret:U}=f;if(!I||!U)return null;try{return E.credential(I,U)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ot(E,d){return es.apply(this,arguments)}function es(){return(es=(0,g.Z)(function*(E,d){return Tt(E,"POST","/v1/accounts:signUp",tt(E,d))})).apply(this,arguments)}class Bt{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,I,U=!1){return(0,g.Z)(function*(){const q=yield je._fromIdTokenResponse(d,I,U),te=Qr(I);return new Bt({user:q,providerId:te,_tokenResponse:I,operationType:f})})()}static _forOperation(d,f,I){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const U=Qr(I);return new Bt({user:d,providerId:U,_tokenResponse:I,operationType:f})})()}}function Qr(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function dr(E){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(E){var d;const f=ln(E);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new Bt({user:f.currentUser,providerId:null,operationType:"signIn"});const I=yield Ot(f,{returnSecureToken:!0}),U=yield Bt._fromIdTokenResponse(f,"signIn",I,!0);return yield f._updateCurrentUser(U.user),U})).apply(this,arguments)}class mr extends H.ZR{constructor(d,f,I,U){var q;super(f.code,f.message),this.operationType=I,this.user=U,Object.setPrototypeOf(this,mr.prototype),this.customData={appName:d.name,tenantId:null!==(q=d.tenantId)&&void 0!==q?q:void 0,_serverResponse:f.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,f,I,U){return new mr(d,f,I,U)}}function Oo(E,d,f,I){return("reauthenticate"===d?f._getReauthenticationResolver(E):f._getIdTokenResponse(E)).catch(q=>{throw"auth/multi-factor-auth-required"===q.code?mr._fromErrorAndOperation(E,q,d,I):q})}function Ws(E){return new Set(E.map(({providerId:d})=>d).filter(d=>!!d))}function Br(E,d){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(E,d){const f=(0,H.m9)(E);yield In(!0,f,d);const{providerUserInfo:I}=yield Hn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),U=Ws(I||[]);return f.providerData=f.providerData.filter(q=>U.has(q.providerId)),U.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function wr(E,d){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,g.Z)(function*(E,d,f=!1){const I=yield kt(E,d._linkToIdToken(E.auth,yield E.getIdToken()),f);return Bt._forOperation(E,"link",I)})).apply(this,arguments)}function In(E,d,f){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(E,d,f){yield Gn(d);const U=!1===E?"provider-already-linked":"no-such-provider";le(Ws(d.providerData).has(f)===E,d.auth,U)})).apply(this,arguments)}function Jr(E,d){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(E,d,f=!1){const{auth:I}=E,U="reauthenticate";try{const q=yield kt(E,Oo(I,U,d,E),f);le(q.idToken,I,"internal-error");const te=sr(q.idToken);le(te,I,"internal-error");const{sub:Oe}=te;return le(E.uid===Oe,I,"user-mismatch"),Bt._forOperation(E,U,q)}catch(q){throw"auth/user-not-found"===q?.code&&Fe(I,"user-mismatch"),q}})).apply(this,arguments)}function Xr(E,d){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(function*(E,d,f=!1){const I="signIn",U=yield Oo(E,I,d),q=yield Bt._fromIdTokenResponse(E,I,U);return f||(yield E._updateCurrentUser(q.user)),q})).apply(this,arguments)}function ar(E,d){return un.apply(this,arguments)}function un(){return(un=(0,g.Z)(function*(E,d){return Xr(ln(E),d)})).apply(this,arguments)}function ts(E,d){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,g.Z)(function*(E,d){const f=(0,H.m9)(E);return yield In(!1,f,d.providerId),wr(f,d)})).apply(this,arguments)}function po(E,d){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(E,d){return Jr((0,H.m9)(E),d)})).apply(this,arguments)}function ei(E,d){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(E,d){return Tt(E,"POST","/v1/accounts:signInWithCustomToken",tt(E,d))})).apply(this,arguments)}function eu(E,d){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(E,d){const f=ln(E),I=yield ei(f,{token:d,returnSecureToken:!0}),U=yield Bt._fromIdTokenResponse(f,"signIn",I);return yield f._updateCurrentUser(U.user),U})).apply(this,arguments)}class S{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?R._fromServerResponse(d,f):"totpInfo"in f?A._fromServerResponse(d,f):Fe(d,"internal-error")}}class R extends S{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new R(f)}}class A extends S{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new A(f)}}function z(E,d,f){var I;le((null===(I=f.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),le(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(le(f.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(le(f.android.packageName.length>0,E,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Ce(E,d,f){return St.apply(this,arguments)}function St(){return St=(0,g.Z)(function*(E,d,f){var I;const U=ln(E),q={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=U._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const te=yield _r(U,q,"getOobCode",!0);f&&z(U,te,f),yield Us(U,te)}else f&&z(U,q,f),yield Us(U,q).catch(function(){var te=(0,g.Z)(function*(Oe){if("auth/missing-recaptcha-token"!==Oe.code)return Promise.reject(Oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Et=yield _r(U,q,"getOobCode",!0);f&&z(U,Et,f),yield Us(U,Et)}});return function(Oe){return te.apply(this,arguments)}}())}),St.apply(this,arguments)}function Nn(E,d,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(E,d,f){yield Si((0,H.m9)(E),{oobCode:d,newPassword:f})})).apply(this,arguments)}function Mi(E,d){return wi.apply(this,arguments)}function wi(){return(wi=(0,g.Z)(function*(E,d){yield Ts((0,H.m9)(E),{oobCode:d})})).apply(this,arguments)}function ps(E,d){return rs.apply(this,arguments)}function rs(){return(rs=(0,g.Z)(function*(E,d){const f=(0,H.m9)(E),I=yield Si(f,{oobCode:d}),U=I.requestType;switch(le(U,f,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(I.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(I.mfaInfo,f,"internal-error");default:le(I.email,f,"internal-error")}let q=null;return I.mfaInfo&&(q=S._fromServerResponse(ln(f),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:q},operation:U}})).apply(this,arguments)}function go(E,d){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(function*(E,d){const{data:f}=yield ps((0,H.m9)(E),d);return f.email})).apply(this,arguments)}function Gi(E,d,f){return is.apply(this,arguments)}function is(){return is=(0,g.Z)(function*(E,d,f){var I;const U=ln(E),q={returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"};let te;if(null!==(I=U._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Dt=yield _r(U,q,"signUpPassword");te=Ot(U,Dt)}else te=Ot(U,q).catch(function(){var Dt=(0,g.Z)(function*(Xt){if("auth/missing-recaptcha-token"===Xt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const yn=yield _r(U,q,"signUpPassword");return Ot(U,yn)}return Promise.reject(Xt)});return function(Xt){return Dt.apply(this,arguments)}}());const Oe=yield te.catch(Dt=>Promise.reject(Dt)),Et=yield Bt._fromIdTokenResponse(U,"signIn",Oe);return yield U._updateCurrentUser(Et.user),Et}),is.apply(this,arguments)}function ko(E,d,f){return ar((0,H.m9)(E),$i.credential(d,f))}function ss(E,d,f){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,g.Z)(function*(E,d,f){var I;const U=ln(E),q={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function te(Oe,Et){le(Et.handleCodeInApp,U,"argument-error"),Et&&z(U,Oe,Et)}if(null!==(I=U._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Oe=yield _r(U,q,"getOobCode",!0);te(Oe,f),yield fs(U,Oe)}else te(q,f),yield fs(U,q).catch(function(){var Oe=(0,g.Z)(function*(Et){if("auth/missing-recaptcha-token"!==Et.code)return Promise.reject(Et);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Dt=yield _r(U,q,"getOobCode",!0);te(Dt,f),yield fs(U,Dt)}});return function(Et){return Oe.apply(this,arguments)}}())}),Fa.apply(this,arguments)}function da(E,d){return"EMAIL_SIGNIN"===$s.parseLink(d)?.operation}function La(E,d,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(E,d,f){const I=(0,H.m9)(E),U=$i.credentialWithLink(d,f||ht());return le(U._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),ar(I,U)})).apply(this,arguments)}function Va(E,d){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:createAuthUri",tt(E,d))})).apply(this,arguments)}function tu(E,d){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,g.Z)(function*(E,d){const I={identifier:d,continueUri:yt()?ht():"http://localhost"},{signinMethods:U}=yield Va((0,H.m9)(E),I);return U||[]})).apply(this,arguments)}function Fo(E,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,g.Z)(function*(E,d){const f=(0,H.m9)(E),U={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};d&&z(f.auth,U,d);const{email:q}=yield hs(f.auth,U);q!==E.email&&(yield E.reload())})).apply(this,arguments)}function Xo(E,d,f){return fa.apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(E,d,f){const I=(0,H.m9)(E),q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:d};f&&z(I.auth,q,f);const{email:te}=yield Zr(I.auth,q);te!==E.email&&(yield E.reload())})).apply(this,arguments)}function Ru(E,d){return ea.apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(E,d){return qt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ua(E,d){return pa.apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(E,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const I=(0,H.m9)(E),q={idToken:yield I.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},te=yield kt(I,Ru(I.auth,q));I.displayName=te.displayName||null,I.photoURL=te.photoUrl||null;const Oe=I.providerData.find(({providerId:Et})=>"password"===Et);Oe&&(Oe.displayName=I.displayName,Oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(te)})).apply(this,arguments)}function Ba(E,d){return jr((0,H.m9)(E),d,null)}function mo(E,d){return jr((0,H.m9)(E),null,d)}function jr(E,d,f){return zi.apply(this,arguments)}function zi(){return(zi=(0,g.Z)(function*(E,d,f){const{auth:I}=E,q={idToken:yield E.getIdToken(),returnSecureToken:!0};d&&(q.email=d),f&&(q.password=f);const te=yield kt(E,Cr(I,q));yield E._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class yo{constructor(d,f,I={}){this.isNewUser=d,this.providerId=f,this.profile=I}}class ga extends yo{constructor(d,f,I,U){super(d,f,I),this.username=U}}class Tn extends yo{constructor(d,f){super(d,"facebook.com",f)}}class oi extends ga{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class ai extends yo{constructor(d,f){super(d,"google.com",f)}}class nu extends ga{constructor(d,f,I){super(d,"twitter.com",f,I)}}function ja(E){const{user:d,_tokenResponse:f}=E;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function hr(E){var d,f;if(!E)return null;const{providerId:I}=E,U=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},q=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&E?.idToken){const te=null===(f=null===(d=sr(E.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(te)return new yo(q,"anonymous"!==te&&"custom"!==te?te:null)}if(!I)return null;switch(I){case"facebook.com":return new Tn(q,U);case"github.com":return new oi(q,U);case"google.com":return new ai(q,U);case"twitter.com":return new nu(q,U,E.screenName||null);case"custom":case"anonymous":return new yo(q,null);default:return new yo(q,I,U)}}(f)}class En{constructor(d,f,I){this.type=d,this.credential=f,this.auth=I}static _fromIdtoken(d,f){return new En("enroll",d,f)}static _fromMfaPendingCredential(d){return new En("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,I;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return En._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(I=d.multiFactorSession)&&void 0!==I&&I.idToken)return En._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Rn{constructor(d,f,I){this.session=d,this.hints=f,this.signInResolver=I}static _fromError(d,f){const I=ln(d),U=f.customData._serverResponse,q=(U.mfaInfo||[]).map(Oe=>S._fromServerResponse(I,Oe));le(U.mfaPendingCredential,I,"internal-error");const te=En._fromMfaPendingCredential(U.mfaPendingCredential);return new Rn(te,q,function(){var Oe=(0,g.Z)(function*(Et){const Dt=yield Et._process(I,te);delete U.mfaInfo,delete U.mfaPendingCredential;const Xt=Object.assign(Object.assign({},U),{idToken:Dt.idToken,refreshToken:Dt.refreshToken});switch(f.operationType){case"signIn":const yn=yield Bt._fromIdTokenResponse(I,f.operationType,Xt);return yield I._updateCurrentUser(yn.user),yn;case"reauthenticate":return le(f.user,I,"internal-error"),Bt._forOperation(f.user,f.operationType,Xt);default:Fe(I,"internal-error")}});return function(Et){return Oe.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,g.Z)(function*(){return f.signInResolver(d)})()}}function _n(E,d){var f;const I=(0,H.m9)(E),U=d;return le(d.customData.operationType,I,"argument-error"),le(null===(f=U.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,I,"argument-error"),Rn._fromError(I,U)}function Or(E,d){return qt(E,"POST","/v2/accounts/mfaEnrollment:start",tt(E,d))}class ui{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(I=>S._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new ui(d)}getSession(){var d=this;return(0,g.Z)(function*(){return En._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,f){var I=this;return(0,g.Z)(function*(){const U=d,q=yield I.getSession(),te=yield kt(I.user,U._process(I.user.auth,q,f));return yield I.user._updateTokensIfNecessary(te),I.user.reload()})()}unenroll(d){var f=this;return(0,g.Z)(function*(){const I="string"==typeof d?d:d.uid,U=yield f.user.getIdToken();try{const q=yield kt(f.user,function os(E,d){return qt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(E,d))}(f.user.auth,{idToken:U,mfaEnrollmentId:I}));f.enrolledFactors=f.enrolledFactors.filter(({uid:te})=>te!==I),yield f.user._updateTokensIfNecessary(q),yield f.user.reload()}catch(q){throw q}})()}}const ci=new WeakMap;function Ys(E){const d=(0,H.m9)(E);return ci.has(d)||ci.set(d,ui._fromUser(d)),ci.get(d)}const Qs="__sak";class Js{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Qs,"1"),this.storage.removeItem(Qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vo=(()=>{class E extends Js{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,I)=>this.onStorageEvent(f,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Lo(){const E=(0,H.z$)();return J(E)||se(E)}()&&function en(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ot(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const I of Object.keys(this.listeners)){const U=this.storage.getItem(I),q=this.localCache[I];U!==q&&f(I,q,U)}}onStorageEvent(f,I=!1){if(!f.key)return void this.forAllChangedKeys((Oe,Et,Dt)=>{this.notifyListeners(Oe,Dt)});const U=f.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(U);if(f.newValue!==Oe)null!==f.newValue?this.storage.setItem(U,f.newValue):this.storage.removeItem(U);else if(this.localCache[U]===f.newValue&&!I)return}const q=()=>{const Oe=this.storage.getItem(U);!I&&this.localCache[U]===Oe||this.notifyListeners(U,Oe)},te=this.storage.getItem(U);!function Ye(){return(0,H.w1)()&&10===document.documentMode}()||te===f.newValue||f.newValue===f.oldValue?q():setTimeout(q,10)}notifyListeners(f,I){this.localCache[f]=I;const U=this.listeners[f];if(U)for(const q of Array.from(U))q(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,I,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:I,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(I)}_removeListener(f,I){this.listeners[f]&&(this.listeners[f].delete(I),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,I){var U=()=>super._set,q=this;return(0,g.Z)(function*(){yield U().call(q,f,I),q.localCache[f]=JSON.stringify(I)})()}_get(f){var I=()=>super._get,U=this;return(0,g.Z)(function*(){const q=yield I().call(U,f);return U.localCache[f]=JSON.stringify(q),q})()}_remove(f){var I=()=>super._remove,U=this;return(0,g.Z)(function*(){yield I().call(U,f),delete U.localCache[f]})()}}return E.type="LOCAL",E})(),ta=(()=>{class E extends Js{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,I){}_removeListener(f,I){}}return E.type="SESSION",E})();let Wi=(()=>{class E{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const I=this.receivers.find(q=>q.isListeningto(f));if(I)return I;const U=new E(f);return this.receivers.push(U),U}isListeningto(f){return this.eventTarget===f}handleEvent(f){var I=this;return(0,g.Z)(function*(){const U=f,{eventId:q,eventType:te,data:Oe}=U.data,Et=I.handlersMap[te];if(!Et?.size)return;U.ports[0].postMessage({status:"ack",eventId:q,eventType:te});const Dt=Array.from(Et).map(function(){var yn=(0,g.Z)(function*(Pi){return Pi(U.origin,Oe)});return function(Pi){return yn.apply(this,arguments)}}()),Xt=yield function as(E){return Promise.all(E.map(function(){var d=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(I){return{fulfilled:!1,reason:I}}});return function(f){return d.apply(this,arguments)}}()))}(Dt);U.ports[0].postMessage({status:"done",eventId:q,eventType:te,response:Xt})})()}_subscribe(f,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(I)}_unsubscribe(f,I){this.handlersMap[f]&&I&&this.handlersMap[f].delete(I),(!I||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Xs(E="",d=10){let f="";for(let I=0;I<d;I++)f+=Math.floor(10*Math.random());return E+f}class va{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,I=50){var U=this;return(0,g.Z)(function*(){const q=typeof MessageChannel<"u"?new MessageChannel:null;if(!q)throw new Error("connection_unavailable");let te,Oe;return new Promise((Et,Dt)=>{const Xt=Xs("",20);q.port1.start();const yn=setTimeout(()=>{Dt(new Error("unsupported_event"))},I);Oe={messageChannel:q,onMessage(Pi){const Ho=Pi;if(Ho.data.eventId===Xt)switch(Ho.data.status){case"ack":clearTimeout(yn),te=setTimeout(()=>{Dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),Et(Ho.data.response);break;default:clearTimeout(yn),clearTimeout(te),Dt(new Error("invalid_response"))}}},U.handlers.add(Oe),q.port1.addEventListener("message",Oe.onMessage),U.target.postMessage({eventType:d,eventId:Xt,data:f},[q.port2])}).finally(()=>{Oe&&U.removeMessageHandler(Oe)})})()}}function yr(){return window}function eo(){return typeof yr().WorkerGlobalScope<"u"&&"function"==typeof yr().importScripts}function ru(){return(ru=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _a="firebaseLocalStorageDb",li="firebaseLocalStorage",vr="fbase_key";class Ea{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function to(E,d){return E.transaction([li],d?"readwrite":"readonly").objectStore(li)}function Os(){const E=indexedDB.open(_a,1);return new Promise((d,f)=>{E.addEventListener("error",()=>{f(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(li,{keyPath:vr})}catch(U){f(U)}}),E.addEventListener("success",(0,g.Z)(function*(){const I=E.result;I.objectStoreNames.contains(li)?d(I):(I.close(),yield function Ha(){const E=indexedDB.deleteDatabase(_a);return new Ea(E).toPromise()}(),d(yield Os()))}))})}function ms(E,d,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,g.Z)(function*(E,d,f){const I=to(E,!0).put({[vr]:d,value:f});return new Ea(I).toPromise()})).apply(this,arguments)}function mu(){return(mu=(0,g.Z)(function*(E,d){const f=to(E,!1).get(d),I=yield new Ea(f).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function iu(E,d){const f=to(E,!0).delete(d);return new Ea(f).toPromise()}const us=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield Os()),f.db})()}_withRetries(f){var I=this;return(0,g.Z)(function*(){let U=0;for(;;)try{const q=yield I._openDb();return yield f(q)}catch(q){if(U++>3)throw q;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return eo()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=Wi._getInstance(function gu(){return eo()?self:null}()),f.receiver._subscribe("keyChanged",function(){var I=(0,g.Z)(function*(U,q){return{keyProcessed:(yield f._poll()).includes(q.key)}});return function(U,q){return I.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var I=(0,g.Z)(function*(U,q){return["keyChanged"]});return function(U,q){return I.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var I,U;if(f.activeServiceWorker=yield function Ou(){return ru.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new va(f.activeServiceWorker);const q=yield f.sender._send("ping",{},800);q&&null!==(I=q[0])&&void 0!==I&&I.fulfilled&&null!==(U=q[0])&&void 0!==U&&U.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var I=this;return(0,g.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Uo(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:f},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Os();return yield ms(f,Qs,"1"),yield iu(f,Qs),!0}catch{}return!1})()}_withPendingWrite(f){var I=this;return(0,g.Z)(function*(){I.pendingWrites++;try{yield f()}finally{I.pendingWrites--}})()}_set(f,I){var U=this;return(0,g.Z)(function*(){return U._withPendingWrite((0,g.Z)(function*(){return yield U._withRetries(q=>ms(q,f,I)),U.localCache[f]=I,U.notifyServiceWorker(f)}))})()}_get(f){var I=this;return(0,g.Z)(function*(){const U=yield I._withRetries(q=>function ac(E,d){return mu.apply(this,arguments)}(q,f));return I.localCache[f]=U,U})()}_remove(f){var I=this;return(0,g.Z)(function*(){return I._withPendingWrite((0,g.Z)(function*(){return yield I._withRetries(U=>iu(U,f)),delete I.localCache[f],I.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const I=yield f._withRetries(te=>{const Oe=to(te,!1).getAll();return new Ea(Oe).toPromise()});if(!I)return[];if(0!==f.pendingWrites)return[];const U=[],q=new Set;for(const{fbase_key:te,value:Oe}of I)q.add(te),JSON.stringify(f.localCache[te])!==JSON.stringify(Oe)&&(f.notifyListeners(te,Oe),U.push(te));for(const te of Object.keys(f.localCache))f.localCache[te]&&!q.has(te)&&(f.notifyListeners(te,null),U.push(te));return U})()}notifyListeners(f,I){this.localCache[f]=I;const U=this.listeners[f];if(U)for(const q of Array.from(U))q(I)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(I)}_removeListener(f,I){this.listeners[f]&&(this.listeners[f].delete(I),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function ys(E,d){return qt(E,"POST","/v2/accounts/mfaSignIn:start",tt(E,d))}const Wn=1e12;class ed{constructor(d){this.auth=d,this.counter=Wn,this._widgets=new Map}render(d,f){const I=this.counter;return this._widgets.set(I,new Bo(d,this.auth.name,f||{})),this.counter++,I}reset(d){var f;const I=d||Wn;null===(f=this._widgets.get(I))||void 0===f||f.delete(),this._widgets.delete(I)}getResponse(d){var f;return(null===(f=this._widgets.get(d||Wn))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,g.Z)(function*(){var I;return null===(I=f._widgets.get(d||Wn))||void 0===I||I.execute(),""})()}}class Bo{constructor(d,f,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof d?document.getElementById(d):d;le(U,"argument-error",{appName:f}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jo(E){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<E;I++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ou=Cn("rcb"),ku=new Le(3e4,6e4);class Mr{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=yr().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return le(function Da(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&zr(yr().grecaptcha)?Promise.resolve(yr().grecaptcha):new Promise((I,U)=>{const q=yr().setTimeout(()=>{U(Be(d,"network-request-failed"))},ku.get());yr()[ou]=()=>{yr().clearTimeout(q),delete yr()[ou];const Oe=yr().grecaptcha;if(!Oe||!zr(Oe))return void U(Be(d,"internal-error"));const Et=Oe.render;Oe.render=(Dt,Xt)=>{const yn=Et(Dt,Xt);return this.counter++,yn},this.hostLanguage=f,I(Oe)},Vs(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:ou,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(q),U(Be(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=yr().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fu{load(d){return(0,g.Z)(function*(){return new ed(d)})()}clearedOneInstance(){}}const na="recaptcha",di={theme:"light",type:"image"};class au{constructor(d,f=Object.assign({},di),I){this.parameters=f,this.type=na,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ln(I),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof d?document.getElementById(d):d;le(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fu:new Mr,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(f)||new Promise(q=>{const te=Oe=>{Oe&&(d.tokenChangeListeners.delete(te),q(Oe))};d.tokenChangeListeners.add(te),d.isInvisible&&I.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(I=>I(f)),"function"==typeof d)d(f);else if("string"==typeof d){const I=yr()[d];"function"==typeof I&&I(f)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const I=document.createElement("div");f.appendChild(I),f=I}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){le(yt()&&!eo(),d.auth,"internal-error"),yield function uu(){let E=null;return new Promise(d=>{"complete"!==document.readyState?(E=()=>d(),window.addEventListener("load",E)):d()}).catch(d=>{throw E&&window.removeEventListener("load",E),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function cr(E){return Gr.apply(this,arguments)}(d.auth);le(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Lu{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=kr._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function ks(E,d,f){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(E,d,f){const I=ln(E),U=yield ba(I,d,(0,H.m9)(f));return new Lu(U,q=>ar(I,q))})).apply(this,arguments)}function ra(E,d,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(E,d,f){const I=(0,H.m9)(E);yield In(!1,I,"phone");const U=yield ba(I.auth,d,(0,H.m9)(f));return new Lu(U,q=>ts(I,q))})).apply(this,arguments)}function ia(E,d,f){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,g.Z)(function*(E,d,f){const I=(0,H.m9)(E),U=yield ba(I.auth,d,(0,H.m9)(f));return new Lu(U,q=>po(I,q))})).apply(this,arguments)}function ba(E,d,f){return _o.apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(E,d,f){var I;const U=yield f.verify();try{let q;if(le("string"==typeof U,E,"argument-error"),le(f.type===na,E,"argument-error"),q="string"==typeof d?{phoneNumber:d}:d,"session"in q){const te=q.session;if("phoneNumber"in q)return le("enroll"===te.type,E,"internal-error"),(yield Or(E,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:q.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{le("signin"===te.type,E,"internal-error");const Oe=(null===(I=q.multiFactorHint)||void 0===I?void 0:I.uid)||q.multiFactorUid;return le(Oe,E,"missing-multi-factor-info"),(yield ys(E,{mfaPendingCredential:te.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Na(E,{phoneNumber:q.phoneNumber,recaptchaToken:U});return te}}finally{f._reset()}})).apply(this,arguments)}function vf(E,d){return _.apply(this,arguments)}function _(){return(_=(0,g.Z)(function*(E,d){yield wr((0,H.m9)(E),d)})).apply(this,arguments)}let w=(()=>{class E{constructor(f){this.providerId=E.PROVIDER_ID,this.auth=ln(f)}verifyPhoneNumber(f,I){return ba(this.auth,f,(0,H.m9)(I))}static credential(f,I){return kr._fromVerification(f,I)}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:I,temporaryProof:U}=f;return I&&U?kr._fromTokenResponse(I,U):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function y(E,d){return d?Ut(d):(le(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class C extends ii{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Er(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Er(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Er(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function N(E){return Xr(E.auth,new C(E),E.bypassAuthState)}function $(E){const{auth:d,user:f}=E;return le(f,d,"internal-error"),Jr(f,new C(E),E.bypassAuthState)}function Y(E){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(E){const{auth:d,user:f}=E;return le(f,d,"internal-error"),wr(f,new C(E),E.bypassAuthState)})).apply(this,arguments)}class We{constructor(d,f,I,U,q=!1){this.auth=d,this.resolver=I,this.user=U,this.bypassAuthState=q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,g.Z)(function*(I,U){d.pendingPromise={resolve:I,reject:U};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(q){d.reject(q)}});return function(I,U){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,g.Z)(function*(){const{urlResponse:I,sessionId:U,postBody:q,tenantId:te,error:Oe,type:Et}=d;if(Oe)return void f.reject(Oe);const Dt={auth:f.auth,requestUri:I,sessionId:U,tenantId:te||void 0,postBody:q||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Et)(Dt))}catch(Xt){f.reject(Xt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return N;case"linkViaPopup":case"linkViaRedirect":return Y;case"reauthViaPopup":case"reauthViaRedirect":return $;default:Fe(this.auth,"internal-error")}}resolve(d){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nt=new Le(2e3,1e4);function xt(E,d,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(E,d,f){const I=ln(E);lt(E,d,xi);const U=y(I,f);return new hi(I,"signInViaPopup",d,U).executeNotNull()})).apply(this,arguments)}function $r(E,d,f){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(E,d,f){const I=(0,H.m9)(E);lt(I.auth,d,xi);const U=y(I.auth,f);return new hi(I.auth,"reauthViaPopup",d,U,I).executeNotNull()})).apply(this,arguments)}function Ii(E,d,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,g.Z)(function*(E,d,f){const I=(0,H.m9)(E);lt(I.auth,d,xi);const U=y(I.auth,f);return new hi(I.auth,"linkViaPopup",d,U,I).executeNotNull()})).apply(this,arguments)}let hi=(()=>{class E extends We{constructor(f,I,U,q,te){super(f,I,q,te),this.provider=U,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const I=yield f.execute();return le(I,f.auth,"internal-error"),I})()}onExecution(){var f=this;return(0,g.Z)(function*(){dt(1===f.filter.length,"Popup operations only handle one event");const I=Xs();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],I),f.authWindow.associatedEvent=I,f.resolver._originValidation(f.auth).catch(U=>{f.reject(U)}),f.resolver._isIframeWebStorageSupported(f.auth,U=>{U||f.reject(Be(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const f=()=>{var I,U;this.pollId=null!==(U=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==U&&U.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Nt.get())};f()}}return E.currentPopupAction=null,E})();const k=new Map;class j extends We{constructor(d,f,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,g.Z)(function*(){let I=k.get(f.auth._key());if(!I){try{const q=(yield function ne(E,d){return ge.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;I=()=>Promise.resolve(q)}catch(U){I=()=>Promise.reject(U)}k.set(f.auth._key(),I)}return f.bypassAuthState||k.set(f.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,I=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(I,d);if("unknown"!==d.type){if(d.eventId){const U=yield I.auth._redirectUserForId(d.eventId);if(U)return I.user=U,f().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ge(){return(ge=(0,g.Z)(function*(E,d){const f=kn(d),I=rn(E);if(!(yield I._isAvailable()))return!1;const U="true"===(yield I._get(f));return yield I._remove(f),U})).apply(this,arguments)}function xe(E,d){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(E,d){return rn(E)._set(kn(d),"true")})).apply(this,arguments)}function Vt(){k.clear()}function Kt(E,d){k.set(E._key(),d)}function rn(E){return Ut(E._redirectPersistence)}function kn(E){return On("pendingRedirect",E.config.apiKey,E.name)}function hn(E,d,f){return function _s(E,d,f){return Di.apply(this,arguments)}(E,d,f)}function Di(){return(Di=(0,g.Z)(function*(E,d,f){const I=ln(E);lt(E,d,xi),yield I._initializationPromise;const U=y(I,f);return yield xe(U,I),U._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function Eo(E,d,f){return function cc(E,d,f){return qa.apply(this,arguments)}(E,d,f)}function qa(){return(qa=(0,g.Z)(function*(E,d,f){const I=(0,H.m9)(E);lt(I.auth,d,xi),yield I.auth._initializationPromise;const U=y(I.auth,f);yield xe(U,I.auth);const q=yield _f(I);return U._openRedirect(I.auth,d,"reauthViaRedirect",q)})).apply(this,arguments)}function cs(E,d,f){return function ro(E,d,f){return Vu.apply(this,arguments)}(E,d,f)}function Vu(){return(Vu=(0,g.Z)(function*(E,d,f){const I=(0,H.m9)(E);lt(I.auth,d,xi),yield I.auth._initializationPromise;const U=y(I.auth,f);yield In(!1,I,d.providerId),yield xe(U,I.auth);const q=yield _f(I);return U._openRedirect(I.auth,d,"linkViaRedirect",q)})).apply(this,arguments)}function td(E,d){return tl.apply(this,arguments)}function tl(){return(tl=(0,g.Z)(function*(E,d){return yield ln(E)._initializationPromise,nl(E,d,!1)})).apply(this,arguments)}function nl(E,d){return rl.apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(E,d,f=!1){const I=ln(E),U=y(I,d),te=yield new j(I,U,f).execute();return te&&!f&&(delete te.user._redirectEventId,yield I._persistUserIfCurrent(te.user),yield I._setRedirectUser(null,d)),te})).apply(this,arguments)}function _f(E){return nd.apply(this,arguments)}function nd(){return(nd=(0,g.Z)(function*(E){const d=Xs(`${E.uid}:::`);return E._redirectEventId=d,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),d})).apply(this,arguments)}class Ef{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(f=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function If(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lc(E);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var I;if(d.error&&!lc(d)){const U=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";f.onError(Be(this.auth,U))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const I=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wf(d))}saveEventToCache(d){this.cachedEventUids.add(wf(d)),this.lastProcessedEventTime=Date.now()}}function wf(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(d=>d).join("-")}function lc({type:E,error:d}){return"unknown"===E&&"auth/no-auth-event"===d?.code}function Df(E){return il.apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(E,d={}){return qt(E,"GET","/v1/projects",d)})).apply(this,arguments)}const mg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yg=/^https?/;function sl(){return(sl=(0,g.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:d}=yield Df(E);for(const f of d)try{if(rd(f))return}catch{}Fe(E,"unauthorized-domain")})).apply(this,arguments)}function rd(E){const d=ht(),{protocol:f,hostname:I}=new URL(d);if(E.startsWith("chrome-extension://")){const te=new URL(E);return""===te.hostname&&""===I?"chrome-extension:"===f&&E.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&te.hostname===I}if(!yg.test(f))return!1;if(mg.test(E))return I===E;const U=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(I)}const Kd=new Le(3e4,6e4);function id(){const E=yr().___jsl;if(E?.H)for(const d of Object.keys(E.H))if(E.H[d].r=E.H[d].r||[],E.H[d].L=E.H[d].L||[],E.H[d].r=[...E.H[d].L],E.CP)for(let f=0;f<E.CP.length;f++)E.CP[f]=null}let Lr=null;function bf(E){return Lr=Lr||function ol(E){return new Promise((d,f)=>{var I,U,q;function te(){id(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{id(),f(Be(E,"network-request-failed"))},timeout:Kd.get()})}if(null!==(U=null===(I=yr().gapi)||void 0===I?void 0:I.iframes)&&void 0!==U&&U.Iframe)d(gapi.iframes.getContext());else{if(null===(q=yr().gapi)||void 0===q||!q.load){const Oe=Cn("iframefcb");return yr()[Oe]=()=>{gapi.load?te():f(Be(E,"network-request-failed"))},Vs(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(Et=>f(Et))}te()}}).catch(d=>{throw Lr=null,d})}(E),Lr}const Cf=new Le(5e3,15e3),Yd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vg(E){const d=E.config;le(d.authDomain,E,"auth-domain-config-required");const f=d.emulator?ze(d,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,I={apiKey:d.apiKey,appName:E.name,v:m.SDK_VERSION},U=Qd.get(E.config.apiHost);U&&(I.eid=U);const q=E._getFrameworks();return q.length&&(I.fw=q.join(",")),`${f}?${(0,H.xO)(I).slice(1)}`}function al(){return al=(0,g.Z)(function*(E){const d=yield bf(E),f=yr().gapi;return le(f,E,"internal-error"),d.open({where:document.body,url:vg(E),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yd,dontclear:!0},I=>new Promise(function(){var U=(0,g.Z)(function*(q,te){yield I.restyle({setHideOnLeave:!1});const Oe=Be(E,"network-request-failed"),Et=yr().setTimeout(()=>{te(Oe)},Cf.get());function Dt(){yr().clearTimeout(Et),q(I)}I.ping(Dt).then(Dt,()=>{te(Oe)})});return function(q,te){return U.apply(this,arguments)}}()))}),al.apply(this,arguments)}const Eg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cu{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const bi=encodeURIComponent("fac");function $o(E,d,f,I,U,q){return ul.apply(this,arguments)}function ul(){return(ul=(0,g.Z)(function*(E,d,f,I,U,q){le(E.config.authDomain,E,"auth-domain-config-required"),le(E.config.apiKey,E,"invalid-api-key");const te={apiKey:E.config.apiKey,appName:E.name,authType:f,redirectUrl:I,v:m.SDK_VERSION,eventId:U};if(d instanceof xi){d.setDefaultLanguage(E.languageCode),te.providerId=d.providerId||"",(0,H.xb)(d.getCustomParameters())||(te.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Xt,yn]of Object.entries(q||{}))te[Xt]=yn}if(d instanceof Xi){const Xt=d.getScopes().filter(yn=>""!==yn);Xt.length>0&&(te.scopes=Xt.join(","))}E.tenantId&&(te.tid=E.tenantId);const Oe=te;for(const Xt of Object.keys(Oe))void 0===Oe[Xt]&&delete Oe[Xt];const Et=yield E._getAppCheckToken(),Dt=Et?`#${bi}=${encodeURIComponent(Et)}`:"";return`${$t(E)}?${(0,H.xO)(Oe).slice(1)}${Dt}`})).apply(this,arguments)}function $t({config:E}){return E.emulator?ze(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}const Qt="webStorageSupport",Rt=class Af{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ta,this._completeRedirectFn=nl,this._overrideRedirectResult=Kt}_openPopup(d,f,I,U){var q=this;return(0,g.Z)(function*(){var te;dt(null===(te=q.eventManagers[d._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Oe=yield $o(d,f,I,ht(),U);return function ti(E,d,f,I=500,U=600){const q=Math.max((window.screen.availHeight-U)/2,0).toString(),te=Math.max((window.screen.availWidth-I)/2,0).toString();let Oe="";const Et=Object.assign(Object.assign({},Eg),{width:I.toString(),height:U.toString(),top:q,left:te}),Dt=(0,H.z$)().toLowerCase();f&&(Oe=Z(Dt)?"_blank":f),Q(Dt)&&(d=d||"http://localhost",Et.scrollbars="yes");const Xt=Object.entries(Et).reduce((Pi,[Ho,pc])=>`${Pi}${Ho}=${pc},`,"");if(function ye(E=(0,H.z$)()){var d;return se(E)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Dt)&&"_self"!==Oe)return function ju(E,d){const f=document.createElement("a");f.href=E,f.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(I)}(d||"",Oe),new cu(null);const yn=window.open(d||"",Oe,Xt);le(yn,E,"popup-blocked");try{yn.focus()}catch{}return new cu(yn)}(d,Oe,Xs())})()}_openRedirect(d,f,I,U){var q=this;return(0,g.Z)(function*(){return yield q._originValidation(d),function $a(E){yr().location.href=E}(yield $o(d,f,I,ht(),U)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:U,promise:q}=this.eventManagers[f];return U?Promise.resolve(U):(dt(q,"If manager is not set, promise should be"),q)}const I=this.initAndGetManager(d);return this.eventManagers[f]={promise:I},I.catch(()=>{delete this.eventManagers[f]}),I}initAndGetManager(d){var f=this;return(0,g.Z)(function*(){const I=yield function _g(E){return al.apply(this,arguments)}(d),U=new Ef(d);return I.register("authEvent",q=>(le(q?.authEvent,d,"invalid-auth-event"),{status:U.onEvent(q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:U},f.iframes[d._key()]=I,U})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(Qt,{type:Qt},U=>{var q;const te=null===(q=U?.[0])||void 0===q?void 0:q[Qt];void 0!==te&&f(!!te),Fe(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Bu(E){return sl.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return ot()||J()||se()}};class Ne{constructor(d){this.factorId=d}_process(d,f,I){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,I);case"signin":return this._finalizeSignIn(d,f.credential);default:return $e("unexpected MultiFactorSessionType")}}}class et extends Ne{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new et(d)}_finalizeEnroll(d,f,I){return function fr(E,d){return qt(E,"POST","/v2/accounts/mfaEnrollment:finalize",tt(E,d))}(d,{idToken:f,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function za(E,d){return qt(E,"POST","/v2/accounts/mfaSignIn:finalize",tt(E,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ci=(()=>{class E{constructor(){}static assertion(f){return et._fromCredential(f)}}return E.FACTOR_ID="phone",E})();var ud="@firebase/auth";class Jd{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(I=>{d(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,H.Pz)("authIdTokenMaxAge"),function Mf(E){(0,m._registerComponent)(new ve.wA("auth",(d,{options:f})=>{const I=d.getProvider("app").getImmediate(),U=d.getProvider("heartbeat"),q=d.getProvider("app-check-internal"),{apiKey:te,authDomain:Oe}=I.options;le(te&&!te.includes(":"),"invalid-api-key",{appName:I.name}),le(!Oe?.includes(":"),"argument-error",{appName:I.name});const Et={apiKey:te,authDomain:Oe,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zn(E)},Dt=new tn(I,U,q,Et);return function Rr(E,d){const f=d?.persistence||[],I=(Array.isArray(f)?f:[f]).map(Ut);d?.errorMap&&E._updateErrorMap(d.errorMap),E._initializeWithPersistence(I,d?.popupRedirectResolver)}(Dt,f),Dt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,I)=>{d.getProvider("auth-internal").initialize()})),(0,m._registerComponent)(new ve.wA("auth-internal",d=>{const f=ln(d.getProvider("auth").getImmediate());return new Jd(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,m.registerVersion)(ud,"0.23.0",function hc(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,m.registerVersion)(ud,"0.23.0","esm2017")}("Browser")},2090:(bt,Me,B)=>{B.d(Me,{$s:()=>Ut,BH:()=>Ge,G6:()=>ze,L:()=>Te,LL:()=>_e,Pz:()=>Be,Sg:()=>lt,UG:()=>$e,US:()=>ve,ZB:()=>pe,ZR:()=>qt,aH:()=>Fe,b$:()=>yt,eu:()=>ut,hl:()=>rt,jU:()=>dt,m9:()=>On,ne:()=>kt,pd:()=>sr,r3:()=>Hn,ru:()=>ht,tV:()=>ae,uI:()=>le,vZ:()=>gr,w1:()=>Ae,xO:()=>Nr,xb:()=>Ar,z$:()=>Ze,zI:()=>vt,zd:()=>ir});const he=function(ce){const oe=[];let Q=0;for(let J=0;J<ce.length;J++){let Z=ce.charCodeAt(J);Z<128?oe[Q++]=Z:Z<2048?(oe[Q++]=Z>>6|192,oe[Q++]=63&Z|128):55296==(64512&Z)&&J+1<ce.length&&56320==(64512&ce.charCodeAt(J+1))?(Z=65536+((1023&Z)<<10)+(1023&ce.charCodeAt(++J)),oe[Q++]=Z>>18|240,oe[Q++]=Z>>12&63|128,oe[Q++]=Z>>6&63|128,oe[Q++]=63&Z|128):(oe[Q++]=Z>>12|224,oe[Q++]=Z>>6&63|128,oe[Q++]=63&Z|128)}return oe},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ce,oe){if(!Array.isArray(ce))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=oe?this.byteToCharMapWebSafe_:this.byteToCharMap_,J=[];for(let Z=0;Z<ce.length;Z+=3){const we=ce[Z],Ve=Z+1<ce.length,It=Ve?ce[Z+1]:0,de=Z+2<ce.length,se=de?ce[Z+2]:0;let Ye=(15&It)<<2|se>>6,ot=63&se;de||(ot=64,Ve||(Ye=64)),J.push(Q[we>>2],Q[(3&we)<<4|It>>4],Q[Ye],Q[ot])}return J.join("")},encodeString(ce,oe){return this.HAS_NATIVE_SUPPORT&&!oe?btoa(ce):this.encodeByteArray(he(ce),oe)},decodeString(ce,oe){return this.HAS_NATIVE_SUPPORT&&!oe?atob(ce):function(ce){const oe=[];let Q=0,J=0;for(;Q<ce.length;){const Z=ce[Q++];if(Z<128)oe[J++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const we=ce[Q++];oe[J++]=String.fromCharCode((31&Z)<<6|63&we)}else if(Z>239&&Z<365){const de=((7&Z)<<18|(63&ce[Q++])<<12|(63&ce[Q++])<<6|63&ce[Q++])-65536;oe[J++]=String.fromCharCode(55296+(de>>10)),oe[J++]=String.fromCharCode(56320+(1023&de))}else{const we=ce[Q++],Ve=ce[Q++];oe[J++]=String.fromCharCode((15&Z)<<12|(63&we)<<6|63&Ve)}}return oe.join("")}(this.decodeStringToByteArray(ce,oe))},decodeStringToByteArray(ce,oe){this.init_();const Q=oe?this.charToByteMapWebSafe_:this.charToByteMap_,J=[];for(let Z=0;Z<ce.length;){const we=Q[ce.charAt(Z++)],It=Z<ce.length?Q[ce.charAt(Z)]:0;++Z;const se=Z<ce.length?Q[ce.charAt(Z)]:64;++Z;const ye=Z<ce.length?Q[ce.charAt(Z)]:64;if(++Z,null==we||null==It||null==se||null==ye)throw new be;J.push(we<<2|It>>4),64!==se&&(J.push(It<<4&240|se>>2),64!==ye&&J.push(se<<6&192|ye))}return J},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ce=0;ce<this.ENCODED_VALS.length;ce++)this.byteToCharMap_[ce]=this.ENCODED_VALS.charAt(ce),this.charToByteMap_[this.byteToCharMap_[ce]]=ce,this.byteToCharMapWebSafe_[ce]=this.ENCODED_VALS_WEBSAFE.charAt(ce),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ce]]=ce,ce>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ce)]=ce,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ce)]=ce)}}};class be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Te=function(ce){return function(ce){const oe=he(ce);return ve.encodeByteArray(oe,!0)}(ce).replace(/\./g,"")},ae=function(ce){try{return ve.decodeString(ce,!0)}catch(oe){console.error("base64Decode failed: ",oe)}return null};function pe(ce,oe){if(!(oe instanceof Object))return oe;switch(oe.constructor){case Date:return new Date(oe.getTime());case Object:void 0===ce&&(ce={});break;case Array:ce=[];break;default:return oe}for(const Q in oe)!oe.hasOwnProperty(Q)||!nt(Q)||(ce[Q]=pe(ce[Q],oe[Q]));return ce}function nt(ce){return"__proto__"!==ce}const qe=()=>{try{return function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ce=process.env.__FIREBASE_DEFAULTS__;return ce?JSON.parse(ce):void 0})()||(()=>{if(typeof document>"u")return;let ce;try{ce=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const oe=ce&&ae(ce[1]);return oe&&JSON.parse(oe)})()}catch(ce){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ce}`)}},Fe=()=>{var ce;return null===(ce=qe())||void 0===ce?void 0:ce.config},Be=ce=>{var oe;return null===(oe=qe())||void 0===oe?void 0:oe[`_${ce}`]};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((oe,Q)=>{this.resolve=oe,this.reject=Q})}wrapCallback(oe){return(Q,J)=>{Q?this.reject(Q):this.resolve(J),"function"==typeof oe&&(this.promise.catch(()=>{}),1===oe.length?oe(Q):oe(Q,J))}}}function lt(ce,oe){if(ce.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const J=oe||"demo-project",Z=ce.iat||0,we=ce.sub||ce.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${J}`,aud:J,iat:Z,exp:Z+3600,auth_time:Z,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},ce);return[Te(JSON.stringify({alg:"none",type:"JWT"})),Te(JSON.stringify(Ve)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function $e(){var ce;const oe=null===(ce=qe())||void 0===ce?void 0:ce.forceEnvironment;if("node"===oe)return!0;if("browser"===oe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function dt(){return"object"==typeof self&&self.self===self}function ht(){const ce="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ce&&void 0!==ce.id}function yt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){const ce=Ze();return ce.indexOf("MSIE ")>=0||ce.indexOf("Trident/")>=0}function ze(){return!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rt(){try{return"object"==typeof indexedDB}catch{return!1}}function ut(){return new Promise((ce,oe)=>{try{let Q=!0;const J="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(J);Z.onsuccess=()=>{Z.result.close(),Q||self.indexedDB.deleteDatabase(J),ce(!0)},Z.onupgradeneeded=()=>{Q=!1},Z.onerror=()=>{var we;oe((null===(we=Z.error)||void 0===we?void 0:we.message)||"")}}catch(Q){oe(Q)}})}function vt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class qt extends Error{constructor(oe,Q,J){super(Q),this.code=oe,this.customData=J,this.name="FirebaseError",Object.setPrototypeOf(this,qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_e.prototype.create)}}class _e{constructor(oe,Q,J){this.service=oe,this.serviceName=Q,this.errors=J}create(oe,...Q){const J=Q[0]||{},Z=`${this.service}/${oe}`,we=this.errors[oe],Ve=we?function nn(ce,oe){return ce.replace(Ht,(Q,J)=>{const Z=oe[J];return null!=Z?String(Z):`<${J}?>`})}(we,J):"Error";return new qt(Z,`${this.serviceName}: ${Ve} (${Z}).`,J)}}const Ht=/\{\$([^}]+)}/g;function Hn(ce,oe){return Object.prototype.hasOwnProperty.call(ce,oe)}function Ar(ce){for(const oe in ce)if(Object.prototype.hasOwnProperty.call(ce,oe))return!1;return!0}function gr(ce,oe){if(ce===oe)return!0;const Q=Object.keys(ce),J=Object.keys(oe);for(const Z of Q){if(!J.includes(Z))return!1;const we=ce[Z],Ve=oe[Z];if(gt(we)&&gt(Ve)){if(!gr(we,Ve))return!1}else if(we!==Ve)return!1}for(const Z of J)if(!Q.includes(Z))return!1;return!0}function gt(ce){return null!==ce&&"object"==typeof ce}function Nr(ce){const oe=[];for(const[Q,J]of Object.entries(ce))Array.isArray(J)?J.forEach(Z=>{oe.push(encodeURIComponent(Q)+"="+encodeURIComponent(Z))}):oe.push(encodeURIComponent(Q)+"="+encodeURIComponent(J));return oe.length?"&"+oe.join("&"):""}function ir(ce){const oe={};return ce.replace(/^\?/,"").split("&").forEach(J=>{if(J){const[Z,we]=J.split("=");oe[decodeURIComponent(Z)]=decodeURIComponent(we)}}),oe}function sr(ce){const oe=ce.indexOf("?");if(!oe)return"";const Q=ce.indexOf("#",oe);return ce.substring(oe,Q>0?Q:void 0)}function kt(ce,oe){const Q=new Lt(ce,oe);return Q.subscribe.bind(Q)}class Lt{constructor(oe,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{oe(this)}).catch(J=>{this.error(J)})}next(oe){this.forEachObserver(Q=>{Q.next(oe)})}error(oe){this.forEachObserver(Q=>{Q.error(oe)}),this.close(oe)}complete(){this.forEachObserver(oe=>{oe.complete()}),this.close()}subscribe(oe,Q,J){let Z;if(void 0===oe&&void 0===Q&&void 0===J)throw new Error("Missing Observer.");Z=function ur(ce,oe){if("object"!=typeof ce||null===ce)return!1;for(const Q of oe)if(Q in ce&&"function"==typeof ce[Q])return!0;return!1}(oe,["next","error","complete"])?oe:{next:oe,error:Q,complete:J},void 0===Z.next&&(Z.next=wn),void 0===Z.error&&(Z.error=wn),void 0===Z.complete&&(Z.complete=wn);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),we}unsubscribeOne(oe){void 0===this.observers||void 0===this.observers[oe]||(delete this.observers[oe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(oe){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,oe)}sendOne(oe,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[oe])try{Q(this.observers[oe])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})}close(oe){this.finalized||(this.finalized=!0,void 0!==oe&&(this.finalError=oe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wn(){}function Ut(ce,oe=1e3,Q=2){const J=oe*Math.pow(Q,ce),Z=Math.round(.5*J*(Math.random()-.5)*2);return Math.min(144e5,J+Z)}function On(ce){return ce&&ce._delegate?ce._delegate:ce}},1178:(bt,Me,B)=>{var g=B(1481),H=B(2011),m=B(4650),he=B(7579),fe=B(9646),ve=B(9751),be=B(8996),Ie=B(6451),Te=B(5363),ae=B(3900),ie=B(4004),pe=B(6063);class nt extends he.x{constructor(e=1/0,t=1/0,s=pe.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:p}=this;t||(s.push(e),!a&&s.push(l.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:a}=this,l=a.slice();for(let p=0;p<l.length&&!e.closed;p+=s?1:2)e.next(l[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<s.length&&s.splice(0,s.length-l),!a){const p=t.now();let D=0;for(let O=1;O<s.length&&s[O]<=p;O+=2)D=O;D&&s.splice(0,D+1)}}}var He=B(3099);function it(n,e,t){let s,a=!1;return n&&"object"==typeof n?({bufferSize:s=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):s=n??1/0,(0,He.B)({connector:()=>new nt(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var Ct=B(590),Ue=B(576);function qe(n,e){return(0,Ue.m)(e)?(0,ae.w)(()=>n,e):(0,ae.w)(()=>n)}var Qe=B(9468),ct=B(9300),Fe=B(2122),Be=B(6895);B(259);var _e=B(5861),nn=B(9681),Ht=B(4859),Tt=B(2090),bn=B(1877);const xn=new Map,Ln={activated:!1,tokenObservers:[]},Zn={initialized:!1,enabled:!1};function vn(n){return xn.get(n)||Object.assign({},Ln)}function Hn(){return Zn}class Nr{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Tt.BH,yield function ir(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Tt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const an=new Tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Lt(n){if(!vn(n).activated)throw an.create("use-before-activation",{appName:n.name})}function wn(n,e){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_e.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const ue=yield a.getHeartbeatsHeader();ue&&(s["X-Firebase-Client"]=ue)}const l={method:"POST",body:JSON.stringify(e),headers:s};let p,D;try{p=yield fetch(n,l)}catch(ue){throw an.create("fetch-network-error",{originalErrorMessage:ue?.message})}if(200!==p.status)throw an.create("fetch-status-error",{httpStatus:p.status});try{D=yield p.json()}catch(ue){throw an.create("fetch-parse-error",{originalErrorMessage:ue?.message})}const O=D.ttl.match(/^([\d.]+)(s)$/);if(!O||!O[2]||isNaN(Number(O[1])))throw an.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const L=1e3*Number(O[1]),K=Date.now();return{token:D.token,expireTimeMillis:K+L,issuedAtTimeMillis:K}})).apply(this,arguments)}function Ti(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const sn="firebase-app-check-store";let Mn=null;function st(){return Mn||(Mn=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(an.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(sn,{keyPath:"compositeKey"})}}catch(t){e(an.create("storage-open",{originalErrorMessage:t?.message}))}}),Mn)}function On(){return(On=(0,_e.Z)(function*(n,e){const s=(yield st()).transaction(sn,"readwrite"),l=s.objectStore(sn).put({compositeKey:n,value:e});return new Promise((p,D)=>{l.onsuccess=O=>{p()},s.onerror=O=>{var L;D(an.create("storage-set",{originalErrorMessage:null===(L=O.target.error)||void 0===L?void 0:L.message}))}})})).apply(this,arguments)}const J=new bn.Yd("@firebase/app-check");function Ve(n,e){return(0,Tt.hl)()?function Pt(n,e){return function cn(n,e){return On.apply(this,arguments)}(function Q(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{J.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function se(){return Hn().enabled}function X(){return ye.apply(this,arguments)}function ye(){return(ye=(0,_e.Z)(function*(){const n=Hn();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ot={error:"UNKNOWN_ERROR"};function en(n){return Tt.US.encodeString(JSON.stringify(n),!1)}function zn(n){return cr.apply(this,arguments)}function cr(){return(cr=(0,_e.Z)(function*(n,e=!1){const t=n.app;Lt(t);const s=vn(t);let l,a=s.token;if(a&&!ds(a)&&(s.token=void 0,a=void 0),!a){const O=yield s.cachedTokenPromise;O&&(ds(O)?a=O:yield Ve(t,void 0))}if(!e&&a&&ds(a))return{token:a.token};let D,p=!1;if(se()){s.exchangeTokenPromise||(s.exchangeTokenPromise=wn(Ti(t,yield X()),n.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),p=!0);const O=yield s.exchangeTokenPromise;return yield Ve(t,O),s.token=O,{token:O.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),p=!0),a=yield vn(t).exchangeTokenPromise}catch(O){"appCheck/throttled"===O.code?J.warn(O.message):J.error(O),l=O}return a?l?D=ds(a)?{token:a.token,internalError:l}:Cs(l):(D={token:a.token},s.token=a,yield Ve(t,a)):D=Cs(l),p&&xo(t,D),D})).apply(this,arguments)}function Ur(n,e){const t=vn(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=s}function bs(n){const{app:e}=n,t=vn(e);let s=t.tokenRefresher;s||(s=function zr(n){const{app:e}=n;return new Nr((0,_e.Z)(function*(){let s;if(s=vn(e).token?yield zn(n,!0):yield zn(n),s.error)throw s.error;if(s.internalError)throw s.internalError}),()=>!0,()=>{const t=vn(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=s),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function xo(n,e){const t=vn(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch{}}function ds(n){return n.expireTimeMillis-Date.now()>0}function Cs(n){return{token:en(ot),error:n}}class Vs{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vn(this.app);for(const t of e)Ur(this.app,t.next);return Promise.resolve()}}const Kn="app-check-internal";!function hs(){(0,nn._registerComponent)(new Ht.wA("app-check",n=>function Cn(n,e){return new Vs(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Kn).initialize()})),(0,nn._registerComponent)(new Ht.wA(Kn,n=>function lr(n){return{getToken:e=>zn(n,e),addTokenListener:e=>function Gr(n,e,t,s){const{app:a}=n,l=vn(a);if(l.tokenObservers=[...l.tokenObservers,{next:t,error:s,type:e}],l.token&&ds(l.token)){const D=l.token;Promise.resolve().then(()=>{t({token:D.token}),bs(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>bs(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ur(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,nn.registerVersion)("@firebase/app-check","0.6.5")}();class Ss{constructor(){return(0,Fe.vb)("app-check")}}typeof window<"u"&&window;var lo=B(9260);const ka=new m.OlP("angularfire2.auth.use-emulator"),Ro=new m.OlP("angularfire2.auth.settings"),Bs=new m.OlP("angularfire2.auth.tenant-id"),Po=new m.OlP("angularfire2.auth.langugage-code"),ji=new m.OlP("angularfire2.auth.use-device-language"),kr=new m.OlP("angularfire.auth.persistence"),la=(n,e,t,s,a,l,p,D)=>(0,H.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const O=e.runOutsideAngular(()=>n.auth());if(t&&O.useEmulator(...t),s&&(O.tenantId=s),O.languageCode=a,l&&O.useDeviceLanguage(),p)for(const[L,K]of Object.entries(p))O.settings[L]=K;return D&&O.setPersistence(D),O},[t,s,a,l,p,D]);let js=(()=>{class n{constructor(t,s,a,l,p,D,O,L,K,ue,De,Ke){const pt=new he.x,At=(0,fe.of)(void 0).pipe((0,Te.Q)(p.outsideAngular),(0,ae.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,9568)))),(0,ie.U)(()=>(0,H.on)(t,l,s)),(0,ie.U)(zt=>la(zt,l,D,L,K,ue,O,De)),it({bufferSize:1,refCount:!1}));if((0,Be.PM)(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,fe.of)(null);else{At.pipe((0,Ct.P)()).subscribe();const Bn=At.pipe((0,ae.w)(jn=>jn.getRedirectResult().then($n=>$n,()=>null)),Fe.iC,it({bufferSize:1,refCount:!1})),Sr=At.pipe((0,ae.w)(jn=>new ve.y($n=>({unsubscribe:l.runOutsideAngular(()=>jn.onAuthStateChanged(nr=>$n.next(nr),nr=>$n.error(nr),()=>$n.complete()))})))),Dn=At.pipe((0,ae.w)(jn=>new ve.y($n=>({unsubscribe:l.runOutsideAngular(()=>jn.onIdTokenChanged(nr=>$n.next(nr),nr=>$n.error(nr),()=>$n.complete()))}))));this.authState=Bn.pipe(qe(Sr),(0,Qe.R)(p.outsideAngular),(0,Te.Q)(p.insideAngular)),this.user=Bn.pipe(qe(Dn),(0,Qe.R)(p.outsideAngular),(0,Te.Q)(p.insideAngular)),this.idToken=this.user.pipe((0,ae.w)(jn=>jn?(0,be.D)(jn.getIdToken()):(0,fe.of)(null))),this.idTokenResult=this.user.pipe((0,ae.w)(jn=>jn?(0,be.D)(jn.getIdTokenResult()):(0,fe.of)(null))),this.credential=(0,Ie.T)(Bn,pt,this.authState.pipe((0,ct.h)(jn=>!jn))).pipe((0,ie.U)(jn=>jn?.user?jn:null),(0,Qe.R)(p.outsideAngular),(0,Te.Q)(p.insideAngular))}return(0,H.pX)(this,At,l,{spy:{apply:(zt,Bn,Sr)=>{(zt.startsWith("signIn")||zt.startsWith("createUser"))&&Sr.then(Dn=>pt.next(Dn))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(H.Dh),m.LFG(H.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Fe.HU),m.LFG(ka,8),m.LFG(Ro,8),m.LFG(Bs,8),m.LFG(Po,8),m.LFG(ji,8),m.LFG(kr,8),m.LFG(Ss,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$s=(()=>{class n{constructor(){lo.Z.registerVersion("angularfire",Fe.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[js]}),n})();var Ko=B(4986),$i=B(8675),xi=B(4482),Xi=B(5403);function Hs(){return(0,xi.e)((n,e)=>{let t,s=!1;n.subscribe((0,Xi.x)(e,a=>{const l=t;t=a,s&&e.next([l,a]),s=!0}))})}var xs=B(5026),Gs=B(4671);function ho(n,e){return n===e}B(9568);var Ot,fo=B(3942),_i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yr={},es=es||{},Bt=_i||self;function Qr(){}function dr(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Oo="closure_uid_"+(1e9*Math.random()>>>0),Ws=0;function Br(n,e,t){return n.call.apply(n.bind,arguments)}function Rs(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function wr(n,e,t){return(wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Br:Rs).apply(null,arguments)}function Ei(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function In(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(s,a,l){for(var p=Array(arguments.length-2),D=2;D<arguments.length;D++)p[D-2]=arguments[D];return e.prototype[a].apply(s,p)}}function si(){this.s=this.s,this.o=this.o}si.prototype.s=!1,si.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function mr(n){Object.prototype.hasOwnProperty.call(n,Oo)&&n[Oo]||(n[Oo]=++Ws)}(this)},si.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Yo=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Xr(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function qs(n,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(dr(s)){const a=n.length||0,l=s.length||0;n.length=a+l;for(let p=0;p<l;p++)n[a+p]=s[p]}else n.push(s)}}function ar(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ar.prototype.h=function(){this.defaultPrevented=!0};var un=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",Qr,e),Bt.removeEventListener("test",Qr,e)}catch{}return n}();function ts(n){return/^[\s\xa0]*$/.test(n)}var Qo=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function po(n,e){return n<e?-1:n>e?1:0}function ns(){var n=Bt.navigator;return n&&(n=n.userAgent)?n:""}function ei(n){return-1!=ns().indexOf(n)}function No(n){return No[" "](n),n}No[" "]=Qr;var Nn,n,Zs=ei("Opera"),S=ei("Trident")||ei("MSIE"),R=ei("Edge"),A=R||S,z=ei("Gecko")&&!(-1!=ns().toLowerCase().indexOf("webkit")&&!ei("Edge"))&&!(ei("Trident")||ei("MSIE"))&&!ei("Edge"),Ce=-1!=ns().toLowerCase().indexOf("webkit")&&!ei("Edge");function St(){var n=Bt.document;return n?n.documentMode:void 0}e:{var Yn="",Mi=(n=ns(),z?/rv:([^\);]+)(\)|;)/.exec(n):R?/Edge\/([\d\.]+)/.exec(n):S?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ce?/WebKit\/(\S+)/.exec(n):Zs?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Mi&&(Yn=Mi?Mi[1]:""),S){var wi=St();if(null!=wi&&wi>parseFloat(Yn)){Nn=String(wi);break e}}Nn=Yn}var ps={};var Gi=Bt.document&&S&&(St()||parseInt(Nn,10))||void 0;function is(n,e){if(ar.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(z){e:{try{No(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ko[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&is.X.h.call(this)}}In(is,ar);var ko={2:"touch",3:"pen",4:"mouse"};is.prototype.h=function(){is.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ss="closure_listenable_"+(1e6*Math.random()|0),Fa=0;function da(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=a,this.key=++Fa,this.ba=this.ea=!1}function La(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Jo(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function Va(n){const e={};for(const t in n)e[t]=n[t];return e}const Ks="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tu(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<Ks.length;l++)t=Ks[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function Ps(n){this.src=n,this.g={},this.h=0}function Fo(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=Yo(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(La(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ha(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==s)return a}return-1}Ps.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=ha(n,e,s,a);return-1<p?(e=n[p],t||(e.ea=!1)):((e=new da(e,this.src,l,!!s,a)).ea=t,n.push(e)),e};var Xo="closure_lm_"+(1e6*Math.random()|0),fa={};function Ru(n,e,t,s,a){if(s&&s.once)return pa(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Ru(n,e[l],t,s,a);return null}return t=ga(t),n&&n[ss]?n.N(e,t,Hi(s)?!!s.capture:!!s,a):ea(n,e,t,!1,s,a)}function ea(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=Hi(a)?!!a.capture:!!a,D=hr(n);if(D||(n[Xo]=D=new Ps(n)),(t=D.add(e,t,s,p,l)).proxy)return t;if(s=function Ua(){const e=zi;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)un||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(jr(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function pa(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)pa(n,e[l],t,s,a);return null}return t=ga(t),n&&n[ss]?n.O(e,t,Hi(s)?!!s.capture:!!s,a):ea(n,e,t,!0,s,a)}function Ba(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)Ba(n,e[l],t,s,a);else s=Hi(s)?!!s.capture:!!s,t=ga(t),n&&n[ss]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ha(l=n.g[e],t,s,a))&&(La(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=hr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ha(e,t,s,a)),(t=-1<n?e[n]:null)&&mo(t))}function mo(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[ss])Fo(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(jr(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=hr(e))?(Fo(t,n),0==t.h&&(t.src=null,e[Xo]=null)):La(n)}}}function jr(n){return n in fa?fa[n]:fa[n]="on"+n}function zi(n,e){if(n.ba)n=!0;else{e=new is(e,this);var t=n.listener,s=n.ha||n.src;n.ea&&mo(n),n=t.call(s,e)}return n}function hr(n){return(n=n[Xo])instanceof Ps?n:null}var yo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ga(n){return"function"==typeof n?n:(n[yo]||(n[yo]=function(e){return n.handleEvent(e)}),n[yo])}function Tn(){si.call(this),this.i=new Ps(this),this.P=this,this.I=null}function oi(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new ar(e,n);else if(e instanceof ar)e.target=e.target||n;else{var a=e;tu(e=new ar(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=ai(p,s,!0,e)&&a}if(a=ai(p=e.g=n,s,!0,e)&&a,a=ai(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=ai(p=e.g=t[l],s,!1,e)&&a}function ai(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ba&&p.capture==t){var D=p.listener,O=p.ha||p.src;p.ea&&Fo(n.i,p),a=!1!==D.call(O,s)&&a}}return a&&!s.defaultPrevented}In(Tn,si),Tn.prototype[ss]=!0,Tn.prototype.removeEventListener=function(n,e,t,s){Ba(this,n,e,t,s)},Tn.prototype.M=function(){if(Tn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)La(t[s]);delete n.g[e],n.h--}}this.I=null},Tn.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},Tn.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var nu=Bt.JSON.stringify;function ja(){var n=jt;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var re,T=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new V,n=>n.reset());class V{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function P(n){Bt.setTimeout(()=>{throw n},0)}function G(n,e){re||function Re(){var n=Bt.Promise.resolve(void 0);re=function(){n.then(Sn)}}(),Je||(re(),Je=!0),jt.add(n,e)}var Je=!1,jt=new class pu{constructor(){this.h=this.g=null}add(e,t){const s=T.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Sn(){for(var n;n=ja();){try{n.h.call(n.g)}catch(t){P(t)}var e=T;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Je=!1}function En(n,e){Tn.call(this),this.h=n||1,this.g=e||Bt,this.j=wr(this.lb,this),this.l=Date.now()}function Rn(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function _n(n,e,t){if("function"==typeof n)t&&(n=wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function Or(n){n.g=_n(()=>{n.g=null,n.i&&(n.i=!1,Or(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}In(En,Tn),(Ot=En.prototype).ca=!1,Ot.R=null,Ot.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),oi(this,"tick"),this.ca&&(Rn(this),this.start()))}},Ot.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ot.M=function(){En.X.M.call(this),Rn(this),delete this.g};class fr extends si{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Or(this)}M(){super.M(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(n){si.call(this),this.h=n,this.g={}}In(Tr,si);var gs=[];function os(n,e,t,s){Array.isArray(t)||(t&&(gs[0]=t.toString()),t=gs);for(var a=0;a<t.length;a++){var l=Ru(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function ui(n){Jo(n.g,function(e,t){this.g.hasOwnProperty(t)&&mo(e)},n),n.g={}}function ci(){this.g=!0}function Js(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ma(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return nu(t)}catch{return e}}(n,t)+(s?" "+s:"")})}Tr.prototype.M=function(){Tr.X.M.call(this),ui(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ci.prototype.Aa=function(){this.g=!1},ci.prototype.info=function(){};var vo={},Pu=null;function Vo(){return Pu=Pu||new Tn}function ya(n){ar.call(this,vo.Pa,n)}function ta(n){const e=Vo();oi(e,new ya(e))}function as(n,e){ar.call(this,vo.STAT_EVENT,n),this.stat=e}function Wi(n){const e=Vo();oi(e,new as(e,n))}function Xs(n,e){ar.call(this,vo.Qa,n),this.size=e}function va(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}vo.Pa="serverreachability",In(ya,ar),vo.STAT_EVENT="statevent",In(as,ar),vo.Qa="timingevent",In(Xs,ar);var yr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},$a={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function eo(){}function ru(){}eo.prototype.h=null;var Nu,Uo={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function gu(){ar.call(this,"d")}function _a(){ar.call(this,"c")}function li(){}function vr(n,e,t,s){this.l=n,this.j=e,this.m=t,this.U=s||1,this.S=new Tr(this),this.O=to,this.T=new En(n=A?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ea}function Ea(){this.i=null,this.g="",this.h=!1}In(gu,ar),In(_a,ar),In(li,eo),li.prototype.g=function(){return new XMLHttpRequest},li.prototype.i=function(){return{}},Nu=new li;var to=45e3,Ha={},Os={};function ms(n,e,t){n.K=1,n.v=Da(jo(e)),n.s=t,n.P=!0,Ga(n,null)}function Ga(n,e){n.F=Date.now(),wa(n),n.A=jo(n.v);var t=n.A,s=n.U;Array.isArray(s)||(s=[String(s)]),ba(t.i,"t",s),n.C=0,t=n.l.H,n.h=new Ea,n.g=Kd(n.l,t?e:null,!n.s),0<n.N&&(n.L=new fr(wr(n.La,n,n.g),n.N)),os(n.S,n.g,"readystatechange",n.ib),e=n.H?Va(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),ta(),function Ys(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var p="",D=l.split("&"),O=0;O<D.length;O++){var L=D[O].split("=");if(1<L.length){var K=L[0];L=L[1];var ue=K.split("_");p=2<=ue.length&&"type"==ue[1]?p+(K+"=")+L+"&":p+(K+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.U,n.s)}function ac(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function mu(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=iu(n,t),a==Os){4==e&&(n.o=4,Wi(14),s=!1),Js(n.j,n.m,null,"[Incomplete Response]");break}if(a==Ha){n.o=4,Wi(15),Js(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Js(n.j,n.m,a,null),za(n,a)}ac(n)&&a!=Os&&a!=Ha&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Wi(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),If(e),e.K=!0,Wi(11))):(Js(n.j,n.m,t,"[Invalid Chunked Response]"),ys(n),us(n))}function iu(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Os:(t=Number(e.substring(t,s)),isNaN(t)?Ha:(s+=1)+t>e.length?Os:(e=e.substr(s,t),n.C=s+t,e))}function wa(n){n.V=Date.now()+n.O,Ns(n,n.O)}function Ns(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=va(wr(n.gb,n),e)}function Ia(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function us(n){0==n.l.G||n.I||mg(n.l,n)}function ys(n){Ia(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Rn(n.T),ui(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function za(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||$(t.h,n)))if(!n.J&&$(t.h,n)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;il(t),tl(t)}lc(t),Wi(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=va(wr(t.cb,t),6e3));if(1>=N(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Bu(t,11)}else if((n.J||t.g==n)&&il(t),!ts(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let L=a[e];if(t.T=L[0],L=L[1],2==t.G)if("c"==L[0]){t.I=L[1],t.ka=L[2];const K=L[3];null!=K&&(t.ma=K,t.j.info("VER="+t.ma));const ue=L[4];null!=ue&&(t.Ca=ue,t.j.info("SVER="+t.Ca));const De=L[5];null!=De&&"number"==typeof De&&0<De&&(t.J=s=1.5*De,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Ke=n.g;if(Ke){const pt=Ke.g?Ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pt){var l=s.h;l.g||-1==pt.indexOf("spdy")&&-1==pt.indexOf("quic")&&-1==pt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(Y(l,l.h),l.h=null))}if(s.D){const At=Ke.g?Ke.g.getResponseHeader("X-HTTP-Session-Id"):null;At&&(s.za=At,Mr(s.F,s.D,At))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var p=n;if((s=t).sa=rd(s,s.H?s.ka:null,s.V),p.J){Ee(s.h,p);var D=p,O=s.J;O&&D.setTimeout(O),D.B&&(Ia(D),wa(D)),s.g=p}else wf(s);0<t.i.length&&rl(t)}else"stop"!=L[0]&&"close"!=L[0]||Bu(t,7);else 3==t.G&&("stop"==L[0]||"close"==L[0]?"stop"==L[0]?Bu(t,7):td(t):"noop"!=L[0]&&t.l&&t.l.wa(L),t.A=0)}ta()}catch{}}function Xl(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dr(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function yf(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(dr(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const s in n)e[t++]=s;return e}}}(n),s=function su(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(dr(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n),a=s.length,l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}(Ot=vr.prototype).setTimeout=function(n){this.O=n},Ot.ib=function(n){n=n.target;const e=this.L;e&&3==Eo(n)?e.l():this.La(n)},Ot.La=function(n){try{if(n==this.g)e:{const K=Eo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>K)&&(3!=K||A||this.g&&(this.h.h||this.g.fa()||cc(this.g)))){this.I||4!=K||7==e||ta(),Ia(this);var t=this.g.aa();this.Y=t;t:if(ac(this)){var s=cc(this.g);n="";var a=s.length,l=4==Eo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ys(this),us(this);var p="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.fa();if(this.i=200==t,function Qs(n,e,t,s,a,l,p){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.U,K,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var D,O=this.g;if((D=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ts(D)){var L=D;break t}}L=null}if(!(t=L)){this.i=!1,this.o=3,Wi(12),ys(this),us(this);break e}Js(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,za(this,t)}this.P?(mu(this,K,p),A&&this.i&&3==K&&(os(this.S,this.T,"tick",this.hb),this.T.start())):(Js(this.j,this.m,p,null),za(this,p)),4==K&&ys(this),this.i&&!this.I&&(4==K?mg(this.l,this):(this.i=!1,wa(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Wi(12)):(this.o=0,Wi(13)),ys(this),us(this)}}}catch{}},Ot.hb=function(){if(this.g){var n=Eo(this.g),e=this.g.fa();this.C<e.length&&(Ia(this),mu(this,n,e),this.i&&4!=n&&wa(this))}},Ot.cancel=function(){this.I=!0,ys(this)},Ot.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Lo(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ta(),Wi(17)),ys(this),this.o=2,us(this)):Ns(this,this.V-n)};var Wn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bo(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Bo){this.h=void 0!==e?e:n.h,ou(this,n.j),this.s=n.s,this.g=n.g,ku(this,n.m),this.l=n.l,e=n.i;var t=new ra;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),uc(this,t),this.o=n.o}else n&&(t=String(n).match(Wn))?(this.h=!!e,ou(this,t[1]||"",!0),this.s=Fu(t[2]||""),this.g=Fu(t[3]||"",!0),ku(this,t[4]),this.l=Fu(t[5]||"",!0),uc(this,t[6]||"",!0),this.o=Fu(t[7]||"")):(this.h=!!e,this.i=new ra(null,this.h))}function jo(n){return new Bo(n)}function ou(n,e,t){n.j=t?Fu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ku(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uc(n,e,t){e instanceof ra?(n.i=e,function vf(n,e){e&&!n.j&&(qi(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(ia(this,s),ba(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=na(e,ks)),n.i=new ra(e,n.h))}function Mr(n,e,t){n.i.set(e,t)}function Da(n){return Mr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Fu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function na(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,di),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function di(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(na(e,au,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(na(e,au,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(na(t,"/"==t.charAt(0)?Lu:uu,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",na(t,no)),n.join("")};var au=/[#\/\?@]/g,uu=/[#\?:]/g,Lu=/[#\?]/g,ks=/[#\?@]/g,no=/#/g;function ra(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function qi(n){n.g||(n.g=new Map,n.h=0,n.i&&function ed(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ia(n,e){qi(n),e=_o(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Wa(n,e){return qi(n),e=_o(n,e),n.g.has(e)}function ba(n,e,t){ia(n,e),0<t.length&&(n.i=null,n.g.set(_o(n,e),Xr(t)),n.h+=t.length)}function _o(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function w(n){this.l=n||y,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ga&&Bt.g.Ga()&&Bt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ot=ra.prototype).add=function(n,e){qi(this),this.i=null,n=_o(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ot.forEach=function(n,e){qi(this),this.g.forEach(function(t,s){t.forEach(function(a){n.call(e,a,s,this)},this)},this)},Ot.oa=function(){qi(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=n[s];for(let l=0;l<a.length;l++)t.push(e[s])}return t},Ot.W=function(n){qi(this);let e=[];if("string"==typeof n)Wa(this,n)&&(e=e.concat(this.g.get(_o(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ot.set=function(n,e){return qi(this),this.i=null,Wa(this,n=_o(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ot.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const l=encodeURIComponent(String(s)),p=this.W(s);for(s=0;s<p.length;s++){var a=l;""!==p[s]&&(a+="="+encodeURIComponent(String(p[s]))),n.push(a)}}return this.i=n.join("&")};var y=10;function C(n){return!!n.h||!!n.g&&n.g.size>=n.j}function N(n){return n.h?1:n.g?n.g.size:0}function $(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Y(n,e){n.g?n.g.add(e):n.h=e}function Ee(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function We(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Xr(n.i)}function Nt(){}function xt(){this.g=new Nt}function Un(n,e,t){const s=t||"";try{Xl(n,function(a,l){let p=a;Hi(a)&&(p=nu(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Ri(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function Ii(n){this.l=n.ac||null,this.j=n.jb||!1}function vs(n,e){Tn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=hi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}w.prototype.cancel=function(){if(this.i=We(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Nt.prototype.stringify=function(n){return Bt.JSON.stringify(n,void 0)},Nt.prototype.parse=function(n){return Bt.JSON.parse(n,void 0)},In(Ii,eo),Ii.prototype.g=function(){return new vs(this.l,this.j)},Ii.prototype.i=function(n){return function(){return n}}({}),In(vs,Tn);var hi=0;function M(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function k(n){n.readyState=4,n.l=null,n.j=null,n.A=null,j(n)}function j(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ot=vs.prototype).open=function(n,e){if(this.readyState!=hi)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,j(this)},Ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Bt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,k(this)),this.readyState=hi},Ot.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,j(this)),this.g&&(this.readyState=3,j(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;M(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Ot.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?k(this):j(this),3==this.readyState&&M(this)}},Ot.Va=function(n){this.g&&(this.response=this.responseText=n,k(this))},Ot.Ua=function(n){this.g&&(this.response=n,k(this))},Ot.ga=function(){this.g&&k(this)},Ot.setRequestHeader=function(n,e){this.v.append(n,e)},Ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ne=Bt.JSON.parse;function ge(n){Tn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xe,this.K=this.L=!1}In(ge,Tn);var xe="",at=/^https?$/i,Vt=["POST","PUT"];function rn(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kn(n),_s(n)}function kn(n){n.D||(n.D=!0,oi(n,"complete"),oi(n,"error"))}function hn(n){if(n.h&&typeof es<"u"&&(!n.C[1]||4!=Eo(n)||2!=n.aa()))if(n.v&&4==Eo(n))_n(n.Ha,0,n);else if(oi(n,"readystatechange"),4==Eo(n)){n.h=!1;try{const D=n.aa();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===D){var a=String(n.H).match(Wn)[1]||null;if(!a&&Bt.self&&Bt.self.location){var l=Bt.self.location.protocol;a=l.substr(0,l.length-1)}s=!at.test(a?a.toLowerCase():"")}t=s}if(t)oi(n,"complete"),oi(n,"success");else{n.m=6;try{var p=2<Eo(n)?n.g.statusText:""}catch{p=""}n.j=p+" ["+n.aa()+"]",kn(n)}}finally{_s(n)}}}function _s(n,e){if(n.g){Di(n);const t=n.g,s=n.C[0]?Qr:null;n.g=null,n.C=null,e||oi(n,"ready");try{t.onreadystatechange=s}catch{}}}function Di(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function Eo(n){return n.g?n.g.readyState:0}function cc(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xe:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function qa(n){let e="";return Jo(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function cs(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=qa(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mr(n,e,t))}function ro(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Vu(n){this.Ca=0,this.i=[],this.j=new ci,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ro("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ro("baseRetryDelayMs",5e3,n),this.bb=ro("retryDelaySeedMs",1e4,n),this.$a=ro("forwardChannelMaxRetries",2,n),this.ta=ro("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new w(n&&n.concurrentRequestLimit),this.Fa=new xt,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function td(n){if(nl(n),3==n.G){var e=n.U++,t=jo(n.F);Mr(t,"SID",n.I),Mr(t,"RID",e),Mr(t,"TYPE","terminate"),Uu(n,t),(e=new vr(n,n.j,e,void 0)).K=2,e.v=Da(jo(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(t=Bt.navigator.sendBeacon(e.v.toString(),"")),!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Kd(e.l,null),e.g.da(e.v)),e.F=Date.now(),wa(e)}sl(n)}function tl(n){n.g&&(If(n),n.g.cancel(),n.g=null)}function nl(n){tl(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),il(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function rl(n){C(n.h)||n.m||(n.m=!0,G(n.Ja,n),n.C=0)}function nd(n,e){var t;t=e?e.m:n.U++;const s=jo(n.F);Mr(s,"SID",n.I),Mr(s,"RID",t),Mr(s,"AID",n.T),Uu(n,s),n.o&&n.s&&cs(s,n.o,n.s),t=new vr(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Ef(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Y(n.h,t),ms(t,s,e)}function Uu(n,e){n.ia&&Jo(n.ia,function(t,s){Mr(e,s,t)}),n.l&&Xl({},function(t,s){Mr(e,s,t)})}function Ef(n,e,t){t=Math.min(n.i.length,t);var s=n.l?wr(n.l.Ra,n.l,n):null;e:{var a=n.i;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let D=!0;for(let O=0;O<t;O++){let L=a[O].h;const K=a[O].g;if(L-=l,0>L)l=Math.max(0,a[O].h-100),D=!1;else try{Un(K,p,"req"+L+"_")}catch{s&&s(K)}}if(D){s=p.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,s}function wf(n){n.g||n.u||(n.Z=1,G(n.Ia,n),n.A=0)}function lc(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=va(wr(n.Ia,n),yg(n,n.A)),n.A++,0))}function If(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Df(n){n.g=new vr(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=jo(n.sa);Mr(e,"RID","rpc"),Mr(e,"SID",n.I),Mr(e,"CI",n.L?"0":"1"),Mr(e,"AID",n.T),Mr(e,"TYPE","xmlhttp"),Uu(n,e),n.o&&n.s&&cs(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Da(jo(e)),t.s=null,t.P=!0,Ga(t,n)}function il(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function mg(n,e){var t=null;if(n.g==e){il(n),If(n),n.g=null;var s=2}else{if(!$(n.h,e))return;t=e.D,Ee(n.h,e),s=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;oi(s=Vo(),new Xs(s,t)),rl(n)}else wf(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==s&&function _f(n,e){return!(N(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=va(wr(n.Ja,n,e),yg(n,n.C)),n.C++,0)))}(n,e)||2==s&&lc(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Bu(n,5);break;case 4:Bu(n,10);break;case 3:Bu(n,6);break;default:Bu(n,2)}}function yg(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Bu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var s=wr(n.kb,n);t||(t=new Bo("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||ou(t,"https"),Da(t)),function $r(n,e){const t=new ci;if(Bt.Image){const s=new Image;s.onload=Ei(Ri,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Ei(Ri,t,s,"TestLoadImage: error",!1,e),s.onabort=Ei(Ri,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Ei(Ri,t,s,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Wi(2);n.G=0,n.l&&n.l.va(e),sl(n),nl(n)}function sl(n){if(n.G=0,n.la=[],n.l){const e=We(n.h);(0!=e.length||0!=n.i.length)&&(qs(n.la,e),qs(n.la,n.i),n.h.i.length=0,Xr(n.i),n.i.length=0),n.l.ua()}}function rd(n,e,t){var s=t instanceof Bo?jo(t):new Bo(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),ku(s,s.m);else{var a=Bt.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new Bo(null,void 0);s&&ou(l,s),e&&(l.g=e),a&&ku(l,a),t&&(l.l=t),s=l}return e=n.za,(t=n.D)&&e&&Mr(s,t,e),Mr(s,"VER",n.ma),Uu(n,s),s}function Kd(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ge(t&&n.Da&&!n.ra?new Ii({jb:!0}):n.ra)).Ka(n.H),e}function id(){}function ol(){if(S&&!(10<=Number(Gi)))throw Error("Environmental error: no available transport.")}function Lr(n,e){Tn.call(this),this.g=new Vu(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!ts(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ts(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new dc(this)}function bf(n){gu.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Cf(){_a.call(this),this.status=1}function dc(n){this.g=n}(Ot=ge.prototype).Ka=function(n){this.L=n},Ot.da=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Nu.g(),this.C=function Ou(n){return n.h||(n.h=n.i())}(this.u?this.u:Nu),this.g.onreadystatechange=wr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void rn(this,l)}if(n=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())t.set(l,s.get(l))}s=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=Bt.FormData&&n instanceof Bt.FormData,!(0<=Yo(Vt,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,p]of t)this.g.setRequestHeader(l,p);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Di(this),0<this.B&&((this.K=function Kt(n){return S&&function rs(){return function eu(n){var e=ps;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Qo(String(Nn)).split("."),t=Qo("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==n&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=po(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||po(0==a[2].length,0==l[2].length)||po(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wr(this.qa,this)):this.A=_n(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){rn(this,l)}},Ot.qa=function(){typeof es<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oi(this,"timeout"),this.abort(8))},Ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,oi(this,"complete"),oi(this,"abort"),_s(this))},Ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_s(this,!0)),ge.X.M.call(this)},Ot.Ha=function(){this.s||(this.F||this.v||this.l?hn(this):this.fb())},Ot.fb=function(){hn(this)},Ot.aa=function(){try{return 2<Eo(this)?this.g.status:-1}catch{return-1}},Ot.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ot.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ne(e)}},Ot.Ea=function(){return this.m},Ot.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ot=Vu.prototype).ma=8,Ot.G=1,Ot.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new vr(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=Va(l),tu(l,this.S)):l=this.S),null!==this.o||this.N||(a.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ef(this,a,e),Mr(t=jo(this.F),"RID",n),Mr(t,"CVER",22),this.D&&Mr(t,"X-HTTP-Session-Id",this.D),Uu(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(qa(l)))+"&"+e:this.o&&cs(t,this.o,l)),Y(this.h,a),this.Ya&&Mr(t,"TYPE","init"),this.O?(Mr(t,"$req",e),Mr(t,"SID","null"),a.Z=!0,ms(a,t,null)):ms(a,t,e),this.G=2}}else 3==this.G&&(n?nd(this,n):0==this.i.length||C(this.h)||nd(this))},Ot.Ia=function(){if(this.u=null,Df(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=va(wr(this.eb,this),n)}},Ot.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Wi(10),tl(this),Df(this))},Ot.cb=function(){null!=this.v&&(this.v=null,tl(this),lc(this),Wi(19))},Ot.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Wi(2)):(this.j.info("Failed to ping google.com"),Wi(1))},(Ot=id.prototype).xa=function(){},Ot.wa=function(){},Ot.va=function(){},Ot.ua=function(){},Ot.Ra=function(){},ol.prototype.g=function(n,e){return new Lr(n,e)},In(Lr,Tn),Lr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Wi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=rd(n,null,n.V),rl(n)},Lr.prototype.close=function(){td(this.g)},Lr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=nu(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&rl(e)},Lr.prototype.M=function(){this.g.l=null,delete this.j,td(this.g),delete this.g,Lr.X.M.call(this)},In(bf,gu),In(Cf,_a),In(dc,id),dc.prototype.xa=function(){oi(this.g,"a")},dc.prototype.wa=function(n){oi(this.g,new bf(n))},dc.prototype.va=function(n){oi(this.g,new Cf)},dc.prototype.ua=function(){oi(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,Lr.prototype.send=Lr.prototype.u,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,$a.COMPLETE="complete",ru.EventType=Uo,Uo.OPEN="a",Uo.CLOSE="b",Uo.ERROR="c",Uo.MESSAGE="d",Tn.prototype.listen=Tn.prototype.N,ge.prototype.listenOnce=ge.prototype.O,ge.prototype.getLastError=ge.prototype.Oa,ge.prototype.getLastErrorCode=ge.prototype.Ea,ge.prototype.getStatus=ge.prototype.aa,ge.prototype.getResponseJson=ge.prototype.Sa,ge.prototype.getResponseText=ge.prototype.fa,ge.prototype.send=ge.prototype.da,ge.prototype.setWithCredentials=ge.prototype.Ka;var Tf=Yr.createWebChannelTransport=function(){return new ol},Yd=Yr.getStatEventTarget=function(){return Vo()},Qd=Yr.ErrorCode=yr,vg=Yr.EventType=$a,_g=Yr.Event=vo,al=Yr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Eg=Yr.FetchXmlHttpFactory=Ii,sd=Yr.WebChannel=ru,wo=Yr.XhrIo=ge;const od="@firebase/firestore";class Zi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zi.UNAUTHENTICATED=new Zi(null),Zi.GOOGLE_CREDENTIALS=new Zi("google-credentials-uid"),Zi.FIRST_PARTY=new Zi("first-party-uid"),Zi.MOCK_USER=new Zi("mock-user");let cu="9.20.0";const ti=new bn.Yd("@firebase/firestore");function ju(){return ti.logLevel}function ft(n,...e){if(ti.logLevel<=bn.in.DEBUG){const t=e.map(ul);ti.debug(`Firestore (${cu}): ${n}`,...t)}}function bi(n,...e){if(ti.logLevel<=bn.in.ERROR){const t=e.map(ul);ti.error(`Firestore (${cu}): ${n}`,...t)}}function $o(n,...e){if(ti.logLevel<=bn.in.WARN){const t=e.map(ul);ti.warn(`Firestore (${cu}): ${n}`,...t)}}function ul(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function $t(n="Unexpected state"){const e=`FIRESTORE (${cu}) INTERNAL ASSERTION FAILED: `+n;throw bi(e),new Error(e)}function Qt(n,e){n||$t()}function Rt(n,e){return n}const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Tt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $u{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zi.UNAUTHENTICATED))}shutdown(){}}class xf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ad{constructor(e){this.t=e,this.currentUser=Zi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=L=>this.i!==a?(a=this.i,t(L)):Promise.resolve();let p=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Ci,e.enqueueRetryable(()=>l(this.currentUser))};const D=()=>{const L=p;e.enqueueRetryable((0,_e.Z)(function*(){yield L.promise,yield l(s.currentUser)}))},O=L=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=L,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(L=>O(L)),setTimeout(()=>{if(!this.auth){const L=this.t.getImmediate({optional:!0});L?O(L):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Ci)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qt("string"==typeof s.accessToken),new wg(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qt(null===e||"string"==typeof e),new Zi(e)}}class ud{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Zi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class cd{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new ud(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=l=>{null!=l.error&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.T;return this.T=l.token,ft("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?a(l):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qt("string"==typeof t.token),this.T=t.token,new Jd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Rf(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class Pf{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Rf(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function gn(n,e){return n<e?-1:n>e?1:0}function fc(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function Ig(n){return n+"\0"}class E{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new et(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new et(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new et(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return E.fromMillis(Date.now())}static fromDate(e){return E.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new E(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gn(this.nanoseconds,e.nanoseconds):gn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class d{constructor(e){this.timestamp=e}static fromTimestamp(e){return new d(e)}static min(){return new d(new E(0,0))}static max(){return new d(new E(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class f{constructor(e,t,s){void 0===t?t=0:t>e.length&&$t(),void 0===s?s=e.length-t:s>e.length-t&&$t(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===f.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof f?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class I extends f{construct(e,t,s){return new I(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new et(Ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new I(t)}static emptyPath(){return new I([])}}const U=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class q extends f{construct(e,t,s){return new q(e,t,s)}static isValidIdentifier(e){return U.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),q.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new q(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new et(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new et(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const O=e[a+1];if("\\"!==O&&"."!==O&&"`"!==O)throw new et(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=O,a+=2}else"`"===D?(p=!p,a++):"."!==D||p?(s+=D,a++):(l(),a++)}if(l(),p)throw new et(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new q(t)}static emptyPath(){return new q([])}}class te{constructor(e){this.path=e}static fromPath(e){return new te(I.fromString(e))}static fromName(e){return new te(I.fromString(e).popFirst(5))}static empty(){return new te(I.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===I.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return I.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new I(e.slice()))}}class Oe{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Et(n){return n.fields.find(e=>2===e.kind)}function Dt(n){return n.fields.filter(e=>2!==e.kind)}Oe.UNKNOWN_ID=-1;class yn{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ho{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ho(0,Io.min())}}function pc(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=d.fromTimestamp(1e9===s?new E(t+1,0):new E(t,s));return new Io(a,te.empty(),e)}function Xd(n){return new Io(n.readTime,n.key,-1)}class Io{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Io(d.min(),te.empty(),-1)}static max(){return new Io(d.max(),te.empty(),-1)}}function Hu(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=te.comparator(n.documentKey,e.documentKey),0!==t?t:gn(n.largestBatchId,e.largestBatchId))}const eh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Za(n){return ll.apply(this,arguments)}function ll(){return ll=(0,_e.Z)(function*(n){if(n.code!==Ne.FAILED_PRECONDITION||n.message!==eh)throw n;ft("LocalStore","Unexpectedly lost primary lease")}),ll.apply(this,arguments)}class Pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Pe((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Pe?t:Pe.resolve(t)}catch(t){return Pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Pe.reject(t)}static resolve(e){return new Pe((t,s)=>{t(e)})}static reject(e){return new Pe((t,s)=>{s(e)})}static waitFor(e){return new Pe((t,s)=>{let a=0,l=0,p=!1;e.forEach(D=>{++a,D.next(()=>{++l,p&&l===a&&t()},O=>s(O))}),p=!0,l===a&&t()})}static or(e){let t=Pe.resolve(!1);for(const s of e)t=t.next(a=>a?Pe.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new Pe((s,a)=>{const l=e.length,p=new Array(l);let D=0;for(let O=0;O<l;O++){const L=O;t(e[L]).next(K=>{p[L]=K,++D,D===l&&s(p)},K=>a(K))}})}static doWhile(e,t){return new Pe((s,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):s()};l()})}}class gc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Ci,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new yc(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const a=bg(s.target.error);this.R.reject(new yc(e,a))}}static open(e,t,s,a){try{return new gc(t,e.transaction(a,s))}catch(l){throw new yc(t,l)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(ft("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Dg(t)}}class Do{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===Do.S((0,Tt.z$)())&&bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ft("SimpleDb","Removing database:",e),Gu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Tt.hl)())return!1;if(Do.C())return!0;const e=(0,Tt.z$)(),t=Do.S(e),s=0<t&&t<10,a=Do.N(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,_e.Z)(function*(){return t.db||(ft("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new yc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const D=p.target.error;a("VersionError"===D.name?new et(Ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new et(Ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new yc(e,D))},l.onupgradeneeded=p=>{ft("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.V.M(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{ft("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,_e.Z)(function*(){const p="readonly"===t;let D=0;for(;;){++D;try{l.db=yield l.$(e);const O=gc.open(l.db,e,p?"readonly":"readwrite",s),L=a(O).next(K=>(O.P(),K)).catch(K=>(O.abort(K),Pe.reject(K))).toPromise();return L.catch(()=>{}),yield O.v,L}catch(O){const L=O,K="FirebaseError"!==L.name&&D<3;if(ft("SimpleDb","Transaction failed with error:",L.message,"Retrying:",K),l.close(),!K)return Promise.reject(L)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mc{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Gu(this.L.delete())}}class yc extends et{constructor(e,t){super(Ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yu(n){return"IndexedDbTransactionError"===n.name}class Dg{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(ft("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(ft("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Gu(s)}add(e){return ft("SimpleDb","ADD",this.store.name,e,e),Gu(this.store.add(e))}get(e){return Gu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ft("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ft("SimpleDb","DELETE",this.store.name,e),Gu(this.store.delete(e))}count(){return ft("SimpleDb","COUNT",this.store.name),Gu(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),l=[];return this.W(a,(p,D)=>{l.push(D)}).next(()=>l)}{const a=this.store.getAll(s.range);return new Pe((l,p)=>{a.onerror=D=>{p(D.target.error)},a.onsuccess=D=>{l(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Pe((a,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}J(e,t){ft("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(l,p,D)=>D.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}X(e){const t=this.cursor({});return new Pe((s,a)=>{t.onerror=l=>{const p=bg(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(D=>{D?p.continue():s()}):s()}})}W(e,t){const s=[];return new Pe((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const D=p.target.result;if(!D)return void a();const O=new mc(D),L=t(D.primaryKey,D.value,O);if(L instanceof Pe){const K=L.catch(ue=>(O.done(),Pe.reject(ue)));s.push(K)}O.isDone?a():null===O.K?D.continue():D.continue(O.K)}}).next(()=>Pe.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gu(n){return new Pe((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=bg(s.target.error);t(a)}})}let ld=!1;function bg(n){const e=Do.S((0,Tt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ld||(ld=!0,setTimeout(()=>{throw s},0)),s}}return n}class Vy{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ft("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{ft("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){yu(s)?ft("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Za(s)}yield t.et(6e4)}))}}class V0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,l=!0;return Pe.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return ft("IndexBackiller",`Processing collection: ${p}`),this.it(e,p,a).next(D=>{a-=D,s.add(p)});l=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.rt(a,l)).next(D=>(ft("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>p.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,l)=>{const p=Xd(l);Hu(p,s)>0&&(s=p)}),new Io(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ca=(()=>{class n{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function th(n){return null==n}function dd(n){return 0===n&&1/n==-1/0}function Cg(n){return"number"==typeof n&&Number.isInteger(n)&&!dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Fs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vc(e)),e=Tg(n.get(t),e);return vc(e)}function Tg(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function vc(n){return n+"\x01\x01"}function vu(n){const e=n.length;if(Qt(e>=2),2===e)return Qt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),I.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&$t(),n.charAt(p+1)){case"\x01":const D=n.substring(l,p);let O;0===a.length?O=D:(a+=D,O=a,a=""),s.push(O);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:$t()}l=p+2}return new I(s)}const Uy=["userId","batchId"];function Sg(n,e){return[n,Fs(e)]}function By(n,e,t){return[n,Fs(e),t]}const Ag={},U0=["prefixPath","collectionGroup","readTime","documentId"],jy=["prefixPath","collectionGroup","documentId"],Of=["collectionGroup","readTime","prefixPath","documentId"],xg=["canonicalId","targetId"],$y=["targetId","path"],Hy=["path","targetId"],Gy=["collectionId","parent"],zy=["indexId","uid"],B0=["uid","sequenceNumber"],j0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$0=["indexId","uid","orderedDocumentKey"],H0=["userId","collectionPath","documentId"],G0=["userId","collectionPath","largestBatchId"],_c=["userId","collectionGroup","largestBatchId"],hd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],z0=[...hd,"documentOverlays"],W0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],q0=W0,Qw=[...q0,"indexConfiguration","indexState","indexEntries"];class Wy extends cl{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function io(n,e){const t=Rt(n);return Do.O(t.at,e)}function Mg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Oi{constructor(e,t){this.comparator=e,this.root=t||Es.EMPTY}insert(e,t){return new Oi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Es.BLACK,null,null))}remove(e){return new Oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Es.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nf(this.root,e,this.comparator,!0)}}class Nf{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Es{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Es.RED,this.left=a??Es.EMPTY,this.right=l??Es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Es(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Es.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $t();const e=this.left.check();if(e!==this.right.check())throw $t();return e+(this.isRed()?0:1)}}Es.EMPTY=null,Es.RED=!0,Es.BLACK=!1,Es.EMPTY=new class{constructor(){this.size=0}get key(){throw $t()}get value(){throw $t()}get color(){throw $t()}get left(){throw $t()}get right(){throw $t()}copy(n,e,t,s,a){return this}insert(n,e,t){return new Es(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fd(this.data.getIterator())}getIteratorFrom(e){return new fd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qn(this.comparator);return t.data=e,t}}class fd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hl(n){return n.hasNext()?n.getNext():void 0}class Go{constructor(e){this.fields=e,e.sort(q.comparator)}static empty(){return new Go([])}unionWith(e){let t=new Qn(q.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Go(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fc(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Zy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ls{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Zy("Invalid base64 string: "+a):a}}(e);return new Ls(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Ls(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ls.EMPTY_BYTE_STRING=new Ls("");const Xw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _u(n){if(Qt(!!n),"string"==typeof n){let e=0;const t=Xw.exec(n);if(Qt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:fi(n.seconds),nanos:fi(n.nanos)}}function fi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pd(n){return"string"==typeof n?Ls.fromBase64String(n):Ls.fromUint8Array(n)}function Ky(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Rg(n){const e=n.mapValue.fields.__previous_value__;return Ky(e)?Rg(e):e}function nh(n){const e=_u(n.mapValue.fields.__local_write_time__.timestampValue);return new E(e.seconds,e.nanos)}class Z0{constructor(e,t,s,a,l,p,D,O){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=D,this.useFetchStreams=O}}class Ec{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ec("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}const wc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rh={nullValue:"NULL_VALUE"};function Eu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ky(n)?4:K0(n)?9007199254740991:10:$t()}function wu(n,e){if(n===e)return!0;const t=Eu(n);if(t!==Eu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nh(n).isEqual(nh(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=_u(s.timestampValue),p=_u(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,pd(n.bytesValue).isEqual(pd(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return fi(s.geoPointValue.latitude)===fi(a.geoPointValue.latitude)&&fi(s.geoPointValue.longitude)===fi(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return fi(s.integerValue)===fi(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=fi(s.doubleValue),p=fi(a.doubleValue);return l===p?dd(l)===dd(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return fc(n.arrayValue.values||[],e.arrayValue.values||[],wu);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Mg(l)!==Mg(p))return!1;for(const D in l)if(l.hasOwnProperty(D)&&(void 0===p[D]||!wu(l[D],p[D])))return!1;return!0}(n,e);default:return $t()}var a}function fl(n,e){return void 0!==(n.values||[]).find(t=>wu(t,e))}function Ic(n,e){if(n===e)return 0;const t=Eu(n),s=Eu(e);if(t!==s)return gn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return gn(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=fi(a.integerValue||a.doubleValue),D=fi(l.integerValue||l.doubleValue);return p<D?-1:p>D?1:p===D?0:isNaN(p)?isNaN(D)?0:-1:1}(n,e);case 3:return Ki(n.timestampValue,e.timestampValue);case 4:return Ki(nh(n),nh(e));case 5:return gn(n.stringValue,e.stringValue);case 6:return function(a,l){const p=pd(a),D=pd(l);return p.compareTo(D)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),D=l.split("/");for(let O=0;O<p.length&&O<D.length;O++){const L=gn(p[O],D[O]);if(0!==L)return L}return gn(p.length,D.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=gn(fi(a.latitude),fi(l.latitude));return 0!==p?p:gn(fi(a.longitude),fi(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],D=l.values||[];for(let O=0;O<p.length&&O<D.length;++O){const L=Ic(p[O],D[O]);if(L)return L}return gn(p.length,D.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===wc.mapValue&&l===wc.mapValue)return 0;if(a===wc.mapValue)return 1;if(l===wc.mapValue)return-1;const p=a.fields||{},D=Object.keys(p),O=l.fields||{},L=Object.keys(O);D.sort(),L.sort();for(let K=0;K<D.length&&K<L.length;++K){const ue=gn(D[K],L[K]);if(0!==ue)return ue;const De=Ic(p[D[K]],O[L[K]]);if(0!==De)return De}return gn(D.length,L.length)}(n.mapValue,e.mapValue);default:throw $t()}}function Ki(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return gn(n,e);const t=_u(n),s=_u(e),a=gn(t.seconds,s.seconds);return 0!==a?a:gn(t.nanos,s.nanos)}function pl(n){return Pg(n)}function Pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=_u(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pd(n.bytesValue).toBase64():"referenceValue"in n?te.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=Pg(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const D of a)p?p=!1:l+=",",l+=`${D}:${Pg(s.fields[D])}`;return l+"}"}(n.mapValue):$t();var e}function zu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kf(n){return!!n&&"integerValue"in n}function ih(n){return!!n&&"arrayValue"in n}function Yy(n){return!!n&&"nullValue"in n}function Qy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ff(n){return!!n&&"mapValue"in n}function gd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dl(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=gd(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function K0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function eI(n){return"nullValue"in n?rh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zu(Ec.empty(),te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:$t()}function sh(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zu(Ec.empty(),te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?wc:$t()}function Lf(n,e){const t=Ic(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Og(n,e){const t=Ic(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ws{constructor(e){this.value=e}static empty(){return new ws({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gd(t)}setAll(e){let t=q.emptyPath(),s={},a=[];e.forEach((p,D)=>{if(!t.isImmediateParentOf(D)){const O=this.getFieldsMap(t);this.applyChanges(O,s,a),s={},a=[],t=D.popLast()}p?s[D.lastSegment()]=gd(p):a.push(D.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Ff(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){dl(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new ws(gd(this.value))}}function Ng(n){const e=[];return dl(n.fields,(t,s)=>{const a=new q([t]);if(Ff(s)){const l=Ng(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new Go(e)}class pi{constructor(e,t,s,a,l,p,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=p,this.documentState=D}static newInvalidDocument(e){return new pi(e,0,d.min(),d.min(),d.min(),ws.empty(),0)}static newFoundDocument(e,t,s,a){return new pi(e,1,t,d.min(),s,a,0)}static newNoDocument(e,t){return new pi(e,2,t,d.min(),d.min(),ws.empty(),0)}static newUnknownDocument(e,t){return new pi(e,3,t,d.min(),d.min(),ws.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(d.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=d.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dc{constructor(e,t){this.position=e,this.inclusive=t}}function kg(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(s=l.field.isKeyField()?te.comparator(te.fromName(p.referenceValue),t.key):Ic(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function Fg(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wu(n.position[t],e.position[t]))return!1;return!0}class bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function tI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Vf{}class Jn extends Vf{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new jf(e,t,s):"array-contains"===t?new Y0(e,s):"in"===t?new tv(e,s):"not-in"===t?new nv(e,s):"array-contains-any"===t?new md(e,s):new Jn(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ml(e,s):new ev(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ic(t,this.value)):null!==t&&Eu(this.value)===Eu(t)&&this.matchesComparison(Ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ir extends Vf{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Ir(e,t)}matches(e){return gl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function gl(n){return"and"===n.op}function Uf(n){return"or"===n.op}function Wu(n){return Jy(n)&&gl(n)}function Jy(n){for(const e of n.filters)if(e instanceof Ir)return!1;return!0}function oh(n){if(n instanceof Jn)return n.field.canonicalString()+n.op.toString()+pl(n.value);if(Wu(n))return n.filters.map(e=>oh(e)).join(",");{const e=n.filters.map(t=>oh(t)).join(",");return`${n.op}(${e})`}}function ah(n,e){return n instanceof Jn?(t=n,(s=e)instanceof Jn&&t.op===s.op&&t.field.isEqual(s.field)&&wu(t.value,s.value)):n instanceof Ir?function(t,s){return s instanceof Ir&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,l,p)=>a&&ah(l,s.filters[p]),!0)}(n,e):void $t();var t,s}function Xy(n,e){const t=n.filters.concat(e);return Ir.create(t,n.op)}function Bf(n){return n instanceof Jn?`${(e=n).field.canonicalString()} ${e.op} ${pl(e.value)}`:n instanceof Ir?function(e){return e.op.toString()+" {"+e.getFilters().map(Bf).join(" ,")+"}"}(n):"Filter";var e}class jf extends Jn{constructor(e,t,s){super(e,t,s),this.key=te.fromName(s.referenceValue)}matches(e){const t=te.comparator(e.key,this.key);return this.matchesComparison(t)}}class ml extends Jn{constructor(e,t){super(e,"in",t),this.keys=$f(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ev extends Jn{constructor(e,t){super(e,"not-in",t),this.keys=$f(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $f(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>te.fromName(s.referenceValue))}class Y0 extends Jn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ih(t)&&fl(t.arrayValue,this.value)}}class tv extends Jn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fl(this.value.arrayValue,t)}}class nv extends Jn{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fl(this.value.arrayValue,t)}}class md extends Jn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ih(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>fl(this.value.arrayValue,s))}}class Q0{constructor(e,t=null,s=[],a=[],l=null,p=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=D,this.ft=null}}function Lg(n,e=null,t=[],s=[],a=null,l=null,p=null){return new Q0(n,e,t,s,a,l,p)}function yl(n){const e=Rt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>oh(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),th(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>pl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>pl(s)).join(",")),e.ft=t}return e.ft}function vl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ah(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Fg(n.startAt,e.startAt)&&Fg(n.endAt,e.endAt)}function Hf(n){return te.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function uh(n,e){return n.filters.filter(t=>t instanceof Jn&&t.field.isEqual(e))}function rv(n,e,t){let s=rh,a=!0;for(const l of uh(n,e)){let p=rh,D=!0;switch(l.op){case"<":case"<=":p=eI(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,D=!1;break;case"!=":case"not-in":p=rh}Lf({value:s,inclusive:a},{value:p,inclusive:D})<0&&(s=p,a=D)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];Lf({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function Vg(n,e,t){let s=wc,a=!0;for(const l of uh(n,e)){let p=wc,D=!0;switch(l.op){case">=":case">":p=sh(l.value),D=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,D=!1;break;case"!=":case"not-in":p=wc}Og({value:s,inclusive:a},{value:p,inclusive:D})>0&&(s=p,a=D)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];Og({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class Cc{constructor(e,t=null,s=[],a=[],l=null,p="F",D=null,O=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=D,this.endAt=O,this.dt=null,this.wt=null}}function iv(n,e,t,s,a,l,p,D){return new Cc(n,e,t,s,a,l,p,D)}function Iu(n){return new Cc(n)}function sv(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Tc(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Sc(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ug(n){return null!==n.collectionGroup}function Ac(n){const e=Rt(n);if(null===e.dt){e.dt=[];const t=Sc(e),s=Tc(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new bc(t)),e.dt.push(new bc(q.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.dt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new bc(q.keyField(),l))}}}return e.dt}function zo(n){const e=Rt(n);if(!e.wt)if("F"===e.limitType)e.wt=Lg(e.path,e.collectionGroup,Ac(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Ac(e))t.push(new bc(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new Dc(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Dc(e.startAt.position,e.startAt.inclusive):null;e.wt=Lg(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.wt}function Bg(n,e){e.getFirstInequalityField(),Sc(n);const t=n.filters.concat([e]);return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gf(n,e,t){return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yd(n,e){return vl(zo(n),zo(e))&&n.limitType===e.limitType}function jg(n){return`${yl(zo(n))}|lt:${n.limitType}`}function ch(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Bf(s)).join(", ")}]`),th(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>pl(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>pl(s)).join(",")),`Target(${t})`}(zo(n))}; limitType=${n.limitType})`}function _l(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):te.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of Ac(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!function(a,l,p){const D=kg(a,l,p);return a.inclusive?D<=0:D<0}(t.startAt,Ac(t),s)||t.endAt&&!function(a,l,p){const D=kg(a,l,p);return a.inclusive?D>=0:D>0}(t.endAt,Ac(t),s)));var t,s}function ov(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zf(n){return(e,t)=>{let s=!1;for(const a of Ac(n)){const l=lh(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function lh(n,e,t){const s=n.field.isKeyField()?te.comparator(e.key,t.key):function(a,l,p){const D=l.data.field(a),O=p.data.field(a);return null!==D&&null!==O?Ic(D,O):$t()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return $t()}}class xc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){dl(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return qy(this.inner)}size(){return this.innerSize}}const J0=new Oi(te.comparator);function sa(){return J0}const av=new Oi(te.comparator);function vd(...n){let e=av;for(const t of n)e=e.insert(t.key,t);return e}function uv(n){let e=av;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Du(){return Ta()}function El(){return Ta()}function Ta(){return new xc(n=>n.toString(),(n,e)=>n.isEqual(e))}const X0=new Oi(te.comparator),eE=new Qn(te.comparator);function Fn(...n){let e=eE;for(const t of n)e=e.add(t);return e}const nI=new Qn(gn);function dh(){return nI}function tE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dd(e)?"-0":e}}function $g(n){return{integerValue:""+n}}function Hg(n,e){return Cg(e)?$g(e):tE(n,e)}class Wf{constructor(){this._=void 0}}function cv(n,e,t){return n instanceof bo?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof wl?Gg(n,e):n instanceof Il?dv(n,e):function(s,a){const l=lv(s,a),p=hv(l)+hv(s._t);return kf(l)&&kf(s._t)?$g(p):tE(s.serializer,p)}(n,e)}function nE(n,e,t){return n instanceof wl?Gg(n,e):n instanceof Il?dv(n,e):t}function lv(n,e){return n instanceof _d?kf(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class bo extends Wf{}class wl extends Wf{constructor(e){super(),this.elements=e}}function Gg(n,e){const t=zg(e);for(const s of n.elements)t.some(a=>wu(a,s))||t.push(s);return{arrayValue:{values:t}}}class Il extends Wf{constructor(e){super(),this.elements=e}}function dv(n,e){let t=zg(e);for(const s of n.elements)t=t.filter(a=>!wu(a,s));return{arrayValue:{values:t}}}class _d extends Wf{constructor(e,t){super(),this.serializer=e,this._t=t}}function hv(n){return fi(n.integerValue||n.doubleValue)}function zg(n){return ih(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hh{constructor(e,t){this.field=e,this.transform=t}}class iE{constructor(e,t){this.version=e,this.transformResults=t}}class Wt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ph{}function Wg(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new bl(n.key,Wt.none()):new Dl(n.key,n.data,Wt.none());{const t=n.data,s=ws.empty();let a=new Qn(q.comparator);for(let l of e.fields)if(!a.has(l)){let p=t.field(l);null===p&&l.length>1&&(l=l.popLast(),p=t.field(l)),null===p?s.delete(l):s.set(l,p),a=a.add(l)}return new qu(n.key,s,new Go(a.toArray()),Wt.none())}}function sE(n,e,t){n instanceof Dl?function(s,a,l){const p=s.value.clone(),D=oE(s.fieldTransforms,a,l.transformResults);p.setAll(D),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof qu?function(s,a,l){if(!fh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=oE(s.fieldTransforms,a,l.transformResults),D=a.data;D.setAll(gv(s)),D.setAll(p),a.convertToFoundDocument(l.version,D).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function gh(n,e,t,s){return n instanceof Dl?function(a,l,p,D){if(!fh(a.precondition,l))return p;const O=a.value.clone(),L=qg(a.fieldTransforms,D,l);return O.setAll(L),l.convertToFoundDocument(l.version,O).setHasLocalMutations(),null}(n,e,t,s):n instanceof qu?function(a,l,p,D){if(!fh(a.precondition,l))return p;const O=qg(a.fieldTransforms,D,l),L=l.data;return L.setAll(gv(a)),L.setAll(O),l.convertToFoundDocument(l.version,L).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(K=>K.field))}(n,e,t,s):(p=t,fh(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function fv(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=lv(s.transform,a||null);null!=l&&(null===t&&(t=ws.empty()),t.set(s.field,l))}return t||null}function pv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&fc(t,s,(a,l)=>function rE(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof wl&&s instanceof wl||t instanceof Il&&s instanceof Il?fc(t.elements,s.elements,wu):t instanceof _d&&s instanceof _d?wu(t._t,s._t):t instanceof bo&&s instanceof bo);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}class Dl extends ph{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class qu extends ph{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function oE(n,e,t){const s=new Map;Qt(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,D=e.data.field(l.field);s.set(l.field,nE(p,D,t[a]))}return s}function qg(n,e,t){const s=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);s.set(a.field,cv(l,p,e))}return s}class bl extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zu extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zg{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&sE(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=gh(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=gh(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=El();return this.mutations.forEach(a=>{const l=e.get(a.key),p=l.overlayedDocument;let D=this.applyToLocalView(p,l.mutatedFields);D=t.has(a.key)?null:D;const O=Wg(p,D);null!==O&&s.set(a.key,O),p.isValidDocument()||p.convertToNoDocument(d.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fn())}isEqual(e){return this.batchId===e.batchId&&fc(this.mutations,e.mutations,(t,s)=>pv(t,s))&&fc(this.baseMutations,e.baseMutations,(t,s)=>pv(t,s))}}class mh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Qt(e.mutations.length===s.length);let a=X0;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new mh(e,t,s,a)}}class yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class iI{constructor(e){this.count=e}}var ls,tr;function uE(n){switch(n){default:return $t();case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0}}function yv(n){if(void 0===n)return bi("GRPC error has no .code"),Ne.UNKNOWN;switch(n){case ls.OK:return Ne.OK;case ls.CANCELLED:return Ne.CANCELLED;case ls.UNKNOWN:return Ne.UNKNOWN;case ls.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case ls.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case ls.INTERNAL:return Ne.INTERNAL;case ls.UNAVAILABLE:return Ne.UNAVAILABLE;case ls.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case ls.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case ls.NOT_FOUND:return Ne.NOT_FOUND;case ls.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case ls.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case ls.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case ls.ABORTED:return Ne.ABORTED;case ls.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case ls.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case ls.DATA_LOSS:return Ne.DATA_LOSS;default:return $t()}}(tr=ls||(ls={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";class Mc{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return qf}static getOrCreateInstance(){return null===qf&&(qf=new Mc),qf}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let qf=null;class Ed{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ed(d.min(),a,dh(),sa(),Fn())}}class Rc{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Rc(s,t,Fn(),Fn(),Fn())}}class Zf{constructor(e,t,s,a){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=a}}class Kg{constructor(e,t){this.targetId=e,this.Et=t}}class vv{constructor(e,t,s=Ls.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class _v{constructor(){this.At=0,this.Rt=wv(),this.vt=Ls.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Fn(),t=Fn(),s=Fn();return this.Rt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:$t()}}),new Rc(this.vt,this.bt,e,t,s)}xt(){this.Pt=!1,this.Rt=wv()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class cE{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=sa(),this.qt=Ev(),this.Ut=new Qn(gn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const s=this.jt(t);switch(e.state){case 0:this.Wt(t)&&s.Dt(e.resumeToken);break;case 1:s.$t(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.$t(),s.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(s.Mt(),s.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:$t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,a)=>{this.Wt(a)&&t(a)})}Jt(e){var t;const s=e.targetId,a=e.Et.count,l=this.Yt(s);if(l){const p=l.target;if(Hf(p))if(0===a){const D=new te(p.path);this.Qt(s,D,pi.newNoDocument(D,d.min()))}else Qt(1===a);else{const D=this.Zt(s);D!==a&&(this.Ht(s),this.Ut=this.Ut.add(s),null===(t=Mc.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:D,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((l,p)=>{const D=this.Yt(p);if(D){if(l.current&&Hf(D.target)){const O=new te(D.target.path);null!==this.Lt.get(O)||this.te(p,O)||this.Qt(p,O,pi.newNoDocument(O,e))}l.St&&(t.set(p,l.Ct()),l.xt())}});let s=Fn();this.qt.forEach((l,p)=>{let D=!0;p.forEachWhile(O=>{const L=this.Yt(O);return!L||2===L.purpose||(D=!1,!1)}),D&&(s=s.add(l))}),this.Lt.forEach((l,p)=>p.setReadTime(e));const a=new Ed(e,t,this.Ut,this.Lt,s);return this.Lt=sa(),this.qt=Ev(),this.Ut=new Qn(gn),a}Gt(e,t){if(!this.Wt(e))return;const s=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.Wt(e))return;const a=this.jt(e);this.te(e,t)?a.Nt(t,1):a.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new _v,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Qn(gn),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||ft("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new _v),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function Ev(){return new Oi(te.comparator)}function wv(){return new Oi(te.comparator)}const Iv={asc:"ASCENDING",desc:"DESCENDING"},lE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dv={and:"AND",or:"OR"};class bv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Yg(n,e){return Pc(n,e.toTimestamp())}function Yi(n){return Qt(!!n),d.fromTimestamp(function(e){const t=_u(e);return new E(t.seconds,t.nanos)}(n))}function Cv(n,e){return(t=n,new I(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Cl(n){const e=I.fromString(n);return Qt(oa(e)),e}function wd(n,e){return Cv(n.databaseId,e.path)}function bu(n,e){const t=Cl(e);if(t.get(1)!==n.databaseId.projectId)throw new et(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new et(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(_h(t))}function Kf(n,e){return Cv(n.databaseId,e)}function Tv(n){const e=Cl(n);return 4===e.length?I.emptyPath():_h(e)}function vh(n){return new I(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _h(n){return Qt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Tl(n,e,t){return{name:wd(n,e),fields:t.value.mapValue.fields}}function Yf(n,e,t){const s=bu(n,e.name),a=Yi(e.updateTime),l=e.createTime?Yi(e.createTime):d.min(),p=new ws({mapValue:{fields:e.fields}}),D=pi.newFoundDocument(s,a,l,p);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function Oc(n,e){let t;if(e instanceof Dl)t={update:Tl(n,e.key,e.value)};else if(e instanceof bl)t={delete:wd(n,e.key)};else if(e instanceof qu)t={update:Tl(n,e.key,e.data),updateMask:pE(e.fieldMask)};else{if(!(e instanceof Zu))return $t();t={verify:wd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof bo)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof wl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Il)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof _d)return{fieldPath:l.field.canonicalString(),increment:p._t};throw $t()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Yg(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:$t()),t;var a}function Qf(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Wt.updateTime(Yi(a.updateTime)):void 0!==a.exists?Wt.exists(a.exists):Wt.none():Wt.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let D=null;"setToServerValue"in p?(Qt("REQUEST_TIME"===p.setToServerValue),D=new bo):"appendMissingElements"in p?D=new wl(p.appendMissingElements.values||[]):"removeAllFromArray"in p?D=new Il(p.removeAllFromArray.values||[]):"increment"in p?D=new _d(l,p.increment):$t();const O=q.fromServerFormat(p.fieldPath);return new hh(O,D)}(n,a)):[];var a;if(e.update){const a=bu(n,e.update.name),l=new ws({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new Go((e.updateMask.fieldPaths||[]).map(L=>q.fromServerFormat(L)));return new qu(a,l,p,t,s)}return new Dl(a,l,t,s)}if(e.delete){const a=bu(n,e.delete);return new bl(a,t)}if(e.verify){const a=bu(n,e.verify);return new Zu(a,t)}return $t()}function Jf(n,e){return{documents:[Kf(n,e.path)]}}function wh(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Kf(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Kf(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(O){if(0!==O.length)return xv(Ir.create(O,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(O){if(0!==O.length)return O.map(L=>{return{field:Ku((K=L).field),direction:hE(K.dir)};var K})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(L=e.limit,n.useProto3Json||th(L)?L:{value:L});var L,D,O;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(O=e.endAt).inclusive,values:O.position}),t}function Xg(n){let e=Tv(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Qt(1===s);const K=t.from[0];K.allDescendants?a=K.collectionId:e=e.child(K.collectionId)}let l=[];t.where&&(l=function(K){const ue=Sv(K);return ue instanceof Ir&&Wu(ue)?ue.getFilters():[ue]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(K=>{return new bc(Sl((ue=K).field),function(De){switch(De){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ue.direction));var ue}));let D=null;t.limit&&(D=function(K){let ue;return ue="object"==typeof K?K.value:K,th(ue)?null:ue}(t.limit));let O=null;var K;t.startAt&&(O=new Dc((K=t.startAt).values||[],!!K.before));let L=null;return t.endAt&&(L=function(K){return new Dc(K.values||[],!K.before)}(t.endAt)),iv(e,a,p,l,D,"F",O,L)}function Sv(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sl(e.unaryFilter.field);return Jn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Sl(e.unaryFilter.field);return Jn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sl(e.unaryFilter.field);return Jn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Sl(e.unaryFilter.field);return Jn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return $t()}}(n):void 0!==n.fieldFilter?Jn.create(Sl((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $t()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ir.create(e.compositeFilter.filters.map(t=>Sv(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return $t()}}(e.compositeFilter.op))}(n):$t();var e}function hE(n){return Iv[n]}function Av(n){return lE[n]}function fE(n){return Dv[n]}function Ku(n){return{fieldPath:n.canonicalString()}}function Sl(n){return q.fromServerFormat(n.fieldPath)}function xv(n){return n instanceof Jn?function(e){if("=="===e.op){if(Qy(e.value))return{unaryFilter:{field:Ku(e.field),op:"IS_NAN"}};if(Yy(e.value))return{unaryFilter:{field:Ku(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qy(e.value))return{unaryFilter:{field:Ku(e.field),op:"IS_NOT_NAN"}};if(Yy(e.value))return{unaryFilter:{field:Ku(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ku(e.field),op:Av(e.op),value:e.value}}}(n):n instanceof Ir?function(e){const t=e.getFilters().map(s=>xv(s));return 1===t.length?t[0]:{compositeFilter:{op:fE(e.op),filters:t}}}(n):$t()}function pE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function oa(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Yu{constructor(e,t,s,a,l=d.min(),p=d.min(),D=Ls.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=D}withSequenceNumber(e){return new Yu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Mv{constructor(e){this.se=e}}function Xf(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ih(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:wd(a=n.se,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Pc(a,l.version.toTimestamp()),createTime:Pc(a,l.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Al(e.version)};else{if(!e.isUnknownDocument())return $t();s.unknownDocument={path:t.path.toArray(),version:Al(e.version)}}var a,l;return s}function Ih(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Al(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xl(n){const e=new E(n.seconds,n.nanoseconds);return d.fromTimestamp(e)}function Ml(n,e){const t=(e.baseMutations||[]).map(l=>Qf(n.se,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const s=e.mutations.map(l=>Qf(n.se,l)),a=E.fromMillis(e.localWriteTimeMs);return new Zg(e.batchId,a,t,s)}function Id(n){const e=xl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xl(n.lastLimboFreeSnapshotVersion):d.min();let s;var a;return void 0!==n.query.documents?(Qt(1===(a=n.query).documents.length),s=zo(Iu(Tv(a.documents[0])))):s=zo(Xg(n.query)),new Yu(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Ls.fromBase64String(n.resumeToken))}function Rv(n,e){const t=Al(e.snapshotVersion),s=Al(e.lastLimboFreeSnapshotVersion);let a;a=Hf(e.target)?Jf(n.se,e.target):wh(n.se,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yl(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function tm(n){const e=Xg({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gf(e,e.limit,"L"):e}function Dh(n,e){return new yh(e.largestBatchId,Qf(n.se,e.overlayMutation))}function Pv(n,e){const t=e.path.lastSegment();return[n,Fs(e.path.popLast()),t]}function Ov(n,e,t,s){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Al(s.readTime),documentKey:Fs(s.documentKey.path),largestBatchId:s.largestBatchId}}class gE{getBundleMetadata(e,t){return Nv(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:xl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Nv(e).put({bundleId:(s=t).id,createTime:Al(Yi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return kv(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:tm(a.bundledQuery),readTime:xl(a.readTime)};var a})}saveNamedQuery(e,t){return kv(e).put({name:(s=t).name,readTime:Al(Yi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Nv(n){return io(n,"bundles")}function kv(n){return io(n,"namedQueries")}class Sa{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new Sa(e,t.uid||"")}getOverlay(e,t){return Rl(e).get(Pv(this.userId,t)).next(s=>s?Dh(this.serializer,s):null)}getOverlays(e,t){const s=Du();return Pe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((l,p)=>{const D=new yh(t,p);a.push(this.re(e,D))}),Pe.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(Fs(p.getCollectionPath())));const l=[];return a.forEach(p=>{const D=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(Rl(e).J("collectionPathOverlayIndex",D))}),Pe.waitFor(l)}getOverlaysForCollection(e,t,s){const a=Du(),l=Fs(t),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Rl(e).j("collectionPathOverlayIndex",p).next(D=>{for(const O of D){const L=Dh(this.serializer,O);a.set(L.getKey(),L)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const l=Du();let p;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rl(e).Z({index:"collectionGroupOverlayIndex",range:D},(O,L,K)=>{const ue=Dh(this.serializer,L);l.size()<a||ue.largestBatchId===p?(l.set(ue.getKey(),ue),p=ue.largestBatchId):K.done()}).next(()=>l)}re(e,t){return Rl(e).put(function(s,a,l){const[p,D,O]=Pv(a,l.mutation.key);return{userId:a,collectionPath:D,documentId:O,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Oc(s.se,l.mutation)}}(this.serializer,this.userId,t))}}function Rl(n){return io(n,"documentOverlays")}class Pl{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(fi(e.integerValue));else if("doubleValue"in e){const s=fi(e.doubleValue);isNaN(s)?this.ae(t,13):(this.ae(t,15),dd(s)?t.he(0):t.he(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ae(t,20),"string"==typeof s?t.le(s):(t.le(`${s.seconds||""}`),t.he(s.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(pd(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ae(t,45),t.he(s.latitude||0),t.he(s.longitude||0)}else"mapValue"in e?K0(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):$t()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const s=e.fields||{};this.ae(t,55);for(const a of Object.keys(s))this.fe(a,t),this.ue(s[a],t)}ge(e,t){const s=e.values||[];this.ae(t,50);for(const a of s)this.ue(a,t)}_e(e,t){this.ae(t,37),te.fromName(e).path.forEach(s=>{this.ae(t,60),this.ye(s,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function mE(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nm(n){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const l=mE(255&t[a]);if(s+=l,8!==l)break}return s}(n);return Math.ceil(e/8)}Pl.pe=new Pl;class yE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Te(s.value),s=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Re(s.value),s=t.next();this.ve()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Te(s);else if(s<2048)this.Te(960|s>>>6),this.Te(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Te(480|s>>>12),this.Te(128|63&s>>>6),this.Te(128|63&s);else{const a=t.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}this.Ee()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Re(s);else if(s<2048)this.Re(960|s>>>6),this.Re(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Re(480|s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s);else{const a=t.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}this.ve()}Ve(e){const t=this.Se(e),s=nm(t);this.De(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ce(e){const t=this.Se(e),s=nm(t);this.De(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class vE{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class _E{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class Ol{constructor(){this.Me=new yE,this.Fe=new vE(this.Me),this.Be=new _E(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Nl{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Nl(this.indexId,this.documentKey,this.arrayValue,s)}}function Nc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bh(n.arrayValue,e.arrayValue),0!==t?t:(t=bh(n.directionalValue,e.directionalValue),0!==t?t:te.comparator(n.documentKey,e.documentKey)))}function bh(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(0!==s)return s}return n.length-e.length}class rm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ge=s:this.Ke.push(s)}}Qe(e){Qt(e.collectionGroup===this.collectionId);const t=Et(e);if(void 0!==t&&!this.ze(t))return!1;const s=Dt(e);let a=0,l=0;for(;a<s.length&&this.ze(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Ge){const p=s[a];if(!this.je(this.Ge,p)||!this.We(this.Ue[l++],p))return!1;++a}for(;a<s.length;++a)if(l>=this.Ue.length||!this.We(this.Ue[l++],s[a]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ch(n){var e,t;if(Qt(n instanceof Jn||n instanceof Ir),n instanceof Jn){if(n instanceof tv){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>Jn.create(n.field,"==",l)))||[];return Ir.create(a,"or")}return n}const s=n.filters.map(a=>Ch(a));return Ir.create(s,n.op)}function oI(n){if(0===n.getFilters().length)return[];const e=ep(Ch(n));return Qt(im(e)),Th(e)||Fv(e)?[e]:e.getFilters()}function Th(n){return n instanceof Jn}function Fv(n){return n instanceof Ir&&Wu(n)}function im(n){return Th(n)||Fv(n)||function(e){if(e instanceof Ir&&Uf(e)){for(const t of e.getFilters())if(!Th(t)&&!Fv(t))return!1;return!0}return!1}(n)}function ep(n){if(Qt(n instanceof Jn||n instanceof Ir),n instanceof Jn)return n;if(1===n.filters.length)return ep(n.filters[0]);const e=n.filters.map(s=>ep(s));let t=Ir.create(e,n.op);return t=Dd(t),im(t)?t:(Qt(t instanceof Ir),Qt(gl(t)),Qt(t.filters.length>1),t.filters.reduce((s,a)=>tp(s,a)))}function tp(n,e){let t;return Qt(n instanceof Jn||n instanceof Ir),Qt(e instanceof Jn||e instanceof Ir),t=n instanceof Jn?e instanceof Jn?Ir.create([n,e],"and"):sm(n,e):e instanceof Jn?sm(e,n):function(s,a){if(Qt(s.filters.length>0&&a.filters.length>0),gl(s)&&gl(a))return Xy(s,a.getFilters());const l=Uf(s)?s:a,p=Uf(s)?a:s,D=l.filters.map(O=>tp(O,p));return Ir.create(D,"or")}(n,e),Dd(t)}function sm(n,e){if(gl(e))return Xy(e,n.getFilters());{const t=e.filters.map(s=>tp(n,s));return Ir.create(t,"or")}}function Dd(n){if(Qt(n instanceof Jn||n instanceof Ir),n instanceof Jn)return n;const e=n.getFilters();if(1===e.length)return Dd(e[0]);if(Jy(n))return n;const t=e.map(a=>Dd(a)),s=[];return t.forEach(a=>{a instanceof Jn?s.push(a):a instanceof Ir&&(a.op===n.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Ir.create(s,n.op)}class Qu{constructor(){this.He=new bd}addToCollectionParentIndex(e,t){return this.He.add(t),Pe.resolve()}getCollectionParents(e,t){return Pe.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return Pe.resolve()}deleteFieldIndex(e,t){return Pe.resolve()}getDocumentsMatchingTarget(e,t){return Pe.resolve(null)}getIndexType(e,t){return Pe.resolve(0)}getFieldIndexes(e,t){return Pe.resolve([])}getNextCollectionGroupToUpdate(e){return Pe.resolve(null)}getMinOffset(e,t){return Pe.resolve(Io.min())}getMinOffsetFromCollectionGroup(e,t){return Pe.resolve(Io.min())}updateCollectionGroup(e,t,s){return Pe.resolve()}updateIndexEntries(e,t){return Pe.resolve()}}class bd{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Qn(I.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Qn(I.comparator)).toArray()}}const kl=new Uint8Array(0);class Sh{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new bd,this.Ye=new xc(s=>yl(s),(s,a)=>vl(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const l={collectionId:s,parent:Fs(a)};return Lv(e).put(l)}return Pe.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Ig(t),""],!1,!0);return Lv(e).j(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(vu(p.parent))}return s})}addFieldIndex(e,t){const s=Ah(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var p;delete a.indexId;const l=s.add(a);if(t.indexState){const p=xh(e);return l.next(D=>{p.put(Ov(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const s=Ah(e),a=xh(e),l=Cd(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Cd(e);let a=!0;const l=new Map;return Pe.forEach(this.Ze(t),p=>this.Xe(e,p).next(D=>{a&&(a=!!D),l.set(p,D)})).next(()=>{if(a){let p=Fn();const D=[];return Pe.forEach(l,(O,L)=>{var K;ft("IndexedDbIndexManager",`Using index ${K=O,`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(Dn=>`${Dn.fieldPath}:${Dn.kind}`).join(",")}`} to execute ${yl(t)}`);const ue=function(Dn,jn){const $n=Et(jn);if(void 0===$n)return null;for(const nr of uh(Dn,$n.fieldPath))switch(nr.op){case"array-contains-any":return nr.value.arrayValue.values||[];case"array-contains":return[nr.value]}return null}(L,O),De=function(Dn,jn){const $n=new Map;for(const nr of Dt(jn))for(const qo of uh(Dn,nr.fieldPath))switch(qo.op){case"==":case"in":$n.set(nr.fieldPath.canonicalString(),qo.value);break;case"not-in":case"!=":return $n.set(nr.fieldPath.canonicalString(),qo.value),Array.from($n.values())}return null}(L,O),Ke=function(Dn,jn){const $n=[];let nr=!0;for(const qo of Dt(jn)){const el=0===qo.kind?rv(Dn,qo.fieldPath,Dn.startAt):Vg(Dn,qo.fieldPath,Dn.startAt);$n.push(el.value),nr&&(nr=el.inclusive)}return new Dc($n,nr)}(L,O),pt=function(Dn,jn){const $n=[];let nr=!0;for(const qo of Dt(jn)){const el=0===qo.kind?Vg(Dn,qo.fieldPath,Dn.endAt):rv(Dn,qo.fieldPath,Dn.endAt);$n.push(el.value),nr&&(nr=el.inclusive)}return new Dc($n,nr)}(L,O),At=this.tn(O,L,Ke),zt=this.tn(O,L,pt),Bn=this.en(O,L,De),Sr=this.nn(O.indexId,ue,At,Ke.inclusive,zt,pt.inclusive,Bn);return Pe.forEach(Sr,Dn=>s.H(Dn,t.limit).next(jn=>{jn.forEach($n=>{const nr=te.fromSegments($n.documentKey);p.has(nr)||(p=p.add(nr),D.push(nr))})}))}).next(()=>D)}return Pe.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:oI(Ir.create(e.filters,"and")).map(s=>Lg(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,s,a,l,p,D){const O=(null!=t?t.length:1)*Math.max(s.length,l.length),L=O/(null!=t?t.length:1),K=[];for(let ue=0;ue<O;++ue){const De=t?this.sn(t[ue/L]):kl,Ke=this.rn(e,De,s[ue%L],a),pt=this.on(e,De,l[ue%L],p),At=D.map(zt=>this.rn(e,De,zt,!0));K.push(...this.createRange(Ke,pt,At))}return K}rn(e,t,s,a){const l=new Nl(e,te.empty(),t,s);return a?l:l.qe()}on(e,t,s,a){const l=new Nl(e,te.empty(),t,s);return a?l.qe():l}Xe(e,t){const s=new rm(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let p=null;for(const D of l)s.Qe(D)&&(!p||D.fields.length>p.fields.length)&&(p=D);return p})}getIndexType(e,t){let s=2;const a=this.Ze(t);return Pe.forEach(a,l=>this.Xe(e,l).next(p=>{p?0!==s&&p.fields.length<function(D){let O=new Qn(q.comparator),L=!1;for(const K of D.filters)for(const ue of K.getFlattenedFilters())ue.field.isKeyField()||("array-contains"===ue.op||"array-contains-any"===ue.op?L=!0:O=O.add(ue.field));for(const K of D.orderBy)K.field.isKeyField()||(O=O.add(K.field));return O.size+(L?1:0)}(l)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}un(e,t){const s=new Ol;for(const a of Dt(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=s.Le(a.kind);Pl.pe.oe(l,p)}return s.$e()}sn(e){const t=new Ol;return Pl.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const s=new Ol;return Pl.pe.oe(zu(this.databaseId,t),s.Le(function(a){const l=Dt(a);return 0===l.length?0:l[l.length-1].kind}(e))),s.$e()}en(e,t,s){if(null===s)return[];let a=[];a.push(new Ol);let l=0;for(const p of Dt(e)){const D=s[l++];for(const O of a)if(this.an(t,p.fieldPath)&&ih(D))a=this.hn(a,p,D);else{const L=O.Le(p.kind);Pl.pe.oe(D,L)}}return this.ln(a)}tn(e,t,s){return this.en(e,t,s.position)}ln(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].$e();return t}hn(e,t,s){const a=[...e],l=[];for(const p of s.arrayValue.values||[])for(const D of a){const O=new Ol;O.seed(D.$e()),Pl.pe.oe(p,O.Le(t.kind)),l.push(O)}return l}an(e,t){return!!e.filters.find(s=>s instanceof Jn&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Ah(e),a=xh(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(l=>{const p=[];return Pe.forEach(l,D=>a.get([D.indexId,this.uid]).next(O=>{p.push(function(L,K){const ue=K?new Ho(K.sequenceNumber,new Io(xl(K.readTime),new te(vu(K.documentKey)),K.largestBatchId)):Ho.empty(),De=L.fields.map(([Ke,pt])=>new yn(q.fromServerFormat(Ke),pt));return new Oe(L.indexId,L.collectionGroup,De,ue)}(D,O))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:gn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Ah(e),l=xh(e);return this.fn(e).next(p=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>Pe.forEach(D,O=>l.put(Ov(O.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return Pe.forEach(t,(a,l)=>{const p=s.get(a.collectionGroup);return(p?Pe.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),Pe.forEach(D,O=>this.dn(e,a,O).next(L=>{const K=this.wn(l,O);return L.isEqual(K)?Pe.resolve():this._n(e,l,O,L,K)}))))})}mn(e,t,s,a){return Cd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.cn(s,t.key),documentKey:t.key.path.toArray()})}gn(e,t,s,a){return Cd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.cn(s,t.key),t.key.path.toArray()])}dn(e,t,s){const a=Cd(e);let l=new Qn(Nc);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.cn(s,t)])},(p,D)=>{l=l.add(new Nl(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>l)}wn(e,t){let s=new Qn(Nc);const a=this.un(t,e);if(null==a)return s;const l=Et(t);if(null!=l){const p=e.data.field(l.fieldPath);if(ih(p))for(const D of p.arrayValue.values||[])s=s.add(new Nl(t.indexId,e.key,this.sn(D),a))}else s=s.add(new Nl(t.indexId,e.key,kl,a));return s}_n(e,t,s,a,l){ft("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(D,O,L,K,ue){const De=D.getIterator(),Ke=O.getIterator();let pt=hl(De),At=hl(Ke);for(;pt||At;){let zt=!1,Bn=!1;if(pt&&At){const Sr=L(pt,At);Sr<0?Bn=!0:Sr>0&&(zt=!0)}else null!=pt?Bn=!0:zt=!0;zt?(K(At),At=hl(Ke)):Bn?(ue(pt),pt=hl(De)):(pt=hl(De),At=hl(Ke))}}(a,l,Nc,D=>{p.push(this.mn(e,t,s,D))},D=>{p.push(this.gn(e,t,s,D))}),Pe.waitFor(p)}fn(e){let t=1;return xh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,D)=>Nc(p,D)).filter((p,D,O)=>!D||0!==Nc(p,O[D-1]));const a=[];a.push(e);for(const p of s){const D=Nc(p,e),O=Nc(p,t);if(0===D)a[0]=e.qe();else if(D>0&&O<0)a.push(p),a.push(p.qe());else if(O>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2){if(this.yn(a[p],a[p+1]))return[];l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,kl,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,kl,[]]))}return l}yn(e,t){return Nc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vv)}getMinOffset(e,t){return Pe.mapArray(this.Ze(t),s=>this.Xe(e,s).next(a=>a||$t())).next(Vv)}}function Lv(n){return io(n,"collectionParents")}function Cd(n){return io(n,"indexEntries")}function Ah(n){return io(n,"indexConfiguration")}function xh(n){return io(n,"indexState")}function Vv(n){Qt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const a=n[s].indexState.offset;Hu(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Io(e.readTime,e.documentKey,t)}const Td={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class aa{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new aa(e,aa.DEFAULT_COLLECTION_PERCENTILE,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function EE(n,e,t){const s=n.store("mutations"),a=n.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let D=0;const O=s.Z({range:p},(K,ue,De)=>(D++,De.delete()));l.push(O.next(()=>{Qt(1===D)}));const L=[];for(const K of t.mutations){const ue=By(e,K.key.path,t.batchId);l.push(a.delete(ue)),L.push(K.key)}return Pe.waitFor(l).next(()=>L)}function np(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $t();e=n.noDocument}return JSON.stringify(e).length}aa.DEFAULT_COLLECTION_PERCENTILE=10,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,aa.DEFAULT=new aa(41943040,aa.DEFAULT_COLLECTION_PERCENTILE,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),aa.DISABLED=new aa(-1,0,0);class rp{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.pn={}}static ie(e,t,s,a){Qt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new rp(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kc(e).Z({index:"userMutationsIndex",range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=Sd(e),p=kc(e);return p.add({}).next(D=>{Qt("number"==typeof D);const O=new Zg(D,t,s,a),L=function(De,Ke,pt){const At=pt.baseMutations.map(Bn=>Oc(De.se,Bn)),zt=pt.mutations.map(Bn=>Oc(De.se,Bn));return{userId:Ke,batchId:pt.batchId,localWriteTimeMs:pt.localWriteTime.toMillis(),baseMutations:At,mutations:zt}}(this.serializer,this.userId,O),K=[];let ue=new Qn((De,Ke)=>gn(De.canonicalString(),Ke.canonicalString()));for(const De of a){const Ke=By(this.userId,De.key.path,D);ue=ue.add(De.key.path.popLast()),K.push(p.put(L)),K.push(l.put(Ke,Ag))}return ue.forEach(De=>{K.push(this.indexManager.addToCollectionParentIndex(e,De))}),e.addOnCommittedListener(()=>{this.pn[D]=O.keys()}),Pe.waitFor(K).next(()=>O)})}lookupMutationBatch(e,t){return kc(e).get(t).next(s=>s?(Qt(s.userId===this.userId),Ml(this.serializer,s)):null)}In(e,t){return this.pn[t]?Pe.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.pn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return kc(e).Z({index:"userMutationsIndex",range:a},(p,D,O)=>{D.userId===this.userId&&(Qt(D.batchId>=s),l=Ml(this.serializer,D)),O.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return kc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kc(e).j("userMutationsIndex",t).next(s=>s.map(a=>Ml(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Sg(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return Sd(e).Z({range:a},(p,D,O)=>{const[L,K,ue]=p,De=vu(K);if(L===this.userId&&t.path.isEqual(De))return kc(e).get(ue).next(Ke=>{if(!Ke)throw $t();Qt(Ke.userId===this.userId),l.push(Ml(this.serializer,Ke))});O.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Qn(gn);const a=[];return t.forEach(l=>{const p=Sg(this.userId,l.path),D=IDBKeyRange.lowerBound(p),O=Sd(e).Z({range:D},(L,K,ue)=>{const[De,Ke,pt]=L,At=vu(Ke);De===this.userId&&l.path.isEqual(At)?s=s.add(pt):ue.done()});a.push(O)}),Pe.waitFor(a).next(()=>this.Tn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=Sg(this.userId,s),p=IDBKeyRange.lowerBound(l);let D=new Qn(gn);return Sd(e).Z({range:p},(O,L,K)=>{const[ue,De,Ke]=O,pt=vu(De);ue===this.userId&&s.isPrefixOf(pt)?pt.length===a&&(D=D.add(Ke)):K.done()}).next(()=>this.Tn(e,D))}Tn(e,t){const s=[],a=[];return t.forEach(l=>{a.push(kc(e).get(l).next(p=>{if(null===p)throw $t();Qt(p.userId===this.userId),s.push(Ml(this.serializer,p))}))}),Pe.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return EE(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),Pe.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Pe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Sd(e).Z({range:s},(l,p,D)=>{if(l[0]===this.userId){const O=vu(l[1]);a.push(O)}else D.done()}).next(()=>{Qt(0===a.length)})})}containsKey(e,t){return Uv(e,this.userId,t)}An(e){return Bv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Uv(n,e,t){const s=Sg(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return Sd(n).Z({range:l,Y:!0},(D,O,L)=>{const[K,ue,De]=D;K===e&&ue===a&&(p=!0),L.done()}).next(()=>p)}function kc(n){return io(n,"mutations")}function Sd(n){return io(n,"documentMutations")}function Bv(n){return io(n,"mutationQueues")}class Fl{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Fl(0)}static bn(){return new Fl(-1)}}class jv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const s=new Fl(t.highestTargetId);return t.highestTargetId=s.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>d.fromTimestamp(new E(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Pn(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Vn(e,a)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(s=>(s.targetCount+=1,this.Dn(t,s),this.Vn(e,s))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fc(e).delete(t.targetId)).next(()=>this.Pn(e)).next(s=>(Qt(s.targetCount>0),s.targetCount-=1,this.Vn(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return Fc(e).Z((p,D)=>{const O=Id(D);O.sequenceNumber<=t&&null===s.get(O.targetId)&&(a++,l.push(this.removeTargetData(e,O)))}).next(()=>Pe.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Fc(e).Z((s,a)=>{const l=Id(a);t(l)})}Pn(e){return $v(e).get("targetGlobalKey").next(t=>(Qt(null!==t),t))}Vn(e,t){return $v(e).put("targetGlobalKey",t)}Sn(e,t){return Fc(e).put(Rv(this.serializer,t))}Dn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=yl(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return Fc(e).Z({range:a,index:"queryTargetsIndex"},(p,D,O)=>{const L=Id(D);vl(t,L.target)&&(l=L,O.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Cu(e);return t.forEach(p=>{const D=Fs(p.path);a.push(l.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,p))}),Pe.waitFor(a)}removeMatchingKeys(e,t,s){const a=Cu(e);return Pe.forEach(t,l=>{const p=Fs(l.path);return Pe.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Cu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Cu(e);let l=Fn();return a.Z({range:s,Y:!0},(p,D,O)=>{const L=vu(p[1]),K=new te(L);l=l.add(K)}).next(()=>l)}containsKey(e,t){const s=Fs(t.path),a=IDBKeyRange.bound([s],[Ig(s)],!1,!0);let l=0;return Cu(e).Z({index:"documentTargetsIndex",Y:!0,range:a},([p,D],O,L)=>{0!==p&&(l++,L.done())}).next(()=>l>0)}ne(e,t){return Fc(e).get(t).next(s=>s?Id(s):null)}}function Fc(n){return io(n,"targets")}function $v(n){return io(n,"targetGlobal")}function Cu(n){return io(n,"targetDocuments")}function Hv([n,e],[t,s]){const a=gn(n,t);return 0===a?gn(e,s):a}class wE{constructor(e){this.Cn=e,this.buffer=new Qn(Hv),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Hv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IE{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;ft("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){yu(s)?ft("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Za(s)}yield t.$n(3e5)}))}}class DE{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Pe.resolve(Ca.ct);const s=new wE(t);return this.Mn.forEachTarget(e,a=>s.kn(a.sequenceNumber)).next(()=>this.Mn.Bn(e,a=>s.kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Mn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),Pe.resolve(Td)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Td):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let s,a,l,p,D,O,L;const K=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ue=>(ue>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ue}`),a=this.params.maximumSequenceNumbersToCollect):a=ue,p=Date.now(),this.nthSequenceNumber(e,a))).next(ue=>(s=ue,D=Date.now(),this.removeTargets(e,s,t))).next(ue=>(l=ue,O=Date.now(),this.removeOrphanedDocuments(e,s))).next(ue=>(L=Date.now(),ju()<=bn.in.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-K}ms\n\tDetermined least recently used ${a} in `+(D-p)+`ms\n\tRemoved ${l} targets in `+(O-D)+`ms\n\tRemoved ${ue} documents in `+(L-O)+`ms\nTotal Duration: ${L-K}ms`),Pe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:ue})))}}class bE{constructor(e,t){this.db=e,this.garbageCollector=new DE(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}qn(e){let t=0;return this.Bn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(s,a)=>t(a))}addReference(e,t,s){return ip(e,s)}removeReference(e,t,s){return ip(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return ip(e,t)}Kn(e,t){return function(s,a){let l=!1;return Bv(s).X(p=>Uv(s,p,a).next(D=>(D&&(l=!0),Pe.resolve(!D)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Un(e,(p,D)=>{if(D<=t){const O=this.Kn(e,p).next(L=>{if(!L)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,d.min()),Cu(e).delete([0,Fs(p.path)])))});a.push(O)}}).next(()=>Pe.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return ip(e,t)}Un(e,t){const s=Cu(e);let a,l=Ca.ct;return s.Z({index:"documentTargetsIndex"},([p,D],{path:O,sequenceNumber:L})=>{0===p?(l!==Ca.ct&&t(new te(vu(a)),l),l=L,a=O):l=Ca.ct}).next(()=>{l!==Ca.ct&&t(new te(vu(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ip(n,e){return Cu(n).put((s=n.currentSequenceNumber,{targetId:0,path:Fs(e.path),sequenceNumber:s}));var s}class Gv{constructor(){this.changes=new xc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Pe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Lc(e).put(s)}removeEntry(e,t,s){return Lc(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Ih(l),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Gn(e,s)))}getEntry(e,t){let s=pi.newInvalidDocument(t);return Lc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vc(t))},(a,l)=>{s=this.Qn(t,l)}).next(()=>s)}zn(e,t){let s={size:0,document:pi.newInvalidDocument(t)};return Lc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vc(t))},(a,l)=>{s={document:this.Qn(t,l),size:np(l)}}).next(()=>s)}getEntries(e,t){let s=sa();return this.jn(e,t,(a,l)=>{const p=this.Qn(a,l);s=s.insert(a,p)}).next(()=>s)}Wn(e,t){let s=sa(),a=new Oi(te.comparator);return this.jn(e,t,(l,p)=>{const D=this.Qn(l,p);s=s.insert(l,D),a=a.insert(l,np(p))}).next(()=>({documents:s,Hn:a}))}jn(e,t,s){if(t.isEmpty())return Pe.resolve();let a=new Qn(SE);t.forEach(O=>a=a.add(O));const l=IDBKeyRange.bound(Vc(a.first()),Vc(a.last())),p=a.getIterator();let D=p.getNext();return Lc(e).Z({index:"documentKeyIndex",range:l},(O,L,K)=>{const ue=te.fromSegments([...L.prefixPath,L.collectionGroup,L.documentId]);for(;D&&SE(D,ue)<0;)s(D,null),D=p.getNext();D&&D.isEqual(ue)&&(s(D,L),D=p.hasNext()?p.getNext():null),D?K.G(Vc(D)):K.done()}).next(()=>{for(;D;)s(D,null),D=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const l=t.path,p=[l.popLast().toArray(),l.lastSegment(),Ih(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lc(e).j(IDBKeyRange.bound(p,D,!0)).next(O=>{let L=sa();for(const K of O){const ue=this.Qn(te.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);ue.isFoundDocument()&&(_l(t,ue)||a.has(ue.key))&&(L=L.insert(ue.key,ue))}return L})}getAllFromCollectionGroup(e,t,s,a){let l=sa();const p=Uc(t,s),D=Uc(t,Io.max());return Lc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,D,!0)},(O,L,K)=>{const ue=this.Qn(te.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);l=l.insert(ue.key,ue),l.size===a&&K.done()}).next(()=>l)}newChangeBuffer(e){return new CE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TE(e).get("remoteDocumentGlobalKey").next(t=>(Qt(!!t),t))}Gn(e,t){return TE(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const s=function sI(n,e){let t;if(e.document)t=Yf(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=te.fromSegments(e.noDocument.path),a=xl(e.noDocument.readTime);t=pi.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $t();{const s=te.fromSegments(e.unknownDocument.path),a=xl(e.unknownDocument.version);t=pi.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new E(s[0],s[1]);return d.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(d.min()))return s}return pi.newInvalidDocument(e)}}function om(n){return new zv(n)}class CE extends Gv{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new xc(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Qn((l,p)=>gn(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const D=this.Yn.get(l);if(t.push(this.Jn.removeEntry(e,l,D.readTime)),p.isValidDocument()){const O=Xf(this.Jn.serializer,p);a=a.add(l.path.popLast());const L=np(O);s+=L-D.size,t.push(this.Jn.addEntry(e,l,O))}else if(s-=D.size,this.trackRemovals){const O=Xf(this.Jn.serializer,p.convertToNoDocument(d.min()));t.push(this.Jn.addEntry(e,l,O))}}),a.forEach(l=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Jn.updateMetadata(e,s)),Pe.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(s=>(this.Yn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:s,Hn:a})=>(a.forEach((l,p)=>{this.Yn.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function TE(n){return io(n,"remoteDocumentGlobal")}function Lc(n){return io(n,"remoteDocumentsV14")}function Vc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Uc(n,e){const t=e.documentKey.path.toArray();return[n,Ih(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SE(n,e){const t=n.path.toArray(),s=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<s.length-2;++l)if(a=gn(t[l],s[l]),a)return a;return a=gn(t.length,s.length),a||(a=gn(t[t.length-2],s[s.length-2]),a||gn(t[t.length-1],s[s.length-1]))}class sp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wv{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&gh(s.mutation,a,Go.empty(),E.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Fn()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Fn()){const a=Du();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let p=vd();return l.forEach((D,O)=>{p=p.insert(D,O.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=Du();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Fn()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((p,D)=>{t.set(p,D)})})}computeViews(e,t,s,a){let l=sa();const p=Ta(),D=Ta();return t.forEach((O,L)=>{const K=s.get(L.key);a.has(L.key)&&(void 0===K||K.mutation instanceof qu)?l=l.insert(L.key,L):void 0!==K?(p.set(L.key,K.mutation.getFieldMask()),gh(K.mutation,L,K.mutation.getFieldMask(),E.now())):p.set(L.key,Go.empty())}),this.recalculateAndSaveOverlays(e,l).next(O=>(O.forEach((L,K)=>p.set(L,K)),t.forEach((L,K)=>{var ue;return D.set(L,new sp(K,null!==(ue=p.get(L))&&void 0!==ue?ue:null))}),D))}recalculateAndSaveOverlays(e,t){const s=Ta();let a=new Oi((p,D)=>p-D),l=Fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const D of p)D.keys().forEach(O=>{const L=t.get(O);if(null===L)return;let K=s.get(O)||Go.empty();K=D.applyToLocalView(L,K),s.set(O,K);const ue=(a.get(D.batchId)||Fn()).add(O);a=a.insert(D.batchId,ue)})}).next(()=>{const p=[],D=a.getReverseIterator();for(;D.hasNext();){const O=D.getNext(),L=O.key,K=O.value,ue=El();K.forEach(De=>{if(!l.has(De)){const Ke=Wg(t.get(De),s.get(De));null!==Ke&&ue.set(De,Ke),l=l.add(De)}}),p.push(this.documentOverlayCache.saveOverlays(e,L,ue))}return Pe.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return te.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ug(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const p=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):Pe.resolve(Du());let D=-1,O=l;return p.next(L=>Pe.forEach(L,(K,ue)=>(D<ue.largestBatchId&&(D=ue.largestBatchId),l.get(K)?Pe.resolve():this.remoteDocumentCache.getEntry(e,K).next(De=>{O=O.insert(K,De)}))).next(()=>this.populateOverlays(e,L,l)).next(()=>this.computeViews(e,O,L,Fn())).next(K=>({batchId:D,changes:uv(K)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(s=>{let a=vd();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let l=vd();return this.indexManager.getCollectionParents(e,a).next(p=>Pe.forEach(p,D=>{const O=(L=t,K=D.child(a),new Cc(K,null,L.explicitOrderBy.slice(),L.filters.slice(),L.limit,L.limitType,L.startAt,L.endAt));var L,K;return this.getDocumentsMatchingCollectionQuery(e,O,s).next(L=>{L.forEach((K,ue)=>{l=l.insert(K,ue)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(l=>{a.forEach((D,O)=>{const L=O.getKey();null===l.get(L)&&(l=l.insert(L,pi.newInvalidDocument(L)))});let p=vd();return l.forEach((D,O)=>{const L=a.get(D);void 0!==L&&gh(L.mutation,O,Go.empty(),E.now()),_l(t,O)&&(p=p.insert(D,O))}),p})}}class AE{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Pe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:Yi(s.createTime)}),Pe.resolve()}getNamedQuery(e,t){return Pe.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(s=t).name,query:tm(s.bundledQuery),readTime:Yi(s.readTime)}),Pe.resolve();var s}}class am{constructor(){this.overlays=new Oi(te.comparator),this.ts=new Map}getOverlay(e,t){return Pe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Du();return Pe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.re(e,t,l)}),Pe.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ts.get(s);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.ts.delete(s)),Pe.resolve()}getOverlaysForCollection(e,t,s){const a=Du(),l=t.length+1,p=new te(t.child("")),D=this.overlays.getIteratorFrom(p);for(;D.hasNext();){const O=D.getNext().value,L=O.getKey();if(!t.isPrefixOf(L.path))break;L.path.length===l&&O.largestBatchId>s&&a.set(O.getKey(),O)}return Pe.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Oi((L,K)=>L-K);const p=this.overlays.getIterator();for(;p.hasNext();){const L=p.getNext().value;if(L.getKey().getCollectionGroup()===t&&L.largestBatchId>s){let K=l.get(L.largestBatchId);null===K&&(K=Du(),l=l.insert(L.largestBatchId,K)),K.set(L.getKey(),L)}}const D=Du(),O=l.getIterator();for(;O.hasNext()&&(O.getNext().value.forEach((L,K)=>D.set(L,K)),!(D.size()>=a)););return Pe.resolve(D)}re(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.ts.get(a.largestBatchId).delete(s.key);this.ts.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new yh(t,s));let l=this.ts.get(t);void 0===l&&(l=Fn(),this.ts.set(t,l)),this.ts.set(t,l.add(s.key))}}class um{constructor(){this.es=new Qn(Vr.ns),this.ss=new Qn(Vr.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const s=new Vr(e,t);this.es=this.es.add(s),this.ss=this.ss.add(s)}os(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.us(new Vr(e,t))}cs(e,t){e.forEach(s=>this.removeReference(s,t))}hs(e){const t=new te(new I([])),s=new Vr(t,e),a=new Vr(t,e+1),l=[];return this.ss.forEachInRange([s,a],p=>{this.us(p),l.push(p.key)}),l}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new te(new I([])),s=new Vr(t,e),a=new Vr(t,e+1);let l=Fn();return this.ss.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Vr(e,0),s=this.es.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Vr{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return te.comparator(e.key,t.key)||gn(e.ds,t.ds)}static rs(e,t){return gn(e.ds,t.ds)||te.comparator(e.key,t.key)}}class Mh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new Qn(Vr.ns)}checkEmpty(e){return Pe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const l=this.ws;this.ws++;const p=new Zg(l,t,s,a);this.mutationQueue.push(p);for(const D of a)this._s=this._s.add(new Vr(D.key,l)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return Pe.resolve(p)}lookupMutationBatch(e,t){return Pe.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ys(t+1),l=a<0?0:a;return Pe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Pe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Vr(t,0),a=new Vr(t,Number.POSITIVE_INFINITY),l=[];return this._s.forEachInRange([s,a],p=>{const D=this.gs(p.ds);l.push(D)}),Pe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Qn(gn);return t.forEach(a=>{const l=new Vr(a,0),p=new Vr(a,Number.POSITIVE_INFINITY);this._s.forEachInRange([l,p],D=>{s=s.add(D.ds)})}),Pe.resolve(this.ps(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;te.isDocumentKey(l)||(l=l.child(""));const p=new Vr(new te(l),0);let D=new Qn(gn);return this._s.forEachWhile(O=>{const L=O.key.path;return!!s.isPrefixOf(L)&&(L.length===a&&(D=D.add(O.ds)),!0)},p),Pe.resolve(this.ps(D))}ps(e){const t=[];return e.forEach(s=>{const a=this.gs(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Qt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let s=this._s;return Pe.forEach(t.mutations,a=>{const l=new Vr(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this._s=s})}En(e){}containsKey(e,t){const s=new Vr(t,0),a=this._s.firstAfterOrEqual(s);return Pe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Pe.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Co{constructor(e){this.Ts=e,this.docs=new Oi(te.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,p=this.Ts(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Pe.resolve(s?s.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let s=sa();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():pi.newInvalidDocument(a))}),Pe.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=sa();const p=t.path,D=new te(p.child("")),O=this.docs.getIteratorFrom(D);for(;O.hasNext();){const{key:L,value:{document:K}}=O.getNext();if(!p.isPrefixOf(L.path))break;L.path.length>p.length+1||Hu(Xd(K),s)<=0||(a.has(K.key)||_l(t,K))&&(l=l.insert(K.key,K.mutableCopy()))}return Pe.resolve(l)}getAllFromCollectionGroup(e,t,s,a){$t()}Es(e,t){return Pe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Ll(this)}getSize(e){return Pe.resolve(this.size)}}class Ll extends Gv{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Jn.addEntry(e,a)):this.Jn.removeEntry(s)}),Pe.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class op{constructor(e){this.persistence=e,this.As=new xc(t=>yl(t),vl),this.lastRemoteSnapshotVersion=d.min(),this.highestTargetId=0,this.Rs=0,this.vs=new um,this.targetCount=0,this.bs=Fl.vn()}forEachTarget(e,t){return this.As.forEach((s,a)=>t(a)),Pe.resolve()}getLastRemoteSnapshotVersion(e){return Pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pe.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Rs&&(this.Rs=t),Pe.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Fl(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,Pe.resolve()}updateTargetData(e,t){return this.Sn(t),Pe.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Pe.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.As.forEach((p,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.As.delete(p),l.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),Pe.waitFor(l).next(()=>a)}getTargetCount(e){return Pe.resolve(this.targetCount)}getTargetData(e,t){const s=this.As.get(t)||null;return Pe.resolve(s)}addMatchingKeys(e,t,s){return this.vs.os(t,s),Pe.resolve()}removeMatchingKeys(e,t,s){this.vs.cs(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),Pe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),Pe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.vs.fs(t);return Pe.resolve(s)}containsKey(e,t){return Pe.resolve(this.vs.containsKey(t))}}class Aa{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Ca(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new op(this),this.indexManager=new Qu,this.remoteDocumentCache=new Co(s=>this.referenceDelegate.Cs(s)),this.serializer=new Mv(t),this.xs=new AE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new am,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ps[e.toKey()];return s||(s=new Mh(t,this.referenceDelegate),this.Ps[e.toKey()]=s),s}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,s){ft("MemoryPersistence","Starting transaction:",e);const a=new cm(this.Vs.next());return this.referenceDelegate.Ns(),s(a).next(l=>this.referenceDelegate.ks(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Os(e,t){return Pe.or(Object.values(this.Ps).map(s=>()=>s.containsKey(e,t)))}}class cm extends cl{constructor(e){super(),this.currentSequenceNumber=e}}class Ju{constructor(e){this.persistence=e,this.$s=new um,this.Ms=null}static Fs(e){return new Ju(e)}get Bs(){if(this.Ms)return this.Ms;throw $t()}addReference(e,t,s){return this.$s.addReference(s,t),this.Bs.delete(s.toString()),Pe.resolve()}removeReference(e,t,s){return this.$s.removeReference(s,t),this.Bs.add(s.toString()),Pe.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),Pe.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(a=>this.Bs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Bs.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pe.forEach(this.Bs,s=>{const a=te.fromPath(s);return this.Ls(e,a).next(l=>{l||t.removeEntry(a,d.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(s=>{s?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return Pe.or([()=>Pe.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Ad{constructor(e){this.serializer=e}M(e,t,s,a){const l=new gc("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uy,{unique:!0}),D.createObjectStore("documentMutations"),Vl(e),function(D){D.createObjectStore("remoteDocuments")}(e));let p=Pe.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Vl(e)),p=p.next(()=>function(D){const O=D.store("targetGlobal"),L={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:d.min().toTimestamp(),targetCount:0};return O.put("targetGlobalKey",L)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(D,O){return O.store("mutations").j().next(L=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uy,{unique:!0});const K=O.store("mutations"),ue=L.map(De=>K.put(De));return Pe.waitFor(ue)})}(e,l))),p=p.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.qs(l))),s<6&&a>=6&&(p=p.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Us(l)))),s<7&&a>=7&&(p=p.next(()=>this.Ks(l))),s<8&&a>=8&&(p=p.next(()=>this.Gs(e,l))),s<9&&a>=9&&(p=p.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.Qs(l))),s<11&&a>=11&&(p=p.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(D){const O=D.createObjectStore("documentOverlays",{keyPath:H0});O.createIndex("collectionPathOverlayIndex",G0,{unique:!1}),O.createIndex("collectionGroupOverlayIndex",_c,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(D){const O=D.createObjectStore("remoteDocumentsV14",{keyPath:U0});O.createIndex("documentKeyIndex",jy),O.createIndex("collectionGroupIndex",Of)}(e)).next(()=>this.zs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.js(e,l))),s<15&&a>=15&&(p=p.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:zy}).createIndex("sequenceNumberIndex",B0,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:j0}).createIndex("documentKeyIndex",$0,{unique:!1})}(e))),p}Us(e){let t=0;return e.store("remoteDocuments").Z((s,a)=>{t+=np(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}qs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>Pe.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",p).next(D=>Pe.forEach(D,O=>{Qt(O.userId===l.userId);const L=Ml(this.serializer,O);return EE(e,l.userId,L).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return s.Z((p,D)=>{const O=new I(p),L=[0,Fs(O)];l.push(t.get(L).next(K=>K?Pe.resolve():t.put({targetId:0,path:Fs(O),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Pe.waitFor(l))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:Gy});const s=t.store("collectionParents"),a=new bd,l=p=>{if(a.add(p)){const D=p.lastSegment(),O=p.popLast();return s.put({collectionId:D,parent:Fs(O)})}};return t.store("remoteDocuments").Z({Y:!0},(p,D)=>{const O=new I(p);return l(O.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([p,D,O],L)=>{const K=vu(D);return l(K.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((s,a)=>{const l=Id(a),p=Rv(this.serializer,l);return t.put(p)})}zs(e,t){const s=t.store("remoteDocuments"),a=[];return s.Z((l,p)=>{const D=t.store("remoteDocumentsV14"),O=(L=p,L.document?new te(I.fromString(L.document.name).popFirst(5)):L.noDocument?te.fromSegments(L.noDocument.path):L.unknownDocument?te.fromSegments(L.unknownDocument.path):$t()).path.toArray();var L;const K={prefixPath:O.slice(0,O.length-2),collectionGroup:O[O.length-2],documentId:O[O.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(D.put(K))}).next(()=>Pe.waitFor(a))}js(e,t){const s=t.store("mutations"),a=om(this.serializer),l=new Aa(Ju.Fs,this.serializer.se);return s.j().next(p=>{const D=new Map;return p.forEach(O=>{var L;let K=null!==(L=D.get(O.userId))&&void 0!==L?L:Fn();Ml(this.serializer,O).keys().forEach(ue=>K=K.add(ue)),D.set(O.userId,K)}),Pe.forEach(D,(O,L)=>{const K=new Zi(L),ue=Sa.ie(this.serializer,K),De=l.getIndexManager(K),Ke=rp.ie(K,this.serializer,De,l.referenceDelegate);return new Wv(a,Ke,ue,De).recalculateAndSaveOverlaysForDocumentKeys(new Wy(t,Ca.ct),O).next()})})}}function Vl(n){n.createObjectStore("targetDocuments",{keyPath:$y}).createIndex("documentTargetsIndex",Hy,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xg,{unique:!0}),n.createObjectStore("targetGlobal")}const Bc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jc{constructor(e,t,s,a,l,p,D,O,L,K,ue=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ws=l,this.window=p,this.document=D,this.Hs=L,this.Js=K,this.Ys=ue,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=De=>Promise.resolve(),!jc.D())throw new et(Ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bE(this,a),this.si=t+"main",this.serializer=new Mv(O),this.ii=new Do(this.si,this.Ys,new Ad(this.serializer)),this.Ds=new jv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=om(this.serializer),this.xs=new gE,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===K&&bi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new et(Ne.FAILED_PRECONDITION,Bc);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Ca(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var s=(0,_e.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,_e.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(yu(e))return ft("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ft("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return Tu(e).get("owner").next(t=>Pe.resolve(this._i(t)))}mi(e){return Xu(e).delete(this.clientId)}gi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=io(s,"clientMetadata");return a.j().next(l=>{const p=e.pi(l,18e5),D=l.filter(O=>-1===p.indexOf(O));return Pe.forEach(D,O=>a.delete(O.clientId)).next(()=>D)})}).catch(()=>[]);if(e.ri)for(const s of t)e.ri.removeItem(e.Ii(s.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?Pe.resolve(!0):Tu(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new et(Ne.FAILED_PRECONDITION,Bc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xu(e).j().next(s=>void 0===this.pi(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ft("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Wy(t,Ca.ct);return e.di(s).next(()=>e.mi(s))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(s=>this.yi(s.updateTimeMs,t)&&!this.Ti(s.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Xu(e).j().next(t=>this.pi(t,18e5).map(s=>s.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return rp.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Sh(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return Sa.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,s){ft("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(p=this.Ys)?Qw:14===p?q0:13===p?W0:12===p?z0:11===p?hd:void $t();var p;let D;return this.ii.runTransaction(e,a,l,O=>(D=new Wy(O,this.Vs?this.Vs.next():Ca.ct),"readwrite-primary"===t?this.li(D).next(L=>!!L||this.fi(D)).next(L=>{if(!L)throw bi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new et(Ne.FAILED_PRECONDITION,eh);return s(D)}).next(L=>this.wi(D).next(()=>L)):this.Pi(D).next(()=>s(D)))).then(O=>(D.raiseOnCommittedEvent(),O))}Pi(e){return Tu(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new et(Ne.FAILED_PRECONDITION,Bc)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tu(e).put("owner",t)}static D(){return Do.D()}di(e){const t=Tu(e);return t.get("owner").next(s=>this._i(s)?(ft("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Pe.resolve())}yi(e,t){const s=Date.now();return!(e<s-t||e>s&&(bi(`Detected an update time that is in the future: ${e} > ${s}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,Tt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const s=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return ft("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return bi("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){bi("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tu(n){return io(n,"owner")}function Xu(n){return io(n,"clientMetadata")}function $c(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Hc{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Vi=s,this.Si=a}static Di(e,t){let s=Fn(),a=Fn();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Hc(e,t.fromCache,s,a)}}class lm{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ni(e,t).next(l=>l||this.ki(e,t,a,s)).next(l=>l||this.Oi(e,t))}Ni(e,t){if(sv(t))return Pe.resolve(null);let s=zo(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Gf(t,null,"F"),s=zo(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const p=Fn(...l);return this.xi.getDocuments(e,p).next(D=>this.indexManager.getMinOffset(e,s).next(O=>{const L=this.$i(t,D);return this.Mi(t,L,p,O.readTime)?this.Ni(e,Gf(t,null,"F")):this.Fi(e,L,t,O)}))})))}ki(e,t,s,a){return sv(t)||a.isEqual(d.min())?this.Oi(e,t):this.xi.getDocuments(e,s).next(l=>{const p=this.$i(t,l);return this.Mi(t,p,s,a)?this.Oi(e,t):(ju()<=bn.in.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ch(t)),this.Fi(e,p,t,pc(a,-1)))})}$i(e,t){let s=new Qn(zf(e));return t.forEach((a,l)=>{_l(e,l)&&(s=s.add(l))}),s}Mi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Oi(e,t){return ju()<=bn.in.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",ch(t)),this.xi.getDocumentsMatchingQuery(e,t,Io.min())}Fi(e,t,s,a){return this.xi.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(p=>{l=l.insert(p.key,p)}),l))}}class qv{constructor(e,t,s,a){this.persistence=e,this.Bi=t,this.serializer=a,this.Li=new Oi(gn),this.qi=new xc(l=>yl(l),vl),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(s)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wv(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function dm(n,e,t,s){return new qv(n,e,t,s)}function hm(n,e){return ap.apply(this,arguments)}function ap(){return ap=(0,_e.Z)(function*(n,e){const t=Rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Gi(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const p=[],D=[];let O=Fn();for(const L of a){p.push(L.batchId);for(const K of L.mutations)O=O.add(K.key)}for(const L of l){D.push(L.batchId);for(const K of L.mutations)O=O.add(K.key)}return t.localDocuments.getDocuments(s,O).next(L=>({Qi:L,removedBatchIds:p,addedBatchIds:D}))})})}),ap.apply(this,arguments)}function Zv(n,e){const t=Rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Ki.newChangeBuffer({trackRemovals:!0});return function(p,D,O,L){const K=O.batch,ue=K.keys();let De=Pe.resolve();return ue.forEach(Ke=>{De=De.next(()=>L.getEntry(D,Ke)).next(pt=>{const At=O.docVersions.get(Ke);Qt(null!==At),pt.version.compareTo(At)<0&&(K.applyToRemoteDocument(pt,O),pt.isValidDocument()&&(pt.setReadTime(O.commitVersion),L.addEntry(pt)))})}),De.next(()=>p.mutationQueue.removeMutationBatch(D,K))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let D=Fn();for(let O=0;O<p.mutationResults.length;++O)p.mutationResults[O].transformResults.length>0&&(D=D.add(p.batch.mutations[O].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function fm(n){const e=Rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function Kv(n,e){const t=Rt(n),s=e.snapshotVersion;let a=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Ki.newChangeBuffer({trackRemovals:!0});a=t.Li;const D=[];e.targetChanges.forEach((K,ue)=>{const De=a.get(ue);if(!De)return;D.push(t.Ds.removeMatchingKeys(l,K.removedDocuments,ue).next(()=>t.Ds.addMatchingKeys(l,K.addedDocuments,ue)));let Ke=De.withSequenceNumber(l.currentSequenceNumber);var pt,At,zt;e.targetMismatches.has(ue)?Ke=Ke.withResumeToken(Ls.EMPTY_BYTE_STRING,d.min()).withLastLimboFreeSnapshotVersion(d.min()):K.resumeToken.approximateByteSize()>0&&(Ke=Ke.withResumeToken(K.resumeToken,s)),a=a.insert(ue,Ke),At=Ke,zt=K,(0===(pt=De).resumeToken.approximateByteSize()||At.snapshotVersion.toMicroseconds()-pt.snapshotVersion.toMicroseconds()>=3e8||zt.addedDocuments.size+zt.modifiedDocuments.size+zt.removedDocuments.size>0)&&D.push(t.Ds.updateTargetData(l,Ke))});let O=sa(),L=Fn();if(e.documentUpdates.forEach(K=>{e.resolvedLimboDocuments.has(K)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(l,K))}),D.push(pm(l,p,e.documentUpdates).next(K=>{O=K.zi,L=K.ji})),!s.isEqual(d.min())){const K=t.Ds.getLastRemoteSnapshotVersion(l).next(ue=>t.Ds.setTargetsMetadata(l,l.currentSequenceNumber,s));D.push(K)}return Pe.waitFor(D).next(()=>p.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,O,L)).next(()=>O)}).then(l=>(t.Li=a,l))}function pm(n,e,t){let s=Fn(),a=Fn();return t.forEach(l=>s=s.add(l)),e.getEntries(n,s).next(l=>{let p=sa();return t.forEach((D,O)=>{const L=l.get(D);O.isFoundDocument()!==L.isFoundDocument()&&(a=a.add(D)),O.isNoDocument()&&O.version.isEqual(d.min())?(e.removeEntry(D,O.readTime),p=p.insert(D,O)):!L.isValidDocument()||O.version.compareTo(L.version)>0||0===O.version.compareTo(L.version)&&L.hasPendingWrites?(e.addEntry(O),p=p.insert(D,O)):ft("LocalStore","Ignoring outdated watch update for ",D,". Current version:",L.version," Watch version:",O.version)}),{zi:p,ji:a}})}function xE(n,e){const t=Rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function xd(n,e){const t=Rt(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Ds.getTargetData(s,e).next(l=>l?(a=l,Pe.resolve(a)):t.Ds.allocateTargetId(s).next(p=>(a=new Yu(e,p,0,s.currentSequenceNumber),t.Ds.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Li.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Li=t.Li.insert(s.targetId,s),t.qi.set(e,s.targetId)),s})}function Ul(n,e,t){return gm.apply(this,arguments)}function gm(){return gm=(0,_e.Z)(function*(n,e,t){const s=Rt(n),a=s.Li.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!yu(p))throw p;ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Li=s.Li.remove(e),s.qi.delete(a.target)}),gm.apply(this,arguments)}function up(n,e,t){const s=Rt(n);let a=d.min(),l=Fn();return s.persistence.runTransaction("Execute query","readonly",p=>function(D,O,L){const K=Rt(D),ue=K.qi.get(L);return void 0!==ue?Pe.resolve(K.Li.get(ue)):K.Ds.getTargetData(O,L)}(s,p,zo(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Ds.getMatchingKeysForTargetId(p,D.targetId).next(O=>{l=O})}).next(()=>s.Bi.getDocumentsMatchingQuery(p,e,t?a:d.min(),t?l:Fn())).next(D=>(Yv(s,ov(e),D),{documents:D,Wi:l})))}function cp(n,e){const t=Rt(n),s=Rt(t.Ds),a=t.Li.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.ne(l,e).next(p=>p?p.target:null))}function lp(n,e){const t=Rt(n),s=t.Ui.get(e)||d.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Ki.getAllFromCollectionGroup(a,e,pc(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Yv(t,e,a),a))}function Yv(n,e,t){let s=n.Ui.get(e)||d.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),n.Ui.set(e,s)}function Md(){return Md=(0,_e.Z)(function*(n,e,t,s){const a=Rt(n);let l=Fn(),p=sa();for(const L of t){const K=e.Hi(L.metadata.name);L.document&&(l=l.add(K));const ue=e.Ji(L);ue.setReadTime(e.Yi(L.metadata.readTime)),p=p.insert(K,ue)}const D=a.Ki.newChangeBuffer({trackRemovals:!0}),O=yield xd(a,(L=s,zo(Iu(I.fromString(`__bundle__/docs/${L}`)))));var L;return a.persistence.runTransaction("Apply bundle documents","readwrite",L=>pm(L,D,p).next(K=>(D.apply(L),K)).next(K=>a.Ds.removeMatchingKeysForTargetId(L,O.targetId).next(()=>a.Ds.addMatchingKeys(L,l,O.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(L,K.zi,K.ji)).next(()=>K.zi)))}),Md.apply(this,arguments)}function mm(n,e){return ym.apply(this,arguments)}function ym(){return ym=(0,_e.Z)(function*(n,e,t=Fn()){const s=yield xd(n,zo(tm(e.bundledQuery))),a=Rt(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=Yi(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.xs.saveNamedQuery(l,e);const D=s.withResumeToken(Ls.EMPTY_BYTE_STRING,p);return a.Li=a.Li.insert(D.targetId,D),a.Ds.updateTargetData(l,D).next(()=>a.Ds.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.Ds.addMatchingKeys(l,t,s.targetId)).next(()=>a.xs.saveNamedQuery(l,e))})}),ym.apply(this,arguments)}function hp(n,e){return`firestore_clients_${n}_${e}`}function fp(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function pp(n,e){return`firestore_targets_${n}_${e}`}class Rh{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Zi(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new et(a.error.code,a.error.message))),p?new Rh(e,t,a.state,l):(bi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bl{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new et(s.error.code,s.error.message))),l?new Bl(e,s.state,a):(bi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=dh();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=Cg(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new Ph(e,l):(bi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gp{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gp(t.clientId,t.onlineState):(bi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Oh{constructor(){this.activeTargetIds=dh()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mp{constructor(e,t,s,a,l){this.window=e,this.Ws=t,this.persistenceKey=s,this.nr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Oi(gn),this.started=!1,this.ur=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.cr=hp(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new Oh),this.hr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.bi();for(const a of t){if(a===e.nr)continue;const l=e.getItem(hp(e.persistenceKey,a));if(l){const p=Ph.Zi(a,l);p&&(e.rr=e.rr.insert(p.clientId,p))}}e.mr();const s=e.storage.getItem(e.wr);if(s){const a=e.gr(s);a&&e.yr(a)}for(const a of e.ur)e.ir(a);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,s){this.Ir(e,t,s),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(pp(this.persistenceKey,e));if(s){const a=Bl.Zi(e,s);a&&(t=a.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Ar(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Tr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ft("SharedClientState","READ",e,t),t}setItem(e,t){ft("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ft("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const s=e;if(s.storageArea===this.storage){if(ft("SharedClientState","EVENT",s.key,s.newValue),s.key===this.cr)return void bi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==s.key)if(t.hr.test(s.key)){if(null==s.newValue){const a=t.br(s.key);return t.Pr(a,null)}{const a=t.Vr(s.key,s.newValue);if(a)return t.Pr(a.clientId,a)}}else if(t.lr.test(s.key)){if(null!==s.newValue){const a=t.Sr(s.key,s.newValue);if(a)return t.Dr(a)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const a=t.Cr(s.key,s.newValue);if(a)return t.Nr(a)}}else if(s.key===t.wr){if(null!==s.newValue){const a=t.gr(s.newValue);if(a)return t.yr(a)}}else if(s.key===t.ar){const a=function(l){let p=Ca.ct;if(null!=l)try{const D=JSON.parse(l);Qt("number"==typeof D),p=D}catch(D){bi("SharedClientState","Failed to read sequence number from WebStorage",D)}return p}(s.newValue);a!==Ca.ct&&t.sequenceNumberHandler(a)}else if(s.key===t._r){const a=t.kr(s.newValue);yield Promise.all(a.map(l=>t.syncEngine.Or(l)))}}else t.ur.push(s)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,s){const a=new Rh(this.currentUser,e,t,s),l=fp(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Xi())}Tr(e){const t=fp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,s){const a=pp(this.persistenceKey,e),l=new Bl(e,t,s);this.setItem(a,l.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const s=this.br(e);return Ph.Zi(s,t)}Sr(e,t){const s=this.lr.exec(e),a=Number(s[1]);return Rh.Zi(new Zi(void 0!==s[2]?s[2]:null),a,t)}Cr(e,t){const s=this.dr.exec(e),a=Number(s[1]);return Bl.Zi(a,t)}gr(e){return gp.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ft("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const s=t?this.rr.insert(e,t):this.rr.remove(e),a=this.pr(this.rr),l=this.pr(s),p=[],D=[];return l.forEach(O=>{a.has(O)||p.push(O)}),a.forEach(O=>{l.has(O)||D.push(O)}),this.syncEngine.Fr(p,D).then(()=>{this.rr=s})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=dh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Qv{constructor(){this.Br=new Oh,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,s){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Oh,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jv{qr(e){}shutdown(){}}class vm{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Nh=null;function yp(){return null===Nh?Nh=268435456+Math.round(2147483648*Math.random()):Nh++,"0x"+Nh.toString(16)}const ME={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xv{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const so="WebChannelConnection";class e_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,s,a,l){const p=yp(),D=this.ao(e,t);ft("RestConnection",`Sending RPC '${e}' ${p}:`,D,s);const O={};return this.ho(O,a,l),this.lo(e,D,O,s).then(L=>(ft("RestConnection",`Received RPC '${e}' ${p}: `,L),L),L=>{throw $o("RestConnection",`RPC '${e}' ${p} failed with error: `,L,"url: ",D,"request:",s),L})}fo(e,t,s,a,l,p){return this.co(e,t,s,a,l)}ho(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+cu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}ao(e,t){return`${this.ro}/v1/${t}:${ME[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,s,a){const l=yp();return new Promise((p,D)=>{const O=new wo;O.setWithCredentials(!0),O.listenOnce(vg.COMPLETE,()=>{try{switch(O.getLastErrorCode()){case Qd.NO_ERROR:const K=O.getResponseJson();ft(so,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(K)),p(K);break;case Qd.TIMEOUT:ft(so,`RPC '${e}' ${l} timed out`),D(new et(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const ue=O.getStatus();if(ft(so,`RPC '${e}' ${l} failed with status:`,ue,"response text:",O.getResponseText()),ue>0){let De=O.getResponseJson();Array.isArray(De)&&(De=De[0]);const Ke=De?.error;if(Ke&&Ke.status&&Ke.message){const pt=function(At){const zt=At.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(zt)>=0?zt:Ne.UNKNOWN}(Ke.status);D(new et(pt,Ke.message))}else D(new et(Ne.UNKNOWN,"Server responded with status "+O.getStatus()))}else D(new et(Ne.UNAVAILABLE,"Connection failed."));break;default:$t()}}finally{ft(so,`RPC '${e}' ${l} completed.`)}});const L=JSON.stringify(a);ft(so,`RPC '${e}' ${l} sending request:`,a),O.send(t,"POST",L,s,15)})}wo(e,t,s){const a=yp(),l=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Tf(),D=Yd(),O={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(O.xmlHttpFactory=new Eg({})),this.ho(O.initMessageHeaders,t,s),O.encodeInitMessageHeaders=!0;const L=l.join("");ft(so,`Creating RPC '${e}' stream ${a}: ${L}`,O);const K=p.createWebChannel(L,O);let ue=!1,De=!1;const Ke=new Xv({Wr:At=>{De?ft(so,`Not sending because RPC '${e}' stream ${a} is closed:`,At):(ue||(ft(so,`Opening RPC '${e}' stream ${a} transport.`),K.open(),ue=!0),ft(so,`RPC '${e}' stream ${a} sending:`,At),K.send(At))},Hr:()=>K.close()}),pt=(At,zt,Bn)=>{At.listen(zt,Sr=>{try{Bn(Sr)}catch(Dn){setTimeout(()=>{throw Dn},0)}})};return pt(K,sd.EventType.OPEN,()=>{De||ft(so,`RPC '${e}' stream ${a} transport opened.`)}),pt(K,sd.EventType.CLOSE,()=>{De||(De=!0,ft(so,`RPC '${e}' stream ${a} transport closed`),Ke.so())}),pt(K,sd.EventType.ERROR,At=>{De||(De=!0,$o(so,`RPC '${e}' stream ${a} transport errored:`,At),Ke.so(new et(Ne.UNAVAILABLE,"The operation could not be completed")))}),pt(K,sd.EventType.MESSAGE,At=>{var zt;if(!De){const Bn=At.data[0];Qt(!!Bn);const Dn=Bn.error||(null===(zt=Bn[0])||void 0===zt?void 0:zt.error);if(Dn){ft(so,`RPC '${e}' stream ${a} received error:`,Dn);const jn=Dn.status;let $n=function(qo){const el=ls[qo];if(void 0!==el)return yv(el)}(jn),nr=Dn.message;void 0===$n&&($n=Ne.INTERNAL,nr="Unknown error status: "+jn+" with message "+Dn.message),De=!0,Ke.so(new et($n,nr)),K.close()}else ft(so,`RPC '${e}' stream ${a} received:`,Bn),Ke.io(Bn)}}),pt(D,_g.STAT_EVENT,At=>{At.stat===al.PROXY?ft(so,`RPC '${e}' stream ${a} detected buffering proxy`):At.stat===al.NOPROXY&&ft(so,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Ke.no()},0),Ke}}function kh(){return typeof window<"u"?window:null}function Rd(){return typeof document<"u"?document:null}function jl(n){return new bv(n,!0)}class vp{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Ws=e,this.timerId=t,this._o=s,this.mo=a,this.yo=l,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),s=Math.max(0,Date.now()-this.To),a=Math.max(0,t-s);a>0&&ft("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,a,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class _m{constructor(e,t,s,a,l,p,D,O){this.Ws=e,this.bo=s,this.Po=a,this.connection=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=D,this.listener=O,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new vp(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,_e.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,_e.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var s=this;return(0,_e.Z)(function*(){s.Bo(),s.Lo(),s.Co.cancel(),s.Vo++,4!==e?s.Co.reset():t&&t.code===Ne.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),s.Co.Eo()):t&&t.code===Ne.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.qo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Vo===t&&this.Ko(s,a)},s=>{e(()=>{const a=new et(Ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Go(a)})})}Ko(e,t){const s=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{s(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(a=>{s(()=>this.Go(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}ko(){var e=this;this.state=5,this.Co.Ao((0,_e.Z)(function*(){e.state=0,e.start()}))}Go(e){return ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t_ extends _m{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.serializer=l}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function Qg(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(O=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===O?1:"REMOVE"===O?2:"CURRENT"===O?3:"RESET"===O?4:$t(),a=e.targetChange.targetIds||[],l=function(O,L){return O.useProto3Json?(Qt(void 0===L||"string"==typeof L),Ls.fromBase64String(L||"")):(Qt(void 0===L||L instanceof Uint8Array),Ls.fromUint8Array(L||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,D=p&&function(O){const L=void 0===O.code?Ne.UNKNOWN:yv(O.code);return new et(L,O.message||"")}(p);t=new vv(s,a,l,D||null)}else if("documentChange"in e){const s=e.documentChange,a=bu(n,s.document.name),l=Yi(s.document.updateTime),p=s.document.createTime?Yi(s.document.createTime):d.min(),D=new ws({mapValue:{fields:s.document.fields}}),O=pi.newFoundDocument(a,l,p,D);t=new Zf(s.targetIds||[],s.removedTargetIds||[],O.key,O)}else if("documentDelete"in e){const s=e.documentDelete,a=bu(n,s.document),l=s.readTime?Yi(s.readTime):d.min(),p=pi.newNoDocument(a,l);t=new Zf([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=bu(n,s.document);t=new Zf([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return $t();{const s=e.filter,l=new iI(s.count||0);t=new Kg(s.targetId,l)}}var O;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return d.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?d.min():l.readTime?Yi(l.readTime):d.min()}(e);return this.listener.zo(t,s)}jo(e){const t={};t.database=vh(this.serializer),t.addTarget=function(a,l){let p;const D=l.target;return p=Hf(D)?{documents:Jf(a,D)}:{query:wh(a,D)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=dE(a,l.resumeToken):l.snapshotVersion.compareTo(d.min())>0&&(p.readTime=Pc(a,l.snapshotVersion.toTimestamp())),p}(this.serializer,e);const s=function em(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $t()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Fo(t)}Wo(e){const t={};t.database=vh(this.serializer),t.removeTarget=e,this.Fo(t)}}class n_ extends _m{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.serializer=l,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function Jg(n,e){return n&&n.length>0?(Qt(void 0!==e),n.map(t=>function(s,a){let l=Yi(s.updateTime?s.updateTime:a);return l.isEqual(d.min())&&(l=Yi(a)),new iE(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Yi(e.commitTime);return this.listener.Zo(s,t)}return Qt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=vh(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Oc(this.serializer,s))};this.Fo(t)}}class r_ extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.eu=!1}nu(){if(this.eu)throw new et(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,s){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.co(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et(Ne.UNKNOWN,a.toString())})}fo(e,t,s,a){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.fo(e,t,s,l,p,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new et(Ne.UNKNOWN,l.toString())})}terminate(){this.eu=!0}}class Gc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(bi(t),this.ru=!1):ft("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class RE{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=l,this._u.qr(D=>{s.enqueueAndForget((0,_e.Z)(function*(){var O;ec(p)&&(ft("RemoteStore","Restarting streams for network reachability change."),yield(O=(0,_e.Z)(function*(L){const K=Rt(L);K.du.add(4),yield Ka(K),K.mu.set("Unknown"),K.du.delete(4),yield Fh(K)}),function(L){return O.apply(this,arguments)})(p))}))}),this.mu=new Gc(s,a)}}function Fh(n){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,_e.Z)(function*(n){if(ec(n))for(const e of n.wu)yield e(!0)}),Lh.apply(this,arguments)}function Ka(n){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,_e.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Vh.apply(this,arguments)}function _p(n,e){const t=Rt(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),wm(t)?Em(t):Nd(t).No()&&s_(t,e))}function $l(n,e){const t=Rt(n),s=Nd(t);t.fu.delete(e),s.No()&&PE(t,e),0===t.fu.size&&(s.No()?s.$o():ec(t)&&t.mu.set("Unknown"))}function s_(n,e){n.gu.Ot(e.targetId),Nd(n).jo(e)}function PE(n,e){n.gu.Ot(e),Nd(n).Wo(e)}function Em(n){n.gu=new cE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),Nd(n).start(),n.mu.ou()}function wm(n){return ec(n)&&!Nd(n).xo()&&n.fu.size>0}function ec(n){return 0===Rt(n).du.size}function o_(n){n.gu=void 0}function Is(n){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,_e.Z)(function*(n){n.fu.forEach((e,t)=>{s_(n,e)})}),Ep.apply(this,arguments)}function OE(n,e){return Im.apply(this,arguments)}function Im(){return Im=(0,_e.Z)(function*(n,e){o_(n),wm(n)?(n.mu.au(e),Em(n)):n.mu.set("Unknown")}),Im.apply(this,arguments)}function a_(n,e,t){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,_e.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof vv&&2===e.state&&e.cause)try{yield(s=(0,_e.Z)(function*(a,l){const p=l.cause;for(const D of l.targetIds)a.fu.has(D)&&(yield a.remoteSyncer.rejectListen(D,p),a.fu.delete(D),a.gu.removeTarget(D))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Uh(n,s)}else if(e instanceof Zf?n.gu.Kt(e):e instanceof Kg?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(d.min()))try{const s=yield fm(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.gu.Xt(l);return p.targetChanges.forEach((D,O)=>{if(D.resumeToken.approximateByteSize()>0){const L=a.fu.get(O);L&&a.fu.set(O,L.withResumeToken(D.resumeToken,l))}}),p.targetMismatches.forEach(D=>{const O=a.fu.get(D);if(!O)return;a.fu.set(D,O.withResumeToken(Ls.EMPTY_BYTE_STRING,O.snapshotVersion)),PE(a,D);const L=new Yu(O.target,D,1,O.sequenceNumber);s_(a,L)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(s){ft("RemoteStore","Failed to raise snapshot:",s),yield Uh(n,s)}var s}),Dm.apply(this,arguments)}function Uh(n,e,t){return wp.apply(this,arguments)}function wp(){return wp=(0,_e.Z)(function*(n,e,t){if(!yu(e))throw e;n.du.add(1),yield Ka(n),n.mu.set("Offline"),t||(t=()=>fm(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){ft("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield Fh(n)}))}),wp.apply(this,arguments)}function Hl(n,e){return e().catch(t=>Uh(n,t,e))}function Od(n){return bm.apply(this,arguments)}function bm(){return bm=(0,_e.Z)(function*(n){const e=Rt(n),t=zc(e);let s=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;u_(e);)try{const a=yield xE(e.localStore,s);if(null===a){0===e.lu.length&&t.$o();break}s=a.batchId,NE(e,a)}catch(a){yield Uh(e,a)}Cm(e)&&kE(e)}),bm.apply(this,arguments)}function u_(n){return ec(n)&&n.lu.length<10}function NE(n,e){n.lu.push(e);const t=zc(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function Cm(n){return ec(n)&&!zc(n).xo()&&n.lu.length>0}function kE(n){zc(n).start()}function Tm(n){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,_e.Z)(function*(n){zc(n).tu()}),Bh.apply(this,arguments)}function Su(n){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,_e.Z)(function*(n){const e=zc(n);for(const t of n.lu)e.Yo(t.mutations)}),Sm.apply(this,arguments)}function FE(n,e,t){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,_e.Z)(function*(n,e,t){const s=n.lu.shift(),a=mh.from(s,e,t);yield Hl(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Od(n)}),Ya.apply(this,arguments)}function lu(n,e){return xa.apply(this,arguments)}function xa(){return xa=(0,_e.Z)(function*(n,e){var t;e&&zc(n).Jo&&(yield(t=(0,_e.Z)(function*(s,a){if(uE(l=a.code)&&l!==Ne.ABORTED){const p=s.lu.shift();zc(s).Oo(),yield Hl(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Od(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),Cm(n)&&kE(n)}),xa.apply(this,arguments)}function Am(n,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,_e.Z)(function*(n,e){const t=Rt(n);t.asyncQueue.verifyOperationInProgress(),ft("RemoteStore","RemoteStore received new credentials");const s=ec(t);t.du.add(3),yield Ka(t),s&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield Fh(t)}),Ip.apply(this,arguments)}function xm(n,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,_e.Z)(function*(n,e){const t=Rt(n);e?(t.du.delete(2),yield Fh(t)):e||(t.du.add(2),yield Ka(t),t.mu.set("Unknown"))}),Mm.apply(this,arguments)}function Nd(n){return n.yu||(n.yu=function(e,t,s){const a=Rt(e);return a.nu(),new t_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Jr:Is.bind(null,n),Zr:OE.bind(null,n),zo:a_.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.yu.Oo(),wm(n)?Em(n):n.mu.set("Unknown")):(yield n.yu.stop(),o_(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function zc(n){return n.pu||(n.pu=function(e,t,s){const a=Rt(e);return a.nu(),new n_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Jr:Tm.bind(null,n),Zr:lu.bind(null,n),Xo:Su.bind(null,n),Zo:FE.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.pu.Oo(),yield Od(n)):(yield n.pu.stop(),n.lu.length>0&&(ft("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class jh{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,D=new jh(e,t,p,a,l);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new et(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Au(n,e){if(bi("AsyncQueue",`${e}: ${n}`),yu(n))return new et(Ne.UNAVAILABLE,`${e}: ${n}`);throw n}class kd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||te.comparator(t.key,s.key):(t,s)=>te.comparator(t.key,s.key),this.keyedMap=vd(),this.sortedSet=new Oi(this.comparator)}static emptySet(e){return new kd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new kd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Rm{constructor(){this.Iu=new Oi(te.comparator)}track(e){const t=e.doc.key,s=this.Iu.get(t);s?0!==e.type&&3===s.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==s.type?this.Iu=this.Iu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Iu=this.Iu.remove(t):1===e.type&&2===s.type?this.Iu=this.Iu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):$t():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Fd{constructor(e,t,s,a,l,p,D,O,L){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=D,this.excludesMetadataChanges=O,this.hasCachedResults=L}static fromInitialDocuments(e,t,s,a,l){const p=[];return t.forEach(D=>{p.push({type:0,doc:D})}),new Fd(e,t,kd.emptySet(t),p,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class c_{constructor(){this.Eu=void 0,this.listeners=[]}}class l_{constructor(){this.queries=new xc(e=>jg(e),yd),this.onlineState="Unknown",this.Au=new Set}}function Ld(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,_e.Z)(function*(n,e){const t=Rt(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new c_),a)try{l.Eu=yield t.onListen(s)}catch(p){const D=Au(p,`Initialization of query '${ch(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,l),l.listeners.push(e),e.Ru(t.onlineState),l.Eu&&e.vu(l.Eu)&&$h(t)}),Pm.apply(this,arguments)}function Dp(n,e){return bp.apply(this,arguments)}function bp(){return bp=(0,_e.Z)(function*(n,e){const t=Rt(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),bp.apply(this,arguments)}function Om(n,e){const t=Rt(n);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const D of p.listeners)D.vu(a)&&(s=!0);p.Eu=a}}s&&$h(t)}function Cp(n,e,t){const s=Rt(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function $h(n){n.Au.forEach(e=>{e.next()})}class Hh{constructor(e,t,s){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=s||{}}vu(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Fd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Fd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class d_{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class Nm{constructor(e){this.serializer=e}Hi(e){return bu(this.serializer,e)}Ji(e){return e.metadata.exists?Yf(this.serializer,e.document,!1):pi.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return Yi(e)}}class h_{constructor(e,t,s){this.Ou=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=km(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const s=I.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,s=new Nm(this.serializer);for(const a of e)if(a.metadata.queries){const l=s.Hi(a.metadata.name);for(const p of a.metadata.queries){const D=(t.get(p)||Fn()).add(l);t.set(p,D)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function dp(n,e,t,s){return Md.apply(this,arguments)}(e.localStore,new Nm(e.serializer),e.documents,e.Ou.id),s=e.Mu(e.documents);for(const a of e.queries)yield mm(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function km(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Fm{constructor(e){this.key=e}}class Lm{constructor(e){this.key=e}}class Vm{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Fn(),this.mutatedKeys=Fn(),this.Ku=zf(e),this.Gu=new kd(this.Ku)}get Qu(){return this.Lu}zu(e,t){const s=t?t.ju:new Rm,a=t?t.Gu:this.Gu;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,D=!1;const O="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,L="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((K,ue)=>{const De=a.get(K),Ke=_l(this.query,ue)?ue:null,pt=!!De&&this.mutatedKeys.has(De.key),At=!!Ke&&(Ke.hasLocalMutations||this.mutatedKeys.has(Ke.key)&&Ke.hasCommittedMutations);let zt=!1;De&&Ke?De.data.isEqual(Ke.data)?pt!==At&&(s.track({type:3,doc:Ke}),zt=!0):this.Wu(De,Ke)||(s.track({type:2,doc:Ke}),zt=!0,(O&&this.Ku(Ke,O)>0||L&&this.Ku(Ke,L)<0)&&(D=!0)):!De&&Ke?(s.track({type:0,doc:Ke}),zt=!0):De&&!Ke&&(s.track({type:1,doc:De}),zt=!0,(O||L)&&(D=!0)),zt&&(Ke?(p=p.add(Ke),l=At?l.add(K):l.delete(K)):(p=p.delete(K),l=l.delete(K)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const K="F"===this.query.limitType?p.last():p.first();p=p.delete(K.key),l=l.delete(K.key),s.track({type:1,doc:K})}return{Gu:p,ju:s,Mi:D,mutatedKeys:l}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const l=e.ju.Tu();l.sort((L,K)=>function(ue,De){const Ke=pt=>{switch(pt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t()}};return Ke(ue)-Ke(De)}(L.type,K.type)||this.Ku(L.doc,K.doc)),this.Hu(s);const p=t?this.Ju():[],D=0===this.Uu.size&&this.current?1:0,O=D!==this.qu;return this.qu=D,0!==l.length||O?{snapshot:new Fd(this.query,e.Gu,a,l,e.mutatedKeys,0===D,O,!1,!!s&&s.resumeToken.approximateByteSize()>0),Yu:p}:{Yu:p}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Rm,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Fn(),this.Gu.forEach(s=>{this.Zu(s.key)&&(this.Uu=this.Uu.add(s.key))});const t=[];return e.forEach(s=>{this.Uu.has(s)||t.push(new Lm(s))}),this.Uu.forEach(s=>{e.has(s)||t.push(new Fm(s))}),t}Xu(e){this.Lu=e.Wi,this.Uu=Fn();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Fd.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class LE{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class VE{constructor(e){this.key=e,this.ec=!1}}class UE{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.nc={},this.sc=new xc(D=>jg(D),yd),this.ic=new Map,this.rc=new Set,this.oc=new Oi(te.comparator),this.uc=new Map,this.cc=new um,this.ac={},this.hc=new Map,this.lc=Fl.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function BE(n,e){return Um.apply(this,arguments)}function Um(){return Um=(0,_e.Z)(function*(n,e){const t=Jm(n);let s,a;const l=t.sc.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.tc();else{const p=yield xd(t.localStore,zo(e));t.isPrimaryClient&&_p(t.remoteStore,p);const D=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Bm(t,e,s,"current"===D,p.resumeToken)}return a}),Um.apply(this,arguments)}function Bm(n,e,t,s,a){return jm.apply(this,arguments)}function jm(){return jm=(0,_e.Z)(function*(n,e,t,s,a){n.dc=(ue,De,Ke)=>{return(pt=(0,_e.Z)(function*(At,zt,Bn,Sr){let Dn=zt.view.zu(Bn);Dn.Mi&&(Dn=yield up(At.localStore,zt.query,!1).then(({documents:nr})=>zt.view.zu(nr,Dn)));const jn=Sr&&Sr.targetChanges.get(zt.targetId),$n=zt.view.applyChanges(Dn,At.isPrimaryClient,jn);return Rp(At,zt.targetId,$n.Yu),$n.snapshot}),function(At,zt,Bn,Sr){return pt.apply(this,arguments)})(n,ue,De,Ke);var pt};const l=yield up(n.localStore,e,!0),p=new Vm(e,l.Wi),D=p.zu(l.documents),O=Rc.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState,a),L=p.applyChanges(D,n.isPrimaryClient,O);Rp(n,t,L.Yu);const K=new LE(e,t,p);return n.sc.set(e,K),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),L.snapshot}),jm.apply(this,arguments)}function jE(n,e){return $m.apply(this,arguments)}function $m(){return $m=(0,_e.Z)(function*(n,e){const t=Rt(n),s=t.sc.get(e),a=t.ic.get(s.targetId);if(a.length>1)return t.ic.set(s.targetId,a.filter(l=>!yd(l,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ul(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),$l(t.remoteStore,s.targetId),Gl(t,s.targetId)}).catch(Za))):(Gl(t,s.targetId),yield Ul(t.localStore,s.targetId,!0))}),$m.apply(this,arguments)}function Hm(){return Hm=(0,_e.Z)(function*(n,e,t){const s=kp(n);try{const a=yield function(l,p){const D=Rt(l),O=E.now(),L=p.reduce((De,Ke)=>De.add(Ke.key),Fn());let K,ue;return D.persistence.runTransaction("Locally write mutations","readwrite",De=>{let Ke=sa(),pt=Fn();return D.Ki.getEntries(De,L).next(At=>{Ke=At,Ke.forEach((zt,Bn)=>{Bn.isValidDocument()||(pt=pt.add(zt))})}).next(()=>D.localDocuments.getOverlayedDocuments(De,Ke)).next(At=>{K=At;const zt=[];for(const Bn of p){const Sr=fv(Bn,K.get(Bn.key).overlayedDocument);null!=Sr&&zt.push(new qu(Bn.key,Sr,Ng(Sr.value.mapValue),Wt.exists(!0)))}return D.mutationQueue.addMutationBatch(De,O,zt,p)}).next(At=>{ue=At;const zt=At.applyToLocalDocumentSet(K,pt);return D.documentOverlayCache.saveOverlays(De,At.batchId,zt)})}).then(()=>({batchId:ue.batchId,changes:uv(K)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,D){let O=l.ac[l.currentUser.toKey()];O||(O=new Oi(gn)),O=O.insert(p,D),l.ac[l.currentUser.toKey()]=O}(s,a.batchId,t),yield nc(s,a.changes),yield Od(s.remoteStore)}catch(a){const l=Au(a,"Failed to persist write");t.reject(l)}}),Hm.apply(this,arguments)}function f_(n,e){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,_e.Z)(function*(n,e){const t=Rt(n);try{const s=yield Kv(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.uc.get(l);p&&(Qt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.ec=!0:a.modifiedDocuments.size>0?Qt(p.ec):a.removedDocuments.size>0&&(Qt(p.ec),p.ec=!1))}),yield nc(t,s,e)}catch(s){yield Za(s)}}),Gm.apply(this,arguments)}function p_(n,e,t){const s=Rt(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.sc.forEach((l,p)=>{const D=p.view.Ru(e);D.snapshot&&a.push(D.snapshot)}),function(l,p){const D=Rt(l);D.onlineState=p;let O=!1;D.queries.forEach((L,K)=>{for(const ue of K.listeners)ue.Ru(p)&&(O=!0)}),O&&$h(D)}(s.eventManager,e),a.length&&s.nc.zo(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function HE(n,e,t){return zm.apply(this,arguments)}function zm(){return zm=(0,_e.Z)(function*(n,e,t){const s=Rt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.uc.get(e),l=a&&a.key;if(l){let p=new Oi(te.comparator);p=p.insert(l,pi.newNoDocument(l,d.min()));const D=Fn().add(l),O=new Ed(d.min(),new Map,new Qn(gn),p,D);yield f_(s,O),s.oc=s.oc.remove(l),s.uc.delete(e),tc(s)}else yield Ul(s.localStore,e,!1).then(()=>Gl(s,e,t)).catch(Za)}),zm.apply(this,arguments)}function GE(n,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,_e.Z)(function*(n,e){const t=Rt(n),s=e.batch.batchId;try{const a=yield Zv(t.localStore,e);Mp(t,s,null),xp(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield nc(t,a)}catch(a){yield Za(a)}}),Tp.apply(this,arguments)}function g_(n,e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,_e.Z)(function*(n,e,t){const s=Rt(n);try{const a=yield function(l,p){const D=Rt(l);return D.persistence.runTransaction("Reject batch","readwrite-primary",O=>{let L;return D.mutationQueue.lookupMutationBatch(O,p).next(K=>(Qt(null!==K),L=K.keys(),D.mutationQueue.removeMutationBatch(O,K))).next(()=>D.mutationQueue.performConsistencyCheck(O)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(O,L,p)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(O,L)).next(()=>D.localDocuments.getDocuments(O,L))})}(s.localStore,e);Mp(s,e,t),xp(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield nc(s,a)}catch(a){yield Za(a)}}),Sp.apply(this,arguments)}function Ap(){return Ap=(0,_e.Z)(function*(n,e){const t=Rt(n);ec(t.remoteStore)||ft("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=Rt(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>p.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.hc.get(s)||[];a.push(e),t.hc.set(s,a)}catch(s){const a=Au(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Ap.apply(this,arguments)}function xp(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function Mp(n,e,t){const s=Rt(n);let a=s.ac[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.ac[s.currentUser.toKey()]=a}}function Gl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.ic.get(e))n.sc.delete(s),t&&n.nc.wc(s,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(s=>{n.cc.containsKey(s)||Wm(n,s)})}function Wm(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&($l(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),tc(n))}function Rp(n,e,t){for(const s of t)s instanceof Fm?(n.cc.addReference(s.key,e),y_(n,s)):s instanceof Lm?(ft("SyncEngine","Document no longer in limbo: "+s.key),n.cc.removeReference(s.key,e),n.cc.containsKey(s.key)||Wm(n,s.key)):$t()}function y_(n,e){const t=e.key,s=t.path.canonicalString();n.oc.get(t)||n.rc.has(s)||(ft("SyncEngine","New document in limbo: "+t),n.rc.add(s),tc(n))}function tc(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new te(I.fromString(e)),s=n.lc.next();n.uc.set(s,new VE(t)),n.oc=n.oc.insert(t,s),_p(n.remoteStore,new Yu(zo(Iu(t.path)),s,2,Ca.ct))}}function nc(n,e,t){return qm.apply(this,arguments)}function qm(){return qm=(0,_e.Z)(function*(n,e,t){const s=Rt(n),a=[],l=[],p=[];var D;s.sc.isEmpty()||(s.sc.forEach((D,O)=>{p.push(s.dc(O,e,t).then(L=>{if((L||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(O.targetId,L?.fromCache?"not-current":"current"),L){a.push(L);const K=Hc.Di(O.targetId,L);l.push(K)}}))}),yield Promise.all(p),s.nc.zo(a),yield(D=(0,_e.Z)(function*(O,L){const K=Rt(O);try{yield K.persistence.runTransaction("notifyLocalViewChanges","readwrite",ue=>Pe.forEach(L,De=>Pe.forEach(De.Vi,Ke=>K.persistence.referenceDelegate.addReference(ue,De.targetId,Ke)).next(()=>Pe.forEach(De.Si,Ke=>K.persistence.referenceDelegate.removeReference(ue,De.targetId,Ke)))))}catch(ue){if(!yu(ue))throw ue;ft("LocalStore","Failed to update sequence numbers: "+ue)}for(const ue of L){const De=ue.targetId;if(!ue.fromCache){const Ke=K.Li.get(De),At=Ke.withLastLimboFreeSnapshotVersion(Ke.snapshotVersion);K.Li=K.Li.insert(De,At)}}}),function(O,L){return D.apply(this,arguments)})(s.localStore,l))}),qm.apply(this,arguments)}function Vd(n,e){return v_.apply(this,arguments)}function v_(){return v_=(0,_e.Z)(function*(n,e){const t=Rt(n);if(!t.currentUser.isEqual(e)){ft("SyncEngine","User change. New user:",e.toKey());const s=yield hm(t.localStore,e);t.currentUser=e,(a=t).hc.forEach(p=>{p.forEach(D=>{D.reject(new et(Ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.hc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield nc(t,s.Qi)}var a}),v_.apply(this,arguments)}function Zm(n,e){const t=Rt(n),s=t.uc.get(e);if(s&&s.ec)return Fn().add(s.key);{let a=Fn();const l=t.ic.get(e);if(!l)return a;for(const p of l){const D=t.sc.get(p);a=a.unionWith(D.view.Qu)}return a}}function aI(n,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,_e.Z)(function*(n,e){const t=Rt(n),s=yield up(t.localStore,e.query,!0),a=e.view.Xu(s);return t.isPrimaryClient&&Rp(t,e.targetId,a.Yu),a}),Pp.apply(this,arguments)}function __(n,e){return E_.apply(this,arguments)}function E_(){return E_=(0,_e.Z)(function*(n,e){const t=Rt(n);return lp(t.localStore,e).then(s=>nc(t,s))}),E_.apply(this,arguments)}function dn(n,e,t,s){return Km.apply(this,arguments)}function Km(){return Km=(0,_e.Z)(function*(n,e,t,s){const a=Rt(n),l=yield function(p,D){const O=Rt(p),L=Rt(O.mutationQueue);return O.persistence.runTransaction("Lookup mutation documents","readonly",K=>L.In(K,D).next(ue=>ue?O.localDocuments.getDocuments(K,ue):Pe.resolve(null)))}(a.localStore,e);var D;null!==l?("pending"===t?yield Od(a.remoteStore):"acknowledged"===t||"rejected"===t?(Mp(a,e,s||null),xp(a,e),D=e,Rt(Rt(a.localStore).mutationQueue).En(D)):$t(),yield nc(a,l)):ft("SyncEngine","Cannot apply mutation batch with id: "+e)}),Km.apply(this,arguments)}function Ym(){return Ym=(0,_e.Z)(function*(n,e){const t=Rt(n);if(Jm(t),kp(t),!0===e&&!0!==t.fc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield zl(t,s.toArray());t.fc=!0,yield xm(t.remoteStore,!0);for(const l of a)_p(t.remoteStore,l)}else if(!1===e&&!1!==t.fc){const s=[];let a=Promise.resolve();t.ic.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(Gl(t,p),Ul(t.localStore,p,!0))),$l(t.remoteStore,p)}),yield a,yield zl(t,s),function(l){const p=Rt(l);p.uc.forEach((D,O)=>{$l(p.remoteStore,O)}),p.cc.ls(),p.uc=new Map,p.oc=new Oi(te.comparator)}(t),t.fc=!1,yield xm(t.remoteStore,!1)}}),Ym.apply(this,arguments)}function zl(n,e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,_e.Z)(function*(n,e,t){const s=Rt(n),a=[],l=[];for(const p of e){let D;const O=s.ic.get(p);if(O&&0!==O.length){D=yield xd(s.localStore,zo(O[0]));for(const L of O){const K=s.sc.get(L),ue=yield aI(s,K);ue.snapshot&&l.push(ue.snapshot)}}else{const L=yield cp(s.localStore,p);D=yield xd(s.localStore,L),yield Bm(s,Gh(L),p,!1,D.resumeToken)}a.push(D)}return s.nc.zo(l),a}),Qm.apply(this,arguments)}function Gh(n){return iv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Op(n){const e=Rt(n);return Rt(Rt(e.localStore).persistence).bi()}function Ni(n,e,t,s){return w_.apply(this,arguments)}function w_(){return w_=(0,_e.Z)(function*(n,e,t,s){const a=Rt(n);if(a.fc)return void ft("SyncEngine","Ignoring unexpected query state notification.");const l=a.ic.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield lp(a.localStore,ov(l[0])),D=Ed.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ls.EMPTY_BYTE_STRING);yield nc(a,p,D);break}case"rejected":yield Ul(a.localStore,e,!0),Gl(a,e,s);break;default:$t()}}),w_.apply(this,arguments)}function I_(n,e,t){return Np.apply(this,arguments)}function Np(){return Np=(0,_e.Z)(function*(n,e,t){const s=Jm(n);if(s.fc){for(const a of e){if(s.ic.has(a)){ft("SyncEngine","Adding an already active target "+a);continue}const l=yield cp(s.localStore,a),p=yield xd(s.localStore,l);yield Bm(s,Gh(l),p.targetId,!1,p.resumeToken),_p(s.remoteStore,p)}for(const a of t)s.ic.has(a)&&(yield Ul(s.localStore,a,!1).then(()=>{$l(s.remoteStore,a),Gl(s,a)}).catch(Za))}}),Np.apply(this,arguments)}function Jm(n){const e=Rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=f_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HE.bind(null,e),e.nc.zo=Om.bind(null,e.eventManager),e.nc.wc=Cp.bind(null,e.eventManager),e}function kp(n){const e=Rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g_.bind(null,e),e}class zh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.serializer=jl(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dm(this.persistence,new lm,e.initialUser,this.serializer)}createPersistence(e){return new Aa(Ju.Fs,this.serializer)}createSharedClientState(e){return new Qv}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Fp extends zh{constructor(e,t,s){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,_e.Z)(function*(){yield t().call(s,e),yield s.mc.initialize(s,e),yield kp(s.mc.syncEngine),yield Od(s.mc.remoteStore),yield s.persistence.hi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return dm(this.persistence,new lm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new IE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new V0(t,this.persistence);return new Vy(e.asyncQueue,s)}createPersistence(e){const t=$c(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?aa.withCacheSize(this.cacheSizeBytes):aa.DEFAULT;return new jc(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,kh(),Rd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Qv}}class b_ extends Fp{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,_e.Z)(function*(){yield t().call(s,e);const a=s.mc.syncEngine;s.sharedClientState instanceof mp&&(s.sharedClientState.syncEngine={$r:dn.bind(null,a),Mr:Ni.bind(null,a),Fr:I_.bind(null,a),bi:Op.bind(null,a),Or:__.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.hi(function(){var l=(0,_e.Z)(function*(p){yield function zE(n,e){return Ym.apply(this,arguments)}(s.mc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=kh();if(!mp.D(t))throw new et(Ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=$c(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mp(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Ud{initialize(e,t){var s=this;return(0,_e.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>p_(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Vd.bind(null,s.syncEngine),yield xm(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new l_}createDatastore(e){const t=jl(e.databaseInfo.databaseId),s=new e_(e.databaseInfo);return new r_(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=D=>p_(this.syncEngine,D,0),p=vm.D()?new vm:new Jv,new RE(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,D,O,L){const K=new UE(s,a,l,p,D,O);return L&&(K.fc=!0),K}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const s=Rt(t);ft("RemoteStore","RemoteStore shutting down."),s.du.add(5),yield Ka(s),s._u.shutdown(),s.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function C_(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Wc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class WE{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Ci,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(s=>{s&&s.ku()?this.metadata.resolve(s.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Nu)}`))},s=>this.metadata.reject(s))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const s=e.Tc.decode(t),a=Number(s);isNaN(a)&&e.Rc(`length string (${s}) is not valid number`);const l=yield e.vc(a);return new d_(JSON.parse(l),t.length+a)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,_e.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const s=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class qE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new et(Ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,_e.Z)(function*(l,p){const D=Rt(l),O=vh(D.serializer)+"/documents",L={documents:p.map(Ke=>wd(D.serializer,Ke))},K=yield D.fo("BatchGetDocuments",O,L,p.length),ue=new Map;K.forEach(Ke=>{const pt=function Eh(n,e){return"found"in e?function(t,s){Qt(!!s.found);const a=bu(t,s.found.name),l=Yi(s.found.updateTime),p=s.found.createTime?Yi(s.found.createTime):d.min(),D=new ws({mapValue:{fields:s.found.fields}});return pi.newFoundDocument(a,l,p,D)}(n,e):"missing"in e?function(t,s){Qt(!!s.missing),Qt(!!s.readTime);const a=bu(t,s.missing),l=Yi(s.readTime);return pi.newNoDocument(a,l)}(n,e):$t()}(D.serializer,Ke);ue.set(pt.key.toString(),pt)});const De=[];return p.forEach(Ke=>{const pt=ue.get(Ke.toString());Qt(!!pt),De.push(pt)}),De}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new bl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=te.fromPath(a);e.mutations.push(new Zu(l,e.precondition(l)))}),yield(s=(0,_e.Z)(function*(a,l){const p=Rt(a),D=vh(p.serializer)+"/documents",O={writes:l.map(L=>Oc(p.serializer,L))};yield p.co("Commit",D,O)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $t();t=d.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new et(Ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(d.min())?Wt.exists(!1):Wt.updateTime(t):Wt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(d.min()))throw new et(Ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wt.updateTime(t)}return Wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ZE{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Vc=s.maxAttempts,this.Co=new vp(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,_e.Z)(function*(){const t=new qE(e.datastore),s=e.Dc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Cc(l)}))}).catch(a=>{e.Cc(a)})}))}Dc(e){try{const t=this.updateFunction(e);return!th(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uE(t)}return!1}}class Lp{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Zi.UNAUTHENTICATED,this.clientId=Pf.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,_e.Z)(function*(D){ft("FirestoreClient","Received user=",D.uid),yield l.authCredentialListener(D),l.user=D});return function(D){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(ft("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new et(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Au(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Wh(n,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ft("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,_e.Z)(function*(l){s.isEqual(l)||(yield hm(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Vp.apply(this,arguments)}function Up(n,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Wl(n);ft("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>Am(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>Am(e.remoteStore,l)),n._onlineComponents=e}),Xm.apply(this,arguments)}function Bd(n){return"FirebaseError"===n.name?n.code===Ne.FAILED_PRECONDITION||n.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Wl(n){return ey.apply(this,arguments)}function ey(){return ey=(0,_e.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Bd(t))throw t;$o("Error using user provided cache. Falling back to memory cache: "+t),yield Wh(n,new zh)}}else ft("FirestoreClient","Using default OfflineComponentProvider"),yield Wh(n,new zh);return n._offlineComponents}),ey.apply(this,arguments)}function Bp(n){return ty.apply(this,arguments)}function ty(){return ty=(0,_e.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft("FirestoreClient","Using user provided OnlineComponentProvider"),yield Up(n,n._uninitializedComponentsProvider._online)):(ft("FirestoreClient","Using default OnlineComponentProvider"),yield Up(n,new Ud))),n._onlineComponents}),ty.apply(this,arguments)}function ny(n){return Wl(n).then(e=>e.persistence)}function qh(n){return Wl(n).then(e=>e.localStore)}function ry(n){return Bp(n).then(e=>e.remoteStore)}function iy(n){return Bp(n).then(e=>e.syncEngine)}function jd(n){return oy.apply(this,arguments)}function oy(){return oy=(0,_e.Z)(function*(n){const e=yield Bp(n),t=e.eventManager;return t.onListen=BE.bind(null,e.syncEngine),t.onUnlisten=jE.bind(null,e.syncEngine),t}),oy.apply(this,arguments)}function KE(n,e,t={}){const s=new Ci;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,l,p,D,O){const L=new Wc({next:ue=>{l.enqueueAndForget(()=>Dp(a,K));const De=ue.docs.has(p);!De&&ue.fromCache?O.reject(new et(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):De&&ue.fromCache&&D&&"server"===D.source?O.reject(new et(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):O.resolve(ue)},error:ue=>O.reject(ue)}),K=new Hh(Iu(p.path),L,{includeMetadataChanges:!0,xu:!0});return Ld(a,K)}(yield jd(n),n.asyncQueue,e,t,s)})),s.promise}function Zh(n,e,t={}){const s=new Ci;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,l,p,D,O){const L=new Wc({next:ue=>{l.enqueueAndForget(()=>Dp(a,K)),ue.fromCache&&"server"===D.source?O.reject(new et(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):O.resolve(ue)},error:ue=>O.reject(ue)}),K=new Hh(p,L,{includeMetadataChanges:!0,xu:!0});return Ld(a,K)}(yield jd(n),n.asyncQueue,e,t,s)})),s.promise}const A_=new Map;function ay(n,e,t){if(!t)throw new et(Ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x_(n,e,t,s){if(!0===e&&!0===s)throw new et(Ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function M_(n){if(!te.isDocumentKey(n))throw new et(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JE(n){if(te.isDocumentKey(n))throw new et(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":$t()}function qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new et(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jp(n);throw new et(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function R_(n,e){if(e<=0)throw new et(Ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class P_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new et(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new et(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,x_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rc{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new et(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new et(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $u;switch(t.type){case"firstParty":return new cd(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new et(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=A_.get(e);t&&(ft("ComponentProvider","Removing Datastore"),A_.delete(e),t.terminate())}(this),Promise.resolve()}}class Hr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new du(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hr(this.firestore,e,this._key)}}class oo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new oo(this.firestore,e,this._query)}}class du extends oo{constructor(e,t,s){super(e,t,Iu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hr(this.firestore,null,new te(e))}withConverter(e){return new du(this.firestore,e,this._path)}}function N_(n,e,...t){if(n=(0,Tt.m9)(n),ay("collection","path",e),n instanceof rc){const s=I.fromString(e,...t);return JE(s),new du(n,null,s)}{if(!(n instanceof Hr||n instanceof du))throw new et(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(I.fromString(e,...t));return JE(s),new du(n.firestore,null,s)}}function $p(n,e,...t){if(n=(0,Tt.m9)(n),1===arguments.length&&(e=Pf.A()),ay("doc","path",e),n instanceof rc){const s=I.fromString(e,...t);return M_(s),new Hr(n,null,new te(s))}{if(!(n instanceof Hr||n instanceof du))throw new et(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(I.fromString(e,...t));return M_(s),new Hr(n.firestore,n instanceof du?n.converter:null,new te(s))}}function Hp(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),(n instanceof Hr||n instanceof du)&&(e instanceof Hr||e instanceof du)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uy(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),n instanceof oo&&e instanceof oo&&n.firestore===e.firestore&&yd(n._query,e._query)&&n.converter===e.converter}class F_{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new vp(this,"async_queue_retry"),this.qc=()=>{const t=Rd();t&&ft("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Rd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Rd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Ci;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!yu(t))throw t;ft("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(s=>{throw this.Mc=s,this.Fc=!1,bi("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Fc=!1,s))));return this.Nc=t,t}enqueueAfterDelay(e,t,s){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const a=jh.createAndSchedule(this,e,t,s,l=>this.Qc(l));return this.$c.push(a),a}Uc(){this.Mc&&$t()}verifyOperationInProgress(){}zc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Gp(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class XE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ni extends rc{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new F_,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||V_(this),this._firestoreClient.terminate()}}function ki(n){return n._firestoreClient||V_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function V_(n){var e,t,s;const a=n._freezeSettings(),l=(D=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Z0(n._databaseId,D,n._persistenceKey,(L=a).host,L.ssl,L.experimentalForceLongPolling,L.experimentalAutoDetectLongPolling,L.useFetchStreams));var D,L;n._firestoreClient=new Lp(n._authCredentials,n._appCheckCredentials,n._queue,l),null!==(t=a.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=a.cache)&&void 0!==s&&s._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function U_(n,e,t){const s=new Ci;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield Wh(n,t),yield Up(n,e),s.resolve()}catch(a){const l=a;if(!Bd(l))throw l;$o("Error enabling indexeddb cache. Falling back to memory cache: "+l),s.reject(l)}})).then(()=>s.promise)}function j_(n){if(n._initialized||n._terminated)throw new et(Ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xu(Ls.fromBase64String(e))}catch(t){throw new et(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xu(Ls.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new et(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new q(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sc{constructor(e){this._methodName=e}}class Yh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new et(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new et(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gn(this._lat,e._lat)||gn(this._long,e._long)}}const cy=/^__.*__$/;class lw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new qu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}class H_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new qu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $t()}}class Wp{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===l&&this.Jc(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new Wp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Zc({path:s,ta:!1});return a.ea(e),a}na(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Zc({path:s,ta:!1});return a.Jc(),a}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return Jp(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(zp(this.Yc)&&cy.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class G_{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jl(e)}ua(e,t,s,a=!1){return new Wp({Yc:e,methodName:t,oa:s,path:q.emptyPath(),ta:!1,ra:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qa(n){const e=n._freezeSettings(),t=jl(n._databaseId);return new G_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qh(n,e,t,s,a,l={}){const p=n.ua(l.merge||l.mergeFields?2:0,e,t,a);Yp("Data must be an object, but it was:",p,s);const D=fy(s,p);let O,L;if(l.merge)O=new Go(p.fieldMask),L=p.fieldTransforms;else if(l.mergeFields){const K=[];for(const ue of l.mergeFields){const De=Xh(e,ue,t);if(!p.contains(De))throw new et(Ne.INVALID_ARGUMENT,`Field '${De}' is specified in your field mask but missing from your input data.`);gy(K,De)||K.push(De)}O=new Go(K),L=p.fieldTransforms.filter(ue=>O.covers(ue.field))}else O=null,L=p.fieldTransforms;return new lw(new ws(D),O,L)}class Jh extends sc{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}function dw(n,e,t){return new Wp({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class qp extends sc{_toFieldTransform(e){return new hh(e.path,new bo)}isEqual(e){return e instanceof qp}}class ly extends sc{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=dw(this,e,!0),s=this.ca.map(l=>qc(l,t)),a=new wl(s);return new hh(e.path,a)}isEqual(e){return this===e}}class hw extends sc{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=dw(this,e,!0),s=this.ca.map(l=>qc(l,t)),a=new Il(s);return new hh(e.path,a)}isEqual(e){return this===e}}class dy extends sc{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new _d(e.serializer,Hg(e.serializer,this.aa));return new hh(e.path,t)}isEqual(e){return this===e}}function hy(n,e,t,s){const a=n.ua(1,e,t);Yp("Data must be an object, but it was:",a,s);const l=[],p=ws.empty();dl(s,(O,L)=>{const K=Qp(e,O,t);L=(0,Tt.m9)(L);const ue=a.na(K);if(L instanceof Jh)l.push(K);else{const De=qc(L,ue);null!=De&&(l.push(K),p.set(K,De))}});const D=new Go(l);return new H_(p,D,a.fieldTransforms)}function Zp(n,e,t,s,a,l){const p=n.ua(1,e,t),D=[Xh(e,s,t)],O=[a];if(l.length%2!=0)throw new et(Ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let De=0;De<l.length;De+=2)D.push(Xh(e,l[De])),O.push(l[De+1]);const L=[],K=ws.empty();for(let De=D.length-1;De>=0;--De)if(!gy(L,D[De])){const Ke=D[De];let pt=O[De];pt=(0,Tt.m9)(pt);const At=p.na(Ke);if(pt instanceof Jh)L.push(Ke);else{const zt=qc(pt,At);null!=zt&&(L.push(Ke),K.set(Ke,zt))}}const ue=new Go(L);return new H_(K,ue,p.fieldTransforms)}function Kp(n,e,t,s=!1){return qc(t,n.ua(s?4:3,e))}function qc(n,e){if(py(n=(0,Tt.m9)(n)))return Yp("Unsupported field value:",e,n),fy(n,e);if(n instanceof sc)return function(t,s){if(!zp(s.Yc))throw s.ia(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ia(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let D=qc(p,s.sa(l));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,Tt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Hg(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=E.fromDate(t);return{timestampValue:Pc(s.serializer,a)}}if(t instanceof E){const a=new E(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Pc(s.serializer,a)}}if(t instanceof Yh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xu)return{bytesValue:dE(s.serializer,t._byteString)};if(t instanceof Hr){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.ia(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Cv(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ia(`Unsupported field value: ${jp(t)}`)}(n,e)}function fy(n,e){const t={};return qy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dl(n,(s,a)=>{const l=qc(a,e.Xc(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function py(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof E||n instanceof Yh||n instanceof xu||n instanceof Hr||n instanceof sc)}function Yp(n,e,t){if(!py(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=jp(t);throw e.ia("an object"===s?n+" a custom object":n+" "+s)}var s}function Xh(n,e,t){if((e=(0,Tt.m9)(e))instanceof ic)return e._internalPath;if("string"==typeof e)return Qp(n,e);throw Jp("Field path arguments must be of type string or ",n,!1,void 0,t)}const fw=new RegExp("[~\\*/\\[\\]]");function Qp(n,e,t){if(e.search(fw)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ic(...e.split("."))._internalPath}catch{throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jp(n,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let O="";return(l||p)&&(O+=" (found",l&&(O+=` in field ${s}`),p&&(O+=` in document ${a}`),O+=")"),new et(Ne.INVALID_ARGUMENT,D+n+O)}function gy(n,e){return n.some(t=>t.isEqual(e))}class Xp{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new z_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class z_ extends Xp{data(){return super.data()}}function eg(n,e){return"string"==typeof e?Qp(n,e):e instanceof ic?e._internalPath:e._delegate._internalPath}function W_(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new et(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q_{}class ef extends q_{}function Zc(n,e,...t){let s=[];e instanceof q_&&s.push(e),s=s.concat(t),function(a){const l=a.filter(D=>D instanceof ql).length,p=a.filter(D=>D instanceof Hd).length;if(l>1||l>0&&p>0)throw new et(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class Hd extends ef{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Hd(e,t,s)}_apply(e){const t=this._parse(e);return vy(e._query,t),new oo(e.firestore,e.converter,Bg(e._query,t))}_parse(e){const t=Qa(e.firestore);return function(a,l,p,D,O,L,K){let ue;if(O.isKeyField()){if("array-contains"===L||"array-contains-any"===L)throw new et(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${L}' queries on documentId().`);if("in"===L||"not-in"===L){yw(K,L);const De=[];for(const Ke of K)De.push(X_(D,a,Ke));ue={arrayValue:{values:De}}}else ue=X_(D,a,K)}else"in"!==L&&"not-in"!==L&&"array-contains-any"!==L||yw(K,L),ue=Kp(p,"where",K,"in"===L||"not-in"===L);return Jn.create(O,L,ue)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ql extends q_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ql(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Ir.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let l=s;const p=a.getFlattenedFilters();for(const D of p)vy(l,D),l=Bg(l,D)}(e._query,t),new oo(e.firestore,e.converter,Bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class my extends ef{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new my(e,t)}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new et(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new et(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new bc(a,l);return function(D,O){if(null===Tc(D)){const L=Sc(D);null!==L&&e0(0,L,O.field)}}(s,p),p}(e._query,this._field,this._direction);return new oo(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Cc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class tg extends ef{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new tg(e,t,s)}_apply(e){return new oo(e.firestore,e.converter,Gf(e._query,this._limit,this._limitType))}}class Kc extends ef{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Kc(e,t,s)}_apply(e){const t=yy(e,this.type,this._docOrFields,this._inclusive);return new oo(e.firestore,e.converter,(a=t,new Cc((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class tf extends ef{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new tf(e,t,s)}_apply(e){const t=yy(e,this.type,this._docOrFields,this._inclusive);return new oo(e.firestore,e.converter,(a=t,new Cc((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function yy(n,e,t,s){if(t[0]=(0,Tt.m9)(t[0]),t[0]instanceof Xp)return function(a,l,p,D,O){if(!D)throw new et(Ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const L=[];for(const K of Ac(a))if(K.field.isKeyField())L.push(zu(l,D.key));else{const ue=D.data.field(K.field);if(Ky(ue))throw new et(Ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+K.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ue){const De=K.field.canonicalString();throw new et(Ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${De}' (used as the orderBy) does not exist.`)}L.push(ue)}return new Dc(L,O)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=Qa(n.firestore);return function(l,p,D,O,L,K){const ue=l.explicitOrderBy;if(L.length>ue.length)throw new et(Ne.INVALID_ARGUMENT,`Too many arguments provided to ${O}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const De=[];for(let Ke=0;Ke<L.length;Ke++){const pt=L[Ke];if(ue[Ke].field.isKeyField()){if("string"!=typeof pt)throw new et(Ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${O}(), but got a ${typeof pt}`);if(!Ug(l)&&-1!==pt.indexOf("/"))throw new et(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${O}() must be a plain document ID, but '${pt}' contains a slash.`);const At=l.path.child(I.fromString(pt));if(!te.isDocumentKey(At))throw new et(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${O}() must result in a valid document path, but '${At}' is not because it contains an odd number of segments.`);const zt=new te(At);De.push(zu(p,zt))}else{const At=Kp(D,O,pt);De.push(At)}}return new Dc(De,K)}(n._query,n.firestore._databaseId,a,e,t,s)}}function X_(n,e,t){if("string"==typeof(t=(0,Tt.m9)(t))){if(""===t)throw new et(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ug(e)&&-1!==t.indexOf("/"))throw new et(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(I.fromString(t));if(!te.isDocumentKey(s))throw new et(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return zu(n,new te(s))}if(t instanceof Hr)return zu(n,t._key);throw new et(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jp(t)}.`)}function yw(n,e){if(!Array.isArray(n)||0===n.length)throw new et(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vy(n,e){if(e.isInequality()){const s=Sc(n),a=e.field;if(null!==s&&!s.isEqual(a))throw new et(Ne.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const l=Tc(n);null!==l&&e0(0,a,l)}const t=function(s,a){for(const l of s)for(const p of l.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new et(Ne.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function e0(n,e,t){if(!t.isEqual(e))throw new et(Ne.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class _y{convertValue(e,t="none"){switch(Eu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $t()}}convertObject(e,t){const s={};return dl(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new Yh(fi(e.latitude),fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Rg(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(nh(e));default:return null}}convertTimestamp(e){const t=_u(e);return new E(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=I.fromString(e);Qt(oa(s));const a=new Ec(s.get(1),s.get(3)),l=new te(s.popFirst(5));return a.isEqual(t)||bi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function ng(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class nf extends _y{constructor(e){super(),this.firestore=e}convertBytes(e){return new xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hr(this.firestore,null,t)}}class hu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oc extends Xp{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(eg("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class rf extends oc{data(e={}){return super.data(e)}}class Yc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new hu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new rf(this._firestore,this._userDataWriter,s.key,s,new hu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new et(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new rf(s._firestore,s._userDataWriter,p.doc.key,p.doc,new hu(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const D=new rf(s._firestore,s._userDataWriter,p.doc.key,p.doc,new hu(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let O=-1,L=-1;return 0!==p.type&&(O=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),L=l.indexOf(p.doc.key)),{type:rg(p.type),doc:D,oldIndex:O,newIndex:L}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rg(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t()}}function sf(n,e){return n instanceof oc&&e instanceof oc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Yc&&e instanceof Yc&&n._firestore===e._firestore&&uy(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Qc extends _y{constructor(e){super(),this.firestore=e}convertBytes(e){return new xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hr(this.firestore,null,t)}}function ig(n,e,t){n=qn(n,Hr);const s=qn(n.firestore,ni),a=ng(n.converter,e,t);return Gd(s,[Qh(Qa(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Wt.none())])}function Iy(n,e,t,...s){n=qn(n,Hr);const a=qn(n.firestore,ni),l=Qa(a);let p;return p="string"==typeof(e=(0,Tt.m9)(e))||e instanceof ic?Zp(l,"updateDoc",n._key,e,t,s):hy(l,"updateDoc",n._key,e),Gd(a,[p.toMutation(n._key,Wt.exists(!0))])}function u0(n,...e){var t,s,a;n=(0,Tt.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||Gp(e[p])||(l=e[p],p++);const D={includeMetadataChanges:l.includeMetadataChanges};if(Gp(e[p])){const ue=e[p];e[p]=null===(t=ue.next)||void 0===t?void 0:t.bind(ue),e[p+1]=null===(s=ue.error)||void 0===s?void 0:s.bind(ue),e[p+2]=null===(a=ue.complete)||void 0===a?void 0:a.bind(ue)}let O,L,K;if(n instanceof Hr)L=qn(n.firestore,ni),K=Iu(n._key.path),O={next:ue=>{e[p]&&e[p](Cy(L,n,ue))},error:e[p+1],complete:e[p+2]};else{const ue=qn(n,oo);L=qn(ue.firestore,ni),K=ue._query;const De=new Qc(L);O={next:Ke=>{e[p]&&e[p](new Yc(L,De,ue,Ke))},error:e[p+1],complete:e[p+2]},W_(n._query)}return function(ue,De,Ke,pt){const At=new Wc(pt),zt=new Hh(De,At,Ke);return ue.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Ld(yield jd(ue),zt)})),()=>{At.yc(),ue.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Dp(yield jd(ue),zt)}))}}(ki(L),K,D,O)}function Gd(n,e){return function(t,s){const a=new Ci;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function $E(n,e,t){return Hm.apply(this,arguments)}(yield iy(t),s,a)})),a.promise}(ki(n),e)}function Cy(n,e,t){const s=t.docs.get(e._key),a=new Qc(n);return new oc(n,a,e._key,s,new hu(t.hasPendingWrites,t.fromCache),e.converter)}const f0={maxAttempts:5};class p0{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qa(e)}set(e,t,s){this._verifyNotCommitted();const a=Fi(e,this._firestore),l=ng(a.converter,t,s),p=Qh(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,Wt.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=Fi(e,this._firestore);let p;return p="string"==typeof(t=(0,Tt.m9)(t))||t instanceof ic?Zp(this._dataReader,"WriteBatch.update",l._key,t,s,a):hy(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fi(e,this._firestore);return this._mutations=this._mutations.concat(new bl(t._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new et(Ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fi(n,e){if((n=(0,Tt.m9)(n)).firestore!==e)throw new et(Ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zd extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qa(e)}get(e){const t=Fi(e,this._firestore),s=new nf(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return $t();const l=a[0];if(l.isFoundDocument())return new Xp(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Xp(this._firestore,s,t._key,null,t.converter);throw $t()})}set(e,t,s){const a=Fi(e,this._firestore),l=ng(a.converter,t,s),p=Qh(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=Fi(e,this._firestore);let p;return p="string"==typeof(t=(0,Tt.m9)(t))||t instanceof ic?Zp(this._dataReader,"Transaction.update",l._key,t,s,a):hy(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=Fi(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fi(e,this._firestore),s=new Qc(this._firestore);return super.get(e).then(a=>new oc(this._firestore,s,t._key,a._document,new hu(!1,!1),t.converter))}}function Sy(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new et("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function v0(){if(typeof Uint8Array>"u")throw new et("unimplemented","Uint8Arrays are not available in this environment.")}function _0(){if(!function Jw(){return typeof atob<"u"}())throw new et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){cu=nn.SDK_VERSION,(0,nn._registerComponent)(new Ht.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const l=t.getProvider("app").getImmediate(),p=new ni(new ad(t.getProvider("auth-internal")),new hc(t.getProvider("app-check-internal")),function(D,O){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new et(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(D.options.projectId,O)}(l,s),l);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,nn.registerVersion)(od,"3.10.1",n),(0,nn.registerVersion)(od,"3.10.1","esm2017")}();class Zl{constructor(e){this._delegate=e}static fromBase64String(e){return _0(),new Zl(xu.fromBase64String(e))}static fromUint8Array(e){return v0(),new Zl(xu.fromUint8Array(e))}toBase64(){return _0(),this._delegate.toBase64()}toUint8Array(){return v0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ag(n){return function E0(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(n,["next","error","complete"])}class ug{enableIndexedDbPersistence(e,t){return function tw(n,e){j_(n=qn(n,ni));const t=ki(n);if(t._uninitializedComponentsProvider)throw new et(Ne.FAILED_PRECONDITION,"SDK cache is already specified.");$o("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=n._freezeSettings(),a=new Ud;return U_(t,a,new Fp(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function nw(n){j_(n=qn(n,ni));const e=ki(n);if(e._uninitializedComponentsProvider)throw new et(Ne.FAILED_PRECONDITION,"SDK cache is already specified.");$o("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),s=new Ud;return U_(e,s,new b_(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rw(n){if(n._initialized&&!n._terminated)throw new et(Ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(s){if(!Do.D())return Promise.resolve();const a=s+"main";yield Do.delete(a)}),function(s){return t.apply(this,arguments)})($c(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class cg{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ec||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$o("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function O_(n,e,t,s={}){var a;const l=(n=qn(n,rc))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&$o("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,D;if("string"==typeof s.mockUserToken)p=s.mockUserToken,D=Zi.MOCK_USER;else{p=(0,Tt.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new et(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Zi(O)}n._authCredentials=new xf(new wg(p,D))}}(this._delegate,e,t,s)}enableNetwork(){return function sw(n){return function uI(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield ny(n),t=yield ry(n);return e.setNetworkEnabled(!0),function(s){const a=Rt(s);return a.du.delete(0),Fh(a)}(t)}))}(ki(n=qn(n,ni)))}(this._delegate)}disableNetwork(){return function ow(n){return function cI(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield ny(n),t=yield ry(n);return e.setNetworkEnabled(!1),(s=(0,_e.Z)(function*(a){const l=Rt(a);l.du.add(0),yield Ka(l),l.mu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(ki(n=qn(n,ni)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,x_("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iw(n){return function(e){const t=new Ci;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function m_(n,e){return Ap.apply(this,arguments)}(yield iy(e),t)})),t.promise}(ki(n=qn(n,ni)))}(this._delegate)}onSnapshotsInSync(e){return function _w(n,e){return function YE(n,e){const t=new Wc(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return s=yield jd(n),a=t,Rt(s).Au.add(a),void a.next();var s,a})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return s=yield jd(n),a=t,void Rt(s).Au.delete(a);var s,a}))}}(ki(n=qn(n,ni)),Gp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kl(this,N_(this._delegate,e))}catch(t){throw To(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xa(this,$p(this._delegate,e))}catch(t){throw To(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wo(this,function k_(n,e){if(n=qn(n,rc),ay("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new et(Ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new oo(n,null,(t=e,new Cc(I.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw To(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function bw(n,e,t){n=qn(n,ni);const s=Object.assign(Object.assign({},f0),t);return function(a){if(a.maxAttempts<1)throw new et(Ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,l,p){const D=new Ci;return a.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const O=yield function sy(n){return Bp(n).then(e=>e.datastore)}(a);new ZE(a.asyncQueue,O,p,l,D).run()})),D.promise}(ki(n),a=>e(new zd(n,a)),s)}(this._delegate,t=>e(new I0(this,t)))}batch(){return ki(this._delegate),new xy(new p0(this._delegate,e=>Gd(this._delegate,e)))}loadBundle(e){return function B_(n,e){const t=ki(n=qn(n,ni)),s=new XE;return function QE(n,e,t,s){const a=function(l,p){let D;return D="string"==typeof l?(new TextEncoder).encode(l):l,O=function(O,L){if(O instanceof Uint8Array)return C_(O,L);if(O instanceof ArrayBuffer)return C_(new Uint8Array(O),L);if(O instanceof ReadableStream)return O.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new WE(O,p);var O}(t,jl(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function D_(n,e,t){const s=Rt(n);var a;(a=(0,_e.Z)(function*(l,p,D){try{const O=yield p.getMetadata();if(yield function(De,Ke){const pt=Rt(De),At=Yi(Ke.createTime);return pt.persistence.runTransaction("hasNewerBundle","readonly",zt=>pt.xs.getBundleMetadata(zt,Ke.id)).then(zt=>!!zt&&zt.createTime.compareTo(At)>=0)}(l.localStore,O))return yield p.close(),D._completeWith({taskState:"Success",documentsLoaded:(De=O).totalDocuments,bytesLoaded:De.totalBytes,totalDocuments:De.totalDocuments,totalBytes:De.totalBytes}),Promise.resolve(new Set);D._updateProgress(km(O));const L=new h_(O,l.localStore,p.serializer);let K=yield p._c();for(;K;){const De=yield L.$u(K);De&&D._updateProgress(De),K=yield p._c()}const ue=yield L.complete();return yield nc(l,ue.Bu,void 0),yield function(De,Ke){const pt=Rt(De);return pt.persistence.runTransaction("Save bundle","readwrite",At=>pt.xs.saveBundleMetadata(At,Ke))}(l.localStore,O),D._completeWith(ue.progress),Promise.resolve(ue.Fu)}catch(O){return $o("SyncEngine",`Loading bundle failed with ${O}`),D._failWith(O),Promise.resolve(new Set)}var De}),function(l,p,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield iy(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function uw(n,e){return function S_(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,s){const a=Rt(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.xs.getNamedQuery(l,s))}(yield qh(n),e)}))}(ki(n=qn(n,ni)),e).then(t=>t?new oo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Wo(this,t):null)}}class Ay extends _y{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zl(new xu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xa.forKey(t,this.firestore,null)}}class I0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ay(e)}get(e){const t=Jc(e);return this._delegate.get(t).then(s=>new af(this._firestore,new oc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Jc(e);return s?(Sy("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Jc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Jc(e);return this._delegate.delete(t),this}}class xy{constructor(e){this._delegate=e}set(e,t,s){const a=Jc(e);return s?(Sy("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Jc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Jc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ja{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new rf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dg(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Ja.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new Ja(e,new Ay(e),t),a.set(t,l)),l}}Ja.INSTANCES=new WeakMap;class Xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ay(e)}static forPath(e,t,s){if(e.length%2!=0)throw new et("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xa(t,new Hr(t._delegate,s,new te(e)))}static forKey(e,t,s){return new Xa(t,new Hr(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Kl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kl(this.firestore,N_(this._delegate,e))}catch(t){throw To(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Tt.m9)(e))instanceof Hr&&Hp(this._delegate,e)}set(e,t){t=Sy("DocumentReference.set",t);try{return t?ig(this._delegate,e,t):ig(this._delegate,e)}catch(s){throw To(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Iy(this._delegate,e):Iy(this._delegate,e,t,...s)}catch(a){throw To(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Dy(n){return Gd(qn(n.firestore,ni),[new bl(n._key,Wt.none())])}(this._delegate)}onSnapshot(...e){const t=lg(e),s=Sw(e,a=>new af(this.firestore,new oc(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return u0(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function s0(n){n=qn(n,Hr);const e=qn(n.firestore,ni),t=ki(e),s=new Qc(e);return function lI(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(s=(0,_e.Z)(function*(a,l,p){try{const D=yield function(O,L){const K=Rt(O);return K.persistence.runTransaction("read document","readonly",ue=>K.localDocuments.getDocument(ue,L))}(a,l);D.isFoundDocument()?p.resolve(D):D.isNoDocument()?p.resolve(null):p.reject(new et(Ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const O=Au(D,`Failed to get document '${l} from cache`);p.reject(O)}}),function(a,l,p){return s.apply(this,arguments)})(yield qh(n),e,t);var s})),t.promise}(t,n._key).then(a=>new oc(e,s,n._key,a,new hu(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function o0(n){n=qn(n,Hr);const e=qn(n.firestore,ni);return KE(ki(e),n._key,{source:"server"}).then(t=>Cy(e,n,t))}(this._delegate):function vw(n){n=qn(n,Hr);const e=qn(n.firestore,ni);return KE(ki(e),n._key).then(t=>Cy(e,n,t))}(this._delegate),t.then(s=>new af(this.firestore,new oc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Xa(this.firestore,this._delegate.withConverter(e?Ja.getInstance(this.firestore,e):null))}}function To(n,e,t){return n.message=n.message.replace(e,t),n}function lg(n){for(const e of n)if("object"==typeof e&&!ag(e))return e;return{}}function Sw(n,e){var t,s;let a;return a=ag(n[0])?n[0]:ag(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class af{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sf(this._delegate,e._delegate)}}class dg extends af{data(e){const t=this._delegate.data(e);return function Af(n,e){n||$t()}(void 0!==t),t}}class Wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ay(e)}where(e,t,s){try{return new Wo(this.firestore,Zc(this._delegate,function Z_(n,e,t){const s=e,a=eg("where",n);return Hd._create(a,s,t)}(e,t,s)))}catch(a){throw To(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Wo(this.firestore,Zc(this._delegate,function pw(n,e="asc"){const t=e,s=eg("orderBy",n);return my._create(s,t)}(e,t)))}catch(s){throw To(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wo(this.firestore,Zc(this._delegate,function gw(n){return R_("limit",n),tg._create("limit",n,"F")}(e)))}catch(t){throw To(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Wo(this.firestore,Zc(this._delegate,function mw(n){return R_("limitToLast",n),tg._create("limitToLast",n,"L")}(e)))}catch(t){throw To(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Wo(this.firestore,Zc(this._delegate,function K_(...n){return Kc._create("startAt",n,!0)}(...e)))}catch(t){throw To(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Wo(this.firestore,Zc(this._delegate,function Y_(...n){return Kc._create("startAfter",n,!1)}(...e)))}catch(t){throw To(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Wo(this.firestore,Zc(this._delegate,function Q_(...n){return tf._create("endBefore",n,!1)}(...e)))}catch(t){throw To(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Wo(this.firestore,Zc(this._delegate,function J_(...n){return tf._create("endAt",n,!0)}(...e)))}catch(t){throw To(t,"endAt()","Query.endAt()")}}isEqual(e){return uy(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function a0(n){n=qn(n,oo);const e=qn(n.firestore,ni),t=ki(e),s=new Qc(e);return function T_(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(s=(0,_e.Z)(function*(a,l,p){try{const D=yield up(a,l,!0),O=new Vm(l,D.Wi),L=O.zu(D.documents),K=O.applyChanges(L,!1);p.resolve(K.snapshot)}catch(D){const O=Au(D,`Failed to execute query '${l} against cache`);p.reject(O)}}),function(a,l,p){return s.apply(this,arguments)})(yield qh(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Yc(e,s,n,a))}(this._delegate):"server"===e?.source?function wy(n){n=qn(n,oo);const e=qn(n.firestore,ni),t=ki(e),s=new Qc(e);return Zh(t,n._query,{source:"server"}).then(a=>new Yc(e,s,n,a))}(this._delegate):function Ey(n){n=qn(n,oo);const e=qn(n.firestore,ni),t=ki(e),s=new Qc(e);return W_(n._query),Zh(t,n._query).then(a=>new Yc(e,s,n,a))}(this._delegate),t.then(s=>new My(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=lg(e),s=Sw(e,a=>new My(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return u0(this._delegate,t,s)}withConverter(e){return new Wo(this.firestore,this._delegate.withConverter(e?Ja.getInstance(this.firestore,e):null))}}class Aw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new dg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class My{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Aw(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new dg(this._firestore,s))})}isEqual(e){return sf(this._delegate,e._delegate)}}class Kl extends Wo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xa(this.firestore,e):null}doc(e){try{return new Xa(this.firestore,void 0===e?$p(this._delegate):$p(this._delegate,e))}catch(t){throw To(t,"doc()","CollectionReference.doc()")}}add(e){return function by(n,e){const t=qn(n.firestore,ni),s=$p(n),a=ng(n.converter,e);return Gd(t,[Qh(Qa(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,Wt.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Xa(this.firestore,t))}isEqual(e){return Hp(this._delegate,e._delegate)}withConverter(e){return new Kl(this.firestore,this._delegate.withConverter(e?Ja.getInstance(this.firestore,e):null))}}function Jc(n){return qn(n,Hr)}class Ry{constructor(...e){this._delegate=new ic(...e)}static documentId(){return new Ry(q.keyField().canonicalString())}isEqual(e){return(e=(0,Tt.m9)(e))instanceof ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yI(){return new qp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xc(e)}static delete(){const e=function Cw(){return new Jh("deleteField")}();return e._methodName="FieldValue.delete",new Xc(e)}static arrayUnion(...e){const t=function vI(...n){return new ly("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xc(t)}static arrayRemove(...e){const t=function g0(...n){return new hw("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xc(t)}static increment(e){const t=function m0(n){return new dy("increment",n)}(e);return t._methodName="FieldValue.increment",new Xc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const D0={Firestore:cg,GeoPoint:Yh,Timestamp:E,Blob:Zl,Transaction:I0,WriteBatch:xy,DocumentReference:Xa,DocumentSnapshot:af,Query:Wo,QueryDocumentSnapshot:dg,QuerySnapshot:My,CollectionReference:Kl,FieldPath:Ry,FieldValue:Xc,setLogLevel:function w0(n){!function Sf(n){ti.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function C0(n,e){return function b0(n,e=Ko.z){return new ve.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(n,e)}function hg(n,e){return C0(n,e).pipe((0,ie.U)(t=>({payload:t,type:"query"})))}function uf(n,e){return hg(n,e).pipe((0,$i.O)(void 0),Hs(),(0,ie.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,D)=>{const O=a.find(K=>K.doc.ref.isEqual(p.ref)),L=t?.payload.docs.find(K=>K.ref.isEqual(p.ref));O&&JSON.stringify(O.doc.metadata)===JSON.stringify(p.metadata)||!O&&L&&JSON.stringify(L.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:p}})}),l}))}function Py(n,e,t){return uf(n,t).pipe((0,xs.R)((s,a)=>function Rw(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function EI(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Oy(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Oy(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Oy(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),function zs(n,e=Gs.y){return n=n??ho,(0,xi.e)((t,s)=>{let a,l=!0;t.subscribe((0,Xi.x)(s,p=>{const D=e(p);(l||!n(a,D))&&(l=!1,a=D,s.next(p))}))})}(),(0,ie.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Oy(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Ny(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Mw(n){(function xw(n,e){n.INTERNAL.registerComponent(new Ht.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},D0)))})(n,(e,t)=>new cg(e,t,new ug)),n.registerVersion("@firebase/firestore-compat","0.3.7")}(fo.Z);class Pw{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=uf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ie.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,$i.O)(void 0),Hs(),(0,ct.h)(([s,a])=>a.length>0||!s),(0,ie.U)(([s,a])=>a),Fe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,xs.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ny(e);return Py(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fe.iC)}valueChanges(e={}){return hg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Fe.iC)}get(e){return(0,be.D)(this.query.get(e)).pipe(Fe.iC)}add(e){return this.ref.add(e)}doc(e){return new Ow(this.ref.doc(e),this.afs)}}class Ow{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=Fw(s,t);return new Pw(a,l,this.afs)}snapshotChanges(){return function T0(n,e){return C0(n,e).pipe((0,$i.O)(void 0),Hs(),(0,ie.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ie.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,be.D)(this.ref.get(e)).pipe(Fe.iC)}}class wI{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?uf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,ct.h)(t=>t.length>0),Fe.iC):uf(this.query,this.afs.schedulers.outsideAngular).pipe(Fe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,xs.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ny(e);return Py(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fe.iC)}valueChanges(e={}){return hg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Fe.iC)}get(e){return(0,be.D)(this.query.get(e)).pipe(Fe.iC)}}const Nw=new m.OlP("angularfire2.enableFirestorePersistence"),kw=new m.OlP("angularfire2.firestore.persistenceSettings"),II=new m.OlP("angularfire2.firestore.settings"),DI=new m.OlP("angularfire2.firestore.use-emulator");function Fw(n,e=(t=>t)){return{query:e(n),ref:n}}let cf=(()=>{class n{constructor(t,s,a,l,p,D,O,L,K,ue,De,Ke,pt,At,zt,Bn,Sr){this.schedulers=O;const Dn=(0,H.on)(t,D,s),jn=K;ue&&la(Dn,D,De,pt,At,zt,Ke,Bn),[this.firestore,this.persistenceEnabled$]=(0,H.cc)(`${Dn.name}.firestore`,"AngularFirestore",Dn.name,()=>{const $n=D.runOutsideAngular(()=>Dn.firestore());if(l&&$n.settings(l),jn&&$n.useEmulator(...jn),a&&!(0,Be.PM)(p)){const nr=()=>{try{return(0,be.D)($n.enablePersistence(L||void 0).then(()=>!0,()=>!1))}catch(qo){return typeof console<"u"&&console.warn(qo),(0,fe.of)(!1)}};return[$n,D.runOutsideAngular(nr)]}return[$n,(0,fe.of)(!1)]},[l,jn,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=Fw(a,s),D=this.schedulers.ngZone.run(()=>l);return new Pw(D,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new wI(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new Ow(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(H.Dh),m.LFG(H.xv,8),m.LFG(Nw,8),m.LFG(II,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Fe.HU),m.LFG(kw,8),m.LFG(DI,8),m.LFG(js,8),m.LFG(ka,8),m.LFG(Ro,8),m.LFG(Bs,8),m.LFG(Po,8),m.LFG(ji,8),m.LFG(kr,8),m.LFG(Ss,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bI=(()=>{class n{constructor(){lo.Z.registerVersion("angularfire",Fe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Nw,useValue:!0},{provide:kw,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[cf]}),n})();var Xn=B(433);const Wd={production:!0,firebaseConfig:{apiKey:"AIzaSyC18SYhiI6FJ8ngA0EmXAbXl07rnUXHMKA",authDomain:"exam-project-46928.firebaseapp.com",projectId:"exam-project-46928",storageBucket:"exam-project-46928.appspot.com",messagingSenderId:"1062978260998",appId:"1:1062978260998:web:ee6a68f6b26523862bf387"}};var S0=B(8395),Qi=B(2435),CI=B(8277),fg=B(1135);class So{constructor(e,t,s,a){this.afs=e,this.afAuth=t,this.router=s,this.ngZone=a,this.user$=new fg.X(null),this.loggedIn$=new fg.X(!1),this.afAuth.authState.subscribe(l=>{l?(this.userData=l,this.user$.next(l),this.loggedIn$.next(!0),localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(this.loggedIn$.next(!1),localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(s=>{this.SetUserData(s.user),this.afAuth.authState.subscribe(a=>{a&&(this.loggedIn$.next(!0),this.router.navigate(["dashboard"]))})}).catch(s=>{window.alert(s.message)})}SignUp(e,t,s){return this.afAuth.createUserWithEmailAndPassword(e,t).then(a=>{this.SendVerificationMail(),this.afAuth.currentUser.then(l=>{l?.updateProfile({displayName:s}),this.SetUserData(a.user)})}).catch(a=>{window.alert(a.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.loggedIn$.next(!0),this.router.navigate(["payment"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}GoogleAuth(){return this.AuthLogin(new CI.V).then(e=>{this.loggedIn$.next(!0),this.router.navigate(["/dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.loggedIn$.next(!0),this.router.navigate(["/dashboard"]),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.loggedIn$.next(!1),this.router.navigate(["login"])})}}So.\u0275fac=function(e){return new(e||So)(m.LFG(cf),m.LFG(js),m.LFG(Qi.F0),m.LFG(m.R0b))},So.\u0275prov=m.Yz7({token:So,factory:So.\u0275fac,providedIn:"root"});class lf{constructor(e,t,s){this.templateRef=e,this.auth=t,this.viewContainer=s}ngOnInit(){this.auth.loggedIn$.subscribe(e=>{e&&this.isLogged||!e&&!this.isLogged?(this.viewContainer.clear(),this.el=this.viewContainer.createEmbeddedView(this.templateRef)):this.viewContainer.clear()})}ngOnDestroy(){this.viewContainer.clear()}}lf.\u0275fac=function(e){return new(e||lf)(m.Y36(m.Rgc),m.Y36(So),m.Y36(m.s_b))},lf.\u0275dir=m.lG2({type:lf,selectors:[["","isLogged",""]],inputs:{isLogged:"isLogged"}});const A0=function(){return["/dashboard"]},TI=function(){return{exact:!0}};function SI(n,e){1&n&&(m.TgZ(0,"li")(1,"a",11),m._uU(2," Dashboard "),m.qZA()()),2&n&&(m.xp6(1),m.Q6J("routerLink",m.DdM(2,A0))("routerLinkActiveOptions",m.DdM(3,TI)))}function Lw(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"li")(1,"button",12),m.NdJ("click",function(){m.CHM(t);const a=m.oxw();return m.KtG(a.logout())}),m._uU(2," Log out "),m.qZA()()}}class df{constructor(e,t){this.auth=e,this.router=t}logout(){this.auth.SignOut(),this.router.navigate(["login"])}}df.\u0275fac=function(e){return new(e||df)(m.Y36(So),m.Y36(Qi.F0))},df.\u0275cmp=m.Xpm({type:df,selectors:[["app-navbar"]],decls:13,vars:2,consts:[[1,"border-gray-200","px-2","sm:px-4","py-2.5","bg-primary"],[1,"container","flex","flex-wrap","items-center","justify-between","mx-auto"],["routerLink","/",1,"flex","items-center"],["src","/assets/images/logo.png","alt","EXA Logo",1,"h-28","sm:h-9"],["data-collapse-toggle","navbar-default","type","button","aria-controls","navbar-default","aria-expanded","false",1,"inline-flex","items-center","p-2","ml-3","text-sm","rounded-lg","md:hidden","focus:outline-none","focus:ring-2","focus:ring-gray-200","text-gray-400","hover:bg-gray-700","focus:ring-gray-600"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["fill-rule","evenodd","d","M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule","evenodd"],["id","navbar-default",1,"hidden","w-full","md:block","md:w-auto"],[1,"flex","flex-col","border","md:flex-row","md:space-x-8","md:mt-0","md:text-sm","md:font-medium","md:border-0"],[4,"isLogged"],["routerLinkActive","active",1,"block","py-2","pl-3","pr-4","rounded","md:border-0","md:p-0","text-gray-400","md:hover:text-white","hover:bg-gray-700","hover:text-white","md:hover:bg-transparent",3,"routerLink","routerLinkActiveOptions"],[1,"block","py-2","pl-3","pr-4","rounded","md:border-0","md:p-0","text-gray-400","md:hover:text-white","hover:bg-gray-700","hover:text-white","md:hover:bg-transparent",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),m._UZ(3,"img",3),m.qZA(),m.TgZ(4,"button",4)(5,"span",5),m._uU(6,"Open main menu"),m.qZA(),m.O4$(),m.TgZ(7,"svg",6),m._UZ(8,"path",7),m.qZA()(),m.kcU(),m.TgZ(9,"div",8)(10,"ul",9),m.YNc(11,SI,3,4,"li",10),m.YNc(12,Lw,3,0,"li",10),m.qZA()()()()),2&e&&(m.xp6(11),m.Q6J("isLogged",!0),m.xp6(1),m.Q6J("isLogged",!0))},dependencies:[Qi.rH,Qi.Od,lf],styles:[".active[_ngcontent-%COMP%]{font-weight:700;color:#fff}"]});class hf{}hf.\u0275fac=function(e){return new(e||hf)},hf.\u0275cmp=m.Xpm({type:hf,selectors:[["app-main"]],ngContentSelectors:["*"],decls:2,vars:0,template:function(e,t){1&e&&(m.F$t(),m._UZ(0,"app-navbar"),m.Hsn(1))},dependencies:[df]});class gg{constructor(){this.title="exam"}}function AI(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"form",5)(1,"div",6)(2,"label",7),m._uU(3,"E-mail"),m.qZA(),m._UZ(4,"input",8),m.qZA(),m.TgZ(5,"div",9)(6,"button",10),m.NdJ("click",function(){m.CHM(t);const a=m.oxw();return m.KtG(a.forgetPass())}),m._uU(7," Recuperar palavra-passe "),m.qZA()()()}}function xI(n,e){1&n&&(m.TgZ(0,"form",5)(1,"div",6)(2,"label",11),m._uU(3,"Nova palavra-passe"),m.qZA(),m._UZ(4,"input",12),m.qZA(),m.TgZ(5,"div",6)(6,"label",11),m._uU(7," Repete a tua nova palavra-passe "),m.qZA(),m._UZ(8,"input",13),m.qZA(),m.TgZ(9,"div",9)(10,"button",14),m._uU(11," Guardar "),m.qZA()()())}gg.\u0275fac=function(e){return new(e||gg)},gg.\u0275cmp=m.Xpm({type:gg,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(m.TgZ(0,"app-main"),m._UZ(1,"router-outlet"),m.qZA())},dependencies:[Qi.lC,hf]});class ff{constructor(){this.step=1}forgetPass(){this.step=2}}ff.\u0275fac=function(e){return new(e||ff)},ff.\u0275cmp=m.Xpm({type:ff,selectors:[["app-forget-pass"]],decls:7,vars:2,consts:[[1,"py-20","container"],["src","/assets/images/aww.png",1,"h-48","mx-auto","-mb-2"],[1,"max-w-2xl","bg-[#F2F2F2]","shadow-2xl","py-6","mx-auto"],["src","/assets/images/tlogo.png",1,"h-20","mx-auto","mb-6"],["class","max-w-[80%] mx-auto mb-20",4,"ngIf"],[1,"max-w-[80%]","mx-auto","mb-20"],[1,"flex","flex-col","mb-6"],["for","email",1,"font-bold","text-lg"],["type","email","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","justify-center"],["type","button",1,"button","text-xl",3,"click"],["for","password",1,"font-bold","text-lg"],["type","password","placeholder","Nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","password","placeholder","Repete a tua nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","button","routerLink","/dashboard",1,"button","text-xl"]],template:function(e,t){1&e&&(m.TgZ(0,"section")(1,"div",0),m._UZ(2,"img",1),m.TgZ(3,"div",2),m._UZ(4,"img",3),m.YNc(5,AI,8,0,"form",4),m.YNc(6,xI,12,0,"form",4),m.qZA()()()),2&e&&(m.xp6(5),m.Q6J("ngIf",1===t.step),m.xp6(1),m.Q6J("ngIf",2===t.step))},dependencies:[Be.O5,Xn._Y,Xn.JL,Xn.F,Qi.rH]});class pf{constructor(e,t,s){this.router=e,this.auth=t,this.fb=s,this.isLoading=!1,this.form=this.fb.group({username:[""],password:[""]})}login(){const{username:e,password:t}=this.form.value;this.isLoading=!0,this.auth.SignIn(e,t).then(s=>{this.isLoading=!1})}}pf.\u0275fac=function(e){return new(e||pf)(m.Y36(Qi.F0),m.Y36(So),m.Y36(Xn.qu))},pf.\u0275cmp=m.Xpm({type:pf,selectors:[["app-login"]],decls:25,vars:3,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg","pt-3"],["type","email","formControlName","username","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],[1,"mb-6","flex","flex-col"],["for","password",1,"font-bold","text-lg"],["type","password","formControlName","password","placeholder","Password",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","items-center","justify-between","mb-10"],[1,"button","text-xl",3,"disabled","click"],["routerLink","/register",1,"mb-4"],[1,"underline","text-blue-500"],["routerLink","/forget-password"],[1,"right-bg"],["src","/assets/images/login-bg.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),m._uU(3,"Log-in"),m.qZA(),m.TgZ(4,"form",3)(5,"div",4)(6,"label",5),m._uU(7,"E-mail"),m.qZA(),m._UZ(8,"input",6),m.qZA(),m.TgZ(9,"div",7)(10,"label",8),m._uU(11,"Password"),m.qZA(),m._UZ(12,"input",9),m.qZA(),m.TgZ(13,"div",10)(14,"button",11),m.NdJ("click",function(){return t.login()}),m._uU(15),m.qZA()()(),m.TgZ(16,"a",12)(17,"p",13),m._uU(18,"Ainda n\xe3o tens conta? Cria agora"),m.qZA()(),m.TgZ(19,"a",14)(20,"p",13),m._uU(21,"Esqueci-me da palavra-passe"),m.qZA()()(),m._UZ(22,"div"),m.qZA(),m.TgZ(23,"div",15),m._UZ(24,"img",16),m.qZA()),2&e&&(m.xp6(4),m.Q6J("formGroup",t.form),m.xp6(10),m.Q6J("disabled",!t.form.valid||t.isLoading),m.xp6(1),m.hij(" ",t.isLoading?"Loading...":"Keep"," "))},dependencies:[Xn._Y,Xn.Fj,Xn.JJ,Xn.JL,Xn.sg,Xn.u,Qi.rH]});class gf{constructor(e,t,s){this.router=e,this.auth=t,this.fb=s,this.isLoading=!1,this.form=this.fb.group({name:[""],username:[""],password:[""]}),console.log(Wd),Wd.production||this.form.setValue({name:"test",username:"aib.tmkm@gmail.com",password:"123456"})}login(){this.isLoading=!0;const{username:e,password:t,name:s}=this.form.value;this.auth.SignUp(e,t,s).then(()=>{this.isLoading=!1}).catch(()=>{this.isLoading=!1})}}gf.\u0275fac=function(e){return new(e||gf)(m.Y36(Qi.F0),m.Y36(So),m.Y36(Xn.qu))},gf.\u0275cmp=m.Xpm({type:gf,selectors:[["app-register"]],decls:31,vars:3,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full","flex","flex-col","mb-6",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg"],["type","text","formControlName","name","placeholder","Enter Your Name",1,"border","border-[#4472c4]","p-2","w-full"],["type","email","formControlName","username","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],["for","password",1,"font-bold","text-lg"],["type","password","formControlName","password","placeholder","Nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","password","placeholder","Repete a tua nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","mb-10"],[1,"button",3,"disabled","click"],["routerLink","/login"],[1,"underline","text-blue-500"],[1,"right-bg"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(m.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1",2),m._uU(4,"My personal data"),m.qZA(),m.TgZ(5,"form",3)(6,"div",4)(7,"label",5),m._uU(8,"Name"),m.qZA(),m._UZ(9,"input",6),m.qZA(),m.TgZ(10,"div",4)(11,"label",5),m._uU(12,"E-mail"),m.qZA(),m._UZ(13,"input",7),m.qZA(),m.TgZ(14,"div",4)(15,"label",8),m._uU(16,"Nova palavra-passe"),m.qZA(),m._UZ(17,"input",9),m.qZA(),m.TgZ(18,"div",4)(19,"label",8),m._uU(20," Repete a tua nova palavra-passe "),m.qZA(),m._UZ(21,"input",10),m.qZA()(),m.TgZ(22,"div",11)(23,"button",12),m.NdJ("click",function(){return t.login()}),m._uU(24),m.qZA()(),m.TgZ(25,"a",13)(26,"p",14),m._uU(27,"Already have an account? Log in"),m.qZA()()(),m._UZ(28,"div"),m.qZA(),m.TgZ(29,"div",15),m._UZ(30,"img",16),m.qZA()()),2&e&&(m.xp6(5),m.Q6J("formGroup",t.form),m.xp6(18),m.Q6J("disabled",t.isLoading),m.xp6(1),m.hij(" ",t.isLoading?"Loading...":"Continue"," "))},dependencies:[Xn._Y,Xn.Fj,Xn.JJ,Xn.JL,Xn.sg,Xn.u,Qi.rH]});class Yl{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.loggedIn$.pipe((0,ie.U)(s=>(console.log(s),!s||(this.router.navigate(["dashboard"]),!1))))}}Yl.\u0275fac=function(e){return new(e||Yl)(m.LFG(So),m.LFG(Qi.F0))},Yl.\u0275prov=m.Yz7({token:Yl,factory:Yl.\u0275fac,providedIn:"root"});const Vw=function(n){return{"box-active":n}};function x0(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",9),m.NdJ("click",function(){const l=m.CHM(t).index,p=m.oxw(2);return m.KtG(p.selectCard(l))}),m._UZ(1,"img",10),m.TgZ(2,"strong"),m._uU(3),m.qZA()()}if(2&n){const t=e.$implicit;m.Q6J("ngClass",m.VKq(3,Vw,t.selected)),m.xp6(1),m.Q6J("src",t.icon,m.LSH),m.xp6(2),m.hij(" ",t.name," ")}}const M0=function(){return{isExisting:!0}};function MI(n,e){if(1&n&&(m.TgZ(0,"section")(1,"div",1)(2,"div",2)(3,"h1",3),m._uU(4),m.qZA(),m.TgZ(5,"p",4),m._uU(6,"ESCOLHE A(S) TUA(S) DISCIPLINAS"),m.qZA()(),m.TgZ(7,"div",5),m.YNc(8,x0,4,5,"div",6),m.qZA(),m.TgZ(9,"div",7)(10,"button",8),m._uU(11," Come\xe7ar "),m.qZA()()()()),2&n){const t=m.oxw();m.xp6(4),m.hij(" Bem-vindo ao EXA, (",null==t.user?null:t.user.displayName,") "),m.xp6(4),m.Q6J("ngForOf",t.cards),m.xp6(2),m.Q6J("queryParams",m.DdM(3,M0))}}function fu(n,e){if(1&n&&(m.TgZ(0,"option",28),m._uU(1),m.qZA()),2&n){const t=e.$implicit;m.Q6J("value",t.name),m.xp6(1),m.hij(" ",t.name," ")}}function Uw(n,e){if(1&n&&(m.TgZ(0,"section")(1,"div",11)(2,"div",12)(3,"h1",13),m._uU(4,"Ol\xe1, (User name)"),m.qZA(),m.TgZ(5,"h4",14),m._uU(6,"Que exames queres praticar hoje?"),m.qZA(),m.TgZ(7,"select",15),m.YNc(8,fu,2,2,"option",16),m.qZA()()(),m.TgZ(9,"div",17)(10,"div",18)(11,"div",19)(12,"h2",20),m._uU(13,"O meu perfil"),m.qZA(),m._UZ(14,"img",21),m.TgZ(15,"button",22),m._uU(16," Alterar dados "),m.qZA()(),m.TgZ(17,"div",19)(18,"h2",23),m._uU(19," Praticar escolhas m\xfaltiplas "),m.qZA(),m._UZ(20,"img",24),m.TgZ(21,"button",25),m._uU(22," Come\xe7ar "),m.qZA()(),m.TgZ(23,"div",19)(24,"h2",26),m._uU(25," Fazer "),m._UZ(26,"br"),m._uU(27," um exame "),m.qZA(),m._UZ(28,"img",24),m.TgZ(29,"button",27),m._uU(30," Escolher exame "),m.qZA()()()()()),2&n){const t=m.oxw();m.xp6(8),m.Q6J("ngForOf",t.cards)}}class Ql{constructor(e,t){this.route=e,this.auth=t,this.isExisting=!0,this.cards=[{name:"Portugu\xeas",icon:"/assets/images/subjects/1.png",selected:!1},{name:"Matem\xe1tica A",icon:"/assets/images/subjects/2.png",selected:!1},{name:"Hist\xf3ria",icon:"/assets/images/subjects/3.png",selected:!1},{name:"Biologia e Geologia",icon:"/assets/images/subjects/4.png",selected:!1},{name:"Geografia",icon:"/assets/images/subjects/5.png",selected:!1},{name:"Filosofia",icon:"/assets/images/subjects/6.png",selected:!1},{name:"Economia A",icon:"/assets/images/subjects/7.png",selected:!1},{name:"F\xedsica e Qu\xedmica A",icon:"/assets/images/subjects/8.png",selected:!1}],this.user=null}ngOnInit(){this.auth.user$.subscribe(e=>{this.user=e}),this.route.queryParams.subscribe(e=>{this.isExisting="true"===e.isExisting})}selectCard(e){this.cards[e].selected=!this.cards[e].selected}}Ql.\u0275fac=function(e){return new(e||Ql)(m.Y36(Qi.gz),m.Y36(So))},Ql.\u0275cmp=m.Xpm({type:Ql,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container"],[1,"text-center","py-10"],[1,"text-4xl","font-bold","mb-2"],[1,"text-[#6A99D0]","font-medium"],[1,"grid","grid-cols-4","gap-6","mb-10","max-w-2xl","mx-auto"],["class","p-6 bg-[#F2F2F2] text-center border-[2px] cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-center"],["routerLink","/dashboard",1,"button",3,"queryParams"],[1,"p-6","bg-[#F2F2F2]","text-center","border-[2px]","cursor-pointer",3,"ngClass","click"],[1,"mx-auto","max-h-12","mb-4",3,"src"],[1,"bg-[#deebf7]","h-52"],[1,"container","flex","flex-col","items-center","py-10"],[1,"text-5xl","font-bold","mb-2"],[1,"text-lg","font-bold","mb-4"],[1,"py-2","px-6","shadow-md"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-white","pt-9","container"],[1,"flex","items-stretch","justify-center","gap-10"],[1,"d-card"],[1,"text-2xl","font-bold","pb-4"],["src","/assets/images/hi-img.png","alt","hi-img"],["routerLink","/edit-profile",1,"bg-[#00216e]","text-white","font-semibold","py-4","px-8","rounded-2xl"],[1,"text-2xl","font-bold","pb-4","text-[#4472c4]"],["src","/assets/images/pc-1.png","alt","pc-1",1,"pb-4","pl-5"],[1,"bg-[#4472c4]","text-white","font-semibold","py-4","px-12","rounded-2xl"],[1,"text-2xl","font-bold","pb-4","text-[#70ad47]"],["routerLink","/exam/choose",1,"bg-[#70ad47]","text-white","font-semibold","py-4","px-8","rounded-2xl"],[3,"value"]],template:function(e,t){1&e&&(m.YNc(0,MI,12,4,"section",0),m.YNc(1,Uw,31,1,"section",0)),2&e&&(m.Q6J("ngIf",!t.isExisting),m.xp6(1),m.Q6J("ngIf",t.isExisting))},dependencies:[Be.mk,Be.sg,Be.O5,Xn.YN,Xn.Kr,Qi.rH],styles:[".d-card[_ngcontent-%COMP%]{flex:1 1 0%;--tw-bg-opacity: 1;background-color:rgb(242 242 242 / var(--tw-bg-opacity));padding:1.5rem 5rem;--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);display:flex;flex-direction:column;justify-content:space-between;align-items:center;gap:1rem}.d-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;object-fit:contain}.d-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.box-active[_ngcontent-%COMP%]{border:2px solid #4f71be}"]});const Bw=function(){return{isExisting:!0}},RI=function(){return{change:!0}};class Ao{constructor(e,t,s){this.router=e,this.auth=t,this.fb=s,this.isLoading=!1,this.form=this.fb.group({name:[""],username:[""]})}login(){this.isLoading=!0;const{username:e,password:t,name:s}=this.form.value;this.auth.SignUp(e,t,s).then(()=>{this.router.navigate(["dashboard"]),this.isLoading=!1}).catch(()=>{this.isLoading=!1})}}function jw(n,e){if(1&n&&(m.TgZ(0,"div",10)(1,"h1",11),m._uU(2," My current subscription "),m.qZA(),m.TgZ(3,"form",12)(4,"div",13)(5,"label",14),m._uU(6," Selected plan "),m.qZA(),m._UZ(7,"input",15),m.qZA(),m.TgZ(8,"div",13)(9,"label",16),m._uU(10," In use since "),m.qZA(),m._UZ(11,"input",17),m.qZA(),m.TgZ(12,"div",18)(13,"label",16),m._uU(14," Expires in "),m.qZA(),m._UZ(15,"input",19),m.qZA()(),m.TgZ(16,"div",20)(17,"a",21),m._uU(18," Cancel and go back "),m.qZA()()()),2&n){const t=m.oxw(2);m.xp6(7),m.cQ8("value","",t.packages[t.selectedPackage].price," ",t.packages[t.selectedPackage].name," ",t.packages[t.selectedPackage].desc,"")}}function ky(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",22)(1,"div",23),m.NdJ("click",function(){const l=m.CHM(t).index,p=m.oxw(2);return m.KtG(p.selectPackage(l))}),m.TgZ(2,"span"),m._uU(3," \u2713 "),m.qZA()(),m.TgZ(4,"div",24)(5,"h3",25),m._uU(6),m.qZA(),m.TgZ(7,"p",26),m._uU(8),m.qZA(),m.TgZ(9,"p",27)(10,"del"),m._uU(11),m.qZA()(),m.TgZ(12,"div",28)(13,"button",29),m.NdJ("click",function(){const l=m.CHM(t).index,p=m.oxw(2);return m.KtG(p.selectPackage(l))}),m._uU(14),m.qZA()()()()}if(2&n){const t=e.$implicit;m.xp6(2),m.Gre("font-bold text-4xl group-hover:block ",t.selected?"!block":"hidden",""),m.Udp("color",t.color),m.xp6(3),m.Udp("color",t.color),m.xp6(1),m.hij(" ",t.name," "),m.xp6(2),m.hij(" ",t.desc," "),m.xp6(1),m.Udp("color",t.color),m.xp6(2),m.hij(" ",t.originalPrice," "),m.xp6(2),m.Udp("background-color",t.color),m.xp6(1),m.hij(" ",t.price," ")}}Ao.\u0275fac=function(e){return new(e||Ao)(m.Y36(Qi.F0),m.Y36(So),m.Y36(Xn.qu))},Ao.\u0275cmp=m.Xpm({type:Ao,selectors:[["app-edit-profile"]],decls:25,vars:7,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full","flex","flex-col","mb-6",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg"],["type","text","formControlName","name","placeholder","Enter Your Name",1,"border","border-[#4472c4]","p-2","w-full"],["type","email","formControlName","username","placeholder","Enter Your E-mail","readonly","",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","mb-10","gap-4"],["routerLink","/dashboard",1,"button","!bg-gray-400",3,"queryParams"],[1,"button",3,"disabled"],[1,"mt-20"],["routerLink","/payment",1,"button","!bg-[#808080]","!rounded-lg","!px-6","!py-3","cursor-pointer","text-2xl","absolute","bottom-5",3,"queryParams"],[1,"right-bg"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(m.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1",2),m._uU(4,"My personal data"),m.qZA(),m.TgZ(5,"form",3)(6,"div",4)(7,"label",5),m._uU(8,"Name"),m.qZA(),m._UZ(9,"input",6),m.qZA(),m.TgZ(10,"div",4)(11,"label",5),m._uU(12,"E-mail"),m.qZA(),m._UZ(13,"input",7),m.qZA()(),m.TgZ(14,"div",8)(15,"button",9),m._uU(16," Go Back "),m.qZA(),m.TgZ(17,"button",10),m._uU(18),m.qZA()(),m.TgZ(19,"div",11)(20,"a",12),m._uU(21," Change current plan "),m.qZA()()(),m._UZ(22,"div"),m.qZA(),m.TgZ(23,"div",13),m._UZ(24,"img",14),m.qZA()()),2&e&&(m.xp6(5),m.Q6J("formGroup",t.form),m.xp6(10),m.Q6J("queryParams",m.DdM(5,Bw)),m.xp6(2),m.Q6J("disabled",t.isLoading),m.xp6(1),m.hij(" ",t.isLoading?"Loading...":"Save"," "),m.xp6(2),m.Q6J("queryParams",m.DdM(6,RI)))},dependencies:[Xn._Y,Xn.Fj,Xn.JJ,Xn.JL,Xn.sg,Xn.u,Qi.rH],styles:["input[readonly][_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #f5f5f5;cursor:not-allowed}"]});const R0=function(){return{step:2}};function $w(n,e){1&n&&(m.TgZ(0,"div",30)(1,"button",31),m._uU(2," Continue "),m.qZA()()),2&n&&(m.xp6(1),m.Q6J("queryParams",m.DdM(1,R0)))}const Fy=function(){return{step:3}};function P0(n,e){1&n&&(m.TgZ(0,"div",32)(1,"button",33),m._uU(2," Pay new subscription "),m.qZA(),m.TgZ(3,"button",34),m._uU(4," Cancel my subscription "),m.qZA()()),2&n&&(m.xp6(1),m.Q6J("queryParams",m.DdM(2,R0)),m.xp6(2),m.Q6J("queryParams",m.DdM(3,Fy)))}function O0(n,e){if(1&n&&(m.TgZ(0,"section")(1,"div",1),m.YNc(2,jw,19,3,"div",2),m.TgZ(3,"div",3)(4,"h1",4),m._uU(5,"Pick your plan"),m.qZA(),m.TgZ(6,"div",5),m.YNc(7,ky,15,15,"div",6),m.qZA(),m.TgZ(8,"p",7),m._uU(9," * Oferta limitada aos primeiros 1,000 alunos a efetuar registo no EXA "),m.qZA(),m.YNc(10,$w,3,2,"div",8),m.YNc(11,P0,5,4,"div",9),m.qZA()()()),2&n){const t=m.oxw();m.xp6(2),m.Q6J("ngIf",t.isChange),m.xp6(5),m.Q6J("ngForOf",t.packages),m.xp6(3),m.Q6J("ngIf",!t.isChange),m.xp6(1),m.Q6J("ngIf",t.isChange)}}function Hw(n,e){if(1&n&&(m.TgZ(0,"option",45),m._uU(1),m.qZA()),2&n){const t=e.$implicit;m.Q6J("value",e.index),m.xp6(1),m.lnq(" ",t.price," ",t.name," ",t.desc," ")}}function N0(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"section")(1,"div",35)(2,"div",36)(3,"h1",37),m._uU(4,"Pagamento"),m.qZA(),m.TgZ(5,"form",12)(6,"div",13)(7,"label",14),m._uU(8,"Plano selecionado "),m.qZA(),m.TgZ(9,"select",38),m.NdJ("ngModelChange",function(a){m.CHM(t);const l=m.oxw();return m.KtG(l.selectedPackage=a)}),m.YNc(10,Hw,2,4,"option",39),m.qZA()()(),m.TgZ(11,"div",40)(12,"button",41),m._uU(13," Pay "),m.qZA()(),m.TgZ(14,"p",42),m._uU(15," * Oferta limitada aos primeiros 1,000 alunos a efetuar registo no EXA "),m.qZA()(),m._UZ(16,"div"),m.qZA(),m.TgZ(17,"div",43),m._UZ(18,"img",44),m.qZA()()}if(2&n){const t=m.oxw();m.xp6(9),m.Q6J("ngModel",t.selectedPackage),m.xp6(1),m.Q6J("ngForOf",t.packages)}}const k0=function(){return{change:!0}};function Gw(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"section")(1,"div",46),m._UZ(2,"img",47),m.TgZ(3,"div",48),m._UZ(4,"img",49),m.TgZ(5,"div",50)(6,"h2",51),m._uU(7," Are you sure you want to cancel your subscription? "),m.qZA(),m.TgZ(8,"div",32)(9,"button",52),m.NdJ("click",function(){m.CHM(t);const a=m.oxw();return m.KtG(a.cancelSubscription())}),m._uU(10," Yes, Cancel "),m.qZA(),m.TgZ(11,"button",53),m._uU(12," No, Go back "),m.qZA()()()()()()}2&n&&(m.xp6(11),m.Q6J("queryParams",m.DdM(1,k0)))}class qd{constructor(e,t){this.route=e,this.auth=t,this.step=1,this.packages=[{name:"B\xe1sico",desc:"1 Disciplina | 10 Exames | 1 M\xeas",originalPrice:"7,99\u20ac/m\xeas",price:"4,99\u20ac/m\xeas*",color:"#00216e",selected:!0},{name:"Premium",desc:"2 Disciplinas | 20 Exames | 1 Meses",originalPrice:"19,99\u20ac/m\xeas",price:"14,99\u20ac/m\xeas*",color:"#7EAB55",selected:!1},{name:"Oferta limitada",desc:"Todas as Disciplinas | Todos os exames | 1 M\xeas",originalPrice:"29,99\u20ac/m\xeas",price:"24,99\u20ac/m\xeas*",color:"#2254C9",selected:!1}],this.selectedPackage=0,this.isChange=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{console.log(e),this.step=e.step?+e.step:1,e.change&&(this.isChange=!0)})}selectPackage(e){this.selectedPackage=e,this.packages.forEach((t,s)=>{this.packages[s].selected=s===e})}cancelSubscription(){alert("subscription will be canceld and user will be logged out"),console.log("cancel")}}qd.\u0275fac=function(e){return new(e||qd)(m.Y36(Qi.gz),m.Y36(So))},qd.\u0275cmp=m.Xpm({type:qd,selectors:[["app-payment"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"container","gap-10","py-10","lg:flex","justify-center"],["class","mb-10",4,"ngIf"],[1,"max-w-5xl"],[1,"text-4xl","font-bold","text-center","mb-20"],[1,"flex","justify-center","gap-3","mb-12"],["class","flex-1 relative group",4,"ngFor","ngForOf"],[1,"text-sm","text-center","mb-20"],["class","flex items-center justify-center mb-10",4,"ngIf"],["class","flex items-center justify-center mb-10 gap-6",4,"ngIf"],[1,"mb-10"],[1,"text-4xl","font-bold","text-center","mb-6"],[1,"w-full","flex","flex-col","mb-10"],[1,"mb-3","flex","flex-col"],["for","email",1,"font-bold","text-lg"],["type","email","placeholder","Premium (14,99\u20ac/m\xeas*) 2 disciplinas | 20 exames",1,"border","border-[#4472c4]","p-2",3,"value"],["for","password",1,"font-bold","text-lg"],["type","text","placeholder","Data de subscri\xe7\xe3o","value","31-02-2023","readonly","",1,"border","border-[#4472c4]","p-2"],[1,"flex","flex-col"],["readonly","","type","text","placeholder","Data de subscri\xe7\xe3o  + 1 mes","value","Subscription date + 1 month",1,"border","border-[#4472c4]","p-2"],[1,"text-center"],["routerLink","/edit-profile",1,"button","!bg-gray-400","font-bold","cursor-pointer"],[1,"flex-1","relative","group"],[1,"cursor-pointer","flex","items-center","justify-center","w-[50px]","h-[50px]","border-2","border-blue-700","shadow-2xl","bg-white","absolute","right-1/2","top-0","z-10","translate-x-1/2","-translate-y-[90%]",3,"click"],[1,"text-center","shadow-lg","border-2","pt-8","px-6","rounded-[70px]","relative","flex","flex-col","bg-white"],[1,"text-2xl","font-bold"],[1,"mb-4","text-sm","min-h-[40px]"],[1,"font-bold","mb-4"],[1,"flex","justify-center"],[1,"py-2","px-6","font-bold","text-white","rounded-full","-mb-6",3,"click"],[1,"flex","items-center","justify-center","mb-10"],["routerLink","/payment",1,"bg-[#70ad47]","py-2","px-8","text-white","text-xl","font-semibold","rounded-lg",3,"queryParams"],[1,"flex","items-center","justify-center","mb-10","gap-6"],["routerLink","/payment",1,"button","!rounded-lg","!px-6","!py-3","cursor-pointer","font-bold",3,"queryParams"],["routerLink","/payment",1,"button","!bg-red-500","!rounded-lg","!px-6","!py-3","cursor-pointer","font-bold",3,"queryParams"],[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],["name","select-package",1,"border","border-[#4472c4]","p-2",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","mb-10"],["routerLink","/payment",1,"button","!rounded-lg","!px-6","!py-3","cursor-pointer","text-xl","font-bold","min-w-[200px]"],[1,"text-sm","text-center"],[1,"right-bg"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"],[3,"value"],[1,"py-20","container"],["src","/assets/images/aww.png",1,"h-48","mx-auto","-mb-2"],[1,"max-w-2xl","bg-[#F2F2F2]","shadow-2xl","py-10","mx-auto"],["src","/assets/images/tlogo.png",1,"h-20","mx-auto","mb-6"],[1,"px-10","font-bold"],[1,"font-bold","text-4xl","text-center","mb-10"],[1,"button","!bg-red-500",3,"click"],["routerLink","/payment",1,"button","cursor-pointer",3,"queryParams"]],template:function(e,t){1&e&&(m.YNc(0,O0,12,4,"section",0),m.YNc(1,N0,19,2,"section",0),m.YNc(2,Gw,13,2,"section",0)),2&e&&(m.Q6J("ngIf",1===t.step),m.xp6(1),m.Q6J("ngIf",2===t.step),m.xp6(1),m.Q6J("ngIf",3===t.step))},dependencies:[Be.sg,Be.O5,Xn._Y,Xn.YN,Xn.Kr,Xn.EJ,Xn.JJ,Xn.JL,Xn.On,Xn.F,Qi.rH]});class Zd{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["/login"]),!0}}Zd.\u0275fac=function(e){return new(e||Zd)(m.LFG(So),m.LFG(Qi.F0))},Zd.\u0275prov=m.Yz7({token:Zd,factory:Zd.\u0275fac,providedIn:"root"});const Ly=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",canActivate:[Yl],component:pf},{path:"forget-password",canActivate:[Yl],component:ff},{path:"register",canActivate:[Yl],component:gf},{path:"",canActivate:[Zd],children:[{path:"home",redirectTo:"dashboard"},{path:"payment",component:qd},{path:"dashboard",component:Ql},{path:"edit-profile",component:Ao},{path:"exam",loadChildren:()=>B.e(255).then(B.bind(B,3255)).then(n=>n.ExamModule)}]}];class Ma{}Ma.\u0275fac=function(e){return new(e||Ma)},Ma.\u0275mod=m.oAB({type:Ma}),Ma.\u0275inj=m.cJS({imports:[Qi.Bz.forRoot(Ly,{useHash:!0}),Qi.Bz]});class Jl{}Jl.\u0275fac=function(e){return new(e||Jl)},Jl.\u0275mod=m.oAB({type:Jl,bootstrap:[gg]}),Jl.\u0275inj=m.cJS({providers:[So],imports:[S0.m,g.b2,Xn.UX,H.hO.initializeApp(Wd.firebaseConfig),$s,bI,Ma]}),g.q6().bootstrapModule(Jl).catch(n=>console.error(n))},8395:(bt,Me,B)=>{B.d(Me,{m:()=>he});var g=B(6895),H=B(433),m=B(4650);class he{}he.\u0275fac=function(ve){return new(ve||he)},he.\u0275mod=m.oAB({type:he}),he.\u0275inj=m.cJS({imports:[g.ez,H.u5,g.ez,H.u5]})},1135:(bt,Me,B)=>{B.d(Me,{X:()=>H});var g=B(7579);class H extends g.x{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const fe=super._subscribe(he);return!fe.closed&&he.next(this._value),fe}getValue(){const{hasError:he,thrownError:fe,_value:ve}=this;if(he)throw fe;return this._throwIfClosed(),ve}next(he){super.next(this._value=he)}}},9751:(bt,Me,B)=>{B.d(Me,{y:()=>Ie});var g=B(930),H=B(727),m=B(8822),he=B(9635),fe=B(2416),ve=B(576),be=B(2806);let Ie=(()=>{class pe{constructor(He){He&&(this._subscribe=He)}lift(He){const it=new pe;return it.source=this,it.operator=He,it}subscribe(He,it,Ct){const Ue=function ie(pe){return pe&&pe instanceof g.Lv||function ae(pe){return pe&&(0,ve.m)(pe.next)&&(0,ve.m)(pe.error)&&(0,ve.m)(pe.complete)}(pe)&&(0,H.Nn)(pe)}(He)?He:new g.Hp(He,it,Ct);return(0,be.x)(()=>{const{operator:qe,source:Qe}=this;Ue.add(qe?qe.call(Ue,Qe):Qe?this._subscribe(Ue):this._trySubscribe(Ue))}),Ue}_trySubscribe(He){try{return this._subscribe(He)}catch(it){He.error(it)}}forEach(He,it){return new(it=Te(it))((Ct,Ue)=>{const qe=new g.Hp({next:Qe=>{try{He(Qe)}catch(ct){Ue(ct),qe.unsubscribe()}},error:Ue,complete:Ct});this.subscribe(qe)})}_subscribe(He){var it;return null===(it=this.source)||void 0===it?void 0:it.subscribe(He)}[m.L](){return this}pipe(...He){return(0,he.U)(He)(this)}toPromise(He){return new(He=Te(He))((it,Ct)=>{let Ue;this.subscribe(qe=>Ue=qe,qe=>Ct(qe),()=>it(Ue))})}}return pe.create=nt=>new pe(nt),pe})();function Te(pe){var nt;return null!==(nt=pe??fe.v.Promise)&&void 0!==nt?nt:Promise}},7579:(bt,Me,B)=>{B.d(Me,{x:()=>be});var g=B(9751),H=B(727);const he=(0,B(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=B(8737),ve=B(2806);let be=(()=>{class Te extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const pe=new Ie(this,this);return pe.operator=ie,pe}_throwIfClosed(){if(this.closed)throw new he}next(ie){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(ie)}})}error(ie){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:pe}=this;for(;pe.length;)pe.shift().error(ie)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:pe,isStopped:nt,observers:He}=this;return pe||nt?H.Lc:(this.currentObservers=null,He.push(ie),new H.w0(()=>{this.currentObservers=null,(0,fe.P)(He,ie)}))}_checkFinalizedStatuses(ie){const{hasError:pe,thrownError:nt,isStopped:He}=this;pe?ie.error(nt):He&&ie.complete()}asObservable(){const ie=new g.y;return ie.source=this,ie}}return Te.create=(ae,ie)=>new Ie(ae,ie),Te})();class Ie extends be{constructor(ae,ie){super(),this.destination=ae,this.source=ie}next(ae){var ie,pe;null===(pe=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===pe||pe.call(ie,ae)}error(ae){var ie,pe;null===(pe=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===pe||pe.call(ie,ae)}complete(){var ae,ie;null===(ie=null===(ae=this.destination)||void 0===ae?void 0:ae.complete)||void 0===ie||ie.call(ae)}_subscribe(ae){var ie,pe;return null!==(pe=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(ae))&&void 0!==pe?pe:H.Lc}}},930:(bt,Me,B)=>{B.d(Me,{Hp:()=>Ct,Lv:()=>pe});var g=B(576),H=B(727),m=B(2416),he=B(7849),fe=B(5032);const ve=Te("C",void 0,void 0);function Te(Fe,Be,Ge){return{kind:Fe,value:Be,error:Ge}}var ae=B(3410),ie=B(2806);class pe extends H.w0{constructor(Be){super(),this.isStopped=!1,Be?(this.destination=Be,(0,H.Nn)(Be)&&Be.add(this)):this.destination=ct}static create(Be,Ge,lt){return new Ct(Be,Ge,lt)}next(Be){this.isStopped?Qe(function Ie(Fe){return Te("N",Fe,void 0)}(Be),this):this._next(Be)}error(Be){this.isStopped?Qe(function be(Fe){return Te("E",void 0,Fe)}(Be),this):(this.isStopped=!0,this._error(Be))}complete(){this.isStopped?Qe(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Be){this.destination.next(Be)}_error(Be){try{this.destination.error(Be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function He(Fe,Be){return nt.call(Fe,Be)}class it{constructor(Be){this.partialObserver=Be}next(Be){const{partialObserver:Ge}=this;if(Ge.next)try{Ge.next(Be)}catch(lt){Ue(lt)}}error(Be){const{partialObserver:Ge}=this;if(Ge.error)try{Ge.error(Be)}catch(lt){Ue(lt)}else Ue(Be)}complete(){const{partialObserver:Be}=this;if(Be.complete)try{Be.complete()}catch(Ge){Ue(Ge)}}}class Ct extends pe{constructor(Be,Ge,lt){let Ze;if(super(),(0,g.m)(Be)||!Be)Ze={next:Be??void 0,error:Ge??void 0,complete:lt??void 0};else{let le;this&&m.v.useDeprecatedNextContext?(le=Object.create(Be),le.unsubscribe=()=>this.unsubscribe(),Ze={next:Be.next&&He(Be.next,le),error:Be.error&&He(Be.error,le),complete:Be.complete&&He(Be.complete,le)}):Ze=Be}this.destination=new it(Ze)}}function Ue(Fe){m.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(Fe):(0,he.h)(Fe)}function Qe(Fe,Be){const{onStoppedNotification:Ge}=m.v;Ge&&ae.z.setTimeout(()=>Ge(Fe,Be))}const ct={closed:!0,next:fe.Z,error:function qe(Fe){throw Fe},complete:fe.Z}},727:(bt,Me,B)=>{B.d(Me,{Lc:()=>ve,w0:()=>fe,Nn:()=>be});var g=B(576);const m=(0,B(3888).d)(Te=>function(ie){Te(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((pe,nt)=>`${nt+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var he=B(8737);class fe{constructor(ae){this.initialTeardown=ae,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ae;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const He of ie)He.remove(this);else ie.remove(this);const{initialTeardown:pe}=this;if((0,g.m)(pe))try{pe()}catch(He){ae=He instanceof m?He.errors:[He]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const He of nt)try{Ie(He)}catch(it){ae=ae??[],it instanceof m?ae=[...ae,...it.errors]:ae.push(it)}}if(ae)throw new m(ae)}}add(ae){var ie;if(ae&&ae!==this)if(this.closed)Ie(ae);else{if(ae instanceof fe){if(ae.closed||ae._hasParent(this))return;ae._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(ae)}}_hasParent(ae){const{_parentage:ie}=this;return ie===ae||Array.isArray(ie)&&ie.includes(ae)}_addParent(ae){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(ae),ie):ie?[ie,ae]:ae}_removeParent(ae){const{_parentage:ie}=this;ie===ae?this._parentage=null:Array.isArray(ie)&&(0,he.P)(ie,ae)}remove(ae){const{_finalizers:ie}=this;ie&&(0,he.P)(ie,ae),ae instanceof fe&&ae._removeParent(this)}}fe.EMPTY=(()=>{const Te=new fe;return Te.closed=!0,Te})();const ve=fe.EMPTY;function be(Te){return Te instanceof fe||Te&&"closed"in Te&&(0,g.m)(Te.remove)&&(0,g.m)(Te.add)&&(0,g.m)(Te.unsubscribe)}function Ie(Te){(0,g.m)(Te)?Te():Te.unsubscribe()}},2416:(bt,Me,B)=>{B.d(Me,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(bt,Me,B)=>{B.d(Me,{z:()=>fe});var g=B(8189),m=B(3269),he=B(8996);function fe(...ve){return function H(){return(0,g.J)(1)}()((0,he.D)(ve,(0,m.yG)(ve)))}},515:(bt,Me,B)=>{B.d(Me,{E:()=>H});const H=new(B(9751).y)(fe=>fe.complete())},8996:(bt,Me,B)=>{B.d(Me,{D:()=>Be});var g=B(8421),H=B(5363),m=B(9468),ve=B(9751),Ie=B(2202),Te=B(576),ae=B(9672);function pe(Ge,lt){if(!Ge)throw new Error("Iterable cannot be null");return new ve.y(Ze=>{(0,ae.f)(Ze,lt,()=>{const le=Ge[Symbol.asyncIterator]();(0,ae.f)(Ze,lt,()=>{le.next().then($e=>{$e.done?Ze.complete():Ze.next($e.value)})},0,!0)})})}var nt=B(3670),He=B(8239),it=B(1144),Ct=B(6495),Ue=B(2206),qe=B(4532),Qe=B(3260);function Be(Ge,lt){return lt?function Fe(Ge,lt){if(null!=Ge){if((0,nt.c)(Ge))return function he(Ge,lt){return(0,g.Xf)(Ge).pipe((0,m.R)(lt),(0,H.Q)(lt))}(Ge,lt);if((0,it.z)(Ge))return function be(Ge,lt){return new ve.y(Ze=>{let le=0;return lt.schedule(function(){le===Ge.length?Ze.complete():(Ze.next(Ge[le++]),Ze.closed||this.schedule())})})}(Ge,lt);if((0,He.t)(Ge))return function fe(Ge,lt){return(0,g.Xf)(Ge).pipe((0,m.R)(lt),(0,H.Q)(lt))}(Ge,lt);if((0,Ue.D)(Ge))return pe(Ge,lt);if((0,Ct.T)(Ge))return function ie(Ge,lt){return new ve.y(Ze=>{let le;return(0,ae.f)(Ze,lt,()=>{le=Ge[Ie.h](),(0,ae.f)(Ze,lt,()=>{let $e,dt;try{({value:$e,done:dt}=le.next())}catch(ht){return void Ze.error(ht)}dt?Ze.complete():Ze.next($e)},0,!0)}),()=>(0,Te.m)(le?.return)&&le.return()})}(Ge,lt);if((0,Qe.L)(Ge))return function ct(Ge,lt){return pe((0,Qe.Q)(Ge),lt)}(Ge,lt)}throw(0,qe.z)(Ge)}(Ge,lt):(0,g.Xf)(Ge)}},8421:(bt,Me,B)=>{B.d(Me,{Xf:()=>nt});var g=B(655),H=B(1144),m=B(8239),he=B(9751),fe=B(3670),ve=B(2206),be=B(4532),Ie=B(6495),Te=B(3260),ae=B(576),ie=B(7849),pe=B(8822);function nt(Fe){if(Fe instanceof he.y)return Fe;if(null!=Fe){if((0,fe.c)(Fe))return function He(Fe){return new he.y(Be=>{const Ge=Fe[pe.L]();if((0,ae.m)(Ge.subscribe))return Ge.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,H.z)(Fe))return function it(Fe){return new he.y(Be=>{for(let Ge=0;Ge<Fe.length&&!Be.closed;Ge++)Be.next(Fe[Ge]);Be.complete()})}(Fe);if((0,m.t)(Fe))return function Ct(Fe){return new he.y(Be=>{Fe.then(Ge=>{Be.closed||(Be.next(Ge),Be.complete())},Ge=>Be.error(Ge)).then(null,ie.h)})}(Fe);if((0,ve.D)(Fe))return qe(Fe);if((0,Ie.T)(Fe))return function Ue(Fe){return new he.y(Be=>{for(const Ge of Fe)if(Be.next(Ge),Be.closed)return;Be.complete()})}(Fe);if((0,Te.L)(Fe))return function Qe(Fe){return qe((0,Te.Q)(Fe))}(Fe)}throw(0,be.z)(Fe)}function qe(Fe){return new he.y(Be=>{(function ct(Fe,Be){var Ge,lt,Ze,le;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ge=(0,g.KL)(Fe);!(lt=yield Ge.next()).done;)if(Be.next(lt.value),Be.closed)return}catch($e){Ze={error:$e}}finally{try{lt&&!lt.done&&(le=Ge.return)&&(yield le.call(Ge))}finally{if(Ze)throw Ze.error}}Be.complete()})})(Fe,Be).catch(Ge=>Be.error(Ge))})}},6451:(bt,Me,B)=>{B.d(Me,{T:()=>ve});var g=B(8189),H=B(8421),m=B(515),he=B(3269),fe=B(8996);function ve(...be){const Ie=(0,he.yG)(be),Te=(0,he._6)(be,1/0),ae=be;return ae.length?1===ae.length?(0,H.Xf)(ae[0]):(0,g.J)(Te)((0,fe.D)(ae,Ie)):m.E}},9646:(bt,Me,B)=>{B.d(Me,{of:()=>m});var g=B(3269),H=B(8996);function m(...he){const fe=(0,g.yG)(he);return(0,H.D)(he,fe)}},5403:(bt,Me,B)=>{B.d(Me,{x:()=>H});var g=B(930);function H(he,fe,ve,be,Ie){return new m(he,fe,ve,be,Ie)}class m extends g.Lv{constructor(fe,ve,be,Ie,Te,ae){super(fe),this.onFinalize=Te,this.shouldUnsubscribe=ae,this._next=ve?function(ie){try{ve(ie)}catch(pe){fe.error(pe)}}:super._next,this._error=Ie?function(ie){try{Ie(ie)}catch(pe){fe.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(ie){fe.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},6590:(bt,Me,B)=>{B.d(Me,{d:()=>m});var g=B(4482),H=B(5403);function m(he){return(0,g.e)((fe,ve)=>{let be=!1;fe.subscribe((0,H.x)(ve,Ie=>{be=!0,ve.next(Ie)},()=>{be||ve.next(he),ve.complete()}))})}},9300:(bt,Me,B)=>{B.d(Me,{h:()=>m});var g=B(4482),H=B(5403);function m(he,fe){return(0,g.e)((ve,be)=>{let Ie=0;ve.subscribe((0,H.x)(be,Te=>he.call(fe,Te,Ie++)&&be.next(Te)))})}},590:(bt,Me,B)=>{B.d(Me,{P:()=>be});var g=B(6805),H=B(9300),m=B(5698),he=B(6590),fe=B(8068),ve=B(4671);function be(Ie,Te){const ae=arguments.length>=2;return ie=>ie.pipe(Ie?(0,H.h)((pe,nt)=>Ie(pe,nt,ie)):ve.y,(0,m.q)(1),ae?(0,he.d)(Te):(0,fe.T)(()=>new g.K))}},4004:(bt,Me,B)=>{B.d(Me,{U:()=>m});var g=B(4482),H=B(5403);function m(he,fe){return(0,g.e)((ve,be)=>{let Ie=0;ve.subscribe((0,H.x)(be,Te=>{be.next(he.call(fe,Te,Ie++))}))})}},8189:(bt,Me,B)=>{B.d(Me,{J:()=>m});var g=B(5577),H=B(4671);function m(he=1/0){return(0,g.z)(H.y,he)}},5577:(bt,Me,B)=>{B.d(Me,{z:()=>Ie});var g=B(4004),H=B(8421),m=B(4482),he=B(9672),fe=B(5403),be=B(576);function Ie(Te,ae,ie=1/0){return(0,be.m)(ae)?Ie((pe,nt)=>(0,g.U)((He,it)=>ae(pe,He,nt,it))((0,H.Xf)(Te(pe,nt))),ie):("number"==typeof ae&&(ie=ae),(0,m.e)((pe,nt)=>function ve(Te,ae,ie,pe,nt,He,it,Ct){const Ue=[];let qe=0,Qe=0,ct=!1;const Fe=()=>{ct&&!Ue.length&&!qe&&ae.complete()},Be=lt=>qe<pe?Ge(lt):Ue.push(lt),Ge=lt=>{He&&ae.next(lt),qe++;let Ze=!1;(0,H.Xf)(ie(lt,Qe++)).subscribe((0,fe.x)(ae,le=>{nt?.(le),He?Be(le):ae.next(le)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(qe--;Ue.length&&qe<pe;){const le=Ue.shift();it?(0,he.f)(ae,it,()=>Ge(le)):Ge(le)}Fe()}catch(le){ae.error(le)}}))};return Te.subscribe((0,fe.x)(ae,Be,()=>{ct=!0,Fe()})),()=>{Ct?.()}}(pe,nt,Te,ie)))}},5363:(bt,Me,B)=>{B.d(Me,{Q:()=>he});var g=B(9672),H=B(4482),m=B(5403);function he(fe,ve=0){return(0,H.e)((be,Ie)=>{be.subscribe((0,m.x)(Ie,Te=>(0,g.f)(Ie,fe,()=>Ie.next(Te),ve),()=>(0,g.f)(Ie,fe,()=>Ie.complete(),ve),Te=>(0,g.f)(Ie,fe,()=>Ie.error(Te),ve)))})}},5026:(bt,Me,B)=>{B.d(Me,{R:()=>he});var g=B(4482),H=B(5403);function m(fe,ve,be,Ie,Te){return(ae,ie)=>{let pe=be,nt=ve,He=0;ae.subscribe((0,H.x)(ie,it=>{const Ct=He++;nt=pe?fe(nt,it,Ct):(pe=!0,it),Ie&&ie.next(nt)},Te&&(()=>{pe&&ie.next(nt),ie.complete()})))}}function he(fe,ve){return(0,g.e)(m(fe,ve,arguments.length>=2,!0))}},3099:(bt,Me,B)=>{B.d(Me,{B:()=>fe});var g=B(8421),H=B(7579),m=B(930),he=B(4482);function fe(be={}){const{connector:Ie=(()=>new H.x),resetOnError:Te=!0,resetOnComplete:ae=!0,resetOnRefCountZero:ie=!0}=be;return pe=>{let nt,He,it,Ct=0,Ue=!1,qe=!1;const Qe=()=>{He?.unsubscribe(),He=void 0},ct=()=>{Qe(),nt=it=void 0,Ue=qe=!1},Fe=()=>{const Be=nt;ct(),Be?.unsubscribe()};return(0,he.e)((Be,Ge)=>{Ct++,!qe&&!Ue&&Qe();const lt=it=it??Ie();Ge.add(()=>{Ct--,0===Ct&&!qe&&!Ue&&(He=ve(Fe,ie))}),lt.subscribe(Ge),!nt&&Ct>0&&(nt=new m.Hp({next:Ze=>lt.next(Ze),error:Ze=>{qe=!0,Qe(),He=ve(ct,Te,Ze),lt.error(Ze)},complete:()=>{Ue=!0,Qe(),He=ve(ct,ae),lt.complete()}}),(0,g.Xf)(Be).subscribe(nt))})(pe)}}function ve(be,Ie,...Te){if(!0===Ie)return void be();if(!1===Ie)return;const ae=new m.Hp({next:()=>{ae.unsubscribe(),be()}});return(0,g.Xf)(Ie(...Te)).subscribe(ae)}},8675:(bt,Me,B)=>{B.d(Me,{O:()=>he});var g=B(7272),H=B(3269),m=B(4482);function he(...fe){const ve=(0,H.yG)(fe);return(0,m.e)((be,Ie)=>{(ve?(0,g.z)(fe,be,ve):(0,g.z)(fe,be)).subscribe(Ie)})}},9468:(bt,Me,B)=>{B.d(Me,{R:()=>H});var g=B(4482);function H(m,he=0){return(0,g.e)((fe,ve)=>{ve.add(m.schedule(()=>fe.subscribe(ve),he))})}},3900:(bt,Me,B)=>{B.d(Me,{w:()=>he});var g=B(8421),H=B(4482),m=B(5403);function he(fe,ve){return(0,H.e)((be,Ie)=>{let Te=null,ae=0,ie=!1;const pe=()=>ie&&!Te&&Ie.complete();be.subscribe((0,m.x)(Ie,nt=>{Te?.unsubscribe();let He=0;const it=ae++;(0,g.Xf)(fe(nt,it)).subscribe(Te=(0,m.x)(Ie,Ct=>Ie.next(ve?ve(nt,Ct,it,He++):Ct),()=>{Te=null,pe()}))},()=>{ie=!0,pe()}))})}},5698:(bt,Me,B)=>{B.d(Me,{q:()=>he});var g=B(515),H=B(4482),m=B(5403);function he(fe){return fe<=0?()=>g.E:(0,H.e)((ve,be)=>{let Ie=0;ve.subscribe((0,m.x)(be,Te=>{++Ie<=fe&&(be.next(Te),fe<=Ie&&be.complete())}))})}},8505:(bt,Me,B)=>{B.d(Me,{b:()=>fe});var g=B(576),H=B(4482),m=B(5403),he=B(4671);function fe(ve,be,Ie){const Te=(0,g.m)(ve)||be||Ie?{next:ve,error:be,complete:Ie}:ve;return Te?(0,H.e)((ae,ie)=>{var pe;null===(pe=Te.subscribe)||void 0===pe||pe.call(Te);let nt=!0;ae.subscribe((0,m.x)(ie,He=>{var it;null===(it=Te.next)||void 0===it||it.call(Te,He),ie.next(He)},()=>{var He;nt=!1,null===(He=Te.complete)||void 0===He||He.call(Te),ie.complete()},He=>{var it;nt=!1,null===(it=Te.error)||void 0===it||it.call(Te,He),ie.error(He)},()=>{var He,it;nt&&(null===(He=Te.unsubscribe)||void 0===He||He.call(Te)),null===(it=Te.finalize)||void 0===it||it.call(Te)}))}):he.y}},8068:(bt,Me,B)=>{B.d(Me,{T:()=>he});var g=B(6805),H=B(4482),m=B(5403);function he(ve=fe){return(0,H.e)((be,Ie)=>{let Te=!1;be.subscribe((0,m.x)(Ie,ae=>{Te=!0,Ie.next(ae)},()=>Te?Ie.complete():Ie.error(ve())))})}function fe(){return new g.K}},4408:(bt,Me,B)=>{B.d(Me,{o:()=>fe});var g=B(727);class H extends g.w0{constructor(be,Ie){super()}schedule(be,Ie=0){return this}}const m={setInterval(ve,be,...Ie){const{delegate:Te}=m;return Te?.setInterval?Te.setInterval(ve,be,...Ie):setInterval(ve,be,...Ie)},clearInterval(ve){const{delegate:be}=m;return(be?.clearInterval||clearInterval)(ve)},delegate:void 0};var he=B(8737);class fe extends H{constructor(be,Ie){super(be,Ie),this.scheduler=be,this.work=Ie,this.pending=!1}schedule(be,Ie=0){var Te;if(this.closed)return this;this.state=be;const ae=this.id,ie=this.scheduler;return null!=ae&&(this.id=this.recycleAsyncId(ie,ae,Ie)),this.pending=!0,this.delay=Ie,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(ie,this.id,Ie),this}requestAsyncId(be,Ie,Te=0){return m.setInterval(be.flush.bind(be,this),Te)}recycleAsyncId(be,Ie,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return Ie;null!=Ie&&m.clearInterval(Ie)}execute(be,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(be,Ie);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,Ie){let ae,Te=!1;try{this.work(be)}catch(ie){Te=!0,ae=ie||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),ae}unsubscribe(){if(!this.closed){const{id:be,scheduler:Ie}=this,{actions:Te}=Ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(Te,this),null!=be&&(this.id=this.recycleAsyncId(Ie,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Me,B)=>{B.d(Me,{v:()=>m});var g=B(6063);class H{constructor(fe,ve=H.now){this.schedulerActionCtor=fe,this.now=ve}schedule(fe,ve=0,be){return new this.schedulerActionCtor(this,fe).schedule(be,ve)}}H.now=g.l.now;class m extends H{constructor(fe,ve=H.now){super(fe,ve),this.actions=[],this._active=!1}flush(fe){const{actions:ve}=this;if(this._active)return void ve.push(fe);let be;this._active=!0;do{if(be=fe.execute(fe.state,fe.delay))break}while(fe=ve.shift());if(this._active=!1,be){for(;fe=ve.shift();)fe.unsubscribe();throw be}}}},4986:(bt,Me,B)=>{B.d(Me,{P:()=>he,z:()=>m});var g=B(4408);const m=new(B(7565).v)(g.o),he=m},6063:(bt,Me,B)=>{B.d(Me,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(bt,Me,B)=>{B.d(Me,{z:()=>g});const g={setTimeout(H,m,...he){const{delegate:fe}=g;return fe?.setTimeout?fe.setTimeout(H,m,...he):setTimeout(H,m,...he)},clearTimeout(H){const{delegate:m}=g;return(m?.clearTimeout||clearTimeout)(H)},delegate:void 0}},2202:(bt,Me,B)=>{B.d(Me,{h:()=>H});const H=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Me,B)=>{B.d(Me,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(bt,Me,B)=>{B.d(Me,{K:()=>H});const H=(0,B(3888).d)(m=>function(){m(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(bt,Me,B)=>{B.d(Me,{_6:()=>ve,jO:()=>he,yG:()=>fe});var g=B(576),H=B(3532);function m(be){return be[be.length-1]}function he(be){return(0,g.m)(m(be))?be.pop():void 0}function fe(be){return(0,H.K)(m(be))?be.pop():void 0}function ve(be,Ie){return"number"==typeof m(be)?be.pop():Ie}},4742:(bt,Me,B)=>{B.d(Me,{D:()=>fe});const{isArray:g}=Array,{getPrototypeOf:H,prototype:m,keys:he}=Object;function fe(be){if(1===be.length){const Ie=be[0];if(g(Ie))return{args:Ie,keys:null};if(function ve(be){return be&&"object"==typeof be&&H(be)===m}(Ie)){const Te=he(Ie);return{args:Te.map(ae=>Ie[ae]),keys:Te}}}return{args:be,keys:null}}},8737:(bt,Me,B)=>{function g(H,m){if(H){const he=H.indexOf(m);0<=he&&H.splice(he,1)}}B.d(Me,{P:()=>g})},3888:(bt,Me,B)=>{function g(H){const he=H(fe=>{Error.call(fe),fe.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}B.d(Me,{d:()=>g})},1810:(bt,Me,B)=>{function g(H,m){return H.reduce((he,fe,ve)=>(he[fe]=m[ve],he),{})}B.d(Me,{n:()=>g})},2806:(bt,Me,B)=>{B.d(Me,{O:()=>he,x:()=>m});var g=B(2416);let H=null;function m(fe){if(g.v.useDeprecatedSynchronousErrorHandling){const ve=!H;if(ve&&(H={errorThrown:!1,error:null}),fe(),ve){const{errorThrown:be,error:Ie}=H;if(H=null,be)throw Ie}}else fe()}function he(fe){g.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=fe)}},9672:(bt,Me,B)=>{function g(H,m,he,fe=0,ve=!1){const be=m.schedule(function(){he(),ve?H.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(H.add(be),!ve)return be}B.d(Me,{f:()=>g})},4671:(bt,Me,B)=>{function g(H){return H}B.d(Me,{y:()=>g})},1144:(bt,Me,B)=>{B.d(Me,{z:()=>g});const g=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(bt,Me,B)=>{B.d(Me,{D:()=>H});var g=B(576);function H(m){return Symbol.asyncIterator&&(0,g.m)(m?.[Symbol.asyncIterator])}},576:(bt,Me,B)=>{function g(H){return"function"==typeof H}B.d(Me,{m:()=>g})},3670:(bt,Me,B)=>{B.d(Me,{c:()=>m});var g=B(8822),H=B(576);function m(he){return(0,H.m)(he[g.L])}},6495:(bt,Me,B)=>{B.d(Me,{T:()=>m});var g=B(2202),H=B(576);function m(he){return(0,H.m)(he?.[g.h])}},8239:(bt,Me,B)=>{B.d(Me,{t:()=>H});var g=B(576);function H(m){return(0,g.m)(m?.then)}},3260:(bt,Me,B)=>{B.d(Me,{L:()=>he,Q:()=>m});var g=B(655),H=B(576);function m(fe){return(0,g.FC)(this,arguments,function*(){const be=fe.getReader();try{for(;;){const{value:Ie,done:Te}=yield(0,g.qq)(be.read());if(Te)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Ie)}}finally{be.releaseLock()}})}function he(fe){return(0,H.m)(fe?.getReader)}},3532:(bt,Me,B)=>{B.d(Me,{K:()=>H});var g=B(576);function H(m){return m&&(0,g.m)(m.schedule)}},4482:(bt,Me,B)=>{B.d(Me,{A:()=>H,e:()=>m});var g=B(576);function H(he){return(0,g.m)(he?.lift)}function m(he){return fe=>{if(H(fe))return fe.lift(function(ve){try{return he(ve,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(bt,Me,B)=>{B.d(Me,{Z:()=>he});var g=B(4004);const{isArray:H}=Array;function he(fe){return(0,g.U)(ve=>function m(fe,ve){return H(ve)?fe(...ve):fe(ve)}(fe,ve))}},5032:(bt,Me,B)=>{function g(){}B.d(Me,{Z:()=>g})},9635:(bt,Me,B)=>{B.d(Me,{U:()=>m,z:()=>H});var g=B(4671);function H(...he){return m(he)}function m(he){return 0===he.length?g.y:1===he.length?he[0]:function(ve){return he.reduce((be,Ie)=>Ie(be),ve)}}},7849:(bt,Me,B)=>{B.d(Me,{h:()=>m});var g=B(2416),H=B(3410);function m(he){H.z.setTimeout(()=>{const{onUnhandledError:fe}=g.v;if(!fe)throw he;fe(he)})}},4532:(bt,Me,B)=>{function g(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Me,{z:()=>g})},655:(bt,Me,B)=>{function he(Ae,ke){var Le={};for(var ze in Ae)Object.prototype.hasOwnProperty.call(Ae,ze)&&ke.indexOf(ze)<0&&(Le[ze]=Ae[ze]);if(null!=Ae&&"function"==typeof Object.getOwnPropertySymbols){var rt=0;for(ze=Object.getOwnPropertySymbols(Ae);rt<ze.length;rt++)ke.indexOf(ze[rt])<0&&Object.prototype.propertyIsEnumerable.call(Ae,ze[rt])&&(Le[ze[rt]]=Ae[ze[rt]])}return Le}function pe(Ae,ke,Le,ze){return new(Le||(Le=Promise))(function(ut,vt){function tt(nn){try{_e(ze.next(nn))}catch(Ht){vt(Ht)}}function qt(nn){try{_e(ze.throw(nn))}catch(Ht){vt(Ht)}}function _e(nn){nn.done?ut(nn.value):function rt(ut){return ut instanceof Le?ut:new Le(function(vt){vt(ut)})}(nn.value).then(tt,qt)}_e((ze=ze.apply(Ae,ke||[])).next())})}function Fe(Ae){return this instanceof Fe?(this.v=Ae,this):new Fe(Ae)}function Be(Ae,ke,Le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt,ze=Le.apply(Ae,ke||[]),ut=[];return rt={},vt("next"),vt("throw"),vt("return"),rt[Symbol.asyncIterator]=function(){return this},rt;function vt(Tt){ze[Tt]&&(rt[Tt]=function(bn){return new Promise(function(xn,Ln){ut.push([Tt,bn,xn,Ln])>1||tt(Tt,bn)})})}function tt(Tt,bn){try{!function qt(Tt){Tt.value instanceof Fe?Promise.resolve(Tt.value.v).then(_e,nn):Ht(ut[0][2],Tt)}(ze[Tt](bn))}catch(xn){Ht(ut[0][3],xn)}}function _e(Tt){tt("next",Tt)}function nn(Tt){tt("throw",Tt)}function Ht(Tt,bn){Tt(bn),ut.shift(),ut.length&&tt(ut[0][0],ut[0][1])}}function lt(Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,ke=Ae[Symbol.asyncIterator];return ke?ke.call(Ae):(Ae=function Ct(Ae){var ke="function"==typeof Symbol&&Symbol.iterator,Le=ke&&Ae[ke],ze=0;if(Le)return Le.call(Ae);if(Ae&&"number"==typeof Ae.length)return{next:function(){return Ae&&ze>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[ze++],done:!Ae}}};throw new TypeError(ke?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ae),Le={},ze("next"),ze("throw"),ze("return"),Le[Symbol.asyncIterator]=function(){return this},Le);function ze(ut){Le[ut]=Ae[ut]&&function(vt){return new Promise(function(tt,qt){!function rt(ut,vt,tt,qt){Promise.resolve(qt).then(function(_e){ut({value:_e,done:tt})},vt)}(tt,qt,(vt=Ae[ut](vt)).done,vt.value)})}}}B.d(Me,{FC:()=>Be,KL:()=>lt,_T:()=>he,mG:()=>pe,qq:()=>Fe})},6895:(bt,Me,B)=>{B.d(Me,{Do:()=>Qe,ED:()=>or,EM:()=>ho,HT:()=>he,JF:()=>Ot,K0:()=>ve,Mx:()=>_r,NF:()=>Xi,O5:()=>Ji,PM:()=>Hs,RF:()=>Ai,S$:()=>Ct,V_:()=>Te,Ye:()=>ct,b0:()=>qe,bD:()=>$s,ez:()=>js,gd:()=>Kr,mk:()=>tn,n9:()=>Cr,q:()=>m,sg:()=>mi,w_:()=>fe});var g=B(4650);let H=null;function m(){return H}function he(T){H||(H=T)}class fe{}const ve=new g.OlP("DocumentToken");let be=(()=>{class T{historyGo(P){throw new Error("Not implemented")}}return T.\u0275fac=function(P){return new(P||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return function Ie(){return(0,g.LFG)(ae)}()},providedIn:"platform"}),T})();const Te=new g.OlP("Location Initialized");let ae=(()=>{class T extends be{constructor(P){super(),this._doc=P,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return m().getBaseHref(this._doc)}onPopState(P){const G=m().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",P,!1),()=>G.removeEventListener("popstate",P)}onHashChange(P){const G=m().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",P,!1),()=>G.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,G,re){ie()?this._history.pushState(P,G,re):this._location.hash=re}replaceState(P,G,re){ie()?this._history.replaceState(P,G,re):this._location.hash=re}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return T.\u0275fac=function(P){return new(P||T)(g.LFG(ve))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function pe(){return new ae((0,g.LFG)(ve))}()},providedIn:"platform"}),T})();function ie(){return!!window.history.pushState}function nt(T,V){if(0==T.length)return V;if(0==V.length)return T;let P=0;return T.endsWith("/")&&P++,V.startsWith("/")&&P++,2==P?T+V.substring(1):1==P?T+V:T+"/"+V}function He(T){const V=T.match(/#|\?|$/),P=V&&V.index||T.length;return T.slice(0,P-("/"===T[P-1]?1:0))+T.slice(P)}function it(T){return T&&"?"!==T[0]?"?"+T:T}let Ct=(()=>{class T{historyGo(P){throw new Error("Not implemented")}}return T.\u0275fac=function(P){return new(P||T)},T.\u0275prov=g.Yz7({token:T,factory:function(){return(0,g.f3M)(qe)},providedIn:"root"}),T})();const Ue=new g.OlP("appBaseHref");let qe=(()=>{class T extends Ct{constructor(P,G){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return nt(this._baseHref,P)}path(P=!1){const G=this._platformLocation.pathname+it(this._platformLocation.search),re=this._platformLocation.hash;return re&&P?`${G}${re}`:G}pushState(P,G,re,Re){const Je=this.prepareExternalUrl(re+it(Re));this._platformLocation.pushState(P,G,Je)}replaceState(P,G,re,Re){const Je=this.prepareExternalUrl(re+it(Re));this._platformLocation.replaceState(P,G,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return T.\u0275fac=function(P){return new(P||T)(g.LFG(be),g.LFG(Ue,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Qe=(()=>{class T extends Ct{constructor(P,G){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(P){const G=nt(this._baseHref,P);return G.length>0?"#"+G:G}pushState(P,G,re,Re){let Je=this.prepareExternalUrl(re+it(Re));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.pushState(P,G,Je)}replaceState(P,G,re,Re){let Je=this.prepareExternalUrl(re+it(Re));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.replaceState(P,G,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return T.\u0275fac=function(P){return new(P||T)(g.LFG(be),g.LFG(Ue,8))},T.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac}),T})(),ct=(()=>{class T{constructor(P){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const G=this._locationStrategy.getBaseHref();this._basePath=function lt(T){if(new RegExp("^(https?:)?//").test(T)){const[,P]=T.split(/\/\/[^\/]+/);return P}return T}(He(Ge(G))),this._locationStrategy.onPopState(re=>{this._subject.emit({url:this.path(!0),pop:!0,state:re.state,type:re.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,G=""){return this.path()==this.normalize(P+it(G))}normalize(P){return T.stripTrailingSlash(function Be(T,V){return T&&new RegExp(`^${T}([/;?#]|$)`).test(V)?V.substring(T.length):V}(this._basePath,Ge(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,G="",re=null){this._locationStrategy.pushState(re,"",P,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+it(G)),re)}replaceState(P,G="",re=null){this._locationStrategy.replaceState(re,"",P,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+it(G)),re)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",G){this._urlChangeListeners.forEach(re=>re(P,G))}subscribe(P,G,re){return this._subject.subscribe({next:P,error:G,complete:re})}}return T.normalizeQueryParams=it,T.joinWithSlash=nt,T.stripTrailingSlash=He,T.\u0275fac=function(P){return new(P||T)(g.LFG(Ct))},T.\u0275prov=g.Yz7({token:T,factory:function(){return function Fe(){return new ct((0,g.LFG)(Ct))}()},providedIn:"root"}),T})();function Ge(T){return T.replace(/\/index.html$/,"")}function _r(T,V){V=encodeURIComponent(V);for(const P of T.split(";")){const G=P.indexOf("="),[re,Re]=-1==G?[P,""]:[P.slice(0,G),P.slice(G+1)];if(re.trim()===V)return decodeURIComponent(Re)}return null}const gi=/\s+/,Mt=[];let tn=(()=>{class T{constructor(P,G,re,Re){this._iterableDiffers=P,this._keyValueDiffers=G,this._ngEl=re,this._renderer=Re,this.initialClasses=Mt,this.stateMap=new Map}set klass(P){this.initialClasses=null!=P?P.trim().split(gi):Mt}set ngClass(P){this.rawClass="string"==typeof P?P.trim().split(gi):P}ngDoCheck(){for(const G of this.initialClasses)this._updateState(G,!0);const P=this.rawClass;if(Array.isArray(P)||P instanceof Set)for(const G of P)this._updateState(G,!0);else if(null!=P)for(const G of Object.keys(P))this._updateState(G,Boolean(P[G]));this._applyStateDiff()}_updateState(P,G){const re=this.stateMap.get(P);void 0!==re?(re.enabled!==G&&(re.changed=!0,re.enabled=G),re.touched=!0):this.stateMap.set(P,{enabled:G,changed:!0,touched:!0})}_applyStateDiff(){for(const P of this.stateMap){const G=P[0],re=P[1];re.changed?(this._toggleClass(G,re.enabled),re.changed=!1):re.touched||(re.enabled&&this._toggleClass(G,!1),this.stateMap.delete(G)),re.touched=!1}}_toggleClass(P,G){(P=P.trim()).length>0&&P.split(gi).forEach(re=>{G?this._renderer.addClass(this._ngEl.nativeElement,re):this._renderer.removeClass(this._ngEl.nativeElement,re)})}}return T.\u0275fac=function(P){return new(P||T)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),T})();class Rr{constructor(V,P,G,re){this.$implicit=V,this.ngForOf=P,this.index=G,this.count=re}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mi=(()=>{class T{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,G,re){this._viewContainer=P,this._template=G,this._differs=re,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const G=this._viewContainer;P.forEachOperation((re,Re,Je)=>{if(null==re.previousIndex)G.createEmbeddedView(this._template,new Rr(re.item,this._ngForOf,-1,-1),null===Je?void 0:Je);else if(null==Je)G.remove(null===Re?void 0:Re);else if(null!==Re){const jt=G.get(Re);G.move(jt,Je),Vn(jt,re)}});for(let re=0,Re=G.length;re<Re;re++){const jt=G.get(re).context;jt.index=re,jt.count=Re,jt.ngForOf=this._ngForOf}P.forEachIdentityChange(re=>{Vn(G.get(re.currentIndex),re)})}static ngTemplateContextGuard(P,G){return!0}}return T.\u0275fac=function(P){return new(P||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function Vn(T,V){T.context.$implicit=V.item}let Ji=(()=>{class T{constructor(P,G){this._viewContainer=P,this._context=new pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){ii("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){ii("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,G){return!0}}return T.\u0275fac=function(P){return new(P||T)(g.Y36(g.s_b),g.Y36(g.Rgc))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class pn{constructor(){this.$implicit=null,this.ngIf=null}}function ii(T,V){if(V&&!V.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,g.AaK)(V)}'.`)}class Si{constructor(V,P){this._viewContainerRef=V,this._templateRef=P,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(V){V&&!this._created?this.create():!V&&this._created&&this.destroy()}}let Ai=(()=>{class T{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(P){this._ngSwitch=P,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(P){this._defaultViews.push(P)}_matchCase(P){const G=P==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||G,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),G}_updateDefaultCases(P){if(this._defaultViews.length>0&&P!==this._defaultUsed){this._defaultUsed=P;for(const G of this._defaultViews)G.enforceState(P)}}}return T.\u0275fac=function(P){return new(P||T)},T.\u0275dir=g.lG2({type:T,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),T})(),Cr=(()=>{class T{constructor(P,G,re){this.ngSwitch=re,re._addCase(),this._view=new Si(P,G)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return T.\u0275fac=function(P){return new(P||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(Ai,9))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),T})(),or=(()=>{class T{constructor(P,G,re){re._addDefault(new Si(P,G))}}return T.\u0275fac=function(P){return new(P||T)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(Ai,9))},T.\u0275dir=g.lG2({type:T,selectors:[["","ngSwitchDefault",""]],standalone:!0}),T})();let Kr=(()=>{class T{transform(P){if(null==P)return null;if("string"!=typeof P)throw function hs(T,V){return new g.vHH(2100,!1)}();return P.toUpperCase()}}return T.\u0275fac=function(P){return new(P||T)},T.\u0275pipe=g.Yjl({name:"uppercase",type:T,pure:!0,standalone:!0}),T})(),js=(()=>{class T{}return T.\u0275fac=function(P){return new(P||T)},T.\u0275mod=g.oAB({type:T}),T.\u0275inj=g.cJS({}),T})();const $s="browser";function Xi(T){return T===$s}function Hs(T){return"server"===T}let ho=(()=>{class T{}return T.\u0275prov=(0,g.Yz7)({token:T,providedIn:"root",factory:()=>new Ms((0,g.LFG)(ve),window)}),T})();class Ms{constructor(V,P){this.document=V,this.window=P,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const P=function _i(T,V){const P=T.getElementById(V)||T.getElementsByName(V)[0];if(P)return P;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const G=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let re=G.currentNode;for(;re;){const Re=re.shadowRoot;if(Re){const Je=Re.getElementById(V)||Re.querySelector(`[name="${V}"]`);if(Je)return Je}re=G.nextNode()}}return null}(this.document,V);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=V)}}scrollToElement(V){const P=V.getBoundingClientRect(),G=P.left+this.window.pageXOffset,re=P.top+this.window.pageYOffset,Re=this.offset();this.window.scrollTo(G-Re[0],re-Re[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=fo(this.window.history)||fo(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fo(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class Ot{}},4650:(bt,Me,B)=>{B.d(Me,{$8M:()=>wa,$WT:()=>er,$Z:()=>wd,AFp:()=>S0,ALo:()=>yy,AaK:()=>Ie,AsE:()=>$h,CHM:()=>A,CRH:()=>Iw,CZH:()=>Wd,CqO:()=>gp,D6c:()=>iD,DdM:()=>Hd,EJc:()=>hf,EpF:()=>Rh,F$t:()=>Xv,F4k:()=>Ph,FYo:()=>Ac,FiY:()=>Ii,Gf:()=>l0,GfV:()=>yd,Gpc:()=>ie,Gre:()=>Vm,Hsn:()=>so,JOm:()=>Lr,Jf7:()=>vd,KtG:()=>z,LFG:()=>st,LSH:()=>zu,Lbi:()=>lf,Lck:()=>Jh,MGl:()=>kh,MMx:()=>dy,NdJ:()=>Oh,O4$:()=>yo,OlP:()=>Wn,Oqu:()=>Om,P3R:()=>gd,PXZ:()=>l,Q6J:()=>cp,QGY:()=>Bl,Qsj:()=>zo,R0b:()=>Ao,RDi:()=>U0,Rgc:()=>hu,SBq:()=>Sc,Sil:()=>pf,Suo:()=>ww,TTD:()=>zs,TgZ:()=>dp,Udp:()=>Tm,VKq:()=>Z_,WLB:()=>ql,X6Q:()=>el,XFs:()=>gt,Xpm:()=>cr,Xts:()=>Lf,Y36:()=>Cl,YKP:()=>Qh,YNc:()=>Ul,Yjl:()=>Vs,Yz7:()=>Ht,Z0I:()=>Ln,ZZ4:()=>Kw,_Bn:()=>G_,_UZ:()=>mm,_Vd:()=>Iu,_c5:()=>nD,_uU:()=>bp,aQg:()=>Yw,c2e:()=>Lw,cJS:()=>bn,cQ8:()=>jl,cg1:()=>Zm,dDg:()=>Gw,dqk:()=>kt,eFA:()=>K,ekj:()=>Bh,eoX:()=>qd,f3M:()=>Pt,g9A:()=>So,h0i:()=>Qa,hGG:()=>rD,hYB:()=>Rd,hij:()=>Cp,iGM:()=>c0,ifc:()=>Ve,ip1:()=>Xn,jDz:()=>Zp,kL8:()=>Pp,kcU:()=>Tn,lG2:()=>Cs,lcZ:()=>vy,lnq:()=>Hh,lqb:()=>ml,lri:()=>N0,n5z:()=>Ga,oAB:()=>zr,oJD:()=>pl,oxw:()=>yp,q4F:()=>jg,qLn:()=>lh,qOj:()=>Fc,qZA:()=>Md,rWj:()=>k0,sBO:()=>jI,s_b:()=>sf,soG:()=>pg,tb:()=>A0,tp0:()=>hi,uIk:()=>cm,vHH:()=>Ue,vpe:()=>Mu,wAp:()=>dn,xp6:()=>fh,z2F:()=>jn,zSh:()=>oh,zs3:()=>Zu});var g=B(7579),H=B(727),m=B(9751),he=B(6451),fe=B(3099);function ve(r){for(let i in r)if(r[i]===ve)return i;throw Error("Could not find renamed property on target object.")}function be(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function Ie(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Ie).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Te(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const ae=ve({__forward_ref__:ve});function ie(r){return r.__forward_ref__=ie,r.toString=function(){return Ie(this())},r}function pe(r){return nt(r)?r():r}function nt(r){return"function"==typeof r&&r.hasOwnProperty(ae)&&r.__forward_ref__===ie}function He(r){return r&&!!r.\u0275providers}const Ct="https://g.co/ng/security#xss";class Ue extends Error{constructor(i,o){super(function qe(r,i){return`NG0${Math.abs(r)}${i?": "+i.trim():""}`}(i,o)),this.code=i}}function Qe(r){return"string"==typeof r?r:null==r?"":String(r)}function lt(r,i){throw new Ue(-201,!1)}function vt(r,i){null==r&&function tt(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function Ht(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function bn(r){return{providers:r.providers||[],imports:r.imports||[]}}function xn(r){return Zn(r,pr)||Zn(r,Pn)}function Ln(r){return null!==xn(r)}function Zn(r,i){return r.hasOwnProperty(i)?r[i]:null}function Hn(r){return r&&(r.hasOwnProperty(Ar)||r.hasOwnProperty(gr))?r[Ar]:null}const pr=ve({\u0275prov:ve}),Ar=ve({\u0275inj:ve}),Pn=ve({ngInjectableDef:ve}),gr=ve({ngInjectorDef:ve});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let rr;function ir(r){const i=rr;return rr=r,i}function sr(r,i,o){const u=xn(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&gt.Optional?null:void 0!==i?i:void lt(Ie(r))}const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wn={},Gn="__NG_DI_FLAG__",Dr="ngTempTokenPath",Ti=/\n/gm,ri="__source";let sn;function Zt(r){const i=sn;return sn=r,i}function Mn(r,i=gt.Default){if(void 0===sn)throw new Ue(-203,!1);return null===sn?sr(r,void 0,i):sn.get(r,i&gt.Optional?null:void 0,i)}function st(r,i=gt.Default){return(function Nr(){return rr}()||Mn)(pe(r),i)}function Pt(r,i=gt.Default){return st(r,Ut(i))}function Ut(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function on(r){const i=[];for(let o=0;o<r.length;o++){const u=pe(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Ue(900,!1);let c,h=gt.Default;for(let v=0;v<u.length;v++){const b=u[v],x=On(b);"number"==typeof x?-1===x?c=b.token:h|=x:c=b}i.push(st(c,h))}else i.push(st(u))}return i}function cn(r,i){return r[Gn]=i,r.prototype[Gn]=i,r}function On(r){return r[Gn]}function Q(r){return{toString:r}.toString()}var J=(()=>((J=J||{})[J.OnPush=0]="OnPush",J[J.Default=1]="Default",J))(),Ve=(()=>{return(r=Ve||(Ve={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Ve;var r})();const It={},de=[],se=ve({\u0275cmp:ve}),X=ve({\u0275dir:ve}),ye=ve({\u0275pipe:ve}),Ye=ve({\u0275mod:ve}),ot=ve({\u0275fac:ve}),en=ve({__NG_ELEMENT_ID__:ve});let zn=0;function cr(r){return Q(()=>{const o=!0===r.standalone,u={},c={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===J.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||de,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Ve.Emulated,id:"c"+zn++,styles:r.styles||de,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=r.dependencies,v=r.features;return c.inputs=ds(r.inputs,u),c.outputs=ds(r.outputs),v&&v.forEach(b=>b(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Ur).filter(bs):null,c.pipeDefs=h?()=>("function"==typeof h?h():h).map(xr).filter(bs):null,c})}function Ur(r){return Cn(r)||lr(r)}function bs(r){return null!==r}function zr(r){return Q(()=>({type:r.type,bootstrap:r.bootstrap||de,declarations:r.declarations||de,imports:r.imports||de,exports:r.exports||de,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function ds(r,i){if(null==r)return It;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=u,i&&(i[c]=h)}return o}const Cs=cr;function Vs(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Cn(r){return r[se]||null}function lr(r){return r[X]||null}function xr(r){return r[ye]||null}function er(r){const i=Cn(r)||lr(r)||xr(r);return null!==i&&i.standalone}function _r(r,i){const o=r[Ye]||null;if(!o&&!0===i)throw new Error(`Type ${Ie(r)} does not have '\u0275mod' property.`);return o}function yi(r){return Array.isArray(r)&&"object"==typeof r[1]}function Kr(r){return Array.isArray(r)&&!0===r[1]}function Pa(r){return 0!=(4&r.flags)}function uo(r){return r.componentOffset>-1}function co(r){return 1==(1&r.flags)}function Er(r){return null!==r.template}function Oa(r){return 0!=(256&r[2])}function xs(r,i){return r.hasOwnProperty(ot)?r[ot]:null}class Gs{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function zs(){return ho}function ho(r){return r.type.prototype.ngOnChanges&&(r.setInput=fo),Ms}function Ms(){const r=Yr(this),i=r?.current;if(i){const o=r.previous;if(o===It)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function fo(r,i,o,u){const c=this.declaredInputs[o],h=Yr(r)||function Ot(r,i){return r[_i]=i}(r,{previous:It,current:null}),v=h.current||(h.current={}),b=h.previous,x=b[c];v[c]=new Gs(x&&x.currentValue,i,b===It),r[u]=i}zs.ngInherit=!0;const _i="__ngSimpleChanges__";function Yr(r){return r[_i]||null}function mr(r){for(;Array.isArray(r);)r=r[0];return r}function Ws(r,i){return mr(i[r])}function Br(r,i){return mr(i[r.index])}function wr(r,i){return r.data[i]}function In(r,i){const o=i[r];return yi(o)?o:o[0]}function Jr(r){return 64==(64&r[2])}function Xr(r,i){return null==i?null:r[i]}function qs(r){r[18]=0}function ar(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const un={lFrame:Ru(null),bindingsEnabled:!0};function No(){return un.bindingsEnabled}function S(){return un.lFrame.lView}function R(){return un.lFrame.tView}function A(r){return un.lFrame.contextLView=r,r[8]}function z(r){return un.lFrame.contextLView=null,r}function Ce(){let r=St();for(;null!==r&&64===r.type;)r=r.parent;return r}function St(){return un.lFrame.currentTNode}function Yn(r,i){const o=un.lFrame;o.currentTNode=r,o.isParent=i}function Mi(){return un.lFrame.isParent}function wi(){un.lFrame.isParent=!1}function Fr(){const r=un.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function Gi(){return un.lFrame.bindingIndex}function ko(){return un.lFrame.bindingIndex++}function ss(r){const i=un.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}function La(r,i){const o=un.lFrame;o.bindingIndex=o.bindingRootIndex=r,Va(i)}function Va(r){un.lFrame.currentDirectiveIndex=r}function tu(){return un.lFrame.currentQueryIndex}function Ps(r){un.lFrame.currentQueryIndex=r}function Fo(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function ha(r,i,o){if(o&gt.SkipSelf){let c=i,h=r;for(;!(c=c.parent,null!==c||o&gt.Host||(c=Fo(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;i=c,r=h}const u=un.lFrame=fa();return u.currentTNode=i,u.lView=r,!0}function Xo(r){const i=fa(),o=r[1];un.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function fa(){const r=un.lFrame,i=null===r?null:r.child;return null===i?Ru(r):i}function Ru(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function ea(){const r=un.lFrame;return un.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Ua=ea;function pa(){const r=ea();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function jr(){return un.lFrame.selectedIndex}function zi(r){un.lFrame.selectedIndex=r}function hr(){const r=un.lFrame;return wr(r.tView,r.selectedIndex)}function yo(){un.lFrame.currentNamespace="svg"}function Tn(){!function oi(){un.lFrame.currentNamespace=null}()}function ja(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:x,ngAfterViewChecked:F,ngOnDestroy:W}=h;v&&(r.contentHooks||(r.contentHooks=[])).push(-o,v),b&&((r.contentHooks||(r.contentHooks=[])).push(o,b),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,b)),x&&(r.viewHooks||(r.viewHooks=[])).push(-o,x),F&&((r.viewHooks||(r.viewHooks=[])).push(o,F),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,F)),null!=W&&(r.destroyHooks||(r.destroyHooks=[])).push(o,W)}}function pu(r,i,o){P(r,i,3,o)}function T(r,i,o,u){(3&r[2])===o&&P(r,i,o,u)}function V(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function P(r,i,o,u){const h=u??-1,v=i.length-1;let b=0;for(let x=void 0!==u?65535&r[18]:0;x<v;x++)if("number"==typeof i[x+1]){if(b=i[x],null!=u&&b>=u)break}else i[x]<0&&(r[18]+=65536),(b<h||-1==h)&&(G(r,o,i,x),r[18]=(4294901760&r[18])+x+2),x++}function G(r,i,o,u){const c=o[u]<0,h=o[u+1],b=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{h.call(b)}finally{}}}else try{h.call(b)}finally{}}class Re{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Tr(r,i,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const h=o[u++],v=o[u++],b=o[u++];r.setAttribute(i,v,b,h)}else{const h=c,v=o[++u];os(h)?r.setProperty(i,h,v):r.setAttribute(i,h,v),u++}}return u}function gs(r){return 3===r||4===r||6===r}function os(r){return 64===r.charCodeAt(0)}function ui(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||ci(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function ci(r,i,o,u,c){let h=0,v=r.length;if(-1===i)v=-1;else for(;h<r.length;){const b=r[h++];if("number"==typeof b){if(b===i){v=-1;break}if(b>i){v=h-1;break}}}for(;h<r.length;){const b=r[h];if("number"==typeof b)break;if(b===o){if(null===u)return void(null!==c&&(r[h+1]=c));if(u===r[h+1])return void(r[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==v&&(r.splice(v,0,i),h=v+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==c&&r.splice(h++,0,c)}function Ys(r){return-1!==r}function Qs(r){return 32767&r}function Lo(r,i){let o=function Js(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let ma=!0;function vo(r){const i=ma;return ma=r,i}let ta=0;const as={};function Xs(r,i){const o=yr(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,va(u.data,r),va(i,null),va(u.blueprint,null));const c=$a(r,i),h=r.injectorIndex;if(Ys(c)){const v=Qs(c),b=Lo(c,i),x=b[1].data;for(let F=0;F<8;F++)i[h+F]=b[v+F]|x[v+F]}return i[h+8]=c,h}function va(r,i){r.push(0,0,0,0,0,0,0,0,i)}function yr(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function $a(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){if(u=iu(c),null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function eo(r,i,o){!function Wi(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(en)&&(u=o[en]),null==u&&(u=o[en]=ta++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function ru(r,i,o){if(o&gt.Optional||void 0!==r)return r;lt()}function Uo(r,i,o,u){if(o&gt.Optional&&void 0===u&&(u=null),!(o&(gt.Self|gt.Host))){const c=r[9],h=ir(void 0);try{return c?c.get(i,u,o&gt.Optional):sr(i,u,o&gt.Optional)}finally{ir(h)}}return ru(u,0,o)}function gu(r,i,o,u=gt.Default,c){if(null!==r){if(1024&i[2]){const v=function mu(r,i,o,u,c){let h=r,v=i;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const b=_a(h,v,o,u|gt.Self,as);if(b!==as)return b;let x=h.parent;if(!x){const F=v[21];if(F){const W=F.get(o,as,u);if(W!==as)return W}x=iu(v),v=v[15]}h=x}return c}(r,i,o,u,as);if(v!==as)return v}const h=_a(r,i,o,u,as);if(h!==as)return h}return Uo(i,o,u,c)}function _a(r,i,o,u,c){const h=function Ea(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(en)?r[en]:void 0;return"number"==typeof i?i>=0?255&i:ms:i}(o);if("function"==typeof h){if(!ha(i,r,u))return u&gt.Host?ru(c,0,u):Uo(i,o,u,c);try{const v=h(u);if(null!=v||u&gt.Optional)return v;lt()}finally{Ua()}}else if("number"==typeof h){let v=null,b=yr(r,i),x=-1,F=u&gt.Host?i[16][6]:null;for((-1===b||u&gt.SkipSelf)&&(x=-1===b?$a(r,i):i[b+8],-1!==x&&Ha(u,!1)?(v=i[1],b=Qs(x),i=Lo(x,i)):b=-1);-1!==b;){const W=i[1];if(to(h,b,W.data)){const ee=Nu(b,i,o,v,u,F);if(ee!==as)return ee}x=i[b+8],-1!==x&&Ha(u,i[1].data[b+8]===F)&&to(h,b,i)?(v=W,b=Qs(x),i=Lo(x,i)):b=-1}}return c}function Nu(r,i,o,u,c,h){const v=i[1],b=v.data[r+8],W=li(b,v,o,null==u?uo(b)&&ma:u!=v&&0!=(3&b.type),c&gt.Host&&h===b);return null!==W?vr(i,v,W,b):as}function li(r,i,o,u,c){const h=r.providerIndexes,v=i.data,b=1048575&h,x=r.directiveStart,W=h>>20,me=c?b+W:r.directiveEnd;for(let Se=u?b:b+W;Se<me;Se++){const Xe=v[Se];if(Se<x&&o===Xe||Se>=x&&Xe.type===o)return Se}if(c){const Se=v[x];if(Se&&Er(Se)&&Se.type===o)return x}return null}function vr(r,i,o,u){let c=r[o];const h=i.data;if(function Je(r){return r instanceof Re}(c)){const v=c;v.resolving&&function Fe(r,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${r}${o}`)}(function ct(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Qe(r)}(h[o]));const b=vo(v.canSeeViewProviders);v.resolving=!0;const x=v.injectImpl?ir(v.injectImpl):null;ha(r,u,gt.Default);try{c=r[o]=v.factory(void 0,h,r,u),i.firstCreatePass&&o>=u.directiveStart&&function nu(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=i.type.prototype;if(u){const v=ho(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,v)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],i)}finally{null!==x&&ir(x),vo(b),v.resolving=!1,Ua()}}return c}function to(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function Ha(r,i){return!(r&gt.Self||r&gt.Host&&i)}class Os{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return gu(this._tNode,this._lView,i,Ut(u),o)}}function ms(){return new Os(Ce(),S())}function Ga(r){return Q(()=>{const i=r.prototype.constructor,o=i[ot]||ac(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const h=c[ot]||ac(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function ac(r){return nt(r)?()=>{const i=ac(pe(r));return i&&i()}:xs(r)}function iu(r){const i=r[1],o=i.type;return 2===o?i.declTNode:1===o?r[6]:null}function wa(r){return function Ou(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const h=o[c];if(gs(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(h===i)return o[c+1];c+=2}}}return null}(Ce(),r)}const Ia="__parameters__";function su(r,i,o){return Q(()=>{const u=function za(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...h){if(this instanceof c)return u.apply(this,h),this;const v=new c(...h);return b.annotation=v,b;function b(x,F,W){const ee=x.hasOwnProperty(Ia)?x[Ia]:Object.defineProperty(x,Ia,{value:[]})[Ia];for(;ee.length<=W;)ee.push(null);return(ee[W]=ee[W]||[]).push(v),x}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Wn{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Ht({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function no(r,i){r.forEach(o=>Array.isArray(o)?no(o,i):i(o))}function ra(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function qi(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function ia(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}function _(r,i,o){let u=y(r,i);return u>=0?r[1|u]=o:(u=~u,function _o(r,i,o,u){let c=r.length;if(c==i)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>i;)r[c]=r[c-2],c--;r[i]=o,r[i+1]=u}}(r,u,i,o)),u}function w(r,i){const o=y(r,i);if(o>=0)return r[1|o]}function y(r,i){return function N(r,i,o){let u=0,c=r.length>>o;for(;c!==u;){const h=u+(c-u>>1),v=r[h<<o];if(i===v)return h<<o;v>i?c=h:u=h+1}return~(c<<o)}(r,i,1)}const Ii=cn(su("Optional"),8),hi=cn(su("SkipSelf"),4);var Lr=(()=>((Lr=Lr||{})[Lr.Important=1]="Important",Lr[Lr.DashCase=2]="DashCase",Lr))();const Yd=new Map;let Qd=0;const cu="__ngContext__";function ti(r,i){yi(i)?(r[cu]=i[20],function _g(r){Yd.set(r[20],r)}(i)):r[cu]=i}function Ci(r,i){return undefined(r,i)}function $u(r){const i=r[3];return Kr(i)?i[3]:i}function ud(r){return Jd(r[13])}function cd(r){return Jd(r[4])}function Jd(r){for(;null!==r&&!Kr(r);)r=r[4];return r}function hc(r,i,o,u,c){if(null!=u){let h,v=!1;Kr(u)?h=u:yi(u)&&(v=!0,u=u[0]);const b=mr(u);0===r&&null!==o?null==c?Ho(i,o,b):Pi(i,o,b,c||null,!0):1===r&&null!==o?Pi(i,o,b,c||null,!0):2===r?function Dg(r,i,o){const u=Hu(r,i);u&&function Xd(r,i,o,u){r.removeChild(i,o,u)}(r,u,i,o)}(i,b,v):3===r&&i.destroyNode(b),null!=h&&function V0(r,i,o,u,c){const h=o[7];h!==mr(o)&&hc(i,r,u,h,c);for(let b=10;b<o.length;b++){const x=o[b];ld(x[1],x,r,i,u,h)}}(i,r,h,o,c)}}function gn(r,i,o){return r.createElement(i,o)}function U(r,i){const o=r[9],u=o.indexOf(i),c=i[3];512&i[2]&&(i[2]&=-513,ar(c,-1)),o.splice(u,1)}function q(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&U(c,u),i>0&&(r[o-1][4]=u[4]);const h=qi(r,10+i);!function fc(r,i){ld(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const v=h[19];null!==v&&v.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function te(r,i){if(!(128&i[2])){const o=i[11];o.destroyNode&&ld(r,i,o,3,null,null),function d(r){let i=r[13];if(!i)return Oe(r[1],r);for(;i;){let o=null;if(yi(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)yi(i)&&Oe(i[1],i),i=i[3];null===i&&(i=r),yi(i)&&Oe(i[1],i),o=i&&i[4]}i=o}}(i)}}function Oe(r,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function Dt(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Re)){const h=o[u+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const b=c[h[v]],x=h[v+1];try{x.call(b)}finally{}}else try{h.call(c)}finally{}}}}(r,i),function Et(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const v=o[h+3];v>=0?u[c=v]():u[c=-v].unsubscribe(),h+=2}else{const v=u[c=o[h+1]];o[h].call(v)}if(null!==u){for(let h=c+1;h<u.length;h++)(0,u[h])();i[7]=null}}(r,i),1===i[1].type&&i[11].destroy();const o=i[17];if(null!==o&&Kr(i[3])){o!==i[3]&&U(o,i);const u=i[19];null!==u&&u.detachView(r)}!function Eg(r){Yd.delete(r[20])}(i)}}function Xt(r,i,o){return function yn(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];{const{componentOffset:c}=u;if(c>-1){const{encapsulation:h}=r.data[u.directiveStart+c];if(h===Ve.None||h===Ve.Emulated)return null}return Br(u,o)}}(r,i.parent,o)}function Pi(r,i,o,u,c){r.insertBefore(i,o,u,c)}function Ho(r,i,o){r.appendChild(i,o)}function pc(r,i,o,u,c){null!==u?Pi(r,i,o,u,c):Ho(r,i,o)}function Hu(r,i){return r.parentNode(i)}function cl(r,i,o){return ll(r,i,o)}let Fs,Ag,Of,ll=function Za(r,i,o){return 40&r.type?Br(r,o):null};function Do(r,i,o,u){const c=Xt(r,u,i),h=i[11],b=cl(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let x=0;x<o.length;x++)pc(h,c,o[x],b,!1);else pc(h,c,o,b,!1)}function mc(r,i){if(null!==i){const o=i.type;if(3&o)return Br(i,r);if(4&o)return yu(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return mc(r,u);{const c=r[i.index];return Kr(c)?yu(-1,c):mr(c)}}if(32&o)return Ci(i,r)()||mr(r[i.index]);{const u=yc(r,i);return null!==u?Array.isArray(u)?u[0]:mc($u(r[16]),u):mc(r,i.next)}}return null}function yc(r,i){return null!==i?r[16][6].projection[i.projection]:null}function yu(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return mc(u,c)}return i[7]}function Gu(r,i,o,u,c,h,v){for(;null!=o;){const b=u[o.index],x=o.type;if(v&&0===i&&(b&&ti(mr(b),u),o.flags|=2),32!=(32&o.flags))if(8&x)Gu(r,i,o.child,u,c,h,!1),hc(i,r,c,b,h);else if(32&x){const F=Ci(o,u);let W;for(;W=F();)hc(i,r,c,W,h);hc(i,r,c,b,h)}else 16&x?Vy(r,i,u,o,c,h):hc(i,r,c,b,h);o=v?o.projectionNext:o.next}}function ld(r,i,o,u,c,h){Gu(o,u,r.firstChild,i,c,h,!1)}function Vy(r,i,o,u,c,h){const v=o[16],x=v[6].projection[u.projection];if(Array.isArray(x))for(let F=0;F<x.length;F++)hc(i,r,c,x[F],h);else Gu(r,i,x,v[3],c,h,!0)}function dd(r,i,o){""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o)}function Cg(r,i,o){const{mergedAttrs:u,classes:c,styles:h}=o;null!==u&&Tr(r,i,u),null!==c&&dd(r,i,c),null!==h&&function th(r,i,o){r.setAttribute(i,"style",o)}(r,i,h)}function vc(r){return function Tg(){if(void 0===Fs&&(Fs=null,kt.trustedTypes))try{Fs=kt.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Fs}()?.createHTML(r)||r}function U0(r){Ag=r}function xg(){if(void 0===Of&&(Of=null,kt.trustedTypes))try{Of=kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Of}function $y(r){return xg()?.createHTML(r)||r}function Gy(r){return xg()?.createScriptURL(r)||r}class zy{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ct})`}}function _c(r){return r instanceof zy?r.changingThisBreaksApplicationSecurity:r}function hd(r,i){const o=function z0(r){return r instanceof zy&&r.getTypeName()||null}(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Ct})`)}return o===i}class dl{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(vc(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class qy{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=vc(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=vc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const v=o.item(c).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&i.removeAttribute(v)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Nf=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Es(r){return(r=String(r)).match(Nf)?r:"unsafe:"+r}function Qn(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function fd(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const hl=Qn("area,br,col,hr,img,wbr"),Go=Qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zy=Qn("rp,rt"),_u=fd(hl,fd(Go,Qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fd(Zy,Qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fd(Zy,Go)),fi=Qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rg=fd(fi,Qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nh=Qn("script,style,template");class Z0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!_u.hasOwnProperty(o))return this.sanitizedSomething=!0,!nh.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const h=u.item(c),v=h.name,b=v.toLowerCase();if(!Rg.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let x=h.value;fi[b]&&(x=Es(x)),this.buf.push(" ",v,'="',rh(x),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();_u.hasOwnProperty(o)&&!hl.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(rh(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const Ec=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wc=/([^\#-~ |!])/g;function rh(r){return r.replace(/&/g,"&amp;").replace(Ec,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(wc,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Eu;function fl(r){return"content"in r&&function Ic(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Ki=(()=>((Ki=Ki||{})[Ki.NONE=0]="NONE",Ki[Ki.HTML=1]="HTML",Ki[Ki.STYLE=2]="STYLE",Ki[Ki.SCRIPT=3]="SCRIPT",Ki[Ki.URL=4]="URL",Ki[Ki.RESOURCE_URL=5]="RESOURCE_URL",Ki))();function pl(r){const i=sh();return i?$y(i.sanitize(Ki.HTML,r)||""):hd(r,"HTML")?$y(_c(r)):function wu(r,i){let o=null;try{Eu=Eu||function Mg(r){const i=new qy(r);return function Oi(){try{return!!(new window.DOMParser).parseFromString(vc(""),"text/html")}catch{return!1}}()?new dl(i):i}(r);let u=i?String(i):"";o=Eu.getInertBodyElement(u);let c=5,h=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=h,h=o.innerHTML,o=Eu.getInertBodyElement(u)}while(u!==h);return vc((new Z0).sanitizeChildren(fl(o)||o))}finally{if(o){const u=fl(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}(function jy(){return void 0!==Ag?Ag:typeof document<"u"?document:void 0}(),Qe(r))}function zu(r){const i=sh();return i?i.sanitize(Ki.URL,r)||"":hd(r,"URL")?_c(r):Es(Qe(r))}function kf(r){const i=sh();if(i)return Gy(i.sanitize(Ki.RESOURCE_URL,r)||"");if(hd(r,"ResourceURL"))return Gy(_c(r));throw new Ue(904,!1)}function gd(r,i,o){return function Ff(r,i){return"src"===i&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===i&&("base"===r||"link"===r)?kf:zu}(i,o)(r)}function sh(){const r=S();return r&&r[12]}const Lf=new Wn("ENVIRONMENT_INITIALIZER"),Og=new Wn("INJECTOR",-1),ws=new Wn("INJECTOR_DEF_TYPES");class Ng{get(i,o=wn){if(o===wn){const u=new Error(`NullInjectorError: No provider for ${Ie(i)}!`);throw u.name="NullInjectorError",u}return o}}function Dc(...r){return{\u0275providers:kg(0,r),\u0275fromNgModule:!0}}function kg(r,...i){const o=[],u=new Set;let c;return no(i,h=>{const v=h;bc(v,o,[],u)&&(c||(c=[]),c.push(v))}),void 0!==c&&Fg(c,o),o}function Fg(r,i){for(let o=0;o<r.length;o++){const{providers:c}=r[o];Vf(c,h=>{i.push(h)})}}function bc(r,i,o,u){if(!(r=pe(r)))return!1;let c=null,h=Hn(r);const v=!h&&Cn(r);if(h||v){if(v&&!v.standalone)return!1;c=r}else{const x=r.ngModule;if(h=Hn(x),!h)return!1;c=x}const b=u.has(c);if(v){if(b)return!1;if(u.add(c),v.dependencies){const x="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const F of x)bc(F,i,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!b){let F;u.add(c);try{no(h.imports,W=>{bc(W,i,o,u)&&(F||(F=[]),F.push(W))})}finally{}void 0!==F&&Fg(F,i)}if(!b){const F=xs(c)||(()=>new c);i.push({provide:c,useFactory:F,deps:de},{provide:ws,useValue:c,multi:!0},{provide:Lf,useValue:()=>st(c),multi:!0})}const x=h.providers;null==x||b||Vf(x,W=>{i.push(W)})}}return c!==r&&void 0!==r.providers}function Vf(r,i){for(let o of r)He(o)&&(o=o.\u0275providers),Array.isArray(o)?Vf(o,i):i(o)}const Jn=ve({provide:String,useValue:ve});function Ir(r){return null!==r&&"object"==typeof r&&Jn in r}function Wu(r){return"function"==typeof r}const oh=new Wn("Set Injector scope."),ah={},Xy={};let Bf;function jf(){return void 0===Bf&&(Bf=new Ng),Bf}class ml{}class ev extends ml{get destroyed(){return this._destroyed}constructor(i,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vl(i,v=>this.processProvider(v)),this.records.set(Og,md(void 0,this)),c.has("environment")&&this.records.set(ml,md(void 0,this));const h=this.records.get(oh);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(ws.multi,de,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Zt(this),u=ir(void 0);try{return i()}finally{Zt(o),ir(u)}}get(i,o=wn,u=gt.Default){this.assertNotDestroyed(),u=Ut(u);const c=Zt(this),h=ir(void 0);try{if(!(u&gt.SkipSelf)){let b=this.records.get(i);if(void 0===b){const x=function yl(r){return"function"==typeof r||"object"==typeof r&&r instanceof Wn}(i)&&xn(i);b=x&&this.injectableDefInScope(x)?md($f(i),ah):null,this.records.set(i,b)}if(null!=b)return this.hydrate(i,b)}return(u&gt.Self?jf():this.parent).get(i,o=u&gt.Optional&&o===wn?null:o)}catch(v){if("NullInjectorError"===v.name){if((v[Dr]=v[Dr]||[]).unshift(Ie(i)),c)throw v;return function ce(r,i,o,u){const c=r[Dr];throw i[ri]&&c.unshift(i[ri]),r.message=function oe(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let c=Ie(i);if(Array.isArray(i))c=i.map(Ie).join(" -> ");else if("object"==typeof i){let h=[];for(let v in i)if(i.hasOwnProperty(v)){let b=i[v];h.push(v+":"+("string"==typeof b?JSON.stringify(b):Ie(b)))}c=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(Ti,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Dr]=null,r}(v,i,"R3InjectorError",this.source)}throw v}finally{ir(h),Zt(c)}}resolveInjectorInitializers(){const i=Zt(this),o=ir(void 0);try{const u=this.get(Lf.multi,de,gt.Self);for(const c of u)c()}finally{Zt(i),ir(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(Ie(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processProvider(i){let o=Wu(i=pe(i))?i:pe(i&&i.provide);const u=function tv(r){return Ir(r)?md(void 0,r.useValue):md(nv(r),ah)}(i);if(Wu(i)||!0!==i.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=md(void 0,ah,!0),c.factory=()=>on(c.multi),this.records.set(o,c)),o=i,c.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===ah&&(o.value=Xy,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Lg(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=pe(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function $f(r){const i=xn(r),o=null!==i?i.factory:xs(r);if(null!==o)return o;if(r instanceof Wn)throw new Ue(204,!1);if(r instanceof Function)return function Y0(r){const i=r.length;if(i>0)throw ia(i,"?"),new Ue(204,!1);const o=function vn(r){const i=r&&(r[pr]||r[Pn]);if(i){const o=function Gt(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Ue(204,!1)}function nv(r,i,o){let u;if(Wu(r)){const c=pe(r);return xs(c)||$f(c)}if(Ir(r))u=()=>pe(r.useValue);else if(function Uf(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...on(r.deps||[]));else if(function gl(r){return!(!r||!r.useExisting)}(r))u=()=>st(pe(r.useExisting));else{const c=pe(r&&(r.useClass||r.provide));if(!function Q0(r){return!!r.deps}(r))return xs(c)||$f(c);u=()=>new c(...on(r.deps))}return u}function md(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function vl(r,i){for(const o of r)Array.isArray(o)?vl(o,i):o&&He(o)?vl(o.\u0275providers,i):i(o)}class Hf{}class uh{}class iv{resolveComponentFactory(i){throw function rv(r){const i=Error(`No component factory found for ${Ie(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let Iu=(()=>{class r{}return r.NULL=new iv,r})();function sv(){return Tc(Ce(),S())}function Tc(r,i){return new Sc(Br(r,i))}let Sc=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=sv,r})();function Ug(r){return r instanceof Sc?r.nativeElement:r}class Ac{}let zo=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function Bg(){const r=S(),o=In(Ce().index,r);return(yi(o)?o:r)[11]}(),r})(),Gf=(()=>{class r{}return r.\u0275prov=Ht({token:r,providedIn:"root",factory:()=>null}),r})();class yd{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const jg=new yd("15.1.4"),ch={};function zf(r){return r.ngOriginalError}class lh{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&zf(i);for(;o&&zf(o);)o=zf(o);return o||null}}function vd(r){return r.ownerDocument.defaultView}function Ta(r){return r instanceof Function?r():r}function $g(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const h=i.length;if(c+h===u||r.charCodeAt(c+h)<=32)return c}o=c+1}}const Hg="ng-template";function Wf(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==$g(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function cv(r){return 4===r.type&&r.value!==Hg}function nE(r,i,o){return i===(4!==r.type||o?r.value:Hg)}function lv(r,i,o){let u=4;const c=r.attrs||[],h=function dv(r){for(let i=0;i<r.length;i++)if(gs(r[i]))return i;return r.length}(c);let v=!1;for(let b=0;b<i.length;b++){const x=i[b];if("number"!=typeof x){if(!v)if(4&u){if(u=2|1&u,""!==x&&!nE(r,x,o)||""===x&&1===i.length){if(bo(u))return!1;v=!0}}else{const F=8&u?x:i[++b];if(8&u&&null!==r.attrs){if(!Wf(r.attrs,F,o)){if(bo(u))return!1;v=!0}continue}const ee=wl(8&u?"class":x,c,cv(r),o);if(-1===ee){if(bo(u))return!1;v=!0;continue}if(""!==F){let me;me=ee>h?"":c[ee+1].toLowerCase();const Se=8&u?me:null;if(Se&&-1!==$g(Se,F,0)||2&u&&F!==me){if(bo(u))return!1;v=!0}}}}else{if(!v&&!bo(u)&&!bo(x))return!1;if(v&&bo(x))continue;v=!1,u=x|1&u}}return bo(u)||v}function bo(r){return 0==(1&r)}function wl(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let h=!1;for(;c<i.length;){const v=i[c];if(v===r)return c;if(3===v||6===v)h=!0;else{if(1===v||2===v){let b=i[++c];for(;"string"==typeof b;)b=i[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=h?1:2}return-1}return function _d(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function Gg(r,i,o=!1){for(let u=0;u<i.length;u++)if(lv(r,i[u],o))return!0;return!1}function hv(r,i){e:for(let o=0;o<i.length;o++){const u=i[o];if(r.length===u.length){for(let c=0;c<r.length;c++)if(r[c]!==u[c])continue e;return!0}}return!1}function zg(r,i){return r?":not("+i.trim()+")":i}function hh(r){let i=r[0],o=1,u=2,c="",h=!1;for(;o<r.length;){let v=r[o];if("string"==typeof v)if(2&u){const b=r[++o];c+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&u?c+="."+v:4&u&&(c+=" "+v);else""!==c&&!bo(v)&&(i+=zg(h,c),c=""),u=v,h=h||!bo(u);o++}return""!==c&&(i+=zg(h,c)),i}const Wt={};function fh(r){ph(R(),S(),jr()+r,!1)}function ph(r,i,o,u){if(!u)if(3==(3&i[2])){const h=r.preOrderCheckHooks;null!==h&&pu(i,h,o)}else{const h=r.preOrderHooks;null!==h&&T(i,h,0,o)}zi(o)}function qg(r,i=null,o=null,u){const c=bl(r,i,o,u);return c.resolveInjectorInitializers(),c}function bl(r,i=null,o=null,u,c=new Set){const h=[o||de,Dc(r)];return u=u||("object"==typeof r?void 0:Ie(r)),new ev(h,i||jf(),u||null,c)}let Zu=(()=>{class r{static create(o,u){if(Array.isArray(o))return qg({name:""},u,o,"");{const c=o.name??"";return qg({name:c},o.parent,o.providers,c)}}}return r.THROW_IF_NOT_FOUND=wn,r.NULL=new Ng,r.\u0275prov=Ht({token:r,providedIn:"any",factory:()=>st(Og)}),r.__NG_ELEMENT_ID__=-1,r})();function Cl(r,i=gt.Default){const o=S();return null===o?st(r,i):gu(Ce(),o,pe(r),i)}function wd(){throw new Error("invalid")}function Kf(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const h=o[u+1];if(-1!==h){const v=r.data[h];Ps(o[u]),v.contentQueries(2,i[h],h)}}}function _h(r,i,o,u,c,h,v,b,x,F,W){const ee=i.blueprint.slice();return ee[0]=c,ee[2]=76|u,(null!==W||r&&1024&r[2])&&(ee[2]|=1024),qs(ee),ee[3]=ee[15]=r,ee[8]=o,ee[10]=v||r&&r[10],ee[11]=b||r&&r[11],ee[12]=x||r&&r[12]||null,ee[9]=F||r&&r[9]||null,ee[6]=h,ee[20]=function vg(){return Qd++}(),ee[21]=W,ee[16]=2==i.type?r[16]:ee,ee}function Tl(r,i,o,u,c){let h=r.data[i];if(null===h)h=function Yf(r,i,o,u,c){const h=St(),v=Mi(),x=r.data[i]=function fE(r,i,o,u,c,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=x),null!==h&&(v?null==h.child&&null!==x.parent&&(h.child=x):null===h.next&&(h.next=x)),x}(r,i,o,u,c),function Fa(){return un.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=o,h.value=u,h.attrs=c;const v=function Nn(){const r=un.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return Yn(h,!0),h}function Eh(r,i,o,u){if(0===o)return-1;const c=i.length;for(let h=0;h<o;h++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function Qg(r,i,o){Xo(i);try{const u=r.viewQuery;null!==u&&Th(1,u,o);const c=r.template;null!==c&&Qf(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Kf(r,i),r.staticViewQueries&&Th(2,r.viewQuery,o);const h=r.components;null!==h&&function vh(r,i){for(let o=0;o<i.length;o++)Nl(r,i[o])}(i,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,pa()}}function Oc(r,i,o,u){const c=i[2];if(128!=(128&c)){Xo(i);try{qs(i),function is(r){return un.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Qf(r,i,o,2,u);const v=3==(3&c);if(v){const F=r.preOrderCheckHooks;null!==F&&pu(i,F,null)}else{const F=r.preOrderHooks;null!==F&&T(i,F,0,null),V(i,0)}if(function vE(r){for(let i=ud(r);null!==i;i=cd(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u];512&c[2]||ar(c[3],1),c[2]|=512}}}(i),function yE(r){for(let i=ud(r);null!==i;i=cd(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];Jr(u)&&Oc(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&Kf(r,i),v){const F=r.contentCheckHooks;null!==F&&pu(i,F)}else{const F=r.contentHooks;null!==F&&T(i,F,1),V(i,1)}!function bu(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)zi(~c);else{const h=c,v=o[++u],b=o[++u];La(v,h),b(2,i[h])}}}finally{zi(-1)}}(r,i);const b=r.components;null!==b&&function Tv(r,i){for(let o=0;o<i.length;o++)_E(r,i[o])}(i,b);const x=r.viewQuery;if(null!==x&&Th(2,x,u),v){const F=r.viewCheckHooks;null!==F&&pu(i,F)}else{const F=r.viewHooks;null!==F&&T(i,F,2),V(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,ar(i[3],-1))}finally{pa()}}}function Qf(r,i,o,u,c){const h=jr(),v=2&u;try{zi(-1),v&&i.length>22&&ph(r,i,22,!1),o(u,c)}finally{zi(h)}}function Jg(r,i,o){if(Pa(i)){const c=i.directiveEnd;for(let h=i.directiveStart;h<c;h++){const v=r.data[h];v.contentQueries&&v.contentQueries(1,o[h],h)}}}function Jf(r,i,o){No()&&(function Ml(r,i,o,u){const c=o.directiveStart,h=o.directiveEnd;uo(o)&&function kv(r,i,o){const u=Br(i,r),c=Xg(o),h=r[10],v=bh(r,_h(r,c,null,o.onPush?32:16,u,i,h,h.createRenderer(u,o),null,null,null));r[i.index]=v}(i,o,r.data[c+o.componentOffset]),r.firstCreatePass||Xs(o,i),ti(u,i);const v=o.initialInputs;for(let b=c;b<h;b++){const x=r.data[b],F=vr(i,r,b,o);ti(F,i),null!==v&&Pl(0,b-c,F,x,0,v),Er(x)&&(In(o.index,i)[8]=vr(i,r,b,o))}}(r,i,o,Br(o,i)),64==(64&o.flags)&&Id(r,i,o))}function wh(r,i,o=Br){const u=i.localNames;if(null!==u){let c=i.index+1;for(let h=0;h<u.length;h+=2){const v=u[h+1],b=-1===v?o(i,r):r[v];r[c++]=b}}}function Xg(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=em(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function em(r,i,o,u,c,h,v,b,x,F){const W=22+u,ee=W+c,me=function Sv(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:Wt);return o}(W,ee),Se="function"==typeof F?F():F;return me[1]={type:r,blueprint:me,template:o,queries:null,viewQuery:b,declTNode:i,data:me.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:x,consts:Se,incompleteFirstPass:!1}}function Av(r,i,o,u){const c=im(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&ep(r).push(u,c.length-1))}function Ku(r,i,o,u){for(let c in r)if(r.hasOwnProperty(c)){o=null===o?{}:o;const h=r[c];null===u?Sl(o,i,c,h):u.hasOwnProperty(c)&&Sl(o,i,u[c],h)}return o}function Sl(r,i,o,u){r.hasOwnProperty(o)?r[o].push(i,u):r[o]=[i,u]}function oa(r,i,o,u,c,h,v,b){const x=Br(i,o);let W,F=i.inputs;!b&&null!=F&&(W=F[u])?(Dd(r,o,W,u,c),uo(i)&&Yu(o,i.index)):3&i.type&&(u=function pE(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=v?v(c,i.value||"",u):c,h.setProperty(x,u,c))}function Yu(r,i){const o=In(i,r);16&o[2]||(o[2]|=32)}function Xf(r,i,o,u){let c=!1;if(No()){const h=null===u?null:{"":-1},v=function tm(r,i){const o=r.directiveRegistry;let u=null,c=null;if(o)for(let h=0;h<o.length;h++){const v=o[h];if(Gg(i,v.selectors,!1))if(u||(u=[]),Er(v))if(null!==v.findHostDirectiveDefs){const b=[];c=c||new Map,v.findHostDirectiveDefs(v,b,c),u.unshift(...b,v),Dh(r,i,b.length)}else u.unshift(v),Dh(r,i,0);else c=c||new Map,v.findHostDirectiveDefs?.(v,u,c),u.push(v)}return null===u?null:[u,c]}(r,o);let b,x;null===v?b=x=null:[b,x]=v,null!==b&&(c=!0,Ih(r,i,o,b,h,x)),h&&function Pv(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const h=o[i[c+1]];if(null==h)throw new Ue(-301,!1);u.push(i[c],h)}}}(o,u,h)}return o.mergedAttrs=ui(o.mergedAttrs,o.attrs),c}function Ih(r,i,o,u,c,h){for(let F=0;F<u.length;F++)eo(Xs(o,i),r,u[F].type);!function gE(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}(o,r.data.length,u.length);for(let F=0;F<u.length;F++){const W=u[F];W.providersResolver&&W.providersResolver(W)}let v=!1,b=!1,x=Eh(r,i,u.length,null);for(let F=0;F<u.length;F++){const W=u[F];o.mergedAttrs=ui(o.mergedAttrs,W.hostAttrs),Nv(r,o,i,x,W),Ov(x,W,c),null!==W.contentQueries&&(o.flags|=4),(null!==W.hostBindings||null!==W.hostAttrs||0!==W.hostVars)&&(o.flags|=64);const ee=W.type.prototype;!v&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),v=!0),!b&&(ee.ngOnChanges||ee.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),b=!0),x++}!function xv(r,i,o){const c=i.directiveEnd,h=r.data,v=i.attrs,b=[];let x=null,F=null;for(let W=i.directiveStart;W<c;W++){const ee=h[W],me=o?o.get(ee):null,Xe=me?me.outputs:null;x=Ku(ee.inputs,W,x,me?me.inputs:null),F=Ku(ee.outputs,W,F,Xe);const wt=null===x||null===v||cv(i)?null:mE(x,W,v);b.push(wt)}null!==x&&(x.hasOwnProperty("class")&&(i.flags|=8),x.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=b,i.inputs=x,i.outputs=F}(r,o,h)}function Id(r,i,o){const u=o.directiveStart,c=o.directiveEnd,h=o.index,v=function Jo(){return un.lFrame.currentDirectiveIndex}();try{zi(h);for(let b=u;b<c;b++){const x=r.data[b],F=i[b];Va(b),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&Rv(x,F)}}finally{zi(-1),Va(v)}}function Rv(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Dh(r,i,o){i.componentOffset=o,(r.components||(r.components=[])).push(i.index)}function Ov(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;Er(i)&&(o[""]=r)}}function Nv(r,i,o,u,c){r.data[u]=c;const h=c.factory||(c.factory=xs(c.type)),v=new Re(h,Er(c),Cl);r.blueprint[u]=v,o[u]=v,function Al(r,i,o,u,c){const h=c.hostBindings;if(h){let v=r.hostBindingOpCodes;null===v&&(v=r.hostBindingOpCodes=[]);const b=~i.index;(function xl(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(v)!=b&&v.push(b),v.push(o,u,h)}}(r,i,u,Eh(r,o,c.hostVars,Wt),c)}function Sa(r,i,o,u,c,h){const v=Br(r,i);!function Rl(r,i,o,u,c,h,v){if(null==h)r.removeAttribute(i,c,o);else{const b=null==v?Qe(h):v(h,u||"",c);r.setAttribute(i,c,b,o)}}(i[11],v,h,r.value,o,u,c)}function Pl(r,i,o,u,c,h){const v=h[i];if(null!==v){const b=u.setInput;for(let x=0;x<v.length;){const F=v[x++],W=v[x++],ee=v[x++];null!==b?u.setInput(o,ee,F,W):o[W]=ee}}}function mE(r,i,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;if(r.hasOwnProperty(h)){null===u&&(u=[]);const v=r[h];for(let b=0;b<v.length;b+=2)if(v[b]===i){u.push(h,v[b+1],o[c+1]);break}}c+=2}else c+=2;else c+=4}return u}function nm(r,i,o,u){return[r,!0,!1,i,null,0,u,o,null,null]}function _E(r,i){const o=In(i,r);if(Jr(o)){const u=o[1];48&o[2]?Oc(u,o,u.template,o[8]):o[5]>0&&Ol(o)}}function Ol(r){for(let u=ud(r);null!==u;u=cd(u))for(let c=10;c<u.length;c++){const h=u[c];if(Jr(h))if(512&h[2]){const v=h[1];Oc(v,h,v.template,h[8])}else h[5]>0&&Ol(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=In(o[u],r);Jr(c)&&c[5]>0&&Ol(c)}}function Nl(r,i){const o=In(i,r),u=o[1];(function Nc(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),Qg(u,o,o[8])}function bh(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function rm(r){for(;r;){r[2]|=32;const i=$u(r);if(Oa(r)&&!i)return r;r=i}return null}function Ch(r,i,o,u=!0){const c=i[10];c.begin&&c.begin();try{Oc(r,i,r.template,o)}catch(v){throw u&&sm(i,v),v}finally{c.end&&c.end()}}function Th(r,i,o){Ps(0),i(r,o)}function im(r){return r[7]||(r[7]=[])}function ep(r){return r.cleanup||(r.cleanup=[])}function sm(r,i){const o=r[9],u=o?o.get(lh,null):null;u&&u.handleError(i)}function Dd(r,i,o,u,c){for(let h=0;h<o.length;){const v=o[h++],b=o[h++],x=i[v],F=r.data[v];null!==F.setInput?F.setInput(x,c,u,b):x[b]=c}}function Qu(r,i,o){const u=Ws(i,r);!function Rf(r,i,o){r.setValue(i,o)}(r[11],u,o)}function bd(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,h=0;if(null!==i)for(let v=0;v<i.length;v++){const b=i[v];"number"==typeof b?h=b:1==h?c=Te(c,b):2==h&&(u=Te(u,b+": "+i[++v]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}function kl(r,i,o,u,c=!1){for(;null!==o;){const h=i[o.index];if(null!==h&&u.push(mr(h)),Kr(h))for(let b=10;b<h.length;b++){const x=h[b],F=x[1].firstChild;null!==F&&kl(x[1],x,F,u)}const v=o.type;if(8&v)kl(r,i,o.child,u);else if(32&v){const b=Ci(o,i);let x;for(;x=b();)u.push(x)}else if(16&v){const b=yc(i,o);if(Array.isArray(b))u.push(...b);else{const x=$u(i[16]);kl(x[1],x,b,u,!0)}}o=c?o.projectionNext:o.next}return u}class Sh{get rootNodes(){const i=this._lView,o=i[1];return kl(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Kr(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(q(i,u),qi(o,u))}this._attachedToViewContainer=!1}te(this._lView[1],this._lView)}onDestroy(i){Av(this._lView[1],this._lView,null,i)}markForCheck(){rm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ch(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function E(r,i){ld(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Ue(902,!1);this._appRef=i}}class Lv extends Sh{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Ch(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class Cd extends Iu{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Cn(i);return new Td(o,this.ngModule)}}function Ah(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}class Vv{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){u=Ut(u);const c=this.injector.get(i,ch,u);return c!==ch||o===ch?c:this.parentInjector.get(i,o,u)}}class Td extends uh{get inputs(){return Ah(this.componentDef.inputs)}get outputs(){return Ah(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function rE(r){return r.map(hh).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,u,c){let h=(c=c||this.ngModule)instanceof ml?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new Vv(i,h):i,b=v.get(Ac,null);if(null===b)throw new Ue(407,!1);const x=v.get(Gf,null),F=b.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",ee=u?function hE(r,i,o){return r.selectRootElement(i,o===Ve.ShadowDom)}(F,u,this.componentDef.encapsulation):gn(F,W,function xh(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(W)),me=this.componentDef.onPush?288:272,Se=em(0,null,null,1,0,null,null,null,null,null),Xe=_h(null,Se,null,me,null,null,b,F,x,v,null);let wt,Ft;Xo(Xe);try{const Jt=this.componentDef;let mn,mt=null;Jt.findHostDirectiveDefs?(mn=[],mt=new Map,Jt.findHostDirectiveDefs(Jt,mn,mt),mn.push(Jt)):mn=[Jt];const An=function np(r,i){const o=r[1];return r[22]=i,Tl(o,22,2,"#host",null)}(Xe,ee),Li=function rp(r,i,o,u,c,h,v,b){const x=c[1];!function Uv(r,i,o,u){for(const c of r)i.mergedAttrs=ui(i.mergedAttrs,c.hostAttrs);null!==i.mergedAttrs&&(bd(i,i.mergedAttrs,!0),null!==o&&Cg(u,o,i))}(u,r,i,v);const F=h.createRenderer(i,o),W=_h(c,Xg(o),null,o.onPush?32:16,c[r.index],r,h,F,b||null,null,null);return x.firstCreatePass&&Dh(x,r,u.length-1),bh(c,W),c[r.index]=W}(An,ee,Jt,mn,Xe,b,F);Ft=wr(Se,22),ee&&function Sd(r,i,o,u){if(u)Tr(r,o,["ng-version",jg.full]);else{const{attrs:c,classes:h}=function iE(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===c?""!==h&&i.push(h,r[++u]):8===c&&o.push(h);else{if(!bo(c))break;c=h}u++}return{attrs:i,classes:o}}(i.selectors[0]);c&&Tr(r,o,c),h&&h.length>0&&dd(r,o,h.join(" "))}}(F,Jt,ee,u),void 0!==o&&function Bv(r,i,o){const u=r.projection=[];for(let c=0;c<i.length;c++){const h=o[c];u.push(null!=h?Array.from(h):null)}}(Ft,this.ngContentSelectors,o),wt=function kc(r,i,o,u,c,h){const v=Ce(),b=c[1],x=Br(v,c);Ih(b,c,v,o,null,u);for(let W=0;W<o.length;W++)ti(vr(c,b,v.directiveStart+W,v),c);Id(b,c,v),x&&ti(x,c);const F=vr(c,b,v.directiveStart+v.componentOffset,v);if(r[8]=c[8]=F,null!==h)for(const W of h)W(F,i);return Jg(b,v,r),F}(Li,Jt,mn,mt,Xe,[Fl]),Qg(Se,Xe,null)}finally{pa()}return new aa(this.componentType,wt,Tc(Ft,Xe),Xe,Ft)}}class aa extends Hf{constructor(i,o,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new Lv(c),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[i])){const h=this._rootLView;Dd(h[1],h,c,i,o),Yu(h,this._tNode.index)}}get injector(){return new Os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Fl(){const r=Ce();ja(S()[1],r)}function Fc(r){let i=function jv(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;i;){let c;if(Er(r))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Ue(903,!1);c=i.\u0275dir}if(c){if(o){u.push(c);const v=r;v.inputs=Cu(r.inputs),v.declaredInputs=Cu(r.declaredInputs),v.outputs=Cu(r.outputs);const b=c.hostBindings;b&&IE(r,b);const x=c.viewQuery,F=c.contentQueries;if(x&&Hv(r,x),F&&wE(r,F),be(r.inputs,c.inputs),be(r.declaredInputs,c.declaredInputs),be(r.outputs,c.outputs),Er(c)&&c.data.animation){const W=r.data;W.animation=(W.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let v=0;v<h.length;v++){const b=h[v];b&&b.ngInherit&&b(r),b===Fc&&(o=!1)}}i=Object.getPrototypeOf(i)}!function $v(r){let i=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=i+=c.hostVars,c.hostAttrs=ui(c.hostAttrs,o=ui(o,c.hostAttrs))}}(u)}function Cu(r){return r===It?{}:r===de?[]:r}function Hv(r,i){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{i(u,c),o(u,c)}:i}function wE(r,i){const o=r.contentQueries;r.contentQueries=o?(u,c,h)=>{i(u,c,h),o(u,c,h)}:i}function IE(r,i){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{i(u,c),o(u,c)}:i}let Vc=null;function Uc(){if(!Vc){const r=kt.Symbol;if(r&&r.iterator)Vc=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Vc=u)}}}return Vc}function sp(r){return!!am(r)&&(Array.isArray(r)||!(r instanceof Map)&&Uc()in r)}function am(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Vr(r,i,o){return r[i]=o}function Co(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function Ll(r,i,o,u){const c=Co(r,i,o);return Co(r,i+1,u)||c}function cm(r,i,o,u){const c=S();return Co(c,ko(),i)&&(R(),Sa(hr(),c,r,i,o,u)),cm}function Ad(r,i,o,u){return Co(r,ko(),o)?i+Qe(o)+u:Wt}function Vl(r,i,o,u,c,h){const b=Ll(r,Gi(),o,c);return ss(2),b?i+Qe(o)+u+Qe(c)+h:Wt}function Bc(r,i,o,u,c,h,v,b){const F=function op(r,i,o,u,c){const h=Ll(r,i,o,u);return Co(r,i+2,c)||h}(r,Gi(),o,c,v);return ss(3),F?i+Qe(o)+u+Qe(c)+h+Qe(v)+b:Wt}function Ul(r,i,o,u,c,h,v,b){const x=S(),F=R(),W=r+22,ee=F.firstCreatePass?function xd(r,i,o,u,c,h,v,b,x){const F=i.consts,W=Tl(i,r,4,v||null,Xr(F,b));Xf(i,o,W,Xr(F,x)),ja(i,W);const ee=W.tViews=em(2,W,u,c,h,i.directiveRegistry,i.pipeRegistry,null,i.schemas,F);return null!==i.queries&&(i.queries.template(i,W),ee.queries=i.queries.embeddedTView(W)),W}(W,F,x,i,o,u,c,h,v):F.data[W];Yn(ee,!1);const me=x[11].createComment("");Do(F,x,me,ee),ti(me,x),bh(x,x[W]=nm(me,x,me,ee)),co(ee)&&Jf(F,x,ee),null!=v&&wh(x,ee,b)}function cp(r,i,o){const u=S();return Co(u,ko(),i)&&oa(R(),hr(),u,r,i,u[11],o,!1),cp}function lp(r,i,o,u,c){const v=c?"class":"style";Dd(r,o,i.inputs[v],v,u)}function dp(r,i,o,u){const c=S(),h=R(),v=22+r,b=c[11],x=c[v]=gn(b,i,function ai(){return un.lFrame.currentNamespace}()),F=h.firstCreatePass?function Yv(r,i,o,u,c,h,v){const b=i.consts,F=Tl(i,r,2,c,Xr(b,h));return Xf(i,o,F,Xr(b,v)),null!==F.attrs&&bd(F,F.attrs,!1),null!==F.mergedAttrs&&bd(F,F.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,F),F}(v,h,c,0,i,o,u):h.data[v];return Yn(F,!0),Cg(b,x,F),32!=(32&F.flags)&&Do(h,c,x,F),0===function po(){return un.lFrame.elementDepthCount}()&&ti(x,c),function ns(){un.lFrame.elementDepthCount++}(),co(F)&&(Jf(h,c,F),Jg(h,F,c)),null!==u&&wh(c,F),dp}function Md(){let r=Ce();Mi()?wi():(r=r.parent,Yn(r,!1));const i=r;!function ei(){un.lFrame.elementDepthCount--}();const o=R();return o.firstCreatePass&&(ja(o,r),Pa(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Rn(r){return 0!=(8&r.flags)}(i)&&lp(o,i,S(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function _n(r){return 0!=(16&r.flags)}(i)&&lp(o,i,S(),i.stylesWithoutHost,!1),Md}function mm(r,i,o,u){return dp(r,i,o,u),Md(),mm}function Rh(){return S()}function Bl(r){return!!r&&"function"==typeof r.then}function Ph(r){return!!r&&"function"==typeof r.subscribe}const gp=Ph;function Oh(r,i,o,u){const c=S(),h=R(),v=Ce();return function Jv(r,i,o,u,c,h,v){const b=co(u),F=r.firstCreatePass&&ep(r),W=i[8],ee=im(i);let me=!0;if(3&u.type||v){const wt=Br(u,i),Ft=v?v(wt):wt,Jt=ee.length,mn=v?An=>v(mr(An[u.index])):u.index;let mt=null;if(!v&&b&&(mt=function Qv(r,i,o,u){const c=r.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const v=c[h];if(v===o&&c[h+1]===u){const b=i[7],x=c[h+2];return b.length>x?b[x]:null}"string"==typeof v&&(h+=2)}return null}(r,i,c,u.index)),null!==mt)(mt.__ngLastListenerFn__||mt).__ngNextListenerFn__=h,mt.__ngLastListenerFn__=h,me=!1;else{h=Nh(u,i,W,h,!1);const An=o.listen(Ft,c,h);ee.push(h,An),F&&F.push(c,mn,Jt,Jt+1)}}else h=Nh(u,i,W,h,!1);const Se=u.outputs;let Xe;if(me&&null!==Se&&(Xe=Se[c])){const wt=Xe.length;if(wt)for(let Ft=0;Ft<wt;Ft+=2){const Li=i[Xe[Ft]][Xe[Ft+1]].subscribe(h),Ds=ee.length;ee.push(h,Li),F&&F.push(c,u.index,Ds,-(Ds+1))}}}(h,c,c[11],v,r,i,u),Oh}function vm(r,i,o,u){try{return!1!==o(u)}catch(c){return sm(r,c),!1}}function Nh(r,i,o,u,c){return function h(v){if(v===Function)return u;rm(r.componentOffset>-1?In(r.index,i):i);let x=vm(i,0,u,v),F=h.__ngNextListenerFn__;for(;F;)x=vm(i,0,F,v)&&x,F=F.__ngNextListenerFn__;return c&&!1===x&&(v.preventDefault(),v.returnValue=!1),x}}function yp(r=1){return function Ba(r){return(un.lFrame.contextLView=function mo(r,i){for(;r>0;)i=i[15],r--;return i}(r,un.lFrame.contextLView))[8]}(r)}function ME(r,i){let o=null;const u=function Il(r){const i=r.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(r);for(let c=0;c<i.length;c++){const h=i[c];if("*"!==h){if(null===u?Gg(r,h,!0):hv(u,h))return c}else o=c}return o}function Xv(r){const i=S()[16][6];if(!i.projection){const u=i.projection=ia(r?r.length:1,null),c=u.slice();let h=i.child;for(;null!==h;){const v=r?ME(h,r):0;null!==v&&(c[v]?c[v].projectionNext=h:u[v]=h,c[v]=h),h=h.next}}}function so(r,i=0,o){const u=S(),c=R(),h=Tl(c,22+r,16,null,o||null);null===h.projection&&(h.projection=i),wi(),32!=(32&h.flags)&&function bg(r,i,o){Vy(i[11],0,i,o,Xt(r,o,i),cl(o.parent||i[6],o,i))}(c,u,h)}function kh(r,i,o,u,c){const h=S(),v=Ad(h,i,o,u);return v!==Wt&&oa(R(),hr(),h,r,v,h[11],c,!1),kh}function Rd(r,i,o,u,c,h,v){const b=S(),x=Vl(b,i,o,u,c,h);return x!==Wt&&oa(R(),hr(),b,r,x,b[11],v,!1),Rd}function jl(r,i,o,u,c,h,v,b,x){const F=S(),W=Bc(F,i,o,u,c,h,v,b);return W!==Wt&&oa(R(),hr(),F,r,W,F[11],x,!1),jl}function Pd(r,i){return r<<17|i<<2}function Gc(r){return r>>17&32767}function Lh(r){return 2|r}function Ka(r){return(131068&r)>>2}function Vh(r,i){return-131069&r|i<<2}function $l(r){return 1|r}function ec(r,i,o,u,c){const h=r[o+1],v=null===i;let b=u?Gc(h):Ka(h),x=!1;for(;0!==b&&(!1===x||v);){const W=r[b+1];o_(r[b],i)&&(x=!0,r[b+1]=u?$l(W):Lh(W)),b=u?Gc(W):Ka(W)}x&&(r[o+1]=u?Lh(h):$l(h))}function o_(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&y(r,i)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ep(r){return r.substring(Is.key,Is.keyEnd)}function a_(r,i){const o=Is.textEnd;return o===i?-1:(i=Is.keyEnd=function Od(r,i,o){for(;i<o&&r.charCodeAt(i)>32;)i++;return i}(r,Is.key=i,o),Hl(r,i,o))}function Hl(r,i,o){for(;i<o&&r.charCodeAt(i)<=32;)i++;return i}function Tm(r,i,o){return lu(r,i,o,!1),Tm}function Bh(r,i){return lu(r,i,null,!0),Bh}function Ya(r,i){for(let o=function Im(r){return function wp(r){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=r.length}(r),a_(r,Hl(r,0,Is.textEnd))}(i);o>=0;o=a_(i,o))_(r,Ep(i),!0)}function lu(r,i,o,u){const c=S(),h=R(),v=ss(2);h.firstUpdatePass&&Ip(h,r,v,u),i!==Wt&&Co(c,v,i)&&c_(h,h.data[jr()],c,c[11],r,c[v+1]=function Pm(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=Ie(_c(r)))),r}(i,o),u,v)}function Am(r,i){return i>=r.expandoStartIndex}function Ip(r,i,o,u){const c=r.data;if(null===c[o+1]){const h=c[jr()],v=Am(r,o);Dp(h,u)&&null===i&&!v&&(i=!1),i=function xm(r,i,o,u){const c=function Ks(r){const i=un.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let h=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(o=Au(o=jh(null,r,i,o,u),i.attrs,u),h=null);else{const v=i.directiveStylingLast;if(-1===v||r[v]!==c)if(o=jh(c,r,i,o,u),null===h){let x=function Mm(r,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Ka(u))return r[Gc(u)]}(r,i,u);void 0!==x&&Array.isArray(x)&&(x=jh(null,r,i,x[1],u),x=Au(x,i.attrs,u),function Nd(r,i,o,u){r[Gc(o?i.classBindings:i.styleBindings)]=u}(r,i,u,x))}else h=function zc(r,i,o){let u;const c=i.directiveEnd;for(let h=1+i.directiveStylingLast;h<c;h++)u=Au(u,r[h].hostAttrs,o);return Au(u,i.attrs,o)}(r,i,u)}return void 0!==h&&(u?i.residualClasses=h:i.residualStyles=h),o}(c,h,i,u),function Em(r,i,o,u,c,h){let v=h?i.classBindings:i.styleBindings,b=Gc(v),x=Ka(v);r[u]=o;let W,F=!1;if(Array.isArray(o)?(W=o[1],(null===W||y(o,W)>0)&&(F=!0)):W=o,c)if(0!==x){const me=Gc(r[b+1]);r[u+1]=Pd(me,b),0!==me&&(r[me+1]=Vh(r[me+1],u)),r[b+1]=function Fh(r,i){return 131071&r|i<<17}(r[b+1],u)}else r[u+1]=Pd(b,0),0!==b&&(r[b+1]=Vh(r[b+1],u)),b=u;else r[u+1]=Pd(x,0),0===b?b=u:r[x+1]=Vh(r[x+1],u),x=u;F&&(r[u+1]=Lh(r[u+1])),ec(r,W,u,!0),ec(r,W,u,!1),function wm(r,i,o,u,c){const h=c?r.residualClasses:r.residualStyles;null!=h&&"string"==typeof i&&y(h,i)>=0&&(o[u+1]=$l(o[u+1]))}(i,W,r,u,h),v=Pd(b,x),h?i.classBindings=v:i.styleBindings=v}(c,h,i,o,v,u)}}function jh(r,i,o,u,c){let h=null;const v=o.directiveEnd;let b=o.directiveStylingLast;for(-1===b?b=o.directiveStart:b++;b<v&&(h=i[b],u=Au(u,h.hostAttrs,c),h!==r);)b++;return null!==r&&(o.directiveStylingLast=b),u}function Au(r,i,o){const u=o?1:2;let c=-1;if(null!==i)for(let h=0;h<i.length;h++){const v=i[h];"number"==typeof v?c=v:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),_(r,v,!!o||i[++h]))}return void 0===r?null:r}function c_(r,i,o,u,c,h,v,b){if(!(3&i.type))return;const x=r.data,F=x[b+1],W=function _p(r){return 1==(1&r)}(F)?l_(x,i,o,c,Ka(F),v):void 0;Ld(W)||(Ld(h)||function RE(r){return 2==(2&r)}(F)&&(h=l_(x,null,o,c,b,v)),function Ca(r,i,o,u,c){if(i)c?r.addClass(o,u):r.removeClass(o,u);else{let h=-1===u.indexOf("-")?void 0:Lr.DashCase;null==c?r.removeStyle(o,u,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=Lr.Important),r.setStyle(o,u,c,h))}}(u,v,Ws(jr(),o),c,h))}function l_(r,i,o,u,c,h){const v=null===i;let b;for(;c>0;){const x=r[c],F=Array.isArray(x),W=F?x[1]:x,ee=null===W;let me=o[c+1];me===Wt&&(me=ee?de:void 0);let Se=ee?w(me,u):W===u?me:void 0;if(F&&!Ld(Se)&&(Se=w(x,u)),Ld(Se)&&(b=Se,v))return b;const Xe=r[c+1];c=v?Gc(Xe):Ka(Xe)}if(null!==i){let x=h?i.residualClasses:i.residualStyles;null!=x&&(b=w(x,u))}return b}function Ld(r){return void 0!==r}function Dp(r,i){return 0!=(r.flags&(i?8:16))}function bp(r,i=""){const o=S(),u=R(),c=r+22,h=u.firstCreatePass?Tl(u,c,1,i,null):u.data[c],v=o[c]=function Mf(r,i){return r.createText(i)}(o[11],i);Do(u,o,v,h),Yn(h,!1)}function Om(r){return Cp("",r,""),Om}function Cp(r,i,o){const u=S(),c=Ad(u,r,i,o);return c!==Wt&&Qu(u,jr(),c),Cp}function $h(r,i,o,u,c){const h=S(),v=Vl(h,r,i,o,u,c);return v!==Wt&&Qu(h,jr(),v),$h}function Hh(r,i,o,u,c,h,v){const b=S(),x=Bc(b,r,i,o,u,c,h,v);return x!==Wt&&Qu(b,jr(),x),Hh}function Vm(r,i,o){!function xa(r,i,o,u){const c=R(),h=ss(2);c.firstUpdatePass&&Ip(c,null,h,u);const v=S();if(o!==Wt&&Co(v,h,o)){const b=c.data[jr()];if(Dp(b,u)&&!Am(c,h)){let x=u?b.classesWithoutHost:b.stylesWithoutHost;null!==x&&(o=Te(x,o||"")),lp(c,b,v,o,u)}else!function Fd(r,i,o,u,c,h,v,b){c===Wt&&(c=de);let x=0,F=0,W=0<c.length?c[0]:null,ee=0<h.length?h[0]:null;for(;null!==W||null!==ee;){const me=x<c.length?c[x+1]:void 0,Se=F<h.length?h[F+1]:void 0;let wt,Xe=null;W===ee?(x+=2,F+=2,me!==Se&&(Xe=ee,wt=Se)):null===ee||null!==W&&W<ee?(x+=2,Xe=W):(F+=2,Xe=ee,wt=Se),null!==Xe&&c_(r,i,o,u,Xe,wt,v,b),W=x<c.length?c[x]:null,ee=F<h.length?h[F]:null}}(c,b,v,v[11],v[h+1],v[h+1]=function kd(r,i,o){if(null==o||""===o)return de;const u=[],c=_c(o);if(Array.isArray(c))for(let h=0;h<c.length;h++)r(u,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&r(u,h,c[h]);else"string"==typeof c&&i(u,c);return u}(r,i,o),u,h)}}(_,Ya,Ad(S(),r,i,o),!0)}const tc=void 0;var qm=["en",[["a","p"],["AM","PM"],tc],[["AM","PM"],tc,tc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tc,"{1} 'at' {0}",tc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nc(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Vd={};function Zm(r){const i=function Km(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=__(i);if(o)return o;const u=i.split("-")[0];if(o=__(u),o)return o;if("en"===u)return qm;throw new Ue(701,!1)}function Pp(r){return Zm(r)[dn.PluralCase]}function __(r){return r in Vd||(Vd[r]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[r]),Vd[r]}var dn=(()=>((dn=dn||{})[dn.LocaleId=0]="LocaleId",dn[dn.DayPeriodsFormat=1]="DayPeriodsFormat",dn[dn.DayPeriodsStandalone=2]="DayPeriodsStandalone",dn[dn.DaysFormat=3]="DaysFormat",dn[dn.DaysStandalone=4]="DaysStandalone",dn[dn.MonthsFormat=5]="MonthsFormat",dn[dn.MonthsStandalone=6]="MonthsStandalone",dn[dn.Eras=7]="Eras",dn[dn.FirstDayOfWeek=8]="FirstDayOfWeek",dn[dn.WeekendRange=9]="WeekendRange",dn[dn.DateFormat=10]="DateFormat",dn[dn.TimeFormat=11]="TimeFormat",dn[dn.DateTimeFormat=12]="DateTimeFormat",dn[dn.NumberSymbols=13]="NumberSymbols",dn[dn.NumberFormats=14]="NumberFormats",dn[dn.CurrencyCode=15]="CurrencyCode",dn[dn.CurrencySymbol=16]="CurrencySymbol",dn[dn.CurrencyName=17]="CurrencyName",dn[dn.Currencies=18]="Currencies",dn[dn.Directionality=19]="Directionality",dn[dn.PluralCase=20]="PluralCase",dn[dn.ExtraData=21]="ExtraData",dn))();const zl="en-US";let I_=zl;function $_(r,i,o,u,c){if(r=pe(r),Array.isArray(r))for(let h=0;h<r.length;h++)$_(r[h],i,o,u,c);else{const h=R(),v=S();let b=Wu(r)?r:pe(r.provide),x=nv(r);const F=Ce(),W=1048575&F.providerIndexes,ee=F.directiveStart,me=F.providerIndexes>>20;if(Wu(r)||!r.multi){const Se=new Re(x,c,Cl),Xe=cy(b,i,c?W:W+me,ee);-1===Xe?(eo(Xs(F,v),h,b),sc(h,r,i.length),i.push(b),F.directiveStart++,F.directiveEnd++,c&&(F.providerIndexes+=1048576),o.push(Se),v.push(Se)):(o[Xe]=Se,v[Xe]=Se)}else{const Se=cy(b,i,W+me,ee),Xe=cy(b,i,W,W+me),Ft=Xe>=0&&o[Xe];if(c&&!Ft||!c&&!(Se>=0&&o[Se])){eo(Xs(F,v),h,b);const Jt=function Wp(r,i,o,u,c){const h=new Re(r,o,Cl);return h.multi=[],h.index=i,h.componentProviders=0,Yh(h,c,u&&!o),h}(c?H_:lw,o.length,c,u,x);!c&&Ft&&(o[Xe].providerFactory=Jt),sc(h,r,i.length,0),i.push(b),F.directiveStart++,F.directiveEnd++,c&&(F.providerIndexes+=1048576),o.push(Jt),v.push(Jt)}else sc(h,r,Se>-1?Se:Xe,Yh(o[c?Xe:Se],x,!c&&u));!c&&u&&Ft&&o[Xe].componentProviders++}}}function sc(r,i,o,u){const c=Wu(i),h=function Jy(r){return!!r.useClass}(i);if(c||h){const x=(h?pe(i.useClass):i).prototype.ngOnDestroy;if(x){const F=r.destroyHooks||(r.destroyHooks=[]);if(!c&&i.multi){const W=F.indexOf(o);-1===W?F.push(o,[u,x]):F[W+1].push(u,x)}else F.push(o,x)}}}function Yh(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function cy(r,i,o,u){for(let c=o;c<u;c++)if(i[c]===r)return c;return-1}function lw(r,i,o,u){return zp(this.multi,[])}function H_(r,i,o,u){const c=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=vr(o,o[1],this.providerFactory.index,u);h=b.slice(0,v),zp(c,h);for(let x=v;x<b.length;x++)h.push(b[x])}else h=[],zp(c,h);return h}function zp(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function G_(r,i=[]){return o=>{o.providersResolver=(u,c)=>function ic(r,i,o){const u=R();if(u.firstCreatePass){const c=Er(r);$_(o,u.data,u.blueprint,c,!0),$_(i,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,i)}}class Qa{}class Qh{}function Jh(r,i){return new qp(r,i??null)}class qp extends Qa{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cd(this);const u=_r(i);this._bootstrapComponents=Ta(u.bootstrap),this._r3Injector=bl(i,o,[{provide:Qa,useValue:this},{provide:Iu,useValue:this.componentFactoryResolver}],Ie(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class ly extends Qh{constructor(i){super(),this.moduleType=i}create(i){return new qp(this.moduleType,i)}}class hw extends Qa{constructor(i,o,u){super(),this.componentFactoryResolver=new Cd(this),this.instance=null;const c=new ev([...i,{provide:Qa,useValue:this},{provide:Iu,useValue:this.componentFactoryResolver}],o||jf(),u,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function dy(r,i,o=null){return new hw(r,i,o).injector}let hy=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=kg(0,o.type),c=u.length>0?dy([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=Ht({token:r,providedIn:"environment",factory:()=>new r(st(ml))}),r})();function Zp(r){r.getStandaloneInjector=i=>i.get(hy).getOrCreateStandaloneInjector(r)}function Hd(r,i,o){const u=Fr()+r,c=S();return c[u]===Wt?Vr(c,u,o?i.call(o):i()):function Mh(r,i){return r[i]}(c,u)}function Z_(r,i,o,u){return K_(S(),Fr(),r,i,o,u)}function ql(r,i,o,u,c){return function Y_(r,i,o,u,c,h,v){const b=i+o;return Ll(r,b,c,h)?Vr(r,b+2,v?u.call(v,c,h):u(c,h)):Kc(r,b+2)}(S(),Fr(),r,i,o,u,c)}function Kc(r,i){const o=r[i];return o===Wt?void 0:o}function K_(r,i,o,u,c,h){const v=i+o;return Co(r,v,c)?Vr(r,v+1,h?u.call(h,c):u(c)):Kc(r,v+1)}function yy(r,i){const o=R();let u;const c=r+22;o.firstCreatePass?(u=function X_(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const h=u.factory||(u.factory=xs(u.type)),v=ir(Cl);try{const b=vo(!1),x=h();return vo(b),function gm(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,S(),c,x),x}finally{ir(v)}}function vy(r,i,o){const u=r+22,c=S(),h=function Ei(r,i){return r[i]}(c,u);return function nf(r,i){return r[1].data[i].pure}(c,u)?K_(c,Fr(),i,h.transform,o,h):h.transform(o)}function n0(r){return i=>{setTimeout(r,void 0,i)}}const Mu=class pI extends g.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let c=i,h=o||(()=>null),v=u;if(i&&"object"==typeof i){const x=i;c=x.next?.bind(x),h=x.error?.bind(x),v=x.complete?.bind(x)}this.__isAsync&&(h=n0(h),c&&(c=n0(c)),v&&(v=n0(v)));const b=super.subscribe({next:c,error:h,complete:v});return i instanceof H.w0&&i.add(b),b}};function gI(){return this._results[Uc()]()}class r0{get changes(){return this._changes||(this._changes=new Mu)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Uc(),u=r0.prototype;u[o]||(u[o]=gI)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=function ks(r){return r.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Lu(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],h=i[u];if(o&&(c=o(c),h=o(h)),h!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let hu=(()=>{class r{}return r.__NG_ELEMENT_ID__=Yc,r})();const oc=hu,rf=class extends oc{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tViews,c=_h(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(c[19]=v.createEmbeddedView(u)),Qg(u,c,i),new Sh(c)}};function Yc(){return rg(Ce(),S())}function rg(r,i){return 4&r.type?new rf(i,r,Tc(r,i)):null}let sf=(()=>{class r{}return r.__NG_ELEMENT_ID__=vw,r})();function vw(){return a0(Ce(),S())}const Qc=sf,s0=class extends Qc{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Tc(this._hostTNode,this._hostLView)}get injector(){return new Os(this._hostTNode,this._hostLView)}get parentInjector(){const i=$a(this._hostTNode,this._hostLView);if(Ys(i)){const o=Lo(i,this._hostLView),u=Qs(i);return new Os(o[1].data[u+8],o)}return new Os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=o0(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){let c,h;"number"==typeof u?c=u:null!=u&&(c=u.index,h=u.injector);const v=i.createEmbeddedView(o||{},h);return this.insert(v,c),v}createComponent(i,o,u,c,h){const v=i&&!function uu(r){return"function"==typeof r}(i);let b;if(v)b=o;else{const ee=o||{};b=ee.index,u=ee.injector,c=ee.projectableNodes,h=ee.environmentInjector||ee.ngModuleRef}const x=v?i:new Td(Cn(i)),F=u||this.parentInjector;if(!h&&null==x.ngModule){const me=(v?F:this.parentInjector).get(ml,null);me&&(h=me)}const W=x.create(F,c,void 0,h);return this.insert(W.hostView,b),W}insert(i,o){const u=i._lView,c=u[1];if(function Yo(r){return Kr(r[3])}(u)){const W=this.indexOf(i);if(-1!==W)this.detach(W);else{const ee=u[3],me=new s0(ee,ee[6],ee[3]);me.detach(me.indexOf(i))}}const h=this._adjustIndex(o),v=this._lContainer;!function f(r,i,o,u){const c=10+u,h=o.length;u>0&&(o[c-1][4]=i),u<h-10?(i[4]=o[c],ra(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const v=i[17];null!==v&&o!==v&&function I(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(v,i);const b=i[19];null!==b&&b.insertView(r),i[2]|=64}(c,u,v,h);const b=yu(h,v),x=u[11],F=Hu(x,v[7]);return null!==F&&function Ig(r,i,o,u,c,h){u[0]=c,u[6]=i,ld(r,u,o,1,c,h)}(c,v[6],x,u,F,b),i.attachToViewContainerRef(),ra(Ey(v),h,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=o0(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=q(this._lContainer,o);u&&(qi(Ey(this._lContainer),o),te(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=q(this._lContainer,o);return u&&null!=qi(Ey(this._lContainer),o)?new Sh(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function o0(r){return r[8]}function Ey(r){return r[8]||(r[8]=[])}function a0(r,i){let o;const u=i[r.index];if(Kr(u))o=u;else{let c;if(8&r.type)c=mr(u);else{const h=i[11];c=h.createComment("");const v=Br(r,i);Pi(h,Hu(h,v),c,function eh(r,i){return r.nextSibling(i)}(h,v),!1)}i[r.index]=o=nm(u,i,c,r),bh(i,o)}return new s0(o,r,i)}class wy{constructor(i){this.queryList=i,this.matches=null}clone(){return new wy(this.queryList)}setDirty(){this.queryList.setDirty()}}class ig{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let h=0;h<u;h++){const v=o.getByIndex(h);c.push(this.queries[v.indexInDeclarationView].clone())}return new ig(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==f0(i,o).matches&&this.queries[o].setDirty()}}class Iy{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class Dy{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,h=this.getByIndex(u).embeddedTView(i,c);h&&(h.indexInDeclarationView=u,null!==o?o.push(h):o=[h])}return null!==o?new Dy(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class by{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new by(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const h=u[c];this.matchTNodeWithReadOption(i,o,u0(o,h)),this.matchTNodeWithReadOption(i,o,li(o,i,h,!1,!1))}else u===hu?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,li(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Sc||c===sf||c===hu&&4&o.type)this.addMatch(o.index,-2);else{const h=li(o,i,c,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function u0(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function Gd(r,i,o,u){return-1===o?function _w(r,i){return 11&r.type?Tc(r,i):4&r.type?rg(r,i):null}(i,r):-2===o?function Cy(r,i,o){return o===Sc?Tc(i,r):o===hu?rg(i,r):o===sf?a0(i,r):void 0}(r,i,u):vr(r,r[1],o,i)}function Ew(r,i,o,u){const c=i[19].queries[u];if(null===c.matches){const h=r.data,v=o.matches,b=[];for(let x=0;x<v.length;x+=2){const F=v[x];b.push(F<0?null:Gd(i,h[F],v[x+1],o.metadata.read))}c.matches=b}return c.matches}function Ty(r,i,o,u){const c=r.queries.getByIndex(o),h=c.matches;if(null!==h){const v=Ew(r,i,c,o);for(let b=0;b<h.length;b+=2){const x=h[b];if(x>0)u.push(v[b/2]);else{const F=h[b+1],W=i[-x];for(let ee=10;ee<W.length;ee++){const me=W[ee];me[17]===me[3]&&Ty(me[1],me,F,u)}if(null!==W[9]){const ee=W[9];for(let me=0;me<ee.length;me++){const Se=ee[me];Ty(Se[1],Se,F,u)}}}}}return u}function c0(r){const i=S(),o=R(),u=tu();Ps(u+1);const c=f0(o,u);if(r.dirty&&function si(r){return 4==(4&r[2])}(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const h=c.crossesNgTemplate?Ty(o,i,u,[]):Ew(o,i,c,u);r.reset(h,Ug),r.notifyOnChanges()}return!0}return!1}function l0(r,i,o){const u=R();u.firstCreatePass&&(h0(u,new Iy(r,i,o),-1),2==(2&i)&&(u.staticViewQueries=!0)),d0(u,S(),i)}function ww(r,i,o,u){const c=R();if(c.firstCreatePass){const h=Ce();h0(c,new Iy(i,o,u),h.index),function mI(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}d0(c,S(),o)}function Iw(){return function Dw(r,i){return r[19].queries[i].queryList}(S(),tu())}function d0(r,i,o){const u=new r0(4==(4&o));Av(r,i,u,u.destroy),null===i[19]&&(i[19]=new ig),i[19].queries.push(new wy(u))}function h0(r,i,o){null===r.queries&&(r.queries=new Dy),r.queries.track(new by(i,o))}function f0(r,i){return r.queries.getByIndex(i)}function cf(...r){}const Xn=new Wn("Application Initializer");let Wd=(()=>{class r{constructor(o){this.appInits=o,this.resolve=cf,this.reject=cf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(Bl(h))o.push(h);else if(gp(h)){const v=new Promise((b,x)=>{h.subscribe({complete:b,error:x})});o.push(v)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(st(Xn,8))},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const S0=new Wn("AppId",{providedIn:"root",factory:function Qi(){return`${fg()}${fg()}${fg()}`}});function fg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const So=new Wn("Platform Initializer"),lf=new Wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),A0=new Wn("appBootstrapListener");let Lw=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const pg=new Wn("LocaleId",{providedIn:"root",factory:()=>Pt(pg,gt.Optional|gt.SkipSelf)||function df(){return typeof $localize<"u"&&$localize.locale||zl}()}),hf=new Wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ff{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let pf=(()=>{class r{compileModuleSync(o){return new ly(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),h=Ta(_r(o).declarations).reduce((v,b)=>{const x=Cn(b);return x&&v.push(new Td(x)),v},[]);return new ff(u,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Uw=(()=>Promise.resolve(0))();function Ql(r){typeof Zone>"u"?Uw.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Ao{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mu(!1),this.onMicrotaskEmpty=new Mu(!1),this.onStable=new Mu(!1),this.onError=new Mu(!1),typeof Zone>"u")throw new Ue(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Bw(){let r=kt.requestAnimationFrame,i=kt.cancelAnimationFrame;if(typeof Zone<"u"&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function $w(r){const i=()=>{!function R0(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(kt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Fy(r),r.isCheckStableRunning=!0,ky(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Fy(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,h,v,b)=>{try{return P0(r),o.invokeTask(c,h,v,b)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&i(),O0(r)}},onInvoke:(o,u,c,h,v,b,x)=>{try{return P0(r),o.invoke(c,h,v,b,x)}finally{r.shouldCoalesceRunChangeDetection&&i(),O0(r)}},onHasTask:(o,u,c,h)=>{o.hasTask(c,h),u===c&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,Fy(r),ky(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,c,h)=>(o.handleError(c,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ao.isInAngularZone())throw new Ue(909,!1)}static assertNotInAngularZone(){if(Ao.isInAngularZone())throw new Ue(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+c,i,jw,cf,cf);try{return h.runTask(v,o,u)}finally{h.cancelTask(v)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const jw={};function ky(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Fy(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function P0(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function O0(r){r._nesting--,ky(r)}class Hw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mu,this.onMicrotaskEmpty=new Mu,this.onStable=new Mu,this.onError=new Mu}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}const N0=new Wn(""),k0=new Wn("");let Ly,Gw=(()=>{class r{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ly||(function Zd(r){Ly=r}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ao.assertNotInAngularZone(),Ql(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ql(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(st(Ao),st(qd),st(k0))},r.\u0275prov=Ht({token:r,factory:r.\u0275fac}),r})(),qd=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Ly?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Ma=null;const Jl=new Wn("AllowMultipleToken"),n=new Wn("PlatformDestroyListeners");class l{constructor(i,o){this.name=i,this.token=o}}function K(r,i,o=[]){const u=`Platform: ${i}`,c=new Wn(u);return(h=[])=>{let v=pt();if(!v||v.injector.get(Jl,!1)){const b=[...o,...h,{provide:c,useValue:!0}];r?r(b):function p(r){if(Ma&&!Ma.get(Jl,!1))throw new Ue(400,!1);Ma=r;const i=r.get(At);(function O(r){const i=r.get(So,null);i&&i.forEach(o=>o())})(r)}(function De(r=[],i){return Zu.create({name:i,providers:[{provide:oh,useValue:"platform"},{provide:n,useValue:new Set([()=>Ma=null])},...r]})}(b,u))}return function ue(r){const i=pt();if(!i)throw new Ue(401,!1);return i}()}}function pt(){return Ma?.get(At)??null}let At=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function Bn(r,i){let o;return o="noop"===r?new Hw:("zone.js"===r?void 0:r)||new Ao(i),o}(u?.ngZone,function zt(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Ao,useValue:c}];return c.run(()=>{const v=Zu.create({providers:h,parent:this.injector,name:o.moduleType.name}),b=o.create(v),x=b.injector.get(lh,null);if(!x)throw new Ue(402,!1);return c.runOutsideAngular(()=>{const F=c.onError.subscribe({next:W=>{x.handleError(W)}});b.onDestroy(()=>{$n(this._modules,b),F.unsubscribe()})}),function Sr(r,i,o){try{const u=o();return Bl(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(x,c,()=>{const F=b.injector.get(Wd);return F.runInitializers(),F.donePromise.then(()=>(function Np(r){vt(r,"Expected localeId to be defined"),"string"==typeof r&&(I_=r.toLowerCase().replace(/_/g,"-"))}(b.injector.get(pg,zl)||zl),this._moduleDoBootstrap(b),b))})})}bootstrapModule(o,u=[]){const c=Dn({},u);return function t(r,i,o){const u=new ly(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const u=o.injector.get(jn);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Ue(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(n,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(st(Zu))},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function Dn(r,i){return Array.isArray(i)?i.reduce(Dn,r):{...r,...i}}let jn=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new m.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),v=new m.y(b=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Ao.assertNotInAngularZone(),Ql(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Ao.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{x.unsubscribe(),F.unsubscribe()}});this.isStable=(0,he.T)(h,v.pipe((0,fe.B)()))}bootstrap(o,u){const c=o instanceof uh;if(!this._injector.get(Wd).done)throw!c&&er(o),new Ue(405,false);let v;v=c?o:this._injector.get(Iu).resolveComponentFactory(o),this.componentTypes.push(v.componentType);const b=function a(r){return r.isBoundToModule}(v)?void 0:this._injector.get(Qa),F=v.create(Zu.NULL,[],u||v.selector,b),W=F.location.nativeElement,ee=F.injector.get(N0,null);return ee?.registerApplication(W),F.onDestroy(()=>{this.detachView(F.hostView),$n(this.components,F),ee?.unregisterApplication(W)}),this._loadComponent(F),F}tick(){if(this._runningTick)throw new Ue(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;$n(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(A0,[]);u.push(...this._bootstrapListeners),u.forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>$n(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ue(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(st(Ao),st(ml),st(lh))},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function $n(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}function el(){return!1}let jI=(()=>{class r{}return r.__NG_ELEMENT_ID__=$I,r})();function $I(r){return function HI(r,i,o){if(uo(r)&&!o){const u=In(r.index,i);return new Sh(u,u)}return 47&r.type?new Sh(i[16],i):null}(Ce(),S(),16==(16&r))}class kI{constructor(){}supports(i){return sp(i)}create(i){return new KI(i)}}const ZI=(r,i)=>i;class KI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||ZI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,h=null;for(;o||u;){const v=!u||o&&o.currentIndex<LI(u,c,h)?o:u,b=LI(v,c,h),x=v.currentIndex;if(v===u)c--,u=u._nextRemoved;else if(o=o._next,null==v.previousIndex)c++;else{h||(h=[]);const F=b-c,W=x-c;if(F!=W){for(let me=0;me<F;me++){const Se=me<h.length?h[me]:h[me]=0,Xe=Se+me;W<=Xe&&Xe<F&&(h[me]=Se+1)}h[v.previousIndex]=W-F}}b!==x&&i(v,b,x)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!sp(i))throw new Ue(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,h,v,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let b=0;b<this.length;b++)h=i[b],v=this._trackByFn(b,h),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,h,v,b)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,v,b),u=!0),o=o._next}else c=0,function AE(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[Uc()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,b=>{v=this._trackByFn(c,b),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,b,v,c)),Object.is(o.item,b)||this._addIdentityChange(o,b)):(o=this._mismatch(o,b,v,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let h;return null===i?h=this._itTail:(h=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,h,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,h,c)):i=this._addAfter(new YI(o,u),h,c),i}_verifyReinsertion(i,o,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?i=this._reinsertAfter(h,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,h=i._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new FI),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class YI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class FI{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new QI,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LI(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class VI{constructor(){}supports(i){return i instanceof Map||am(i)}create(){return new JI}}class JI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||am(i)))throw new Ue(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const h=c._prev,v=c._next;return h&&(h._next=v),v&&(v._prev=h),c._next=null,c._prev=null,c}const u=new XI(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class XI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UI(){return new Kw([new kI])}let Kw=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||UI()),deps:[[r,new hi,new Ii]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Ue(901,!1)}}return r.\u0275prov=Ht({token:r,providedIn:"root",factory:UI}),r})();function BI(){return new Yw([new VI])}let Yw=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||BI()),deps:[[r,new hi,new Ii]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Ue(901,!1)}}return r.\u0275prov=Ht({token:r,providedIn:"root",factory:BI}),r})();const nD=K(null,"core",[]);let rD=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(st(jn))},r.\u0275mod=zr({type:r}),r.\u0275inj=bn({}),r})();function iD(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},433:(bt,Me,B)=>{B.d(Me,{Fj:()=>Fe,qu:()=>po,u:()=>la,sg:()=>As,u5:()=>eu,JJ:()=>an,JL:()=>kt,F:()=>Si,On:()=>Pr,YN:()=>xi,UX:()=>Zs,EJ:()=>$i,_Y:()=>Zr,Kr:()=>ho});var g=B(4650),H=B(6895),m=B(8996),he=B(9751),fe=B(4742),ve=B(8421),be=B(3269),Ie=B(5403),Te=B(3268),ae=B(1810),pe=B(4004);let nt=(()=>{class S{constructor(A,z){this._renderer=A,this._elementRef=z,this.onChange=Ce=>{},this.onTouched=()=>{}}setProperty(A,z){this._renderer.setProperty(this._elementRef.nativeElement,A,z)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.Qsj),g.Y36(g.SBq))},S.\u0275dir=g.lG2({type:S}),S})(),He=(()=>{class S extends nt{}return S.\u0275fac=function(){let R;return function(z){return(R||(R=g.n5z(S)))(z||S)}}(),S.\u0275dir=g.lG2({type:S,features:[g.qOj]}),S})();const it=new g.OlP("NgValueAccessor"),qe={provide:it,useExisting:(0,g.Gpc)(()=>Fe),multi:!0},ct=new g.OlP("CompositionEventMode");let Fe=(()=>{class S extends nt{constructor(A,z,Ce){super(A,z),this._compositionMode=Ce,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Qe(){const S=(0,H.q)()?(0,H.q)().getUserAgent():"";return/android (\d+)/.test(S.toLowerCase())}())}writeValue(A){this.setProperty("value",A??"")}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ct,8))},S.\u0275dir=g.lG2({type:S,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,z){1&A&&g.NdJ("input",function(St){return z._handleInput(St.target.value)})("blur",function(){return z.onTouched()})("compositionstart",function(){return z._compositionStart()})("compositionend",function(St){return z._compositionEnd(St.target.value)})},features:[g._Bn([qe]),g.qOj]}),S})();const Ze=new g.OlP("NgValidators"),le=new g.OlP("NgAsyncValidators");function vt(S){return null!=S}function tt(S){return(0,g.QGY)(S)?(0,m.D)(S):S}function qt(S){let R={};return S.forEach(A=>{R=null!=A?{...R,...A}:R}),0===Object.keys(R).length?null:R}function _e(S,R){return R.map(A=>A(S))}function Ht(S){return S.map(R=>function nn(S){return!S.validate}(R)?R:A=>R.validate(A))}function bn(S){return null!=S?function Tt(S){if(!S)return null;const R=S.filter(vt);return 0==R.length?null:function(A){return qt(_e(A,R))}}(Ht(S)):null}function Ln(S){return null!=S?function xn(S){if(!S)return null;const R=S.filter(vt);return 0==R.length?null:function(A){return function ie(...S){const R=(0,be.jO)(S),{args:A,keys:z}=(0,fe.D)(S),Ce=new he.y(St=>{const{length:Nn}=A;if(!Nn)return void St.complete();const Yn=new Array(Nn);let Mi=Nn,wi=Nn;for(let ps=0;ps<Nn;ps++){let rs=!1;(0,ve.Xf)(A[ps]).subscribe((0,Ie.x)(St,go=>{rs||(rs=!0,wi--),Yn[ps]=go},()=>Mi--,void 0,()=>{(!Mi||!rs)&&(wi||St.next(z?(0,ae.n)(z,Yn):Yn),St.complete())}))}});return R?Ce.pipe((0,Te.Z)(R)):Ce}(_e(A,R).map(tt)).pipe((0,pe.U)(qt))}}(Ht(S)):null}function Zn(S,R){return null===S?[R]:Array.isArray(S)?[...S,R]:[S,R]}function vn(S){return S._rawValidators}function Gt(S){return S._rawAsyncValidators}function Hn(S){return S?Array.isArray(S)?S:[S]:[]}function pr(S,R){return Array.isArray(S)?S.includes(R):S===R}function Ar(S,R){const A=Hn(R);return Hn(S).forEach(Ce=>{pr(A,Ce)||A.push(Ce)}),A}function Pn(S,R){return Hn(R).filter(A=>!pr(S,A))}class gr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=bn(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Ln(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,A){return!!this.control&&this.control.hasError(R,A)}getError(R,A){return this.control?this.control.getError(R,A):null}}class gt extends gr{get formDirective(){return null}get path(){return null}}class rr extends gr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nr{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let an=(()=>{class S extends Nr{constructor(A){super(A)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(rr,2))},S.\u0275dir=g.lG2({type:S,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,z){2&A&&g.ekj("ng-untouched",z.isUntouched)("ng-touched",z.isTouched)("ng-pristine",z.isPristine)("ng-dirty",z.isDirty)("ng-valid",z.isValid)("ng-invalid",z.isInvalid)("ng-pending",z.isPending)},features:[g.qOj]}),S})(),kt=(()=>{class S extends Nr{constructor(A){super(A)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(gt,10))},S.\u0275dir=g.lG2({type:S,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,z){2&A&&g.ekj("ng-untouched",z.isUntouched)("ng-touched",z.isTouched)("ng-pristine",z.isPristine)("ng-dirty",z.isDirty)("ng-valid",z.isValid)("ng-invalid",z.isInvalid)("ng-pending",z.isPending)("ng-submitted",z.isSubmitted)},features:[g.qOj]}),S})();const cn="VALID",On="INVALID",ce="PENDING",oe="DISABLED";function Q(S){return(Ve(S)?S.validators:S)||null}function Z(S,R){return(Ve(R)?R.asyncValidators:S)||null}function Ve(S){return null!=S&&!Array.isArray(S)&&"object"==typeof S}function It(S,R,A){const z=S.controls;if(!(R?Object.keys(z):z).length)throw new g.vHH(1e3,"");if(!z[A])throw new g.vHH(1001,"")}function de(S,R,A){S._forEachChild((z,Ce)=>{if(void 0===A[Ce])throw new g.vHH(1002,"")})}class se{constructor(R,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(R),this._assignAsyncValidators(A)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===cn}get invalid(){return this.status===On}get pending(){return this.status==ce}get disabled(){return this.status===oe}get enabled(){return this.status!==oe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._assignValidators(R)}setAsyncValidators(R){this._assignAsyncValidators(R)}addValidators(R){this.setValidators(Ar(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(Ar(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(Pn(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(Pn(R,this._rawAsyncValidators))}hasValidator(R){return pr(this._rawValidators,R)}hasAsyncValidator(R){return pr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=ce,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const A=this._parentMarkedDirty(R.onlySelf);this.status=oe,this.errors=null,this._forEachChild(z=>{z.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:A}),this._onDisabledChange.forEach(z=>z(!0))}enable(R={}){const A=this._parentMarkedDirty(R.onlySelf);this.status=cn,this._forEachChild(z=>{z.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:A}),this._onDisabledChange.forEach(z=>z(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cn||this.status===ce)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oe:cn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=ce,this._hasOwnPendingAsyncValidator=!0;const A=tt(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(z,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,A={}){this.errors=R,this._updateControlsErrors(!1!==A.emitEvent)}get(R){let A=R;return null==A||(Array.isArray(A)||(A=A.split(".")),0===A.length)?null:A.reduce((z,Ce)=>z&&z._find(Ce),this)}getError(R,A){const z=A?this.get(A):this;return z&&z.errors?z.errors[R]:null}hasError(R,A){return!!this.getError(R,A)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?oe:this.errors?On:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ce)?ce:this._anyControlsHaveStatus(On)?On:cn}_anyControlsHaveStatus(R){return this._anyControls(A=>A.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){Ve(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}_assignValidators(R){this._rawValidators=Array.isArray(R)?R.slice():R,this._composedValidatorFn=function J(S){return Array.isArray(S)?bn(S):S||null}(this._rawValidators)}_assignAsyncValidators(R){this._rawAsyncValidators=Array.isArray(R)?R.slice():R,this._composedAsyncValidatorFn=function we(S){return Array.isArray(S)?Ln(S):S||null}(this._rawAsyncValidators)}}class X extends se{constructor(R,A,z){super(Q(A),Z(z,A)),this.controls=R,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,A){return this.controls[R]?this.controls[R]:(this.controls[R]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(R,A,z={}){this.registerControl(R,A),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}removeControl(R,A={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(R,A,z={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],A&&this.registerControl(R,A),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,A={}){de(this,0,R),Object.keys(R).forEach(z=>{It(this,!0,z),this.controls[z].setValue(R[z],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(R,A={}){null!=R&&(Object.keys(R).forEach(z=>{const Ce=this.controls[z];Ce&&Ce.patchValue(R[z],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(R={},A={}){this._forEachChild((z,Ce)=>{z.reset(R[Ce],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(R,A,z)=>(R[z]=A.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(A,z)=>!!z._syncPendingControls()||A);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(A=>{const z=this.controls[A];z&&R(z,A)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[A,z]of Object.entries(this.controls))if(this.contains(A)&&R(z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(A,z,Ce)=>((z.enabled||this.disabled)&&(A[Ce]=z.value),A))}_reduceChildren(R,A){let z=R;return this._forEachChild((Ce,St)=>{z=A(z,Ce,St)}),z}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}class ot extends X{}const zn=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>cr}),cr="always";function Gr(S,R){return[...R.path,S]}function Ur(S,R,A=cr){ds(S,R),R.valueAccessor.writeValue(S.value),(S.disabled||"always"===A)&&R.valueAccessor.setDisabledState?.(S.disabled),function Vs(S,R){R.valueAccessor.registerOnChange(A=>{S._pendingValue=A,S._pendingChange=!0,S._pendingDirty=!0,"change"===S.updateOn&&lr(S,R)})}(S,R),function xr(S,R){const A=(z,Ce)=>{R.valueAccessor.writeValue(z),Ce&&R.viewToModelUpdate(z)};S.registerOnChange(A),R._registerOnDestroy(()=>{S._unregisterOnChange(A)})}(S,R),function Cn(S,R){R.valueAccessor.registerOnTouched(()=>{S._pendingTouched=!0,"blur"===S.updateOn&&S._pendingChange&&lr(S,R),"submit"!==S.updateOn&&S.markAsTouched()})}(S,R),function xo(S,R){if(R.valueAccessor.setDisabledState){const A=z=>{R.valueAccessor.setDisabledState(z)};S.registerOnDisabledChange(A),R._registerOnDestroy(()=>{S._unregisterOnDisabledChange(A)})}}(S,R)}function bs(S,R,A=!0){const z=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(z),R.valueAccessor.registerOnTouched(z)),Cs(S,R),S&&(R._invokeOnDestroyCallbacks(),S._registerOnCollectionChange(()=>{}))}function zr(S,R){S.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(R)})}function ds(S,R){const A=vn(S);null!==R.validator?S.setValidators(Zn(A,R.validator)):"function"==typeof A&&S.setValidators([A]);const z=Gt(S);null!==R.asyncValidator?S.setAsyncValidators(Zn(z,R.asyncValidator)):"function"==typeof z&&S.setAsyncValidators([z]);const Ce=()=>S.updateValueAndValidity();zr(R._rawValidators,Ce),zr(R._rawAsyncValidators,Ce)}function Cs(S,R){let A=!1;if(null!==S){if(null!==R.validator){const Ce=vn(S);if(Array.isArray(Ce)&&Ce.length>0){const St=Ce.filter(Nn=>Nn!==R.validator);St.length!==Ce.length&&(A=!0,S.setValidators(St))}}if(null!==R.asyncValidator){const Ce=Gt(S);if(Array.isArray(Ce)&&Ce.length>0){const St=Ce.filter(Nn=>Nn!==R.asyncValidator);St.length!==Ce.length&&(A=!0,S.setAsyncValidators(St))}}}const z=()=>{};return zr(R._rawValidators,z),zr(R._rawAsyncValidators,z),A}function lr(S,R){S._pendingDirty&&S.markAsDirty(),S.setValue(S._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(S._pendingValue),S._pendingChange=!1}function er(S,R){ds(S,R)}function Vi(S,R){if(!S.hasOwnProperty("model"))return!1;const A=S.model;return!!A.isFirstChange()||!Object.is(R,A.currentValue)}function mi(S,R){S._syncPendingControls(),R.forEach(A=>{const z=A.control;"submit"===z.updateOn&&z._pendingChange&&(A.viewToModelUpdate(z._pendingValue),z._pendingChange=!1)})}function Vn(S,R){if(!R)return null;let A,z,Ce;return Array.isArray(R),R.forEach(St=>{St.constructor===Fe?A=St:function Rr(S){return Object.getPrototypeOf(S.constructor)===He}(St)?z=St:Ce=St}),Ce||z||A||null}const pn={provide:gt,useExisting:(0,g.Gpc)(()=>Si)},ii=(()=>Promise.resolve())();let Si=(()=>{class S extends gt{constructor(A,z,Ce){super(),this.callSetDisabledState=Ce,this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new X({},bn(A),Ln(z))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(A){ii.then(()=>{const z=this._findContainer(A.path);A.control=z.registerControl(A.name,A.control),Ur(A.control,A,this.callSetDisabledState),A.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(A)})}getControl(A){return this.form.get(A.path)}removeControl(A){ii.then(()=>{const z=this._findContainer(A.path);z&&z.removeControl(A.name),this._directives.delete(A)})}addFormGroup(A){ii.then(()=>{const z=this._findContainer(A.path),Ce=new X({});er(Ce,A),z.registerControl(A.name,Ce),Ce.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(A){ii.then(()=>{const z=this._findContainer(A.path);z&&z.removeControl(A.name)})}getFormGroup(A){return this.form.get(A.path)}updateModel(A,z){ii.then(()=>{this.form.get(A.path).setValue(z)})}setValue(A){this.control.setValue(A)}onSubmit(A){return this.submitted=!0,mi(this.form,this._directives),this.ngSubmit.emit(A),"dialog"===A?.target?.method}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(A){return A.pop(),A.length?this.form.get(A):this.form}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(Ze,10),g.Y36(le,10),g.Y36(zn,8))},S.\u0275dir=g.lG2({type:S,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(A,z){1&A&&g.NdJ("submit",function(St){return z.onSubmit(St)})("reset",function(){return z.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([pn]),g.qOj]}),S})();function Ai(S,R){const A=S.indexOf(R);A>-1&&S.splice(A,1)}function Cr(S){return"object"==typeof S&&null!==S&&2===Object.keys(S).length&&"value"in S&&"disabled"in S}const or=class extends se{constructor(R=null,A,z){super(Q(A),Z(z,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ve(A)&&(A.nonNullable||A.initialValueIsDefault)&&(this.defaultValue=Cr(R)?R.value:R)}setValue(R,A={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(z=>z(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(R,A={}){this.setValue(R,A)}reset(R=this.defaultValue,A={}){this._applyFormState(R),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Ai(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Ai(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Cr(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},Ss={provide:rr,useExisting:(0,g.Gpc)(()=>Pr)},fs=(()=>Promise.resolve())();let Pr=(()=>{class S extends rr{constructor(A,z,Ce,St,Nn,Yn){super(),this._changeDetectorRef=Nn,this.callSetDisabledState=Yn,this.control=new or,this._registered=!1,this.update=new g.vpe,this._parent=A,this._setValidators(z),this._setAsyncValidators(Ce),this.valueAccessor=Vn(0,St)}ngOnChanges(A){if(this._checkForErrors(),!this._registered||"name"in A){if(this._registered&&(this._checkName(),this.formDirective)){const z=A.name.previousValue;this.formDirective.removeControl({name:z,path:this._getPath(z)})}this._setUpControl()}"isDisabled"in A&&this._updateDisabled(A),Vi(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ur(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){fs.then(()=>{this.control.setValue(A,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(A){const z=A.isDisabled.currentValue,Ce=0!==z&&(0,g.D6c)(z);fs.then(()=>{Ce&&!this.control.disabled?this.control.disable():!Ce&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(A){return this._parent?Gr(A,this._parent):[A]}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(gt,9),g.Y36(Ze,10),g.Y36(le,10),g.Y36(it,10),g.Y36(g.sBO,8),g.Y36(zn,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Ss]),g.qOj,g.TTD]}),S})(),Zr=(()=>{class S{}return S.\u0275fac=function(A){return new(A||S)},S.\u0275dir=g.lG2({type:S,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),S})(),uo=(()=>{class S{}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({}),S})();const vi=new g.OlP("NgModelWithFormControlWarning"),lo={provide:gt,useExisting:(0,g.Gpc)(()=>As)};let As=(()=>{class S extends gt{constructor(A,z,Ce){super(),this.callSetDisabledState=Ce,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(A),this._setAsyncValidators(z)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Cs(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const z=this.form.get(A.path);return Ur(z,A,this.callSetDisabledState),z.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),z}getControl(A){return this.form.get(A.path)}removeControl(A){bs(A.control||null,A,!1),function Zo(S,R){const A=S.indexOf(R);A>-1&&S.splice(A,1)}(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,z){this.form.get(A.path).setValue(z)}onSubmit(A){return this.submitted=!0,mi(this.form,this.directives),this.ngSubmit.emit(A),"dialog"===A?.target?.method}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const z=A.control,Ce=this.form.get(A.path);z!==Ce&&(bs(z||null,A),(S=>S instanceof or)(Ce)&&(Ur(Ce,A,this.callSetDisabledState),A.control=Ce))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const z=this.form.get(A.path);er(z,A),z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const z=this.form.get(A.path);z&&function _r(S,R){return Cs(S,R)}(z,A)&&z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ds(this.form,this),this._oldForm&&Cs(this._oldForm,this)}_checkFormPresent(){}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(Ze,10),g.Y36(le,10),g.Y36(zn,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","formGroup",""]],hostBindings:function(A,z){1&A&&g.NdJ("submit",function(St){return z.onSubmit(St)})("reset",function(){return z.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([lo]),g.qOj,g.TTD]}),S})();const kr={provide:rr,useExisting:(0,g.Gpc)(()=>la)};let la=(()=>{class S extends rr{set isDisabled(A){}constructor(A,z,Ce,St,Nn){super(),this._ngModelWarningConfig=Nn,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=A,this._setValidators(z),this._setAsyncValidators(Ce),this.valueAccessor=Vn(0,St)}ngOnChanges(A){this._added||this._setUpControl(),Vi(A,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}get path(){return Gr(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return S._ngModelWarningSentOnce=!1,S.\u0275fac=function(A){return new(A||S)(g.Y36(gt,13),g.Y36(Ze,10),g.Y36(le,10),g.Y36(it,10),g.Y36(vi,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([kr]),g.qOj,g.TTD]}),S})();const js={provide:it,useExisting:(0,g.Gpc)(()=>$i),multi:!0};function $s(S,R){return null==S?`${R}`:(R&&"object"==typeof R&&(R="Object"),`${S}: ${R}`.slice(0,50))}let $i=(()=>{class S extends He{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){this.value=A;const Ce=$s(this._getOptionId(A),A);this.setProperty("value",Ce)}registerOnChange(A){this.onChange=z=>{this.value=this._getOptionValue(z),A(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(A){for(const z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(z),A))return z;return null}_getOptionValue(A){const z=function Ko(S){return S.split(":")[0]}(A);return this._optionMap.has(z)?this._optionMap.get(z):A}}return S.\u0275fac=function(){let R;return function(z){return(R||(R=g.n5z(S)))(z||S)}}(),S.\u0275dir=g.lG2({type:S,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(A,z){1&A&&g.NdJ("change",function(St){return z.onChange(St.target.value)})("blur",function(){return z.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([js]),g.qOj]}),S})(),xi=(()=>{class S{constructor(A,z,Ce){this._element=A,this._renderer=z,this._select=Ce,this._select&&(this.id=this._select._registerOption())}set ngValue(A){null!=this._select&&(this._select._optionMap.set(this.id,A),this._setElementValue($s(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._setElementValue(A),this._select&&this._select.writeValue(this._select.value)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36($i,9))},S.\u0275dir=g.lG2({type:S,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),S})();const Xi={provide:it,useExisting:(0,g.Gpc)(()=>zs),multi:!0};function Hs(S,R){return null==S?`${R}`:("string"==typeof R&&(R=`'${R}'`),R&&"object"==typeof R&&(R="Object"),`${S}: ${R}`.slice(0,50))}let zs=(()=>{class S extends He{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){let z;if(this.value=A,Array.isArray(A)){const Ce=A.map(St=>this._getOptionId(St));z=(St,Nn)=>{St._setSelected(Ce.indexOf(Nn.toString())>-1)}}else z=(Ce,St)=>{Ce._setSelected(!1)};this._optionMap.forEach(z)}registerOnChange(A){this.onChange=z=>{const Ce=[],St=z.selectedOptions;if(void 0!==St){const Nn=St;for(let Yn=0;Yn<Nn.length;Yn++){const wi=this._getOptionValue(Nn[Yn].value);Ce.push(wi)}}else{const Nn=z.options;for(let Yn=0;Yn<Nn.length;Yn++){const Mi=Nn[Yn];if(Mi.selected){const wi=this._getOptionValue(Mi.value);Ce.push(wi)}}}this.value=Ce,A(Ce)}}_registerOption(A){const z=(this._idCounter++).toString();return this._optionMap.set(z,A),z}_getOptionId(A){for(const z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(z)._value,A))return z;return null}_getOptionValue(A){const z=function xs(S){return S.split(":")[0]}(A);return this._optionMap.has(z)?this._optionMap.get(z)._value:A}}return S.\u0275fac=function(){let R;return function(z){return(R||(R=g.n5z(S)))(z||S)}}(),S.\u0275dir=g.lG2({type:S,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(A,z){1&A&&g.NdJ("change",function(St){return z.onChange(St.target)})("blur",function(){return z.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([Xi]),g.qOj]}),S})(),ho=(()=>{class S{constructor(A,z,Ce){this._element=A,this._renderer=z,this._select=Ce,this._select&&(this.id=this._select._registerOption(this))}set ngValue(A){null!=this._select&&(this._value=A,this._setElementValue(Hs(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._select?(this._value=A,this._setElementValue(Hs(this.id,A)),this._select.writeValue(this._select.value)):this._setElementValue(A)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}_setSelected(A){this._renderer.setProperty(this._element.nativeElement,"selected",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(zs,9))},S.\u0275dir=g.lG2({type:S,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),S})(),qs=(()=>{class S{}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[uo]}),S})();class ar extends se{constructor(R,A,z){super(Q(A),Z(z,A)),this.controls=R,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(R){return this.controls[this._adjustIndex(R)]}push(R,A={}){this.controls.push(R),this._registerControl(R),this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}insert(R,A,z={}){this.controls.splice(R,0,A),this._registerControl(A),this.updateValueAndValidity({emitEvent:z.emitEvent})}removeAt(R,A={}){let z=this._adjustIndex(R);z<0&&(z=0),this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),this.controls.splice(z,1),this.updateValueAndValidity({emitEvent:A.emitEvent})}setControl(R,A,z={}){let Ce=this._adjustIndex(R);Ce<0&&(Ce=0),this.controls[Ce]&&this.controls[Ce]._registerOnCollectionChange(()=>{}),this.controls.splice(Ce,1),A&&(this.controls.splice(Ce,0,A),this._registerControl(A)),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(R,A={}){de(this,0,R),R.forEach((z,Ce)=>{It(this,!1,Ce),this.at(Ce).setValue(z,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(R,A={}){null!=R&&(R.forEach((z,Ce)=>{this.at(Ce)&&this.at(Ce).patchValue(z,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(R=[],A={}){this._forEachChild((z,Ce)=>{z.reset(R[Ce],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this.controls.map(R=>R.getRawValue())}clear(R={}){this.controls.length<1||(this._forEachChild(A=>A._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:R.emitEvent}))}_adjustIndex(R){return R<0?R+this.length:R}_syncPendingControls(){let R=this.controls.reduce((A,z)=>!!z._syncPendingControls()||A,!1);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){this.controls.forEach((A,z)=>{R(A,z)})}_updateValue(){this.value=this.controls.filter(R=>R.enabled||this.disabled).map(R=>R.value)}_anyControls(R){return this.controls.some(A=>A.enabled&&R(A))}_setUpControls(){this._forEachChild(R=>this._registerControl(R))}_allControlsDisabled(){for(const R of this.controls)if(R.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(R){R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)}_find(R){return this.at(R)??null}}function Qo(S){return!!S&&(void 0!==S.asyncValidators||void 0!==S.validators||void 0!==S.updateOn)}let po=(()=>{class S{constructor(){this.useNonNullable=!1}get nonNullable(){const A=new S;return A.useNonNullable=!0,A}group(A,z=null){const Ce=this._reduceControls(A);let St={};return Qo(z)?St=z:null!==z&&(St.validators=z.validator,St.asyncValidators=z.asyncValidator),new X(Ce,St)}record(A,z=null){const Ce=this._reduceControls(A);return new ot(Ce,z)}control(A,z,Ce){let St={};return this.useNonNullable?(Qo(z)?St=z:(St.validators=z,St.asyncValidators=Ce),new or(A,{...St,nonNullable:!0})):new or(A,z,Ce)}array(A,z,Ce){const St=A.map(Nn=>this._createControl(Nn));return new ar(St,z,Ce)}_reduceControls(A){const z={};return Object.keys(A).forEach(Ce=>{z[Ce]=this._createControl(A[Ce])}),z}_createControl(A){return A instanceof or||A instanceof se?A:Array.isArray(A)?this.control(A[0],A.length>1?A[1]:null,A.length>2?A[2]:null):this.control(A)}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),eu=(()=>{class S{static withConfig(A){return{ngModule:S,providers:[{provide:zn,useValue:A.callSetDisabledState??cr}]}}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[qs]}),S})(),Zs=(()=>{class S{static withConfig(A){return{ngModule:S,providers:[{provide:vi,useValue:A.warnOnNgModelWithFormControl??"always"},{provide:zn,useValue:A.callSetDisabledState??cr}]}}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[qs]}),S})()},1481:(bt,Me,B)=>{B.d(Me,{Dx:()=>sr,b2:()=>gr,q6:()=>Hn});var g=B(6895),H=B(4650);class m extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class he extends m{static makeCurrent(){(0,g.HT)(new he)}onAndCancel(se,X,ye){return se.addEventListener(X,ye,!1),()=>{se.removeEventListener(X,ye,!1)}}dispatchEvent(se,X){se.dispatchEvent(X)}remove(se){se.parentNode&&se.parentNode.removeChild(se)}createElement(se,X){return(X=X||this.getDefaultDocument()).createElement(se)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(se){return se.nodeType===Node.ELEMENT_NODE}isShadowRoot(se){return se instanceof DocumentFragment}getGlobalEventTarget(se,X){return"window"===X?window:"document"===X?se:"body"===X?se.body:null}getBaseHref(se){const X=function ve(){return fe=fe||document.querySelector("base"),fe?fe.getAttribute("href"):null}();return null==X?null:function Ie(de){be=be||document.createElement("a"),be.setAttribute("href",de);const se=be.pathname;return"/"===se.charAt(0)?se:`/${se}`}(X)}resetBaseElement(){fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(se){return(0,g.Mx)(document.cookie,se)}}let be,fe=null;const Te=new H.OlP("TRANSITION_ID"),ie=[{provide:H.ip1,useFactory:function ae(de,se,X){return()=>{X.get(H.CZH).donePromise.then(()=>{const ye=(0,g.q)(),Ye=se.querySelectorAll(`style[ng-transition="${de}"]`);for(let ot=0;ot<Ye.length;ot++)ye.remove(Ye[ot])})}},deps:[Te,g.K0,H.zs3],multi:!0}];let nt=(()=>{class de{build(){return new XMLHttpRequest}}return de.\u0275fac=function(X){return new(X||de)},de.\u0275prov=H.Yz7({token:de,factory:de.\u0275fac}),de})();const He=new H.OlP("EventManagerPlugins");let it=(()=>{class de{constructor(X,ye){this._zone=ye,this._eventNameToPlugin=new Map,X.forEach(Ye=>Ye.manager=this),this._plugins=X.slice().reverse()}addEventListener(X,ye,Ye){return this._findPluginFor(ye).addEventListener(X,ye,Ye)}addGlobalEventListener(X,ye,Ye){return this._findPluginFor(ye).addGlobalEventListener(X,ye,Ye)}getZone(){return this._zone}_findPluginFor(X){const ye=this._eventNameToPlugin.get(X);if(ye)return ye;const Ye=this._plugins;for(let ot=0;ot<Ye.length;ot++){const en=Ye[ot];if(en.supports(X))return this._eventNameToPlugin.set(X,en),en}throw new Error(`No event manager plugin found for event ${X}`)}}return de.\u0275fac=function(X){return new(X||de)(H.LFG(He),H.LFG(H.R0b))},de.\u0275prov=H.Yz7({token:de,factory:de.\u0275fac}),de})();class Ct{constructor(se){this._doc=se}addGlobalEventListener(se,X,ye){const Ye=(0,g.q)().getGlobalEventTarget(this._doc,se);if(!Ye)throw new Error(`Unsupported event target ${Ye} for event ${X}`);return this.addEventListener(Ye,X,ye)}}let Ue=(()=>{class de{constructor(){this._stylesSet=new Set}addStyles(X){const ye=new Set;X.forEach(Ye=>{this._stylesSet.has(Ye)||(this._stylesSet.add(Ye),ye.add(Ye))}),this.onStylesAdded(ye)}onStylesAdded(X){}getAllStyles(){return Array.from(this._stylesSet)}}return de.\u0275fac=function(X){return new(X||de)},de.\u0275prov=H.Yz7({token:de,factory:de.\u0275fac}),de})(),qe=(()=>{class de extends Ue{constructor(X){super(),this._doc=X,this._hostNodes=new Map,this._hostNodes.set(X.head,[])}_addStylesToHost(X,ye,Ye){X.forEach(ot=>{const en=this._doc.createElement("style");en.textContent=ot,Ye.push(ye.appendChild(en))})}addHost(X){const ye=[];this._addStylesToHost(this._stylesSet,X,ye),this._hostNodes.set(X,ye)}removeHost(X){const ye=this._hostNodes.get(X);ye&&ye.forEach(Qe),this._hostNodes.delete(X)}onStylesAdded(X){this._hostNodes.forEach((ye,Ye)=>{this._addStylesToHost(X,Ye,ye)})}ngOnDestroy(){this._hostNodes.forEach(X=>X.forEach(Qe))}}return de.\u0275fac=function(X){return new(X||de)(H.LFG(g.K0))},de.\u0275prov=H.Yz7({token:de,factory:de.\u0275fac}),de})();function Qe(de){(0,g.q)().remove(de)}const ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fe=/%COMP%/g;function dt(de,se){return se.flat(100).map(X=>X.replace(Fe,de))}function ht(de){return se=>{if("__ngUnwrap__"===se)return de;!1===de(se)&&(se.preventDefault(),se.returnValue=!1)}}let yt=(()=>{class de{constructor(X,ye,Ye){this.eventManager=X,this.sharedStylesHost=ye,this.appId=Ye,this.rendererByCompId=new Map,this.defaultRenderer=new _t(X)}createRenderer(X,ye){if(!X||!ye)return this.defaultRenderer;switch(ye.encapsulation){case H.ifc.Emulated:{let Ye=this.rendererByCompId.get(ye.id);return Ye||(Ye=new ze(this.eventManager,this.sharedStylesHost,ye,this.appId),this.rendererByCompId.set(ye.id,Ye)),Ye.applyToHost(X),Ye}case H.ifc.ShadowDom:return new rt(this.eventManager,this.sharedStylesHost,X,ye);default:if(!this.rendererByCompId.has(ye.id)){const Ye=dt(ye.id,ye.styles);this.sharedStylesHost.addStyles(Ye),this.rendererByCompId.set(ye.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return de.\u0275fac=function(X){return new(X||de)(H.LFG(it),H.LFG(qe),H.LFG(H.AFp))},de.\u0275prov=H.Yz7({token:de,factory:de.\u0275fac}),de})();class _t{constructor(se){this.eventManager=se,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(se,X){return X?document.createElementNS(ct[X]||X,se):document.createElement(se)}createComment(se){return document.createComment(se)}createText(se){return document.createTextNode(se)}appendChild(se,X){(Le(se)?se.content:se).appendChild(X)}insertBefore(se,X,ye){se&&(Le(se)?se.content:se).insertBefore(X,ye)}removeChild(se,X){se&&se.removeChild(X)}selectRootElement(se,X){let ye="string"==typeof se?document.querySelector(se):se;if(!ye)throw new Error(`The selector "${se}" did not match any elements`);return X||(ye.textContent=""),ye}parentNode(se){return se.parentNode}nextSibling(se){return se.nextSibling}setAttribute(se,X,ye,Ye){if(Ye){X=Ye+":"+X;const ot=ct[Ye];ot?se.setAttributeNS(ot,X,ye):se.setAttribute(X,ye)}else se.setAttribute(X,ye)}removeAttribute(se,X,ye){if(ye){const Ye=ct[ye];Ye?se.removeAttributeNS(Ye,X):se.removeAttribute(`${ye}:${X}`)}else se.removeAttribute(X)}addClass(se,X){se.classList.add(X)}removeClass(se,X){se.classList.remove(X)}setStyle(se,X,ye,Ye){Ye&(H.JOm.DashCase|H.JOm.Important)?se.style.setProperty(X,ye,Ye&H.JOm.Important?"important":""):se.style[X]=ye}removeStyle(se,X,ye){ye&H.JOm.DashCase?se.style.removeProperty(X):se.style[X]=""}setProperty(se,X,ye){se[X]=ye}setValue(se,X){se.nodeValue=X}listen(se,X,ye){return"string"==typeof se?this.eventManager.addGlobalEventListener(se,X,ht(ye)):this.eventManager.addEventListener(se,X,ht(ye))}}function Le(de){return"TEMPLATE"===de.tagName&&void 0!==de.content}class ze extends _t{constructor(se,X,ye,Ye){super(se),this.component=ye;const ot=dt(Ye+"-"+ye.id,ye.styles);X.addStyles(ot),this.contentAttr=function le(de){return"_ngcontent-%COMP%".replace(Fe,de)}(Ye+"-"+ye.id),this.hostAttr=function $e(de){return"_nghost-%COMP%".replace(Fe,de)}(Ye+"-"+ye.id)}applyToHost(se){super.setAttribute(se,this.hostAttr,"")}createElement(se,X){const ye=super.createElement(se,X);return super.setAttribute(ye,this.contentAttr,""),ye}}class rt extends _t{constructor(se,X,ye,Ye){super(se),this.sharedStylesHost=X,this.hostEl=ye,this.shadowRoot=ye.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ot=dt(Ye.id,Ye.styles);for(let en=0;en<ot.length;en++){const zn=document.createElement("style");zn.textContent=ot[en],this.shadowRoot.appendChild(zn)}}nodeOrShadowRoot(se){return se===this.hostEl?this.shadowRoot:se}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(se,X){return super.appendChild(this.nodeOrShadowRoot(se),X)}insertBefore(se,X,ye){return super.insertBefore(this.nodeOrShadowRoot(se),X,ye)}removeChild(se,X){return super.removeChild(this.nodeOrShadowRoot(se),X)}parentNode(se){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(se)))}}let ut=(()=>{class de extends Ct{constructor(X){super(X)}supports(X){return!0}addEventListener(X,ye,Ye){return X.addEventListener(ye,Ye,!1),()=>this.removeEventListener(X,ye,Ye)}removeEventListener(X,ye,Ye){return X.removeEventListener(ye,Ye)}}return de.\u0275fac=function(X){return new(X||de)(H.LFG(g.K0))},de.\u0275prov=H.Yz7({token:de,factory:de.\u0275fac}),de})();const vt=["alt","control","meta","shift"],tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qt={alt:de=>de.altKey,control:de=>de.ctrlKey,meta:de=>de.metaKey,shift:de=>de.shiftKey};let _e=(()=>{class de extends Ct{constructor(X){super(X)}supports(X){return null!=de.parseEventName(X)}addEventListener(X,ye,Ye){const ot=de.parseEventName(ye),en=de.eventCallback(ot.fullKey,Ye,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(X,ot.domEventName,en))}static parseEventName(X){const ye=X.toLowerCase().split("."),Ye=ye.shift();if(0===ye.length||"keydown"!==Ye&&"keyup"!==Ye)return null;const ot=de._normalizeKey(ye.pop());let en="",zn=ye.indexOf("code");if(zn>-1&&(ye.splice(zn,1),en="code."),vt.forEach(Gr=>{const Ur=ye.indexOf(Gr);Ur>-1&&(ye.splice(Ur,1),en+=Gr+".")}),en+=ot,0!=ye.length||0===ot.length)return null;const cr={};return cr.domEventName=Ye,cr.fullKey=en,cr}static matchEventFullKeyCode(X,ye){let Ye=tt[X.key]||X.key,ot="";return ye.indexOf("code.")>-1&&(Ye=X.code,ot="code."),!(null==Ye||!Ye)&&(Ye=Ye.toLowerCase()," "===Ye?Ye="space":"."===Ye&&(Ye="dot"),vt.forEach(en=>{en!==Ye&&(0,qt[en])(X)&&(ot+=en+".")}),ot+=Ye,ot===ye)}static eventCallback(X,ye,Ye){return ot=>{de.matchEventFullKeyCode(ot,X)&&Ye.runGuarded(()=>ye(ot))}}static _normalizeKey(X){return"esc"===X?"escape":X}}return de.\u0275fac=function(X){return new(X||de)(H.LFG(g.K0))},de.\u0275prov=H.Yz7({token:de,factory:de.\u0275fac}),de})();const Hn=(0,H.eFA)(H._c5,"browser",[{provide:H.Lbi,useValue:g.bD},{provide:H.g9A,useValue:function Ln(){he.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function vn(){return(0,H.RDi)(document),document},deps:[]}]),pr=new H.OlP(""),Ar=[{provide:H.rWj,useClass:class pe{addToWindow(se){H.dqk.getAngularTestability=(ye,Ye=!0)=>{const ot=se.findTestabilityInTree(ye,Ye);if(null==ot)throw new Error("Could not find testability for element.");return ot},H.dqk.getAllAngularTestabilities=()=>se.getAllTestabilities(),H.dqk.getAllAngularRootElements=()=>se.getAllRootElements(),H.dqk.frameworkStabilizers||(H.dqk.frameworkStabilizers=[]),H.dqk.frameworkStabilizers.push(ye=>{const Ye=H.dqk.getAllAngularTestabilities();let ot=Ye.length,en=!1;const zn=function(cr){en=en||cr,ot--,0==ot&&ye(en)};Ye.forEach(function(cr){cr.whenStable(zn)})})}findTestabilityInTree(se,X,ye){return null==X?null:se.getTestability(X)??(ye?(0,g.q)().isShadowRoot(X)?this.findTestabilityInTree(se,X.host,!0):this.findTestabilityInTree(se,X.parentElement,!0):null)}},deps:[]},{provide:H.lri,useClass:H.dDg,deps:[H.R0b,H.eoX,H.rWj]},{provide:H.dDg,useClass:H.dDg,deps:[H.R0b,H.eoX,H.rWj]}],Pn=[{provide:H.zSh,useValue:"root"},{provide:H.qLn,useFactory:function Zn(){return new H.qLn},deps:[]},{provide:He,useClass:ut,multi:!0,deps:[g.K0,H.R0b,H.Lbi]},{provide:He,useClass:_e,multi:!0,deps:[g.K0]},{provide:yt,useClass:yt,deps:[it,qe,H.AFp]},{provide:H.FYo,useExisting:yt},{provide:Ue,useExisting:qe},{provide:qe,useClass:qe,deps:[g.K0]},{provide:it,useClass:it,deps:[He,H.R0b]},{provide:g.JF,useClass:nt,deps:[]},[]];let gr=(()=>{class de{constructor(X){}static withServerTransition(X){return{ngModule:de,providers:[{provide:H.AFp,useValue:X.appId},{provide:Te,useExisting:H.AFp},ie]}}}return de.\u0275fac=function(X){return new(X||de)(H.LFG(pr,12))},de.\u0275mod=H.oAB({type:de}),de.\u0275inj=H.cJS({providers:[...Pn,...Ar],imports:[g.ez,H.hGG]}),de})(),sr=(()=>{class de{constructor(X){this._doc=X}getTitle(){return this._doc.title}setTitle(X){this._doc.title=X||""}}return de.\u0275fac=function(X){return new(X||de)(H.LFG(g.K0))},de.\u0275prov=H.Yz7({token:de,factory:function(X){let ye=null;return ye=X?new X:function ir(){return new sr((0,H.LFG)(g.K0))}(),ye},providedIn:"root"}),de})();typeof window<"u"&&window},2435:(bt,Me,B)=>{B.d(Me,{gz:()=>Bs,F0:()=>vr,rH:()=>to,Od:()=>Ha,Bz:()=>ks,lC:()=>es});var g=B(4650),H=B(8996),m=B(9646),he=B(1135),fe=B(6805),ve=B(9751),be=B(4742),Ie=B(4671),Te=B(3268),ae=B(3269),ie=B(1810),pe=B(5403),nt=B(9672);function He(..._){const w=(0,ae.yG)(_),y=(0,ae.jO)(_),{args:C,keys:N}=(0,be.D)(_);if(0===C.length)return(0,H.D)([],w);const $=new ve.y(function it(_,w,y=Ie.y){return C=>{Ct(w,()=>{const{length:N}=_,$=new Array(N);let Y=N,Ee=N;for(let We=0;We<N;We++)Ct(w,()=>{const Nt=(0,H.D)(_[We],w);let xt=!1;Nt.subscribe((0,pe.x)(C,Un=>{$[We]=Un,xt||(xt=!0,Ee--),Ee||C.next(y($.slice()))},()=>{--Y||C.complete()}))},C)},C)}}(C,w,N?Y=>(0,ie.n)(N,Y):Ie.y));return y?$.pipe((0,Te.Z)(y)):$}function Ct(_,w,y){_?(0,nt.f)(y,_,w):w()}var Ue=B(7272),qe=B(8421);function Qe(_){return new ve.y(w=>{(0,qe.Xf)(_()).subscribe(w)})}var ct=B(9635),Fe=B(576);function Be(_,w){const y=(0,Fe.m)(_)?_:()=>_,C=N=>N.error(y());return new ve.y(w?N=>w.schedule(C,0,N):C)}var Ge=B(515),lt=B(727),Ze=B(4482);function le(){return(0,Ze.e)((_,w)=>{let y=null;_._refCount++;const C=(0,pe.x)(w,void 0,void 0,void 0,()=>{if(!_||_._refCount<=0||0<--_._refCount)return void(y=null);const N=_._connection,$=y;y=null,N&&(!$||N===$)&&N.unsubscribe(),w.unsubscribe()});_.subscribe(C),C.closed||(y=_.connect())})}class $e extends ve.y{constructor(w,y){super(),this.source=w,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,Ze.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,w?.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new lt.w0;const y=this.getSubject();w.add(this.source.subscribe((0,pe.x)(y,void 0,()=>{this._teardown(),y.complete()},C=>{this._teardown(),y.error(C)},()=>this._teardown()))),w.closed&&(this._connection=null,w=lt.w0.EMPTY)}return w}refCount(){return le()(this)}}var dt=B(7579),ht=B(6895),yt=B(4004),_t=B(3900),Ae=B(5698),ke=B(8675),Le=B(9300),ze=B(5577),rt=B(590);function ut(_,w){return(0,Fe.m)(w)?(0,ze.z)(_,w,1):(0,ze.z)(_,1)}var vt=B(8505);function tt(_){return(0,Ze.e)((w,y)=>{let $,C=null,N=!1;C=w.subscribe((0,pe.x)(y,void 0,void 0,Y=>{$=(0,qe.Xf)(_(Y,tt(_)(w))),C?(C.unsubscribe(),C=null,$.subscribe(y)):N=!0})),N&&(C.unsubscribe(),C=null,$.subscribe(y))})}var qt=B(5026);function _e(_){return _<=0?()=>Ge.E:(0,Ze.e)((w,y)=>{let C=[];w.subscribe((0,pe.x)(y,N=>{C.push(N),_<C.length&&C.shift()},()=>{for(const N of C)y.next(N);y.complete()},void 0,()=>{C=null}))})}var nn=B(8068),Ht=B(6590);function Tt(_,w){const y=arguments.length>=2;return C=>C.pipe(_?(0,Le.h)((N,$)=>_(N,$,C)):Ie.y,_e(1),y?(0,Ht.d)(w):(0,nn.T)(()=>new fe.K))}function Ln(_){return(0,Ze.e)((w,y)=>{try{w.subscribe(y)}finally{y.add(_)}})}var Zn=B(8189),vn=B(1481);const Gt="primary",Hn=Symbol("RouteTitle");class pr{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const y=this.params[w];return Array.isArray(y)?y[0]:y}return null}getAll(w){if(this.has(w)){const y=this.params[w];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Ar(_){return new pr(_)}function Pn(_,w,y){const C=y.path.split("/");if(C.length>_.length||"full"===y.pathMatch&&(w.hasChildren()||C.length<_.length))return null;const N={};for(let $=0;$<C.length;$++){const Y=C[$],Ee=_[$];if(Y.startsWith(":"))N[Y.substring(1)]=Ee;else if(Y!==Ee.path)return null}return{consumed:_.slice(0,C.length),posParams:N}}function gt(_,w){const y=_?Object.keys(_):void 0,C=w?Object.keys(w):void 0;if(!y||!C||y.length!=C.length)return!1;let N;for(let $=0;$<y.length;$++)if(N=y[$],!rr(_[N],w[N]))return!1;return!0}function rr(_,w){if(Array.isArray(_)&&Array.isArray(w)){if(_.length!==w.length)return!1;const y=[..._].sort(),C=[...w].sort();return y.every((N,$)=>C[$]===N)}return _===w}function Nr(_){return Array.prototype.concat.apply([],_)}function ir(_){return _.length>0?_[_.length-1]:null}function an(_,w){for(const y in _)_.hasOwnProperty(y)&&w(_[y],y)}function kt(_){return(0,g.CqO)(_)?_:(0,g.QGY)(_)?(0,H.D)(Promise.resolve(_)):(0,m.of)(_)}const Lt=!1,Yt={exact:function Dr(_,w,y){if(!je(_.segments,w.segments)||!ri(_.segments,w.segments,y)||_.numberOfChildren!==w.numberOfChildren)return!1;for(const C in w.children)if(!_.children[C]||!Dr(_.children[C],w.children[C],y))return!1;return!0},subset:Ti},ur={exact:function Gn(_,w){return gt(_,w)},subset:function br(_,w){return Object.keys(w).length<=Object.keys(_).length&&Object.keys(w).every(y=>rr(_[y],w[y]))},ignored:()=>!0};function wn(_,w,y){return Yt[y.paths](_.root,w.root,y.matrixParams)&&ur[y.queryParams](_.queryParams,w.queryParams)&&!("exact"===y.fragment&&_.fragment!==w.fragment)}function Ti(_,w,y){return fn(_,w,w.segments,y)}function fn(_,w,y,C){if(_.segments.length>y.length){const N=_.segments.slice(0,y.length);return!(!je(N,y)||w.hasChildren()||!ri(N,y,C))}if(_.segments.length===y.length){if(!je(_.segments,y)||!ri(_.segments,y,C))return!1;for(const N in w.children)if(!_.children[N]||!Ti(_.children[N],w.children[N],C))return!1;return!0}{const N=y.slice(0,_.segments.length),$=y.slice(_.segments.length);return!!(je(_.segments,N)&&ri(_.segments,N,C)&&_.children[Gt])&&fn(_.children[Gt],w,$,C)}}function ri(_,w,y){return w.every((C,N)=>ur[y](_[N].parameters,C.parameters))}class sn{constructor(w=new Zt([],{}),y={},C=null){this.root=w,this.queryParams=y,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ar(this.queryParams)),this._queryParamMap}toString(){return cn.serialize(this)}}class Zt{constructor(w,y){this.segments=w,this.children=y,this.parent=null,an(y,(C,N)=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return On(this)}}class Mn{constructor(w,y){this.path=w,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Ar(this.parameters)),this._parameterMap}toString(){return It(this)}}function je(_,w){return _.length===w.length&&_.every((y,C)=>y.path===w[C].path)}let Ut=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(){return new on},providedIn:"root"}),_})();class on{parse(w){const y=new cr(w);return new sn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(w){const y=`/${ce(w.root,!0)}`,C=function se(_){const w=Object.keys(_).map(y=>{const C=_[y];return Array.isArray(C)?C.map(N=>`${Q(y)}=${Q(N)}`).join("&"):`${Q(y)}=${Q(C)}`}).filter(y=>!!y);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${y}${C}${"string"==typeof w.fragment?`#${function J(_){return encodeURI(_)}(w.fragment)}`:""}`}}const cn=new on;function On(_){return _.segments.map(w=>It(w)).join("/")}function ce(_,w){if(!_.hasChildren())return On(_);if(w){const y=_.children[Gt]?ce(_.children[Gt],!1):"",C=[];return an(_.children,(N,$)=>{$!==Gt&&C.push(`${$}:${ce(N,!1)}`)}),C.length>0?`${y}(${C.join("//")})`:y}{const y=function Pt(_,w){let y=[];return an(_.children,(C,N)=>{N===Gt&&(y=y.concat(w(C,N)))}),an(_.children,(C,N)=>{N!==Gt&&(y=y.concat(w(C,N)))}),y}(_,(C,N)=>N===Gt?[ce(_.children[Gt],!1)]:[`${N}:${ce(C,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[Gt]?`${On(_)}/${y[0]}`:`${On(_)}/(${y.join("//")})`}}function oe(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Q(_){return oe(_).replace(/%3B/gi,";")}function Z(_){return oe(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function we(_){return decodeURIComponent(_)}function Ve(_){return we(_.replace(/\+/g,"%20"))}function It(_){return`${Z(_.path)}${function de(_){return Object.keys(_).map(w=>`;${Z(w)}=${Z(_[w])}`).join("")}(_.parameters)}`}const X=/^[^\/()?;=#]+/;function ye(_){const w=_.match(X);return w?w[0]:""}const Ye=/^[^=?&#]+/,en=/^[^&#]+/;class cr{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(w.length>0||Object.keys(y).length>0)&&(C[Gt]=new Zt(w,y)),C}parseSegment(){const w=ye(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new g.vHH(4009,Lt);return this.capture(w),new Mn(we(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const y=ye(this.remaining);if(!y)return;this.capture(y);let C="";if(this.consumeOptional("=")){const N=ye(this.remaining);N&&(C=N,this.capture(C))}w[we(y)]=we(C)}parseQueryParam(w){const y=function ot(_){const w=_.match(Ye);return w?w[0]:""}(this.remaining);if(!y)return;this.capture(y);let C="";if(this.consumeOptional("=")){const Y=function zn(_){const w=_.match(en);return w?w[0]:""}(this.remaining);Y&&(C=Y,this.capture(C))}const N=Ve(y),$=Ve(C);if(w.hasOwnProperty(N)){let Y=w[N];Array.isArray(Y)||(Y=[Y],w[N]=Y),Y.push($)}else w[N]=$}parseParens(w){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=ye(this.remaining),N=this.remaining[C.length];if("/"!==N&&")"!==N&&";"!==N)throw new g.vHH(4010,Lt);let $;C.indexOf(":")>-1?($=C.slice(0,C.indexOf(":")),this.capture($),this.capture(":")):w&&($=Gt);const Y=this.parseChildren();y[$]=1===Object.keys(Y).length?Y[Gt]:new Zt([],Y),this.consumeOptional("//")}return y}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new g.vHH(4011,Lt)}}function Gr(_){return _.segments.length>0?new Zt([],{[Gt]:_}):_}function Ur(_){const w={};for(const C of Object.keys(_.children)){const $=Ur(_.children[C]);($.segments.length>0||$.hasChildren())&&(w[C]=$)}return function bs(_){if(1===_.numberOfChildren&&_.children[Gt]){const w=_.children[Gt];return new Zt(_.segments.concat(w.segments),w.children)}return _}(new Zt(_.segments,w))}function zr(_){return _ instanceof sn}function Cn(_,w,y,C,N){if(0===y.length)return er(w.root,w.root,w.root,C,N);const $=function Mt(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new gi(!0,0,_);let w=0,y=!1;const C=_.reduce((N,$,Y)=>{if("object"==typeof $&&null!=$){if($.outlets){const Ee={};return an($.outlets,(We,Nt)=>{Ee[Nt]="string"==typeof We?We.split("/"):We}),[...N,{outlets:Ee}]}if($.segmentPath)return[...N,$.segmentPath]}return"string"!=typeof $?[...N,$]:0===Y?($.split("/").forEach((Ee,We)=>{0==We&&"."===Ee||(0==We&&""===Ee?y=!0:".."===Ee?w++:""!=Ee&&N.push(Ee))}),N):[...N,$]},[]);return new gi(y,w,C)}(y);return $.toRoot()?er(w.root,w.root,new Zt([],{}),C,N):function Y(We){const Nt=function Wr(_,w,y,C){if(_.isAbsolute)return new tn(w.root,!0,0);if(-1===C)return new tn(y,y===w.root,0);return function Vi(_,w,y){let C=_,N=w,$=y;for(;$>N;){if($-=N,C=C.parent,!C)throw new g.vHH(4005,!1);N=C.segments.length}return new tn(C,!1,N-$)}(y,C+(lr(_.commands[0])?0:1),_.numberOfDoubleDots)}($,w,_.snapshot?._urlSegment,We),xt=Nt.processChildren?Vn(Nt.segmentGroup,Nt.index,$.commands):mi(Nt.segmentGroup,Nt.index,$.commands);return er(w.root,Nt.segmentGroup,xt,C,N)}(_.snapshot?._lastPathIndex)}function lr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function xr(_){return"object"==typeof _&&null!=_&&_.outlets}function er(_,w,y,C,N){let Y,$={};C&&an(C,(We,Nt)=>{$[Nt]=Array.isArray(We)?We.map(xt=>`${xt}`):`${We}`}),Y=_===w?y:_r(_,w,y);const Ee=Gr(Ur(Y));return new sn(Ee,$,N)}function _r(_,w,y){const C={};return an(_.children,(N,$)=>{C[$]=N===w?y:_r(N,w,y)}),new Zt(_.segments,C)}class gi{constructor(w,y,C){if(this.isAbsolute=w,this.numberOfDoubleDots=y,this.commands=C,w&&C.length>0&&lr(C[0]))throw new g.vHH(4003,!1);const N=C.find(xr);if(N&&N!==ir(C))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tn{constructor(w,y,C){this.segmentGroup=w,this.processChildren=y,this.index=C}}function mi(_,w,y){if(_||(_=new Zt([],{})),0===_.segments.length&&_.hasChildren())return Vn(_,w,y);const C=function Zo(_,w,y){let C=0,N=w;const $={match:!1,pathIndex:0,commandIndex:0};for(;N<_.segments.length;){if(C>=y.length)return $;const Y=_.segments[N],Ee=y[C];if(xr(Ee))break;const We=`${Ee}`,Nt=C<y.length-1?y[C+1]:null;if(N>0&&void 0===We)break;if(We&&Nt&&"object"==typeof Nt&&void 0===Nt.outlets){if(!Si(We,Nt,Y))return $;C+=2}else{if(!Si(We,{},Y))return $;C++}N++}return{match:!0,pathIndex:N,commandIndex:C}}(_,w,y),N=y.slice(C.commandIndex);if(C.match&&C.pathIndex<_.segments.length){const $=new Zt(_.segments.slice(0,C.pathIndex),{});return $.children[Gt]=new Zt(_.segments.slice(C.pathIndex),_.children),Vn($,0,N)}return C.match&&0===N.length?new Zt(_.segments,{}):C.match&&!_.hasChildren()?Ji(_,w,y):C.match?Vn(_,0,N):Ji(_,w,y)}function Vn(_,w,y){if(0===y.length)return new Zt(_.segments,{});{const C=function Rr(_){return xr(_[0])?_[0].outlets:{[Gt]:_}}(y),N={};return!C[Gt]&&_.children[Gt]&&1===_.numberOfChildren&&0===_.children[Gt].segments.length?Vn(_.children[Gt],w,y):(an(C,($,Y)=>{"string"==typeof $&&($=[$]),null!==$&&(N[Y]=mi(_.children[Y],w,$))}),an(_.children,($,Y)=>{void 0===C[Y]&&(N[Y]=$)}),new Zt(_.segments,N))}}function Ji(_,w,y){const C=_.segments.slice(0,w);let N=0;for(;N<y.length;){const $=y[N];if(xr($)){const We=pn($.outlets);return new Zt(C,We)}if(0===N&&lr(y[0])){C.push(new Mn(_.segments[w].path,ii(y[0]))),N++;continue}const Y=xr($)?$.outlets[Gt]:`${$}`,Ee=N<y.length-1?y[N+1]:null;Y&&Ee&&lr(Ee)?(C.push(new Mn(Y,ii(Ee))),N+=2):(C.push(new Mn(Y,{})),N++)}return new Zt(C,{})}function pn(_){const w={};return an(_,(y,C)=>{"string"==typeof y&&(y=[y]),null!==y&&(w[C]=Ji(new Zt([],{}),0,y))}),w}function ii(_){const w={};return an(_,(y,C)=>w[C]=`${y}`),w}function Si(_,w,y){return _==y.path&&gt(w,y.parameters)}const Ai="imperative";class Cr{constructor(w,y){this.id=w,this.url=y}}class or extends Cr{constructor(w,y,C="imperative",N=null){super(w,y),this.type=0,this.navigationTrigger=C,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ts extends Cr{constructor(w,y,C){super(w,y),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ui extends Cr{constructor(w,y,C,N){super(w,y),this.reason=C,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qr extends Cr{constructor(w,y,C,N){super(w,y),this.reason=C,this.code=N,this.type=16}}class Mo extends Cr{constructor(w,y,C,N){super(w,y),this.error=C,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ua extends Cr{constructor(w,y,C,N){super(w,y),this.urlAfterRedirects=C,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kn extends Cr{constructor(w,y,C,N){super(w,y),this.urlAfterRedirects=C,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hs extends Cr{constructor(w,y,C,N,$){super(w,y),this.urlAfterRedirects=C,this.state=N,this.shouldActivate=$,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ao extends Cr{constructor(w,y,C,N){super(w,y),this.urlAfterRedirects=C,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Us extends Cr{constructor(w,y,C,N){super(w,y),this.urlAfterRedirects=C,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ss{constructor(w){this.route=w,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fs{constructor(w){this.route=w,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pr{constructor(w){this.snapshot=w,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zr{constructor(w){this.snapshot=w,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ra{constructor(w){this.snapshot=w,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yi{constructor(w){this.snapshot=w,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kr{constructor(w,y,C){this.routerEvent=w,this.position=y,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let co=(()=>{class _{createUrlTree(y,C,N,$,Y,Ee){return Cn(y||C.root,N,$,Y,Ee)}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac}),_})(),Oa=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(w){return co.\u0275fac(w)},providedIn:"root"}),_})();class ca{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const y=this.pathFromRoot(w);return y.length>1?y[y.length-2]:null}children(w){const y=vi(w,this._root);return y?y.children.map(C=>C.value):[]}firstChild(w){const y=vi(w,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(w){const y=Na(w,this._root);return y.length<2?[]:y[y.length-2].children.map(N=>N.value).filter(N=>N!==w)}pathFromRoot(w){return Na(w,this._root).map(y=>y.value)}}function vi(_,w){if(_===w.value)return w;for(const y of w.children){const C=vi(_,y);if(C)return C}return null}function Na(_,w){if(_===w.value)return[w];for(const y of w.children){const C=Na(_,y);if(C.length)return C.unshift(w),C}return[]}class Bi{constructor(w,y){this.value=w,this.children=y}toString(){return`TreeNode(${this.value})`}}function lo(_){const w={};return _&&_.children.forEach(y=>w[y.value.outlet]=y),w}class As extends ca{constructor(w,y){super(w),this.snapshot=y,js(this,w)}toString(){return this.snapshot.toString()}}function ka(_,w){const y=function Ro(_,w){const Y=new kr([],{},{},"",{},Gt,w,null,_.root,-1,{});return new la("",new Bi(Y,[]))}(_,w),C=new he.X([new Mn("",{})]),N=new he.X({}),$=new he.X({}),Y=new he.X({}),Ee=new he.X(""),We=new Bs(C,N,Y,Ee,$,Gt,w,y.root);return We.snapshot=y.root,new As(new Bi(We,[]),y)}class Bs{constructor(w,y,C,N,$,Y,Ee,We){this.url=w,this.params=y,this.queryParams=C,this.fragment=N,this.data=$,this.outlet=Y,this.component=Ee,this.title=this.data?.pipe((0,yt.U)(Nt=>Nt[Hn]))??(0,m.of)(void 0),this._futureSnapshot=We}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(w=>Ar(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(w=>Ar(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Po(_,w="emptyOnly"){const y=_.pathFromRoot;let C=0;if("always"!==w)for(C=y.length-1;C>=1;){const N=y[C],$=y[C-1];if(N.routeConfig&&""===N.routeConfig.path)C--;else{if($.component)break;C--}}return function ji(_){return _.reduce((w,y)=>({params:{...w.params,...y.params},data:{...w.data,...y.data},resolve:{...y.data,...w.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(C))}class kr{get title(){return this.data?.[Hn]}constructor(w,y,C,N,$,Y,Ee,We,Nt,xt,Un){this.url=w,this.params=y,this.queryParams=C,this.fragment=N,this.data=$,this.outlet=Y,this.component=Ee,this.routeConfig=We,this._urlSegment=Nt,this._lastPathIndex=xt,this._resolve=Un}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ar(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ar(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class la extends ca{constructor(w,y){super(y),this.url=w,js(this,y)}toString(){return $s(this._root)}}function js(_,w){w.value._routerState=_,w.children.forEach(y=>js(_,y))}function $s(_){const w=_.children.length>0?` { ${_.children.map($s).join(", ")} } `:"";return`${_.value}${w}`}function Ko(_){if(_.snapshot){const w=_.snapshot,y=_._futureSnapshot;_.snapshot=y,gt(w.queryParams,y.queryParams)||_.queryParams.next(y.queryParams),w.fragment!==y.fragment&&_.fragment.next(y.fragment),gt(w.params,y.params)||_.params.next(y.params),function gr(_,w){if(_.length!==w.length)return!1;for(let y=0;y<_.length;++y)if(!gt(_[y],w[y]))return!1;return!0}(w.url,y.url)||_.url.next(y.url),gt(w.data,y.data)||_.data.next(y.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function $i(_,w){const y=gt(_.params,w.params)&&function st(_,w){return je(_,w)&&_.every((y,C)=>gt(y.parameters,w[C].parameters))}(_.url,w.url);return y&&!(!_.parent!=!w.parent)&&(!_.parent||$i(_.parent,w.parent))}function Xi(_,w,y){if(y&&_.shouldReuseRoute(w.value,y.value.snapshot)){const C=y.value;C._futureSnapshot=w.value;const N=function Hs(_,w,y){return w.children.map(C=>{for(const N of y.children)if(_.shouldReuseRoute(C.value,N.value.snapshot))return Xi(_,C,N);return Xi(_,C)})}(_,w,y);return new Bi(C,N)}{if(_.shouldAttach(w.value)){const $=_.retrieve(w.value);if(null!==$){const Y=$.route;return Y.value._futureSnapshot=w.value,Y.children=w.children.map(Ee=>Xi(_,Ee)),Y}}const C=function xs(_){return new Bs(new he.X(_.url),new he.X(_.params),new he.X(_.queryParams),new he.X(_.fragment),new he.X(_.data),_.outlet,_.component,_)}(w.value),N=w.children.map($=>Xi(_,$));return new Bi(C,N)}}const Gs="ngNavigationCancelingError";function zs(_,w){const{redirectTo:y,navigationBehaviorOptions:C}=zr(w)?{redirectTo:w,navigationBehaviorOptions:void 0}:w,N=ho(!1,0,w);return N.url=y,N.navigationBehaviorOptions=C,N}function ho(_,w,y){const C=new Error("NavigationCancelingError: "+(_||""));return C[Gs]=!0,C.cancellationCode=w,y&&(C.url=y),C}function Ms(_){return fo(_)&&zr(_.url)}function fo(_){return _&&_[Gs]}class _i{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Yr,this.attachRef=null}}let Yr=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(y,C){const N=this.getOrCreateContext(y);N.outlet=C,this.contexts.set(y,N)}onChildOutletDestroyed(y){const C=this.getContext(y);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let C=this.getContext(y);return C||(C=new _i,this.contexts.set(y,C)),C}getContext(y){return this.contexts.get(y)||null}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Ot=!1;let es=(()=>{class _{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(Yr),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb)}ngOnChanges(y){if(y.name){const{firstChange:C,previousValue:N}=y.name;if(C)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(y){return this.parentContexts.getContext(y)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const y=this.parentContexts.getContext(this.name);y?.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Ot);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Ot);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Ot);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,C){this.activated=y,this._activatedRoute=C,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,C){if(this.isActivated)throw new g.vHH(4013,Ot);this._activatedRoute=y;const N=this.location,Y=y.snapshot.component,Ee=this.parentContexts.getOrCreateContext(this.name).children,We=new Bt(y,Ee,N.injector);if(C&&function Qr(_){return!!_.resolveComponentFactory}(C)){const Nt=C.resolveComponentFactory(Y);this.activated=N.createComponent(Nt,N.length,We)}else this.activated=N.createComponent(Y,{index:N.length,injector:We,environmentInjector:C??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275dir=g.lG2({type:_,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]}),_})();class Bt{constructor(w,y,C){this.route=w,this.childContexts=y,this.parent=C}get(w,y){return w===Bs?this.route:w===Yr?this.childContexts:this.parent.get(w,y)}}let dr=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275cmp=g.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(y,C){1&y&&g._UZ(0,"router-outlet")},dependencies:[es],encapsulation:2}),_})();function Hi(_,w){return _.providers&&!_._injector&&(_._injector=(0,g.MMx)(_.providers,w,`Route: ${_.path}`)),_._injector??w}function si(_){const w=_.children&&_.children.map(si),y=w?{..._,children:w}:{..._};return!y.component&&!y.loadComponent&&(w||y.loadChildren)&&y.outlet&&y.outlet!==Gt&&(y.component=dr),y}function Jr(_){return _.outlet||Gt}function Yo(_,w){const y=_.filter(C=>Jr(C)===w);return y.push(..._.filter(C=>Jr(C)!==w)),y}function Xr(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let w=_.parent;w;w=w.parent){const y=w.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class ar{constructor(w,y,C,N){this.routeReuseStrategy=w,this.futureState=y,this.currState=C,this.forwardEvent=N}activate(w){const y=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,C,w),Ko(this.futureState.root),this.activateChildRoutes(y,C,w)}deactivateChildRoutes(w,y,C){const N=lo(y);w.children.forEach($=>{const Y=$.value.outlet;this.deactivateRoutes($,N[Y],C),delete N[Y]}),an(N,($,Y)=>{this.deactivateRouteAndItsChildren($,C)})}deactivateRoutes(w,y,C){const N=w.value,$=y?y.value:null;if(N===$)if(N.component){const Y=C.getContext(N.outlet);Y&&this.deactivateChildRoutes(w,y,Y.children)}else this.deactivateChildRoutes(w,y,C);else $&&this.deactivateRouteAndItsChildren(y,C)}deactivateRouteAndItsChildren(w,y){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,y):this.deactivateRouteAndOutlet(w,y)}detachAndStoreRouteSubtree(w,y){const C=y.getContext(w.value.outlet),N=C&&w.value.component?C.children:y,$=lo(w);for(const Y of Object.keys($))this.deactivateRouteAndItsChildren($[Y],N);if(C&&C.outlet){const Y=C.outlet.detach(),Ee=C.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:Y,route:w,contexts:Ee})}}deactivateRouteAndOutlet(w,y){const C=y.getContext(w.value.outlet),N=C&&w.value.component?C.children:y,$=lo(w);for(const Y of Object.keys($))this.deactivateRouteAndItsChildren($[Y],N);C&&C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated(),C.attachRef=null,C.resolver=null,C.route=null)}activateChildRoutes(w,y,C){const N=lo(y);w.children.forEach($=>{this.activateRoutes($,N[$.value.outlet],C),this.forwardEvent(new yi($.value.snapshot))}),w.children.length&&this.forwardEvent(new Zr(w.value.snapshot))}activateRoutes(w,y,C){const N=w.value,$=y?y.value:null;if(Ko(N),N===$)if(N.component){const Y=C.getOrCreateContext(N.outlet);this.activateChildRoutes(w,y,Y.children)}else this.activateChildRoutes(w,y,C);else if(N.component){const Y=C.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Ee=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),Y.children.onOutletReAttached(Ee.contexts),Y.attachRef=Ee.componentRef,Y.route=Ee.route.value,Y.outlet&&Y.outlet.attach(Ee.componentRef,Ee.route.value),Ko(Ee.route.value),this.activateChildRoutes(w,null,Y.children)}else{const Ee=Xr(N.snapshot),We=Ee?.get(g._Vd)??null;Y.attachRef=null,Y.route=N,Y.resolver=We,Y.injector=Ee,Y.outlet&&Y.outlet.activateWith(N,Y.injector),this.activateChildRoutes(w,null,Y.children)}}else this.activateChildRoutes(w,null,C)}}class un{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class ts{constructor(w,y){this.component=w,this.route=y}}function Qo(_,w,y){const C=_._root;return ei(C,w?w._root:null,y,[C.value])}function ns(_,w){const y=Symbol(),C=w.get(_,y);return C===y?"function"!=typeof _||(0,g.Z0I)(_)?w.get(_):_:C}function ei(_,w,y,C,N={canDeactivateChecks:[],canActivateChecks:[]}){const $=lo(w);return _.children.forEach(Y=>{(function No(_,w,y,C,N={canDeactivateChecks:[],canActivateChecks:[]}){const $=_.value,Y=w?w.value:null,Ee=y?y.getContext(_.value.outlet):null;if(Y&&$.routeConfig===Y.routeConfig){const We=function eu(_,w,y){if("function"==typeof y)return y(_,w);switch(y){case"pathParamsChange":return!je(_.url,w.url);case"pathParamsOrQueryParamsChange":return!je(_.url,w.url)||!gt(_.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$i(_,w)||!gt(_.queryParams,w.queryParams);default:return!$i(_,w)}}(Y,$,$.routeConfig.runGuardsAndResolvers);We?N.canActivateChecks.push(new un(C)):($.data=Y.data,$._resolvedData=Y._resolvedData),ei(_,w,$.component?Ee?Ee.children:null:y,C,N),We&&Ee&&Ee.outlet&&Ee.outlet.isActivated&&N.canDeactivateChecks.push(new ts(Ee.outlet.component,Y))}else Y&&Zs(w,Ee,N),N.canActivateChecks.push(new un(C)),ei(_,null,$.component?Ee?Ee.children:null:y,C,N)})(Y,$[Y.value.outlet],y,C.concat([Y.value]),N),delete $[Y.value.outlet]}),an($,(Y,Ee)=>Zs(Y,y.getContext(Ee),N)),N}function Zs(_,w,y){const C=lo(_),N=_.value;an(C,($,Y)=>{Zs($,N.component?w?w.children.getContext(Y):null:w,y)}),y.canDeactivateChecks.push(new ts(N.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,N))}function S(_){return"function"==typeof _}function wi(_){return _ instanceof fe.K||"EmptyError"===_?.name}const ps=Symbol("INITIAL_VALUE");function rs(){return(0,_t.w)(_=>He(_.map(w=>w.pipe((0,Ae.q)(1),(0,ke.O)(ps)))).pipe((0,yt.U)(w=>{for(const y of w)if(!0!==y){if(y===ps)return ps;if(!1===y||y instanceof sn)return y}return!0}),(0,Le.h)(w=>w!==ps),(0,Ae.q)(1)))}function Jo(_){return(0,ct.z)((0,vt.b)(w=>{if(zr(w))throw zs(0,w)}),(0,yt.U)(w=>!0===w))}const Ks={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tu(_,w,y,C,N){const $=Ps(_,w,y);return $.matched?function Va(_,w,y,C){const N=w.canMatch;if(!N||0===N.length)return(0,m.of)(!0);const $=N.map(Y=>{const Ee=ns(Y,_);return kt(function Nn(_){return _&&S(_.canMatch)}(Ee)?Ee.canMatch(w,y):_.runInContext(()=>Ee(w,y)))});return(0,m.of)($).pipe(rs(),Jo())}(C=Hi(w,C),w,y).pipe((0,yt.U)(Y=>!0===Y?$:{...Ks})):(0,m.of)($)}function Ps(_,w,y){if(""===w.path)return"full"===w.pathMatch&&(_.hasChildren()||y.length>0)?{...Ks}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const N=(w.matcher||Pn)(y,_,w);if(!N)return{...Ks};const $={};an(N.posParams,(Ee,We)=>{$[We]=Ee.path});const Y=N.consumed.length>0?{...$,...N.consumed[N.consumed.length-1].parameters}:$;return{matched:!0,consumedSegments:N.consumed,remainingSegments:y.slice(N.consumed.length),parameters:Y,positionalParamSegments:N.posParams??{}}}function Fo(_,w,y,C){if(y.length>0&&function fa(_,w,y){return y.some(C=>ea(_,w,C)&&Jr(C)!==Gt)}(_,y,C)){const $=new Zt(w,function Xo(_,w,y,C){const N={};N[Gt]=C,C._sourceSegment=_,C._segmentIndexShift=w.length;for(const $ of y)if(""===$.path&&Jr($)!==Gt){const Y=new Zt([],{});Y._sourceSegment=_,Y._segmentIndexShift=w.length,N[Jr($)]=Y}return N}(_,w,C,new Zt(y,_.children)));return $._sourceSegment=_,$._segmentIndexShift=w.length,{segmentGroup:$,slicedSegments:[]}}if(0===y.length&&function Ru(_,w,y){return y.some(C=>ea(_,w,C))}(_,y,C)){const $=new Zt(_.segments,function ha(_,w,y,C,N){const $={};for(const Y of C)if(ea(_,y,Y)&&!N[Jr(Y)]){const Ee=new Zt([],{});Ee._sourceSegment=_,Ee._segmentIndexShift=w.length,$[Jr(Y)]=Ee}return{...N,...$}}(_,w,y,C,_.children));return $._sourceSegment=_,$._segmentIndexShift=w.length,{segmentGroup:$,slicedSegments:y}}const N=new Zt(_.segments,_.children);return N._sourceSegment=_,N._segmentIndexShift=w.length,{segmentGroup:N,slicedSegments:y}}function ea(_,w,y){return(!(_.hasChildren()||w.length>0)||"full"!==y.pathMatch)&&""===y.path}function Ua(_,w,y,C){return!!(Jr(_)===C||C!==Gt&&ea(w,y,_))&&("**"===_.path||Ps(w,_,y).matched)}function pa(_,w,y){return 0===w.length&&!_.children[y]}const Ba=!1;class mo{constructor(w){this.segmentGroup=w||null}}class jr{constructor(w){this.urlTree=w}}function zi(_){return Be(new mo(_))}function hr(_){return Be(new jr(_))}class oi{constructor(w,y,C,N,$){this.injector=w,this.configLoader=y,this.urlSerializer=C,this.urlTree=N,this.config=$,this.allowRedirects=!0}apply(){const w=Fo(this.urlTree.root,[],[],this.config).segmentGroup,y=new Zt(w.segments,w.children);return this.expandSegmentGroup(this.injector,this.config,y,Gt).pipe((0,yt.U)($=>this.createUrlTree(Ur($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(tt($=>{if($ instanceof jr)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof mo?this.noMatchError($):$}))}match(w){return this.expandSegmentGroup(this.injector,this.config,w.root,Gt).pipe((0,yt.U)(N=>this.createUrlTree(Ur(N),w.queryParams,w.fragment))).pipe(tt(N=>{throw N instanceof mo?this.noMatchError(N):N}))}noMatchError(w){return new g.vHH(4002,Ba)}createUrlTree(w,y,C){const N=Gr(w);return new sn(N,y,C)}expandSegmentGroup(w,y,C,N){return 0===C.segments.length&&C.hasChildren()?this.expandChildren(w,y,C).pipe((0,yt.U)($=>new Zt([],$))):this.expandSegment(w,C,y,C.segments,N,!0)}expandChildren(w,y,C){const N=[];for(const $ of Object.keys(C.children))"primary"===$?N.unshift($):N.push($);return(0,H.D)(N).pipe(ut($=>{const Y=C.children[$],Ee=Yo(y,$);return this.expandSegmentGroup(w,Ee,Y,$).pipe((0,yt.U)(We=>({segment:We,outlet:$})))}),(0,qt.R)(($,Y)=>($[Y.outlet]=Y.segment,$),{}),Tt())}expandSegment(w,y,C,N,$,Y){return(0,H.D)(C).pipe(ut(Ee=>this.expandSegmentAgainstRoute(w,y,C,Ee,N,$,Y).pipe(tt(Nt=>{if(Nt instanceof mo)return(0,m.of)(null);throw Nt}))),(0,rt.P)(Ee=>!!Ee),tt((Ee,We)=>{if(wi(Ee))return pa(y,N,$)?(0,m.of)(new Zt([],{})):zi(y);throw Ee}))}expandSegmentAgainstRoute(w,y,C,N,$,Y,Ee){return Ua(N,y,$,Y)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(w,y,N,$,Y):Ee&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,y,C,N,$,Y):zi(y):zi(y)}expandSegmentAgainstRouteUsingRedirect(w,y,C,N,$,Y){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,C,N,Y):this.expandRegularSegmentAgainstRouteUsingRedirect(w,y,C,N,$,Y)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,y,C,N){const $=this.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?hr($):this.lineralizeSegments(C,$).pipe((0,ze.z)(Y=>{const Ee=new Zt(Y,{});return this.expandSegment(w,Ee,y,Y,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,y,C,N,$,Y){const{matched:Ee,consumedSegments:We,remainingSegments:Nt,positionalParamSegments:xt}=Ps(y,N,$);if(!Ee)return zi(y);const Un=this.applyRedirectCommands(We,N.redirectTo,xt);return N.redirectTo.startsWith("/")?hr(Un):this.lineralizeSegments(N,Un).pipe((0,ze.z)($r=>this.expandSegment(w,y,C,$r.concat(Nt),Y,!1)))}matchSegmentAgainstRoute(w,y,C,N,$){return"**"===C.path?(w=Hi(C,w),C.loadChildren?(C._loadedRoutes?(0,m.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):this.configLoader.loadChildren(w,C)).pipe((0,yt.U)(Ee=>(C._loadedRoutes=Ee.routes,C._loadedInjector=Ee.injector,new Zt(N,{})))):(0,m.of)(new Zt(N,{}))):tu(y,C,N,w).pipe((0,_t.w)(({matched:Y,consumedSegments:Ee,remainingSegments:We})=>Y?this.getChildConfig(w=C._injector??w,C,N).pipe((0,ze.z)(xt=>{const Un=xt.injector??w,$r=xt.routes,{segmentGroup:Ri,slicedSegments:Ii}=Fo(y,Ee,We,$r),vs=new Zt(Ri.segments,Ri.children);if(0===Ii.length&&vs.hasChildren())return this.expandChildren(Un,$r,vs).pipe((0,yt.U)(j=>new Zt(Ee,j)));if(0===$r.length&&0===Ii.length)return(0,m.of)(new Zt(Ee,{}));const hi=Jr(C)===$;return this.expandSegment(Un,vs,$r,Ii,hi?Gt:$,!0).pipe((0,yt.U)(k=>new Zt(Ee.concat(k.segments),k.children)))})):zi(y)))}getChildConfig(w,y,C){return y.children?(0,m.of)({routes:y.children,injector:w}):y.loadChildren?void 0!==y._loadedRoutes?(0,m.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function La(_,w,y,C){const N=w.canLoad;if(void 0===N||0===N.length)return(0,m.of)(!0);const $=N.map(Y=>{const Ee=ns(Y,_);return kt(function A(_){return _&&S(_.canLoad)}(Ee)?Ee.canLoad(w,y):_.runInContext(()=>Ee(w,y)))});return(0,m.of)($).pipe(rs(),Jo())}(w,y,C).pipe((0,ze.z)(N=>N?this.configLoader.loadChildren(w,y).pipe((0,vt.b)($=>{y._loadedRoutes=$.routes,y._loadedInjector=$.injector})):function ga(_){return Be(ho(Ba,3))}())):(0,m.of)({routes:[],injector:w})}lineralizeSegments(w,y){let C=[],N=y.root;for(;;){if(C=C.concat(N.segments),0===N.numberOfChildren)return(0,m.of)(C);if(N.numberOfChildren>1||!N.children[Gt])return Be(new g.vHH(4e3,Ba));N=N.children[Gt]}}applyRedirectCommands(w,y,C){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),w,C)}applyRedirectCreateUrlTree(w,y,C,N){const $=this.createSegmentGroup(w,y.root,C,N);return new sn($,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(w,y){const C={};return an(w,(N,$)=>{if("string"==typeof N&&N.startsWith(":")){const Ee=N.substring(1);C[$]=y[Ee]}else C[$]=N}),C}createSegmentGroup(w,y,C,N){const $=this.createSegments(w,y.segments,C,N);let Y={};return an(y.children,(Ee,We)=>{Y[We]=this.createSegmentGroup(w,Ee,C,N)}),new Zt($,Y)}createSegments(w,y,C,N){return y.map($=>$.path.startsWith(":")?this.findPosParam(w,$,N):this.findOrReturn($,C))}findPosParam(w,y,C){const N=C[y.path.substring(1)];if(!N)throw new g.vHH(4001,Ba);return N}findOrReturn(w,y){let C=0;for(const N of y){if(N.path===w.path)return y.splice(C),N;C++}return w}}class ja{}class V{constructor(w,y,C,N,$,Y,Ee){this.injector=w,this.rootComponentType=y,this.config=C,this.urlTree=N,this.url=$,this.paramsInheritanceStrategy=Y,this.urlSerializer=Ee}recognize(){const w=Fo(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,w,Gt).pipe((0,yt.U)(y=>{if(null===y)return null;const C=new kr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Bi(C,y),$=new la(this.url,N);return this.inheritParamsAndData($._root),$}))}inheritParamsAndData(w){const y=w.value,C=Po(y,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),w.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(w,y,C,N){return 0===C.segments.length&&C.hasChildren()?this.processChildren(w,y,C):this.processSegment(w,y,C,C.segments,N)}processChildren(w,y,C){return(0,H.D)(Object.keys(C.children)).pipe(ut(N=>{const $=C.children[N],Y=Yo(y,N);return this.processSegmentGroup(w,Y,$,N)}),(0,qt.R)((N,$)=>N&&$?(N.push(...$),N):null),function bn(_,w=!1){return(0,Ze.e)((y,C)=>{let N=0;y.subscribe((0,pe.x)(C,$=>{const Y=_($,N++);(Y||w)&&C.next($),!Y&&C.complete()}))})}(N=>null!==N),(0,Ht.d)(null),Tt(),(0,yt.U)(N=>{if(null===N)return null;const $=Re(N);return function P(_){_.sort((w,y)=>w.value.outlet===Gt?-1:y.value.outlet===Gt?1:w.value.outlet.localeCompare(y.value.outlet))}($),$}))}processSegment(w,y,C,N,$){return(0,H.D)(y).pipe(ut(Y=>this.processSegmentAgainstRoute(Y._injector??w,Y,C,N,$)),(0,rt.P)(Y=>!!Y),tt(Y=>{if(wi(Y))return pa(C,N,$)?(0,m.of)([]):(0,m.of)(null);throw Y}))}processSegmentAgainstRoute(w,y,C,N,$){if(y.redirectTo||!Ua(y,C,N,$))return(0,m.of)(null);let Y;if("**"===y.path){const Ee=N.length>0?ir(N).parameters:{},We=Sn(C)+N.length,Nt=new kr(N,Ee,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rn(y),Jr(y),y.component??y._loadedComponent??null,y,jt(C),We,_n(y));Y=(0,m.of)({snapshot:Nt,consumedSegments:[],remainingSegments:[]})}else Y=tu(C,y,N,w).pipe((0,yt.U)(({matched:Ee,consumedSegments:We,remainingSegments:Nt,parameters:xt})=>{if(!Ee)return null;const Un=Sn(C)+We.length;return{snapshot:new kr(We,xt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rn(y),Jr(y),y.component??y._loadedComponent??null,y,jt(C),Un,_n(y)),consumedSegments:We,remainingSegments:Nt}}));return Y.pipe((0,_t.w)(Ee=>{if(null===Ee)return(0,m.of)(null);const{snapshot:We,consumedSegments:Nt,remainingSegments:xt}=Ee;w=y._injector??w;const Un=y._loadedInjector??w,$r=function G(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(y),{segmentGroup:Ri,slicedSegments:Ii}=Fo(C,Nt,xt,$r.filter(hi=>void 0===hi.redirectTo));if(0===Ii.length&&Ri.hasChildren())return this.processChildren(Un,$r,Ri).pipe((0,yt.U)(hi=>null===hi?null:[new Bi(We,hi)]));if(0===$r.length&&0===Ii.length)return(0,m.of)([new Bi(We,[])]);const vs=Jr(y)===$;return this.processSegment(Un,$r,Ri,Ii,vs?Gt:$).pipe((0,yt.U)(hi=>null===hi?null:[new Bi(We,hi)]))}))}}function re(_){const w=_.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function Re(_){const w=[],y=new Set;for(const C of _){if(!re(C)){w.push(C);continue}const N=w.find($=>C.value.routeConfig===$.value.routeConfig);void 0!==N?(N.children.push(...C.children),y.add(N)):w.push(C)}for(const C of y){const N=Re(C.children);w.push(new Bi(C.value,N))}return w.filter(C=>!y.has(C))}function jt(_){let w=_;for(;w._sourceSegment;)w=w._sourceSegment;return w}function Sn(_){let w=_,y=w._segmentIndexShift??0;for(;w._sourceSegment;)w=w._sourceSegment,y+=w._segmentIndexShift??0;return y-1}function Rn(_){return _.data||{}}function _n(_){return _.resolve||{}}function ci(_){return"string"==typeof _.title||null===_.title}function Ys(_){return(0,_t.w)(w=>{const y=_(w);return y?(0,H.D)(y).pipe((0,yt.U)(()=>w)):(0,m.of)(w)})}const Lo=new g.OlP("ROUTES");let ma=(()=>{class _{constructor(y,C){this.injector=y,this.compiler=C,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,m.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const C=kt(y.loadComponent()).pipe((0,yt.U)(Pu),(0,vt.b)($=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=$}),Ln(()=>{this.componentLoaders.delete(y)})),N=new $e(C,()=>new dt.x).pipe(le());return this.componentLoaders.set(y,N),N}loadChildren(y,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,m.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const $=this.loadModuleFactoryOrRoutes(C.loadChildren).pipe((0,yt.U)(Ee=>{this.onLoadEndListener&&this.onLoadEndListener(C);let We,Nt,xt=!1;Array.isArray(Ee)?Nt=Ee:(We=Ee.create(y).injector,Nt=Nr(We.get(Lo,[],g.XFs.Self|g.XFs.Optional)));return{routes:Nt.map(si),injector:We}}),Ln(()=>{this.childrenLoaders.delete(C)})),Y=new $e($,()=>new dt.x).pipe(le());return this.childrenLoaders.set(C,Y),Y}loadModuleFactoryOrRoutes(y){return kt(y()).pipe((0,yt.U)(Pu),(0,ze.z)(N=>N instanceof g.YKP||Array.isArray(N)?(0,m.of)(N):(0,H.D)(this.compiler.compileModuleAsync(N))))}}return _.\u0275fac=function(y){return new(y||_)(g.LFG(g.zs3),g.LFG(g.Sil))},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();function Pu(_){return function vo(_){return _&&"object"==typeof _&&"default"in _}(_)?_.default:_}let ya=(()=>{class _{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new dt.x,this.configLoader=(0,g.f3M)(ma),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(Ut),this.rootContexts=(0,g.f3M)(Yr),this.navigationId=0,this.afterPreactivation=()=>(0,m.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new fs(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new Ss(N))}complete(){this.transitions?.complete()}handleNavigationRequest(y){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,...y,id:C})}setupNavigations(y){return this.transitions=new he.X({id:0,targetPageId:0,currentUrlTree:y.currentUrlTree,currentRawUrl:y.currentUrlTree,extractedUrl:y.urlHandlingStrategy.extract(y.currentUrlTree),urlAfterRedirects:y.urlHandlingStrategy.extract(y.currentUrlTree),rawUrl:y.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ai,restoredState:null,currentSnapshot:y.routerState.snapshot,targetSnapshot:null,currentRouterState:y.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Le.h)(C=>0!==C.id),(0,yt.U)(C=>({...C,extractedUrl:y.urlHandlingStrategy.extract(C.rawUrl)})),(0,_t.w)(C=>{let N=!1,$=!1;return(0,m.of)(C).pipe((0,vt.b)(Y=>{this.currentNavigation={id:Y.id,initialUrl:Y.rawUrl,extractedUrl:Y.extractedUrl,trigger:Y.source,extras:Y.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,_t.w)(Y=>{const Ee=y.browserUrlTree.toString(),We=!y.navigated||Y.extractedUrl.toString()!==Ee||Ee!==y.currentUrlTree.toString();if(!We&&"reload"!==(Y.extras.onSameUrlNavigation??y.onSameUrlNavigation)){const xt="";return this.events.next(new qr(Y.id,y.serializeUrl(C.rawUrl),xt,0)),y.rawUrlTree=Y.rawUrl,Y.resolve(null),Ge.E}if(y.urlHandlingStrategy.shouldProcessUrl(Y.rawUrl))return ta(Y.source)&&(y.browserUrlTree=Y.extractedUrl),(0,m.of)(Y).pipe((0,_t.w)(xt=>{const Un=this.transitions?.getValue();return this.events.next(new or(xt.id,this.urlSerializer.serialize(xt.extractedUrl),xt.source,xt.restoredState)),Un!==this.transitions?.getValue()?Ge.E:Promise.resolve(xt)}),function ai(_,w,y,C){return(0,_t.w)(N=>function Tn(_,w,y,C,N){return new oi(_,w,y,C,N).apply()}(_,w,y,N.extractedUrl,C).pipe((0,yt.U)($=>({...N,urlAfterRedirects:$}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,y.config),(0,vt.b)(xt=>{this.currentNavigation={...this.currentNavigation,finalUrl:xt.urlAfterRedirects},C.urlAfterRedirects=xt.urlAfterRedirects}),function Or(_,w,y,C,N){return(0,ze.z)($=>function T(_,w,y,C,N,$,Y="emptyOnly"){return new V(_,w,y,C,N,Y,$).recognize().pipe((0,_t.w)(Ee=>null===Ee?function pu(_){return new ve.y(w=>w.error(_))}(new ja):(0,m.of)(Ee)))}(_,w,y,$.urlAfterRedirects,C.serialize($.urlAfterRedirects),C,N).pipe((0,yt.U)(Y=>({...$,targetSnapshot:Y}))))}(this.environmentInjector,this.rootComponentType,y.config,this.urlSerializer,y.paramsInheritanceStrategy),(0,vt.b)(xt=>{if(C.targetSnapshot=xt.targetSnapshot,"eager"===y.urlUpdateStrategy){if(!xt.extras.skipLocationChange){const $r=y.urlHandlingStrategy.merge(xt.urlAfterRedirects,xt.rawUrl);y.setBrowserUrl($r,xt)}y.browserUrlTree=xt.urlAfterRedirects}const Un=new ua(xt.id,this.urlSerializer.serialize(xt.extractedUrl),this.urlSerializer.serialize(xt.urlAfterRedirects),xt.targetSnapshot);this.events.next(Un)}));if(We&&y.urlHandlingStrategy.shouldProcessUrl(y.rawUrlTree)){const{id:xt,extractedUrl:Un,source:$r,restoredState:Ri,extras:Ii}=Y,vs=new or(xt,this.urlSerializer.serialize(Un),$r,Ri);this.events.next(vs);const hi=ka(Un,this.rootComponentType).snapshot;return C={...Y,targetSnapshot:hi,urlAfterRedirects:Un,extras:{...Ii,skipLocationChange:!1,replaceUrl:!1}},(0,m.of)(C)}{const xt="";return this.events.next(new qr(Y.id,y.serializeUrl(C.extractedUrl),xt,1)),y.rawUrlTree=Y.rawUrl,Y.resolve(null),Ge.E}}),(0,vt.b)(Y=>{const Ee=new Kn(Y.id,this.urlSerializer.serialize(Y.extractedUrl),this.urlSerializer.serialize(Y.urlAfterRedirects),Y.targetSnapshot);this.events.next(Ee)}),(0,yt.U)(Y=>C={...Y,guards:Qo(Y.targetSnapshot,Y.currentSnapshot,this.rootContexts)}),function go(_,w){return(0,ze.z)(y=>{const{targetSnapshot:C,currentSnapshot:N,guards:{canActivateChecks:$,canDeactivateChecks:Y}}=y;return 0===Y.length&&0===$.length?(0,m.of)({...y,guardsResult:!0}):function Fr(_,w,y,C){return(0,H.D)(_).pipe((0,ze.z)(N=>function da(_,w,y,C,N){const $=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,m.of)(!0);const Y=$.map(Ee=>{const We=Xr(w)??N,Nt=ns(Ee,We);return kt(function St(_){return _&&S(_.canDeactivate)}(Nt)?Nt.canDeactivate(_,w,y,C):We.runInContext(()=>Nt(_,w,y,C))).pipe((0,rt.P)())});return(0,m.of)(Y).pipe(rs())}(N.component,N.route,y,w,C)),(0,rt.P)(N=>!0!==N,!0))}(Y,C,N,_).pipe((0,ze.z)(Ee=>Ee&&function R(_){return"boolean"==typeof _}(Ee)?function Gi(_,w,y,C){return(0,H.D)(w).pipe(ut(N=>(0,Ue.z)(function ko(_,w){return null!==_&&w&&w(new Pr(_)),(0,m.of)(!0)}(N.route.parent,C),function is(_,w){return null!==_&&w&&w(new Ra(_)),(0,m.of)(!0)}(N.route,C),function Fa(_,w,y){const C=w[w.length-1],$=w.slice(0,w.length-1).reverse().map(Y=>function po(_){const w=_.routeConfig?_.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:_,guards:w}:null}(Y)).filter(Y=>null!==Y).map(Y=>Qe(()=>{const Ee=Y.guards.map(We=>{const Nt=Xr(Y.node)??y,xt=ns(We,Nt);return kt(function Ce(_){return _&&S(_.canActivateChild)}(xt)?xt.canActivateChild(C,_):Nt.runInContext(()=>xt(C,_))).pipe((0,rt.P)())});return(0,m.of)(Ee).pipe(rs())}));return(0,m.of)($).pipe(rs())}(_,N.path,y),function ss(_,w,y){const C=w.routeConfig?w.routeConfig.canActivate:null;if(!C||0===C.length)return(0,m.of)(!0);const N=C.map($=>Qe(()=>{const Y=Xr(w)??y,Ee=ns($,Y);return kt(function z(_){return _&&S(_.canActivate)}(Ee)?Ee.canActivate(w,_):Y.runInContext(()=>Ee(w,_))).pipe((0,rt.P)())}));return(0,m.of)(N).pipe(rs())}(_,N.route,y))),(0,rt.P)(N=>!0!==N,!0))}(C,$,_,w):(0,m.of)(Ee)),(0,yt.U)(Ee=>({...y,guardsResult:Ee})))})}(this.environmentInjector,Y=>this.events.next(Y)),(0,vt.b)(Y=>{if(C.guardsResult=Y.guardsResult,zr(Y.guardsResult))throw zs(0,Y.guardsResult);const Ee=new hs(Y.id,this.urlSerializer.serialize(Y.extractedUrl),this.urlSerializer.serialize(Y.urlAfterRedirects),Y.targetSnapshot,!!Y.guardsResult);this.events.next(Ee)}),(0,Le.h)(Y=>!!Y.guardsResult||(y.restoreHistory(Y),this.cancelNavigationTransition(Y,"",3),!1)),Ys(Y=>{if(Y.guards.canActivateChecks.length)return(0,m.of)(Y).pipe((0,vt.b)(Ee=>{const We=new ao(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),this.urlSerializer.serialize(Ee.urlAfterRedirects),Ee.targetSnapshot);this.events.next(We)}),(0,_t.w)(Ee=>{let We=!1;return(0,m.of)(Ee).pipe(function fr(_,w){return(0,ze.z)(y=>{const{targetSnapshot:C,guards:{canActivateChecks:N}}=y;if(!N.length)return(0,m.of)(y);let $=0;return(0,H.D)(N).pipe(ut(Y=>function Tr(_,w,y,C){const N=_.routeConfig,$=_._resolve;return void 0!==N?.title&&!ci(N)&&($[Hn]=N.title),function gs(_,w,y,C){const N=function os(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===N.length)return(0,m.of)({});const $={};return(0,H.D)(N).pipe((0,ze.z)(Y=>function ui(_,w,y,C){const N=Xr(w)??C,$=ns(_,N);return kt($.resolve?$.resolve(w,y):N.runInContext(()=>$(w,y)))}(_[Y],w,y,C).pipe((0,rt.P)(),(0,vt.b)(Ee=>{$[Y]=Ee}))),_e(1),function xn(_){return(0,yt.U)(()=>_)}($),tt(Y=>wi(Y)?Ge.E:Be(Y)))}($,_,w,C).pipe((0,yt.U)(Y=>(_._resolvedData=Y,_.data=Po(_,y).resolve,N&&ci(N)&&(_.data[Hn]=N.title),null)))}(Y.route,C,_,w)),(0,vt.b)(()=>$++),_e(1),(0,ze.z)(Y=>$===N.length?(0,m.of)(y):Ge.E))})}(y.paramsInheritanceStrategy,this.environmentInjector),(0,vt.b)({next:()=>We=!0,complete:()=>{We||(y.restoreHistory(Ee),this.cancelNavigationTransition(Ee,"",2))}}))}),(0,vt.b)(Ee=>{const We=new Us(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),this.urlSerializer.serialize(Ee.urlAfterRedirects),Ee.targetSnapshot);this.events.next(We)}))}),Ys(Y=>{const Ee=We=>{const Nt=[];We.routeConfig?.loadComponent&&!We.routeConfig._loadedComponent&&Nt.push(this.configLoader.loadComponent(We.routeConfig).pipe((0,vt.b)(xt=>{We.component=xt}),(0,yt.U)(()=>{})));for(const xt of We.children)Nt.push(...Ee(xt));return Nt};return He(Ee(Y.targetSnapshot.root)).pipe((0,Ht.d)(),(0,Ae.q)(1))}),Ys(()=>this.afterPreactivation()),(0,yt.U)(Y=>{const Ee=function xi(_,w,y){const C=Xi(_,w._root,y?y._root:void 0);return new As(C,w)}(y.routeReuseStrategy,Y.targetSnapshot,Y.currentRouterState);return C={...Y,targetRouterState:Ee}}),(0,vt.b)(Y=>{y.currentUrlTree=Y.urlAfterRedirects,y.rawUrlTree=y.urlHandlingStrategy.merge(Y.urlAfterRedirects,Y.rawUrl),y.routerState=Y.targetRouterState,"deferred"===y.urlUpdateStrategy&&(Y.extras.skipLocationChange||y.setBrowserUrl(y.rawUrlTree,Y),y.browserUrlTree=Y.urlAfterRedirects)}),((_,w,y)=>(0,yt.U)(C=>(new ar(w,C.targetRouterState,C.currentRouterState,y).activate(_),C)))(this.rootContexts,y.routeReuseStrategy,Y=>this.events.next(Y)),(0,vt.b)({next:Y=>{N=!0,this.lastSuccessfulNavigation=this.currentNavigation,y.navigated=!0,this.events.next(new Ts(Y.id,this.urlSerializer.serialize(Y.extractedUrl),this.urlSerializer.serialize(y.currentUrlTree))),y.titleStrategy?.updateTitle(Y.targetRouterState.snapshot),Y.resolve(!0)},complete:()=>{N=!0}}),Ln(()=>{N||$||this.cancelNavigationTransition(C,"",1),this.currentNavigation?.id===C.id&&(this.currentNavigation=null)}),tt(Y=>{if($=!0,fo(Y)){Ms(Y)||(y.navigated=!0,y.restoreHistory(C,!0));const Ee=new Ui(C.id,this.urlSerializer.serialize(C.extractedUrl),Y.message,Y.cancellationCode);if(this.events.next(Ee),Ms(Y)){const We=y.urlHandlingStrategy.merge(Y.url,y.rawUrlTree),Nt={skipLocationChange:C.extras.skipLocationChange,replaceUrl:"eager"===y.urlUpdateStrategy||ta(C.source)};y.scheduleNavigation(We,Ai,null,Nt,{resolve:C.resolve,reject:C.reject,promise:C.promise})}else C.resolve(!1)}else{y.restoreHistory(C,!0);const Ee=new Mo(C.id,this.urlSerializer.serialize(C.extractedUrl),Y,C.targetSnapshot??void 0);this.events.next(Ee);try{C.resolve(y.errorHandler(Y))}catch(We){C.reject(We)}}return Ge.E}))}))}cancelNavigationTransition(y,C,N){const $=new Ui(y.id,this.urlSerializer.serialize(y.extractedUrl),C,N);this.events.next($),y.resolve(!1)}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();function ta(_){return _!==Ai}let as=(()=>{class _{buildTitle(y){let C,N=y.root;for(;void 0!==N;)C=this.getResolvedTitleForRoute(N)??C,N=N.children.find($=>$.outlet===Gt);return C}getResolvedTitleForRoute(y){return y.data[Hn]}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(){return(0,g.f3M)(Wi)},providedIn:"root"}),_})(),Wi=(()=>{class _ extends as{constructor(y){super(),this.title=y}updateTitle(y){const C=this.buildTitle(y);void 0!==C&&this.title.setTitle(C)}}return _.\u0275fac=function(y){return new(y||_)(g.LFG(vn.Dx))},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),Xs=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(){return(0,g.f3M)(yr)},providedIn:"root"}),_})();class va{shouldDetach(w){return!1}store(w,y){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,y){return w.routeConfig===y.routeConfig}}let yr=(()=>{class _ extends va{}return _.\u0275fac=function(){let w;return function(C){return(w||(w=g.n5z(_)))(C||_)}}(),_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const eo=new g.OlP("",{providedIn:"root",factory:()=>({})});let Ou=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:function(){return(0,g.f3M)(ru)},providedIn:"root"}),_})(),ru=(()=>{class _{shouldProcessUrl(y){return!0}extract(y){return y}merge(y,C){return y}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();function gu(_){throw _}function _a(_,w,y){return w.parse("/")}const Nu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},li={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vr=(()=>{class _{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this.options=(0,g.f3M)(eo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||gu,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||_a,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)(Ou),this.routeReuseStrategy=(0,g.f3M)(Xs),this.urlCreationStrategy=(0,g.f3M)(Oa),this.titleStrategy=(0,g.f3M)(as),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Nr((0,g.f3M)(Lo,{optional:!0})??[]),this.navigationTransitions=(0,g.f3M)(ya),this.urlSerializer=(0,g.f3M)(Ut),this.location=(0,g.f3M)(ht.Ye),this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new sn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ka(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(y=>{this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}resetRootComponentType(y){this.routerState.root.component=y,this.navigationTransitions.rootComponentType=y}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const y=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ai,y)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const C="popstate"===y.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(y.url,C,y.state)},0)}))}navigateToSyncWithBrowser(y,C,N){const $={replaceUrl:!0},Y=N?.navigationId?N:null;if(N){const We={...N};delete We.navigationId,delete We.\u0275routerPageId,0!==Object.keys(We).length&&($.state=We)}const Ee=this.parseUrl(y);this.scheduleNavigation(Ee,C,Y,$)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(y){this.config=y.map(si),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,C={}){const{relativeTo:N,queryParams:$,fragment:Y,queryParamsHandling:Ee,preserveFragment:We}=C,Nt=We?this.currentUrlTree.fragment:Y;let xt=null;switch(Ee){case"merge":xt={...this.currentUrlTree.queryParams,...$};break;case"preserve":xt=this.currentUrlTree.queryParams;break;default:xt=$||null}return null!==xt&&(xt=this.removeEmptyProps(xt)),this.urlCreationStrategy.createUrlTree(N,this.routerState,this.currentUrlTree,y,xt,Nt??null)}navigateByUrl(y,C={skipLocationChange:!1}){const N=zr(y)?y:this.parseUrl(y),$=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation($,Ai,null,C)}navigate(y,C={skipLocationChange:!1}){return function Ea(_){for(let w=0;w<_.length;w++){if(null==_[w])throw new g.vHH(4008,!1)}}(y),this.navigateByUrl(this.createUrlTree(y,C),C)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let C;try{C=this.urlSerializer.parse(y)}catch(N){C=this.malformedUriErrorHandler(N,this.urlSerializer,y)}return C}isActive(y,C){let N;if(N=!0===C?{...Nu}:!1===C?{...li}:C,zr(y))return wn(this.currentUrlTree,y,N);const $=this.parseUrl(y);return wn(this.currentUrlTree,$,N)}removeEmptyProps(y){return Object.keys(y).reduce((C,N)=>{const $=y[N];return null!=$&&(C[N]=$),C},{})}scheduleNavigation(y,C,N,$,Y){if(this.disposed)return Promise.resolve(!1);let Ee,We,Nt,xt;return Y?(Ee=Y.resolve,We=Y.reject,Nt=Y.promise):Nt=new Promise((Un,$r)=>{Ee=Un,We=$r}),xt="computed"===this.canceledNavigationResolution?N&&N.\u0275routerPageId?N.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:xt,source:C,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:y,extras:$,resolve:Ee,reject:We,promise:Nt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Nt.catch(Un=>Promise.reject(Un))}setBrowserUrl(y,C){const N=this.urlSerializer.serialize(y),$={...C.extras.state,...this.generateNgRouterState(C.id,C.targetPageId)};this.location.isCurrentPathEqualTo(N)||C.extras.replaceUrl?this.location.replaceState(N,"",$):this.location.go(N,"",$)}restoreHistory(y,C=!1){if("computed"===this.canceledNavigationResolution){const N=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===N?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===N&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(N)}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(y,C){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:C}:{navigationId:y}}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),to=(()=>{class _{constructor(y,C,N,$,Y,Ee){this.router=y,this.route=C,this.tabIndexAttribute=N,this.renderer=$,this.el=Y,this.locationStrategy=Ee,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new dt.x;const We=Y.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===We||"area"===We,this.isAnchorElement?this.subscription=y.events.subscribe(Nt=>{Nt instanceof Ts&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,g.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,g.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,g.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",y)}ngOnChanges(y){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(y,C,N,$,Y){return!!(null===this.urlTree||this.isAnchorElement&&(0!==y||C||N||$||Y||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const y=null===this.href?null:(0,g.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",y)}applyAttributeValue(y,C){const N=this.renderer,$=this.el.nativeElement;null!==C?N.setAttribute($,y,C):N.removeAttribute($,y)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(g.Y36(vr),g.Y36(Bs),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ht.S$))},_.\u0275dir=g.lG2({type:_,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(y,C){1&y&&g.NdJ("click",function($){return C.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&y&&g.uIk("target",C.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),_})(),Ha=(()=>{class _{get isActive(){return this._isActive}constructor(y,C,N,$,Y){this.router=y,this.element=C,this.renderer=N,this.cdr=$,this.link=Y,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new g.vpe,this.routerEventsSubscription=y.events.subscribe(Ee=>{Ee instanceof Ts&&this.update()})}ngAfterContentInit(){(0,m.of)(this.links.changes,(0,m.of)(null)).pipe((0,Zn.J)()).subscribe(y=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const y=[...this.links.toArray(),this.link].filter(C=>!!C).map(C=>C.onChanges);this.linkInputChangesSubscription=(0,H.D)(y).pipe((0,Zn.J)()).subscribe(C=>{this._isActive!==this.isLinkActive(this.router)(C)&&this.update()})}set routerLinkActive(y){const C=Array.isArray(y)?y:y.split(" ");this.classes=C.filter(N=>!!N)}ngOnChanges(y){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const y=this.hasActiveLinks();this._isActive!==y&&(this._isActive=y,this.cdr.markForCheck(),this.classes.forEach(C=>{y?this.renderer.addClass(this.element.nativeElement,C):this.renderer.removeClass(this.element.nativeElement,C)}),y&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(y))})}isLinkActive(y){const C=function Os(_){return!!_.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return N=>!!N.urlTree&&y.isActive(N.urlTree,C)}hasActiveLinks(){const y=this.isLinkActive(this.router);return this.link&&y(this.link)||this.links.some(y)}}return _.\u0275fac=function(y){return new(y||_)(g.Y36(vr),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(to,8))},_.\u0275dir=g.lG2({type:_,selectors:[["","routerLinkActive",""]],contentQueries:function(y,C,N){if(1&y&&g.Suo(N,to,5),2&y){let $;g.iGM($=g.CRH())&&(C.links=$)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[g.TTD]}),_})();class ms{}let mu=(()=>{class _{constructor(y,C,N,$,Y){this.router=y,this.injector=N,this.preloadingStrategy=$,this.loader=Y}setUpPreloading(){this.subscription=this.router.events.pipe((0,Le.h)(y=>y instanceof Ts),ut(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,C){const N=[];for(const $ of C){$.providers&&!$._injector&&($._injector=(0,g.MMx)($.providers,y,`Route: ${$.path}`));const Y=$._injector??y,Ee=$._loadedInjector??Y;$.loadChildren&&!$._loadedRoutes&&void 0===$.canLoad||$.loadComponent&&!$._loadedComponent?N.push(this.preloadConfig(Y,$)):($.children||$._loadedRoutes)&&N.push(this.processRoutes(Ee,$.children??$._loadedRoutes))}return(0,H.D)(N).pipe((0,Zn.J)())}preloadConfig(y,C){return this.preloadingStrategy.preload(C,()=>{let N;N=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(y,C):(0,m.of)(null);const $=N.pipe((0,ze.z)(Y=>null===Y?(0,m.of)(void 0):(C._loadedRoutes=Y.routes,C._loadedInjector=Y.injector,this.processRoutes(Y.injector??y,Y.routes))));if(C.loadComponent&&!C._loadedComponent){const Y=this.loader.loadComponent(C);return(0,H.D)([$,Y]).pipe((0,Zn.J)())}return $})}}return _.\u0275fac=function(y){return new(y||_)(g.LFG(vr),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(ms),g.LFG(ma))},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const iu=new g.OlP("");let wa=(()=>{class _{constructor(y,C,N,$,Y={}){this.urlSerializer=y,this.transitions=C,this.viewportScroller=N,this.zone=$,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof or?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Ts&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.urlSerializer.parse(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof Kr&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Kr(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return _.\u0275fac=function(y){g.$Z()},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac}),_})();function ys(_,w){return{\u0275kind:_,\u0275providers:w}}function Wn(){const _=(0,g.f3M)(g.zs3);return w=>{const y=_.get(g.z2F);if(w!==y.components[0])return;const C=_.get(vr),N=_.get(ed);1===_.get(Bo)&&C.initialNavigation(),_.get(uc,null,g.XFs.Optional)?.setUpPreloading(),_.get(iu,null,g.XFs.Optional)?.init(),C.resetRootComponentType(y.componentTypes[0]),N.closed||(N.next(),N.unsubscribe())}}const ed=new g.OlP("",{factory:()=>new dt.x}),Bo=new g.OlP("",{providedIn:"root",factory:()=>1});const uc=new g.OlP("");function Mr(_){return ys(0,[{provide:uc,useExisting:mu},{provide:ms,useExisting:_}])}const au=new g.OlP("ROUTER_FORROOT_GUARD"),uu=[ht.Ye,{provide:Ut,useClass:on},vr,Yr,{provide:Bs,useFactory:function us(_){return _.routerState.root},deps:[vr]},ma,[]];function Lu(){return new g.PXZ("Router",vr)}let ks=(()=>{class _{constructor(y){}static forRoot(y,C){return{ngModule:_,providers:[uu,[],{provide:Lo,multi:!0,useValue:y},{provide:au,useFactory:ia,deps:[[vr,new g.FiY,new g.tp0]]},{provide:eo,useValue:C||{}},C?.useHash?{provide:ht.S$,useClass:ht.Do}:{provide:ht.S$,useClass:ht.b0},{provide:iu,useFactory:()=>{const _=(0,g.f3M)(ht.EM),w=(0,g.f3M)(g.R0b),y=(0,g.f3M)(eo),C=(0,g.f3M)(ya),N=(0,g.f3M)(Ut);return y.scrollOffset&&_.setOffset(y.scrollOffset),new wa(N,C,_,w,y)}},C?.preloadingStrategy?Mr(C.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Lu},C?.initialNavigation?Wa(C):[],[{provide:ba,useFactory:Wn},{provide:g.tb,multi:!0,useExisting:ba}]]}}static forChild(y){return{ngModule:_,providers:[{provide:Lo,multi:!0,useValue:y}]}}}return _.\u0275fac=function(y){return new(y||_)(g.LFG(au,8))},_.\u0275mod=g.oAB({type:_}),_.\u0275inj=g.cJS({imports:[dr]}),_})();function ia(_){return"guarded"}function Wa(_){return["disabled"===_.initialNavigation?ys(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const w=(0,g.f3M)(vr);return()=>{w.setUpLocationChangeListener()}}},{provide:Bo,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?ys(2,[{provide:Bo,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:w=>{const y=w.get(ht.V_,Promise.resolve());return()=>y.then(()=>new Promise(N=>{const $=w.get(vr),Y=w.get(ed);(function C(N){w.get(vr).events.pipe((0,Le.h)(Y=>Y instanceof Ts||Y instanceof Ui||Y instanceof Mo),(0,yt.U)(Y=>Y instanceof Ts||Y instanceof Ui&&(0===Y.code||1===Y.code)&&null),(0,Le.h)(Y=>null!==Y),(0,Ae.q)(1)).subscribe(()=>{N()})})(()=>{N(!0)}),w.get(ya).afterPreactivation=()=>(N(!0),Y.closed?(0,m.of)(void 0):Y),$.initialNavigation()}))}}]).\u0275providers:[]]}const ba=new g.OlP("")},3942:(bt,Me,B)=>{B.d(Me,{Z:()=>it});var g=B(2090),H=B(4859),m=B(9681),he=B(1877);class fe{constructor(Ue,qe){this._delegate=Ue,this.firebase=qe,(0,m._addComponent)(Ue,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,m.deleteApp)(this._delegate)))}_getService(Ue,qe=m._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(Ue);return!ct.isInitialized()&&"EXPLICIT"===(null===(Qe=ct.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:qe})}_removeServiceInstance(Ue,qe=m._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(qe)}_addComponent(Ue){(0,m._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,m._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function Te(){const Ct=function Ie(Ct){const Ue={},qe={__esModule:!0,initializeApp:function Fe(Ze,le={}){const $e=m.initializeApp(Ze,le);if((0,g.r3)(Ue,$e.name))return Ue[$e.name];const dt=new Ct($e,qe);return Ue[$e.name]=dt,dt},app:ct,registerVersion:m.registerVersion,setLogLevel:m.setLogLevel,onLog:m.onLog,apps:null,SDK_VERSION:m.SDK_VERSION,INTERNAL:{registerComponent:function Ge(Ze){const le=Ze.name,$e=le.replace("-compat","");if(m._registerComponent(Ze)&&"PUBLIC"===Ze.type){const dt=(ht=ct())=>{if("function"!=typeof ht[$e])throw be.create("invalid-app-argument",{appName:le});return ht[$e]()};void 0!==Ze.serviceProps&&(0,g.ZB)(dt,Ze.serviceProps),qe[$e]=dt,Ct.prototype[$e]=function(...ht){return this._getService.bind(this,le).apply(this,Ze.multipleInstances?ht:[])}}return"PUBLIC"===Ze.type?qe[$e]:null},removeApp:function Qe(Ze){delete Ue[Ze]},useAsService:function lt(Ze,le){return"serverAuth"===le?null:le},modularAPIs:m}};function ct(Ze){if(!(0,g.r3)(Ue,Ze=Ze||m._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:Ze});return Ue[Ze]}return qe.default=qe,Object.defineProperty(qe,"apps",{get:function Be(){return Object.keys(Ue).map(Ze=>Ue[Ze])}}),ct.App=Ct,qe}(fe);return Ct.INTERNAL=Object.assign(Object.assign({},Ct.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function Ue(qe){(0,g.ZB)(Ct,qe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ct}(),ie=new he.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ct=self.firebase.SDK_VERSION;Ct&&Ct.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const it=ae;!function He(Ct){(0,m.registerVersion)("@firebase/app-compat","0.2.8",Ct)}()},9681:(bt,Me,B)=>{B.r(Me),B.d(Me,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>vn,_DEFAULT_ENTRY_NAME:()=>rt,_addComponent:()=>qt,_addOrOverwriteComponent:()=>_e,_apps:()=>vt,_clearComponents:()=>bn,_components:()=>tt,_getProvider:()=>Ht,_registerComponent:()=>nn,_removeServiceInstance:()=>Tt,deleteApp:()=>Ar,getApp:()=>Hn,getApps:()=>pr,initializeApp:()=>Gt,onLog:()=>gt,registerVersion:()=>gr,setLogLevel:()=>rr});var g=B(5861),H=B(4859),m=B(1877),he=B(2090),fe=B(8766);class ve{constructor(je){this.container=je}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function be(st){return"VERSION"===st.getComponent()?.type}(Pt)){const Ut=Pt.getImmediate();return`${Ut.library}/${Ut.version}`}return null}).filter(Pt=>Pt).join(" ")}}const Ie="@firebase/app",ae=new m.Yd("@firebase/app"),rt="[DEFAULT]",ut={[Ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,tt=new Map;function qt(st,je){try{st.container.addComponent(je)}catch(Pt){ae.debug(`Component ${je.name} failed to register with FirebaseApp ${st.name}`,Pt)}}function _e(st,je){st.container.addOrOverwriteComponent(je)}function nn(st){const je=st.name;if(tt.has(je))return ae.debug(`There were multiple attempts to register component ${je}.`),!1;tt.set(je,st);for(const Pt of vt.values())qt(Pt,st);return!0}function Ht(st,je){const Pt=st.container.getProvider("heartbeat").getImmediate({optional:!0});return Pt&&Pt.triggerHeartbeat(),st.container.getProvider(je)}function Tt(st,je,Pt=rt){Ht(st,je).clearInstance(Pt)}function bn(){tt.clear()}const Ln=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zn{constructor(je,Pt,Ut){this._isDeleted=!1,this._options=Object.assign({},je),this._config=Object.assign({},Pt),this._name=Pt.name,this._automaticDataCollectionEnabled=Pt.automaticDataCollectionEnabled,this._container=Ut,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(je){this.checkDestroyed(),this._automaticDataCollectionEnabled=je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(je){this._isDeleted=je}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const vn="9.20.0";function Gt(st,je={}){let Pt=st;"object"!=typeof je&&(je={name:je});const Ut=Object.assign({name:rt,automaticDataCollectionEnabled:!1},je),on=Ut.name;if("string"!=typeof on||!on)throw Ln.create("bad-app-name",{appName:String(on)});if(Pt||(Pt=(0,he.aH)()),!Pt)throw Ln.create("no-options");const cn=vt.get(on);if(cn){if((0,he.vZ)(Pt,cn.options)&&(0,he.vZ)(Ut,cn.config))return cn;throw Ln.create("duplicate-app",{appName:on})}const On=new H.H0(on);for(const oe of tt.values())On.addComponent(oe);const ce=new Zn(Pt,Ut,On);return vt.set(on,ce),ce}function Hn(st=rt){const je=vt.get(st);if(!je&&st===rt)return Gt();if(!je)throw Ln.create("no-app",{appName:st});return je}function pr(){return Array.from(vt.values())}function Ar(st){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(st){const je=st.name;vt.has(je)&&(vt.delete(je),yield Promise.all(st.container.getProviders().map(Pt=>Pt.delete())),st.isDeleted=!0)})).apply(this,arguments)}function gr(st,je,Pt){var Ut;let on=null!==(Ut=ut[st])&&void 0!==Ut?Ut:st;Pt&&(on+=`-${Pt}`);const cn=on.match(/\s|\//),On=je.match(/\s|\//);if(cn||On){const ce=[`Unable to register library "${on}" with version "${je}":`];return cn&&ce.push(`library name "${on}" contains illegal characters (whitespace or "/")`),cn&&On&&ce.push("and"),On&&ce.push(`version name "${je}" contains illegal characters (whitespace or "/")`),void ae.warn(ce.join(" "))}nn(new H.wA(`${on}-version`,()=>({library:on,version:je}),"VERSION"))}function gt(st,je){if(null!==st&&"function"!=typeof st)throw Ln.create("invalid-log-argument");(0,m.Am)(st,je)}function rr(st){(0,m.Ub)(st)}const sr="firebase-heartbeat-store";let an=null;function kt(){return an||(an=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:(st,je)=>{0===je&&st.createObjectStore(sr)}}).catch(st=>{throw Ln.create("idb-open",{originalErrorMessage:st.message})})),an}function Yt(){return(Yt=(0,g.Z)(function*(st){try{return(yield kt()).transaction(sr).objectStore(sr).get(Gn(st))}catch(je){if(je instanceof he.ZR)ae.warn(je.message);else{const Pt=Ln.create("idb-get",{originalErrorMessage:je?.message});ae.warn(Pt.message)}}})).apply(this,arguments)}function ur(st,je){return wn.apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(st,je){try{const Ut=(yield kt()).transaction(sr,"readwrite");return yield Ut.objectStore(sr).put(je,Gn(st)),Ut.done}catch(Pt){if(Pt instanceof he.ZR)ae.warn(Pt.message);else{const Ut=Ln.create("idb-set",{originalErrorMessage:Pt?.message});ae.warn(Ut.message)}}})).apply(this,arguments)}function Gn(st){return`${st.name}!${st.options.appId}`}class Ti{constructor(je){this.container=je,this._heartbeatsCache=null;const Pt=this.container.getProvider("app").getImmediate();this._storage=new sn(Pt),this._heartbeatsCachePromise=this._storage.read().then(Ut=>(this._heartbeatsCache=Ut,Ut))}triggerHeartbeat(){var je=this;return(0,g.Z)(function*(){const Ut=je.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),on=fn();if(null===je._heartbeatsCache&&(je._heartbeatsCache=yield je._heartbeatsCachePromise),je._heartbeatsCache.lastSentHeartbeatDate!==on&&!je._heartbeatsCache.heartbeats.some(cn=>cn.date===on))return je._heartbeatsCache.heartbeats.push({date:on,agent:Ut}),je._heartbeatsCache.heartbeats=je._heartbeatsCache.heartbeats.filter(cn=>{const On=new Date(cn.date).valueOf();return Date.now()-On<=2592e6}),je._storage.overwrite(je._heartbeatsCache)})()}getHeartbeatsHeader(){var je=this;return(0,g.Z)(function*(){if(null===je._heartbeatsCache&&(yield je._heartbeatsCachePromise),null===je._heartbeatsCache||0===je._heartbeatsCache.heartbeats.length)return"";const Pt=fn(),{heartbeatsToSend:Ut,unsentEntries:on}=function ri(st,je=1024){const Pt=[];let Ut=st.slice();for(const on of st){const cn=Pt.find(On=>On.agent===on.agent);if(cn){if(cn.dates.push(on.date),Zt(Pt)>je){cn.dates.pop();break}}else if(Pt.push({agent:on.agent,dates:[on.date]}),Zt(Pt)>je){Pt.pop();break}Ut=Ut.slice(1)}return{heartbeatsToSend:Pt,unsentEntries:Ut}}(je._heartbeatsCache.heartbeats),cn=(0,he.L)(JSON.stringify({version:2,heartbeats:Ut}));return je._heartbeatsCache.lastSentHeartbeatDate=Pt,on.length>0?(je._heartbeatsCache.heartbeats=on,yield je._storage.overwrite(je._heartbeatsCache)):(je._heartbeatsCache.heartbeats=[],je._storage.overwrite(je._heartbeatsCache)),cn})()}}function fn(){return(new Date).toISOString().substring(0,10)}class sn{constructor(je){this.app=je,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var je=this;return(0,g.Z)(function*(){return(yield je._canUseIndexedDBPromise)&&(yield function Lt(st){return Yt.apply(this,arguments)}(je.app))||{heartbeats:[]}})()}overwrite(je){var Pt=this;return(0,g.Z)(function*(){var Ut;if(yield Pt._canUseIndexedDBPromise){const cn=yield Pt.read();return ur(Pt.app,{lastSentHeartbeatDate:null!==(Ut=je.lastSentHeartbeatDate)&&void 0!==Ut?Ut:cn.lastSentHeartbeatDate,heartbeats:je.heartbeats})}})()}add(je){var Pt=this;return(0,g.Z)(function*(){var Ut;if(yield Pt._canUseIndexedDBPromise){const cn=yield Pt.read();return ur(Pt.app,{lastSentHeartbeatDate:null!==(Ut=je.lastSentHeartbeatDate)&&void 0!==Ut?Ut:cn.lastSentHeartbeatDate,heartbeats:[...cn.heartbeats,...je.heartbeats]})}})()}}function Zt(st){return(0,he.L)(JSON.stringify({version:2,heartbeats:st})).length}!function Mn(st){nn(new H.wA("platform-logger",je=>new ve(je),"PRIVATE")),nn(new H.wA("heartbeat",je=>new Ti(je),"PRIVATE")),gr(Ie,"0.9.8",st),gr(Ie,"0.9.8","esm2017"),gr("fire-js","")}("")},4859:(bt,Me,B)=>{B.d(Me,{H0:()=>Ie,wA:()=>m});var g=B(5861),H=B(2090);class m{constructor(ae,ie,pe){this.name=ae,this.instanceFactory=ie,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const he="[DEFAULT]";class fe{constructor(ae,ie){this.name=ae,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const ie=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(ie)){const pe=new H.BH;if(this.instancesDeferred.set(ie,pe),this.isInitialized(ie)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:ie});nt&&pe.resolve(nt)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(ae){var ie;const pe=this.normalizeInstanceIdentifier(ae?.identifier),nt=null!==(ie=ae?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(He){if(nt)return null;throw He}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function be(Te){return"EAGER"===Te.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[ie,pe]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(ie);try{const He=this.getOrInitializeService({instanceIdentifier:nt});pe.resolve(He)}catch{}}}}clearInstance(ae=he){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,g.Z)(function*(){const ie=Array.from(ae.instances.values());yield Promise.all([...ie.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...ie.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=he){return this.instances.has(ae)}getOptions(ae=he){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:ie={}}=ae,pe=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:pe,options:ie});for(const[He,it]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(He)&&it.resolve(nt);return nt}onInit(ae,ie){var pe;const nt=this.normalizeInstanceIdentifier(ie),He=null!==(pe=this.onInitCallbacks.get(nt))&&void 0!==pe?pe:new Set;He.add(ae),this.onInitCallbacks.set(nt,He);const it=this.instances.get(nt);return it&&ae(it,nt),()=>{He.delete(ae)}}invokeOnInitCallbacks(ae,ie){const pe=this.onInitCallbacks.get(ie);if(pe)for(const nt of pe)try{nt(ae,ie)}catch{}}getOrInitializeService({instanceIdentifier:ae,options:ie={}}){let pe=this.instances.get(ae);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=ae,Te===he?void 0:Te),options:ie}),this.instances.set(ae,pe),this.instancesOptions.set(ae,ie),this.invokeOnInitCallbacks(pe,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,pe)}catch{}var Te;return pe||null}normalizeInstanceIdentifier(ae=he){return this.component?this.component.multipleInstances?ae:he:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ie{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const ie=this.getProvider(ae.name);if(ie.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);ie.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const ie=new fe(ae,this);return this.providers.set(ae,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Me,B)=>{B.d(Me,{Am:()=>Te,Ub:()=>Ie,Yd:()=>be,in:()=>H});const g=[];var H=(()=>{return(ae=H||(H={}))[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",H;var ae})();const m={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},he=H.INFO,fe={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},ve=(ae,ie,...pe)=>{if(ie<ae.logLevel)return;const nt=(new Date).toISOString(),He=fe[ie];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[He](`[${nt}]  ${ae.name}:`,...pe)};class be{constructor(ie){this.name=ie,this._logLevel=he,this._logHandler=ve,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in H))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?m[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...ie),this._logHandler(this,H.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...ie),this._logHandler(this,H.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,H.INFO,...ie),this._logHandler(this,H.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,H.WARN,...ie),this._logHandler(this,H.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...ie),this._logHandler(this,H.ERROR,...ie)}}function Ie(ae){g.forEach(ie=>{ie.setLogLevel(ae)})}function Te(ae,ie){for(const pe of g){let nt=null;ie&&ie.level&&(nt=m[ie.level]),pe.userLogHandler=null===ae?null:(He,it,...Ct)=>{const Ue=Ct.map(qe=>{if(null==qe)return null;if("string"==typeof qe)return qe;if("number"==typeof qe||"boolean"==typeof qe)return qe.toString();if(qe instanceof Error)return qe.message;try{return JSON.stringify(qe)}catch{return null}}).filter(qe=>qe).join(" ");it>=(nt??He.logLevel)&&ae({level:H[it].toLowerCase(),message:Ue,args:Ct,type:He.name})}}}},259:(bt,Me,B)=>{B.d(Me,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=B(9681);(0,g.registerVersion)("firebase","9.20.0","app")},9260:(bt,Me,B)=>{B.d(Me,{Z:()=>g.Z});var g=B(3942);g.Z.registerVersion("firebase","9.20.0","app-compat")},9568:(bt,Me,B)=>{B.r(Me);var g=B(5861),H=B(3942),m=B(8277),he=B(2090),be=(B(9681),B(1877),B(4859));function Ie(){return window}function ie(){return(ie=(0,g.Z)(function*(Q,J,Z){var we;const{BuildInfo:Ve}=Ie();(0,m.as)(J.sessionId,"AuthEvent did not contain a session ID");const It=yield qe(J.sessionId),de={};return(0,m.at)()?de.ibi=Ve.packageName:(0,m.au)()?de.apn=Ve.packageName:(0,m.av)(Q,"operation-not-supported-in-this-environment"),Ve.displayName&&(de.appDisplayName=Ve.displayName),de.sessionId=It,(0,m.aw)(Q,Z,J.type,void 0,null!==(we=J.eventId)&&void 0!==we?we:void 0,de)})).apply(this,arguments)}function nt(){return(nt=(0,g.Z)(function*(Q){const{BuildInfo:J}=Ie(),Z={};(0,m.at)()?Z.iosBundleId=J.packageName:(0,m.au)()?Z.androidPackageName=J.packageName:(0,m.av)(Q,"operation-not-supported-in-this-environment"),yield(0,m.ax)(Q,Z)})).apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(Q,J,Z){const{cordova:we}=Ie();let Ve=()=>{};try{yield new Promise((It,de)=>{let se=null;function X(){var ot;It();const en=null===(ot=we.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof en&&en(),"function"==typeof Z?.close&&Z.close()}function ye(){se||(se=window.setTimeout(()=>{de((0,m.az)(Q,"redirect-cancelled-by-user"))},2e3))}function Ye(){"visible"===document?.visibilityState&&ye()}J.addPassiveListener(X),document.addEventListener("resume",ye,!1),(0,m.au)()&&document.addEventListener("visibilitychange",Ye,!1),Ve=()=>{J.removePassiveListener(X),document.removeEventListener("resume",ye,!1),document.removeEventListener("visibilitychange",Ye,!1),se&&window.clearTimeout(se)}})}finally{Ve()}})).apply(this,arguments)}function qe(Q){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(function*(Q){const J=ct(Q),Z=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(Z)).map(Ve=>Ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ct(Q){if((0,m.as)(/[0-9a-zA-Z]+/.test(Q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Q);const J=new ArrayBuffer(Q.length),Z=new Uint8Array(J);for(let we=0;we<Q.length;we++)Z[we]=Q.charCodeAt(we);return Z}class Be extends m.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(J)),super.onEvent(J)}initialized(){var J=this;return(0,g.Z)(function*(){yield J.initPromise})()}}function Ze(Q){return le.apply(this,arguments)}function le(){return(le=(0,g.Z)(function*(Q){const J=yield ht()._get(yt(Q));return J&&(yield ht()._remove(yt(Q))),J})).apply(this,arguments)}function dt(){const Q=[],J="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const we=Math.floor(Math.random()*J.length);Q.push(J.charAt(we))}return Q.join("")}function ht(){return(0,m.aC)(m.b)}function yt(Q){return(0,m.aD)("authEvent",Q.config.apiKey,Q.name)}function ke(Q){if(!Q?.includes("?"))return{};const[J,...Z]=Q.split("?");return(0,he.zd)(Z.join("?"))}const rt=class ze{constructor(){this._redirectPersistence=m.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=m.aE,this._overrideRedirectResult=m.aF}_initialize(J){var Z=this;return(0,g.Z)(function*(){const we=J._key();let Ve=Z.eventManagers.get(we);return Ve||(Ve=new Be(J),Z.eventManagers.set(we,Ve),Z.attachCallbackListeners(J,Ve)),Ve})()}_openPopup(J){(0,m.av)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,Z,we,Ve){var It=this;return(0,g.Z)(function*(){!function Ue(Q){var J,Z,we,Ve,It,de,se,X,ye,Ye;const ot=Ie();(0,m.aA)("function"==typeof(null===(J=ot?.universalLinks)||void 0===J?void 0:J.subscribe),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,m.aA)(typeof(null===(Z=ot?.BuildInfo)||void 0===Z?void 0:Z.packageName)<"u",Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,m.aA)("function"==typeof(null===(It=null===(Ve=null===(we=ot?.cordova)||void 0===we?void 0:we.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===It?void 0:It.openUrl),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,m.aA)("function"==typeof(null===(X=null===(se=null===(de=ot?.cordova)||void 0===de?void 0:de.plugins)||void 0===se?void 0:se.browsertab)||void 0===X?void 0:X.isAvailable),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,m.aA)("function"==typeof(null===(Ye=null===(ye=ot?.cordova)||void 0===ye?void 0:ye.InAppBrowser)||void 0===Ye?void 0:Ye.open),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const de=yield It._initialize(J);yield de.initialized(),de.resetRedirect(),(0,m.aG)(),yield It._originValidation(J);const se=function Ge(Q,J,Z=null){return{type:J,eventId:Z,urlResponse:null,sessionId:dt(),postBody:null,tenantId:Q.tenantId,error:(0,m.az)(Q,"no-auth-event")}}(J,we,Ve);yield function lt(Q,J){return ht()._set(yt(Q),J)}(J,se);const X=yield function ae(Q,J,Z){return ie.apply(this,arguments)}(J,se,Z),ye=yield function He(Q){const{cordova:J}=Ie();return new Promise(Z=>{J.plugins.browsertab.isAvailable(we=>{let Ve=null;we?J.plugins.browsertab.openUrl(Q):Ve=J.InAppBrowser.open(Q,(0,m.ay)()?"_blank":"_system","location=yes"),Z(Ve)})})}(X);return function it(Q,J,Z){return Ct.apply(this,arguments)}(J,de,ye)})()}_isIframeWebStorageSupported(J,Z){throw new Error("Method not implemented.")}_originValidation(J){const Z=J._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function pe(Q){return nt.apply(this,arguments)}(J)),this.originValidationPromises[Z]}attachCallbackListeners(J,Z){const{universalLinks:we,handleOpenURL:Ve,BuildInfo:It}=Ie(),de=setTimeout((0,g.Z)(function*(){yield Ze(J),Z.onEvent(ut())}),500),se=function(){var Ye=(0,g.Z)(function*(ot){clearTimeout(de);const en=yield Ze(J);let zn=null;en&&ot?.url&&(zn=function $e(Q,J){var Z,we;const Ve=function Ae(Q){const J=ke(Q),Z=J.link?decodeURIComponent(J.link):void 0,we=ke(Z).link,Ve=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return ke(Ve).link||Ve||we||Z||Q}(J);if(Ve.includes("/__/auth/callback")){const It=ke(Ve),de=It.firebaseError?function _t(Q){try{return JSON.parse(Q)}catch{return null}}(decodeURIComponent(It.firebaseError)):null,se=null===(we=null===(Z=de?.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===we?void 0:we[1],X=se?(0,m.az)(se):null;return X?{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,error:X,urlResponse:null,sessionId:null,postBody:null}:{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,sessionId:Q.sessionId,urlResponse:Ve,postBody:null}}return null}(en,ot.url)),Z.onEvent(zn||ut())});return function(en){return Ye.apply(this,arguments)}}();typeof we<"u"&&"function"==typeof we.subscribe&&we.subscribe(null,se);const X=Ve,ye=`${It.packageName.toLowerCase()}://`;Ie().handleOpenURL=function(){var Ye=(0,g.Z)(function*(ot){if(ot.toLowerCase().startsWith(ye)&&se({url:ot}),"function"==typeof X)try{X(ot)}catch(en){console.error(en)}});return function(ot){return Ye.apply(this,arguments)}}()}};function ut(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,m.az)("no-auth-event")}}function nn(){var Q;return(null===(Q=self?.location)||void 0===Q?void 0:Q.protocol)||null}function Tt(Q=(0,he.z$)()){return!("file:"!==nn()&&"ionic:"!==nn()&&"capacitor:"!==nn()||!Q.toLowerCase().match(/iphone|ipad|ipod|android/))}function vn(){try{const Q=self.localStorage,J=m.aL();if(Q)return Q.setItem(J,"1"),Q.removeItem(J),!function Zn(Q=(0,he.z$)()){return function xn(){return(0,he.w1)()&&11===document?.documentMode}()||function Ln(Q=(0,he.z$)()){return/Edge\/\d+/.test(Q)}(Q)}()||(0,he.hl)()}catch{return Gt()&&(0,he.hl)()}return!1}function Gt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hn(){return(function Ht(){return"http:"===nn()||"https:"===nn()}()||(0,he.ru)()||Tt())&&!function bn(){return(0,he.b$)()||(0,he.UG)()}()&&vn()&&!Gt()}function pr(){return Tt()&&typeof document<"u"}function Pn(){return(Pn=(0,g.Z)(function*(){return!!pr()&&new Promise(Q=>{const J=setTimeout(()=>{Q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),Q(!0)})})})).apply(this,arguments)}const gt={LOCAL:"local",NONE:"none",SESSION:"session"},rr=m.aA,Nr="persistence";function sr(Q){return an.apply(this,arguments)}function an(){return(an=(0,g.Z)(function*(Q){yield Q._initializationPromise;const J=Lt(),Z=m.aD(Nr,Q.config.apiKey,Q.name);J&&J.setItem(Z,Q._getPersistence())})).apply(this,arguments)}function Lt(){var Q;try{return(null===(Q=function gr(){return typeof window<"u"?window:null}())||void 0===Q?void 0:Q.sessionStorage)||null}catch{return null}}const Yt=m.aA;class ur{constructor(){this.browserResolver=m.aC(m.k),this.cordovaResolver=m.aC(rt),this.underlyingResolver=null,this._redirectPersistence=m.a,this._completeRedirectFn=m.aE,this._overrideRedirectResult=m.aF}_initialize(J){var Z=this;return(0,g.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,Z,we,Ve){var It=this;return(0,g.Z)(function*(){return yield It.selectUnderlyingResolver(),It.assertedUnderlyingResolver._openPopup(J,Z,we,Ve)})()}_openRedirect(J,Z,we,Ve){var It=this;return(0,g.Z)(function*(){return yield It.selectUnderlyingResolver(),It.assertedUnderlyingResolver._openRedirect(J,Z,we,Ve)})()}_isIframeWebStorageSupported(J,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,Z)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return pr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,g.Z)(function*(){if(J.underlyingResolver)return;const Z=yield function Ar(){return Pn.apply(this,arguments)}();J.underlyingResolver=Z?J.cordovaResolver:J.browserResolver})()}}function wn(Q){return Q.unwrap()}function Dr(Q){return Ti(Q)}function Ti(Q){const{_tokenResponse:J}=Q instanceof he.ZR?Q.customData:Q;if(!J)return null;if(!(Q instanceof he.ZR)&&"temporaryProof"in J&&"phoneNumber"in J)return m.P.credentialFromResult(Q);const Z=J.providerId;if(!Z||Z===m.p.PASSWORD)return null;let we;switch(Z){case m.p.GOOGLE:we=m.V;break;case m.p.FACEBOOK:we=m.U;break;case m.p.GITHUB:we=m.W;break;case m.p.TWITTER:we=m.Z;break;default:const{oauthIdToken:Ve,oauthAccessToken:It,oauthTokenSecret:de,pendingToken:se,nonce:X}=J;return It||de||Ve||se?se?Z.startsWith("saml.")?m.aO._create(Z,se):m.L._fromParams({providerId:Z,signInMethod:Z,pendingToken:se,idToken:Ve,accessToken:It}):new m.X(Z).credential({idToken:Ve,accessToken:It,rawNonce:X}):null}return Q instanceof he.ZR?we.credentialFromError(Q):we.credentialFromResult(Q)}function fn(Q,J){return J.catch(Z=>{throw Z instanceof he.ZR&&function br(Q,J){var Z;const we=null===(Z=J.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===J?.code)J.resolver=new Zt(Q,m.aq(Q,J));else if(we){const Ve=Ti(J),It=J;Ve&&(It.credential=Ve,It.tenantId=we.tenantId||void 0,It.email=we.email||void 0,It.phoneNumber=we.phoneNumber||void 0)}}(Q,Z),Z}).then(Z=>{const Ve=Z.user;return{operationType:Z.operationType,credential:Dr(Z),additionalUserInfo:m.ao(Z),user:Mn.getOrCreate(Ve)}})}function ri(Q,J){return sn.apply(this,arguments)}function sn(){return(sn=(0,g.Z)(function*(Q,J){const Z=yield J;return{verificationId:Z.verificationId,confirm:we=>fn(Q,Z.confirm(we))}})).apply(this,arguments)}class Zt{constructor(J,Z){this.resolver=Z,this.auth=function Gn(Q){return Q.wrapped()}(J)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return fn(wn(this.auth),this.resolver.resolveSignIn(J))}}class Mn{constructor(J){this._delegate=J,this.multiFactor=m.ar(J)}static getOrCreate(J){return Mn.USER_MAP.has(J)||Mn.USER_MAP.set(J,new Mn(J)),Mn.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var Z=this;return(0,g.Z)(function*(){return fn(Z.auth,m.a0(Z._delegate,J))})()}linkWithPhoneNumber(J,Z){var we=this;return(0,g.Z)(function*(){return ri(we.auth,m.l(we._delegate,J,Z))})()}linkWithPopup(J){var Z=this;return(0,g.Z)(function*(){return fn(Z.auth,m.d(Z._delegate,J,ur))})()}linkWithRedirect(J){var Z=this;return(0,g.Z)(function*(){return yield sr(m.aH(Z.auth)),m.g(Z._delegate,J,ur)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var Z=this;return(0,g.Z)(function*(){return fn(Z.auth,m.a1(Z._delegate,J))})()}reauthenticateWithPhoneNumber(J,Z){return ri(this.auth,m.r(this._delegate,J,Z))}reauthenticateWithPopup(J){return fn(this.auth,m.e(this._delegate,J,ur))}reauthenticateWithRedirect(J){var Z=this;return(0,g.Z)(function*(){return yield sr(m.aH(Z.auth)),m.h(Z._delegate,J,ur)})()}sendEmailVerification(J){return m.ae(this._delegate,J)}unlink(J){var Z=this;return(0,g.Z)(function*(){return yield m.an(Z._delegate,J),Z})()}updateEmail(J){return m.aj(this._delegate,J)}updatePassword(J){return m.ak(this._delegate,J)}updatePhoneNumber(J){return m.u(this._delegate,J)}updateProfile(J){return m.ai(this._delegate,J)}verifyBeforeUpdateEmail(J,Z){return m.af(this._delegate,J,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mn.USER_MAP=new WeakMap;const st=m.aA;let je=(()=>{class Q{constructor(Z,we){if(this.app=Z,we.isInitialized())return this._delegate=we.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ve}=Z.options;st(Ve,"invalid-api-key",{appName:Z.name}),st(Ve,"invalid-api-key",{appName:Z.name});const It=typeof window<"u"?ur:void 0;this._delegate=we.initialize({options:{persistence:Ut(Ve,Z.name),popupRedirectResolver:It}}),this._delegate._updateErrorMap(m.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,we){m.I(this._delegate,Z,we)}applyActionCode(Z){return m.a5(this._delegate,Z)}checkActionCode(Z){return m.a6(this._delegate,Z)}confirmPasswordReset(Z,we){return m.a4(this._delegate,Z,we)}createUserWithEmailAndPassword(Z,we){var Ve=this;return(0,g.Z)(function*(){return fn(Ve._delegate,m.a8(Ve._delegate,Z,we))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return m.ad(this._delegate,Z)}isSignInWithEmailLink(Z){return m.ab(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,g.Z)(function*(){st(Hn(),Z._delegate,"operation-not-supported-in-this-environment");const we=yield m.j(Z._delegate,ur);return we?fn(Z._delegate,Promise.resolve(we)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function vt(Q,J){(0,m.aH)(Q)._logFramework(J)}(this._delegate,Z)}onAuthStateChanged(Z,we,Ve){const{next:It,error:de,complete:se}=Pt(Z,we,Ve);return this._delegate.onAuthStateChanged(It,de,se)}onIdTokenChanged(Z,we,Ve){const{next:It,error:de,complete:se}=Pt(Z,we,Ve);return this._delegate.onIdTokenChanged(It,de,se)}sendSignInLinkToEmail(Z,we){return m.aa(this._delegate,Z,we)}sendPasswordResetEmail(Z,we){return m.a3(this._delegate,Z,we||void 0)}setPersistence(Z){var we=this;return(0,g.Z)(function*(){let Ve;switch(function ir(Q,J){rr(Object.values(gt).includes(J),Q,"invalid-persistence-type"),(0,he.b$)()?rr(J!==gt.SESSION,Q,"unsupported-persistence-type"):(0,he.UG)()?rr(J===gt.NONE,Q,"unsupported-persistence-type"):Gt()?rr(J===gt.NONE||J===gt.LOCAL&&(0,he.hl)(),Q,"unsupported-persistence-type"):rr(J===gt.NONE||vn(),Q,"unsupported-persistence-type")}(we._delegate,Z),Z){case gt.SESSION:Ve=m.a;break;case gt.LOCAL:Ve=(yield m.aC(m.i)._isAvailable())?m.i:m.b;break;case gt.NONE:Ve=m.N;break;default:return m.av("argument-error",{appName:we._delegate.name})}return we._delegate.setPersistence(Ve)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return fn(this._delegate,m._(this._delegate))}signInWithCredential(Z){return fn(this._delegate,m.$(this._delegate,Z))}signInWithCustomToken(Z){return fn(this._delegate,m.a2(this._delegate,Z))}signInWithEmailAndPassword(Z,we){return fn(this._delegate,m.a9(this._delegate,Z,we))}signInWithEmailLink(Z,we){return fn(this._delegate,m.ac(this._delegate,Z,we))}signInWithPhoneNumber(Z,we){return ri(this._delegate,m.s(this._delegate,Z,we))}signInWithPopup(Z){var we=this;return(0,g.Z)(function*(){return st(Hn(),we._delegate,"operation-not-supported-in-this-environment"),fn(we._delegate,m.c(we._delegate,Z,ur))})()}signInWithRedirect(Z){var we=this;return(0,g.Z)(function*(){return st(Hn(),we._delegate,"operation-not-supported-in-this-environment"),yield sr(we._delegate),m.f(we._delegate,Z,ur)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return m.a7(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Q.Persistence=gt,Q})();function Pt(Q,J,Z){let we=Q;"function"!=typeof Q&&({next:we,error:J,complete:Z}=Q);const Ve=we;return{next:de=>Ve(de&&Mn.getOrCreate(de)),error:J,complete:Z}}function Ut(Q,J){const Z=function kt(Q,J){const Z=Lt();if(!Z)return[];const we=m.aD(Nr,Q,J);switch(Z.getItem(we)){case gt.NONE:return[m.N];case gt.LOCAL:return[m.i,m.a];case gt.SESSION:return[m.a];default:return[]}}(Q,J);if(typeof self<"u"&&!Z.includes(m.i)&&Z.push(m.i),typeof window<"u")for(const we of[m.b,m.a])Z.includes(we)||Z.push(we);return Z.includes(m.N)||Z.push(m.N),Z}class on{constructor(){this.providerId="phone",this._delegate=new m.P(wn(H.Z.auth()))}static credential(J,Z){return m.P.credential(J,Z)}verifyPhoneNumber(J,Z){return this._delegate.verifyPhoneNumber(J,Z)}unwrap(){return this._delegate}}on.PHONE_SIGN_IN_METHOD=m.P.PHONE_SIGN_IN_METHOD,on.PROVIDER_ID=m.P.PROVIDER_ID;const cn=m.aA;class On{constructor(J,Z,we=H.Z.app()){var Ve;cn(null===(Ve=we.options)||void 0===Ve?void 0:Ve.apiKey,"invalid-api-key",{appName:we.name}),this._delegate=new m.R(J,Z,we.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function oe(Q){Q.INTERNAL.registerComponent(new be.wA("auth-compat",J=>{const Z=J.getProvider("app-compat").getImmediate(),we=J.getProvider("auth");return new je(Z,we)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:m.A.EMAIL_SIGNIN,PASSWORD_RESET:m.A.PASSWORD_RESET,RECOVER_EMAIL:m.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:m.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:m.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:m.A.VERIFY_EMAIL}},EmailAuthProvider:m.Q,FacebookAuthProvider:m.U,GithubAuthProvider:m.W,GoogleAuthProvider:m.V,OAuthProvider:m.X,SAMLAuthProvider:m.Y,PhoneAuthProvider:on,PhoneMultiFactorGenerator:m.m,RecaptchaVerifier:On,TwitterAuthProvider:m.Z,Auth:je,AuthCredential:m.J,Error:he.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Q.registerVersion("@firebase/auth-compat","0.4.0")}(H.Z)},8766:(bt,Me,B)=>{B.d(Me,{Lj:()=>Fe,X3:()=>ct});var g=B(5861);let m,he;const be=new WeakMap,Ie=new WeakMap,Te=new WeakMap,ae=new WeakMap,ie=new WeakMap;let He={get(le,$e,dt){if(le instanceof IDBTransaction){if("done"===$e)return Ie.get(le);if("objectStoreNames"===$e)return le.objectStoreNames||Te.get(le);if("store"===$e)return dt.objectStoreNames[1]?void 0:dt.objectStore(dt.objectStoreNames[0])}return qe(le[$e])},set:(le,$e,dt)=>(le[$e]=dt,!0),has:(le,$e)=>le instanceof IDBTransaction&&("done"===$e||"store"===$e)||$e in le};function Ue(le){return"function"==typeof le?function Ct(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...$e){return le.apply(Qe(this),$e),qe(be.get(this))}:function(...$e){return qe(le.apply(Qe(this),$e))}:function($e,...dt){const ht=le.call(Qe(this),$e,...dt);return Te.set(ht,$e.sort?$e.sort():[$e]),qe(ht)}}(le):(le instanceof IDBTransaction&&function nt(le){if(Ie.has(le))return;const $e=new Promise((dt,ht)=>{const yt=()=>{le.removeEventListener("complete",_t),le.removeEventListener("error",Ae),le.removeEventListener("abort",Ae)},_t=()=>{dt(),yt()},Ae=()=>{ht(le.error||new DOMException("AbortError","AbortError")),yt()};le.addEventListener("complete",_t),le.addEventListener("error",Ae),le.addEventListener("abort",Ae)});Ie.set(le,$e)}(le),((le,$e)=>$e.some(dt=>le instanceof dt))(le,function fe(){return m||(m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,He):le)}function qe(le){if(le instanceof IDBRequest)return function pe(le){const $e=new Promise((dt,ht)=>{const yt=()=>{le.removeEventListener("success",_t),le.removeEventListener("error",Ae)},_t=()=>{dt(qe(le.result)),yt()},Ae=()=>{ht(le.error),yt()};le.addEventListener("success",_t),le.addEventListener("error",Ae)});return $e.then(dt=>{dt instanceof IDBCursor&&be.set(dt,le)}).catch(()=>{}),ie.set($e,le),$e}(le);if(ae.has(le))return ae.get(le);const $e=Ue(le);return $e!==le&&(ae.set(le,$e),ie.set($e,le)),$e}const Qe=le=>ie.get(le);function ct(le,$e,{blocked:dt,upgrade:ht,blocking:yt,terminated:_t}={}){const Ae=indexedDB.open(le,$e),ke=qe(Ae);return ht&&Ae.addEventListener("upgradeneeded",Le=>{ht(qe(Ae.result),Le.oldVersion,Le.newVersion,qe(Ae.transaction))}),dt&&Ae.addEventListener("blocked",()=>dt()),ke.then(Le=>{_t&&Le.addEventListener("close",()=>_t()),yt&&Le.addEventListener("versionchange",()=>yt())}).catch(()=>{}),ke}function Fe(le,{blocked:$e}={}){const dt=indexedDB.deleteDatabase(le);return $e&&dt.addEventListener("blocked",()=>$e()),qe(dt).then(()=>{})}const Be=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],lt=new Map;function Ze(le,$e){if(!(le instanceof IDBDatabase)||$e in le||"string"!=typeof $e)return;if(lt.get($e))return lt.get($e);const dt=$e.replace(/FromIndex$/,""),ht=$e!==dt,yt=Ge.includes(dt);if(!(dt in(ht?IDBIndex:IDBObjectStore).prototype)||!yt&&!Be.includes(dt))return;const _t=function(){var Ae=(0,g.Z)(function*(ke,...Le){const ze=this.transaction(ke,yt?"readwrite":"readonly");let rt=ze.store;return ht&&(rt=rt.index(Le.shift())),(yield Promise.all([rt[dt](...Le),yt&&ze.done]))[0]});return function(Le){return Ae.apply(this,arguments)}}();return lt.set($e,_t),_t}!function it(le){He=le(He)}(le=>({...le,get:($e,dt,ht)=>Ze($e,dt)||le.get($e,dt,ht),has:($e,dt)=>!!Ze($e,dt)||le.has($e,dt)}))},5861:(bt,Me,B)=>{function g(m,he,fe,ve,be,Ie,Te){try{var ae=m[Ie](Te),ie=ae.value}catch(pe){return void fe(pe)}ae.done?he(ie):Promise.resolve(ie).then(ve,be)}function H(m){return function(){var he=this,fe=arguments;return new Promise(function(ve,be){var Ie=m.apply(he,fe);function Te(ie){g(Ie,ve,be,Te,ae,"next",ie)}function ae(ie){g(Ie,ve,be,Te,ae,"throw",ie)}Te(void 0)})}}B.d(Me,{Z:()=>H})}},bt=>{bt(bt.s=1178)}]);