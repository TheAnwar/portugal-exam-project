"use strict";(self.webpackChunkexam=self.webpackChunkexam||[]).push([[179],{2011:(yt,Se,V)=>{V.d(Se,{Dh:()=>ye,GT:()=>fe,cc:()=>Ge,hO:()=>Je,on:()=>re,pX:()=>ue,xv:()=>we});var I=V(4650),j=V(9260),p=V(2122);yt=V.hmd(yt);const ae=["ngOnDestroy"],ue=(We,ze,Qe,ke={})=>new Proxy(We,{get:(Ue,je)=>Qe.runOutsideAngular(()=>{var it;if(We[je])return!(null===(it=ke?.spy)||void 0===it)&&it.get&&ke.spy.get(je,We[je]),We[je];if(ae.indexOf(je)>-1)return()=>{};const ge=ze.toPromise().then(Te=>{const Fe=Te&&Te[je];return"function"==typeof Fe?Fe.bind(Te):Fe&&Fe.then?Fe.then(ct=>Qe.run(()=>ct)):Qe.run(()=>Fe)});return new Proxy(()=>{},{get:(Te,Fe)=>ge[Fe],apply:(Te,Fe,ct)=>ge.then(nt=>{var pt;const dt=nt&&nt(...ct);return!(null===(pt=ke?.spy)||void 0===pt)&&pt.apply&&ke.spy.apply(je,ct,dt),dt})})})}),fe=(We,ze)=>{ze.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(ke=>{Object.defineProperty(We.prototype,ke,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,ke))})})};class _e{constructor(ze){return ze}}const ye=new I.OlP("angularfire2.app.options"),we=new I.OlP("angularfire2.app.name");function re(We,ze,Qe){const Ue="object"==typeof Qe&&Qe||{};Ue.name=Ue.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const it=j.Z.apps.filter(ge=>ge&&ge.name===Ue.name)[0]||ze.runOutsideAngular(()=>j.Z.initializeApp(We,Ue));try{JSON.stringify(We)!==JSON.stringify(it.options)&&te("error",`${it.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(it)}const te=(We,...ze)=>{(0,I.X6Q)()&&typeof console<"u"&&console[We](...ze)},ce={provide:_e,useFactory:re,deps:[ye,I.R0b,[new I.FiY,we]]};let Je=(()=>{class We{constructor(Qe){j.Z.registerVersion("angularfire",p.q4.full,"core"),j.Z.registerVersion("angularfire",p.q4.full,"app-compat"),j.Z.registerVersion("angular",I.q4F.full,Qe.toString())}static initializeApp(Qe,ke){return{ngModule:We,providers:[{provide:ye,useValue:Qe},{provide:we,useValue:ke}]}}}return We.\u0275fac=function(Qe){return new(Qe||We)(I.LFG(I.Lbi))},We.\u0275mod=I.oAB({type:We}),We.\u0275inj=I.cJS({providers:[ce]}),We})();function Ge(We,ze,Qe,ke,Ue){const[,je,it]=globalThis.\u0275AngularfireInstanceCache.find(ge=>ge[0]===We)||[];if(je)return function at(We,ze){try{return We.toString()===ze.toString()}catch{return We===ze}}(Ue,it)||(Oe("error",`${ze} was already initialized on the ${Qe} Firebase App with different settings.${vt?" You may need to reload as Firebase is not HMR aware.":""}`),Oe("warn",{is:Ue,was:it})),je;{const ge=ke();return globalThis.\u0275AngularfireInstanceCache.push([We,ge,Ue]),ge}}const vt=!!yt.hot,Oe=(We,...ze)=>{(0,I.X6Q)()&&typeof console<"u"&&console[We](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(yt,Se,V)=>{V.d(Se,{q4:()=>za,iC:()=>wn,HU:()=>U,vb:()=>_,JM:()=>v});var I=V(4650),j=V(259),p=V(5861),ae=V(9681),ue=V(2090),fe=V(4859),_e=V(1877),ye=V(8766);const we="@firebase/installations",re="0.6.3",ce=`w:${re}`,Je="FIS_v2",ze=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(A){return A instanceof ue.ZR&&A.code.includes("request-failed")}function ke({projectId:A}){return`https://firebaseinstallations.googleapis.com/v1/projects/${A}/installations`}function Ue(A){return{token:A.token,requestStatus:2,expiresIn:nt(A.expiresIn),creationTime:Date.now()}}function je(A,R){return it.apply(this,arguments)}function it(){return(it=(0,p.Z)(function*(A,R){const J=(yield R.json()).error;return ze.create("request-failed",{requestName:A,serverCode:J.code,serverMessage:J.message,serverStatus:J.status})})).apply(this,arguments)}function ge({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Te(A,{refreshToken:R}){const B=ge(A);return B.append("Authorization",function pt(A){return`${Je} ${A}`}(R)),B}function Fe(A){return ct.apply(this,arguments)}function ct(){return(ct=(0,p.Z)(function*(A){const R=yield A();return R.status>=500&&R.status<600?A():R})).apply(this,arguments)}function nt(A){return Number(A.replace("s","000"))}function dt(A,R){return be.apply(this,arguments)}function be(){return(be=(0,p.Z)(function*({appConfig:A,heartbeatServiceProvider:R},{fid:B}){const J=ke(A),pe=ge(A),Ce=R.getImmediate({optional:!0});if(Ce){const Bt=yield Ce.getHeartbeatsHeader();Bt&&pe.append("x-firebase-client",Bt)}const Ot={method:"POST",headers:pe,body:JSON.stringify({fid:B,authVersion:Je,appId:A.appId,sdkVersion:ce})},jt=yield Fe(()=>fetch(J,Ot));if(jt.ok){const Bt=yield jt.json();return{fid:Bt.fid||B,registrationStatus:2,refreshToken:Bt.refreshToken,authToken:Ue(Bt.authToken)}}throw yield je("Create Installation",jt)})).apply(this,arguments)}function Me(A){return new Promise(R=>{setTimeout(R,A)})}const $e=/^[cdef][\w-]{21}$/;function et(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const B=function lt(A){return function Pe(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return $e.test(B)?B:""}catch{return""}}function ht(A){return`${A.appName}!${A.appId}`}const Cn=new Map;function me(A,R){const B=ht(A);xt(B,R),function pn(A,R){const B=function ln(){return!Ln&&"BroadcastChannel"in self&&(Ln=new BroadcastChannel("[Firebase] FID Change"),Ln.onmessage=A=>{xt(A.data.key,A.data.fid)}),Ln}();B&&B.postMessage({key:A,fid:R}),function Kn(){0===Cn.size&&Ln&&(Ln.close(),Ln=null)}()}(B,R)}function xt(A,R){const B=Cn.get(A);if(B)for(const J of B)J(R)}let Ln=null;const Vn="firebase-installations-store";let _r=null;function fr(){return _r||(_r=(0,ye.X3)("firebase-installations-database",1,{upgrade:(A,R)=>{0===R&&A.createObjectStore(Vn)}})),_r}function xn(A,R){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(A,R){const B=ht(A),pe=(yield fr()).transaction(Vn,"readwrite"),Ce=pe.objectStore(Vn),He=yield Ce.get(B);return yield Ce.put(R,B),yield pe.done,(!He||He.fid!==R.fid)&&me(A,R.fid),R})).apply(this,arguments)}function gt(A){return sr.apply(this,arguments)}function sr(){return(sr=(0,p.Z)(function*(A){const R=ht(A),J=(yield fr()).transaction(Vn,"readwrite");yield J.objectStore(Vn).delete(R),yield J.done})).apply(this,arguments)}function Er(A,R){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(A,R){const B=ht(A),pe=(yield fr()).transaction(Vn,"readwrite"),Ce=pe.objectStore(Vn),He=yield Ce.get(B),Ot=R(He);return void 0===Ot?yield Ce.delete(B):yield Ce.put(Ot,B),yield pe.done,Ot&&(!He||He.fid!==Ot.fid)&&me(A,Ot.fid),Ot})).apply(this,arguments)}function tr(A){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(A){let R;const B=yield Er(A.appConfig,J=>{const pe=Pt(J),Ce=Nt(A,pe);return R=Ce.registrationPromise,Ce.installationEntry});return""===B.fid?{installationEntry:yield R}:{installationEntry:B,registrationPromise:R}})).apply(this,arguments)}function Pt(A){return Xn(A||{fid:et(),registrationStatus:0})}function Nt(A,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(ze.create("app-offline"))};const B={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},J=function zt(A,R){return _n.apply(this,arguments)}(A,B);return{installationEntry:B,registrationPromise:J}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:Mn(A)}:{installationEntry:R}}function _n(){return(_n=(0,p.Z)(function*(A,R){try{const B=yield dt(A,R);return xn(A.appConfig,B)}catch(B){throw Qe(B)&&409===B.customData.serverCode?yield gt(A.appConfig):yield xn(A.appConfig,{fid:R.fid,registrationStatus:0}),B}})).apply(this,arguments)}function Mn(A){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(A){let R=yield Br(A.appConfig);for(;1===R.registrationStatus;)yield Me(100),R=yield Br(A.appConfig);if(0===R.registrationStatus){const{installationEntry:B,registrationPromise:J}=yield tr(A);return J||B}return R})).apply(this,arguments)}function Br(A){return Er(A,R=>{if(!R)throw ze.create("installation-not-found");return Xn(R)})}function Xn(A){return function ti(A){return 1===A.registrationStatus&&A.registrationTime+1e4<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function nn(A,R){return ni.apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*({appConfig:A,heartbeatServiceProvider:R},B){const J=qt(A,B),pe=Te(A,B),Ce=R.getImmediate({optional:!0});if(Ce){const Bt=yield Ce.getHeartbeatsHeader();Bt&&pe.append("x-firebase-client",Bt)}const Ot={method:"POST",headers:pe,body:JSON.stringify({installation:{sdkVersion:ce,appId:A.appId}})},jt=yield Fe(()=>fetch(J,Ot));if(jt.ok)return Ue(yield jt.json());throw yield je("Generate Auth Token",jt)})).apply(this,arguments)}function qt(A,{fid:R}){return`${ke(A)}/${R}/authTokens:generate`}function Ut(A){return Un.apply(this,arguments)}function Un(){return(Un=(0,p.Z)(function*(A,R=!1){let B;const J=yield Er(A.appConfig,Ce=>{if(!an(Ce))throw ze.create("not-registered");const He=Ce.authToken;if(!R&&se(He))return Ce;if(1===He.requestStatus)return B=ut(A,R),Ce;{if(!navigator.onLine)throw ze.create("app-offline");const Ot=le(Ce);return B=kt(A,Ot),Ot}});return B?yield B:J.authToken})).apply(this,arguments)}function ut(A,R){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(A,R){let B=yield _t(A.appConfig);for(;1===B.authToken.requestStatus;)yield Me(100),B=yield _t(A.appConfig);const J=B.authToken;return 0===J.requestStatus?Ut(A,R):J})).apply(this,arguments)}function _t(A){return Er(A,R=>{if(!an(R))throw ze.create("not-registered");return function Y(A){return 1===A.requestStatus&&A.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function kt(A,R){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,p.Z)(function*(A,R){try{const B=yield nn(A,R),J=Object.assign(Object.assign({},R),{authToken:B});return yield xn(A.appConfig,J),B}catch(B){if(!Qe(B)||401!==B.customData.serverCode&&404!==B.customData.serverCode){const J=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield xn(A.appConfig,J)}else yield gt(A.appConfig);throw B}})).apply(this,arguments)}function an(A){return void 0!==A&&2===A.registrationStatus}function se(A){return 2===A.requestStatus&&!function X(A){const R=Date.now();return R<A.creationTime||A.creationTime+A.expiresIn<R+36e5}(A)}function le(A){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:R})}function K(){return(K=(0,p.Z)(function*(A){const R=A,{installationEntry:B,registrationPromise:J}=yield tr(R);return J?J.catch(console.error):Ut(R).catch(console.error),B.fid})).apply(this,arguments)}function Ke(){return(Ke=(0,p.Z)(function*(A,R=!1){const B=A;return yield St(B),(yield Ut(B,R)).token})).apply(this,arguments)}function St(A){return oe.apply(this,arguments)}function oe(){return(oe=(0,p.Z)(function*(A){const{registrationPromise:R}=yield tr(A);R&&(yield R)})).apply(this,arguments)}function ts(A){return ze.create("missing-app-config-values",{valueName:A})}const Gi="installations",Ai=A=>{const R=A.getProvider("app").getImmediate(),B=function rr(A){if(!A||!A.options)throw ts("App Configuration");if(!A.name)throw ts("App Name");const R=["projectId","apiKey","appId"];for(const B of R)if(!A.options[B])throw ts(B);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(R);return{app:R,appConfig:B,heartbeatServiceProvider:(0,ae._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},$o=A=>{const R=A.getProvider("app").getImmediate(),B=(0,ae._getProvider)(R,Gi).getImmediate();return{getId:()=>function G(A){return K.apply(this,arguments)}(B),getToken:pe=>function De(A){return Ke.apply(this,arguments)}(B,pe)}};(function qs(){(0,ae._registerComponent)(new fe.wA(Gi,Ai,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",$o,"PRIVATE"))})(),(0,ae.registerVersion)(we,re),(0,ae.registerVersion)(we,re,"esm2017");const Ho="@firebase/remote-config",zn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qi{constructor(R,B,J,pe){this.client=R,this.storage=B,this.storageCache=J,this.logger=pe}isCachedDataFresh(R,B){if(!B)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const J=Date.now()-B,pe=J<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${J}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${pe}.`),pe}fetch(R){var B=this;return(0,p.Z)(function*(){const[J,pe]=yield Promise.all([B.storage.getLastSuccessfulFetchTimestampMillis(),B.storage.getLastSuccessfulFetchResponse()]);if(pe&&B.isCachedDataFresh(R.cacheMaxAgeMillis,J))return pe;R.eTag=pe&&pe.eTag;const Ce=yield B.client.fetch(R),He=[B.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ce.status&&He.push(B.storage.setLastSuccessfulFetchResponse(Ce)),yield Promise.all(He),Ce})()}}function jr(A=navigator){return A.languages&&A.languages[0]||A.language}class Ri{constructor(R,B,J,pe,Ce,He){this.firebaseInstallations=R,this.sdkVersion=B,this.namespace=J,this.projectId=pe,this.apiKey=Ce,this.appId=He}fetch(R){var B=this;return(0,p.Z)(function*(){const[J,pe]=yield Promise.all([B.firebaseInstallations.getId(),B.firebaseInstallations.getToken()]),He=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${B.projectId}/namespaces/${B.namespace}:fetch?key=${B.apiKey}`,Ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},jt={sdk_version:B.sdkVersion,app_instance_id:J,app_instance_id_token:pe,app_id:B.appId,language_code:jr()},Bt={method:"POST",headers:Ot,body:JSON.stringify(jt)},un=fetch(He,Bt),tn=new Promise((ws,co)=>{R.signal.addEventListener(()=>{const qa=new Error("The operation was aborted.");qa.name="AbortError",co(qa)})});let Bs;try{yield Promise.race([un,tn]),Bs=yield un}catch(ws){let co="fetch-client-network";throw"AbortError"===ws?.name&&(co="fetch-timeout"),zn.create(co,{originalErrorMessage:ws?.message})}let Kr=Bs.status;const ma=Bs.headers.get("ETag")||void 0;let oc,Es;if(200===Bs.status){let ws;try{ws=yield Bs.json()}catch(co){throw zn.create("fetch-client-parse",{originalErrorMessage:co?.message})}oc=ws.entries,Es=ws.state}if("INSTANCE_STATE_UNSPECIFIED"===Es?Kr=500:"NO_CHANGE"===Es?Kr=304:("NO_TEMPLATE"===Es||"EMPTY_CONFIG"===Es)&&(oc={}),304!==Kr&&200!==Kr)throw zn.create("fetch-status",{httpStatus:Kr});return{status:Kr,eTag:ma,config:oc}})()}}class gr{constructor(R,B){this.client=R,this.storage=B}fetch(R){var B=this;return(0,p.Z)(function*(){const J=(yield B.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return B.attemptFetch(R,J)})()}attemptFetch(R,{throttleEndTimeMillis:B,backoffCount:J}){var pe=this;return(0,p.Z)(function*(){yield function ba(A,R){return new Promise((B,J)=>{const pe=Math.max(R-Date.now(),0),Ce=setTimeout(B,pe);A.addEventListener(()=>{clearTimeout(Ce),J(zn.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,B);try{const Ce=yield pe.client.fetch(R);return yield pe.storage.deleteThrottleMetadata(),Ce}catch(Ce){if(!function qn(A){if(!(A instanceof ue.ZR&&A.customData))return!1;const R=Number(A.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Ce))throw Ce;const He={throttleEndTimeMillis:Date.now()+(0,ue.$s)(J),backoffCount:J+1};return yield pe.storage.setThrottleMetadata(He),pe.attemptFetch(R,He)}})()}}class yo{constructor(R,B,J,pe,Ce){this.app=R,this._client=B,this._storageCache=J,this._storage=pe,this._logger=Ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ss(A,R){const B=A.target.error||void 0;return zn.create(R,{originalErrorMessage:B&&B?.message})}const ci="app_namespace_store";class ii{constructor(R,B,J,pe=function Oi(){return new Promise((A,R)=>{try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=J=>{R(Ss(J,"storage-open"))},B.onsuccess=J=>{A(J.target.result)},B.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(ci,{keyPath:"compositeKey"})}}catch(B){R(zn.create("storage-open",{originalErrorMessage:B?.message}))}})}()){this.appId=R,this.appName=B,this.namespace=J,this.openDbPromise=pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var B=this;return(0,p.Z)(function*(){const J=yield B.openDbPromise;return new Promise((pe,Ce)=>{const Ot=J.transaction([ci],"readonly").objectStore(ci),jt=B.createCompositeKey(R);try{const Bt=Ot.get(jt);Bt.onerror=un=>{Ce(Ss(un,"storage-get"))},Bt.onsuccess=un=>{const tn=un.target.result;pe(tn?tn.value:void 0)}}catch(Bt){Ce(zn.create("storage-get",{originalErrorMessage:Bt?.message}))}})})()}set(R,B){var J=this;return(0,p.Z)(function*(){const pe=yield J.openDbPromise;return new Promise((Ce,He)=>{const jt=pe.transaction([ci],"readwrite").objectStore(ci),Bt=J.createCompositeKey(R);try{const un=jt.put({compositeKey:Bt,value:B});un.onerror=tn=>{He(Ss(tn,"storage-set"))},un.onsuccess=()=>{Ce()}}catch(un){He(zn.create("storage-set",{originalErrorMessage:un?.message}))}})})()}delete(R){var B=this;return(0,p.Z)(function*(){const J=yield B.openDbPromise;return new Promise((pe,Ce)=>{const Ot=J.transaction([ci],"readwrite").objectStore(ci),jt=B.createCompositeKey(R);try{const Bt=Ot.delete(jt);Bt.onerror=un=>{Ce(Ss(un,"storage-delete"))},Bt.onsuccess=()=>{pe()}}catch(Bt){Ce(zn.create("storage-delete",{originalErrorMessage:Bt?.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class cs{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,p.Z)(function*(){const B=R.storage.getLastFetchStatus(),J=R.storage.getLastSuccessfulFetchTimestampMillis(),pe=R.storage.getActiveConfig(),Ce=yield B;Ce&&(R.lastFetchStatus=Ce);const He=yield J;He&&(R.lastSuccessfulFetchTimestampMillis=He);const Ot=yield pe;Ot&&(R.activeConfig=Ot)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function Hc(){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Ca(){(0,ae._registerComponent)(new fe.wA("remote-config",function A(R,{instanceIdentifier:B}){const J=R.getProvider("app").getImmediate(),pe=R.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw zn.create("registration-window");if(!(0,ue.hl)())throw zn.create("indexed-db-unavailable");const{projectId:Ce,apiKey:He,appId:Ot}=J.options;if(!Ce)throw zn.create("registration-project-id");if(!He)throw zn.create("registration-api-key");if(!Ot)throw zn.create("registration-app-id");const jt=new ii(Ot,J.name,B=B||"firebase"),Bt=new cs(jt),un=new _e.Yd(Ho);un.logLevel=_e.in.ERROR;const tn=new Ri(pe,ae.SDK_VERSION,B,Ce,He,Ot),Bs=new gr(tn,jt),Kr=new qi(Bs,jt,Bt,un),ma=new yo(J,Kr,Bt,jt,un);return function Nn(A){const R=(0,ue.m9)(A);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(ma),ma},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ho,"0.4.3"),(0,ae.registerVersion)(Ho,"0.4.3","esm2017")}();const ns="/firebase-messaging-sw.js",Ks="/firebase-cloud-messaging-push-scope",Ni="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ta="google.c.a.c_id",Xa="google.c.a.c_l",Tu="google.c.a.ts",Pi="google.c.a.e";var Zi=(()=>{return(A=Zi||(Zi={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",Zi;var A})();function Ki(A){const R=new Uint8Array(A);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function eu(A){const B=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),J=atob(B),pe=new Uint8Array(J.length);for(let Ce=0;Ce<J.length;++Ce)pe[Ce]=J.charCodeAt(Ce);return pe}const ls="fcm_token_details_db",_o="fcm_token_object_Store";function Eo(A){return Go.apply(this,arguments)}function Go(){return Go=(0,p.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ce=>Ce.name).includes(ls))return null;let R=null;return(yield(0,ye.X3)(ls,5,{upgrade:(J=(0,p.Z)(function*(pe,Ce,He,Ot){var jt;if(Ce<2||!pe.objectStoreNames.contains(_o))return;const Bt=Ot.objectStore(_o),un=yield Bt.index("fcmSenderId").get(A);if(yield Bt.clear(),un)if(2===Ce){const tn=un;if(!tn.auth||!tn.p256dh||!tn.endpoint)return;R={token:tn.fcmToken,createTime:null!==(jt=tn.createTime)&&void 0!==jt?jt:Date.now(),subscriptionOptions:{auth:tn.auth,p256dh:tn.p256dh,endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:"string"==typeof tn.vapidKey?tn.vapidKey:Ki(tn.vapidKey)}}}else if(3===Ce){const tn=un;R={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:Ki(tn.auth),p256dh:Ki(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:Ki(tn.vapidKey)}}}else if(4===Ce){const tn=un;R={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:Ki(tn.auth),p256dh:Ki(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:Ki(tn.vapidKey)}}}}),function(Ce,He,Ot,jt){return J.apply(this,arguments)})})).close(),yield(0,ye.Lj)(ls),yield(0,ye.Lj)("fcm_vapid_details_db"),yield(0,ye.Lj)("undefined"),ds(R)?R:null;var J}),Go.apply(this,arguments)}function ds(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:R}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const As="firebase-messaging-store";let Ys=null;function Qs(){return Ys||(Ys=(0,ye.X3)("firebase-messaging-database",1,{upgrade:(A,R)=>{0===R&&A.createObjectStore(As)}})),Ys}function oa(A){return xs.apply(this,arguments)}function xs(){return(xs=(0,p.Z)(function*(A){const R=Wt(A),J=yield(yield Qs()).transaction(As).objectStore(As).get(R);if(J)return J;{const pe=yield Eo(A.appConfig.senderId);if(pe)return yield wo(A,pe),pe}})).apply(this,arguments)}function wo(A,R){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(A,R){const B=Wt(A),pe=(yield Qs()).transaction(As,"readwrite");return yield pe.objectStore(As).put(R,B),yield pe.done,R})).apply(this,arguments)}function At(A){return fs.apply(this,arguments)}function fs(){return(fs=(0,p.Z)(function*(A){const R=Wt(A),J=(yield Qs()).transaction(As,"readwrite");yield J.objectStore(As).delete(R),yield J.done})).apply(this,arguments)}function Wt({appConfig:A}){return A.appId}const Zn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ms(A,R){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(A,R){const B=yield ki(A),J=yi(R),pe={method:"POST",headers:B,body:JSON.stringify(J)};let Ce;try{Ce=yield(yield fetch(mr(A.appConfig),pe)).json()}catch(He){throw Zn.create("token-subscribe-failed",{errorInfo:He?.toString()})}if(Ce.error)throw Zn.create("token-subscribe-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw Zn.create("token-subscribe-no-token");return Ce.token})).apply(this,arguments)}function zo(A,R){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(A,R){const B=yield ki(A),J=yi(R.subscriptionOptions),pe={method:"PATCH",headers:B,body:JSON.stringify(J)};let Ce;try{Ce=yield(yield fetch(`${mr(A.appConfig)}/${R.token}`,pe)).json()}catch(He){throw Zn.create("token-update-failed",{errorInfo:He?.toString()})}if(Ce.error)throw Zn.create("token-update-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw Zn.create("token-update-no-token");return Ce.token})).apply(this,arguments)}function zr(A,R){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,p.Z)(function*(A,R){const J={method:"DELETE",headers:yield ki(A)};try{const Ce=yield(yield fetch(`${mr(A.appConfig)}/${R}`,J)).json();if(Ce.error)throw Zn.create("token-unsubscribe-failed",{errorInfo:Ce.error.message})}catch(pe){throw Zn.create("token-unsubscribe-failed",{errorInfo:pe?.toString()})}})).apply(this,arguments)}function mr({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function ki(A){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*({appConfig:A,installations:R}){const B=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${B}`})})).apply(this,arguments)}function yi({p256dh:A,auth:R,endpoint:B,vapidKey:J}){const pe={web:{endpoint:B,auth:R,p256dh:A}};return J!==Ni&&(pe.web.applicationPubKey=J),pe}const Dr=6048e5;function xa(A){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(A){const R=yield ps(A.swRegistration,A.vapidKey),B={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:R.endpoint,auth:Ki(R.getKey("auth")),p256dh:Ki(R.getKey("p256dh"))},J=yield oa(A.firebaseDependencies);if(J){if(ua(J.subscriptionOptions,B))return Date.now()>=J.createTime+Dr?Jt(A,{token:J.token,createTime:Date.now(),subscriptionOptions:B}):J.token;try{yield zr(A.firebaseDependencies,J.token)}catch(pe){console.warn(pe)}return tu(A.firebaseDependencies,B)}return tu(A.firebaseDependencies,B)})).apply(this,arguments)}function aa(A){return er.apply(this,arguments)}function er(){return(er=(0,p.Z)(function*(A){const R=yield oa(A.firebaseDependencies);R&&(yield zr(A.firebaseDependencies,R.token),yield At(A.firebaseDependencies));const B=yield A.swRegistration.pushManager.getSubscription();return!B||B.unsubscribe()})).apply(this,arguments)}function Jt(A,R){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(A,R){try{const B=yield zo(A.firebaseDependencies,R),J=Object.assign(Object.assign({},R),{token:B,createTime:Date.now()});return yield wo(A.firebaseDependencies,J),B}catch(B){throw yield aa(A),B}})).apply(this,arguments)}function tu(A,R){return eo.apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(A,R){const J={token:yield Ms(A,R),createTime:Date.now(),subscriptionOptions:R};return yield wo(A,J),J.token})).apply(this,arguments)}function ps(A,R){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(A,R){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:eu(R)})})).apply(this,arguments)}function ua(A,R){return R.vapidKey===A.vapidKey&&R.endpoint===A.endpoint&&R.auth===A.auth&&R.p256dh===A.p256dh}function Ma(A){const R={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function Wo(A,R){if(!R.notification)return;A.notification={};const B=R.notification.title;B&&(A.notification.title=B);const J=R.notification.body;J&&(A.notification.body=J);const pe=R.notification.image;pe&&(A.notification.image=pe);const Ce=R.notification.icon;Ce&&(A.notification.icon=Ce)}(R,A),function Re(A,R){R.data&&(A.data=R.data)}(R,A),function dn(A,R){var B,J,pe,Ce,He;if(!(R.fcmOptions||null!==(B=R.notification)&&void 0!==B&&B.click_action))return;A.fcmOptions={};const Ot=null!==(pe=null===(J=R.fcmOptions)||void 0===J?void 0:J.link)&&void 0!==pe?pe:null===(Ce=R.notification)||void 0===Ce?void 0:Ce.click_action;Ot&&(A.fcmOptions.link=Ot);const jt=null===(He=R.fcmOptions)||void 0===He?void 0:He.analytics_label;jt&&(A.fcmOptions.analyticsLabel=jt)}(R,A),R}function Ra(A){return"object"==typeof A&&!!A&&Ta in A}function Oa(A,R){const B=[];for(let J=0;J<A.length;J++)B.push(A.charAt(J)),J<R.length&&B.push(R.charAt(J));return B.join("")}function ca(A){return Zn.create("missing-app-config-values",{valueName:A})}Oa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Oa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gs{constructor(R,B,J){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const pe=function Cr(A){if(!A||!A.options)throw ca("App Configuration Object");if(!A.name)throw ca("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:B}=A;for(const J of R)if(!B[J])throw ca(J);return{appName:A.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:pe,installations:B,analyticsProvider:J}}_delete(){return Promise.resolve()}}function Li(A){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(ns,{scope:Ks}),A.swRegistration.update().catch(()=>{})}catch(R){throw Zn.create("failed-service-worker-registration",{browserErrorMessage:R?.message})}})).apply(this,arguments)}function Io(A,R){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(A,R){if(!R&&!A.swRegistration&&(yield Li(A)),R||!A.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw Zn.create("invalid-sw-registration");A.swRegistration=R}})).apply(this,arguments)}function Do(A,R){return Os.apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(A,R){R?A.vapidKey=R:A.vapidKey||(A.vapidKey=Ni)})).apply(this,arguments)}function si(){return(si=(0,p.Z)(function*(A,R){if(!navigator)throw Zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zn.create("permission-blocked");return yield Do(A,R?.vapidKey),yield Io(A,R?.serviceWorkerRegistration),xa(A)})).apply(this,arguments)}function rs(A,R,B){return ms.apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(A,R,B){const J=Vi(R);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(J,{message_id:B[Ta],message_name:B[Xa],message_time:B[Tu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Vi(A){switch(A){case Zi.NOTIFICATION_CLICKED:return"notification_open";case Zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function bo(){return(bo=(0,p.Z)(function*(A,R){const B=R.data;if(!B.isFirebaseMessaging)return;A.onMessageHandler&&B.messageType===Zi.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Ma(B)):A.onMessageHandler.next(Ma(B)));const J=B.data;Ra(J)&&"1"===J[Pi]&&(yield rs(A,B.messageType,J))})).apply(this,arguments)}const Co="@firebase/messaging",ys=A=>{const R=new gs(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",B=>function nu(A,R){return bo.apply(this,arguments)}(R,B)),R},Ns=A=>{const R=A.getProvider("messaging").getImmediate();return{getToken:J=>function Nr(A,R){return si.apply(this,arguments)}(R,J)}};function Ps(){return no.apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Na(){(0,ae._registerComponent)(new fe.wA("messaging",ys,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",Ns,"PRIVATE")),(0,ae.registerVersion)(Co,"0.12.3"),(0,ae.registerVersion)(Co,"0.12.3","esm2017")}();const ro="analytics",Wr="firebase_id",qo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",La="https://www.googletagmanager.com/gtag/js",mn=new _e.Yd("@firebase/analytics");function Pr(A){return Promise.all(A.map(R=>R.catch(B=>B)))}function Va(A,R){const B=document.createElement("script");B.src=`${La}?l=${A}&id=${R}`,B.async=!0,document.head.appendChild(B)}function Ko(A,R,B,J,pe,Ce){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,p.Z)(function*(A,R,B,J,pe,Ce){const He=J[pe];try{if(He)yield R[He];else{const jt=(yield Pr(B)).find(Bt=>Bt.measurementId===pe);jt&&(yield R[jt.appId])}}catch(Ot){mn.error(Ot)}A("config",pe,Ce)})).apply(this,arguments)}function T(A,R,B,J,pe){return k.apply(this,arguments)}function k(){return(k=(0,p.Z)(function*(A,R,B,J,pe){try{let Ce=[];if(pe&&pe.send_to){let He=pe.send_to;Array.isArray(He)||(He=[He]);const Ot=yield Pr(B);for(const jt of He){const Bt=Ot.find(tn=>tn.measurementId===jt),un=Bt&&R[Bt.appId];if(!un){Ce=[];break}Ce.push(un)}}0===Ce.length&&(Ce=Object.values(R)),yield Promise.all(Ce),A("event",J,pe||{})}catch(Ce){mn.error(Ce)}})).apply(this,arguments)}function ee(A){const R=window.document.getElementsByTagName("script");for(const B of Object.values(R))if(B.src&&B.src.includes(La)&&B.src.includes(A))return B;return null}const Ne=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),En=new class Sn{constructor(R={},B=1e3){this.throttleMetadata=R,this.intervalMillis=B}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,B){this.throttleMetadata[R]=B}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function sn(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function yr(A){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(A){var R;const{appId:B,apiKey:J}=A,pe={method:"GET",headers:sn(J)},Ce=qo.replace("{app-id}",B),He=yield fetch(Ce,pe);if(200!==He.status&&304!==He.status){let Ot="";try{const jt=yield He.json();null!==(R=jt.error)&&void 0!==R&&R.message&&(Ot=jt.error.message)}catch{}throw Ne.create("config-fetch-failed",{httpStatus:He.status,responseMessage:Ot})}return He.json()})).apply(this,arguments)}function Yn(A){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(A,R=En,B){const{appId:J,apiKey:pe,measurementId:Ce}=A.options;if(!J)throw Ne.create("no-app-id");if(!pe){if(Ce)return{measurementId:Ce,appId:J};throw Ne.create("no-api-key")}const He=R.getThrottleMetadata(J)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ot=new so;return setTimeout((0,p.Z)(function*(){Ot.abort()}),void 0!==B?B:6e4),Ei({appId:J,apiKey:pe,measurementId:Ce},He,Ot,R)})).apply(this,arguments)}function Ei(A,R,B){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(A,{throttleEndTimeMillis:R,backoffCount:B},J,pe=En){var Ce;const{appId:He,measurementId:Ot}=A;try{yield wi(J,R)}catch(jt){if(Ot)return mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${jt?.message}]`),{appId:He,measurementId:Ot};throw jt}try{const jt=yield yr(A);return pe.deleteThrottleMetadata(He),jt}catch(jt){const Bt=jt;if(!io(Bt)){if(pe.deleteThrottleMetadata(He),Ot)return mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${Bt?.message}]`),{appId:He,measurementId:Ot};throw jt}const un=503===Number(null===(Ce=Bt?.customData)||void 0===Ce?void 0:Ce.httpStatus)?(0,ue.$s)(B,pe.intervalMillis,30):(0,ue.$s)(B,pe.intervalMillis),tn={throttleEndTimeMillis:Date.now()+un,backoffCount:B+1};return pe.setThrottleMetadata(He,tn),mn.debug(`Calling attemptFetch again in ${un} millis`),Ei(A,tn,J,pe)}})).apply(this,arguments)}function wi(A,R){return new Promise((B,J)=>{const pe=Math.max(R-Date.now(),0),Ce=setTimeout(B,pe);A.addEventListener(()=>{clearTimeout(Ce),J(Ne.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function io(A){if(!(A instanceof ue.ZR&&A.customData))return!1;const R=Number(A.customData.httpStatus);return 429===R||500===R||503===R||504===R}class so{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}let is,Fs;function So(){return(So=(0,p.Z)(function*(A,R,B,J,pe){if(pe&&pe.global)A("event",B,J);else{const Ce=yield R;A("event",B,Object.assign(Object.assign({},J),{send_to:Ce}))}})).apply(this,arguments)}function ha(A){Fs=A}function Ua(A){is=A}function Xo(){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(){if(!(0,ue.hl)())return mn.warn(Ne.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(A){return mn.warn(Ne.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function ao(){return(ao=(0,p.Z)(function*(A,R,B,J,pe,Ce,He){var Ot;const jt=Yn(A);jt.then(Kr=>{B[Kr.measurementId]=Kr.appId,A.options.measurementId&&Kr.measurementId!==A.options.measurementId&&mn.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Kr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kr=>mn.error(Kr)),R.push(jt);const Bt=Xo().then(Kr=>{if(Kr)return J.getId()}),[un,tn]=yield Promise.all([jt,Bt]);ee(Ce)||Va(Ce,un.measurementId),Fs&&(pe("consent","default",Fs),ha(void 0)),pe("js",new Date);const Bs=null!==(Ot=He?.config)&&void 0!==Ot?Ot:{};return Bs.origin="firebase",Bs.update=!0,null!=tn&&(Bs[Wr]=tn),pe("config",un.measurementId,Bs),is&&(pe("set",is),Ua(void 0)),un.measurementId})).apply(this,arguments)}class su{constructor(R){this.app=R}_delete(){return delete Bi[this.app.options.appId],Promise.resolve()}}let Bi={},ou=[];const uo={};let fa,di,Hn="dataLayer",vs=!1;function ja(A,R,B){!function ic(){const A=[];if((0,ue.ru)()&&A.push("This is a browser extension environment."),(0,ue.zI)()||A.push("Cookies are not available."),A.length>0){const R=A.map((J,pe)=>`(${pe+1}) ${J}`).join(" "),B=Ne.create("invalid-analytics-context",{errorInfo:R});mn.warn(B.message)}}();const J=A.options.appId;if(!J)throw Ne.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Ne.create("no-api-key");mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Bi[J])throw Ne.create("already-exists",{id:J});if(!vs){!function Zo(A){let R=[];Array.isArray(window[A])?R=window[A]:window[A]=R}(Hn);const{wrappedGtag:Ce,gtagCore:He}=function H(A,R,B,J,pe){let Ce=function(...He){window[J].push(arguments)};return window[pe]&&"function"==typeof window[pe]&&(Ce=window[pe]),window[pe]=function x(A,R,B,J){function Ce(){return(Ce=(0,p.Z)(function*(He,Ot,jt){try{"event"===He?yield T(A,R,B,Ot,jt):"config"===He?yield Ko(A,R,B,J,Ot,jt):"consent"===He?A("consent","update",jt):A("set",Ot)}catch(Bt){mn.error(Bt)}})).apply(this,arguments)}return function pe(He,Ot,jt){return Ce.apply(this,arguments)}}(Ce,A,R,B),{gtagCore:Ce,wrappedGtag:window[pe]}}(Bi,ou,uo,Hn,"gtag");di=Ce,fa=He,vs=!0}return Bi[J]=function Au(A,R,B,J,pe,Ce,He){return ao.apply(this,arguments)}(A,ou,uo,R,fa,Hn,B),new su(A)}function xo(){return ji.apply(this,arguments)}function ji(){return(ji=(0,p.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const Pn="@firebase/analytics";!function Ls(){(0,ae._registerComponent)(new fe.wA(ro,(R,{options:B})=>ja(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),B),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function A(R){try{const B=R.getProvider(ro).getImmediate();return{logEvent:(J,pe,Ce)=>function zc(A,R,B,J){A=(0,ue.m9)(A),function ss(A,R,B,J,pe){return So.apply(this,arguments)}(di,Bi[A.app.options.appId],R,B,J).catch(pe=>mn.error(pe))}(B,J,pe,Ce)}}catch(B){throw Ne.create("interop-component-reg-failed",{reason:B})}},"PRIVATE")),(0,ae.registerVersion)(Pn,"0.9.3"),(0,ae.registerVersion)(Pn,"0.9.3","esm2017")}();var Mo=V(4408),ga=V(7565);const ir=new class uu extends ga.v{}(class Ha extends Mo.o{constructor(R,B){super(R,B),this.scheduler=R,this.work=B}schedule(R,B=0){return B>0?super.schedule(R,B):(this.delay=B,this.state=R,this.scheduler.flush(this),this)}execute(R,B){return B>0||this.closed?super.execute(R,B):this._execute(R,B)}requestAsyncId(R,B,J=0){return null!=J&&J>0||null==J&&this.delay>0?super.requestAsyncId(R,B,J):(R.flush(this),0)}});var Ru=V(4986),$i=V(8505),Tr=V(9468),Ga=V(5363);const za=new I.GfV("7.5.0"),Ou="__angularfire_symbol__analyticsIsSupportedValue",hi="__angularfire_symbol__analyticsIsSupported",Vs="__angularfire_symbol__remoteConfigIsSupportedValue",Oo="__angularfire_symbol__remoteConfigIsSupported",Qi="__angularfire_symbol__messagingIsSupportedValue",Us="__angularfire_symbol__messagingIsSupported";function v(A,R,B){if(R){if(1===R.length)return R[0];const Ce=R.filter(He=>He.app===B);if(1===Ce.length)return Ce[0]}return B.container.getProvider(A).getImmediate({optional:!0})}globalThis[hi]||(globalThis[hi]=xo().then(A=>globalThis[Ou]=A).catch(()=>globalThis[Ou]=!1)),globalThis[Us]||(globalThis[Us]=Ps().then(A=>globalThis[Qi]=A).catch(()=>globalThis[Qi]=!1)),globalThis[Oo]||(globalThis[Oo]=Hc().then(A=>globalThis[Vs]=A).catch(()=>globalThis[Vs]=!1));const _=(A,R)=>{const B=R?[R]:(0,j.C6)(),J=[];return B.forEach(pe=>{pe.container.getProvider(A).instances.forEach(He=>{J.includes(He)||J.push(He)})}),J};function m(){}class C{constructor(R,B=ir){this.zone=R,this.delegate=B}now(){return this.delegate.now()}schedule(R,B,J){const pe=this.zone;return this.delegate.schedule(function(He){pe.runGuarded(()=>{R.apply(this,[He])})},B,J)}}class O{constructor(R){this.zone=R,this.task=null}call(R,B){const J=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",m,{},m,m)),B.pipe((0,$i.b)({next:J,complete:J,error:J})).subscribe(R).add(J)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let U=(()=>{class A{constructor(B){this.ngZone=B,this.outsideAngular=B.runOutsideAngular(()=>new C(Zone.current)),this.insideAngular=B.run(()=>new C(Zone.current,Ru.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(B){return new(B||A)(I.LFG(I.R0b))},A.\u0275prov=I.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function z(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function wn(A){return z(),function vr(A){return function(B){return(B=B.lift(new O(A.ngZone))).pipe((0,Tr.R)(A.outsideAngular),(0,Ga.Q)(A.insideAngular))}}(z())(A)}},2722:(yt,Se,V)=>{V.d(Se,{$:()=>mr,A:()=>te,B:()=>Ge,G:()=>$o,H:()=>jn,J:()=>gr,L:()=>se,M:()=>sa,N:()=>vo,P:()=>Ru,Q:()=>Ta,R:()=>pa,T:()=>Xa,U:()=>Ni,V:()=>Zi,W:()=>Ki,X:()=>Eo,Y:()=>Rr,Z:()=>Ms,_:()=>zo,a:()=>fn,a0:()=>xa,a1:()=>aa,a2:()=>Jt,a3:()=>tu,a4:()=>ps,a5:()=>ua,a6:()=>Wo,a7:()=>Re,a8:()=>Ra,a9:()=>Oa,aA:()=>X,aB:()=>jt,aC:()=>Dt,aD:()=>Le,aE:()=>wr,aI:()=>sn,aL:()=>Pi,aa:()=>Li,ab:()=>Io,ac:()=>Do,af:()=>rs,ag:()=>Vi,ah:()=>nu,ak:()=>As,al:()=>To,an:()=>La,ao:()=>Yo,ap:()=>Fe,aq:()=>q,ar:()=>St,as:()=>Qe,at:()=>Gl,au:()=>ws,av:()=>ve,aw:()=>ke,ax:()=>ge,ay:()=>Kr,az:()=>nt,b:()=>Ne,c:()=>Qi,d:()=>Wa,e:()=>cu,f:()=>vr,g:()=>J,h:()=>A,i:()=>Ba,j:()=>He,k:()=>Ff,l:()=>sc,m:()=>zl,o:()=>ye,r:()=>Mo,s:()=>Bl,u:()=>ir});var I=V(5861),j=V(2090),p=V(9681),ae=V(1877),ue=V(655),fe=V(4859);const ye={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},te={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ge=function ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function Je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vt=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new ae.Yd("@firebase/auth");function ze(E,...d){We.logLevel<=ae.in.ERROR&&We.error(`Auth (${p.SDK_VERSION}): ${E}`,...d)}function Qe(E,...d){throw it(E,...d)}function ke(E,...d){return it(E,...d)}function Ue(E,d,g){const b=Object.assign(Object.assign({},at()),{[d]:g});return new j.LL("auth","Firebase",b).create(d,{appName:E.name})}function je(E,d,g){if(!(d instanceof g))throw g.name!==d.constructor.name&&Qe(E,"argument-error"),Ue(E,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function it(E,...d){if("string"!=typeof E){const g=d[0],b=[...d.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(g,...b)}return vt.create(E,...d)}function ge(E,d,...g){if(!E)throw it(d,...g)}function Te(E){const d="INTERNAL ASSERTION FAILED: "+E;throw ze(d),new Error(d)}function Fe(E,d){E||Te(d)}const ct=new Map;function nt(E){Fe(E instanceof Function,"Expected a class definition");let d=ct.get(E);return d?(Fe(d instanceof E,"Instance stored in cache mismatched with class"),d):(d=new E,ct.set(E,d),d)}function be(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Me(){return"http:"===Pe()||"https:"===Pe()}function Pe(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class et{constructor(d,g){this.shortDelay=d,this.longDelay=g,Fe(g>d,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function $e(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Me()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lt(E,d){Fe(E.emulator,"Emulator should always be set here");const{url:g}=E.emulator;return d?`${g}${d.startsWith("/")?d.slice(1):d}`:g}class ht{static initialize(d,g,b){this.fetchImpl=d,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},me=new et(3e4,6e4);function Tt(E,d){return E.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:E.tenantId}):d}function mt(E,d,g,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,I.Z)(function*(E,d,g,b,P={}){return pn(E,P,(0,I.Z)(function*(){let L={},Q={};b&&("GET"===d?Q=b:L={body:JSON.stringify(b)});const Be=(0,j.xO)(Object.assign({key:E.config.apiKey},Q)).slice(1),Mt=yield E._getAdditionalHeaders();return Mt["Content-Type"]="application/json",E.languageCode&&(Mt["X-Firebase-Locale"]=E.languageCode),ht.fetch()(Dn(E,E.config.apiHost,g,Be),Object.assign({method:d,headers:Mt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function pn(E,d,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,I.Z)(function*(E,d,g){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},Cn),d);try{const P=new Lt(E),L=yield Promise.race([g(),P.promise]);P.clearNetworkTimeout();const Q=yield L.json();if("needConfirmation"in Q)throw Vn(E,"account-exists-with-different-credential",Q);if(L.ok&&!("errorMessage"in Q))return Q;{const Be=L.ok?Q.errorMessage:Q.error.message,[Mt,$t]=Be.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Mt)throw Vn(E,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Mt)throw Vn(E,"email-already-in-use",Q);if("USER_DISABLED"===Mt)throw Vn(E,"user-disabled",Q);const yn=b[Mt]||Mt.toLowerCase().replace(/[_\s]+/g,"-");if($t)throw Ue(E,yn,$t);Qe(E,yn)}}catch(P){if(P instanceof j.ZR)throw P;Qe(E,"network-request-failed")}})).apply(this,arguments)}function ln(E,d,g,b){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,I.Z)(function*(E,d,g,b,P={}){const L=yield mt(E,d,g,b,P);return"mfaPendingCredential"in L&&Qe(E,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Dn(E,d,g,b){const P=`${d}${g}?${b}`;return E.config.emulator?lt(E.config,P):`${E.config.apiScheme}://${P}`}class Lt{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(ke(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(E,d,g){const b={appName:E.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const P=ke(E,d,b);return P.customData._tokenResponse=g,P}function fr(){return(fr=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function xn(E,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function gt(E,d){return sr.apply(this,arguments)}function sr(){return(sr=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Er(E){if(E)try{const d=new Date(Number(E));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Yt(){return(Yt=(0,I.Z)(function*(E,d=!1){const g=(0,j.m9)(E),b=yield g.getIdToken(d),P=Nt(b);ge(P&&P.exp&&P.auth_time&&P.iat,g.auth,"internal-error");const L="object"==typeof P.firebase?P.firebase:void 0,Q=L?.sign_in_provider;return{claims:P,token:b,authTime:Er(Pt(P.auth_time)),issuedAtTime:Er(Pt(P.iat)),expirationTime:Er(Pt(P.exp)),signInProvider:Q||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Pt(E){return 1e3*Number(E)}function Nt(E){const[d,g,b]=E.split(".");if(void 0===d||void 0===g||void 0===b)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,j.tV)(g);return P?JSON.parse(P):(ze("Failed to decode base64 JWT payload"),null)}catch(P){return ze("Caught error parsing JWT payload as JSON",P?.toString()),null}}function _n(E,d){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,I.Z)(function*(E,d,g=!1){if(g)return d;try{return yield d}catch(b){throw b instanceof j.ZR&&$n(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function $n({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Br{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var g;if(d){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const P=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(d=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(d);this.timerId=setTimeout((0,I.Z)(function*(){yield g.iteration()}),b)}iteration(){var d=this;return(0,I.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&d.schedule(!0))}d.schedule()})()}}class Xn{constructor(d,g){this.createdAt=d,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Er(this.lastLoginAt),this.creationTime=Er(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ti(E){return nn.apply(this,arguments)}function nn(){return(nn=(0,I.Z)(function*(E){var d;const g=E.auth,b=yield E.getIdToken(),P=yield _n(E,gt(g,{idToken:b}));ge(P?.users.length,g,"internal-error");const L=P.users[0];E._notifyReloadListener(L);const Q=null!==(d=L.providerUserInfo)&&void 0!==d&&d.length?Un(L.providerUserInfo):[],Be=Ut(E.providerData,Q),yn=!!E.isAnonymous&&!(E.email&&L.passwordHash||Be?.length),Sr={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Be,metadata:new Xn(L.createdAt,L.lastLoginAt),isAnonymous:yn};Object.assign(E,Sr)})).apply(this,arguments)}function qt(){return(qt=(0,I.Z)(function*(E){const d=(0,j.m9)(E);yield ti(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ut(E,d){return[...E.filter(b=>!d.some(P=>P.providerId===b.providerId)),...d]}function Un(E){return E.map(d=>{var{providerId:g}=d,b=(0,ue._T)(d,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ve(){return(Ve=(0,I.Z)(function*(E,d){const g=yield pn(E,{},(0,I.Z)(function*(){const b=(0,j.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:P,apiKey:L}=E.config,Q=Dn(E,P,"/v1/token",`key=${L}`),Be=yield E._getAdditionalHeaders();return Be["Content-Type"]="application/x-www-form-urlencoded",ht.fetch()(Q,{method:"POST",headers:Be,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ge(d.idToken,"internal-error"),ge(typeof d.idToken<"u","internal-error"),ge(typeof d.refreshToken<"u","internal-error");const g="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function zt(E){const d=Nt(E);return ge(d,"internal-error"),ge(typeof d.exp<"u","internal-error"),ge(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,g)}getToken(d,g=!1){var b=this;return(0,I.Z)(function*(){return ge(!b.accessToken||b.refreshToken,d,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(d,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,g){var b=this;return(0,I.Z)(function*(){const{accessToken:P,refreshToken:L,expiresIn:Q}=yield function ut(E,d){return Ve.apply(this,arguments)}(d,g);b.updateTokensAndExpiration(P,L,Number(Q))})()}updateTokensAndExpiration(d,g,b){this.refreshToken=g||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(d,g){const{refreshToken:b,accessToken:P,expirationTime:L}=g,Q=new _t;return b&&(ge("string"==typeof b,"internal-error",{appName:d}),Q.refreshToken=b),P&&(ge("string"==typeof P,"internal-error",{appName:d}),Q.accessToken=P),L&&(ge("number"==typeof L,"internal-error",{appName:d}),Q.expirationTime=L),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return Te("not implemented")}}function kt(E,d){ge("string"==typeof E||typeof E>"u","internal-error",{appName:d})}class Ht{constructor(d){var{uid:g,auth:b,stsTokenManager:P}=d,L=(0,ue._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Br(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new Xn(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(d){var g=this;return(0,I.Z)(function*(){const b=yield _n(g,g.stsTokenManager.getToken(g.auth,d));return ge(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(d){return function tr(E){return Yt.apply(this,arguments)}(this,d)}reload(){return function ni(E){return qt.apply(this,arguments)}(this)}_assign(d){this!==d&&(ge(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(g=>Object.assign({},g)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new Ht(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,g=!1){var b=this;return(0,I.Z)(function*(){let P=!1;d.idToken&&d.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(d),P=!0),g&&(yield ti(b)),yield b.auth._persistUserIfCurrent(b),P&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var d=this;return(0,I.Z)(function*(){const g=yield d.getIdToken();return yield _n(d,function _r(E,d){return fr.apply(this,arguments)}(d.auth,{idToken:g})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,g){var b,P,L,Q,Be,Mt,$t,yn;const Sr=null!==(b=g.displayName)&&void 0!==b?b:void 0,No=null!==(P=g.email)&&void 0!==P?P:void 0,ya=null!==(L=g.phoneNumber)&&void 0!==L?L:void 0,dc=null!==(Q=g.photoURL)&&void 0!==Q?Q:void 0,Vu=null!==(Be=g.tenantId)&&void 0!==Be?Be:void 0,Wl=null!==(Mt=g._redirectEventId)&&void 0!==Mt?Mt:void 0,ch=null!==($t=g.createdAt)&&void 0!==$t?$t:void 0,lh=null!==(yn=g.lastLoginAt)&&void 0!==yn?yn:void 0,{uid:rn,emailVerified:Uu,isAnonymous:dh,providerData:lr,stsTokenManager:Gt}=g;ge(rn&&Gt,d,"internal-error");const Yc=_t.fromJSON(this.name,Gt);ge("string"==typeof rn,d,"internal-error"),kt(Sr,d.name),kt(No,d.name),ge("boolean"==typeof Uu,d,"internal-error"),ge("boolean"==typeof dh,d,"internal-error"),kt(ya,d.name),kt(dc,d.name),kt(Vu,d.name),kt(Wl,d.name),kt(ch,d.name),kt(lh,d.name);const Rn=new Ht({uid:rn,auth:d,email:No,emailVerified:Uu,displayName:Sr,isAnonymous:dh,photoURL:dc,phoneNumber:ya,tenantId:Vu,stsTokenManager:Yc,createdAt:ch,lastLoginAt:lh});return lr&&Array.isArray(lr)&&(Rn.providerData=lr.map(Vf=>Object.assign({},Vf))),Wl&&(Rn._redirectEventId=Wl),Rn}static _fromIdTokenResponse(d,g,b=!1){return(0,I.Z)(function*(){const P=new _t;P.updateFromServerResponse(g);const L=new Ht({uid:g.localId,auth:d,stsTokenManager:P,isAnonymous:b});return yield ti(L),L})()}}const se=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(g,b){var P=this;return(0,I.Z)(function*(){P.storage[g]=b})()}_get(g){var b=this;return(0,I.Z)(function*(){const P=b.storage[g];return void 0===P?null:P})()}_remove(g){var b=this;return(0,I.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return E.type="NONE",E})();function X(E,d,g){return`firebase:${E}:${d}:${g}`}class le{constructor(d,g,b){this.persistence=d,this.auth=g,this.userKey=b;const{config:P,name:L}=this.auth;this.fullUserKey=X(this.userKey,P.apiKey,L),this.fullPersistenceKey=X("persistence",P.apiKey,L),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,I.Z)(function*(){const g=yield d.persistence._get(d.fullUserKey);return g?Ht._fromJSON(d.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var g=this;return(0,I.Z)(function*(){if(g.persistence===d)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=d,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,g,b="authUser"){return(0,I.Z)(function*(){if(!g.length)return new le(nt(se),d,b);const P=(yield Promise.all(g.map(function(){var $t=(0,I.Z)(function*(yn){if(yield yn._isAvailable())return yn});return function(yn){return $t.apply(this,arguments)}}()))).filter($t=>$t);let L=P[0]||nt(se);const Q=X(b,d.config.apiKey,d.name);let Be=null;for(const $t of g)try{const yn=yield $t._get(Q);if(yn){const Sr=Ht._fromJSON(d,yn);$t!==L&&(Be=Sr),L=$t;break}}catch{}const Mt=P.filter($t=>$t._shouldAllowMigration);return L._shouldAllowMigration&&Mt.length?(L=Mt[0],Be&&(yield L._set(Q,Be.toJSON())),yield Promise.all(g.map(function(){var $t=(0,I.Z)(function*(yn){if(yn!==L)try{yield yn._remove(Q)}catch{}});return function(yn){return $t.apply(this,arguments)}}())),new le(L,d,b)):new le(L,d,b)})()}}function Y(E){const d=E.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Ke(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(G(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(oe(d))return"Blackberry";if(ie(d))return"Webos";if(K(d))return"Safari";if((d.includes("chrome/")||De(d))&&!d.includes("edge/"))return"Chrome";if(St(d))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function G(E=(0,j.z$)()){return/firefox\//i.test(E)}function K(E=(0,j.z$)()){const d=E.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function De(E=(0,j.z$)()){return/crios\//i.test(E)}function Ke(E=(0,j.z$)()){return/iemobile/i.test(E)}function St(E=(0,j.z$)()){return/android/i.test(E)}function oe(E=(0,j.z$)()){return/blackberry/i.test(E)}function ie(E=(0,j.z$)()){return/webos/i.test(E)}function q(E=(0,j.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function ve(E=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Zt(E=(0,j.z$)()){return q(E)||St(E)||ie(E)||oe(E)||/windows phone/i.test(E)||Ke(E)}function rr(E,d=[]){let g;switch(E){case"Browser":g=Y((0,j.z$)());break;case"Worker":g=`${Y((0,j.z$)())}-${E}`;break;default:g=E}const b=d.length?d.join(","):"FirebaseCore-web";return`${g}/JsCore/${p.SDK_VERSION}/${b}`}class ts{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,g){const b=L=>new Promise((Q,Be)=>{try{Q(d(L))}catch(Mt){Be(Mt)}});b.onAbort=g,this.queue.push(b);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(d){var g=this;return(0,I.Z)(function*(){if(g.auth.currentUser===d)return;const b=[];try{for(const P of g.queue)yield P(d),P.onAbort&&b.push(P.onAbort)}catch(P){b.reverse();for(const L of b)try{L()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:P?.message})}})()}}class Gi{constructor(d,g,b){this.app=d,this.heartbeatServiceProvider=g,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ai(this),this.idTokenSubscription=new Ai(this),this.beforeStateQueue=new ts(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(d,g){var b=this;return g&&(this._popupRedirectResolver=nt(g)),this._initializationPromise=this.queue((0,I.Z)(function*(){var P,L;if(!b._deleted&&(b.persistenceManager=yield le.create(b,d),!b._deleted)){if(null!==(P=b._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(L=b.currentUser)||void 0===L?void 0:L.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,I.Z)(function*(){if(d._deleted)return;const g=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||g){if(d.currentUser&&g&&d.currentUser.uid===g.uid)return d._currentUser._assign(g),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(g,!0)}})()}initializeCurrentUser(d){var g=this;return(0,I.Z)(function*(){var b;const P=yield g.assertedPersistence.getCurrentUser();let L=P,Q=!1;if(d&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Be=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,Mt=L?._redirectEventId,$t=yield g.tryRedirectSignIn(d);(!Be||Be===Mt)&&$t?.user&&(L=$t.user,Q=!0)}if(!L)return g.directlySetCurrentUser(null);if(!L._redirectEventId){if(Q)try{yield g.beforeStateQueue.runMiddleware(L)}catch(Be){L=P,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Be))}return L?g.reloadAndSetCurrentUserOrClear(L):g.directlySetCurrentUser(null)}return ge(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===L._redirectEventId?g.directlySetCurrentUser(L):g.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(d){var g=this;return(0,I.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,d,!0)}catch{yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(d){var g=this;return(0,I.Z)(function*(){try{yield ti(d)}catch(b){if("auth/network-request-failed"!==b?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Xe(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var d=this;return(0,I.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var g=this;return(0,I.Z)(function*(){const b=d?(0,j.m9)(d):null;return b&&ge(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(d,g=!1){var b=this;return(0,I.Z)(function*(){if(!b._deleted)return d&&ge(b.tenantId===d.tenantId,b,"tenant-id-mismatch"),g||(yield b.beforeStateQueue.runMiddleware(d)),b.queue((0,I.Z)(function*(){yield b.directlySetCurrentUser(d),b.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,I.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var g=this;return this.queue((0,I.Z)(function*(){yield g.assertedPersistence.setPersistence(nt(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new j.LL("auth","Firebase",d())}onAuthStateChanged(d,g,b){return this.registerStateListener(this.authStateSubscription,d,g,b)}beforeAuthStateChanged(d,g){return this.beforeStateQueue.pushCallback(d,g)}onIdTokenChanged(d,g,b){return this.registerStateListener(this.idTokenSubscription,d,g,b)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,g){var b=this;return(0,I.Z)(function*(){const P=yield b.getOrInitRedirectPersistenceManager(g);return null===d?P.removeCurrentUser():P.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var g=this;return(0,I.Z)(function*(){if(!g.redirectPersistenceManager){const b=d&&nt(d)||g._popupRedirectResolver;ge(b,g,"argument-error"),g.redirectPersistenceManager=yield le.create(g,[nt(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(d){var g=this;return(0,I.Z)(function*(){var b,P;return g._isInitialized&&(yield g.queue((0,I.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===d?g._currentUser:(null===(P=g.redirectUser)||void 0===P?void 0:P._redirectEventId)===d?g.redirectUser:null})()}_persistUserIfCurrent(d){var g=this;return(0,I.Z)(function*(){if(d===g.currentUser)return g.queue((0,I.Z)(function*(){return g.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,g,b,P){if(this._deleted)return()=>{};const L="function"==typeof g?g:g.next.bind(g),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return ge(Q,this,"internal-error"),Q.then(()=>L(this.currentUser)),"function"==typeof g?d.addObserver(g,b,P):d.addObserver(g)}directlySetCurrentUser(d){var g=this;return(0,I.Z)(function*(){g.currentUser&&g.currentUser!==d&&g._currentUser._stopProactiveRefresh(),d&&g.isProactiveRefreshEnabled&&d._startProactiveRefresh(),g.currentUser=d,d?yield g.assertedPersistence.setCurrentUser(d):yield g.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=rr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,I.Z)(function*(){var g;const b={"X-Client-Version":d.clientVersion};d.app.options.appId&&(b["X-Firebase-gmpid"]=d.app.options.appId);const P=yield null===(g=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return P&&(b["X-Firebase-Client"]=P),b})()}}function wr(E){return(0,j.m9)(E)}class Ai{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,j.ne)(g=>this.observer=g)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $o(E,d,g){const b=wr(E);ge(b._canInitEmulator,b,"emulator-config-failed"),ge(/^https?:\/\//.test(d),b,"invalid-emulator-scheme");const P=!!g?.disableWarnings,L=qs(d),{host:Q,port:Be}=function Ho(E){const d=qs(E),g=/(\/\/)?([^?#/]+)/.exec(E.substr(d.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(b);if(P){const L=P[1];return{host:L,port:go(b.substr(L.length+1))}}{const[L,Q]=b.split(":");return{host:L,port:go(Q)}}}(d);b.config.emulator={url:`${L}//${Q}${null===Be?"":`:${Be}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Q,port:Be,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function bn(){function E(){const d=document.createElement("p"),g=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function qs(E){const d=E.indexOf(":");return d<0?"":E.substr(0,d+1)}function go(E){if(!E)return null;const d=Number(E);return isNaN(d)?null:d}class jn{constructor(d,g){this.providerId=d,this.signInMethod=g}toJSON(){return Te("not implemented")}_getIdTokenResponse(d){return Te("not implemented")}_linkToIdToken(d,g){return Te("not implemented")}_getReauthenticationResolver(d){return Te("not implemented")}}function or(E,d){return zn.apply(this,arguments)}function zn(){return(zn=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:resetPassword",Tt(E,d))})).apply(this,arguments)}function ri(E,d){return ui.apply(this,arguments)}function ui(){return(ui=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function It(E,d){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:update",Tt(E,d))})).apply(this,arguments)}function Mr(){return(Mr=(0,I.Z)(function*(E,d){return ln(E,"POST","/v1/accounts:signInWithPassword",Tt(E,d))})).apply(this,arguments)}function xi(E,d){return ar.apply(this,arguments)}function ar(){return(ar=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:sendOobCode",Tt(E,d))})).apply(this,arguments)}function zi(E,d){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,I.Z)(function*(E,d){return xi(E,d)})).apply(this,arguments)}function ra(E,d){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,I.Z)(function*(E,d){return xi(E,d)})).apply(this,arguments)}function on(E,d){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,I.Z)(function*(E,d){return xi(E,d)})).apply(this,arguments)}function Ts(E,d){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,I.Z)(function*(E,d){return xi(E,d)})).apply(this,arguments)}function ur(){return(ur=(0,I.Z)(function*(E,d){return ln(E,"POST","/v1/accounts:signInWithEmailLink",Tt(E,d))})).apply(this,arguments)}function qi(){return(qi=(0,I.Z)(function*(E,d){return ln(E,"POST","/v1/accounts:signInWithEmailLink",Tt(E,d))})).apply(this,arguments)}class jr extends jn{constructor(d,g,b,P=null){super("password",b),this._email=d,this._password=g,this._tenantId=P}static _fromEmailAndPassword(d,g){return new jr(d,g,"password")}static _fromEmailAndCode(d,g,b=null){return new jr(d,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(d){var g=this;return(0,I.Z)(function*(){switch(g.signInMethod){case"password":return function Wn(E,d){return Mr.apply(this,arguments)}(d,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ir(E,d){return ur.apply(this,arguments)}(d,{email:g._email,oobCode:g._password});default:Qe(d,"internal-error")}})()}_linkToIdToken(d,g){var b=this;return(0,I.Z)(function*(){switch(b.signInMethod){case"password":return ri(d,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function us(E,d){return qi.apply(this,arguments)}(d,{idToken:g,email:b._email,oobCode:b._password});default:Qe(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Ri(E,d){return ba.apply(this,arguments)}function ba(){return(ba=(0,I.Z)(function*(E,d){return ln(E,"POST","/v1/accounts:signInWithIdp",Tt(E,d))})).apply(this,arguments)}class gr extends jn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const g=new gr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(g.idToken=d.idToken),d.accessToken&&(g.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(g.nonce=d.nonce),d.pendingToken&&(g.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(g.accessToken=d.oauthToken,g.secret=d.oauthTokenSecret):Qe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:b,signInMethod:P}=g,L=(0,ue._T)(g,["providerId","signInMethod"]);if(!b||!P)return null;const Q=new gr(b,P);return Q.idToken=L.idToken||void 0,Q.accessToken=L.accessToken||void 0,Q.secret=L.secret,Q.nonce=L.nonce,Q.pendingToken=L.pendingToken||null,Q}_getIdTokenResponse(d){return Ri(d,this.buildRequest())}_linkToIdToken(d,g){const b=this.buildRequest();return b.idToken=g,Ri(d,b)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,Ri(d,g)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),d.postBody=(0,j.xO)(g)}return d}}function ia(E,d){return mo.apply(this,arguments)}function mo(){return(mo=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:sendVerificationCode",Tt(E,d))})).apply(this,arguments)}function Ss(){return(Ss=(0,I.Z)(function*(E,d){return ln(E,"POST","/v1/accounts:signInWithPhoneNumber",Tt(E,d))})).apply(this,arguments)}function $r(){return($r=(0,I.Z)(function*(E,d){const g=yield ln(E,"POST","/v1/accounts:signInWithPhoneNumber",Tt(E,d));if(g.temporaryProof)throw Vn(E,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const rc={USER_NOT_FOUND:"user-not-found"};function ii(){return(ii=(0,I.Z)(function*(E,d){return ln(E,"POST","/v1/accounts:signInWithPhoneNumber",Tt(E,Object.assign(Object.assign({},d),{operation:"REAUTH"})),rc)})).apply(this,arguments)}class cs extends jn{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,g){return new cs({verificationId:d,verificationCode:g})}static _fromTokenResponse(d,g){return new cs({phoneNumber:d,temporaryProof:g})}_getIdTokenResponse(d){return function yo(E,d){return Ss.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,g){return function ci(E,d){return $r.apply(this,arguments)}(d,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Oi(E,d){return ii.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:g,verificationId:b,verificationCode:P}=this.params;return d&&g?{temporaryProof:d,phoneNumber:g}:{sessionInfo:b,code:P}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:g,verificationCode:b,phoneNumber:P,temporaryProof:L}=d;return b||g||P||L?new cs({verificationId:g,verificationCode:b,phoneNumber:P,temporaryProof:L}):null}}class Hr{constructor(d){var g,b,P,L,Q,Be;const Mt=(0,j.zd)((0,j.pd)(d)),$t=null!==(g=Mt.apiKey)&&void 0!==g?g:null,yn=null!==(b=Mt.oobCode)&&void 0!==b?b:null,Sr=function Ca(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=Mt.mode)&&void 0!==P?P:null);ge($t&&yn&&Sr,"argument-error"),this.apiKey=$t,this.operation=Sr,this.code=yn,this.continueUrl=null!==(L=Mt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(Q=Mt.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(Be=Mt.tenantId)&&void 0!==Be?Be:null}static parseLink(d){const g=function Ja(E){const d=(0,j.zd)((0,j.pd)(E)).link,g=d?(0,j.zd)((0,j.pd)(d)).deep_link_id:null,b=(0,j.zd)((0,j.pd)(E)).deep_link_id;return(b?(0,j.zd)((0,j.pd)(b)).link:null)||b||g||d||E}(d);try{return new Hr(g)}catch{return null}}}let sa=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(g,b){return jr._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const P=Hr.parseLink(b);return ge(P,"argument-error"),jr._fromEmailAndCode(g,P.code,P.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class ns{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Ks extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ni extends Ks{static credentialFromJSON(d){const g="string"==typeof d?JSON.parse(d):d;return ge("providerId"in g&&"signInMethod"in g,"argument-error"),gr._fromParams(g)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ge(d.idToken||d.accessToken,"argument-error"),gr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ni.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ni.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:P,pendingToken:L,nonce:Q,providerId:Be}=d;if(!b&&!P&&!g&&!L||!Be)return null;try{return new Ni(Be)._credential({idToken:g,accessToken:b,nonce:Q,pendingToken:L})}catch{return null}}}let vo=(()=>{class E extends Ks{constructor(){super("facebook.com")}static credential(g){return gr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return E.credential(g.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Ta=(()=>{class E extends Ks{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return gr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:P}=g;if(!b&&!P)return null;try{return E.credential(b,P)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Xa=(()=>{class E extends Ks{constructor(){super("github.com")}static credential(g){return gr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return E.credential(g.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Pi extends jn{constructor(d,g){super(d,d),this.pendingToken=g}_getIdTokenResponse(d){return Ri(d,this.buildRequest())}_linkToIdToken(d,g){const b=this.buildRequest();return b.idToken=g,Ri(d,b)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,Ri(d,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:b,signInMethod:P,pendingToken:L}=g;return b&&P&&L&&b===P?new Pi(b,L):null}static _create(d,g){return new Pi(d,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zi extends ns{constructor(d){ge(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Zi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Zi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const g=Pi.fromJSON(d);return ge(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:g,providerId:b}=d;if(!g||!b)return null;try{return Pi._create(b,g)}catch{return null}}}let Ki=(()=>{class E extends Ks{constructor(){super("twitter.com")}static credential(g,b){return gr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:P}=g;if(!b||!P)return null;try{return E.credential(b,P)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function eu(E,d){return ls.apply(this,arguments)}function ls(){return(ls=(0,I.Z)(function*(E,d){return ln(E,"POST","/v1/accounts:signUp",Tt(E,d))})).apply(this,arguments)}class mi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,g,b,P=!1){return(0,I.Z)(function*(){const L=yield Ht._fromIdTokenResponse(d,b,P),Q=_o(b);return new mi({user:L,providerId:Q,_tokenResponse:b,operationType:g})})()}static _forOperation(d,g,b){return(0,I.Z)(function*(){yield d._updateTokensIfNecessary(b,!0);const P=_o(b);return new mi({user:d,providerId:P,_tokenResponse:b,operationType:g})})()}}function _o(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Eo(E){return Go.apply(this,arguments)}function Go(){return(Go=(0,I.Z)(function*(E){var d;const g=wr(E);if(yield g._initializationPromise,null!==(d=g.currentUser)&&void 0!==d&&d.isAnonymous)return new mi({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield eu(g,{returnSecureToken:!0}),P=yield mi._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(P.user),P})).apply(this,arguments)}class ds extends j.ZR{constructor(d,g,b,P){var L;super(g.code,g.message),this.operationType=b,this.user=P,Object.setPrototypeOf(this,ds.prototype),this.customData={appName:d.name,tenantId:null!==(L=d.tenantId)&&void 0!==L?L:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(d,g,b,P){return new ds(d,g,b,P)}}function Aa(E,d,g,b){return("reauthenticate"===d?g._getReauthenticationResolver(E):g._getIdTokenResponse(E)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?ds._fromErrorAndOperation(E,L,d,b):L})}function hs(E){return new Set(E.map(({providerId:d})=>d).filter(d=>!!d))}function As(E,d){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,I.Z)(function*(E,d){const g=(0,j.m9)(E);yield xs(!0,g,d);const{providerUserInfo:b}=yield xn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[d]}),P=hs(b||[]);return g.providerData=g.providerData.filter(L=>P.has(L.providerId)),P.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Qs(E,d){return oa.apply(this,arguments)}function oa(){return(oa=(0,I.Z)(function*(E,d,g=!1){const b=yield _n(E,d._linkToIdToken(E.auth,yield E.getIdToken()),g);return mi._forOperation(E,"link",b)})).apply(this,arguments)}function xs(E,d,g){return wo.apply(this,arguments)}function wo(){return(wo=(0,I.Z)(function*(E,d,g){yield ti(d);const P=!1===E?"provider-already-linked":"no-such-provider";ge(hs(d.providerData).has(g)===E,d.auth,P)})).apply(this,arguments)}function Gr(E,d){return At.apply(this,arguments)}function At(){return(At=(0,I.Z)(function*(E,d,g=!1){const{auth:b}=E,P="reauthenticate";try{const L=yield _n(E,Aa(b,P,d,E),g);ge(L.idToken,b,"internal-error");const Q=Nt(L.idToken);ge(Q,b,"internal-error");const{sub:Be}=Q;return ge(E.uid===Be,b,"user-mismatch"),mi._forOperation(E,P,L)}catch(L){throw"auth/user-not-found"===L?.code&&Qe(b,"user-mismatch"),L}})).apply(this,arguments)}function fs(E,d){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,I.Z)(function*(E,d,g=!1){const b="signIn",P=yield Aa(E,b,d),L=yield mi._fromIdTokenResponse(E,b,P);return g||(yield E._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Rr(E,d){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,I.Z)(function*(E,d){return fs(wr(E),d)})).apply(this,arguments)}function Ms(E,d){return cr.apply(this,arguments)}function cr(){return(cr=(0,I.Z)(function*(E,d){const g=(0,j.m9)(E);return yield xs(!1,g,d.providerId),Qs(g,d)})).apply(this,arguments)}function zo(E,d){return Js.apply(this,arguments)}function Js(){return(Js=(0,I.Z)(function*(E,d){return Gr((0,j.m9)(E),d)})).apply(this,arguments)}function zr(E,d){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,I.Z)(function*(E,d){return ln(E,"POST","/v1/accounts:signInWithCustomToken",Tt(E,d))})).apply(this,arguments)}function mr(E,d){return ki.apply(this,arguments)}function ki(){return(ki=(0,I.Z)(function*(E,d){const g=wr(E),b=yield zr(g,{token:d,returnSecureToken:!0}),P=yield mi._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(P.user),P})).apply(this,arguments)}class gn{constructor(d,g){this.factorId=d,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(d,g){return"phoneInfo"in g?yi._fromServerResponse(d,g):Qe(d,"internal-error")}}class yi extends gn{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,g){return new yi(g)}}function Dr(E,d,g){var b;ge((null===(b=g.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),ge(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),d.continueUrl=g.url,d.dynamicLinkDomain=g.dynamicLinkDomain,d.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ge(g.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),d.iOSBundleId=g.iOS.bundleId),g.android&&(ge(g.android.packageName.length>0,E,"missing-android-pkg-name"),d.androidInstallApp=g.android.installApp,d.androidMinimumVersionCode=g.android.minimumVersion,d.androidPackageName=g.android.packageName)}function xa(E,d,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),P={requestType:"PASSWORD_RESET",email:d};g&&Dr(b,P,g),yield ra(b,P)})).apply(this,arguments)}function aa(E,d,g){return er.apply(this,arguments)}function er(){return(er=(0,I.Z)(function*(E,d,g){yield or((0,j.m9)(E),{oobCode:d,newPassword:g})})).apply(this,arguments)}function Jt(E,d){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,I.Z)(function*(E,d){yield It((0,j.m9)(E),{oobCode:d})})).apply(this,arguments)}function tu(E,d){return eo.apply(this,arguments)}function eo(){return(eo=(0,I.Z)(function*(E,d){const g=(0,j.m9)(E),b=yield or(g,{oobCode:d}),P=b.requestType;switch(ge(P,g,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ge(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ge(b.mfaInfo,g,"internal-error");default:ge(b.email,g,"internal-error")}let L=null;return b.mfaInfo&&(L=gn._fromServerResponse(wr(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:L},operation:P}})).apply(this,arguments)}function ps(E,d){return br.apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(E,d){const{data:g}=yield tu((0,j.m9)(E),d);return g.email})).apply(this,arguments)}function ua(E,d,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,I.Z)(function*(E,d,g){const b=wr(E),P=yield eu(b,{returnSecureToken:!0,email:d,password:g}),L=yield mi._fromIdTokenResponse(b,"signIn",P);return yield b._updateCurrentUser(L.user),L})).apply(this,arguments)}function Wo(E,d,g){return Rr((0,j.m9)(E),sa.credential(d,g))}function Re(E,d,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),P={requestType:"EMAIL_SIGNIN",email:d};ge(g.handleCodeInApp,b,"argument-error"),g&&Dr(b,P,g),yield on(b,P)})).apply(this,arguments)}function Ra(E,d){return"EMAIL_SIGNIN"===Hr.parseLink(d)?.operation}function Oa(E,d,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),P=sa.credentialWithLink(d,g||be());return ge(P._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Rr(b,P)})).apply(this,arguments)}function ca(E,d){return gs.apply(this,arguments)}function gs(){return(gs=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:createAuthUri",Tt(E,d))})).apply(this,arguments)}function Li(E,d){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,I.Z)(function*(E,d){const b={identifier:d,continueUri:Me()?be():"http://localhost"},{signinMethods:P}=yield ca((0,j.m9)(E),b);return P||[]})).apply(this,arguments)}function Io(E,d){return to.apply(this,arguments)}function to(){return(to=(0,I.Z)(function*(E,d){const g=(0,j.m9)(E),P={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};d&&Dr(g.auth,P,d);const{email:L}=yield zi(g.auth,P);L!==E.email&&(yield E.reload())})).apply(this,arguments)}function Do(E,d,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:d};g&&Dr(b.auth,L,g);const{email:Q}=yield Ts(b.auth,L);Q!==E.email&&(yield E.reload())})).apply(this,arguments)}function Nr(E,d){return si.apply(this,arguments)}function si(){return(si=(0,I.Z)(function*(E,d){return mt(E,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function rs(E,d){return ms.apply(this,arguments)}function ms(){return(ms=(0,I.Z)(function*(E,{displayName:d,photoURL:g}){if(void 0===d&&void 0===g)return;const b=(0,j.m9)(E),L={idToken:yield b.getIdToken(),displayName:d,photoUrl:g,returnSecureToken:!0},Q=yield _n(b,Nr(b.auth,L));b.displayName=Q.displayName||null,b.photoURL=Q.photoUrl||null;const Be=b.providerData.find(({providerId:Mt})=>"password"===Mt);Be&&(Be.displayName=b.displayName,Be.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Vi(E,d){return bo((0,j.m9)(E),d,null)}function nu(E,d){return bo((0,j.m9)(E),null,d)}function bo(E,d,g){return Co.apply(this,arguments)}function Co(){return(Co=(0,I.Z)(function*(E,d,g){const{auth:b}=E,L={idToken:yield E.getIdToken(),returnSecureToken:!0};d&&(L.email=d),g&&(L.password=g);const Q=yield _n(E,ri(b,L));yield E._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class ys{constructor(d,g,b={}){this.isNewUser=d,this.providerId=g,this.profile=b}}class Ns extends ys{constructor(d,g,b,P){super(d,g,b),this.username=P}}class Na extends ys{constructor(d,g){super(d,"facebook.com",g)}}class Ps extends Ns{constructor(d,g){super(d,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class no extends ys{constructor(d,g){super(d,"google.com",g)}}class Pa extends Ns{constructor(d,g,b){super(d,"twitter.com",g,b)}}function To(E){const{user:d,_tokenResponse:g}=E;return d.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function la(E){var d,g;if(!E)return null;const{providerId:b}=E,P=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},L=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&E?.idToken){const Q=null===(g=null===(d=Nt(E.idToken))||void 0===d?void 0:d.firebase)||void 0===g?void 0:g.sign_in_provider;if(Q)return new ys(L,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!b)return null;switch(b){case"facebook.com":return new Na(L,P);case"github.com":return new Ps(L,P);case"google.com":return new no(L,P);case"twitter.com":return new Pa(L,P,E.screenName||null);case"custom":case"anonymous":return new ys(L,null);default:return new ys(L,b,P)}}(g)}class Tn{constructor(d,g,b){this.type=d,this.credential=g,this.auth=b}static _fromIdtoken(d,g){return new Tn("enroll",d,g)}static _fromMfaPendingCredential(d){return new Tn("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var g,b;if(d?.multiFactorSession){if(null!==(g=d.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Tn._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(b=d.multiFactorSession)&&void 0!==b&&b.idToken)return Tn._fromIdtoken(d.multiFactorSession.idToken)}return null}}class qo{constructor(d,g,b){this.session=d,this.hints=g,this.signInResolver=b}static _fromError(d,g){const b=wr(d),P=g.customData._serverResponse,L=(P.mfaInfo||[]).map(Be=>gn._fromServerResponse(b,Be));ge(P.mfaPendingCredential,b,"internal-error");const Q=Tn._fromMfaPendingCredential(P.mfaPendingCredential);return new qo(Q,L,function(){var Be=(0,I.Z)(function*(Mt){const $t=yield Mt._process(b,Q);delete P.mfaInfo,delete P.mfaPendingCredential;const yn=Object.assign(Object.assign({},P),{idToken:$t.idToken,refreshToken:$t.refreshToken});switch(g.operationType){case"signIn":const Sr=yield mi._fromIdTokenResponse(b,g.operationType,yn);return yield b._updateCurrentUser(Sr.user),Sr;case"reauthenticate":return ge(g.user,b,"internal-error"),mi._forOperation(g.user,g.operationType,yn);default:Qe(b,"internal-error")}});return function(Mt){return Be.apply(this,arguments)}}())}resolveSignIn(d){var g=this;return(0,I.Z)(function*(){return g.signInResolver(d)})()}}function La(E,d){var g;const b=(0,j.m9)(E),P=d;return ge(d.customData.operationType,b,"argument-error"),ge(null===(g=P.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),qo._fromError(b,P)}function mn(E,d){return mt(E,"POST","/v2/accounts/mfaEnrollment:start",Tt(E,d))}class Zo{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>gn._fromServerResponse(d.auth,b)))})}static _fromUser(d){return new Zo(d)}getSession(){var d=this;return(0,I.Z)(function*(){return Tn._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,g){var b=this;return(0,I.Z)(function*(){const P=d,L=yield b.getSession(),Q=yield _n(b.user,P._process(b.user.auth,L,g));return yield b.user._updateTokensIfNecessary(Q),b.user.reload()})()}unenroll(d){var g=this;return(0,I.Z)(function*(){const b="string"==typeof d?d:d.uid,P=yield g.user.getIdToken();try{const L=yield _n(g.user,function Va(E,d){return mt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Tt(E,d))}(g.user.auth,{idToken:P,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==b),yield g.user._updateTokensIfNecessary(L),yield g.user.reload()}catch(L){throw L}})()}}const Ko=new WeakMap;function Yo(E){const d=(0,j.m9)(E);return Ko.has(d)||Ko.set(d,Zo._fromUser(d)),Ko.get(d)}const T="__sak";class k{constructor(d,g){this.storageRetriever=d,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(T,"1"),this.storage.removeItem(T),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,g){return this.storage.setItem(d,JSON.stringify(g)),Promise.resolve()}_get(d){const g=this.storage.getItem(d);return Promise.resolve(g?JSON.parse(g):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ne=(()=>{class E extends k{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function x(){const E=(0,j.z$)();return K(E)||q(E)}()&&function nr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Zt(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const P=this.storage.getItem(b),L=this.localCache[b];P!==L&&g(b,L,P)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((Be,Mt,$t)=>{this.notifyListeners(Be,$t)});const P=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Be=this.storage.getItem(P);if(g.newValue!==Be)null!==g.newValue?this.storage.setItem(P,g.newValue):this.storage.removeItem(P);else if(this.localCache[P]===g.newValue&&!b)return}const L=()=>{const Be=this.storage.getItem(P);!b&&this.localCache[P]===Be||this.notifyListeners(P,Be)},Q=this.storage.getItem(P);!function st(){return(0,j.w1)()&&10===document.documentMode}()||Q===g.newValue||g.newValue===g.oldValue?L():setTimeout(L,10)}notifyListeners(g,b){this.localCache[g]=b;const P=this.listeners[g];if(P)for(const L of Array.from(P))L(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var P=()=>super._set,L=this;return(0,I.Z)(function*(){yield P().call(L,g,b),L.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,P=this;return(0,I.Z)(function*(){const L=yield b().call(P,g);return P.localCache[g]=JSON.stringify(L),L})()}_remove(g){var b=()=>super._remove,P=this;return(0,I.Z)(function*(){yield b().call(P,g),delete P.localCache[g]})()}}return E.type="LOCAL",E})(),fn=(()=>{class E extends k{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return E.type="SESSION",E})();let En=(()=>{class E{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(L=>L.isListeningto(g));if(b)return b;const P=new E(g);return this.receivers.push(P),P}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,I.Z)(function*(){const P=g,{eventId:L,eventType:Q,data:Be}=P.data,Mt=b.handlersMap[Q];if(!Mt?.size)return;P.ports[0].postMessage({status:"ack",eventId:L,eventType:Q});const $t=Array.from(Mt).map(function(){var Sr=(0,I.Z)(function*(No){return No(P.origin,Be)});return function(No){return Sr.apply(this,arguments)}}()),yn=yield function Sn(E){return Promise.all(E.map(function(){var d=(0,I.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return d.apply(this,arguments)}}()))}($t);P.ports[0].postMessage({status:"done",eventId:L,eventType:Q,response:yn})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function sn(E="",d=10){let g="";for(let b=0;b<d;b++)g+=Math.floor(10*Math.random());return E+g}class yr{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,g,b=50){var P=this;return(0,I.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let Q,Be;return new Promise((Mt,$t)=>{const yn=sn("",20);L.port1.start();const Sr=setTimeout(()=>{$t(new Error("unsupported_event"))},b);Be={messageChannel:L,onMessage(No){const ya=No;if(ya.data.eventId===yn)switch(ya.data.status){case"ack":clearTimeout(Sr),Q=setTimeout(()=>{$t(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Mt(ya.data.response);break;default:clearTimeout(Sr),clearTimeout(Q),$t(new Error("invalid_response"))}}},P.handlers.add(Be),L.port1.addEventListener("message",Be.onMessage),P.target.postMessage({eventType:d,eventId:yn,data:g},[L.port2])}).finally(()=>{Be&&P.removeMessageHandler(Be)})})()}}function Xt(){return window}function _i(){return typeof Xt().WorkerGlobalScope<"u"&&"function"==typeof Xt().importScripts}function qr(){return(qr=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const so="firebaseLocalStorageDb",ss="firebaseLocalStorage",So="fbase_key";class Ui{constructor(d){this.request=d}toPromise(){return new Promise((d,g)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Qo(E,d){return E.transaction([ss],d?"readwrite":"readonly").objectStore(ss)}function ks(){const E=indexedDB.open(so,1);return new Promise((d,g)=>{E.addEventListener("error",()=>{g(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(ss,{keyPath:So})}catch(P){g(P)}}),E.addEventListener("success",(0,I.Z)(function*(){const b=E.result;b.objectStoreNames.contains(ss)?d(b):(b.close(),yield function Ao(){const E=indexedDB.deleteDatabase(so);return new Ui(E).toPromise()}(),d(yield ks()))}))})}function Jo(E,d,g){return li.apply(this,arguments)}function li(){return(li=(0,I.Z)(function*(E,d,g){const b=Qo(E,!0).put({[So]:d,value:g});return new Ui(b).toPromise()})).apply(this,arguments)}function oo(){return(oo=(0,I.Z)(function*(E,d){const g=Qo(E,!1).get(d),b=yield new Ui(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Fs(E,d){const g=Qo(E,!0).delete(d);return new Ui(g).toPromise()}const Ba=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,I.Z)(function*(){return g.db||(g.db=yield ks()),g.db})()}_withRetries(g){var b=this;return(0,I.Z)(function*(){let P=0;for(;;)try{const L=yield b._openDb();return yield g(L)}catch(L){if(P++>3)throw L;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,I.Z)(function*(){return _i()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,I.Z)(function*(){g.receiver=En._getInstance(function io(){return _i()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,I.Z)(function*(P,L){return{keyProcessed:(yield g._poll()).includes(L.key)}});return function(P,L){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,I.Z)(function*(P,L){return["keyChanged"]});return function(P,L){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,I.Z)(function*(){var b,P;if(g.activeServiceWorker=yield function Ei(){return qr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new yr(g.activeServiceWorker);const L=yield g.sender._send("ping",{},800);L&&null!==(b=L[0])&&void 0!==b&&b.fulfilled&&null!==(P=L[0])&&void 0!==P&&P.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,I.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function wi(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ks();return yield Jo(g,T,"1"),yield Fs(g,T),!0}catch{}return!1})()}_withPendingWrite(g){var b=this;return(0,I.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var P=this;return(0,I.Z)(function*(){return P._withPendingWrite((0,I.Z)(function*(){return yield P._withRetries(L=>Jo(L,g,b)),P.localCache[g]=b,P.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,I.Z)(function*(){const P=yield b._withRetries(L=>function Ii(E,d){return oo.apply(this,arguments)}(L,g));return b.localCache[g]=P,P})()}_remove(g){var b=this;return(0,I.Z)(function*(){return b._withPendingWrite((0,I.Z)(function*(){return yield b._withRetries(P=>Fs(P,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,I.Z)(function*(){const b=yield g._withRetries(Q=>{const Be=Qo(Q,!1).getAll();return new Ui(Be).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const P=[],L=new Set;for(const{fbase_key:Q,value:Be}of b)L.add(Q),JSON.stringify(g.localCache[Q])!==JSON.stringify(Be)&&(g.notifyListeners(Q,Be),P.push(Q));for(const Q of Object.keys(g.localCache))g.localCache[Q]&&!L.has(Q)&&(g.notifyListeners(Q,null),P.push(Q));return P})()}notifyListeners(g,b){this.localCache[g]=b;const P=this.listeners[g];if(P)for(const L of Array.from(P))L(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Au(E,d){return mt(E,"POST","/v2/accounts/mfaSignIn:start",Tt(E,d))}function Bi(){return(Bi=(0,I.Z)(function*(E){return(yield mt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function uo(E){return new Promise((d,g)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=d,b.onerror=P=>{const L=ke("internal-error");L.customData=P,g(L)},b.type="text/javascript",b.charset="UTF-8",function ou(){var E,d;return null!==(d=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==d?d:document}().appendChild(b)})}function Hn(E){return`__${E}${Math.floor(1e6*Math.random())}`}const di=1e12;class vs{constructor(d){this.auth=d,this.counter=di,this._widgets=new Map}render(d,g){const b=this.counter;return this._widgets.set(b,new Mu(d,this.auth.name,g||{})),this.counter++,b}reset(d){var g;const b=d||di;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(d){var g;return(null===(g=this._widgets.get(d||di))||void 0===g?void 0:g.getResponse())||""}execute(d){var g=this;return(0,I.Z)(function*(){var b;return null===(b=g._widgets.get(d||di))||void 0===b||b.execute(),""})()}}class Mu{constructor(d,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof d?document.getElementById(d):d;ge(P,"argument-error",{appName:g}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ic(E){const d=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<E;b++)d.push(g.charAt(Math.floor(Math.random()*g.length)));return d.join("")}(50);const{callback:d,"expired-callback":g}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ja=Hn("rcb"),Gc=new et(3e4,6e4);class xo{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Xt().grecaptcha)||void 0===d||!d.render)}load(d,g=""){return ge(function ji(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(g),d,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Xt().grecaptcha):new Promise((b,P)=>{const L=Xt().setTimeout(()=>{P(ke(d,"network-request-failed"))},Gc.get());Xt()[ja]=()=>{Xt().clearTimeout(L),delete Xt()[ja];const Be=Xt().grecaptcha;if(!Be)return void P(ke(d,"internal-error"));const Mt=Be.render;Be.render=($t,yn)=>{const Sr=Mt($t,yn);return this.counter++,Sr},this.hostLanguage=g,b(Be)},uo(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:ja,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(L),P(ke(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var g;return!(null===(g=Xt().grecaptcha)||void 0===g||!g.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ea{load(d){return(0,I.Z)(function*(){return new vs(d)})()}clearedOneInstance(){}}const _s="recaptcha",Yi={theme:"light",type:"image"};class pa{constructor(d,g=Object.assign({},Yi),b){this.parameters=g,this.type=_s,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wr(b),this.isInvisible="invisible"===this.parameters.size,ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof d?document.getElementById(d):d;ge(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ea:new xo,this.validateStartingState()}verify(){var d=this;return(0,I.Z)(function*(){d.assertNotDestroyed();const g=yield d.render(),b=d.getAssertedRecaptcha();return b.getResponse(g)||new Promise(L=>{const Q=Be=>{Be&&(d.tokenChangeListeners.delete(Q),L(Be))};d.tokenChangeListeners.add(Q),d.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof d)d(g);else if("string"==typeof d){const b=Xt()[d];"function"==typeof b&&b(g)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,I.Z)(function*(){if(yield d.init(),!d.widgetId){let g=d.container;if(!d.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}d.widgetId=d.getAssertedRecaptcha().render(g,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,I.Z)(function*(){ge(Me()&&!_i(),d.auth,"internal-error"),yield function $a(){let E=null;return new Promise(d=>{"complete"!==document.readyState?(E=()=>d(),window.addEventListener("load",E)):d()}).catch(d=>{throw E&&window.removeEventListener("load",E),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const g=yield function su(E){return Bi.apply(this,arguments)}(d.auth);ge(g,d.auth,"internal-error"),d.parameters.sitekey=g})()}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class zc{constructor(d,g){this.verificationId=d,this.onConfirmation=g}confirm(d){const g=cs._fromVerification(this.verificationId,d);return this.onConfirmation(g)}}function Bl(E,d,g){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,I.Z)(function*(E,d,g){const b=wr(E),P=yield ga(b,d,(0,j.m9)(g));return new zc(P,L=>Rr(b,L))})).apply(this,arguments)}function sc(E,d,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);yield xs(!1,b,"phone");const P=yield ga(b.auth,d,(0,j.m9)(g));return new zc(P,L=>Ms(b,L))})).apply(this,arguments)}function Mo(E,d,g){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E),P=yield ga(b.auth,d,(0,j.m9)(g));return new zc(P,L=>zo(b,L))})).apply(this,arguments)}function ga(E,d,g){return uu.apply(this,arguments)}function uu(){return(uu=(0,I.Z)(function*(E,d,g){var b;const P=yield g.verify();try{let L;if(ge("string"==typeof P,E,"argument-error"),ge(g.type===_s,E,"argument-error"),L="string"==typeof d?{phoneNumber:d}:d,"session"in L){const Q=L.session;if("phoneNumber"in L)return ge("enroll"===Q.type,E,"internal-error"),(yield mn(E,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{ge("signin"===Q.type,E,"internal-error");const Be=(null===(b=L.multiFactorHint)||void 0===b?void 0:b.uid)||L.multiFactorUid;return ge(Be,E,"missing-multi-factor-info"),(yield Au(E,{mfaPendingCredential:Q.credential,mfaEnrollmentId:Be,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield ia(E,{phoneNumber:L.phoneNumber,recaptchaToken:P});return Q}}finally{g._reset()}})).apply(this,arguments)}function ir(E,d){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,I.Z)(function*(E,d){yield Qs((0,j.m9)(E),d)})).apply(this,arguments)}let Ru=(()=>{class E{constructor(g){this.providerId=E.PROVIDER_ID,this.auth=wr(g)}verifyPhoneNumber(g,b){return ga(this.auth,g,(0,j.m9)(b))}static credential(g,b){return cs._fromVerification(g,b)}static credentialFromResult(g){return E.credentialFromTaggedObject(g)}static credentialFromError(g){return E.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:P}=g;return b&&P?cs._fromTokenResponse(b,P):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function $i(E,d){return d?nt(d):(ge(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Tr extends jn{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Ri(d,this._buildIdpRequest())}_linkToIdToken(d,g){return Ri(d,this._buildIdpRequest(g))}_getReauthenticationResolver(d){return Ri(d,this._buildIdpRequest())}_buildIdpRequest(d){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(g.idToken=d),g}}function Ga(E){return fs(E.auth,new Tr(E),E.bypassAuthState)}function za(E){const{auth:d,user:g}=E;return ge(g,d,"internal-error"),Gr(g,new Tr(E),E.bypassAuthState)}function Ou(E){return hi.apply(this,arguments)}function hi(){return(hi=(0,I.Z)(function*(E){const{auth:d,user:g}=E;return ge(g,d,"internal-error"),Qs(g,new Tr(E),E.bypassAuthState)})).apply(this,arguments)}class Vs{constructor(d,g,b,P,L=!1){this.auth=d,this.resolver=b,this.user=P,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var d=this;return new Promise(function(){var g=(0,I.Z)(function*(b,P){d.pendingPromise={resolve:b,reject:P};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(L){d.reject(L)}});return function(b,P){return g.apply(this,arguments)}}())}onAuthEvent(d){var g=this;return(0,I.Z)(function*(){const{urlResponse:b,sessionId:P,postBody:L,tenantId:Q,error:Be,type:Mt}=d;if(Be)return void g.reject(Be);const $t={auth:g.auth,requestUri:b,sessionId:P,tenantId:Q||void 0,postBody:L||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Mt)($t))}catch(yn){g.reject(yn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Ga;case"linkViaPopup":case"linkViaRedirect":return Ou;case"reauthViaPopup":case"reauthViaRedirect":return za;default:Qe(this.auth,"internal-error")}}resolve(d){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oo=new et(2e3,1e4);function Qi(E,d,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,I.Z)(function*(E,d,g){const b=wr(E);je(E,d,ns);const P=$i(b,g);return new v(b,"signInViaPopup",d,P).executeNotNull()})).apply(this,arguments)}function cu(E,d,g){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);je(b.auth,d,ns);const P=$i(b.auth,g);return new v(b.auth,"reauthViaPopup",d,P,b).executeNotNull()})).apply(this,arguments)}function Wa(E,d,g){return jl.apply(this,arguments)}function jl(){return(jl=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);je(b.auth,d,ns);const P=$i(b.auth,g);return new v(b.auth,"linkViaPopup",d,P,b).executeNotNull()})).apply(this,arguments)}let v=(()=>{class E extends Vs{constructor(g,b,P,L,Q){super(g,b,L,Q),this.provider=P,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var g=this;return(0,I.Z)(function*(){const b=yield g.execute();return ge(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,I.Z)(function*(){Fe(1===g.filter.length,"Popup operations only handle one event");const b=sn();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(P=>{g.reject(P)}),g.resolver._isIframeWebStorageSupported(g.auth,P=>{P||g.reject(ke(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,P;this.pollId=null!==(P=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Oo.get())};g()}}return E.currentPopupAction=null,E})();const m=new Map;class C extends Vs{constructor(d,g,b=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var d=()=>super.execute,g=this;return(0,I.Z)(function*(){let b=m.get(g.auth._key());if(!b){try{const L=(yield function O(E,d){return U.apply(this,arguments)}(g.resolver,g.auth))?yield d().call(g):null;b=()=>Promise.resolve(L)}catch(P){b=()=>Promise.reject(P)}m.set(g.auth._key(),b)}return g.bypassAuthState||m.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(d){var g=()=>super.onAuthEvent,b=this;return(0,I.Z)(function*(){if("signInViaRedirect"===d.type)return g().call(b,d);if("unknown"!==d.type){if(d.eventId){const P=yield b.auth._redirectUserForId(d.eventId);if(P)return b.user=P,g().call(b,d);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function U(){return(U=(0,I.Z)(function*(E,d){const g=wn(d),b=Ct(E);if(!(yield b._isAvailable()))return!1;const P="true"===(yield b._get(g));return yield b._remove(g),P})).apply(this,arguments)}function z(E,d){return he.apply(this,arguments)}function he(){return(he=(0,I.Z)(function*(E,d){return Ct(E)._set(wn(d),"true")})).apply(this,arguments)}function Le(){m.clear()}function Dt(E,d){m.set(E._key(),d)}function Ct(E){return nt(E._redirectPersistence)}function wn(E){return X("pendingRedirect",E.config.apiKey,E.name)}function vr(E,d,g){return function Ji(E,d,g){return Zr.apply(this,arguments)}(E,d,g)}function Zr(){return(Zr=(0,I.Z)(function*(E,d,g){const b=wr(E);je(E,d,ns),yield b._initializationPromise;const P=$i(b,g);return yield z(P,b),P._openRedirect(b,d,"signInViaRedirect")})).apply(this,arguments)}function A(E,d,g){return function R(E,d,g){return B.apply(this,arguments)}(E,d,g)}function B(){return(B=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);je(b.auth,d,ns),yield b.auth._initializationPromise;const P=$i(b.auth,g);yield z(P,b.auth);const L=yield un(b);return P._openRedirect(b.auth,d,"reauthViaRedirect",L)})).apply(this,arguments)}function J(E,d,g){return function pe(E,d,g){return Ce.apply(this,arguments)}(E,d,g)}function Ce(){return(Ce=(0,I.Z)(function*(E,d,g){const b=(0,j.m9)(E);je(b.auth,d,ns),yield b.auth._initializationPromise;const P=$i(b.auth,g);yield xs(!1,b,d.providerId),yield z(P,b.auth);const L=yield un(b);return P._openRedirect(b.auth,d,"linkViaRedirect",L)})).apply(this,arguments)}function He(E,d){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,I.Z)(function*(E,d){return yield wr(E)._initializationPromise,jt(E,d,!1)})).apply(this,arguments)}function jt(E,d){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,I.Z)(function*(E,d,g=!1){const b=wr(E),P=$i(b,d),Q=yield new C(b,P,g).execute();return Q&&!g&&(delete Q.user._redirectEventId,yield b._persistUserIfCurrent(Q.user),yield b._setRedirectUser(null,d)),Q})).apply(this,arguments)}function un(E){return tn.apply(this,arguments)}function tn(){return(tn=(0,I.Z)(function*(E){const d=sn(`${E.uid}:::`);return E._redirectEventId=d,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),d})).apply(this,arguments)}class Kr{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(d,b)&&(g=!0,this.sendToConsumer(d,b),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Es(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oc(E);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=d,g=!0)),g}sendToConsumer(d,g){var b;if(d.error&&!oc(d)){const P=(null===(b=d.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(ke(this.auth,P))}else g.onAuthEvent(d)}isEventForConsumer(d,g){const b=null===g.eventId||!!d.eventId&&d.eventId===g.eventId;return g.filter.includes(d.type)&&b}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ma(d))}saveEventToCache(d){this.cachedEventUids.add(ma(d)),this.lastProcessedEventTime=Date.now()}}function ma(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(d=>d).join("-")}function oc({type:E,error:d}){return"unknown"===E&&"auth/no-auth-event"===d?.code}function ws(E){return co.apply(this,arguments)}function co(){return(co=(0,I.Z)(function*(E,d={}){return mt(E,"GET","/v1/projects",d)})).apply(this,arguments)}const qa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ac=/^https?/;function uc(){return(uc=(0,I.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:d}=yield ws(E);for(const g of d)try{if(Xd(g))return}catch{}Qe(E,"unauthorized-domain")})).apply(this,arguments)}function Xd(E){const d=be(),{protocol:g,hostname:b}=new URL(d);if(E.startsWith("chrome-extension://")){const Q=new URL(E);return""===Q.hostname&&""===b?"chrome-extension:"===g&&E.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===g&&Q.hostname===b}if(!ac.test(g))return!1;if(qa.test(E))return b===E;const P=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(b)}const eh=new et(3e4,6e4);function $l(){const E=Xt().___jsl;if(E?.H)for(const d of Object.keys(E.H))if(E.H[d].r=E.H[d].r||[],E.H[d].L=E.H[d].L||[],E.H[d].r=[...E.H[d].L],E.CP)for(let g=0;g<E.CP.length;g++)E.CP[g]=null}let Wc=null;function Pu(E){return Wc=Wc||function bg(E){return new Promise((d,g)=>{var b,P,L;function Q(){$l(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{$l(),g(ke(E,"network-request-failed"))},timeout:eh.get()})}if(null!==(P=null===(b=Xt().gapi)||void 0===b?void 0:b.iframes)&&void 0!==P&&P.Iframe)d(gapi.iframes.getContext());else{if(null===(L=Xt().gapi)||void 0===L||!L.load){const Be=Hn("iframefcb");return Xt()[Be]=()=>{gapi.load?Q():g(ke(E,"network-request-failed"))},uo(`https://apis.google.com/js/api.js?onload=${Be}`).catch(Mt=>g(Mt))}Q()}}).catch(d=>{throw Wc=null,d})}(E),Wc}const Cg=new et(5e3,15e3),Nf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function th(E){const d=E.config;ge(d.authDomain,E,"auth-domain-config-required");const g=d.emulator?lt(d,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:d.apiKey,appName:E.name,v:p.SDK_VERSION},P=Sg.get(E.config.apiHost);P&&(b.eid=P);const L=E._getFrameworks();return L.length&&(b.fw=L.join(",")),`${g}?${(0,j.xO)(b).slice(1)}`}function nh(){return nh=(0,I.Z)(function*(E){const d=yield Pu(E),g=Xt().gapi;return ge(g,E,"internal-error"),d.open({where:document.body,url:th(E),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nf,dontclear:!0},b=>new Promise(function(){var P=(0,I.Z)(function*(L,Q){yield b.restyle({setHideOnLeave:!1});const Be=ke(E,"network-request-failed"),Mt=Xt().setTimeout(()=>{Q(Be)},Cg.get());function $t(){Xt().clearTimeout(Mt),L(b)}b.ping($t).then($t,()=>{Q(Be)})});return function(L,Q){return P.apply(this,arguments)}}()))}),nh.apply(this,arguments)}const ku={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cc{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gl(E,d,g,b,P,L){ge(E.config.authDomain,E,"auth-domain-config-required"),ge(E.config.apiKey,E,"invalid-api-key");const Q={apiKey:E.config.apiKey,appName:E.name,authType:g,redirectUrl:b,v:p.SDK_VERSION,eventId:P};if(d instanceof ns){d.setDefaultLanguage(E.languageCode),Q.providerId=d.providerId||"",(0,j.xb)(d.getCustomParameters())||(Q.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Mt,$t]of Object.entries(L||{}))Q[Mt]=$t}if(d instanceof Ks){const Mt=d.getScopes().filter($t=>""!==$t);Mt.length>0&&(Q.scopes=Mt.join(","))}E.tenantId&&(Q.tid=E.tenantId);const Be=Q;for(const Mt of Object.keys(Be))void 0===Be[Mt]&&delete Be[Mt];return`${function oh({config:E}){return E.emulator?lt(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,j.xO)(Be).slice(1)}`}const Zc="webStorageSupport",Ff=class xg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fn,this._completeRedirectFn=jt,this._overrideRedirectResult=Dt}_openPopup(d,g,b,P){var L=this;return(0,I.Z)(function*(){var Q;Fe(null===(Q=L.eventManagers[d._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const Be=Gl(d,g,b,be(),P);return function Yr(E,d,g,b=500,P=600){const L=Math.max((window.screen.availHeight-P)/2,0).toString(),Q=Math.max((window.screen.availWidth-b)/2,0).toString();let Be="";const Mt=Object.assign(Object.assign({},ku),{width:b.toString(),height:P.toString(),top:L,left:Q}),$t=(0,j.z$)().toLowerCase();g&&(Be=De($t)?"_blank":g),G($t)&&(d=d||"http://localhost",Mt.scrollbars="yes");const yn=Object.entries(Mt).reduce((No,[ya,dc])=>`${No}${ya}=${dc},`,"");if(function Ze(E=(0,j.z$)()){var d;return q(E)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}($t)&&"_self"!==Be)return function Pf(E,d){const g=document.createElement("a");g.href=E,g.target=d;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(d||"",Be),new cc(null);const Sr=window.open(d||"",Be,yn);ge(Sr,E,"popup-blocked");try{Sr.focus()}catch{}return new cc(Sr)}(d,Be,sn())})()}_openRedirect(d,g,b,P){var L=this;return(0,I.Z)(function*(){return yield L._originValidation(d),function Yn(E){Xt().location.href=E}(Gl(d,g,b,be(),P)),new Promise(()=>{})})()}_initialize(d){const g=d._key();if(this.eventManagers[g]){const{manager:P,promise:L}=this.eventManagers[g];return P?Promise.resolve(P):(Fe(L,"If manager is not set, promise should be"),L)}const b=this.initAndGetManager(d);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(d){var g=this;return(0,I.Z)(function*(){const b=yield function Ag(E){return nh.apply(this,arguments)}(d),P=new Kr(d);return b.register("authEvent",L=>(ge(L?.authEvent,d,"invalid-auth-event"),{status:P.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[d._key()]={manager:P},g.iframes[d._key()]=b,P})()}_isIframeWebStorageSupported(d,g){this.iframes[d._key()].send(Zc,{type:Zc},P=>{var L;const Q=null===(L=P?.[0])||void 0===L?void 0:L[Zc];void 0!==Q&&g(!!Q),Qe(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Of(E){return uc.apply(this,arguments)}(d)),this.originValidationPromises[g]}get _shouldInitProactively(){return Zt()||K()||q()}};class ah{constructor(d){this.factorId=d}_process(d,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(d,g.credential,b);case"signin":return this._finalizeSignIn(d,g.credential);default:return Te("unexpected MultiFactorSessionType")}}}class uh extends ah{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new uh(d)}_finalizeEnroll(d,g,b){return function Pr(E,d){return mt(E,"POST","/v2/accounts/mfaEnrollment:finalize",Tt(E,d))}(d,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,g){return function ao(E,d){return mt(E,"POST","/v2/accounts/mfaSignIn:finalize",Tt(E,d))}(d,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zl=(()=>{class E{constructor(){}static assertion(g){return uh._fromCredential(g)}}return E.FACTOR_ID="phone",E})();var Is="@firebase/auth";class Di{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var g=this;return(0,I.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const g=this.auth.onIdTokenChanged(b=>{d(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,g),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const g=this.internalListeners.get(d);g&&(this.internalListeners.delete(d),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function kr(E){(0,p._registerComponent)(new fe.wA("auth",(d,{options:g})=>{const b=d.getProvider("app").getImmediate(),P=d.getProvider("heartbeat"),{apiKey:L,authDomain:Q}=b.options;return((Be,Mt)=>{ge(L&&!L.includes(":"),"invalid-api-key",{appName:Be.name}),ge(!Q?.includes(":"),"argument-error",{appName:Be.name});const $t={apiKey:L,authDomain:Q,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rr(E)},yn=new Gi(Be,Mt,$t);return function dt(E,d){const g=d?.persistence||[],b=(Array.isArray(g)?g:[g]).map(nt);d?.errorMap&&E._updateErrorMap(d.errorMap),E._initializeWithPersistence(b,d?.popupRedirectResolver)}(yn,g),yn})(b,P)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,g,b)=>{d.getProvider("auth-internal").initialize()})),(0,p._registerComponent)(new fe.wA("auth-internal",d=>{const g=wr(d.getProvider("auth").getImmediate());return new Di(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,p.registerVersion)(Is,"0.21.3",function lu(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,p.registerVersion)(Is,"0.21.3","esm2017")}("Browser")},2090:(yt,Se,V)=>{V.d(Se,{$s:()=>_t,BH:()=>Ue,G6:()=>Pe,L:()=>ye,LL:()=>Cn,Pz:()=>ke,Sg:()=>je,UG:()=>Te,US:()=>fe,ZB:()=>te,ZR:()=>ht,aH:()=>Qe,b$:()=>nt,eu:()=>Xe,hl:()=>$e,jU:()=>Fe,m9:()=>an,ne:()=>Yt,pd:()=>Jn,r3:()=>Lt,ru:()=>ct,tV:()=>we,uI:()=>ge,vZ:()=>xn,w1:()=>dt,xO:()=>sr,xb:()=>_r,z$:()=>it,zI:()=>et,zd:()=>Er});const ae=function(se){const X=[];let le=0;for(let Y=0;Y<se.length;Y++){let G=se.charCodeAt(Y);G<128?X[le++]=G:G<2048?(X[le++]=G>>6|192,X[le++]=63&G|128):55296==(64512&G)&&Y+1<se.length&&56320==(64512&se.charCodeAt(Y+1))?(G=65536+((1023&G)<<10)+(1023&se.charCodeAt(++Y)),X[le++]=G>>18|240,X[le++]=G>>12&63|128,X[le++]=G>>6&63|128,X[le++]=63&G|128):(X[le++]=G>>12|224,X[le++]=G>>6&63|128,X[le++]=63&G|128)}return X},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(se,X){if(!Array.isArray(se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const le=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let G=0;G<se.length;G+=3){const K=se[G],De=G+1<se.length,Ke=De?se[G+1]:0,St=G+2<se.length,oe=St?se[G+2]:0;let ve=(15&Ke)<<2|oe>>6,Ze=63&oe;St||(Ze=64,De||(ve=64)),Y.push(le[K>>2],le[(3&K)<<4|Ke>>4],le[ve],le[Ze])}return Y.join("")},encodeString(se,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(se):this.encodeByteArray(ae(se),X)},decodeString(se,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(se):function(se){const X=[];let le=0,Y=0;for(;le<se.length;){const G=se[le++];if(G<128)X[Y++]=String.fromCharCode(G);else if(G>191&&G<224){const K=se[le++];X[Y++]=String.fromCharCode((31&G)<<6|63&K)}else if(G>239&&G<365){const St=((7&G)<<18|(63&se[le++])<<12|(63&se[le++])<<6|63&se[le++])-65536;X[Y++]=String.fromCharCode(55296+(St>>10)),X[Y++]=String.fromCharCode(56320+(1023&St))}else{const K=se[le++],De=se[le++];X[Y++]=String.fromCharCode((15&G)<<12|(63&K)<<6|63&De)}}return X.join("")}(this.decodeStringToByteArray(se,X))},decodeStringToByteArray(se,X){this.init_();const le=X?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let G=0;G<se.length;){const K=le[se.charAt(G++)],Ke=G<se.length?le[se.charAt(G)]:0;++G;const oe=G<se.length?le[se.charAt(G)]:64;++G;const q=G<se.length?le[se.charAt(G)]:64;if(++G,null==K||null==Ke||null==oe||null==q)throw Error();Y.push(K<<2|Ke>>4),64!==oe&&(Y.push(Ke<<4&240|oe>>2),64!==q&&Y.push(oe<<6&192|q))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let se=0;se<this.ENCODED_VALS.length;se++)this.byteToCharMap_[se]=this.ENCODED_VALS.charAt(se),this.charToByteMap_[this.byteToCharMap_[se]]=se,this.byteToCharMapWebSafe_[se]=this.ENCODED_VALS_WEBSAFE.charAt(se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[se]]=se,se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(se)]=se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(se)]=se)}}},ye=function(se){return function(se){const X=ae(se);return fe.encodeByteArray(X,!0)}(se).replace(/\./g,"")},we=function(se){try{return fe.decodeString(se,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function te(se,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===se&&(se={});break;case Array:se=[];break;default:return X}for(const le in X)!X.hasOwnProperty(le)||!ce(le)||(se[le]=te(se[le],X[le]));return se}function ce(se){return"__proto__"!==se}const Oe=()=>{try{return function Je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const se=process.env.__FIREBASE_DEFAULTS__;return se?JSON.parse(se):void 0})()||(()=>{if(typeof document>"u")return;let se;try{se=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const X=se&&we(se[1]);return X&&JSON.parse(X)})()}catch(se){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${se}`)}},Qe=()=>{var se;return null===(se=Oe())||void 0===se?void 0:se.config},ke=se=>{var X;return null===(X=Oe())||void 0===X?void 0:X[`_${se}`]};class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,le)=>{this.resolve=X,this.reject=le})}wrapCallback(X){return(le,Y)=>{le?this.reject(le):this.resolve(Y),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(le):X(le,Y))}}}function je(se,X){if(se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=X||"demo-project",G=se.iat||0,K=se.sub||se.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:G,exp:G+3600,auth_time:G,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},se);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(De)),""].join(".")}function it(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function Te(){var se;const X=null===(se=Oe())||void 0===se?void 0:se.forceEnvironment;if("node"===X)return!0;if("browser"===X)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Fe(){return"object"==typeof self&&self.self===self}function ct(){const se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof se&&void 0!==se.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dt(){const se=it();return se.indexOf("MSIE ")>=0||se.indexOf("Trident/")>=0}function Pe(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){try{return"object"==typeof indexedDB}catch{return!1}}function Xe(){return new Promise((se,X)=>{try{let le=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(Y);G.onsuccess=()=>{G.result.close(),le||self.indexedDB.deleteDatabase(Y),se(!0)},G.onupgradeneeded=()=>{le=!1},G.onerror=()=>{var K;X((null===(K=G.error)||void 0===K?void 0:K.message)||"")}}catch(le){X(le)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ht extends Error{constructor(X,le,Y){super(le),this.code=X,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,ht.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cn.prototype.create)}}class Cn{constructor(X,le,Y){this.service=X,this.serviceName=le,this.errors=Y}create(X,...le){const Y=le[0]||{},G=`${this.service}/${X}`,K=this.errors[X],De=K?function me(se,X){return se.replace(Tt,(le,Y)=>{const G=X[Y];return null!=G?String(G):`<${Y}?>`})}(K,Y):"Error";return new ht(G,`${this.serviceName}: ${De} (${G}).`,Y)}}const Tt=/\{\$([^}]+)}/g;function Lt(se,X){return Object.prototype.hasOwnProperty.call(se,X)}function _r(se){for(const X in se)if(Object.prototype.hasOwnProperty.call(se,X))return!1;return!0}function xn(se,X){if(se===X)return!0;const le=Object.keys(se),Y=Object.keys(X);for(const G of le){if(!Y.includes(G))return!1;const K=se[G],De=X[G];if(pr(K)&&pr(De)){if(!xn(K,De))return!1}else if(K!==De)return!1}for(const G of Y)if(!le.includes(G))return!1;return!0}function pr(se){return null!==se&&"object"==typeof se}function sr(se){const X=[];for(const[le,Y]of Object.entries(se))Array.isArray(Y)?Y.forEach(G=>{X.push(encodeURIComponent(le)+"="+encodeURIComponent(G))}):X.push(encodeURIComponent(le)+"="+encodeURIComponent(Y));return X.length?"&"+X.join("&"):""}function Er(se){const X={};return se.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[G,K]=Y.split("=");X[decodeURIComponent(G)]=decodeURIComponent(K)}}),X}function Jn(se){const X=se.indexOf("?");if(!X)return"";const le=se.indexOf("#",X);return se.substring(X,le>0?le:void 0)}function Yt(se,X){const le=new Pt(se,X);return le.subscribe.bind(le)}class Pt{constructor(X,le){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=le,this.task.then(()=>{X(this)}).catch(Y=>{this.error(Y)})}next(X){this.forEachObserver(le=>{le.next(X)})}error(X){this.forEachObserver(le=>{le.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,le,Y){let G;if(void 0===X&&void 0===le&&void 0===Y)throw new Error("Missing Observer.");G=function zt(se,X){if("object"!=typeof se||null===se)return!1;for(const le of X)if(le in se&&"function"==typeof se[le])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:le,complete:Y},void 0===G.next&&(G.next=_n),void 0===G.error&&(G.error=_n),void 0===G.complete&&(G.complete=_n);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch{}}),this.observers.push(G),K}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let le=0;le<this.observers.length;le++)this.sendOne(le,X)}sendOne(X,le){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{le(this.observers[X])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _n(){}function _t(se,X=1e3,le=2){const Y=X*Math.pow(le,se),G=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+G)}function an(se){return se&&se._delegate?se._delegate:se}},2899:(yt,Se,V)=>{var I=V(1481),j=V(2011),p=V(4650),ae=V(7579),ue=V(9646),fe=V(9751),_e=V(8996),ye=V(6451),we=V(5363),re=V(3900),te=V(4004),ce=V(6063);class Je extends ae.x{constructor(e=1/0,t=1/0,i=ce.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:f}=this;t||(i.push(e),!a&&i.push(l.now()+f)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,l=a.slice();for(let f=0;f<l.length&&!e.closed;f+=i?1:2)e.next(l[f]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<i.length&&i.splice(0,i.length-l),!a){const f=t.now();let w=0;for(let M=1;M<i.length&&i[M]<=f;M+=2)w=M;w&&i.splice(0,w+1)}}}var Ge=V(3099);function at(n,e,t){let i,a=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):i=n??1/0,(0,Ge.B)({connector:()=>new Je(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var vt=V(590),Oe=V(576);function We(n,e){return(0,Oe.m)(e)?(0,re.w)(()=>n,e):(0,re.w)(()=>n)}var ze=V(9468),Qe=V(9300),ke=V(2122),Ue=V(6895);V(259);var me=V(5861),Tt=V(9681),mt=V(4859),xt=V(2090),pn=V(1877);const Ln=new Map,ln={activated:!1,tokenObservers:[]},Kn={initialized:!1,enabled:!1};function Dn(n){return Ln.get(n)||Object.assign({},ln)}function Vn(){return Kn}class Er{constructor(e,t,i,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield function Jn(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yt=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Nt(n){if(!Dn(n).activated)throw Yt.create("use-before-activation",{appName:n.name})}function Mn(n,e){return $n.apply(this,arguments)}function $n(){return($n=(0,me.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const ne=yield a.getHeartbeatsHeader();ne&&(i["X-Firebase-Client"]=ne)}const l={method:"POST",body:JSON.stringify(e),headers:i};let f,w;try{f=yield fetch(n,l)}catch(ne){throw Yt.create("fetch-network-error",{originalErrorMessage:ne?.message})}if(200!==f.status)throw Yt.create("fetch-status-error",{httpStatus:f.status});try{w=yield f.json()}catch(ne){throw Yt.create("fetch-parse-error",{originalErrorMessage:ne?.message})}const M=w.ttl.match(/^([\d.]+)(s)$/);if(!M||!M[2]||isNaN(Number(M[1])))throw Yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const F=1e3*Number(M[1]),W=Date.now();return{token:w.token,expireTimeMillis:W+F,issuedAtTimeMillis:W}})).apply(this,arguments)}function ti(n,e){const{projectId:t,appId:i,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const qt="firebase-app-check-store";let Un=null;function ut(){return Un||(Un=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var a;e(Yt.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(qt,{keyPath:"compositeKey"})}}catch(t){e(Yt.create("storage-open",{originalErrorMessage:t?.message}))}}),Un)}function se(){return(se=(0,me.Z)(function*(n,e){const i=(yield ut()).transaction(qt,"readwrite"),l=i.objectStore(qt).put({compositeKey:n,value:e});return new Promise((f,w)=>{l.onsuccess=M=>{f()},i.onerror=M=>{var F;w(Yt.create("storage-set",{originalErrorMessage:null===(F=M.target.error)||void 0===F?void 0:F.message}))}})})).apply(this,arguments)}const G=new pn.Yd("@firebase/app-check");function Ke(n,e){return(0,xt.hl)()?function _t(n,e){return function an(n,e){return se.apply(this,arguments)}(function Y(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{G.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ie(){return Vn().enabled}function q(){return ve.apply(this,arguments)}function ve(){return(ve=(0,me.Z)(function*(){const n=Vn();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const st={error:"UNKNOWN_ERROR"};function Zt(n){return xt.US.encodeString(JSON.stringify(n),!1)}function nr(n){return rr.apply(this,arguments)}function rr(){return(rr=(0,me.Z)(function*(n,e=!1){const t=n.app;Nt(t);const i=Dn(t);let l,a=i.token;if(a&&!qs(a)&&(i.token=void 0,a=void 0),!a){const M=yield i.cachedTokenPromise;M&&(qs(M)?a=M:yield Ke(t,void 0))}if(!e&&a&&qs(a))return{token:a.token};let w,f=!1;if(ie()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Mn(ti(t,yield q()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),f=!0);const M=yield i.exchangeTokenPromise;return yield Ke(t,M),i.token=M,{token:M.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),f=!0),a=yield Dn(t).exchangeTokenPromise}catch(M){"appCheck/throttled"===M.code?G.warn(M.message):G.error(M),l=M}return a?l?w=qs(a)?{token:a.token,internalError:l}:Ho(l):(w={token:a.token},i.token=a,yield Ke(t,a)):w=Ho(l),f&&$o(t,w),w})).apply(this,arguments)}function Gi(n,e){const t=Dn(n),i=t.tokenObservers.filter(a=>a.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function wr(n){const{app:e}=n,t=Dn(e);let i=t.tokenRefresher;i||(i=function Ai(n){const{app:e}=n;return new Er((0,me.Z)(function*(){let i;if(i=Dn(e).token?yield nr(n,!0):yield nr(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Dn(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function $o(n,e){const t=Dn(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function qs(n){return n.expireTimeMillis-Date.now()>0}function Ho(n){return{token:Zt(st),error:n}}class go{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Dn(this.app);for(const t of e)Gi(this.app,t.next);return Promise.resolve()}}const qn="app-check-internal";!function gr(){(0,Tt._registerComponent)(new mt.wA("app-check",n=>function bn(n,e){return new go(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qn).initialize()})),(0,Tt._registerComponent)(new mt.wA(qn,n=>function jn(n){return{getToken:e=>nr(n,e),addTokenListener:e=>function ts(n,e,t,i){const{app:a}=n,l=Dn(a);if(l.tokenObservers=[...l.tokenObservers,{next:t,error:i,type:e}],l.token&&qs(l.token)){const w=l.token;Promise.resolve().then(()=>{t({token:w.token}),wr(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>wr(n))}(n,"INTERNAL",e),removeTokenListener:e=>Gi(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Tt.registerVersion)("@firebase/app-check","0.6.3")}();class yo{constructor(){return(0,ke.vb)("app-check")}}typeof window<"u"&&window;var vo=V(9260);const Xa=new p.OlP("angularfire2.auth.use-emulator"),Tu=new p.OlP("angularfire2.auth.settings"),Pi=new p.OlP("angularfire2.auth.tenant-id"),Sa=new p.OlP("angularfire2.auth.langugage-code"),Zi=new p.OlP("angularfire2.auth.use-device-language"),Ki=new p.OlP("angularfire.auth.persistence"),eu=(n,e,t,i,a,l,f,w)=>(0,j.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const M=e.runOutsideAngular(()=>n.auth());if(t&&M.useEmulator(...t),i&&(M.tenantId=i),M.languageCode=a,l&&M.useDeviceLanguage(),f)for(const[F,W]of Object.entries(f))M.settings[F]=W;return w&&M.setPersistence(w),M},[t,i,a,l,f,w]);let ls=(()=>{class n{constructor(t,i,a,l,f,w,M,F,W,ne,Ee,Ye){const tt=new ae.x,wt=(0,ue.of)(void 0).pipe((0,we.Q)(f.outsideAngular),(0,re.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,te.U)(()=>(0,j.on)(t,l,i)),(0,te.U)(Vt=>eu(Vt,l,w,F,W,ne,M,Ee)),at({bufferSize:1,refCount:!1}));if((0,Ue.PM)(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ue.of)(null);else{wt.pipe((0,vt.P)()).subscribe();const Qn=wt.pipe((0,re.w)(An=>An.getRedirectResult().then(In=>In,()=>null)),ke.iC,at({bufferSize:1,refCount:!1})),xr=wt.pipe((0,re.w)(An=>new fe.y(In=>({unsubscribe:l.runOutsideAngular(()=>An.onAuthStateChanged(On=>In.next(On),On=>In.error(On),()=>In.complete()))})))),Bn=wt.pipe((0,re.w)(An=>new fe.y(In=>({unsubscribe:l.runOutsideAngular(()=>An.onIdTokenChanged(On=>In.next(On),On=>In.error(On),()=>In.complete()))}))));this.authState=Qn.pipe(We(xr),(0,ze.R)(f.outsideAngular),(0,we.Q)(f.insideAngular)),this.user=Qn.pipe(We(Bn),(0,ze.R)(f.outsideAngular),(0,we.Q)(f.insideAngular)),this.idToken=this.user.pipe((0,re.w)(An=>An?(0,_e.D)(An.getIdToken()):(0,ue.of)(null))),this.idTokenResult=this.user.pipe((0,re.w)(An=>An?(0,_e.D)(An.getIdTokenResult()):(0,ue.of)(null))),this.credential=(0,ye.T)(Qn,tt,this.authState.pipe((0,Qe.h)(An=>!An))).pipe((0,te.U)(An=>An?.user?An:null),(0,ze.R)(f.outsideAngular),(0,we.Q)(f.insideAngular))}return(0,j.pX)(this,wt,l,{spy:{apply:(Vt,Qn,xr)=>{(Vt.startsWith("signIn")||Vt.startsWith("createUser"))&&xr.then(Bn=>tt.next(Bn))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(j.Dh),p.LFG(j.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ke.HU),p.LFG(Xa,8),p.LFG(Tu,8),p.LFG(Pi,8),p.LFG(Sa,8),p.LFG(Zi,8),p.LFG(Ki,8),p.LFG(yo,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mi=(()=>{class n{constructor(){vo.Z.registerVersion("angularfire",ke.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[ls]}),n})();var _o=V(4986),Eo=V(8675),Go=V(4482),ds=V(5403);function Aa(){return(0,Go.e)((n,e)=>{let t,i=!1;n.subscribe((0,ds.x)(e,a=>{const l=t;t=a,i&&e.next([l,a]),i=!0}))})}var hs=V(5026),As=V(4671);function Qs(n,e){return n===e}V(9568);var At,xs=V(3942),wo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gr={},fs=fs||{},Wt=wo||self;function Rr(){}function Zn(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ms(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var zo="closure_uid_"+(1e9*Math.random()>>>0),Js=0;function zr(n,e,t){return n.call.apply(n.bind,arguments)}function Xs(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function mr(n,e,t){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zr:Xs).apply(null,arguments)}function ki(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function gn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,a,l){for(var f=Array(arguments.length-2),w=2;w<arguments.length;w++)f[w-2]=arguments[w];return e.prototype[a].apply(i,f)}}function yi(){this.s=this.s,this.o=this.o}yi.prototype.s=!1,yi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function cr(n){Object.prototype.hasOwnProperty.call(n,zo)&&n[zo]||(n[zo]=++Js)}(this)},yi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xa=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Or(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function aa(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Zn(i)){const a=n.length||0,l=i.length||0;n.length=a+l;for(let f=0;f<l;f++)n[a+f]=i[f]}else n.push(i)}}function er(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}er.prototype.h=function(){this.defaultPrevented=!0};var Jt=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Wt.addEventListener("test",Rr,e),Wt.removeEventListener("test",Rr,e)}catch{}return n}();function Fi(n){return/^[\s\xa0]*$/.test(n)}var tu=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function eo(n,e){return n<e?-1:n>e?1:0}function ps(){var n=Wt.navigator;return n&&(n=n.userAgent)?n:""}function br(n){return-1!=ps().indexOf(n)}function ua(n){return ua[" "](n),n}ua[" "]=Rr;var gs,n,Wo=br("Opera"),Re=br("Trident")||br("MSIE"),dn=br("Edge"),Ra=dn||Re,Oa=br("Gecko")&&!(-1!=ps().toLowerCase().indexOf("webkit")&&!br("Edge"))&&!(br("Trident")||br("MSIE"))&&!br("Edge"),Cr=-1!=ps().toLowerCase().indexOf("webkit")&&!br("Edge");function ca(){var n=Wt.document;return n?n.documentMode:void 0}e:{var Li="",Rs=(n=ps(),Oa?/rv:([^\);]+)(\)|;)/.exec(n):dn?/Edge\/([\d\.]+)/.exec(n):Re?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Cr?/WebKit\/(\S+)/.exec(n):Wo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Rs&&(Li=Rs?Rs[1]:""),Re){var Io=ca();if(null!=Io&&Io>parseFloat(Li)){gs=String(Io);break e}}gs=Li}var to={};var si=Wt.document&&Re&&(ca()||parseInt(gs,10))||void 0;function rs(n,e){if(er.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Oa){e:{try{ua(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ms[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rs.X.h.call(this)}}gn(rs,er);var ms={2:"touch",3:"pen",4:"mouse"};rs.prototype.h=function(){rs.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Vi="closure_listenable_"+(1e6*Math.random()|0),nu=0;function bo(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=a,this.key=++nu,this.ba=this.ea=!1}function Co(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function la(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ys(n){const e={};for(const t in n)e[t]=n[t];return e}const Ns="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let l=0;l<Ns.length;l++)t=Ns[l],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Ps(n){this.src=n,this.g={},this.h=0}function no(n,e){var t=e.type;if(t in n.g){var l,i=n.g[t],a=xa(i,e);(l=0<=a)&&Array.prototype.splice.call(i,a,1),l&&(Co(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Pa(n,e,t,i){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==i)return a}return-1}Ps.prototype.add=function(n,e,t,i,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var f=Pa(n,e,i,a);return-1<f?(e=n[f],t||(e.ea=!1)):((e=new bo(e,this.src,l,!!i,a)).ea=t,n.push(e)),e};var To="closure_lm_"+(1e6*Math.random()|0),ru={};function Su(n,e,t,i,a){if(i&&i.once)return iu(n,e,t,i,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Su(n,e[l],t,i,a);return null}return t=La(t),n&&n[Vi]?n.N(e,t,Ms(i)?!!i.capture:!!i,a):da(n,e,t,!1,i,a)}function da(n,e,t,i,a,l){if(!e)throw Error("Invalid event type");var f=Ms(a)?!!a.capture:!!a,w=Tn(n);if(w||(n[To]=w=new Ps(n)),(t=w.add(e,t,i,f,l)).proxy)return t;if(i=function ka(){const e=vi;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Jt||(a=f),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(Wr(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function iu(n,e,t,i,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)iu(n,e[l],t,i,a);return null}return t=La(t),n&&n[Vi]?n.O(e,t,Ms(i)?!!i.capture:!!i,a):da(n,e,t,!0,i,a)}function Fa(n,e,t,i,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)Fa(n,e[l],t,i,a);else i=Ms(i)?!!i.capture:!!i,t=La(t),n&&n[Vi]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Pa(l=n.g[e],t,i,a))&&(Co(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Tn(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Pa(e,t,i,a)),(t=-1<n?e[n]:null)&&ro(t))}function ro(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Vi])no(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(Wr(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Tn(e))?(no(t,n),0==t.h&&(t.src=null,e[To]=null)):Co(n)}}}function Wr(n){return n in ru?ru[n]:ru[n]="on"+n}function vi(n,e){if(n.ba)n=!0;else{e=new rs(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&ro(n),n=t.call(i,e)}return n}function Tn(n){return(n=n[To])instanceof Ps?n:null}var qo="__closure_events_fn_"+(1e9*Math.random()>>>0);function La(n){return"function"==typeof n?n:(n[qo]||(n[qo]=function(e){return n.handleEvent(e)}),n[qo])}function mn(){yi.call(this),this.i=new Ps(this),this.P=this,this.I=null}function Pr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new er(e,n);else if(e instanceof er)e.target=e.target||n;else{var a=e;Na(e=new er(i,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var f=e.g=t[l];a=Va(f,i,!0,e)&&a}if(a=Va(f=e.g=n,i,!0,e)&&a,a=Va(f,i,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Va(f=e.g=t[l],i,!1,e)&&a}function Va(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.ba&&f.capture==t){var w=f.listener,M=f.ha||f.src;f.ea&&no(n.i,f),a=!1!==w.call(M,i)&&a}}return a&&!i.defaultPrevented}gn(mn,yi),mn.prototype[Vi]=!0,mn.prototype.removeEventListener=function(n,e,t,i){Fa(this,n,e,t,i)},mn.prototype.M=function(){if(mn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Co(t[i]);delete n.g[e],n.h--}}this.I=null},mn.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},mn.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Zo=Wt.JSON.stringify;function Ko(){var n=Rt;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ee,T=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new k,n=>n.reset());class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function x(n){Wt.setTimeout(()=>{throw n},0)}function H(n,e){ee||function Ae(){var n=Wt.Promise.resolve(void 0);ee=function(){n.then(fn)}}(),Ne||(ee(),Ne=!0),Rt.add(n,e)}var Ne=!1,Rt=new class Yo{constructor(){this.h=this.g=null}add(e,t){const i=T.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function fn(){for(var n;n=Ko();){try{n.h.call(n.g)}catch(t){x(t)}var e=T;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ne=!1}function Sn(n,e){mn.call(this),this.h=n||1,this.g=e||Wt,this.j=mr(this.lb,this),this.l=Date.now()}function En(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function sn(n,e,t){if("function"==typeof n)t&&(n=mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Wt.setTimeout(n,e||0)}function yr(n){n.g=sn(()=>{n.g=null,n.i&&(n.i=!1,yr(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}gn(Sn,mn),(At=Sn.prototype).ca=!1,At.R=null,At.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Pr(this,"tick"),this.ca&&(En(this),this.start()))}},At.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},At.M=function(){Sn.X.M.call(this),En(this),delete this.g};class Xt extends yi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yr(this)}M(){super.M(),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(n){yi.call(this),this.h=n,this.g={}}gn(Yn,yi);var _i=[];function Ei(n,e,t,i){Array.isArray(t)||(t&&(_i[0]=t.toString()),t=_i);for(var a=0;a<t.length;a++){var l=Su(e,t[a],i||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function qr(n){la(n.g,function(e,t){this.g.hasOwnProperty(t)&&ro(e)},n),n.g={}}function wi(){this.g=!0}function is(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function So(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<a.length;f++)a[f]=""}}}return Zo(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Yn.prototype.M=function(){Yn.X.M.call(this),qr(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wi.prototype.Aa=function(){this.g=!1},wi.prototype.info=function(){};var Ui={},Qo=null;function Ao(){return Qo=Qo||new mn}function ks(n){er.call(this,Ui.Pa,n)}function Jo(n){const e=Ao();Pr(e,new ks(e))}function li(n,e){er.call(this,Ui.STAT_EVENT,n),this.stat=e}function Ii(n){const e=Ao();Pr(e,new li(e,n))}function oo(n,e){er.call(this,Ui.Qa,n),this.size=e}function Fs(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){n()},e)}Ui.Pa="serverreachability",gn(ks,er),Ui.STAT_EVENT="statevent",gn(li,er),Ui.Qa="timingevent",gn(oo,er);var ha={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ua={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Xo(){}function Au(){}Xo.prototype.h=null;var ou,ao={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function su(){er.call(this,"d")}function Bi(){er.call(this,"c")}function uo(){}function Hn(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Yn(this),this.O=fa,this.T=new Sn(n=Ra?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new xu}function xu(){this.i=null,this.g="",this.h=!1}gn(su,er),gn(Bi,er),gn(uo,Xo),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},ou=new uo;var fa=45e3,di={},vs={};function Mu(n,e,t){n.K=1,n.v=Ro(Mo(e)),n.s=t,n.P=!0,ic(n,null)}function ic(n,e){n.F=Date.now(),xo(n),n.A=Mo(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),Nu(t.i,"t",i),n.C=0,t=n.l.H,n.h=new xu,n.g=ih(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Xt(mr(n.La,n,n.g),n.N)),Ei(n.S,n.g,"readystatechange",n.ib),e=n.H?ys(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Jo(),function io(n,e,t,i,a,l){n.info(function(){if(n.g)if(l)for(var f="",w=l.split("&"),M=0;M<w.length;M++){var F=w[M].split("=");if(1<F.length){var W=F[0];F=F[1];var ne=W.split("_");f=2<=ne.length&&"type"==ne[1]?f+(W+"=")+F+"&":f+(W+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.U,n.s)}function ja(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Gc(n,e,t){let a,i=!0;for(;!n.I&&n.C<t.length;){if(a=au(n,t),a==vs){4==e&&(n.o=4,Ii(14),i=!1),is(n.j,n.m,null,"[Incomplete Response]");break}if(a==di){n.o=4,Ii(15),is(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}is(n.j,n.m,a,null),pa(n,a)}ja(n)&&a!=vs&&a!=di&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Nf(e),e.K=!0,Ii(11))):(is(n.j,n.m,t,"[Invalid Chunked Response]"),Yi(n),_s(n))}function au(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?vs:(t=Number(e.substring(t,i)),isNaN(t)?di:(i+=1)+t>e.length?vs:(e=e.substr(i,t),n.C=i+t,e))}function xo(n){n.V=Date.now()+n.O,ji(n,n.O)}function ji(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fs(mr(n.gb,n),e)}function ea(n){n.B&&(Wt.clearTimeout(n.B),n.B=null)}function _s(n){0==n.l.G||n.I||Ag(n.l,n)}function Yi(n){ea(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,En(n.T),qr(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function pa(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||U(t.h,n)))if(!n.J&&U(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;th(t),Xd(t)}qc(t),Ii(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Fs(mr(t.cb,t),6e3));if(1>=O(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ku(t,11)}else if((n.J||t.g==n)&&th(t),!Fi(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let F=a[e];if(t.T=F[0],F=F[1],2==t.G)if("c"==F[0]){t.I=F[1],t.ka=F[2];const W=F[3];null!=W&&(t.ma=W,t.j.info("VER="+t.ma));const ne=F[4];null!=ne&&(t.Ca=ne,t.j.info("SVER="+t.Ca));const Ee=F[5];null!=Ee&&"number"==typeof Ee&&0<Ee&&(t.J=i=1.5*Ee,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const Ye=n.g;if(Ye){const tt=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tt){var l=i.h;l.g||-1==tt.indexOf("spdy")&&-1==tt.indexOf("quic")&&-1==tt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(z(l,l.h),l.h=null))}if(i.D){const wt=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;wt&&(i.za=wt,ir(i.F,i.D,wt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var f=n;if((i=t).sa=Hl(i,i.H?i.ka:null,i.V),f.J){he(i.h,f);var w=f,M=i.J;M&&w.setTimeout(M),w.B&&(ea(w),xo(w)),i.g=f}else Tg(i);0<t.i.length&&$l(t)}else"stop"!=F[0]&&"close"!=F[0]||ku(t,7);else 3==t.G&&("stop"==F[0]||"close"==F[0]?"stop"==F[0]?ku(t,7):uc(t):"noop"!=F[0]&&t.l&&t.l.wa(F),t.A=0)}Jo()}catch{}}function Bl(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Zn(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function zc(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Zn(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function $a(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Zn(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length,l=0;l<a;l++)e.call(void 0,i[l],t&&t[l],n)}(At=Hn.prototype).setTimeout=function(n){this.O=n},At.ib=function(n){n=n.target;const e=this.L;e&&3==Es(n)?e.l():this.La(n)},At.La=function(n){try{if(n==this.g)e:{const W=Es(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>W)&&(3!=W||Ra||this.g&&(this.h.h||this.g.fa()||ws(this.g)))){this.I||4!=W||7==e||Jo(),ea(this);var t=this.g.aa();this.Y=t;t:if(ja(this)){var i=ws(this.g);n="";var a=i.length,l=4==Es(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),_s(this);var f="";break t}this.h.i=new Wt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:l&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.fa();if(this.i=200==t,function so(n,e,t,i,a,l,f){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.U,W,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var w,M=this.g;if((w=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fi(w)){var F=w;break t}}F=null}if(!(t=F)){this.i=!1,this.o=3,Ii(12),Yi(this),_s(this);break e}is(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pa(this,t)}this.P?(Gc(this,W,f),Ra&&this.i&&3==W&&(Ei(this.S,this.T,"tick",this.hb),this.T.start())):(is(this.j,this.m,f,null),pa(this,f)),4==W&&Yi(this),this.i&&!this.I&&(4==W?Ag(this.l,this):(this.i=!1,xo(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Yi(this),_s(this)}}}catch{}},At.hb=function(){if(this.g){var n=Es(this.g),e=this.g.fa();this.C<e.length&&(ea(this),Gc(this,n,e),this.i&&4!=n&&xo(this))}},At.cancel=function(){this.I=!0,Yi(this)},At.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function ss(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jo(),Ii(17)),Yi(this),this.o=2,_s(this)):ji(this,this.V-n)};var Pn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ls(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ls){this.h=void 0!==e?e:n.h,Ha(this,n.j),this.s=n.s,this.g=n.g,ga(this,n.m),this.l=n.l,e=n.i;var t=new Oo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),uu(this,t),this.o=n.o}else n&&(t=String(n).match(Pn))?(this.h=!!e,Ha(this,t[1]||"",!0),this.s=Ru(t[2]||""),this.g=Ru(t[3]||"",!0),ga(this,t[4]),this.l=Ru(t[5]||"",!0),uu(this,t[6]||"",!0),this.o=Ru(t[7]||"")):(this.h=!!e,this.i=new Oo(null,this.h))}function Mo(n){return new Ls(n)}function Ha(n,e,t){n.j=t?Ru(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ga(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uu(n,e,t){e instanceof Oo?(n.i=e,function jl(n,e){e&&!n.j&&(Qi(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(Us(this,i),Nu(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=$i(e,hi)),n.i=new Oo(e,n.h))}function ir(n,e,t){n.i.set(e,t)}function Ro(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ru(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function $i(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Tr),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Tr(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ls.prototype.toString=function(){var n=[],e=this.j;e&&n.push($i(e,Ga,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push($i(e,Ga,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push($i(t,"/"==t.charAt(0)?Ou:za,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",$i(t,Vs)),n.join("")};var Ga=/[#\/\?@]/g,za=/[#\?:]/g,Ou=/[#\?]/g,hi=/[#\?@]/g,Vs=/#/g;function Oo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qi(n){n.g||(n.g=new Map,n.h=0,n.i&&function sc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var l=n[t].substring(0,i);a=n[t].substring(i+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Us(n,e){Qi(n),e=Wa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cu(n,e){return Qi(n),e=Wa(n,e),n.g.has(e)}function Nu(n,e,t){Us(n,e),0<t.length&&(n.i=null,n.g.set(Wa(n,e),Or(t)),n.h+=t.length)}function Wa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function _(n){this.l=n||m,n=Wt.PerformanceNavigationTiming?0<(n=Wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ga&&Wt.g.Ga()&&Wt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(At=Oo.prototype).add=function(n,e){Qi(this),this.i=null,n=Wa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},At.forEach=function(n,e){Qi(this),this.g.forEach(function(t,i){t.forEach(function(a){n.call(e,a,i,this)},this)},this)},At.oa=function(){Qi(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const a=n[i];for(let l=0;l<a.length;l++)t.push(e[i])}return t},At.W=function(n){Qi(this);let e=[];if("string"==typeof n)cu(this,n)&&(e=e.concat(this.g.get(Wa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},At.set=function(n,e){return Qi(this),this.i=null,cu(this,n=Wa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},At.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},At.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const l=encodeURIComponent(String(i)),f=this.W(i);for(i=0;i<f.length;i++){var a=l;""!==f[i]&&(a+="="+encodeURIComponent(String(f[i]))),n.push(a)}}return this.i=n.join("&")};var m=10;function C(n){return!!n.h||!!n.g&&n.g.size>=n.j}function O(n){return n.h?1:n.g?n.g.size:0}function U(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function z(n,e){n.g?n.g.add(e):n.h=e}function he(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Le(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Or(n.i)}function Dt(){}function Ct(){this.g=new Dt}function wn(n,e,t){const i=t||"";try{Bl(n,function(a,l){let f=a;Ms(a)&&(f=Zo(a)),e.push(i+l+"="+encodeURIComponent(f))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function Ji(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch{}}function Zr(n){this.l=n.ac||null,this.j=n.jb||!1}function A(n,e){mn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=R,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_.prototype.cancel=function(){if(this.i=Le(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Dt.prototype.stringify=function(n){return Wt.JSON.stringify(n,void 0)},Dt.prototype.parse=function(n){return Wt.JSON.parse(n,void 0)},gn(Zr,Xo),Zr.prototype.g=function(){return new A(this.l,this.j)},Zr.prototype.i=function(n){return function(){return n}}({}),gn(A,mn);var R=0;function B(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function J(n){n.readyState=4,n.l=null,n.j=null,n.A=null,pe(n)}function pe(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(At=A.prototype).open=function(n,e){if(this.readyState!=R)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,pe(this)},At.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Wt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},At.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,J(this)),this.readyState=R},At.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,pe(this)),this.g&&(this.readyState=3,pe(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Wt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;B(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},At.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?J(this):pe(this),3==this.readyState&&B(this)}},At.Va=function(n){this.g&&(this.response=this.responseText=n,J(this))},At.Ua=function(n){this.g&&(this.response=n,J(this))},At.ga=function(){this.g&&J(this)},At.setRequestHeader=function(n,e){this.v.append(n,e)},At.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},At.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(A.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ce=Wt.JSON.parse;function He(n){mn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ot,this.K=this.L=!1}gn(He,mn);var Ot="",jt=/^https?$/i,Bt=["POST","PUT"];function tn(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Bs(n),ma(n)}function Bs(n){n.D||(n.D=!0,Pr(n,"complete"),Pr(n,"error"))}function Kr(n){if(n.h&&typeof fs<"u"&&(!n.C[1]||4!=Es(n)||2!=n.aa()))if(n.v&&4==Es(n))sn(n.Ha,0,n);else if(Pr(n,"readystatechange"),4==Es(n)){n.h=!1;try{const w=n.aa();e:switch(w){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===w){var a=String(n.H).match(Pn)[1]||null;if(!a&&Wt.self&&Wt.self.location){var l=Wt.self.location.protocol;a=l.substr(0,l.length-1)}i=!jt.test(a?a.toLowerCase():"")}t=i}if(t)Pr(n,"complete"),Pr(n,"success");else{n.m=6;try{var f=2<Es(n)?n.g.statusText:""}catch{f=""}n.j=f+" ["+n.aa()+"]",Bs(n)}}finally{ma(n)}}}function ma(n,e){if(n.g){oc(n);const t=n.g,i=n.C[0]?Rr:null;n.g=null,n.C=null,e||Pr(n,"ready");try{t.onreadystatechange=i}catch{}}}function oc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Wt.clearTimeout(n.A),n.A=null)}function Es(n){return n.g?n.g.readyState:0}function ws(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ot:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function co(n){let e="";return la(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function qa(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=co(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function ac(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Of(n){this.Ca=0,this.i=[],this.j=new wi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ac("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ac("baseRetryDelayMs",5e3,n),this.bb=ac("retryDelaySeedMs",1e4,n),this.$a=ac("forwardChannelMaxRetries",2,n),this.ta=ac("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new _(n&&n.concurrentRequestLimit),this.Fa=new Ct,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function uc(n){if(eh(n),3==n.G){var e=n.U++,t=Mo(n.F);ir(t,"SID",n.I),ir(t,"RID",e),ir(t,"TYPE","terminate"),Pu(n,t),(e=new Hn(n,n.j,e,void 0)).K=2,e.v=Ro(Mo(t)),t=!1,Wt.navigator&&Wt.navigator.sendBeacon&&(t=Wt.navigator.sendBeacon(e.v.toString(),"")),!t&&Wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ih(e.l,null),e.g.da(e.v)),e.F=Date.now(),xo(e)}rh(n)}function Xd(n){n.g&&(Nf(n),n.g.cancel(),n.g=null)}function eh(n){Xd(n),n.u&&(Wt.clearTimeout(n.u),n.u=null),th(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Wt.clearTimeout(n.m),n.m=null)}function $l(n){C(n.h)||n.m||(n.m=!0,H(n.Ja,n),n.C=0)}function Wc(n,e){var t;t=e?e.m:n.U++;const i=Mo(n.F);ir(i,"SID",n.I),ir(i,"RID",t),ir(i,"AID",n.T),Pu(n,i),n.o&&n.s&&qa(i,n.o,n.s),t=new Hn(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Cg(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),z(n.h,t),Mu(t,i,e)}function Pu(n,e){n.ia&&la(n.ia,function(t,i){ir(e,i,t)}),n.l&&Bl({},function(t,i){ir(e,i,t)})}function Cg(n,e,t){t=Math.min(n.i.length,t);var i=n.l?mr(n.l.Ra,n.l,n):null;e:{var a=n.i;let l=-1;for(;;){const f=["count="+t];-1==l?0<t?(l=a[0].h,f.push("ofs="+l)):l=0:f.push("ofs="+l);let w=!0;for(let M=0;M<t;M++){let F=a[M].h;const W=a[M].g;if(F-=l,0>F)l=Math.max(0,a[M].h-100),w=!1;else try{wn(W,f,"req"+F+"_")}catch{i&&i(W)}}if(w){i=f.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function Tg(n){n.g||n.u||(n.Z=1,H(n.Ia,n),n.A=0)}function qc(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Fs(mr(n.Ia,n),nh(n,n.A)),n.A++,0))}function Nf(n){null!=n.B&&(Wt.clearTimeout(n.B),n.B=null)}function Sg(n){n.g=new Hn(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Mo(n.sa);ir(e,"RID","rpc"),ir(e,"SID",n.I),ir(e,"CI",n.L?"0":"1"),ir(e,"AID",n.T),ir(e,"TYPE","xmlhttp"),Pu(n,e),n.o&&n.s&&qa(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ro(Mo(e)),t.s=null,t.P=!0,ic(t,n)}function th(n){null!=n.v&&(Wt.clearTimeout(n.v),n.v=null)}function Ag(n,e){var t=null;if(n.g==e){th(n),Nf(n),n.g=null;var i=2}else{if(!U(n.h,e))return;t=e.D,he(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Pr(i=Ao(),new oo(i,t)),$l(n)}else Tg(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==i&&function bg(n,e){return!(O(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Fs(mr(n.Ja,n,e),nh(n,n.C)),n.C++,0)))}(n,e)||2==i&&qc(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:ku(n,5);break;case 4:ku(n,10);break;case 3:ku(n,6);break;default:ku(n,2)}}function nh(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ku(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=mr(n.kb,n);t||(t=new Ls("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||Ha(t,"https"),Ro(t)),function vr(n,e){const t=new wi;if(Wt.Image){const i=new Image;i.onload=ki(Ji,t,i,"TestLoadImage: loaded",!0,e),i.onerror=ki(Ji,t,i,"TestLoadImage: error",!1,e),i.onabort=ki(Ji,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=ki(Ji,t,i,"TestLoadImage: timeout",!1,e),Wt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Ii(2);n.G=0,n.l&&n.l.va(e),rh(n),eh(n)}function rh(n){if(n.G=0,n.la=[],n.l){const e=Le(n.h);(0!=e.length||0!=n.i.length)&&(aa(n.la,e),aa(n.la,n.i),n.h.i.length=0,Or(n.i),n.i.length=0),n.l.ua()}}function Hl(n,e,t){var i=t instanceof Ls?Mo(t):new Ls(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),ga(i,i.m);else{var a=Wt.location;i=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new Ls(null,void 0);i&&Ha(l,i),e&&(l.g=e),a&&ga(l,a),t&&(l.l=t),i=l}return e=n.za,(t=n.D)&&e&&ir(i,t,e),ir(i,"VER",n.ma),Pu(n,i),i}function ih(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new He(t&&n.Da&&!n.ra?new Zr({jb:!0}):n.ra)).Ka(n.H),e}function sh(){}function cc(){if(Re&&!(10<=Number(si)))throw Error("Environmental error: no available transport.")}function Yr(n,e){mn.call(this),this.g=new Of(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Fi(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fi(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lc(this)}function Pf(n){su.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function kf(){Bi.call(this),this.status=1}function lc(n){this.g=n}(At=He.prototype).Ka=function(n){this.L=n},At.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ou.g(),this.C=function Ba(n){return n.h||(n.h=n.i())}(this.u?this.u:ou),this.g.onreadystatechange=mr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void tn(this,l)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)t.set(a,i[a]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const l of i.keys())t.set(l,i.get(l))}i=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=Wt.FormData&&n instanceof Wt.FormData,!(0<=xa(Bt,e))||i||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,f]of t)this.g.setRequestHeader(l,f);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oc(this),0<this.B&&((this.K=function un(n){return Re&&function Do(){return function Ma(n){var e=to;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=tu(String(gs)).split("."),t=tu("9").split("."),i=Math.max(e.length,t.length);for(let f=0;0==n&&f<i;f++){var a=e[f]||"",l=t[f]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=eo(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||eo(0==a[2].length,0==l[2].length)||eo(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.qa,this)):this.A=sn(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){tn(this,l)}},At.qa=function(){typeof fs<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pr(this,"timeout"),this.abort(8))},At.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pr(this,"complete"),Pr(this,"abort"),ma(this))},At.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ma(this,!0)),He.X.M.call(this)},At.Ha=function(){this.s||(this.F||this.v||this.l?Kr(this):this.fb())},At.fb=function(){Kr(this)},At.aa=function(){try{return 2<Es(this)?this.g.status:-1}catch{return-1}},At.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},At.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ce(e)}},At.Ea=function(){return this.m},At.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(At=Of.prototype).ma=8,At.G=1,At.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new Hn(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=ys(l),Na(l,this.S)):l=this.S),null!==this.o||this.N||(a.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Cg(this,a,e),ir(t=Mo(this.F),"RID",n),ir(t,"CVER",22),this.D&&ir(t,"X-HTTP-Session-Id",this.D),Pu(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(co(l)))+"&"+e:this.o&&qa(t,this.o,l)),z(this.h,a),this.Ya&&ir(t,"TYPE","init"),this.O?(ir(t,"$req",e),ir(t,"SID","null"),a.Z=!0,Mu(a,t,null)):Mu(a,t,e),this.G=2}}else 3==this.G&&(n?Wc(this,n):0==this.i.length||C(this.h)||Wc(this))},At.Ia=function(){if(this.u=null,Sg(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Fs(mr(this.eb,this),n)}},At.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ii(10),Xd(this),Sg(this))},At.cb=function(){null!=this.v&&(this.v=null,Xd(this),qc(this),Ii(19))},At.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ii(2)):(this.j.info("Failed to ping google.com"),Ii(1))},(At=sh.prototype).xa=function(){},At.wa=function(){},At.va=function(){},At.ua=function(){},At.Ra=function(){},cc.prototype.g=function(n,e){return new Yr(n,e)},gn(Yr,mn),Yr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ii(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Hl(n,null,n.V),$l(n)},Yr.prototype.close=function(){uc(this.g)},Yr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Zo(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&$l(e)},Yr.prototype.M=function(){this.g.l=null,delete this.j,uc(this.g),delete this.g,Yr.X.M.call(this)},gn(Pf,su),gn(kf,Bi),gn(lc,sh),lc.prototype.xa=function(){Pr(this.g,"a")},lc.prototype.wa=function(n){Pr(this.g,new Pf(n))},lc.prototype.va=function(n){Pr(this.g,new kf)},lc.prototype.ua=function(){Pr(this.g,"b")},cc.prototype.createWebChannel=cc.prototype.g,Yr.prototype.send=Yr.prototype.u,Yr.prototype.open=Yr.prototype.m,Yr.prototype.close=Yr.prototype.close,ha.NO_ERROR=0,ha.TIMEOUT=8,ha.HTTP_ERROR=6,Ua.COMPLETE="complete",Au.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",mn.prototype.listen=mn.prototype.N,He.prototype.listenOnce=He.prototype.O,He.prototype.getLastError=He.prototype.Oa,He.prototype.getLastErrorCode=He.prototype.Ea,He.prototype.getStatus=He.prototype.aa,He.prototype.getResponseJson=He.prototype.Sa,He.prototype.getResponseText=He.prototype.fa,He.prototype.send=He.prototype.da,He.prototype.setWithCredentials=He.prototype.Ka;var Gl=Gr.createWebChannelTransport=function(){return new cc},oh=Gr.getStatEventTarget=function(){return Ao()},Zc=Gr.ErrorCode=ha,xg=Gr.EventType=Ua,Ff=Gr.Event=Ui,ah=Gr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},uh=Gr.FetchXmlHttpFactory=Zr,zl=Gr.WebChannel=Au,Is=Gr.XhrIo=He;const Kc="@firebase/firestore";class Di{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Di.UNAUTHENTICATED=new Di(null),Di.GOOGLE_CREDENTIALS=new Di("google-credentials-uid"),Di.FIRST_PARTY=new Di("first-party-uid"),Di.MOCK_USER=new Di("mock-user");let lu="9.17.1";const kr=new pn.Yd("@firebase/firestore");function Fu(){return kr.logLevel}function ot(n,...e){if(kr.logLevel<=pn.in.DEBUG){const t=e.map(E);kr.debug(`Firestore (${lu}): ${n}`,...t)}}function oi(n,...e){if(kr.logLevel<=pn.in.ERROR){const t=e.map(E);kr.error(`Firestore (${lu}): ${n}`,...t)}}function Lu(n,...e){if(kr.logLevel<=pn.in.WARN){const t=e.map(E);kr.warn(`Firestore (${lu}): ${n}`,...t)}}function E(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function d(n="Unexpected state"){const e=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: `+n;throw oi(e),new Error(e)}function g(n,e){n||d()}function P(n,e){return n}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Be{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Mt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Di.UNAUTHENTICATED))}shutdown(){}}class yn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Sr{constructor(e){this.t=e,this.currentUser=Di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const l=F=>this.i!==a?(a=this.i,t(F)):Promise.resolve();let f=new Be;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Be,e.enqueueRetryable(()=>l(this.currentUser))};const w=()=>{const F=f;e.enqueueRetryable((0,me.Z)(function*(){yield F.promise,yield l(i.currentUser)}))},M=F=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=F,this.auth.addAuthTokenListener(this.o),w()};this.t.onInit(F=>M(F)),setTimeout(()=>{if(!this.auth){const F=this.t.getImmediate({optional:!0});F?M(F):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Be)}},0),w()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(g("string"==typeof i.accessToken),new Mt(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return g(null===e||"string"==typeof e),new Di(e)}}class No{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a,this.type="FirstParty",this.user=Di.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(g(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ya{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a}getToken(){return Promise.resolve(new No(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=l=>{null!=l.error&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.A;return this.A=l.token,ot("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.T.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.T.getImmediate({optional:!0});l?a(l):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(g("string"==typeof t.token),this.A=t.token,new dc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ch(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class lh{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=ch(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%e.length))}return i}}function rn(n,e){return n<e?-1:n>e?1:0}function Uu(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function dh(n){return n+"\0"}class lr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new lr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gt(e)}static min(){return new Gt(new lr(0,0))}static max(){return new Gt(new lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yc{constructor(e,t,i){void 0===t?t=0:t>e.length&&d(),void 0===i?i=e.length-t:i>e.length-t&&d(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Yc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yc?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=e.get(a),f=t.get(a);if(l<f)return-1;if(l>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rn extends Yc{construct(e,t,i){return new Rn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Rn(t)}static emptyPath(){return new Rn([])}}const Vf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Yc{construct(e,t,i){return new Qr(e,t,i)}static isValidIdentifier(e){return Vf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qr(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(0===i.length)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let f=!1;for(;a<e.length;){const w=e[a];if("\\"===w){if(a+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const M=e[a+1];if("\\"!==M&&"."!==M&&"`"!==M)throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=M,a+=2}else"`"===w?(f=!f,a++):"."!==w||f?(i+=w,a++):(l(),a++)}if(l(),f)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(t)}static emptyPath(){return new Qr([])}}class Et{constructor(e){this.path=e}static fromPath(e){return new Et(Rn.fromString(e))}static fromName(e){return new Et(Rn.fromString(e).popFirst(5))}static empty(){return new Et(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new Rn(e.slice()))}}class ql{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Mg(n){return n.fields.find(e=>2===e.kind)}function Qc(n){return n.fields.filter(e=>2!==e.kind)}ql.UNKNOWN_ID=-1;class hh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zl(0,va.min())}}function Rg(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Gt.fromTimestamp(1e9===i?new lr(t+1,0):new lr(t,i));return new va(a,Et.empty(),e)}function Ov(n){return new va(n.readTime,n.key,-1)}class va{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new va(Gt.min(),Et.empty(),-1)}static max(){return new va(Gt.max(),Et.empty(),-1)}}function Kl(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Et.comparator(n.documentKey,e.documentKey),0!==t?t:rn(n.largestBatchId,e.largestBatchId))}const Nv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Og{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bu(n){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,me.Z)(function*(n){if(n.code!==L.FAILED_PRECONDITION||n.message!==Nv)throw n;ot("LocalStore","Unexpectedly lost primary lease")}),Uf.apply(this,arguments)}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&d(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.reject(t)}static resolve(e){return new xe((t,i)=>{t(e)})}static reject(e){return new xe((t,i)=>{i(e)})}static waitFor(e){return new xe((t,i)=>{let a=0,l=0,f=!1;e.forEach(w=>{++a,w.next(()=>{++l,f&&l===a&&t()},M=>i(M))}),f=!0,l===a&&t()})}static or(e){let t=xe.resolve(!1);for(const i of e)t=t.next(a=>a?xe.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new xe((i,a)=>{const l=e.length,f=new Array(l);let w=0;for(let M=0;M<l;M++){const F=M;t(e[F]).next(W=>{f[F]=W,++w,w===l&&i(f)},W=>a(W))}})}static doWhile(e,t){return new xe((i,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):i()};l()})}}class fh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Be,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Yl(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const a=Pg(i.target.error);this.P.reject(new Yl(e,a))}}static open(e,t,i,a){try{return new fh(t,e.transaction(a,i))}catch(l){throw new Yl(t,l)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ot("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ng(t)}}class Po{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===Po.D((0,xt.z$)())&&oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ot("SimpleDb","Removing database:",e),ju(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,xt.hl)())return!1;if(Po.N())return!0;const e=(0,xt.z$)(),t=Po.D(e),i=0<t&&t<10,a=Po.k(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(ot("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=f=>{i(f.target.result)},l.onblocked=()=>{a(new Yl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=f=>{const w=f.target.error;a("VersionError"===w.name?new Q(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new Q(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new Yl(e,w))},l.onupgradeneeded=f=>{ot("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.S.$(f.target.result,l.transaction,f.oldVersion,t.version).next(()=>{ot("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var l=this;return(0,me.Z)(function*(){const f="readonly"===t;let w=0;for(;;){++w;try{l.db=yield l.F(e);const M=fh.open(l.db,e,f?"readonly":"readwrite",i),F=a(M).next(W=>(M.V(),W)).catch(W=>(M.abort(W),xe.reject(W))).toPromise();return F.catch(()=>{}),yield M.v,F}catch(M){const F=M,W="FirebaseError"!==F.name&&w<3;if(ot("SimpleDb","Transaction failed with error:",F.message,"Retrying:",W),l.close(),!W)return Promise.reject(F)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Bf{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return ju(this.q.delete())}}class Yl extends Q{constructor(e,t){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function du(n){return"IndexedDbTransactionError"===n.name}class Ng{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(ot("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(ot("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ju(i)}add(e){return ot("SimpleDb","ADD",this.store.name,e,e),ju(this.store.add(e))}get(e){return ju(this.store.get(e)).next(t=>(void 0===t&&(t=null),ot("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ot("SimpleDb","DELETE",this.store.name,e),ju(this.store.delete(e))}count(){return ot("SimpleDb","COUNT",this.store.name),ju(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),l=[];return this.H(a,(f,w)=>{l.push(w)}).next(()=>l)}{const a=this.store.getAll(i.range);return new xe((l,f)=>{a.onerror=w=>{f(w.target.error)},a.onsuccess=w=>{l(w.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new xe((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}Y(e,t){ot("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,(l,f,w)=>w.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}tt(e){const t=this.cursor({});return new xe((i,a)=>{t.onerror=l=>{const f=Pg(l.target.error);a(f)},t.onsuccess=l=>{const f=l.target.result;f?e(f.primaryKey,f.value).next(w=>{w?f.continue():i()}):i()}})}H(e,t){const i=[];return new xe((a,l)=>{e.onerror=f=>{l(f.target.error)},e.onsuccess=f=>{const w=f.target.result;if(!w)return void a();const M=new Bf(w),F=t(w.primaryKey,w.value,M);if(F instanceof xe){const W=F.catch(ne=>(M.done(),xe.reject(ne)));i.push(W)}M.isDone?a():null===M.G?w.continue():w.continue(M.G)}}).next(()=>xe.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ju(n){return new xe((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=Pg(i.target.error);t(a)}})}let Ql=!1;function Pg(n){const e=Po.D((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ql||(Ql=!0,setTimeout(()=>{throw i},0)),i}}return n}class Pv{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ot("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{ot("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){du(i)?ot("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Bu(i)}yield t.nt(6e4)}))}}class JE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let a=t,l=!0;return xe.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!i.has(f))return ot("IndexBackiller",`Processing collection: ${f}`),this.rt(e,f,a).next(w=>{a-=w,i.add(f)});l=!1})).next(()=>t-a)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(l=>{const f=l.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.ot(a,l)).next(w=>(ot("IndexBackiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,t,w))).next(()=>f.size)}))}ot(e,t){let i=e;return t.changes.forEach((a,l)=>{const f=Ov(l);Kl(f,i)>0&&(i=f)}),new va(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ta=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>i.writeSequenceNumber(a))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class XE{constructor(e,t,i,a,l,f,w,M){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=w,this.useFetchStreams=M}}class $u{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $u("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $u&&e.projectId===this.projectId&&e.database===this.database}}function kg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Za(n){return null==n}function ph(n){return 0===n&&1/n==-1/0}function kv(n){return"number"==typeof n&&Number.isInteger(n)&&!ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Xi(t)}static fromUint8Array(e){const t=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new Xi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xi.EMPTY_BYTE_STRING=new Xi("");const Fg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hc(n){if(g(!!n),"string"==typeof n){let e=0;const t=Fg.exec(n);if(g(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ai(n.seconds),nanos:ai(n.nanos)}}function ai(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fu(n){return"string"==typeof n?Xi.fromBase64String(n):Xi.fromUint8Array(n)}function gh(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lg(n){const e=n.mapValue.fields.__previous_value__;return gh(e)?Lg(e):e}function Jl(n){const e=hc(n.mapValue.fields.__local_write_time__.timestampValue);return new lr(e.seconds,e.nanos)}const Hu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mh={nullValue:"NULL_VALUE"};function Xc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gh(n)?4:Vv(n)?9007199254740991:10:d()}function pu(n,e){if(n===e)return!0;const t=Xc(n);if(t!==Xc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jl(n).isEqual(Jl(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=hc(i.timestampValue),f=hc(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,fu(n.bytesValue).isEqual(fu(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return ai(i.geoPointValue.latitude)===ai(a.geoPointValue.latitude)&&ai(i.geoPointValue.longitude)===ai(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ai(i.integerValue)===ai(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=ai(i.doubleValue),f=ai(a.doubleValue);return l===f?ph(l)===ph(f):isNaN(l)&&isNaN(f)}return!1}(n,e);case 9:return Uu(n.arrayValue.values||[],e.arrayValue.values||[],pu);case 10:return function(i,a){const l=i.mapValue.fields||{},f=a.mapValue.fields||{};if(kg(l)!==kg(f))return!1;for(const w in l)if(l.hasOwnProperty(w)&&(void 0===f[w]||!pu(l[w],f[w])))return!1;return!0}(n,e);default:return d()}var a}function yh(n,e){return void 0!==(n.values||[]).find(t=>pu(t,e))}function fc(n,e){if(n===e)return 0;const t=Xc(n),i=Xc(e);if(t!==i)return rn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return rn(n.booleanValue,e.booleanValue);case 2:return function(a,l){const f=ai(a.integerValue||a.doubleValue),w=ai(l.integerValue||l.doubleValue);return f<w?-1:f>w?1:f===w?0:isNaN(f)?isNaN(w)?0:-1:1}(n,e);case 3:return Fv(n.timestampValue,e.timestampValue);case 4:return Fv(Jl(n),Jl(e));case 5:return rn(n.stringValue,e.stringValue);case 6:return function(a,l){const f=fu(a),w=fu(l);return f.compareTo(w)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const f=a.split("/"),w=l.split("/");for(let M=0;M<f.length&&M<w.length;M++){const F=rn(f[M],w[M]);if(0!==F)return F}return rn(f.length,w.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const f=rn(ai(a.latitude),ai(l.latitude));return 0!==f?f:rn(ai(a.longitude),ai(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const f=a.values||[],w=l.values||[];for(let M=0;M<f.length&&M<w.length;++M){const F=fc(f[M],w[M]);if(F)return F}return rn(f.length,w.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===Hu.mapValue&&l===Hu.mapValue)return 0;if(a===Hu.mapValue)return 1;if(l===Hu.mapValue)return-1;const f=a.fields||{},w=Object.keys(f),M=l.fields||{},F=Object.keys(M);w.sort(),F.sort();for(let W=0;W<w.length&&W<F.length;++W){const ne=rn(w[W],F[W]);if(0!==ne)return ne;const Ee=fc(f[w[W]],M[F[W]]);if(0!==Ee)return Ee}return rn(w.length,F.length)}(n.mapValue,e.mapValue);default:throw d()}}function Fv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rn(n,e);const t=hc(n),i=hc(e),a=rn(t.seconds,i.seconds);return 0!==a?a:rn(t.nanos,i.nanos)}function na(n){return el(n)}function el(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=hc(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fu(n.bytesValue).toBase64():"referenceValue"in n?Et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",l=!0;for(const f of i.values||[])l?l=!1:a+=",",a+=el(f);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let l="{",f=!0;for(const w of a)f?f=!1:l+=",",l+=`${w}:${el(i.fields[w])}`;return l+"}"}(n.mapValue):d();var e}function tl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lv(n){return!!n&&"integerValue"in n}function $f(n){return!!n&&"arrayValue"in n}function ew(n){return!!n&&"nullValue"in n}function tw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vg(n){return!!n&&"mapValue"in n}function Xl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hu(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Xl(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Vv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function nw(n){return"nullValue"in n?mh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?tl($u.empty(),Et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:d()}function rw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?tl($u.empty(),Et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Hu:d()}function Uv(n,e){const t=fc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Hf(n,e){const t=fc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class js{constructor(e,t){this.position=e,this.inclusive=t}}function ed(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],f=n.position[a];if(i=l.field.isKeyField()?Et.comparator(Et.fromName(f.referenceValue),t.key):fc(f,t.data.field(l.field)),"desc"===l.dir&&(i*=-1),0!==i)break}return i}function Ug(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pu(n.position[t],e.position[t]))return!1;return!0}class Bg{}class kn extends Bg{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new sw(e,t,i):"array-contains"===t?new zf(e,i):"in"===t?new Hv(e,i):"not-in"===t?new Hg(e,i):"array-contains-any"===t?new uw(e,i):new kn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new ow(e,i):new aw(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(fc(t,this.value)):null!==t&&Xc(this.value)===Xc(t)&&this.matchesComparison(fc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return d()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class dr extends Bg{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new dr(e,t)}matches(e){return vh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function vh(n){return"and"===n.op}function Bv(n){return"or"===n.op}function _h(n){return Gf(n)&&vh(n)}function Gf(n){for(const e of n.filters)if(e instanceof dr)return!1;return!0}function jv(n){if(n instanceof kn)return n.field.canonicalString()+n.op.toString()+na(n.value);if(_h(n))return n.filters.map(e=>jv(e)).join(",");{const e=n.filters.map(t=>jv(t)).join(",");return`${n.op}(${e})`}}function iw(n,e){return n instanceof kn?(t=n,(i=e)instanceof kn&&t.op===i.op&&t.field.isEqual(i.field)&&pu(t.value,i.value)):n instanceof dr?function(t,i){return i instanceof dr&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((a,l,f)=>a&&iw(l,i.filters[f]),!0)}(n,e):void d();var t,i}function jg(n,e){const t=n.filters.concat(e);return dr.create(t,n.op)}function $v(n){return n instanceof kn?`${(e=n).field.canonicalString()} ${e.op} ${na(e.value)}`:n instanceof dr?function(e){return e.op.toString()+" {"+e.getFilters().map($v).join(" ,")+"}"}(n):"Filter";var e}class sw extends kn{constructor(e,t,i){super(e,t,i),this.key=Et.fromName(i.referenceValue)}matches(e){const t=Et.comparator(e.key,this.key);return this.matchesComparison(t)}}class ow extends kn{constructor(e,t){super(e,"in",t),this.keys=$g(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aw extends kn{constructor(e,t){super(e,"not-in",t),this.keys=$g(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $g(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Et.fromName(i.referenceValue))}class zf extends kn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $f(t)&&yh(t.arrayValue,this.value)}}class Hv extends kn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yh(this.value.arrayValue,t)}}class Hg extends kn{constructor(e,t){super(e,"not-in",t)}matches(e){if(yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yh(this.value.arrayValue,t)}}class uw extends kn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>yh(this.value.arrayValue,i))}}class Fr{constructor(e,t="asc"){this.field=e,this.dir=t}}function cw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fi{constructor(e,t){this.comparator=e,this.root=t||os.EMPTY}insert(e,t){return new fi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,os.BLACK,null,null))}remove(e){return new fi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,os.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class os{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??os.RED,this.left=a??os.EMPTY,this.right=l??os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new os(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return os.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw d();const e=this.left.check();if(e!==this.right.check())throw d();return e+(this.isRed()?0:1)}}os.EMPTY=null,os.RED=!0,os.BLACK=!1,os.EMPTY=new class{constructor(){this.size=0}get key(){throw d()}get value(){throw d()}get color(){throw d()}get left(){throw d()}get right(){throw d()}copy(n,e,t,i,a){return this}insert(n,e,t){return new os(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hr{constructor(e){this.comparator=e,this.data=new fi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hr(this.comparator);return t.data=e,t}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nd(n){return n.hasNext()?n.getNext():void 0}class ko{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new ko([])}unionWith(e){let t=new hr(Qr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ko(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uu(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class as{constructor(e){this.value=e}static empty(){return new as({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(t)}setAll(e){let t=Qr.emptyPath(),i={},a=[];e.forEach((f,w)=>{if(!t.isImmediateParentOf(w)){const M=this.getFieldsMap(t);this.applyChanges(M,i,a),i={},a=[],t=w.popLast()}f?i[w.lastSegment()]=Xl(f):a.push(w.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Vg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Vg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){hu(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new as(Xl(this.value))}}function lw(n){const e=[];return hu(n.fields,(t,i)=>{const a=new Qr([t]);if(Vg(i)){const l=lw(i.mapValue).fields;if(0===l.length)e.push(a);else for(const f of l)e.push(a.child(f))}else e.push(a)}),new ko(e)}class Jr{constructor(e,t,i,a,l,f,w){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=f,this.documentState=w}static newInvalidDocument(e){return new Jr(e,0,Gt.min(),Gt.min(),Gt.min(),as.empty(),0)}static newFoundDocument(e,t,i,a){return new Jr(e,1,t,Gt.min(),i,a,0)}static newNoDocument(e,t){return new Jr(e,2,t,Gt.min(),Gt.min(),as.empty(),0)}static newUnknownDocument(e,t){return new Jr(e,3,t,Gt.min(),Gt.min(),as.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Eh{constructor(e,t=null,i=[],a=[],l=null,f=null,w=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=f,this.endAt=w,this.ft=null}}function wh(n,e=null,t=[],i=[],a=null,l=null,f=null){return new Eh(n,e,t,i,a,l,f)}function pc(n){const e=P(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>jv(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),Za(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>na(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>na(i)).join(",")),e.ft=t}return e.ft}function rd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ug(n.startAt,e.startAt)&&Ug(n.endAt,e.endAt)}function Ih(n){return Et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Gg(n,e){return n.filters.filter(t=>t instanceof kn&&t.field.isEqual(e))}function zv(n,e,t){let i=mh,a=!0;for(const l of Gg(n,e)){let f=mh,w=!0;switch(l.op){case"<":case"<=":f=nw(l.value);break;case"==":case"in":case">=":f=l.value;break;case">":f=l.value,w=!1;break;case"!=":case"not-in":f=mh}Uv({value:i,inclusive:a},{value:f,inclusive:w})<0&&(i=f,a=w)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const f=t.position[l];Uv({value:i,inclusive:a},{value:f,inclusive:t.inclusive})<0&&(i=f,a=t.inclusive);break}return{value:i,inclusive:a}}function zg(n,e,t){let i=Hu,a=!0;for(const l of Gg(n,e)){let f=Hu,w=!0;switch(l.op){case">=":case">":f=rw(l.value),w=!1;break;case"==":case"in":case"<=":f=l.value;break;case"<":f=l.value,w=!1;break;case"!=":case"not-in":f=Hu}Hf({value:i,inclusive:a},{value:f,inclusive:w})>0&&(i=f,a=w)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const f=t.position[l];Hf({value:i,inclusive:a},{value:f,inclusive:t.inclusive})>0&&(i=f,a=t.inclusive);break}return{value:i,inclusive:a}}class gu{constructor(e,t=null,i=[],a=[],l=null,f="F",w=null,M=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=f,this.startAt=w,this.endAt=M,this.dt=null,this._t=null}}function Wf(n,e,t,i,a,l,f,w){return new gu(n,e,t,i,a,l,f,w)}function Dh(n){return new gu(n)}function qf(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Wg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function id(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Zf(n){return null!==n.collectionGroup}function gc(n){const e=P(n);if(null===e.dt){e.dt=[];const t=id(e),i=Wg(e);if(null!==t&&null===i)t.isKeyField()||e.dt.push(new Fr(t)),e.dt.push(new Fr(Qr.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.dt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Fr(Qr.keyField(),l))}}}return e.dt}function bi(n){const e=P(n);if(!e._t)if("F"===e.limitType)e._t=wh(e.path,e.collectionGroup,gc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of gc(e))t.push(new Fr(l.field,"desc"===l.dir?"asc":"desc"));const i=e.endAt?new js(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new js(e.startAt.position,e.startAt.inclusive):null;e._t=wh(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e._t}function qg(n,e){e.getFirstInequalityField(),id(n);const t=n.filters.concat([e]);return new gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sd(n,e,t){return new gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mc(n,e){return rd(bi(n),bi(e))&&n.limitType===e.limitType}function Wv(n){return`${pc(bi(n))}|lt:${n.limitType}`}function bh(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>$v(i)).join(", ")}]`),Za(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(a=i).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>na(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>na(i)).join(",")),`Target(${t})`}(bi(n))}; limitType=${n.limitType})`}function yc(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Et.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of gc(t))if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,l,f){const w=ed(a,l,f);return a.inclusive?w<=0:w<0}(t.startAt,gc(t),i)||t.endAt&&!function(a,l,f){const w=ed(a,l,f);return a.inclusive?w>=0:w>0}(t.endAt,gc(t),i)));var t,i}function vc(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zg(n){return(e,t)=>{let i=!1;for(const a of gc(n)){const l=Kg(a,e,t);if(0!==l)return l;i=i||a.field.isKeyField()}return 0}}function Kg(n,e,t){const i=n.field.isKeyField()?Et.comparator(e.key,t.key):function(a,l,f){const w=l.data.field(a),M=f.data.field(a);return null!==w&&null!==M?fc(w,M):d()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return d()}}function qv(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function Zv(n){return{integerValue:""+n}}function Yg(n,e){return kv(e)?Zv(e):qv(n,e)}class Gu{constructor(){this._=void 0}}function dw(n,e,t){return n instanceof _c?function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof nl?Qg(n,e):n instanceof rl?Jg(n,e):function(i,a){const l=Kv(i,a),f=Yv(l)+Yv(i.gt);return Lv(l)&&Lv(i.gt)?Zv(f):qv(i.yt,f)}(n,e)}function hw(n,e,t){return n instanceof nl?Qg(n,e):n instanceof rl?Jg(n,e):t}function Kv(n,e){return n instanceof Ch?Lv(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class _c extends Gu{}class nl extends Gu{constructor(e){super(),this.elements=e}}function Qg(n,e){const t=od(e);for(const i of n.elements)t.some(a=>pu(a,i))||t.push(i);return{arrayValue:{values:t}}}class rl extends Gu{constructor(e){super(),this.elements=e}}function Jg(n,e){let t=od(e);for(const i of n.elements)t=t.filter(a=>!pu(a,i));return{arrayValue:{values:t}}}class Ch extends Gu{constructor(e,t){super(),this.yt=e,this.gt=t}}function Yv(n){return ai(n.integerValue||n.doubleValue)}function od(n){return $f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Th{constructor(e,t){this.field=e,this.transform=t}}class Sh{constructor(e,t){this.version=e,this.transformResults=t}}class Xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Kf{}function Qv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ld(n.key,Xr.none()):new Ec(n.key,n.data,Xr.none());{const t=n.data,i=as.empty();let a=new hr(Qr.comparator);for(let l of e.fields)if(!a.has(l)){let f=t.field(l);null===f&&l.length>1&&(l=l.popLast(),f=t.field(l)),null===f?i.delete(l):i.set(l,f),a=a.add(l)}return new zu(n.key,i,new ko(a.toArray()),Xr.none())}}function fw(n,e,t){n instanceof Ec?function(i,a,l){const f=i.value.clone(),w=cd(i.fieldTransforms,a,l.transformResults);f.setAll(w),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):n instanceof zu?function(i,a,l){if(!Ah(i.precondition,a))return void a.convertToUnknownDocument(l.version);const f=cd(i.fieldTransforms,a,l.transformResults),w=a.data;w.setAll(Qf(i)),w.setAll(f),a.convertToFoundDocument(l.version,w).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ud(n,e,t,i){return n instanceof Ec?function(a,l,f,w){if(!Ah(a.precondition,l))return f;const M=a.value.clone(),F=Xv(a.fieldTransforms,w,l);return M.setAll(F),l.convertToFoundDocument(l.version,M).setHasLocalMutations(),null}(n,e,t,i):n instanceof zu?function(a,l,f,w){if(!Ah(a.precondition,l))return f;const M=Xv(a.fieldTransforms,w,l),F=l.data;return F.setAll(Qf(a)),F.setAll(M),l.convertToFoundDocument(l.version,F).setHasLocalMutations(),null===f?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(W=>W.field))}(n,e,t,i):(f=t,Ah(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f);var l,f}function Jv(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=Kv(i.transform,a||null);null!=l&&(null===t&&(t=as.empty()),t.set(i.field,l))}return t||null}function Yf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Uu(t,i,(a,l)=>function ad(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof nl&&i instanceof nl||t instanceof rl&&i instanceof rl?Uu(t.elements,i.elements,pu):t instanceof Ch&&i instanceof Ch?pu(t.gt,i.gt):t instanceof _c&&i instanceof _c);var t,i}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Ec extends Kf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zu extends Kf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Qf(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function cd(n,e,t){const i=new Map;g(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],f=l.transform,w=e.data.field(l.field);i.set(l.field,hw(f,w,t[a]))}return i}function Xv(n,e,t){const i=new Map;for(const a of n){const l=a.transform,f=t.data.field(a.field);i.set(a.field,dw(l,f,e))}return i}class ld extends Kf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xg extends Kf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pw{constructor(e){this.count=e}}var Ci,Gn;function e_(n){switch(n){default:return d();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function il(n){if(void 0===n)return oi("GRPC error has no .code"),L.UNKNOWN;switch(n){case Ci.OK:return L.OK;case Ci.CANCELLED:return L.CANCELLED;case Ci.UNKNOWN:return L.UNKNOWN;case Ci.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ci.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ci.INTERNAL:return L.INTERNAL;case Ci.UNAVAILABLE:return L.UNAVAILABLE;case Ci.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ci.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ci.NOT_FOUND:return L.NOT_FOUND;case Ci.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ci.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ci.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ci.ABORTED:return L.ABORTED;case Ci.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ci.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ci.DATA_LOSS:return L.DATA_LOSS;default:return d()}}(Gn=Ci||(Ci={}))[Gn.OK=0]="OK",Gn[Gn.CANCELLED=1]="CANCELLED",Gn[Gn.UNKNOWN=2]="UNKNOWN",Gn[Gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gn[Gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gn[Gn.NOT_FOUND=5]="NOT_FOUND",Gn[Gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gn[Gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gn[Gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gn[Gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gn[Gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gn[Gn.ABORTED=10]="ABORTED",Gn[Gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gn[Gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gn[Gn.INTERNAL=13]="INTERNAL",Gn[Gn.UNAVAILABLE=14]="UNAVAILABLE",Gn[Gn.DATA_LOSS=15]="DATA_LOSS";class $s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,l]of i)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){hu(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return jf(this.inner)}size(){return this.innerSize}}const gw=new fi(Et.comparator);function Fo(){return gw}const mw=new fi(Et.comparator);function Jf(...n){let e=mw;for(const t of n)e=e.insert(t.key,t);return e}function em(n){let e=mw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Wu(){return dd()}function tm(){return dd()}function dd(){return new $s(n=>n.toString(),(n,e)=>n.isEqual(e))}const yw=new fi(Et.comparator),t_=new hr(Et.comparator);function vn(...n){let e=t_;for(const t of n)e=e.add(t);return e}const vw=new hr(rn);function Lo(){return vw}class xh{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,hd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new xh(Gt.min(),a,Lo(),Fo(),vn())}}class hd{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new hd(i,t,vn(),vn(),vn())}}class Xf{constructor(e,t,i,a){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=a}}class n_{constructor(e,t){this.targetId=e,this.Et=t}}class r_{constructor(e,t,i=Xi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class i_{constructor(){this.At=0,this.Rt=a_(),this.bt=Xi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=vn(),t=vn(),i=vn();return this.Rt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:d()}}),new hd(this.bt,this.Pt,e,t,i)}xt(){this.vt=!1,this.Rt=a_()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class s_{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Fo(),this.qt=o_(),this.Ut=new hr(rn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const i=this.Wt(t);switch(e.state){case 0:this.zt(t)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:d()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,a)=>{this.zt(a)&&t(a)})}Jt(e){const t=e.targetId,i=e.Et.count,a=this.Yt(t);if(a){const l=a.target;if(Ih(l))if(0===i){const f=new Et(l.path);this.Qt(t,f,Jr.newNoDocument(f,Gt.min()))}else g(1===i);else this.Xt(t)!==i&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((l,f)=>{const w=this.Yt(f);if(w){if(l.current&&Ih(w.target)){const M=new Et(w.target.path);null!==this.Lt.get(M)||this.te(f,M)||this.Qt(f,M,Jr.newNoDocument(M,e))}l.St&&(t.set(f,l.Ct()),l.xt())}});let i=vn();this.qt.forEach((l,f)=>{let w=!0;f.forEachWhile(M=>{const F=this.Yt(M);return!F||2===F.purpose||(w=!1,!1)}),w&&(i=i.add(l))}),this.Lt.forEach((l,f)=>f.setReadTime(e));const a=new xh(e,t,this.Ut,this.Lt,i);return this.Lt=Fo(),this.qt=o_(),this.Ut=new hr(rn),a}Gt(e,t){if(!this.zt(e))return;const i=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.zt(e))return;const a=this.Wt(e);this.te(e,t)?a.Nt(t,1):a.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new i_,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new hr(rn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||ot("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new i_),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function o_(){return new fi(Et.comparator)}function a_(){return new fi(Et.comparator)}const _w={asc:"ASCENDING",desc:"DESCENDING"},hn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u_={and:"AND",or:"OR"};class c_{constructor(e,t){this.databaseId=e,this.wt=t}}function sl(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l_(n,e){return n.wt?e.toBase64():e.toUint8Array()}function Ew(n,e){return sl(n,e.toTimestamp())}function pi(n){return g(!!n),Gt.fromTimestamp(function(e){const t=hc(e);return new lr(t.seconds,t.nanos)}(n))}function nm(n,e){return(t=n,new Rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function rm(n){const e=Rn.fromString(n);return g(y_(e)),e}function Mh(n,e){return nm(n.databaseId,e.path)}function mu(n,e){const t=rm(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Et(wc(t))}function d_(n,e){return nm(n.databaseId,e)}function im(n){const e=rm(n);return 4===e.length?Rn.emptyPath():wc(e)}function fd(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wc(n){return g(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function h_(n,e,t){return{name:Mh(n,e),fields:t.value.mapValue.fields}}function ep(n,e,t){const i=mu(n,e.name),a=pi(e.updateTime),l=e.createTime?pi(e.createTime):Gt.min(),f=new as({mapValue:{fields:e.fields}}),w=Jr.newFoundDocument(i,a,l,f);return t&&w.setHasCommittedMutations(),t?w.setHasCommittedMutations():w}function tp(n,e){let t;if(e instanceof Ec)t={update:h_(n,e.key,e.value)};else if(e instanceof ld)t={delete:Mh(n,e.key)};else if(e instanceof zu)t={update:h_(n,e.key,e.data),updateMask:Cw(e.fieldMask)};else{if(!(e instanceof Xg))return d();t={verify:Mh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,l){const f=l.transform;if(f instanceof _c)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof nl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof rl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ch)return{fieldPath:l.field.canonicalString(),increment:f.gt};throw d()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Ew(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:d()),t;var a}function f_(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Xr.updateTime(pi(a.updateTime)):void 0!==a.exists?Xr.exists(a.exists):Xr.none():Xr.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(l,f){let w=null;"setToServerValue"in f?(g("REQUEST_TIME"===f.setToServerValue),w=new _c):"appendMissingElements"in f?w=new nl(f.appendMissingElements.values||[]):"removeAllFromArray"in f?w=new rl(f.removeAllFromArray.values||[]):"increment"in f?w=new Ch(l,f.increment):d();const M=Qr.fromServerFormat(f.fieldPath);return new Th(M,w)}(n,a)):[];var a;if(e.update){const a=mu(n,e.update.name),l=new as({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new ko((e.updateMask.fieldPaths||[]).map(F=>Qr.fromServerFormat(F)));return new zu(a,l,f,t,i)}return new Ec(a,l,t,i)}if(e.delete){const a=mu(n,e.delete);return new ld(a,t)}if(e.verify){const a=mu(n,e.verify);return new Xg(a,t)}return d()}function p_(n,e){return{documents:[d_(n,e.path)]}}function np(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=d_(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=d_(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(M){if(0!==M.length)return m_(dr.create(M,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(M){if(0!==M.length)return M.map(F=>{return{field:pd((W=F).field),direction:bw(W.dir)};var W})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=(F=e.limit,n.wt||Za(F)?F:{value:F});var F,w,M;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(w=e.startAt).inclusive,values:w.position}),e.endAt&&(t.structuredQuery.endAt={before:!(M=e.endAt).inclusive,values:M.position}),t}function Iw(n){let e=im(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){g(1===i);const W=t.from[0];W.allDescendants?a=W.collectionId:e=e.child(W.collectionId)}let l=[];t.where&&(l=function(W){const ne=ol(W);return ne instanceof dr&&_h(ne)?ne.getFilters():[ne]}(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(W=>{return new Fr(al((ne=W).field),function(Ee){switch(Ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ne.direction));var ne}));let w=null;t.limit&&(w=function(W){let ne;return ne="object"==typeof W?W.value:W,Za(ne)?null:ne}(t.limit));let M=null;var W;t.startAt&&(M=new js((W=t.startAt).values||[],!!W.before));let F=null;return t.endAt&&(F=function(W){return new js(W.values||[],!W.before)}(t.endAt)),Wf(e,a,f,l,w,"F",M,F)}function ol(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=al(e.unaryFilter.field);return kn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=al(e.unaryFilter.field);return kn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=al(e.unaryFilter.field);return kn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=al(e.unaryFilter.field);return kn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return d()}}(n):void 0!==n.fieldFilter?kn.create(al((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return d()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return dr.create(e.compositeFilter.filters.map(t=>ol(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return d()}}(e.compositeFilter.op))}(n):d();var e}function bw(n){return _w[n]}function g_(n){return hn[n]}function rp(n){return u_[n]}function pd(n){return{fieldPath:n.canonicalString()}}function al(n){return Qr.fromServerFormat(n.fieldPath)}function m_(n){return n instanceof kn?function(e){if("=="===e.op){if(tw(e.value))return{unaryFilter:{field:pd(e.field),op:"IS_NAN"}};if(ew(e.value))return{unaryFilter:{field:pd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(tw(e.value))return{unaryFilter:{field:pd(e.field),op:"IS_NOT_NAN"}};if(ew(e.value))return{unaryFilter:{field:pd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pd(e.field),op:g_(e.op),value:e.value}}}(n):n instanceof dr?function(e){const t=e.getFilters().map(i=>m_(i));return 1===t.length?t[0]:{compositeFilter:{op:rp(e.op),filters:t}}}(n):d()}function Cw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function y_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function lo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=om(e)),e=Tw(n.get(t),e);return om(e)}function Tw(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function om(n){return n+"\x01\x01"}function yu(n){const e=n.length;if(g(e>=2),2===e)return g("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const f=n.indexOf("\x01",l);switch((f<0||f>t)&&d(),n.charAt(f+1)){case"\x01":const w=n.substring(l,f);let M;0===a.length?M=w:(a+=w,M=a,a=""),i.push(M);break;case"\x10":a+=n.substring(l,f),a+="\0";break;case"\x11":a+=n.substring(l,f+1);break;default:d()}l=f+2}return new Rn(i)}const am=["userId","batchId"];function Rh(n,e){return[n,lo(e)]}function ip(n,e,t){return[n,lo(e),t]}const MD={},um=["prefixPath","collectionGroup","readTime","documentId"],Sw=["prefixPath","collectionGroup","documentId"],RD=["collectionGroup","readTime","prefixPath","documentId"],gd=["canonicalId","targetId"],v_=["targetId","path"],Aw=["path","targetId"],__=["collectionId","parent"],xw=["indexId","uid"],Mw=["uid","sequenceNumber"],sp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],md=["indexId","uid","orderedDocumentKey"],cm=["userId","collectionPath","documentId"],Oh=["userId","collectionPath","largestBatchId"],lm=["userId","collectionGroup","largestBatchId"],Nh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],E_=[...Nh,"documentOverlays"],op=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ap=op,dm=[...ap,"indexConfiguration","indexState","indexEntries"];class up extends Og{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Hi(n,e){const t=P(n);return Po.M(t.se,e)}class hm{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&fw(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ud(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ud(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=tm();return this.mutations.forEach(a=>{const l=e.get(a.key),f=l.overlayedDocument;let w=this.applyToLocalView(f,l.mutatedFields);w=t.has(a.key)?null:w;const M=Qv(f,w);null!==M&&i.set(a.key,M),f.isValidDocument()||f.convertToNoDocument(Gt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vn())}isEqual(e){return this.batchId===e.batchId&&Uu(this.mutations,e.mutations,(t,i)=>Yf(t,i))&&Uu(this.baseMutations,e.baseMutations,(t,i)=>Yf(t,i))}}class fm{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){g(e.mutations.length===i.length);let a=yw;const l=e.mutations;for(let f=0;f<l.length;f++)a=a.insert(l[f].key,i[f].version);return new fm(e,t,i,a)}}class cp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ic{constructor(e,t,i,a,l=Gt.min(),f=Gt.min(),w=Xi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=w}withSequenceNumber(e){return new Ic(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ic(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ic(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class pm{constructor(e){this.ie=e}}function I_(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Mh(a=n.ie,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:sl(a,l.version.toTimestamp()),createTime:sl(a,l.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:es(e.version)};else{if(!e.isUnknownDocument())return d();i.unknownDocument={path:t.path.toArray(),version:es(e.version)}}var a,l;return i}function lp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function es(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dc(n){const e=new lr(n.seconds,n.nanoseconds);return Gt.fromTimestamp(e)}function ul(n,e){const t=(e.baseMutations||[]).map(l=>f_(n.ie,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const i=e.mutations.map(l=>f_(n.ie,l)),a=lr.fromMillis(e.localWriteTimeMs);return new hm(e.batchId,a,t,i)}function dp(n){const e=Dc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Dc(n.lastLimboFreeSnapshotVersion):Gt.min();let i;var a;return void 0!==n.query.documents?(g(1===(a=n.query).documents.length),i=bi(Dh(im(a.documents[0])))):i=bi(Iw(n.query)),new Ic(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Xi.fromBase64String(n.resumeToken))}function hp(n,e){const t=es(e.snapshotVersion),i=es(e.lastLimboFreeSnapshotVersion);let a;a=Ih(e.target)?p_(n.ie,e.target):np(n.ie,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pc(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function fp(n){const e=Iw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?sd(e,e.limit,"L"):e}function gm(n,e){return new cp(e.largestBatchId,f_(n.ie,e.overlayMutation))}function D_(n,e){const t=e.path.lastSegment();return[n,lo(e.path.popLast()),t]}function b_(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:es(i.readTime),documentKey:lo(i.documentKey.path),largestBatchId:i.largestBatchId}}class C_{getBundleMetadata(e,t){return T_(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:Dc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return T_(e).put({bundleId:(i=t).id,createTime:es(pi(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return S_(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:fp(a.bundledQuery),readTime:Dc(a.readTime)};var a})}saveNamedQuery(e,t){return S_(e).put({name:(i=t).name,readTime:es(pi(i.readTime)),bundledQuery:i.bundledQuery});var i}}function T_(n){return Hi(n,"bundles")}function S_(n){return Hi(n,"namedQueries")}class yd{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new yd(e,t.uid||"")}getOverlay(e,t){return Ph(e).get(D_(this.userId,t)).next(i=>i?gm(this.yt,i):null)}getOverlays(e,t){const i=Wu();return xe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((l,f)=>{const w=new cp(t,f);a.push(this.oe(e,w))}),xe.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(f=>a.add(lo(f.getCollectionPath())));const l=[];return a.forEach(f=>{const w=IDBKeyRange.bound([this.userId,f,i],[this.userId,f,i+1],!1,!0);l.push(Ph(e).Y("collectionPathOverlayIndex",w))}),xe.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Wu(),l=lo(t),f=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ph(e).W("collectionPathOverlayIndex",f).next(w=>{for(const M of w){const F=gm(this.yt,M);a.set(F.getKey(),F)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const l=Wu();let f;const w=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ph(e).Z({index:"collectionGroupOverlayIndex",range:w},(M,F,W)=>{const ne=gm(this.yt,F);l.size()<a||ne.largestBatchId===f?(l.set(ne.getKey(),ne),f=ne.largestBatchId):W.done()}).next(()=>l)}oe(e,t){return Ph(e).put(function(i,a,l){const[f,w,M]=D_(a,l.mutation.key);return{userId:a,collectionPath:w,documentId:M,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:tp(i.ie,l.mutation)}}(this.yt,this.userId,t))}}function Ph(n){return Hi(n,"documentOverlays")}class cl{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ai(e.integerValue));else if("doubleValue"in e){const i=ai(e.doubleValue);isNaN(i)?this.he(t,13):(this.he(t,15),ph(i)?t.le(0):t.le(i))}else if("timestampValue"in e){const i=e.timestampValue;this.he(t,20),"string"==typeof i?t.fe(i):(t.fe(`${i.seconds||""}`),t.le(i.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(fu(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?Vv(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):d()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const i=e.fields||{};this.he(t,55);for(const a of Object.keys(i))this.de(a,t),this.ce(i[a],t)}ye(e,t){const i=e.values||[];this.he(t,50);for(const a of i)this.ce(a,t)}me(e,t){this.he(t,37),Et.fromName(e).path.forEach(i=>{this.he(t,60),this.pe(i,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Rw(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function A_(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const l=Rw(255&t[a]);if(i+=l,8!==l)break}return i}(n);return Math.ceil(e/8)}cl.Ie=new cl;class Ow{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ee(i.value),i=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.be(i.value),i=t.next();this.Pe()}ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const a=t.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}this.Ae()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const a=t.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}this.Pe()}Se(e){const t=this.De(e),i=A_(t);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}xe(e){const t=this.De(e),i=A_(t);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class vu{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class mm{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class kh{constructor(){this.$e=new Ow,this.Be=new vu(this.$e),this.Le=new mm(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class ll{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ll(this.indexId,this.documentKey,this.arrayValue,i)}}function qu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=x_(n.arrayValue,e.arrayValue),0!==t?t:(t=x_(n.directionalValue,e.directionalValue),0!==t?t:Et.comparator(n.documentKey,e.documentKey)))}function x_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Nw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const i=t;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(e){g(e.collectionGroup===this.collectionId);const t=Mg(e);if(void 0!==t&&!this.We(t))return!1;const i=Qc(e);let a=0,l=0;for(;a<i.length&&this.We(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.Qe){const f=i[a];if(!this.ze(this.Qe,f)||!this.He(this.Ke[l++],f))return!1;++a}for(;a<i.length;++a)if(l>=this.Ke.length||!this.He(this.Ke[l++],i[a]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function M_(n){var e,t;if(g(n instanceof kn||n instanceof dr),n instanceof kn){if(n instanceof Hv){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>kn.create(n.field,"==",l)))||[];return dr.create(a,"or")}return n}const i=n.filters.map(a=>M_(a));return dr.create(i,n.op)}function ym(n){if(0===n.getFilters().length)return[];const e=Lh(M_(n));return g(Fh(e)),vm(e)||_m(e)?[e]:e.getFilters()}function vm(n){return n instanceof kn}function _m(n){return n instanceof dr&&_h(n)}function Fh(n){return vm(n)||_m(n)||function(e){if(e instanceof dr&&Bv(e)){for(const t of e.getFilters())if(!vm(t)&&!_m(t))return!1;return!0}return!1}(n)}function Lh(n){if(g(n instanceof kn||n instanceof dr),n instanceof kn)return n;if(1===n.filters.length)return Lh(n.filters[0]);const e=n.filters.map(i=>Lh(i));let t=dr.create(e,n.op);return t=_d(t),Fh(t)?t:(g(t instanceof dr),g(vh(t)),g(t.filters.length>1),t.filters.reduce((i,a)=>vd(i,a)))}function vd(n,e){let t;return g(n instanceof kn||n instanceof dr),g(e instanceof kn||e instanceof dr),t=n instanceof kn?e instanceof kn?dr.create([n,e],"and"):Pw(n,e):e instanceof kn?Pw(e,n):function(i,a){if(g(i.filters.length>0&&a.filters.length>0),vh(i)&&vh(a))return jg(i,a.getFilters());const l=Bv(i)?i:a,f=Bv(i)?a:i,w=l.filters.map(M=>vd(M,f));return dr.create(w,"or")}(n,e),_d(t)}function Pw(n,e){if(vh(e))return jg(e,n.getFilters());{const t=e.filters.map(i=>vd(n,i));return dr.create(t,"or")}}function _d(n){if(g(n instanceof kn||n instanceof dr),n instanceof kn)return n;const e=n.getFilters();if(1===e.length)return _d(e[0]);if(Gf(n))return n;const t=e.map(a=>_d(a)),i=[];return t.forEach(a=>{a instanceof kn?i.push(a):a instanceof dr&&(a.op===n.op?i.push(...a.filters):i.push(a))}),1===i.length?i[0]:dr.create(i,n.op)}class OD{constructor(){this.Je=new pp}addToCollectionParentIndex(e,t){return this.Je.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(va.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(va.min())}updateCollectionGroup(e,t,i){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class pp{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new hr(Rn.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new hr(Rn.comparator)).toArray()}}const Vh=new Uint8Array(0);class R_{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new pp,this.Xe=new $s(i=>pc(i),(i,a)=>rd(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const l={collectionId:i,parent:lo(a)};return Em(e).put(l)}return xe.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[dh(t),""],!1,!0);return Em(e).W(a).next(l=>{for(const f of l){if(f.collectionId!==t)break;i.push(yu(f.parent))}return i})}addFieldIndex(e,t){const i=_a(e),a={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(w=>[w.fieldPath.canonicalString(),w.kind])};var f;delete a.indexId;const l=i.add(a);if(t.indexState){const f=bc(e);return l.next(w=>{f.put(b_(w,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const i=_a(e),a=bc(e),l=dl(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=dl(e);let a=!0;const l=new Map;return xe.forEach(this.Ze(t),f=>this.tn(e,f).next(w=>{a&&(a=!!w),l.set(f,w)})).next(()=>{if(a){let f=vn();const w=[];return xe.forEach(l,(M,F)=>{var W;ot("IndexedDbIndexManager",`Using index ${W=M,`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(Bn=>`${Bn.fieldPath}:${Bn.kind}`).join(",")}`} to execute ${pc(t)}`);const ne=function(Bn,An){const In=Mg(An);if(void 0===In)return null;for(const On of Gg(Bn,In.fieldPath))switch(On.op){case"array-contains-any":return On.value.arrayValue.values||[];case"array-contains":return[On.value]}return null}(F,M),Ee=function(Bn,An){const In=new Map;for(const On of Qc(An))for(const Cs of Gg(Bn,On.fieldPath))switch(Cs.op){case"==":case"in":In.set(On.fieldPath.canonicalString(),Cs.value);break;case"not-in":case"!=":return In.set(On.fieldPath.canonicalString(),Cs.value),Array.from(In.values())}return null}(F,M),Ye=function(Bn,An){const In=[];let On=!0;for(const Cs of Qc(An)){const Mv=0===Cs.kind?zv(Bn,Cs.fieldPath,Bn.startAt):zg(Bn,Cs.fieldPath,Bn.startAt);In.push(Mv.value),On&&(On=Mv.inclusive)}return new js(In,On)}(F,M),tt=function(Bn,An){const In=[];let On=!0;for(const Cs of Qc(An)){const Mv=0===Cs.kind?zg(Bn,Cs.fieldPath,Bn.endAt):zv(Bn,Cs.fieldPath,Bn.endAt);In.push(Mv.value),On&&(On=Mv.inclusive)}return new js(In,On)}(F,M),wt=this.en(M,F,Ye),Vt=this.en(M,F,tt),Qn=this.nn(M,F,Ee),xr=this.sn(M.indexId,ne,wt,Ye.inclusive,Vt,tt.inclusive,Qn);return xe.forEach(xr,Bn=>i.J(Bn,t.limit).next(An=>{An.forEach(In=>{const On=Et.fromSegments(In.documentKey);f.has(On)||(f=f.add(On),w.push(On))})}))}).next(()=>w)}return xe.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:ym(dr.create(e.filters,"and")).map(i=>wh(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,i,a,l,f,w){const M=(null!=t?t.length:1)*Math.max(i.length,l.length),F=M/(null!=t?t.length:1),W=[];for(let ne=0;ne<M;++ne){const Ee=t?this.rn(t[ne/F]):Vh,Ye=this.on(e,Ee,i[ne%F],a),tt=this.un(e,Ee,l[ne%F],f),wt=w.map(Vt=>this.on(e,Ee,Vt,!0));W.push(...this.createRange(Ye,tt,wt))}return W}on(e,t,i,a){const l=new ll(e,Et.empty(),t,i);return a?l:l.Ue()}un(e,t,i,a){const l=new ll(e,Et.empty(),t,i);return a?l.Ue():l}tn(e,t){const i=new Nw(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let f=null;for(const w of l)i.je(w)&&(!f||w.fields.length>f.fields.length)&&(f=w);return f})}getIndexType(e,t){let i=2;const a=this.Ze(t);return xe.forEach(a,l=>this.tn(e,l).next(f=>{f?0!==i&&f.fields.length<function(w){let M=new hr(Qr.comparator),F=!1;for(const W of w.filters)for(const ne of W.getFlattenedFilters())ne.field.isKeyField()||("array-contains"===ne.op||"array-contains-any"===ne.op?F=!0:M=M.add(ne.field));for(const W of w.orderBy)W.field.isKeyField()||(M=M.add(W.field));return M.size+(F?1:0)}(l)&&(i=1):i=0})).next(()=>null!==t.limit&&a.length>1&&2===i?1:i)}cn(e,t){const i=new kh;for(const a of Qc(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const f=i.qe(a.kind);cl.Ie.ue(l,f)}return i.Fe()}rn(e){const t=new kh;return cl.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const i=new kh;return cl.Ie.ue(tl(this.databaseId,t),i.qe(function(a){const l=Qc(a);return 0===l.length?0:l[l.length-1].kind}(e))),i.Fe()}nn(e,t,i){if(null===i)return[];let a=[];a.push(new kh);let l=0;for(const f of Qc(e)){const w=i[l++];for(const M of a)if(this.hn(t,f.fieldPath)&&$f(w))a=this.ln(a,f,w);else{const F=M.qe(f.kind);cl.Ie.ue(w,F)}}return this.fn(a)}en(e,t,i){return this.nn(e,t,i.position)}fn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Fe();return t}ln(e,t,i){const a=[...e],l=[];for(const f of i.arrayValue.values||[])for(const w of a){const M=new kh;M.seed(w.Fe()),cl.Ie.ue(f,M.qe(t.kind)),l.push(M)}return l}hn(e,t){return!!e.filters.find(i=>i instanceof kn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=_a(e),a=bc(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(l=>{const f=[];return xe.forEach(l,w=>a.get([w.indexId,this.uid]).next(M=>{f.push(function(F,W){const ne=W?new Zl(W.sequenceNumber,new va(Dc(W.readTime),new Et(yu(W.documentKey)),W.largestBatchId)):Zl.empty(),Ee=F.fields.map(([Ye,tt])=>new hh(Qr.fromServerFormat(Ye),tt));return new ql(F.indexId,F.collectionGroup,Ee,ne)}(w,M))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:rn(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=_a(e),l=bc(e);return this.dn(e).next(f=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(w=>xe.forEach(w,M=>l.put(b_(M.indexId,this.user,f,i)))))}updateIndexEntries(e,t){const i=new Map;return xe.forEach(t,(a,l)=>{const f=i.get(a.collectionGroup);return(f?xe.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(w=>(i.set(a.collectionGroup,w),xe.forEach(w,M=>this._n(e,a,M).next(F=>{const W=this.wn(l,M);return F.isEqual(W)?xe.resolve():this.mn(e,l,M,F,W)}))))})}gn(e,t,i,a){return dl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.an(i,t.key),documentKey:t.key.path.toArray()})}yn(e,t,i,a){return dl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.an(i,t.key),t.key.path.toArray()])}_n(e,t,i){const a=dl(e);let l=new hr(qu);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,t)])},(f,w)=>{l=l.add(new ll(i.indexId,t,w.arrayValue,w.directionalValue))}).next(()=>l)}wn(e,t){let i=new hr(qu);const a=this.cn(t,e);if(null==a)return i;const l=Mg(t);if(null!=l){const f=e.data.field(l.fieldPath);if($f(f))for(const w of f.arrayValue.values||[])i=i.add(new ll(t.indexId,e.key,this.rn(w),a))}else i=i.add(new ll(t.indexId,e.key,Vh,a));return i}mn(e,t,i,a,l){ot("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(w,M,F,W,ne){const Ee=w.getIterator(),Ye=M.getIterator();let tt=nd(Ee),wt=nd(Ye);for(;tt||wt;){let Vt=!1,Qn=!1;if(tt&&wt){const xr=F(tt,wt);xr<0?Qn=!0:xr>0&&(Vt=!0)}else null!=tt?Qn=!0:Vt=!0;Vt?(W(wt),wt=nd(Ye)):Qn?(ne(tt),tt=nd(Ee)):(tt=nd(Ee),wt=nd(Ye))}}(a,l,qu,w=>{f.push(this.gn(e,t,i,w))},w=>{f.push(this.yn(e,t,i,w))}),xe.waitFor(f)}dn(e){let t=1;return bc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((f,w)=>qu(f,w)).filter((f,w,M)=>!w||0!==qu(f,M[w-1]));const a=[];a.push(e);for(const f of i){const w=qu(f,e),M=qu(f,t);if(0===w)a[0]=e.Ue();else if(w>0&&M<0)a.push(f),a.push(f.Ue());else if(M>0)break}a.push(t);const l=[];for(let f=0;f<a.length;f+=2){if(this.pn(a[f],a[f+1]))return[];l.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,Vh,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,Vh,[]]))}return l}pn(e,t){return qu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Uh)}getMinOffset(e,t){return xe.mapArray(this.Ze(t),i=>this.tn(e,i).next(a=>a||d())).next(Uh)}}function Em(n){return Hi(n,"collectionParents")}function dl(n){return Hi(n,"indexEntries")}function _a(n){return Hi(n,"indexConfiguration")}function bc(n){return Hi(n,"indexState")}function Uh(n){g(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;Kl(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new va(e.readTime,e.documentKey,t)}const Ed={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vo{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Vo(e,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wm(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),l=[],f=IDBKeyRange.only(t.batchId);let w=0;const M=i.Z({range:f},(W,ne,Ee)=>(w++,Ee.delete()));l.push(M.next(()=>{g(1===w)}));const F=[];for(const W of t.mutations){const ne=ip(e,W.key.path,t.batchId);l.push(a.delete(ne)),F.push(W.key)}return xe.waitFor(l).next(()=>F)}function Bh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw d();e=n.noDocument}return JSON.stringify(e).length}Vo.DEFAULT_COLLECTION_PERCENTILE=10,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vo.DEFAULT=new Vo(41943040,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vo.DISABLED=new Vo(-1,0,0);class gp{constructor(e,t,i,a){this.userId=e,this.yt=t,this.indexManager=i,this.referenceDelegate=a,this.In={}}static re(e,t,i,a){g(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new gp(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ea(e).Z({index:"userMutationsIndex",range:i},(a,l,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const l=wd(e),f=Ea(e);return f.add({}).next(w=>{g("number"==typeof w);const M=new hm(w,t,i,a),F=function(Ee,Ye,tt){const wt=tt.baseMutations.map(Qn=>tp(Ee.ie,Qn)),Vt=tt.mutations.map(Qn=>tp(Ee.ie,Qn));return{userId:Ye,batchId:tt.batchId,localWriteTimeMs:tt.localWriteTime.toMillis(),baseMutations:wt,mutations:Vt}}(this.yt,this.userId,M),W=[];let ne=new hr((Ee,Ye)=>rn(Ee.canonicalString(),Ye.canonicalString()));for(const Ee of a){const Ye=ip(this.userId,Ee.key.path,w);ne=ne.add(Ee.key.path.popLast()),W.push(f.put(F)),W.push(l.put(Ye,MD))}return ne.forEach(Ee=>{W.push(this.indexManager.addToCollectionParentIndex(e,Ee))}),e.addOnCommittedListener(()=>{this.In[w]=M.keys()}),xe.waitFor(W).next(()=>M)})}lookupMutationBatch(e,t){return Ea(e).get(t).next(i=>i?(g(i.userId===this.userId),ul(this.yt,i)):null)}Tn(e,t){return this.In[t]?xe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Ea(e).Z({index:"userMutationsIndex",range:a},(f,w,M)=>{w.userId===this.userId&&(g(w.batchId>=i),l=ul(this.yt,w)),M.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Ea(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,l,f)=>{i=l.batchId,f.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ea(e).W("userMutationsIndex",t).next(i=>i.map(a=>ul(this.yt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Rh(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return wd(e).Z({range:a},(f,w,M)=>{const[F,W,ne]=f,Ee=yu(W);if(F===this.userId&&t.path.isEqual(Ee))return Ea(e).get(ne).next(Ye=>{if(!Ye)throw d();g(Ye.userId===this.userId),l.push(ul(this.yt,Ye))});M.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new hr(rn);const a=[];return t.forEach(l=>{const f=Rh(this.userId,l.path),w=IDBKeyRange.lowerBound(f),M=wd(e).Z({range:w},(F,W,ne)=>{const[Ee,Ye,tt]=F,wt=yu(Ye);Ee===this.userId&&l.path.isEqual(wt)?i=i.add(tt):ne.done()});a.push(M)}),xe.waitFor(a).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Rh(this.userId,i),f=IDBKeyRange.lowerBound(l);let w=new hr(rn);return wd(e).Z({range:f},(M,F,W)=>{const[ne,Ee,Ye]=M,tt=yu(Ee);ne===this.userId&&i.isPrefixOf(tt)?tt.length===a&&(w=w.add(Ye)):W.done()}).next(()=>this.En(e,w))}En(e,t){const i=[],a=[];return t.forEach(l=>{a.push(Ea(e).get(l).next(f=>{if(null===f)throw d();g(f.userId===this.userId),i.push(ul(this.yt,f))}))}),xe.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return wm(e.se,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),xe.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return xe.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return wd(e).Z({range:i},(l,f,w)=>{if(l[0]===this.userId){const M=yu(l[1]);a.push(M)}else w.done()}).next(()=>{g(0===a.length)})})}containsKey(e,t){return O_(e,this.userId,t)}Rn(e){return kw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function O_(n,e,t){const i=Rh(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let f=!1;return wd(n).Z({range:l,X:!0},(w,M,F)=>{const[W,ne,Ee]=w;W===e&&ne===a&&(f=!0),F.done()}).next(()=>f)}function Ea(n){return Hi(n,"mutations")}function wd(n){return Hi(n,"documentMutations")}function kw(n){return Hi(n,"mutationQueues")}class hl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new hl(0)}static vn(){return new hl(-1)}}class Fw{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new hl(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Gt.fromTimestamp(new lr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Id(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(g(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let a=0;const l=[];return Id(e).Z((f,w)=>{const M=dp(w);M.sequenceNumber<=t&&null===i.get(M.targetId)&&(a++,l.push(this.removeTargetData(e,M)))}).next(()=>xe.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Id(e).Z((i,a)=>{const l=dp(a);t(l)})}Vn(e){return N_(e).get("targetGlobalKey").next(t=>(g(null!==t),t))}Sn(e,t){return N_(e).put("targetGlobalKey",t)}Dn(e,t){return Id(e).put(hp(this.yt,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=pc(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Id(e).Z({range:a,index:"queryTargetsIndex"},(f,w,M)=>{const F=dp(w);rd(t,F.target)&&(l=F,M.done())}).next(()=>l)}addMatchingKeys(e,t,i){const a=[],l=Cc(e);return t.forEach(f=>{const w=lo(f.path);a.push(l.put({targetId:i,path:w})),a.push(this.referenceDelegate.addReference(e,i,f))}),xe.waitFor(a)}removeMatchingKeys(e,t,i){const a=Cc(e);return xe.forEach(t,l=>{const f=lo(l.path);return xe.waitFor([a.delete([i,f]),this.referenceDelegate.removeReference(e,i,l)])})}removeMatchingKeysForTargetId(e,t){const i=Cc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Cc(e);let l=vn();return a.Z({range:i,X:!0},(f,w,M)=>{const F=yu(f[1]),W=new Et(F);l=l.add(W)}).next(()=>l)}containsKey(e,t){const i=lo(t.path),a=IDBKeyRange.bound([i],[dh(i)],!1,!0);let l=0;return Cc(e).Z({index:"documentTargetsIndex",X:!0,range:a},([f,w],M,F)=>{0!==f&&(l++,F.done())}).next(()=>l>0)}ne(e,t){return Id(e).get(t).next(i=>i?dp(i):null)}}function Id(n){return Hi(n,"targets")}function N_(n){return Hi(n,"targetGlobal")}function Cc(n){return Hi(n,"targetDocuments")}function P_([n,e],[t,i]){const a=rn(n,t);return 0===a?rn(e,i):a}class Lw{constructor(e){this.xn=e,this.buffer=new hr(P_),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();P_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class k_{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ot("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){du(i)?ot("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Bu(i)}yield t.Fn(3e5)}))}}class Im{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return xe.resolve(ta.at);const i=new Lw(t);return this.$n.forEachTarget(e,a=>i.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>i.On(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(Ed)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ed):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let i,a,l,f,w,M,F;const W=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ne=>(ne>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ne}`),a=this.params.maximumSequenceNumbersToCollect):a=ne,f=Date.now(),this.nthSequenceNumber(e,a))).next(ne=>(i=ne,w=Date.now(),this.removeTargets(e,i,t))).next(ne=>(l=ne,M=Date.now(),this.removeOrphanedDocuments(e,i))).next(ne=>(F=Date.now(),Fu()<=pn.in.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-W}ms\n\tDetermined least recently used ${a} in `+(w-f)+`ms\n\tRemoved ${l} targets in `+(M-w)+`ms\n\tRemoved ${ne} documents in `+(F-M)+`ms\nTotal Duration: ${F-W}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:ne})))}}class Vw{constructor(e,t){this.db=e,this.garbageCollector=new Im(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Un(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,a)=>t(a))}addReference(e,t,i){return Dd(e,i)}removeReference(e,t,i){return Dd(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Dd(e,t)}Gn(e,t){return function(i,a){let l=!1;return kw(i).tt(f=>O_(i,f,a).next(w=>(w&&(l=!0),xe.resolve(!w)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Kn(e,(f,w)=>{if(w<=t){const M=this.Gn(e,f).next(F=>{if(!F)return l++,i.getEntry(e,f).next(()=>(i.removeEntry(f,Gt.min()),Cc(e).delete([0,lo(f.path)])))});a.push(M)}}).next(()=>xe.waitFor(a)).next(()=>i.apply(e)).next(()=>l)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Dd(e,t)}Kn(e,t){const i=Cc(e);let a,l=ta.at;return i.Z({index:"documentTargetsIndex"},([f,w],{path:M,sequenceNumber:F})=>{0===f?(l!==ta.at&&t(new Et(yu(a)),l),l=F,a=M):l=ta.at}).next(()=>{l!==ta.at&&t(new Et(yu(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dd(n,e){return Cc(n).put((i=n.currentSequenceNumber,{targetId:0,path:lo(e.path),sequenceNumber:i}));var i}class F_{constructor(){this.changes=new $s(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?xe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Uw{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return fl(e).put(i)}removeEntry(e,t,i){return fl(e).delete(function(a,l){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],lp(l),f[f.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=Jr.newInvalidDocument(t);return fl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(jh(t))},(a,l)=>{i=this.jn(t,l)}).next(()=>i)}Wn(e,t){let i={size:0,document:Jr.newInvalidDocument(t)};return fl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(jh(t))},(a,l)=>{i={document:this.jn(t,l),size:Bh(l)}}).next(()=>i)}getEntries(e,t){let i=Fo();return this.zn(e,t,(a,l)=>{const f=this.jn(a,l);i=i.insert(a,f)}).next(()=>i)}Hn(e,t){let i=Fo(),a=new fi(Et.comparator);return this.zn(e,t,(l,f)=>{const w=this.jn(l,f);i=i.insert(l,w),a=a.insert(l,Bh(f))}).next(()=>({documents:i,Jn:a}))}zn(e,t,i){if(t.isEmpty())return xe.resolve();let a=new hr(bm);t.forEach(M=>a=a.add(M));const l=IDBKeyRange.bound(jh(a.first()),jh(a.last())),f=a.getIterator();let w=f.getNext();return fl(e).Z({index:"documentKeyIndex",range:l},(M,F,W)=>{const ne=Et.fromSegments([...F.prefixPath,F.collectionGroup,F.documentId]);for(;w&&bm(w,ne)<0;)i(w,null),w=f.getNext();w&&w.isEqual(ne)&&(i(w,F),w=f.hasNext()?f.getNext():null),w?W.j(jh(w)):W.done()}).next(()=>{for(;w;)i(w,null),w=f.hasNext()?f.getNext():null})}getDocumentsMatchingQuery(e,t,i,a){const l=t.path,f=[l.popLast().toArray(),l.lastSegment(),lp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],w=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fl(e).W(IDBKeyRange.bound(f,w,!0)).next(M=>{let F=Fo();for(const W of M){const ne=this.jn(Et.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);ne.isFoundDocument()&&(yc(t,ne)||a.has(ne.key))&&(F=F.insert(ne.key,ne))}return F})}getAllFromCollectionGroup(e,t,i,a){let l=Fo();const f=Dm(t,i),w=Dm(t,va.max());return fl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,w,!0)},(M,F,W)=>{const ne=this.jn(Et.fromSegments(F.prefixPath.concat(F.collectionGroup,F.documentId)),F);l=l.insert(ne.key,ne),l.size===a&&W.done()}).next(()=>l)}newChangeBuffer(e){return new Bw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return V_(e).get("remoteDocumentGlobalKey").next(t=>(g(!!t),t))}Qn(e,t){return V_(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function w_(n,e){let t;if(e.document)t=ep(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Et.fromSegments(e.noDocument.path),a=Dc(e.noDocument.readTime);t=Jr.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return d();{const i=Et.fromSegments(e.unknownDocument.path),a=Dc(e.unknownDocument.version);t=Jr.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new lr(i[0],i[1]);return Gt.fromTimestamp(a)}(e.readTime)),t}(this.yt,t);if(!i.isNoDocument()||!i.version.isEqual(Gt.min()))return i}return Jr.newInvalidDocument(e)}}function L_(n){return new Uw(n)}class Bw extends F_{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new $s(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new hr((l,f)=>rn(l.canonicalString(),f.canonicalString()));return this.changes.forEach((l,f)=>{const w=this.Xn.get(l);if(t.push(this.Yn.removeEntry(e,l,w.readTime)),f.isValidDocument()){const M=I_(this.Yn.yt,f);a=a.add(l.path.popLast());const F=Bh(M);i+=F-w.size,t.push(this.Yn.addEntry(e,l,M))}else if(i-=w.size,this.trackRemovals){const M=I_(this.Yn.yt,f.convertToNoDocument(Gt.min()));t.push(this.Yn.addEntry(e,l,M))}}),a.forEach(l=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Yn.updateMetadata(e,i)),xe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:a})=>(a.forEach((l,f)=>{this.Xn.set(l,{size:f,readTime:i.get(l).readTime})}),i))}}function V_(n){return Hi(n,"remoteDocumentGlobal")}function fl(n){return Hi(n,"remoteDocumentsV14")}function jh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Dm(n,e){const t=e.documentKey.path.toArray();return[n,lp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bm(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=rn(t[l],i[l]),a)return a;return a=rn(t.length,i.length),a||(a=rn(t[t.length-2],i[i.length-2]),a||rn(t[t.length-1],i[i.length-1]))}class jw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $w{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==i&&ud(i.mutation,a,ko.empty(),lr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,vn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=vn()){const a=Wu();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let f=Jf();return l.forEach((w,M)=>{f=f.insert(w,M.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const i=Wu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,vn()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((f,w)=>{t.set(f,w)})})}computeViews(e,t,i,a){let l=Fo();const f=dd(),w=dd();return t.forEach((M,F)=>{const W=i.get(F.key);a.has(F.key)&&(void 0===W||W.mutation instanceof zu)?l=l.insert(F.key,F):void 0!==W?(f.set(F.key,W.mutation.getFieldMask()),ud(W.mutation,F,W.mutation.getFieldMask(),lr.now())):f.set(F.key,ko.empty())}),this.recalculateAndSaveOverlays(e,l).next(M=>(M.forEach((F,W)=>f.set(F,W)),t.forEach((F,W)=>{var ne;return w.set(F,new jw(W,null!==(ne=f.get(F))&&void 0!==ne?ne:null))}),w))}recalculateAndSaveOverlays(e,t){const i=dd();let a=new fi((f,w)=>f-w),l=vn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const w of f)w.keys().forEach(M=>{const F=t.get(M);if(null===F)return;let W=i.get(M)||ko.empty();W=w.applyToLocalView(F,W),i.set(M,W);const ne=(a.get(w.batchId)||vn()).add(M);a=a.insert(w.batchId,ne)})}).next(()=>{const f=[],w=a.getReverseIterator();for(;w.hasNext();){const M=w.getNext(),F=M.key,W=M.value,ne=tm();W.forEach(Ee=>{if(!l.has(Ee)){const Ye=Qv(t.get(Ee),i.get(Ee));null!==Ye&&ne.set(Ee,Ye),l=l.add(Ee)}}),f.push(this.documentOverlayCache.saveOverlays(e,F,ne))}return xe.waitFor(f)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Et.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Zf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var a}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const f=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):xe.resolve(Wu());let w=-1,M=l;return f.next(F=>xe.forEach(F,(W,ne)=>(w<ne.largestBatchId&&(w=ne.largestBatchId),l.get(W)?xe.resolve():this.remoteDocumentCache.getEntry(e,W).next(Ee=>{M=M.insert(W,Ee)}))).next(()=>this.populateOverlays(e,F,l)).next(()=>this.computeViews(e,M,F,vn())).next(W=>({batchId:w,changes:em(W)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Et(t)).next(i=>{let a=Jf();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const a=t.collectionGroup;let l=Jf();return this.indexManager.getCollectionParents(e,a).next(f=>xe.forEach(f,w=>{const M=(F=t,W=w.child(a),new gu(W,null,F.explicitOrderBy.slice(),F.filters.slice(),F.limit,F.limitType,F.startAt,F.endAt));var F,W;return this.getDocumentsMatchingCollectionQuery(e,M,i).next(F=>{F.forEach((W,ne)=>{l=l.insert(W,ne)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a))).next(l=>{a.forEach((w,M)=>{const F=M.getKey();null===l.get(F)&&(l=l.insert(F,Jr.newInvalidDocument(F)))});let f=Jf();return l.forEach((w,M)=>{const F=a.get(w);void 0!==F&&ud(F.mutation,M,ko.empty(),lr.now()),yc(t,M)&&(f=f.insert(w,M))}),f})}}class U_{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return xe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:pi(i.createTime)}),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:fp(i.bundledQuery),readTime:pi(i.readTime)}),xe.resolve();var i}}class mp{constructor(){this.overlays=new fi(Et.comparator),this.es=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Wu();return xe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.oe(e,t,l)}),xe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.es.get(i);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.es.delete(i)),xe.resolve()}getOverlaysForCollection(e,t,i){const a=Wu(),l=t.length+1,f=new Et(t.child("")),w=this.overlays.getIteratorFrom(f);for(;w.hasNext();){const M=w.getNext().value,F=M.getKey();if(!t.isPrefixOf(F.path))break;F.path.length===l&&M.largestBatchId>i&&a.set(M.getKey(),M)}return xe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new fi((F,W)=>F-W);const f=this.overlays.getIterator();for(;f.hasNext();){const F=f.getNext().value;if(F.getKey().getCollectionGroup()===t&&F.largestBatchId>i){let W=l.get(F.largestBatchId);null===W&&(W=Wu(),l=l.insert(F.largestBatchId,W)),W.set(F.getKey(),F)}}const w=Wu(),M=l.getIterator();for(;M.hasNext()&&(M.getNext().value.forEach((F,W)=>w.set(F,W)),!(w.size()>=a)););return xe.resolve(w)}oe(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const f=this.es.get(a.largestBatchId).delete(i.key);this.es.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new cp(t,i));let l=this.es.get(t);void 0===l&&(l=vn(),this.es.set(t,l)),this.es.set(t,l.add(i.key))}}class Zu{constructor(){this.ns=new hr(Ds.ss),this.rs=new hr(Ds.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Ds(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Ds(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new Et(new Rn([])),i=new Ds(t,e),a=new Ds(t,e+1),l=[];return this.rs.forEachInRange([i,a],f=>{this.cs(f),l.push(f.key)}),l}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Et(new Rn([])),i=new Ds(t,e),a=new Ds(t,e+1);let l=vn();return this.rs.forEachInRange([i,a],f=>{l=l.add(f.key)}),l}containsKey(e){const t=new Ds(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Ds{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Et.comparator(e.key,t.key)||rn(e._s,t._s)}static os(e,t){return rn(e._s,t._s)||Et.comparator(e.key,t.key)}}class yp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new hr(Ds.ss)}checkEmpty(e){return xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const l=this.ws;this.ws++;const f=new hm(l,t,i,a);this.mutationQueue.push(f);for(const w of a)this.gs=this.gs.add(new Ds(w.key,l)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return xe.resolve(f)}lookupMutationBatch(e,t){return xe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),l=a<0?0:a;return xe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ds(t,0),a=new Ds(t,Number.POSITIVE_INFINITY),l=[];return this.gs.forEachInRange([i,a],f=>{const w=this.ys(f._s);l.push(w)}),xe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new hr(rn);return t.forEach(a=>{const l=new Ds(a,0),f=new Ds(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([l,f],w=>{i=i.add(w._s)})}),xe.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Et.isDocumentKey(l)||(l=l.child(""));const f=new Ds(new Et(l),0);let w=new hr(rn);return this.gs.forEachWhile(M=>{const F=M.key.path;return!!i.isPrefixOf(F)&&(F.length===a&&(w=w.add(M._s)),!0)},f),xe.resolve(this.Is(w))}Is(e){const t=[];return e.forEach(i=>{const a=this.ys(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){g(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return xe.forEach(t.mutations,a=>{const l=new Ds(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Ds(t,0),a=this.gs.firstAfterOrEqual(i);return xe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return xe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Hw{constructor(e){this.Es=e,this.docs=new fi(Et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,f=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return xe.resolve(i?i.document.mutableCopy():Jr.newInvalidDocument(t))}getEntries(e,t){let i=Fo();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Jr.newInvalidDocument(a))}),xe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Fo();const f=t.path,w=new Et(f.child("")),M=this.docs.getIteratorFrom(w);for(;M.hasNext();){const{key:F,value:{document:W}}=M.getNext();if(!f.isPrefixOf(F.path))break;F.path.length>f.length+1||Kl(Ov(W),i)<=0||(a.has(W.key)||yc(t,W))&&(l=l.insert(W.key,W.mutableCopy()))}return xe.resolve(l)}getAllFromCollectionGroup(e,t,i,a){d()}As(e,t){return xe.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Gw(this)}getSize(e){return xe.resolve(this.size)}}class Gw extends F_{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(i)}),xe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Cm{constructor(e){this.persistence=e,this.Rs=new $s(t=>pc(t),rd),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Zu,this.targetCount=0,this.vs=hl.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,a)=>t(a)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),xe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new hl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.Dn(t),xe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.Rs.forEach((f,w)=>{w.sequenceNumber<=t&&null===i.get(w.targetId)&&(this.Rs.delete(f),l.push(this.removeMatchingKeysForTargetId(e,w.targetId)),a++)}),xe.waitFor(l).next(()=>a)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return xe.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),xe.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(f=>{l.push(a.markPotentiallyOrphaned(e,f))}),xe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return xe.resolve(i)}containsKey(e,t){return xe.resolve(this.Ps.containsKey(t))}}class B_{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ta(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Cm(this),this.indexManager=new OD,this.remoteDocumentCache=new Hw(i=>this.referenceDelegate.xs(i)),this.yt=new pm(t),this.Ns=new U_(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new yp(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){ot("MemoryPersistence","Starting transaction:",e);const a=new _u(this.Ss.next());return this.referenceDelegate.ks(),i(a).next(l=>this.referenceDelegate.Os(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ms(e,t){return xe.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class _u extends Og{constructor(e){super(),this.currentSequenceNumber=e}}class Tc{constructor(e){this.persistence=e,this.Fs=new Zu,this.$s=null}static Bs(e){return new Tc(e)}get Ls(){if(this.$s)return this.$s;throw d()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),xe.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Ls.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.Ls,i=>{const a=Et.fromPath(i);return this.qs(e,a).next(l=>{l||t.removeEntry(a,Gt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return xe.or([()=>xe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Hs{constructor(e){this.yt=e}$(e,t,i,a){const l=new fh("createOrUpgrade",t);var w;i<1&&a>=1&&(e.createObjectStore("owner"),(w=e).createObjectStore("mutationQueues",{keyPath:"userId"}),w.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",am,{unique:!0}),w.createObjectStore("documentMutations"),Sc(e),function(w){w.createObjectStore("remoteDocuments")}(e));let f=xe.resolve();return i<3&&a>=3&&(0!==i&&(function(w){w.deleteObjectStore("targetDocuments"),w.deleteObjectStore("targets"),w.deleteObjectStore("targetGlobal")}(e),Sc(e)),f=f.next(()=>function(w){const M=w.store("targetGlobal"),F={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gt.min().toTimestamp(),targetCount:0};return M.put("targetGlobalKey",F)}(l))),i<4&&a>=4&&(0!==i&&(f=f.next(()=>function(w,M){return M.store("mutations").W().next(F=>{w.deleteObjectStore("mutations"),w.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",am,{unique:!0});const W=M.store("mutations"),ne=F.map(Ee=>W.put(Ee));return xe.waitFor(ne)})}(e,l))),f=f.next(()=>{!function(w){w.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(f=f.next(()=>this.Us(l))),i<6&&a>=6&&(f=f.next(()=>(function(w){w.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(l)))),i<7&&a>=7&&(f=f.next(()=>this.Gs(l))),i<8&&a>=8&&(f=f.next(()=>this.Qs(e,l))),i<9&&a>=9&&(f=f.next(()=>{!function(w){w.objectStoreNames.contains("remoteDocumentChanges")&&w.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(f=f.next(()=>this.js(l))),i<11&&a>=11&&(f=f.next(()=>{(function(w){w.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(w){w.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(f=f.next(()=>{!function(w){const M=w.createObjectStore("documentOverlays",{keyPath:cm});M.createIndex("collectionPathOverlayIndex",Oh,{unique:!1}),M.createIndex("collectionGroupOverlayIndex",lm,{unique:!1})}(e)})),i<13&&a>=13&&(f=f.next(()=>function(w){const M=w.createObjectStore("remoteDocumentsV14",{keyPath:um});M.createIndex("documentKeyIndex",Sw),M.createIndex("collectionGroupIndex",RD)}(e)).next(()=>this.Ws(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(f=f.next(()=>this.zs(e,l))),i<15&&a>=15&&(f=f.next(()=>function(w){w.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),w.createObjectStore("indexState",{keyPath:xw}).createIndex("sequenceNumberIndex",Mw,{unique:!1}),w.createObjectStore("indexEntries",{keyPath:sp}).createIndex("documentKeyIndex",md,{unique:!1})}(e))),f}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,a)=>{t+=Bh(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(a=>xe.forEach(a,l=>{const f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",f).next(w=>xe.forEach(w,M=>{g(M.userId===l.userId);const F=ul(this.yt,M);return wm(e,l.userId,F).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return i.Z((f,w)=>{const M=new Rn(f),F=[0,lo(M)];l.push(t.get(F).next(W=>W?xe.resolve():t.put({targetId:0,path:lo(M),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>xe.waitFor(l))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:__});const i=t.store("collectionParents"),a=new pp,l=f=>{if(a.add(f)){const w=f.lastSegment(),M=f.popLast();return i.put({collectionId:w,parent:lo(M)})}};return t.store("remoteDocuments").Z({X:!0},(f,w)=>{const M=new Rn(f);return l(M.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([f,w,M],F)=>{const W=yu(w);return l(W.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,a)=>{const l=dp(a),f=hp(this.yt,l);return t.put(f)})}Ws(e,t){const i=t.store("remoteDocuments"),a=[];return i.Z((l,f)=>{const w=t.store("remoteDocumentsV14"),M=(F=f,F.document?new Et(Rn.fromString(F.document.name).popFirst(5)):F.noDocument?Et.fromSegments(F.noDocument.path):F.unknownDocument?Et.fromSegments(F.unknownDocument.path):d()).path.toArray();var F;const W={prefixPath:M.slice(0,M.length-2),collectionGroup:M[M.length-2],documentId:M[M.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(w.put(W))}).next(()=>xe.waitFor(a))}zs(e,t){const i=t.store("mutations"),a=L_(this.yt),l=new B_(Tc.Bs,this.yt.ie);return i.W().next(f=>{const w=new Map;return f.forEach(M=>{var F;let W=null!==(F=w.get(M.userId))&&void 0!==F?F:vn();ul(this.yt,M).keys().forEach(ne=>W=W.add(ne)),w.set(M.userId,W)}),xe.forEach(w,(M,F)=>{const W=new Di(F),ne=yd.re(this.yt,W),Ee=l.getIndexManager(W),Ye=gp.re(W,this.yt,Ee,l.referenceDelegate);return new $w(a,Ye,ne,Ee).recalculateAndSaveOverlaysForDocumentKeys(new up(t,ta.at),M).next()})})}}function Sc(n){n.createObjectStore("targetDocuments",{keyPath:v_}).createIndex("documentTargetsIndex",Aw,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gd,{unique:!0}),n.createObjectStore("targetGlobal")}const bd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uo{constructor(e,t,i,a,l,f,w,M,F,W,ne=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=l,this.window=f,this.document=w,this.Js=F,this.Ys=W,this.Xs=ne,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Ee=>Promise.resolve(),!Uo.C())throw new Q(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vw(this,a),this.ii=t+"main",this.yt=new pm(M),this.ri=new Po(this.ii,this.Xs,new Hs(this.yt)),this.Cs=new Fw(this.referenceDelegate,this.yt),this.remoteDocumentCache=L_(this.yt),this.Ns=new C_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===W&&oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(L.FAILED_PRECONDITION,bd);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ta(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,me.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ku(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(du(e))return ot("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ot("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return pl(e).get("owner").next(t=>xe.resolve(this.mi(t)))}gi(e){return Ku(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=Hi(i,"clientMetadata");return a.W().next(l=>{const f=e.Ii(l,18e5),w=l.filter(M=>-1===f.indexOf(M));return xe.forEach(w,M=>a.delete(M.clientId)).next(()=>w)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?xe.resolve(!0):pl(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Q(L.FAILED_PRECONDITION,bd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ku(e).W().next(i=>void 0===this.Ii(i,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ot("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new up(t,ta.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Ku(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return gp.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new R_(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return yd.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){ot("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(f=this.Xs)?dm:14===f?ap:13===f?op:12===f?E_:11===f?Nh:void d();var f;let w;return this.ri.runTransaction(e,a,l,M=>(w=new up(M,this.Ss?this.Ss.next():ta.at),"readwrite-primary"===t?this.fi(w).next(F=>!!F||this.di(w)).next(F=>{if(!F)throw oi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Q(L.FAILED_PRECONDITION,Nv);return i(w)}).next(F=>this.wi(w).next(()=>F)):this.Vi(w).next(()=>i(w)))).then(M=>(w.raiseOnCommittedEvent(),M))}Vi(e){return pl(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Q(L.FAILED_PRECONDITION,bd)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pl(e).put("owner",t)}static C(){return Po.C()}_i(e){const t=pl(e);return t.get("owner").next(i=>this.mi(i)?(ot("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):xe.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(oi(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ot("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return oi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){oi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pl(n){return Hi(n,"owner")}function Ku(n){return Hi(n,"clientMetadata")}function Ac(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class xc{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=a}static Ci(e,t){let i=vn(),a=vn();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new xc(e,t.fromCache,i,a)}}class gl{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,a){return this.ki(e,t).next(l=>l||this.Oi(e,t,a,i)).next(l=>l||this.Mi(e,t))}ki(e,t){if(qf(t))return xe.resolve(null);let i=bi(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=sd(t,null,"F"),i=bi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const f=vn(...l);return this.Ni.getDocuments(e,f).next(w=>this.indexManager.getMinOffset(e,i).next(M=>{const F=this.Fi(t,w);return this.$i(t,F,f,M.readTime)?this.ki(e,sd(t,null,"F")):this.Bi(e,F,t,M)}))})))}Oi(e,t,i,a){return qf(t)||a.isEqual(Gt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(l=>{const f=this.Fi(t,l);return this.$i(t,f,i,a)?this.Mi(e,t):(Fu()<=pn.in.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bh(t)),this.Bi(e,f,t,Rg(a,-1)))})}Fi(e,t){let i=new hr(Zg(e));return t.forEach((a,l)=>{yc(e,l)&&(i=i.add(l))}),i}$i(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Mi(e,t){return Fu()<=pn.in.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",bh(t)),this.Ni.getDocumentsMatchingQuery(e,t,va.min())}Bi(e,t,i,a){return this.Ni.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(f=>{l=l.insert(f.key,f)}),l))}}class Cd{constructor(e,t,i,a){this.persistence=e,this.Li=t,this.yt=a,this.qi=new fi(rn),this.Ui=new $s(l=>pc(l),rd),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $w(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function ml(n,e,t,i){return new Cd(n,e,t,i)}function yl(n,e){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,me.Z)(function*(n,e){const t=P(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const f=[],w=[];let M=vn();for(const F of a){f.push(F.batchId);for(const W of F.mutations)M=M.add(W.key)}for(const F of l){w.push(F.batchId);for(const W of F.mutations)M=M.add(W.key)}return t.localDocuments.getDocuments(i,M).next(F=>({ji:F,removedBatchIds:f,addedBatchIds:w}))})})}),Mc.apply(this,arguments)}function Td(n,e){const t=P(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Gi.newChangeBuffer({trackRemovals:!0});return function(f,w,M,F){const W=M.batch,ne=W.keys();let Ee=xe.resolve();return ne.forEach(Ye=>{Ee=Ee.next(()=>F.getEntry(w,Ye)).next(tt=>{const wt=M.docVersions.get(Ye);g(null!==wt),tt.version.compareTo(wt)<0&&(W.applyToRemoteDocument(tt,M),tt.isValidDocument()&&(tt.setReadTime(M.commitVersion),F.addEntry(tt)))})}),Ee.next(()=>f.mutationQueue.removeMutationBatch(w,W))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let w=vn();for(let M=0;M<f.mutationResults.length;++M)f.mutationResults[M].transformResults.length>0&&(w=w.add(f.batch.mutations[M].key));return w}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function Tm(n){const e=P(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function j_(n,e){const t=P(n),i=e.snapshotVersion;let a=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.qi;const w=[];e.targetChanges.forEach((W,ne)=>{const Ee=a.get(ne);if(!Ee)return;w.push(t.Cs.removeMatchingKeys(l,W.removedDocuments,ne).next(()=>t.Cs.addMatchingKeys(l,W.addedDocuments,ne)));let Ye=Ee.withSequenceNumber(l.currentSequenceNumber);var tt,wt,Vt;e.targetMismatches.has(ne)?Ye=Ye.withResumeToken(Xi.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):W.resumeToken.approximateByteSize()>0&&(Ye=Ye.withResumeToken(W.resumeToken,i)),a=a.insert(ne,Ye),wt=Ye,Vt=W,(0===(tt=Ee).resumeToken.approximateByteSize()||wt.snapshotVersion.toMicroseconds()-tt.snapshotVersion.toMicroseconds()>=3e8||Vt.addedDocuments.size+Vt.modifiedDocuments.size+Vt.removedDocuments.size>0)&&w.push(t.Cs.updateTargetData(l,Ye))});let M=Fo(),F=vn();if(e.documentUpdates.forEach(W=>{e.resolvedLimboDocuments.has(W)&&w.push(t.persistence.referenceDelegate.updateLimboDocument(l,W))}),w.push(Sm(l,f,e.documentUpdates).next(W=>{M=W.Wi,F=W.zi})),!i.isEqual(Gt.min())){const W=t.Cs.getLastRemoteSnapshotVersion(l).next(ne=>t.Cs.setTargetsMetadata(l,l.currentSequenceNumber,i));w.push(W)}return xe.waitFor(w).next(()=>f.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,M,F)).next(()=>M)}).then(l=>(t.qi=a,l))}function Sm(n,e,t){let i=vn(),a=vn();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let f=Fo();return t.forEach((w,M)=>{const F=l.get(w);M.isFoundDocument()!==F.isFoundDocument()&&(a=a.add(w)),M.isNoDocument()&&M.version.isEqual(Gt.min())?(e.removeEntry(w,M.readTime),f=f.insert(w,M)):!F.isValidDocument()||M.version.compareTo(F.version)>0||0===M.version.compareTo(F.version)&&F.hasPendingWrites?(e.addEntry(M),f=f.insert(w,M)):ot("LocalStore","Ignoring outdated watch update for ",w,". Current version:",F.version," Watch version:",M.version)}),{Wi:f,zi:a}})}function $_(n,e){const t=P(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function vl(n,e){const t=P(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Cs.getTargetData(i,e).next(l=>l?(a=l,xe.resolve(a)):t.Cs.allocateTargetId(i).next(f=>(a=new Ic(e,f,0,i.currentSequenceNumber),t.Cs.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.qi.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.qi=t.qi.insert(i.targetId,i),t.Ui.set(e,i.targetId)),i})}function _l(n,e,t){return vp.apply(this,arguments)}function vp(){return vp=(0,me.Z)(function*(n,e,t){const i=P(n),a=i.qi.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",l,f=>i.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!du(f))throw f;ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}i.qi=i.qi.remove(e),i.Ui.delete(a.target)}),vp.apply(this,arguments)}function $h(n,e,t){const i=P(n);let a=Gt.min(),l=vn();return i.persistence.runTransaction("Execute query","readonly",f=>function(w,M,F){const W=P(w),ne=W.Ui.get(F);return void 0!==ne?xe.resolve(W.qi.get(ne)):W.Cs.getTargetData(M,F)}(i,f,bi(e)).next(w=>{if(w)return a=w.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(f,w.targetId).next(M=>{l=M})}).next(()=>i.Li.getDocumentsMatchingQuery(f,e,t?a:Gt.min(),t?l:vn())).next(w=>(G_(i,vc(e),w),{documents:w,Hi:l})))}function Am(n,e){const t=P(n),i=P(t.Cs),a=t.qi.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>i.ne(l,e).next(f=>f?f.target:null))}function H_(n,e){const t=P(n),i=t.Ki.get(e)||Gt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,Rg(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(G_(t,e,a),a))}function G_(n,e,t){let i=n.Ki.get(e)||Gt.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Ki.set(e,i)}function xm(){return xm=(0,me.Z)(function*(n,e,t,i){const a=P(n);let l=vn(),f=Fo();for(const F of t){const W=e.Ji(F.metadata.name);F.document&&(l=l.add(W));const ne=e.Yi(F);ne.setReadTime(e.Xi(F.metadata.readTime)),f=f.insert(W,ne)}const w=a.Gi.newChangeBuffer({trackRemovals:!0}),M=yield vl(a,(F=i,bi(Dh(Rn.fromString(`__bundle__/docs/${F}`)))));var F;return a.persistence.runTransaction("Apply bundle documents","readwrite",F=>Sm(F,w,f).next(W=>(w.apply(F),W)).next(W=>a.Cs.removeMatchingKeysForTargetId(F,M.targetId).next(()=>a.Cs.addMatchingKeys(F,l,M.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(F,W.Wi,W.zi)).next(()=>W.Wi)))}),xm.apply(this,arguments)}function zw(n,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,me.Z)(function*(n,e,t=vn()){const i=yield vl(n,bi(fp(e.bundledQuery))),a=P(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const f=pi(e.readTime);if(i.snapshotVersion.compareTo(f)>=0)return a.Ns.saveNamedQuery(l,e);const w=i.withResumeToken(Xi.EMPTY_BYTE_STRING,f);return a.qi=a.qi.insert(w.targetId,w),a.Cs.updateTargetData(l,w).next(()=>a.Cs.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>a.Cs.addMatchingKeys(l,t,i.targetId)).next(()=>a.Ns.saveNamedQuery(l,e))})}),Hh.apply(this,arguments)}function _p(n,e){return`firestore_clients_${n}_${e}`}function W_(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Sd(n,e){return`firestore_targets_${n}_${e}`}class El{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Zi(e,t,i){const a=JSON.parse(i);let l,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(l=new Q(a.error.code,a.error.message))),f?new El(e,t,a.state,l):(oi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wl{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let a,l="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Q(i.error.code,i.error.message))),l?new wl(e,i.state,a):(oi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ep{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,l=Lo();for(let f=0;a&&f<i.activeTargetIds.length;++f)a=kv(i.activeTargetIds[f]),l=l.add(i.activeTargetIds[f]);return a?new Ep(e,l):(oi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Gh{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Gh(t.clientId,t.onlineState):(oi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zh{constructor(){this.activeTargetIds=Lo()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wp{constructor(e,t,i,a,l){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new fi(rn),this.started=!1,this.cr=[];const f=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ar=_p(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new zh),this.lr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(w){return`firestore_bundle_loaded_v2_${w}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const l=e.getItem(_p(e.persistenceKey,a));if(l){const f=Ep.Zi(a,l);f&&(e.ur=e.ur.insert(f.clientId,f))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const a=e.yr(i);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Sd(this.persistenceKey,e));if(i){const a=wl.Zi(e,i);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sd(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Er(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ot("SharedClientState","READ",e,t),t}setItem(e,t){ot("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ot("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(ot("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const a=t.vr(i.key);return t.Vr(a,null)}{const a=t.Sr(i.key,i.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const a=t.Dr(i.key,i.newValue);if(a)return t.Cr(a)}}else if(t._r.test(i.key)){if(null!==i.newValue){const a=t.Nr(i.key,i.newValue);if(a)return t.kr(a)}}else if(i.key===t.wr){if(null!==i.newValue){const a=t.yr(i.newValue);if(a)return t.pr(a)}}else if(i.key===t.hr){const a=function(l){let f=ta.at;if(null!=l)try{const w=JSON.parse(l);g("number"==typeof w),f=w}catch(w){oi("SharedClientState","Failed to read sequence number from WebStorage",w)}return f}(i.newValue);a!==ta.at&&t.sequenceNumberHandler(a)}else if(i.key===t.mr){const a=t.Or(i.newValue);yield Promise.all(a.map(l=>t.syncEngine.Mr(l)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const a=new El(this.currentUser,e,t,i),l=W_(this.persistenceKey,this.currentUser,e);this.setItem(l,a.tr())}Er(e){const t=W_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const a=Sd(this.persistenceKey,e),l=new wl(e,t,i);this.setItem(a,l.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return Ep.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),a=Number(i[1]);return El.Zi(new Di(void 0!==i[2]?i[2]:null),a,t)}Nr(e,t){const i=this._r.exec(e),a=Number(i[1]);return wl.Zi(a,t)}yr(e){return Gh.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ot("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),l=this.Ir(i),f=[],w=[];return l.forEach(M=>{a.has(M)||f.push(M)}),a.forEach(M=>{l.has(M)||w.push(M)}),this.syncEngine.Br(f,w).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Lo();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Mm{constructor(){this.Lr=new zh,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new zh,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rm{Ur(e){}shutdown(){}}class Om{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const q_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nm{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Z_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,a,l){const f=this.ho(e,t);ot("RestConnection","Sending: ",f,i);const w={};return this.lo(w,a,l),this.fo(e,f,w,i).then(M=>(ot("RestConnection","Received: ",M),M),M=>{throw Lu("RestConnection",`${e} failed with error: `,M,"url: ",f,"request:",i),M})}_o(e,t,i,a,l,f){return this.ao(e,t,i,a,l)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+lu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}ho(e,t){return`${this.oo}/v1/${t}:${q_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,a){return new Promise((l,f)=>{const w=new Is;w.setWithCredentials(!0),w.listenOnce(xg.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Zc.NO_ERROR:const F=w.getResponseJson();ot("Connection","XHR received:",JSON.stringify(F)),l(F);break;case Zc.TIMEOUT:ot("Connection",'RPC "'+e+'" timed out'),f(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const W=w.getStatus();if(ot("Connection",'RPC "'+e+'" failed with status:',W,"response text:",w.getResponseText()),W>0){let ne=w.getResponseJson();Array.isArray(ne)&&(ne=ne[0]);const Ee=ne?.error;if(Ee&&Ee.status&&Ee.message){const Ye=function(tt){const wt=tt.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(wt)>=0?wt:L.UNKNOWN}(Ee.status);f(new Q(Ye,Ee.message))}else f(new Q(L.UNKNOWN,"Server responded with status "+w.getStatus()))}else f(new Q(L.UNAVAILABLE,"Connection failed."));break;default:d()}}finally{ot("Connection",'RPC "'+e+'" completed.')}});const M=JSON.stringify(a);w.send(t,"POST",M,i,15)})}wo(e,t,i){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Gl(),f=oh(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(w.xmlHttpFactory=new uh({})),this.lo(w.initMessageHeaders,t,i),w.encodeInitMessageHeaders=!0;const M=a.join("");ot("Connection","Creating WebChannel: "+M,w);const F=l.createWebChannel(M,w);let W=!1,ne=!1;const Ee=new Nm({Hr:tt=>{ne?ot("Connection","Not sending because WebChannel is closed:",tt):(W||(ot("Connection","Opening WebChannel transport."),F.open(),W=!0),ot("Connection","WebChannel sending:",tt),F.send(tt))},Jr:()=>F.close()}),Ye=(tt,wt,Vt)=>{tt.listen(wt,Qn=>{try{Vt(Qn)}catch(xr){setTimeout(()=>{throw xr},0)}})};return Ye(F,zl.EventType.OPEN,()=>{ne||ot("Connection","WebChannel transport opened.")}),Ye(F,zl.EventType.CLOSE,()=>{ne||(ne=!0,ot("Connection","WebChannel transport closed"),Ee.io())}),Ye(F,zl.EventType.ERROR,tt=>{ne||(ne=!0,Lu("Connection","WebChannel transport errored:",tt),Ee.io(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),Ye(F,zl.EventType.MESSAGE,tt=>{var wt;if(!ne){const Vt=tt.data[0];g(!!Vt);const xr=Vt.error||(null===(wt=Vt[0])||void 0===wt?void 0:wt.error);if(xr){ot("Connection","WebChannel received error:",xr);const Bn=xr.status;let An=function(On){const Cs=Ci[On];if(void 0!==Cs)return il(Cs)}(Bn),In=xr.message;void 0===An&&(An=L.INTERNAL,In="Unknown error status: "+Bn+" with message "+xr.message),ne=!0,Ee.io(new Q(An,In)),F.close()}else ot("Connection","WebChannel received:",Vt),Ee.ro(Vt)}}),Ye(f,Ff.STAT_EVENT,tt=>{tt.stat===ah.PROXY?ot("Connection","Detected buffering proxy"):tt.stat===ah.NOPROXY&&ot("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ee.so()},0),Ee}}function K_(){return typeof window<"u"?window:null}function Wh(){return typeof document<"u"?document:null}function Ad(n){return new c_(n,!0)}class Ip{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=a,this.po=l,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-i);a>0&&ot("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Pm{constructor(e,t,i,a,l,f,w,M){this.Hs=e,this.vo=i,this.Vo=a,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=w,this.listener=M,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ip(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,me.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(oi(t.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===L.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.So===t&&this.Go(i,a)},i=>{e(()=>{const a=new Q(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(a)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{i(()=>this.Qo(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ww extends Pm{constructor(e,t,i,a,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,f),this.yt=l}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function ww(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(M=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===M?1:"REMOVE"===M?2:"CURRENT"===M?3:"RESET"===M?4:d(),a=e.targetChange.targetIds||[],l=function(M,F){return M.wt?(g(void 0===F||"string"==typeof F),Xi.fromBase64String(F||"")):(g(void 0===F||F instanceof Uint8Array),Xi.fromUint8Array(F||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,w=f&&function(M){const F=void 0===M.code?L.UNKNOWN:il(M.code);return new Q(F,M.message||"")}(f);t=new r_(i,a,l,w||null)}else if("documentChange"in e){const i=e.documentChange,a=mu(n,i.document.name),l=pi(i.document.updateTime),f=i.document.createTime?pi(i.document.createTime):Gt.min(),w=new as({mapValue:{fields:i.document.fields}}),M=Jr.newFoundDocument(a,l,f,w);t=new Xf(i.targetIds||[],i.removedTargetIds||[],M.key,M)}else if("documentDelete"in e){const i=e.documentDelete,a=mu(n,i.document),l=i.readTime?pi(i.readTime):Gt.min(),f=Jr.newNoDocument(a,l);t=new Xf([],i.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const i=e.documentRemove,a=mu(n,i.document);t=new Xf([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return d();{const i=e.filter,l=new pw(i.count||0);t=new n_(i.targetId,l)}}var M;return t}(this.yt,e),i=function(a){if(!("targetChange"in a))return Gt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Gt.min():l.readTime?pi(l.readTime):Gt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=fd(this.yt),t.addTarget=function(a,l){let f;const w=l.target;return f=Ih(w)?{documents:p_(a,w)}:{query:np(a,w)},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?f.resumeToken=l_(a,l.resumeToken):l.snapshotVersion.compareTo(Gt.min())>0&&(f.readTime=sl(a,l.snapshotVersion.toTimestamp())),f}(this.yt,e);const i=function Dw(n,e){const t=function(i,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return d()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=fd(this.yt),t.removeTarget=e,this.Bo(t)}}class Y_ extends Pm{constructor(e,t,i,a,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,f),this.yt=l,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(g(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function xD(n,e){return n&&n.length>0?(g(void 0!==e),n.map(t=>function(i,a){let l=pi(i.updateTime?i.updateTime:a);return l.isEqual(Gt.min())&&(l=pi(a)),new Sh(l,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=pi(e.commitTime);return this.listener.Zo(i,t)}return g(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=fd(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>tp(this.yt,i))};this.Bo(t)}}class Q_ extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.yt=a,this.nu=!1}su(){if(this.nu)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.ao(e,t,i,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(L.UNKNOWN,a.toString())})}_o(e,t,i,a){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection._o(e,t,i,l,f,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Q(L.UNKNOWN,l.toString())})}terminate(){this.nu=!0}}class km{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(oi(t),this.ou=!1):ot("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class X_{constructor(e,t,i,a,l){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=l,this.mu.Ur(w=>{i.enqueueAndForget((0,me.Z)(function*(){var M;Ka(f)&&(ot("RemoteStore","Restarting streams for network reachability change."),yield(M=(0,me.Z)(function*(F){const W=P(F);W._u.add(4),yield Il(W),W.gu.set("Unknown"),W._u.delete(4),yield Md(W)}),function(F){return M.apply(this,arguments)})(f))}))}),this.gu=new km(i,a)}}function Md(n){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,me.Z)(function*(n){if(Ka(n))for(const e of n.wu)yield e(!0)}),Dp.apply(this,arguments)}function Il(n){return bp.apply(this,arguments)}function bp(){return bp=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),bp.apply(this,arguments)}function qh(n,e){const t=P(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Lm(t)?Fm(t):Pd(t).ko()&&Od(t,e))}function Rd(n,e){const t=P(n),i=Pd(t);t.du.delete(e),i.ko()&&Yu(t,e),0===t.du.size&&(i.ko()?i.Fo():Ka(t)&&t.gu.set("Unknown"))}function Od(n,e){n.yu.Ot(e.targetId),Pd(n).zo(e)}function Yu(n,e){n.yu.Ot(e),Pd(n).Ho(e)}function Fm(n){n.yu=new s_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Pd(n).start(),n.gu.uu()}function Lm(n){return Ka(n)&&!Pd(n).No()&&n.du.size>0}function Ka(n){return 0===P(n)._u.size}function Rc(n){n.yu=void 0}function Vm(n){return Um.apply(this,arguments)}function Um(){return Um=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{Od(n,e)})}),Um.apply(this,arguments)}function Bm(n,e){return e0.apply(this,arguments)}function e0(){return e0=(0,me.Z)(function*(n,e){Rc(n),Lm(n)?(n.gu.hu(e),Fm(n)):n.gu.set("Unknown")}),e0.apply(this,arguments)}function ND(n,e,t){return jm.apply(this,arguments)}function jm(){return jm=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof r_&&2===e.state&&e.cause)try{yield(i=(0,me.Z)(function*(a,l){const f=l.cause;for(const w of l.targetIds)a.du.has(w)&&(yield a.remoteSyncer.rejectListen(w,f),a.du.delete(w),a.yu.removeTarget(w))}),function(a,l){return i.apply(this,arguments)})(n,e)}catch(i){ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Cp(n,i)}else if(e instanceof Xf?n.yu.Kt(e):e instanceof n_?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Gt.min()))try{const i=yield Tm(n.localStore);t.compareTo(i)>=0&&(yield function(a,l){const f=a.yu.Zt(l);return f.targetChanges.forEach((w,M)=>{if(w.resumeToken.approximateByteSize()>0){const F=a.du.get(M);F&&a.du.set(M,F.withResumeToken(w.resumeToken,l))}}),f.targetMismatches.forEach(w=>{const M=a.du.get(w);if(!M)return;a.du.set(w,M.withResumeToken(Xi.EMPTY_BYTE_STRING,M.snapshotVersion)),Yu(a,w);const F=new Ic(M.target,w,1,M.sequenceNumber);Od(a,F)}),a.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(i){ot("RemoteStore","Failed to raise snapshot:",i),yield Cp(n,i)}var i}),jm.apply(this,arguments)}function Cp(n,e,t){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,me.Z)(function*(n,e,t){if(!du(e))throw e;n._u.add(1),yield Il(n),n.gu.set("Offline"),t||(t=()=>Tm(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){ot("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Md(n)}))}),Tp.apply(this,arguments)}function t0(n,e){return e().catch(t=>Cp(n,t,e))}function ei(n){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,me.Z)(function*(n){const e=P(n),t=Oc(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;qw(e);)try{const a=yield $_(e.localStore,i);if(null===a){0===e.fu.length&&t.Fo();break}i=a.batchId,Zw(e,a)}catch(a){yield Cp(e,a)}$m(e)&&n0(e)}),Sp.apply(this,arguments)}function qw(n){return Ka(n)&&n.fu.length<10}function Zw(n,e){n.fu.push(e);const t=Oc(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function $m(n){return Ka(n)&&!Oc(n).No()&&n.fu.length>0}function n0(n){Oc(n).start()}function r0(n){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,me.Z)(function*(n){Oc(n).eu()}),Ap.apply(this,arguments)}function Nd(n){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,me.Z)(function*(n){const e=Oc(n);for(const t of n.fu)e.Xo(t.mutations)}),Hm.apply(this,arguments)}function Kw(n,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,me.Z)(function*(n,e,t){const i=n.fu.shift(),a=fm.from(i,e,t);yield t0(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield ei(n)}),xp.apply(this,arguments)}function Yw(n,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,me.Z)(function*(n,e){var t;e&&Oc(n).Yo&&(yield(t=(0,me.Z)(function*(i,a){if(e_(l=a.code)&&l!==L.ABORTED){const f=i.fu.shift();Oc(i).Mo(),yield t0(i,()=>i.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield ei(i)}var l}),function(i,a){return t.apply(this,arguments)})(n,e)),$m(n)&&n0(n)}),Mp.apply(this,arguments)}function Qw(n,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,me.Z)(function*(n,e){const t=P(n);t.asyncQueue.verifyOperationInProgress(),ot("RemoteStore","RemoteStore received new credentials");const i=Ka(t);t._u.add(3),yield Il(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Md(t)}),Zh.apply(this,arguments)}function Kh(n,e){return wa.apply(this,arguments)}function wa(){return wa=(0,me.Z)(function*(n,e){const t=P(n);e?(t._u.delete(2),yield Md(t)):e||(t._u.add(2),yield Il(t),t.gu.set("Unknown"))}),wa.apply(this,arguments)}function Pd(n){return n.pu||(n.pu=function(e,t,i){const a=P(e);return a.su(),new Ww(t,a.connection,a.authCredentials,a.appCheckCredentials,a.yt,i)}(n.datastore,n.asyncQueue,{Yr:Vm.bind(null,n),Zr:Bm.bind(null,n),Wo:ND.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Mo(),Lm(n)?Fm(n):n.gu.set("Unknown")):(yield n.pu.stop(),Rc(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Oc(n){return n.Iu||(n.Iu=function(e,t,i){const a=P(e);return a.su(),new Y_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.yt,i)}(n.datastore,n.asyncQueue,{Yr:r0.bind(null,n),Zr:Yw.bind(null,n),tu:Nd.bind(null,n),Zo:Kw.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Mo(),yield ei(n)):(yield n.Iu.stop(),n.fu.length>0&&(ot("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Ia{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Be,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,i,a,l){const f=Date.now()+i,w=new Ia(e,t,f,a,l);return w.start(i),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gs(n,e){if(oi("AsyncQueue",`${e}: ${n}`),du(n))return new Q(L.UNAVAILABLE,`${e}: ${n}`);throw n}class zs{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Et.comparator(t.key,i.key):(t,i)=>Et.comparator(t.key,i.key),this.keyedMap=Jf(),this.sortedSet=new fi(this.comparator)}static emptySet(e){return new zs(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new zs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Gm{constructor(){this.Tu=new fi(Et.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):d():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Dl{constructor(e,t,i,a,l,f,w,M,F){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=w,this.excludesMetadataChanges=M,this.hasCachedResults=F}static fromInitialDocuments(e,t,i,a,l){const f=[];return t.forEach(w=>{f.push({type:0,doc:w})}),new Dl(e,t,zs.emptySet(t),f,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class Jw{constructor(){this.Au=void 0,this.listeners=[]}}class Xw{constructor(){this.queries=new $s(e=>Wv(e),mc),this.onlineState="Unknown",this.Ru=new Set}}function zm(n,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,me.Z)(function*(n,e){const t=P(n),i=e.query;let a=!1,l=t.queries.get(i);if(l||(a=!0,l=new Jw),a)try{l.Au=yield t.onListen(i)}catch(f){const w=Gs(f,`Initialization of query '${bh(e.query)}' failed`);return void e.onError(w)}t.queries.set(i,l),l.listeners.push(e),e.bu(t.onlineState),l.Au&&e.Pu(l.Au)&&qm(t)}),Wm.apply(this,arguments)}function Yh(n,e){return bl.apply(this,arguments)}function bl(){return bl=(0,me.Z)(function*(n,e){const t=P(n),i=e.query;let a=!1;const l=t.queries.get(i);if(l){const f=l.listeners.indexOf(e);f>=0&&(l.listeners.splice(f,1),a=0===l.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),bl.apply(this,arguments)}function eI(n,e){const t=P(n);let i=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const w of f.listeners)w.Pu(a)&&(i=!0);f.Au=a}}i&&qm(t)}function s0(n,e,t){const i=P(n),a=i.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);i.queries.delete(e)}function qm(n){n.Ru.forEach(e=>{e.next()})}class Rp{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new Dl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class o0{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Qh{constructor(e){this.yt=e}Ji(e){return mu(this.yt,e)}Yi(e){return e.metadata.exists?ep(this.yt,e.document,!1):Jr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return pi(e)}}class tI{constructor(e,t,i){this.Mu=e,this.localStore=t,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Zm(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=Rn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new Qh(this.yt);for(const a of e)if(a.metadata.queries){const l=i.Ji(a.metadata.name);for(const f of a.metadata.queries){const w=(t.get(f)||vn()).add(l);t.set(f,w)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function z_(n,e,t,i){return xm.apply(this,arguments)}(e.localStore,new Qh(e.yt),e.documents,e.Mu.id),i=e.$u(e.documents);for(const a of e.queries)yield zw(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Zm(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Km{constructor(e){this.key=e}}class Op{constructor(e){this.key=e}}class Jh{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=vn(),this.mutatedKeys=vn(),this.Gu=Zg(e),this.Qu=new zs(this.Gu)}get ju(){return this.qu}Wu(e,t){const i=t?t.zu:new Gm,a=t?t.Qu:this.Qu;let l=t?t.mutatedKeys:this.mutatedKeys,f=a,w=!1;const M="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,F="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((W,ne)=>{const Ee=a.get(W),Ye=yc(this.query,ne)?ne:null,tt=!!Ee&&this.mutatedKeys.has(Ee.key),wt=!!Ye&&(Ye.hasLocalMutations||this.mutatedKeys.has(Ye.key)&&Ye.hasCommittedMutations);let Vt=!1;Ee&&Ye?Ee.data.isEqual(Ye.data)?tt!==wt&&(i.track({type:3,doc:Ye}),Vt=!0):this.Hu(Ee,Ye)||(i.track({type:2,doc:Ye}),Vt=!0,(M&&this.Gu(Ye,M)>0||F&&this.Gu(Ye,F)<0)&&(w=!0)):!Ee&&Ye?(i.track({type:0,doc:Ye}),Vt=!0):Ee&&!Ye&&(i.track({type:1,doc:Ee}),Vt=!0,(M||F)&&(w=!0)),Vt&&(Ye?(f=f.add(Ye),l=wt?l.add(W):l.delete(W)):(f=f.delete(W),l=l.delete(W)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const W="F"===this.query.limitType?f.last():f.first();f=f.delete(W.key),l=l.delete(W.key),i.track({type:1,doc:W})}return{Qu:f,zu:i,$i:w,mutatedKeys:l}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const l=e.zu.Eu();l.sort((F,W)=>function(ne,Ee){const Ye=tt=>{switch(tt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return d()}};return Ye(ne)-Ye(Ee)}(F.type,W.type)||this.Gu(F.doc,W.doc)),this.Ju(i);const f=t?this.Yu():[],w=0===this.Ku.size&&this.current?1:0,M=w!==this.Uu;return this.Uu=w,0!==l.length||M?{snapshot:new Dl(this.query,e.Qu,a,l,e.mutatedKeys,0===w,M,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:f}:{Xu:f}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Gm,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=vn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new Op(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new Km(i))}),t}tc(e){this.qu=e.Hi,this.Ku=vn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Dl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Ym{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Qm{constructor(e){this.key=e,this.nc=!1}}class a0{constructor(e,t,i,a,l,f){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.sc={},this.ic=new $s(w=>Wv(w),mc),this.rc=new Map,this.oc=new Set,this.uc=new fi(Et.comparator),this.cc=new Map,this.ac=new Zu,this.hc={},this.lc=new Map,this.fc=hl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function u0(n,e){return Np.apply(this,arguments)}function Np(){return Np=(0,me.Z)(function*(n,e){const t=cy(n);let i,a;const l=t.ic.get(e);if(l)i=l.targetId,t.sharedClientState.addLocalQueryTarget(i),a=l.view.ec();else{const f=yield vl(t.localStore,bi(e));t.isPrimaryClient&&qh(t.remoteStore,f);const w=t.sharedClientState.addLocalQueryTarget(f.targetId);i=f.targetId,a=yield Pp(t,e,i,"current"===w,f.resumeToken)}return a}),Np.apply(this,arguments)}function Pp(n,e,t,i,a){return kp.apply(this,arguments)}function kp(){return kp=(0,me.Z)(function*(n,e,t,i,a){n._c=(ne,Ee,Ye)=>{return(tt=(0,me.Z)(function*(wt,Vt,Qn,xr){let Bn=Vt.view.Wu(Qn);Bn.$i&&(Bn=yield $h(wt.localStore,Vt.query,!1).then(({documents:On})=>Vt.view.Wu(On,Bn)));const An=xr&&xr.targetChanges.get(Vt.targetId),In=Vt.view.applyChanges(Bn,wt.isPrimaryClient,An);return Lp(wt,Vt.targetId,In.Xu),In.snapshot}),function(wt,Vt,Qn,xr){return tt.apply(this,arguments)})(n,ne,Ee,Ye);var tt};const l=yield $h(n.localStore,e,!0),f=new Jh(e,l.Hi),w=f.Wu(l.documents),M=hd.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),F=f.applyChanges(w,n.isPrimaryClient,M);Lp(n,t,F.Xu);const W=new Ym(e,t,f);return n.ic.set(e,W),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),F.snapshot}),kp.apply(this,arguments)}function c0(n,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,me.Z)(function*(n,e){const t=P(n),i=t.ic.get(e),a=t.rc.get(i.targetId);if(a.length>1)return t.rc.set(i.targetId,a.filter(l=>!mc(l,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield _l(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Rd(t.remoteStore,i.targetId),kd(t,i.targetId)}).catch(Bu))):(kd(t,i.targetId),yield _l(t.localStore,i.targetId,!0))}),Fp.apply(this,arguments)}function Jm(){return Jm=(0,me.Z)(function*(n,e,t){const i=Nc(n);try{const a=yield function(l,f){const w=P(l),M=lr.now(),F=f.reduce((Ee,Ye)=>Ee.add(Ye.key),vn());let W,ne;return w.persistence.runTransaction("Locally write mutations","readwrite",Ee=>{let Ye=Fo(),tt=vn();return w.Gi.getEntries(Ee,F).next(wt=>{Ye=wt,Ye.forEach((Vt,Qn)=>{Qn.isValidDocument()||(tt=tt.add(Vt))})}).next(()=>w.localDocuments.getOverlayedDocuments(Ee,Ye)).next(wt=>{W=wt;const Vt=[];for(const Qn of f){const xr=Jv(Qn,W.get(Qn.key).overlayedDocument);null!=xr&&Vt.push(new zu(Qn.key,xr,lw(xr.value.mapValue),Xr.exists(!0)))}return w.mutationQueue.addMutationBatch(Ee,M,Vt,f)}).next(wt=>{ne=wt;const Vt=wt.applyToLocalDocumentSet(W,tt);return w.documentOverlayCache.saveOverlays(Ee,wt.batchId,Vt)})}).then(()=>({batchId:ne.batchId,changes:em(W)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(l,f,w){let M=l.hc[l.currentUser.toKey()];M||(M=new fi(rn)),M=M.insert(f,w),l.hc[l.currentUser.toKey()]=M}(i,a.batchId,t),yield Eu(i,a.changes),yield ei(i.remoteStore)}catch(a){const l=Gs(a,"Failed to persist write");t.reject(l)}}),Jm.apply(this,arguments)}function l0(n,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,me.Z)(function*(n,e){const t=P(n);try{const i=yield j_(t.localStore,e);e.targetChanges.forEach((a,l)=>{const f=t.cc.get(l);f&&(g(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.nc=!0:a.modifiedDocuments.size>0?g(f.nc):a.removedDocuments.size>0&&(g(f.nc),f.nc=!1))}),yield Eu(t,i,e)}catch(i){yield Bu(i)}}),Xm.apply(this,arguments)}function d0(n,e,t){const i=P(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.ic.forEach((l,f)=>{const w=f.view.bu(e);w.snapshot&&a.push(w.snapshot)}),function(l,f){const w=P(l);w.onlineState=f;let M=!1;w.queries.forEach((F,W)=>{for(const ne of W.listeners)ne.bu(f)&&(M=!0)}),M&&qm(w)}(i.eventManager,e),a.length&&i.sc.Wo(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function rI(n,e,t){return ey.apply(this,arguments)}function ey(){return ey=(0,me.Z)(function*(n,e,t){const i=P(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.cc.get(e),l=a&&a.key;if(l){let f=new fi(Et.comparator);f=f.insert(l,Jr.newNoDocument(l,Gt.min()));const w=vn().add(l),M=new xh(Gt.min(),new Map,new hr(rn),f,w);yield l0(i,M),i.uc=i.uc.remove(l),i.cc.delete(e),Vp(i)}else yield _l(i.localStore,e,!1).then(()=>kd(i,e,t)).catch(Bu)}),ey.apply(this,arguments)}function iI(n,e){return ty.apply(this,arguments)}function ty(){return ty=(0,me.Z)(function*(n,e){const t=P(n),i=e.batch.batchId;try{const a=yield Td(t.localStore,e);sy(t,i,null),iy(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Eu(t,a)}catch(a){yield Bu(a)}}),ty.apply(this,arguments)}function sI(n,e,t){return ny.apply(this,arguments)}function ny(){return ny=(0,me.Z)(function*(n,e,t){const i=P(n);try{const a=yield function(l,f){const w=P(l);return w.persistence.runTransaction("Reject batch","readwrite-primary",M=>{let F;return w.mutationQueue.lookupMutationBatch(M,f).next(W=>(g(null!==W),F=W.keys(),w.mutationQueue.removeMutationBatch(M,W))).next(()=>w.mutationQueue.performConsistencyCheck(M)).next(()=>w.documentOverlayCache.removeOverlaysForBatchId(M,F,f)).next(()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(M,F)).next(()=>w.localDocuments.getDocuments(M,F))})}(i.localStore,e);sy(i,e,t),iy(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Eu(i,a)}catch(a){yield Bu(a)}}),ny.apply(this,arguments)}function ry(){return ry=(0,me.Z)(function*(n,e){const t=P(n);Ka(t.remoteStore)||ot("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(l){const f=P(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",w=>f.mutationQueue.getHighestUnacknowledgedBatchId(w))}(t.localStore);if(-1===i)return void e.resolve();const a=t.lc.get(i)||[];a.push(e),t.lc.set(i,a)}catch(i){const a=Gs(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),ry.apply(this,arguments)}function iy(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function sy(n,e,t){const i=P(n);let a=i.hc[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.hc[i.currentUser.toKey()]=a}}function kd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||h0(n,i)})}function h0(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Rd(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Vp(n))}function Lp(n,e,t){for(const i of t)i instanceof Km?(n.ac.addReference(i.key,e),f0(n,i)):i instanceof Op?(ot("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||h0(n,i.key)):d()}function f0(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(ot("SyncEngine","New document in limbo: "+t),n.oc.add(i),Vp(n))}function Vp(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Et(Rn.fromString(e)),i=n.fc.next();n.cc.set(i,new Qm(t)),n.uc=n.uc.insert(t,i),qh(n.remoteStore,new Ic(bi(Dh(t.path)),i,2,ta.at))}}function Eu(n,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,me.Z)(function*(n,e,t){const i=P(n),a=[],l=[],f=[];var w;i.ic.isEmpty()||(i.ic.forEach((w,M)=>{f.push(i._c(M,e,t).then(F=>{if((F||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(M.targetId,F?.fromCache?"not-current":"current"),F){a.push(F);const W=xc.Ci(M.targetId,F);l.push(W)}}))}),yield Promise.all(f),i.sc.Wo(a),yield(w=(0,me.Z)(function*(M,F){const W=P(M);try{yield W.persistence.runTransaction("notifyLocalViewChanges","readwrite",ne=>xe.forEach(F,Ee=>xe.forEach(Ee.Si,Ye=>W.persistence.referenceDelegate.addReference(ne,Ee.targetId,Ye)).next(()=>xe.forEach(Ee.Di,Ye=>W.persistence.referenceDelegate.removeReference(ne,Ee.targetId,Ye)))))}catch(ne){if(!du(ne))throw ne;ot("LocalStore","Failed to update sequence numbers: "+ne)}for(const ne of F){const Ee=ne.targetId;if(!ne.fromCache){const Ye=W.qi.get(Ee),wt=Ye.withLastLimboFreeSnapshotVersion(Ye.snapshotVersion);W.qi=W.qi.insert(Ee,wt)}}}),function(M,F){return w.apply(this,arguments)})(i.localStore,l))}),Up.apply(this,arguments)}function p0(n,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,me.Z)(function*(n,e){const t=P(n);if(!t.currentUser.isEqual(e)){ot("SyncEngine","User change. New user:",e.toKey());const i=yield yl(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(f=>{f.forEach(w=>{w.reject(new Q(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Eu(t,i.ji)}var a}),Bp.apply(this,arguments)}function g0(n,e){const t=P(n),i=t.cc.get(e);if(i&&i.nc)return vn().add(i.key);{let a=vn();const l=t.rc.get(e);if(!l)return a;for(const f of l){const w=t.ic.get(f);a=a.unionWith(w.view.ju)}return a}}function m0(n,e){return jp.apply(this,arguments)}function jp(){return jp=(0,me.Z)(function*(n,e){const t=P(n),i=yield $h(t.localStore,e.query,!0),a=e.view.tc(i);return t.isPrimaryClient&&Lp(t,e.targetId,a.Xu),a}),jp.apply(this,arguments)}function y0(n,e){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,me.Z)(function*(n,e){const t=P(n);return H_(t.localStore,e).then(i=>Eu(t,i))}),Qu.apply(this,arguments)}function aI(n,e,t,i){return oy.apply(this,arguments)}function oy(){return oy=(0,me.Z)(function*(n,e,t,i){const a=P(n),l=yield function(f,w){const M=P(f),F=P(M.mutationQueue);return M.persistence.runTransaction("Lookup mutation documents","readonly",W=>F.Tn(W,w).next(ne=>ne?M.localDocuments.getDocuments(W,ne):xe.resolve(null)))}(a.localStore,e);var w;null!==l?("pending"===t?yield ei(a.remoteStore):"acknowledged"===t||"rejected"===t?(sy(a,e,i||null),iy(a,e),w=e,P(P(a.localStore).mutationQueue).An(w)):d(),yield Eu(a,l)):ot("SyncEngine","Cannot apply mutation batch with id: "+e)}),oy.apply(this,arguments)}function v0(){return v0=(0,me.Z)(function*(n,e){const t=P(n);if(cy(t),Nc(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield $p(t,i.toArray());t.dc=!0,yield Kh(t.remoteStore,!0);for(const l of a)qh(t.remoteStore,l)}else if(!1===e&&!1!==t.dc){const i=[];let a=Promise.resolve();t.rc.forEach((l,f)=>{t.sharedClientState.isLocalQueryTarget(f)?i.push(f):a=a.then(()=>(kd(t,f),_l(t.localStore,f,!0))),Rd(t.remoteStore,f)}),yield a,yield $p(t,i),function(l){const f=P(l);f.cc.forEach((w,M)=>{Rd(f.remoteStore,M)}),f.ac.fs(),f.cc=new Map,f.uc=new fi(Et.comparator)}(t),t.dc=!1,yield Kh(t.remoteStore,!1)}}),v0.apply(this,arguments)}function $p(n,e,t){return _0.apply(this,arguments)}function _0(){return _0=(0,me.Z)(function*(n,e,t){const i=P(n),a=[],l=[];for(const f of e){let w;const M=i.rc.get(f);if(M&&0!==M.length){w=yield vl(i.localStore,bi(M[0]));for(const F of M){const W=i.ic.get(F),ne=yield m0(i,W);ne.snapshot&&l.push(ne.snapshot)}}else{const F=yield Am(i.localStore,f);w=yield vl(i.localStore,F),yield Pp(i,ay(F),f,!1,w.resumeToken)}a.push(w)}return i.sc.Wo(l),a}),_0.apply(this,arguments)}function ay(n){return Wf(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function E0(n){const e=P(n);return P(P(e.localStore).persistence).vi()}function PD(n,e,t,i){return Qt.apply(this,arguments)}function Qt(){return Qt=(0,me.Z)(function*(n,e,t,i){const a=P(n);if(a.dc)return void ot("SyncEngine","Ignoring unexpected query state notification.");const l=a.rc.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const f=yield H_(a.localStore,vc(l[0])),w=xh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Xi.EMPTY_BYTE_STRING);yield Eu(a,f,w);break}case"rejected":yield _l(a.localStore,e,!0),kd(a,e,i);break;default:d()}}),Qt.apply(this,arguments)}function uI(n,e,t){return uy.apply(this,arguments)}function uy(){return uy=(0,me.Z)(function*(n,e,t){const i=cy(n);if(i.dc){for(const a of e){if(i.rc.has(a)){ot("SyncEngine","Adding an already active target "+a);continue}const l=yield Am(i.localStore,a),f=yield vl(i.localStore,l);yield Pp(i,ay(l),f.targetId,!1,f.resumeToken),qh(i.remoteStore,f)}for(const a of t)i.rc.has(a)&&(yield _l(i.localStore,a,!1).then(()=>{Rd(i.remoteStore,a),kd(i,a)}).catch(Bu))}}),uy.apply(this,arguments)}function cy(n){const e=P(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=l0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rI.bind(null,e),e.sc.Wo=eI.bind(null,e.eventManager),e.sc.wc=s0.bind(null,e.eventManager),e}function Nc(n){const e=P(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sI.bind(null,e),e}class Xh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.yt=Ad(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return ml(this.persistence,new gl,e.initialUser,this.yt)}yc(e){return new B_(Tc.Bs,this.yt)}gc(e){return new Mm}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ef extends Xh{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,me.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield Nc(i.Ac.syncEngine),yield ei(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return ml(this.persistence,new gl,e.initialUser,this.yt)}Tc(e,t){return new k_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new JE(t,this.persistence);return new Pv(e.asyncQueue,i)}yc(e){const t=Ac(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Vo.withCacheSize(this.cacheSizeBytes):Vo.DEFAULT;return new Uo(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,K_(),Wh(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Mm}}class gi extends ef{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,me.Z)(function*(){yield t().call(i,e);const a=i.Ac.syncEngine;i.sharedClientState instanceof wp&&(i.sharedClientState.syncEngine={Fr:aI.bind(null,a),$r:PD.bind(null,a),Br:uI.bind(null,a),vi:E0.bind(null,a),Mr:y0.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var l=(0,me.Z)(function*(f){yield function Fd(n,e){return v0.apply(this,arguments)}(i.Ac.syncEngine,f),i.gcScheduler&&(f&&!i.gcScheduler.started?i.gcScheduler.start():f||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(f&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():f||i.indexBackfillerScheduler.stop())});return function(f){return l.apply(this,arguments)}}())})()}gc(e){const t=K_();if(!wp.C(t))throw new Q(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ac(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wp(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class w0{initialize(e,t){var i=this;return(0,me.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>d0(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=p0.bind(null,i.syncEngine),yield Kh(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Xw}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),i=new Z_(e.databaseInfo);return new Q_(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,l=w=>d0(this.syncEngine,w,0),f=Om.C()?new Om:new Rm,new X_(t,i,a,l,f);var t,i,a,l,f}createSyncEngine(e,t){return function(i,a,l,f,w,M,F){const W=new a0(i,a,l,f,w,M);return F&&(W.dc=!0),W}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const i=P(t);ot("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Il(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Hp(n,e,t){if(!t)throw new Q(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ly(n,e,t,i){if(!0===e&&!0===i)throw new Q(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I0(n){if(!Et.isDocumentKey(n))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dy(n){if(Et.isDocumentKey(n))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":d()}function Fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tf(n);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hy(n,e){if(e<=0)throw new Q(L.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const D0=new Map;class b0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ly("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $t;switch(t.type){case"gapi":return new ya(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=D0.get(e);t&&(ot("ComponentProvider","Removing Datastore"),D0.delete(e),t.terminate())}(this),Promise.resolve()}}class Lr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lr(this.firestore,e,this._key)}}class bs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class wu extends bs{constructor(e,t,i){super(e,t,Dh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lr(this.firestore,null,new Et(e))}withConverter(e){return new wu(this.firestore,e,this._path)}}function rf(n,e,...t){if(n=(0,xt.m9)(n),Hp("collection","path",e),n instanceof nf){const i=Rn.fromString(e,...t);return dy(i),new wu(n,null,i)}{if(!(n instanceof Lr||n instanceof wu))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rn.fromString(e,...t));return dy(i),new wu(n.firestore,null,i)}}function sf(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=lh.R()),Hp("doc","path",e),n instanceof nf){const i=Rn.fromString(e,...t);return I0(i),new Lr(n,null,new Et(i))}{if(!(n instanceof Lr||n instanceof wu))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rn.fromString(e,...t));return I0(i),new Lr(n.firestore,n instanceof wu?n.converter:null,new Et(i))}}function fy(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof Lr||n instanceof wu)&&(e instanceof Lr||e instanceof wu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function py(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof bs&&e instanceof bs&&n.firestore===e.firestore&&mc(n._query,e._query)&&n.converter===e.converter}function Vd(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Pc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lI{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Be,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),a=Number(i);isNaN(a)&&e.Dc(`length string (${i}) is not valid number`);const l=yield e.Cc(a);return new o0(JSON.parse(l),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class S0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Q(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(a=(0,me.Z)(function*(l,f){const w=P(l),M=fd(w.yt)+"/documents",F={documents:f.map(Ye=>Mh(w.yt,Ye))},W=yield w._o("BatchGetDocuments",M,F,f.length),ne=new Map;W.forEach(Ye=>{const tt=function sm(n,e){return"found"in e?function(t,i){g(!!i.found);const a=mu(t,i.found.name),l=pi(i.found.updateTime),f=i.found.createTime?pi(i.found.createTime):Gt.min(),w=new as({mapValue:{fields:i.found.fields}});return Jr.newFoundDocument(a,l,f,w)}(n,e):"missing"in e?function(t,i){g(!!i.missing),g(!!i.readTime);const a=mu(t,i.missing),l=pi(i.readTime);return Jr.newNoDocument(a,l)}(n,e):d()}(w.yt,Ye);ne.set(tt.key.toString(),tt)});const Ee=[];return f.forEach(Ye=>{const tt=ne.get(Ye.toString());g(!!tt),Ee.push(tt)}),Ee}),function(l,f){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new ld(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const l=Et.fromPath(a);e.mutations.push(new Xg(l,e.precondition(l)))}),yield(i=(0,me.Z)(function*(a,l){const f=P(a),w=fd(f.yt)+"/documents",M={writes:l.map(F=>tp(f.yt,F))};yield f.ao("Commit",w,M)}),function(a,l){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw d();t=Gt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Q(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gt.min())?Xr.exists(!1):Xr.updateTime(t):Xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gt.min()))throw new Q(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xr.updateTime(t)}return Xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class A0{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.kc=i.maxAttempts,this.xo=new Ip(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new S0(e.datastore),i=e.Mc(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Fc(l)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!Za(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!e_(t)}return!1}}class hI{constructor(e,t,i,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Di.UNAUTHENTICATED,this.clientId=lh.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var f=(0,me.Z)(function*(w){ot("FirestoreClient","Received user=",w.uid),yield l.authCredentialListener(w),l.user=w});return function(w){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(i,f=>(ot("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Be;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=Gs(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function gy(n,e){return my.apply(this,arguments)}function my(){return my=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ot("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,me.Z)(function*(l){i.isEqual(l)||(yield yl(e.localStore,l),i=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),my.apply(this,arguments)}function x0(n,e){return M0.apply(this,arguments)}function M0(){return M0=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield R0(n);ot("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>Qw(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>Qw(e.remoteStore,l)),n.onlineComponents=e}),M0.apply(this,arguments)}function R0(n){return O0.apply(this,arguments)}function O0(){return O0=(0,me.Z)(function*(n){return n.offlineComponents||(ot("FirestoreClient","Using default OfflineComponentProvider"),yield gy(n,new Xh)),n.offlineComponents}),O0.apply(this,arguments)}function yy(n){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,me.Z)(function*(n){return n.onlineComponents||(ot("FirestoreClient","Using default OnlineComponentProvider"),yield x0(n,new w0)),n.onlineComponents}),Gp.apply(this,arguments)}function af(n){return R0(n).then(e=>e.persistence)}function zp(n){return R0(n).then(e=>e.localStore)}function vy(n){return yy(n).then(e=>e.remoteStore)}function Wp(n){return yy(n).then(e=>e.syncEngine)}function Bd(n){return _y.apply(this,arguments)}function _y(){return _y=(0,me.Z)(function*(n){const e=yield yy(n),t=e.eventManager;return t.onListen=u0.bind(null,e.syncEngine),t.onUnlisten=c0.bind(null,e.syncEngine),t}),_y.apply(this,arguments)}function N0(n,e,t={}){const i=new Be;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(a,l,f,w,M){const F=new Pc({next:ne=>{l.enqueueAndForget(()=>Yh(a,W));const Ee=ne.docs.has(f);!Ee&&ne.fromCache?M.reject(new Q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):Ee&&ne.fromCache&&w&&"server"===w.source?M.reject(new Q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):M.resolve(ne)},error:ne=>M.reject(ne)}),W=new Rp(Dh(f.path),F,{includeMetadataChanges:!0,Nu:!0});return zm(a,W)}(yield Bd(n),n.asyncQueue,e,t,i)})),i.promise}function k0(n,e,t={}){const i=new Be;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(a,l,f,w,M){const F=new Pc({next:ne=>{l.enqueueAndForget(()=>Yh(a,W)),ne.fromCache&&"server"===w.source?M.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):M.resolve(ne)},error:ne=>M.reject(ne)}),W=new Rp(f,F,{includeMetadataChanges:!0,Nu:!0});return zm(a,W)}(yield Bd(n),n.asyncQueue,e,t,i)})),i.promise}class F0{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ip(this,"async_queue_retry"),this.Wc=()=>{const t=Wh();t&&ot("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Wh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Wh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Be;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!du(t))throw t;ot("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,oi("INTERNAL UNHANDLED ERROR: ",function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=Ia.createAndSchedule(this,e,t,i,l=>this.Yc(l));return this.Uc.push(a),a}zc(){this.Kc&&d()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Ey(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class L0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Be,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ar extends nf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new F0,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wy(this),this._firestoreClient.terminate()}}function Ti(n){return n._firestoreClient||wy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wy(n){var e;const t=n._freezeSettings(),i=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new XE(n._databaseId,l,n._persistenceKey,(w=t).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,w.useFetchStreams));var l,w;n._firestoreClient=new hI(n._authCredentials,n._appCheckCredentials,n._queue,i)}function B0(n,e,t){const i=new Be;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield gy(n,t),yield x0(n,e),i.resolve()}catch(a){const l=a;if(!("FirebaseError"===(f=l).name?f.code===L.FAILED_PRECONDITION||f.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&f instanceof DOMException)||22===f.code||20===f.code||11===f.code))throw l;Lu("Error enabling offline persistence. Falling back to persistence disabled: "+l),i.reject(l)}var f})).then(()=>i.promise)}function $0(n){if(n._initialized||n._terminated)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iu(Xi.fromBase64String(e))}catch(t){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Iu(Xi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ju{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cl{constructor(e){this._methodName=e}}class cf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}}const H0=/^__.*__$/;class DI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new zu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}class G0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new zu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Dy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw d()}}class qp{constructor(e,t,i,a,l,f){this.settings=e,this.databaseId=t,this.yt=i,this.ignoreUndefinedProperties=a,void 0===l&&this.na(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.ua(e),a}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Yp(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Dy(this.sa)&&H0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class bI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=i||Ad(e)}da(e,t,i,a=!1){return new qp({sa:e,methodName:t,fa:i,path:Qr.emptyPath(),oa:!1,la:a},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Tl(n){const e=n._freezeSettings(),t=Ad(n._databaseId);return new bI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jd(n,e,t,i,a,l={}){const f=n.da(l.merge||l.mergeFields?2:0,e,t,a);Kp("Data must be an object, but it was:",f,i);const w=z0(i,f);let M,F;if(l.merge)M=new ko(f.fieldMask),F=f.fieldTransforms;else if(l.mergeFields){const W=[];for(const ne of l.mergeFields){const Ee=df(e,ne,t);if(!f.contains(Ee))throw new Q(L.INVALID_ARGUMENT,`Field '${Ee}' is specified in your field mask but missing from your input data.`);Sy(W,Ee)||W.push(Ee)}M=new ko(W),F=f.fieldTransforms.filter(ne=>M.covers(ne.field))}else M=null,F=f.fieldTransforms;return new DI(new as(w),M,F)}class Sl extends Cl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sl}}function by(n,e,t){return new qp({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class lf extends Cl{_toFieldTransform(e){return new Th(e.path,new _c)}isEqual(e){return e instanceof lf}}class CI extends Cl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=by(this,e,!0),i=this._a.map(l=>kc(l,t)),a=new nl(i);return new Th(e.path,a)}isEqual(e){return this===e}}class TI extends Cl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=by(this,e,!0),i=this._a.map(l=>kc(l,t)),a=new rl(i);return new Th(e.path,a)}isEqual(e){return this===e}}class Cy extends Cl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ch(e.yt,Yg(e.yt,this.wa));return new Th(e.path,t)}isEqual(e){return this===e}}function Ty(n,e,t,i){const a=n.da(1,e,t);Kp("Data must be an object, but it was:",a,i);const l=[],f=as.empty();hu(i,(M,F)=>{const W=$d(e,M,t);F=(0,xt.m9)(F);const ne=a.ca(W);if(F instanceof Sl)l.push(W);else{const Ee=kc(F,ne);null!=Ee&&(l.push(W),f.set(W,Ee))}});const w=new ko(l);return new G0(f,w,a.fieldTransforms)}function Zp(n,e,t,i,a,l){const f=n.da(1,e,t),w=[df(e,i,t)],M=[a];if(l.length%2!=0)throw new Q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ee=0;Ee<l.length;Ee+=2)w.push(df(e,l[Ee])),M.push(l[Ee+1]);const F=[],W=as.empty();for(let Ee=w.length-1;Ee>=0;--Ee)if(!Sy(F,w[Ee])){const Ye=w[Ee];let tt=M[Ee];tt=(0,xt.m9)(tt);const wt=f.ca(Ye);if(tt instanceof Sl)F.push(Ye);else{const Vt=kc(tt,wt);null!=Vt&&(F.push(Ye),W.set(Ye,Vt))}}const ne=new ko(F);return new G0(W,ne,f.fieldTransforms)}function Al(n,e,t,i=!1){return kc(t,n.da(i?4:3,e))}function kc(n,e){if(SI(n=(0,xt.m9)(n)))return Kp("Unsupported field value:",e,n),z0(n,e);if(n instanceof Cl)return function(t,i){if(!Dy(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const a=[];let l=0;for(const f of t){let w=kc(f,i.aa(l));null==w&&(w={nullValue:"NULL_VALUE"}),a.push(w),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yg(i.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=lr.fromDate(t);return{timestampValue:sl(i.yt,a)}}if(t instanceof lr){const a=new lr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:sl(i.yt,a)}}if(t instanceof cf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Iu)return{bytesValue:l_(i.yt,t._byteString)};if(t instanceof Lr){const a=i.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw i.ha(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:nm(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${tf(t)}`)}(n,e)}function z0(n,e){const t={};return jf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hu(n,(i,a)=>{const l=kc(a,e.ra(i));null!=l&&(t[i]=l)}),{mapValue:{fields:t}}}function SI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof lr||n instanceof cf||n instanceof Iu||n instanceof Lr||n instanceof Cl)}function Kp(n,e,t){if(!SI(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=tf(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function df(n,e,t){if((e=(0,xt.m9)(e))instanceof Ju)return e._internalPath;if("string"==typeof e)return $d(n,e);throw Yp("Field path arguments must be of type string or ",n,!1,void 0,t)}const AI=new RegExp("[~\\*/\\[\\]]");function $d(n,e,t){if(e.search(AI)>=0)throw Yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ju(...e.split("."))._internalPath}catch{throw Yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yp(n,e,t,i,a){const l=i&&!i.isEmpty(),f=void 0!==a;let w=`Function ${e}() called with invalid data`;t&&(w+=" (via `toFirestore()`)"),w+=". ";let M="";return(l||f)&&(M+=" (found",l&&(M+=` in field ${i}`),f&&(M+=` in document ${a}`),M+=")"),new Q(L.INVALID_ARGUMENT,w+n+M)}function Sy(n,e){return n.some(t=>t.isEqual(e))}class xl{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Lr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new W0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class W0 extends xl{data(){return super.data()}}function hf(n,e){return"string"==typeof e?$d(n,e):e instanceof Ju?e._internalPath:e._delegate._internalPath}function Ay(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qp{}class ff extends Qp{}function Fc(n,e,...t){let i=[];e instanceof Qp&&i.push(e),i=i.concat(t),function(a){const l=a.filter(w=>w instanceof Ml).length,f=a.filter(w=>w instanceof pf).length;if(l>1||l>0&&f>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class pf extends ff{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new pf(e,t,i)}_apply(e){const t=this._parse(e);return Q0(e._query,t),new bs(e.firestore,e.converter,qg(e._query,t))}_parse(e){const t=Tl(e.firestore);return function(a,l,f,w,M,F,W){let ne;if(M.isKeyField()){if("array-contains"===F||"array-contains-any"===F)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${F}' queries on documentId().`);if("in"===F||"not-in"===F){Y0(W,F);const Ee=[];for(const Ye of W)Ee.push(K0(w,a,Ye));ne={arrayValue:{values:Ee}}}else ne=K0(w,a,W)}else"in"!==F&&"not-in"!==F&&"array-contains-any"!==F||Y0(W,F),ne=Al(f,"where",W,"in"===F||"not-in"===F);return kn.create(M,F,ne)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ml extends Qp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ml(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:dr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,a){let l=i;const f=a.getFlattenedFilters();for(const w of f)Q0(l,w),l=qg(l,w)}(e._query,t),new bs(e.firestore,e.converter,qg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xy extends ff{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xy(e,t)}_apply(e){const t=function(i,a,l){if(null!==i.startAt)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new Fr(a,l);return function(w,M){if(null===Wg(w)){const F=id(w);null!==F&&Hd(0,F,M.field)}}(i,f),f}(e._query,this._field,this._direction);return new bs(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new gu(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class My extends ff{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new My(e,t,i)}_apply(e){return new bs(e.firestore,e.converter,sd(e._query,this._limit,this._limitType))}}class gf extends ff{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new gf(e,t,i)}_apply(e){const t=Z0(e,this.type,this._docOrFields,this._inclusive);return new bs(e.firestore,e.converter,(a=t,new gu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)));var i,a}}class Jp extends ff{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Jp(e,t,i)}_apply(e){const t=Z0(e,this.type,this._docOrFields,this._inclusive);return new bs(e.firestore,e.converter,(a=t,new gu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)));var i,a}}function Z0(n,e,t,i){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof xl)return function(a,l,f,w,M){if(!w)throw new Q(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const F=[];for(const W of gc(a))if(W.field.isKeyField())F.push(tl(l,w.key));else{const ne=w.data.field(W.field);if(gh(ne))throw new Q(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+W.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ne){const Ee=W.field.canonicalString();throw new Q(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ee}' (used as the orderBy) does not exist.`)}F.push(ne)}return new js(F,M)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=Tl(n.firestore);return function(l,f,w,M,F,W){const ne=l.explicitOrderBy;if(F.length>ne.length)throw new Q(L.INVALID_ARGUMENT,`Too many arguments provided to ${M}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ee=[];for(let Ye=0;Ye<F.length;Ye++){const tt=F[Ye];if(ne[Ye].field.isKeyField()){if("string"!=typeof tt)throw new Q(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${M}(), but got a ${typeof tt}`);if(!Zf(l)&&-1!==tt.indexOf("/"))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${M}() must be a plain document ID, but '${tt}' contains a slash.`);const wt=l.path.child(Rn.fromString(tt));if(!Et.isDocumentKey(wt))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${M}() must result in a valid document path, but '${wt}' is not because it contains an odd number of segments.`);const Vt=new Et(wt);Ee.push(tl(f,Vt))}else{const wt=Al(w,M,tt);Ee.push(wt)}}return new js(Ee,W)}(n._query,n.firestore._databaseId,a,e,t,i)}}function K0(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zf(e)&&-1!==t.indexOf("/"))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Rn.fromString(t));if(!Et.isDocumentKey(i))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return tl(n,new Et(i))}if(t instanceof Lr)return tl(n,t._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(t)}.`)}function Y0(n,e){if(!Array.isArray(n)||0===n.length)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Q0(n,e){if(e.isInequality()){const i=id(n),a=e.field;if(null!==i&&!i.isEqual(a))throw new Q(L.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${a.toString()}'`);const l=Wg(n);null!==l&&Hd(0,a,l)}const t=function(i,a){for(const l of i)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Q(L.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Hd(n,e,t){if(!t.isEqual(e))throw new Q(L.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Xp{convertValue(e,t="none"){switch(Xc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw d()}}convertObject(e,t){const i={};return hu(e.fields,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertGeoPoint(e){return new cf(ai(e.latitude),ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Lg(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const t=hc(e);return new lr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Rn.fromString(e);g(y_(i));const a=new $u(i.get(1),i.get(3)),l=new Et(i.popFirst(5));return a.isEqual(t)||oi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function mf(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class J0 extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lr(this.firestore,null,t)}}class Lc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Du extends xl{constructor(e,t,i,a,l,f){super(e,t,i,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(hf("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class yf extends Du{data(e={}){return super.data(e)}}class Rl{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Lc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new yf(this._firestore,this._userDataWriter,i.key,i,new Lc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(f=>({type:"added",doc:new yf(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Lc(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:l++}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const w=new yf(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Lc(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let M=-1,F=-1;return 0!==f.type&&(M=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),1!==f.type&&(l=l.add(f.doc),F=l.indexOf(f.doc.key)),{type:X0(f.type),doc:w,oldIndex:M,newIndex:F}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function X0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return d()}}function eE(n,e){return n instanceof Du&&e instanceof Du?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Rl&&e instanceof Rl&&n._firestore===e._firestore&&py(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Vc extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lr(this.firestore,null,t)}}function tE(n,e,t){n=Fn(n,Lr);const i=Fn(n.firestore,Ar),a=mf(n.converter,e,t);return Xu(i,[jd(Tl(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Xr.none())])}function eg(n,e,t,...i){n=Fn(n,Lr);const a=Fn(n.firestore,Ar),l=Tl(a);let f;return f="string"==typeof(e=(0,xt.m9)(e))||e instanceof Ju?Zp(l,"updateDoc",n._key,e,t,i):Ty(l,"updateDoc",n._key,e),Xu(a,[f.toMutation(n._key,Xr.exists(!0))])}function nE(n,...e){var t,i,a;n=(0,xt.m9)(n);let l={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||Ey(e[f])||(l=e[f],f++);const w={includeMetadataChanges:l.includeMetadataChanges};if(Ey(e[f])){const ne=e[f];e[f]=null===(t=ne.next)||void 0===t?void 0:t.bind(ne),e[f+1]=null===(i=ne.error)||void 0===i?void 0:i.bind(ne),e[f+2]=null===(a=ne.complete)||void 0===a?void 0:a.bind(ne)}let M,F,W;if(n instanceof Lr)F=Fn(n.firestore,Ar),W=Dh(n._key.path),M={next:ne=>{e[f]&&e[f](Gd(F,n,ne))},error:e[f+1],complete:e[f+2]};else{const ne=Fn(n,bs);F=Fn(ne.firestore,Ar),W=ne._query;const Ee=new Vc(F);M={next:Ye=>{e[f]&&e[f](new Rl(F,Ee,ne,Ye))},error:e[f+1],complete:e[f+2]},Ay(n._query)}return function(ne,Ee,Ye,tt){const wt=new Pc(tt),Vt=new Rp(Ee,wt,Ye);return ne.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return zm(yield Bd(ne),Vt)})),()=>{wt.bc(),ne.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Yh(yield Bd(ne),Vt)}))}}(Ti(F),W,w,M)}function Xu(n,e){return function(t,i){const a=new Be;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function nI(n,e,t){return Jm.apply(this,arguments)}(yield Wp(t),i,a)})),a.promise}(Ti(n),e)}function Gd(n,e,t){const i=t.docs.get(e._key),a=new Vc(n);return new Du(n,a,e._key,i,new Lc(t.hasPendingWrites,t.fromCache),e.converter)}const rE={maxAttempts:5};class Ny{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tl(e)}set(e,t,i){this._verifyNotCommitted();const a=Cu(e,this._firestore),l=mf(a.converter,t,i),f=jd(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,i);return this._mutations.push(f.toMutation(a._key,Xr.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Cu(e,this._firestore);let f;return f="string"==typeof(t=(0,xt.m9)(t))||t instanceof Ju?Zp(this._dataReader,"WriteBatch.update",l._key,t,i,a):Ty(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(f.toMutation(l._key,Xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cu(e,this._firestore);return this._mutations=this._mutations.concat(new ld(t._key,Xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cu(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Q(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class iE extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tl(e)}get(e){const t=Cu(e,this._firestore),i=new J0(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return d();const l=a[0];if(l.isFoundDocument())return new xl(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new xl(this._firestore,i,t._key,null,t.converter);throw d()})}set(e,t,i){const a=Cu(e,this._firestore),l=mf(a.converter,t,i),f=jd(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,i);return this._transaction.set(a._key,f),this}update(e,t,i,...a){const l=Cu(e,this._firestore);let f;return f="string"==typeof(t=(0,xt.m9)(t))||t instanceof Ju?Zp(this._dataReader,"Transaction.update",l._key,t,i,a):Ty(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,f),this}delete(e){const t=Cu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cu(e,this._firestore),i=new Vc(this._firestore);return super.get(e).then(a=>new Du(this._firestore,i,t._key,a._document,new Lc(!1,!1),t.converter))}}function tg(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Q("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Uy(){if(typeof Uint8Array>"u")throw new Q("unimplemented","Uint8Arrays are not available in this environment.")}function By(){if(!function AD(){return typeof atob<"u"}())throw new Q("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){lu=Tt.SDK_VERSION,(0,Tt._registerComponent)(new mt.wA("firestore",(t,{instanceIdentifier:i,options:a})=>{const l=t.getProvider("app").getImmediate(),f=new Ar(new Sr(t.getProvider("auth-internal")),new Vu(t.getProvider("app-check-internal")),function(w,M){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $u(w.options.projectId,M)}(l,i),l);return a=Object.assign({useFetchStreams:e},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),(0,Tt.registerVersion)(Kc,"3.8.3",n),(0,Tt.registerVersion)(Kc,"3.8.3","esm2017")}();class zd{constructor(e){this._delegate=e}static fromBase64String(e){return By(),new zd(Iu.fromBase64String(e))}static fromUint8Array(e){return Uy(),new zd(Iu.fromUint8Array(e))}toBase64(){return By(),this._delegate.toBase64()}toUint8Array(){return Uy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jy(n){return function uE(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class cE{enableIndexedDbPersistence(e,t){return function U0(n,e){$0(n=Fn(n,Ar));const t=Ti(n),i=n._freezeSettings(),a=new w0;return B0(t,a,new ef(a,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function vI(n){$0(n=Fn(n,Ar));const e=Ti(n),t=n._freezeSettings(),i=new w0;return B0(e,i,new gi(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function _I(n){if(n._initialized&&!n._terminated)throw new Q(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Be;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(i){if(!Po.C())return Promise.resolve();const a=i+"main";yield Po.delete(a)}),function(i){return t.apply(this,arguments)})(Ac(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lE{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof $u||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function Ld(n,e,t,i={}){var a;const l=(n=Fn(n,nf))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Lu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let f,w;if("string"==typeof i.mockUserToken)f=i.mockUserToken,w=Di.MOCK_USER;else{f=(0,xt.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const M=i.mockUserToken.sub||i.mockUserToken.user_id;if(!M)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Di(M)}n._authCredentials=new yn(new Mt(f,w))}}(this._delegate,e,t,i)}enableNetwork(){return function EI(n){return function fI(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield af(n),t=yield vy(n);return e.setNetworkEnabled(!0),function(i){const a=P(i);return a._u.delete(0),Md(a)}(t)}))}(Ti(n=Fn(n,Ar)))}(this._delegate)}disableNetwork(){return function j0(n){return function pI(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield af(n),t=yield vy(n);return e.setNetworkEnabled(!1),(i=(0,me.Z)(function*(a){const l=P(a);l._u.add(0),yield Il(l),l.gu.set("Offline")}),function(a){return i.apply(this,arguments)})(t);var i}))}(Ti(n=Fn(n,Ar)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,ly("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Iy(n){return function(e){const t=new Be;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function oI(n,e){return ry.apply(this,arguments)}(yield Wp(e),t)})),t.promise}(Ti(n=Fn(n,Ar)))}(this._delegate)}onSnapshotsInSync(e){return function jI(n,e){return function gI(n,e){const t=new Pc(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return i=yield Bd(n),a=t,P(i).Ru.add(a),void a.next();var i,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return i=yield Bd(n),a=t,void P(i).Ru.delete(a);var i,a}))}}(Ti(n=Fn(n,Ar)),Ey(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pl(this,rf(this._delegate,e))}catch(t){throw Bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Da(this,sf(this._delegate,e))}catch(t){throw Bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ho(this,function C0(n,e){if(n=Fn(n,nf),Hp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bs(n,null,(t=e,new gu(Rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Py(n,e,t){n=Fn(n,Ar);const i=Object.assign(Object.assign({},rE),t);return function(a){if(a.maxAttempts<1)throw new Q(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(a,l,f){const w=new Be;return a.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const M=yield function Ud(n){return yy(n).then(e=>e.datastore)}(a);new A0(a.asyncQueue,M,f,l,w).run()})),w.promise}(Ti(n),a=>e(new iE(n,a)),i)}(this._delegate,t=>e(new Ws(this,t)))}batch(){return Ti(this._delegate),new Ol(new Ny(this._delegate,e=>Xu(this._delegate,e)))}loadBundle(e){return function wI(n,e){const t=Ti(n=Fn(n,Ar)),i=new L0;return function uf(n,e,t,i){const a=function(l,f){let w;return w="string"==typeof l?(new TextEncoder).encode(l):l,M=function(M,F){if(M instanceof Uint8Array)return Vd(M,F);if(M instanceof ArrayBuffer)return Vd(new Uint8Array(M),F);if(M instanceof ReadableStream)return M.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(w),new lI(M,f);var M}(t,Ad(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function cI(n,e,t){const i=P(n);var a;(a=(0,me.Z)(function*(l,f,w){try{const M=yield f.getMetadata();if(yield function(Ee,Ye){const tt=P(Ee),wt=pi(Ye.createTime);return tt.persistence.runTransaction("hasNewerBundle","readonly",Vt=>tt.Ns.getBundleMetadata(Vt,Ye.id)).then(Vt=>!!Vt&&Vt.createTime.compareTo(wt)>=0)}(l.localStore,M))return yield f.close(),w._completeWith({taskState:"Success",documentsLoaded:(Ee=M).totalDocuments,bytesLoaded:Ee.totalBytes,totalDocuments:Ee.totalDocuments,totalBytes:Ee.totalBytes}),Promise.resolve(new Set);w._updateProgress(Zm(M));const F=new tI(M,l.localStore,f.yt);let W=yield f.mc();for(;W;){const Ee=yield F.Fu(W);Ee&&w._updateProgress(Ee),W=yield f.mc()}const ne=yield F.complete();return yield Eu(l,ne.Lu,void 0),yield function(Ee,Ye){const tt=P(Ee);return tt.persistence.runTransaction("Save bundle","readwrite",wt=>tt.Ns.saveBundleMetadata(wt,Ye))}(l.localStore,M),w._completeWith(ne.progress),Promise.resolve(ne.Bu)}catch(M){return Lu("SyncEngine",`Loading bundle failed with ${M}`),w._failWith(M),Promise.resolve(new Set)}var Ee}),function(l,f,w){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield Wp(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function II(n,e){return function mI(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,i){const a=P(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ns.getNamedQuery(l,i))}(yield zp(n),e)}))}(Ti(n=Fn(n,Ar)),e).then(t=>t?new bs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ho(this,t):null)}}class Ef extends Xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(new Iu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Da.forKey(t,this.firestore,null)}}class Ws{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ef(e)}get(e){const t=kl(e);return this._delegate.get(t).then(i=>new Wd(this._firestore,new Du(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=kl(e);return i?(tg("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=kl(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=kl(e);return this._delegate.delete(t),this}}class Ol{constructor(e){this._delegate=e}set(e,t,i){const a=kl(e);return i?(tg("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=kl(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=kl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nl{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new yf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ec(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Nl.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let l=a.get(t);return l||(l=new Nl(e,new Ef(e),t),a.set(t,l)),l}}Nl.INSTANCES=new WeakMap;class Da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ef(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Da(t,new Lr(t._delegate,i,new Et(e)))}static forKey(e,t,i){return new Da(t,new Lr(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Pl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pl(this.firestore,rf(this._delegate,e))}catch(t){throw Bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Lr&&fy(this._delegate,e)}set(e,t){t=tg("DocumentReference.set",t);try{return t?tE(this._delegate,e,t):tE(this._delegate,e)}catch(i){throw Bo(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?eg(this._delegate,e):eg(this._delegate,e,t,...i)}catch(a){throw Bo(a,"updateDoc()","DocumentReference.update()")}}delete(){return function _f(n){return Xu(Fn(n.firestore,Ar),[new ld(n._key,Xr.none())])}(this._delegate)}onSnapshot(...e){const t=GI(e),i=$y(e,a=>new Wd(this.firestore,new Du(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return nE(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function VI(n){n=Fn(n,Lr);const e=Fn(n.firestore,Ar),t=Ti(e),i=new Vc(e);return function FD(n,e){const t=new Be;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(i=(0,me.Z)(function*(a,l,f){try{const w=yield function(M,F){const W=P(M);return W.persistence.runTransaction("read document","readonly",ne=>W.localDocuments.getDocument(ne,F))}(a,l);w.isFoundDocument()?f.resolve(w):w.isNoDocument()?f.resolve(null):f.reject(new Q(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(w){const M=Gs(w,`Failed to get document '${l} from cache`);f.reject(M)}}),function(a,l,f){return i.apply(this,arguments)})(yield zp(n),e,t);var i})),t.promise}(t,n._key).then(a=>new Du(e,i,n._key,a,new Lc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function vf(n){n=Fn(n,Lr);const e=Fn(n.firestore,Ar);return N0(Ti(e),n._key,{source:"server"}).then(t=>Gd(e,n,t))}(this._delegate):function LI(n){n=Fn(n,Lr);const e=Fn(n.firestore,Ar);return N0(Ti(e),n._key).then(t=>Gd(e,n,t))}(this._delegate),t.then(i=>new Wd(this.firestore,new Du(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Da(this.firestore,this._delegate.withConverter(e?Nl.getInstance(this.firestore,e):null))}}function Bo(n,e,t){return n.message=n.message.replace(e,t),n}function GI(n){for(const e of n)if("object"==typeof e&&!jy(e))return e;return{}}function $y(n,e){var t,i;let a;return a=jy(n[0])?n[0]:jy(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class Wd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eE(this._delegate,e._delegate)}}class ec extends Wd{data(e){const t=this._delegate.data(e);return function b(n,e){n||d()}(void 0!==t),t}}class ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ef(e)}where(e,t,i){try{return new ho(this.firestore,Fc(this._delegate,function xI(n,e,t){const i=e,a=hf("where",n);return pf._create(a,i,t)}(e,t,i)))}catch(a){throw Bo(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ho(this.firestore,Fc(this._delegate,function RI(n,e="asc"){const t=e,i=hf("orderBy",n);return xy._create(i,t)}(e,t)))}catch(i){throw Bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ho(this.firestore,Fc(this._delegate,function OI(n){return hy("limit",n),My._create("limit",n,"F")}(e)))}catch(t){throw Bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ho(this.firestore,Fc(this._delegate,function NI(n){return hy("limitToLast",n),My._create("limitToLast",n,"L")}(e)))}catch(t){throw Bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ho(this.firestore,Fc(this._delegate,function q0(...n){return gf._create("startAt",n,!0)}(...e)))}catch(t){throw Bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ho(this.firestore,Fc(this._delegate,function PI(...n){return gf._create("startAfter",n,!1)}(...e)))}catch(t){throw Bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ho(this.firestore,Fc(this._delegate,function kI(...n){return Jp._create("endBefore",n,!1)}(...e)))}catch(t){throw Bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ho(this.firestore,Fc(this._delegate,function FI(...n){return Jp._create("endAt",n,!0)}(...e)))}catch(t){throw Bo(t,"endAt()","Query.endAt()")}}isEqual(e){return py(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Oy(n){n=Fn(n,bs);const e=Fn(n.firestore,Ar),t=Ti(e),i=new Vc(e);return function P0(n,e){const t=new Be;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(i=(0,me.Z)(function*(a,l,f){try{const w=yield $h(a,l,!0),M=new Jh(l,w.Hi),F=M.Wu(w.documents),W=M.applyChanges(F,!1);f.resolve(W.snapshot)}catch(w){const M=Gs(w,`Failed to execute query '${l} against cache`);f.reject(M)}}),function(a,l,f){return i.apply(this,arguments)})(yield zp(n),e,t);var i})),t.promise}(t,n._query).then(a=>new Rl(e,i,n,a))}(this._delegate):"server"===e?.source?function bu(n){n=Fn(n,bs);const e=Fn(n.firestore,Ar),t=Ti(e),i=new Vc(e);return k0(t,n._query,{source:"server"}).then(a=>new Rl(e,i,n,a))}(this._delegate):function UI(n){n=Fn(n,bs);const e=Fn(n.firestore,Ar),t=Ti(e),i=new Vc(e);return Ay(n._query),k0(t,n._query).then(a=>new Rl(e,i,n,a))}(this._delegate),t.then(i=>new Gy(this.firestore,new Rl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=GI(e),i=$y(e,a=>new Gy(this.firestore,new Rl(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return nE(this._delegate,t,i)}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?Nl.getInstance(this.firestore,e):null))}}class Hy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ec(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Gy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ec(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Hy(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new ec(this._firestore,i))})}isEqual(e){return eE(this._delegate,e._delegate)}}class Pl extends ho{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Da(this.firestore,e):null}doc(e){try{return new Da(this.firestore,void 0===e?sf(this._delegate):sf(this._delegate,e))}catch(t){throw Bo(t,"doc()","CollectionReference.doc()")}}add(e){return function BI(n,e){const t=Fn(n.firestore,Ar),i=sf(n),a=mf(n.converter,e);return Xu(t,[jd(Tl(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,Xr.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Da(this.firestore,t))}isEqual(e){return fy(this._delegate,e._delegate)}withConverter(e){return new Pl(this.firestore,this._delegate.withConverter(e?Nl.getInstance(this.firestore,e):null))}}function kl(n){return Fn(n,Lr)}class zy{constructor(...e){this._delegate=new Ju(...e)}static documentId(){return new zy(Qr.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof Ju&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sE(){return new lf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fl(e)}static delete(){const e=function ky(){return new Sl("deleteField")}();return e._methodName="FieldValue.delete",new Fl(e)}static arrayUnion(...e){const t=function Fy(...n){return new CI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fl(t)}static arrayRemove(...e){const t=function Ly(...n){return new TI("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fl(t)}static increment(e){const t=function $I(n){return new Cy("increment",n)}(e);return t._methodName="FieldValue.increment",new Fl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Wy={Firestore:lE,GeoPoint:cf,Timestamp:lr,Blob:zd,Transaction:Ws,WriteBatch:Ol,DocumentReference:Da,DocumentSnapshot:Wd,Query:ho,QueryDocumentSnapshot:ec,QuerySnapshot:Gy,CollectionReference:Pl,FieldPath:zy,FieldValue:Fl,setLogLevel:function HI(n){!function Lf(n){kr.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function rg(n,e){return function ng(n,e=_o.z){return new fe.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function ig(n,e){return rg(n,e).pipe((0,te.U)(t=>({payload:t,type:"query"})))}function sg(n,e){return ig(n,e).pipe((0,Eo.O)(void 0),Aa(),(0,te.U)(([t,i])=>{const a=i.payload.docChanges(),l=a.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((f,w)=>{const M=a.find(W=>W.doc.ref.isEqual(f.ref)),F=t?.payload.docs.find(W=>W.ref.isEqual(f.ref));M&&JSON.stringify(M.doc.metadata)===JSON.stringify(f.metadata)||!M&&F&&JSON.stringify(F.metadata)===JSON.stringify(f.metadata)||l.push({type:"modified",payload:{oldIndex:w,newIndex:w,type:"modified",doc:f}})}),l}))}function qy(n,e,t){return sg(n,t).pipe((0,hs.R)((i,a)=>function qd(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function fE(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Zy(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Zy(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Zy(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(l=>l.payload),e),[]),function Ys(n,e=As.y){return n=n??Qs,(0,Go.e)((t,i)=>{let a,l=!0;t.subscribe((0,ds.x)(i,f=>{const w=e(f);(l||!n(a,w))&&(l=!1,a=w,i.next(f))}))})}(),(0,te.U)(i=>i.map(a=>({type:a.type,payload:a}))))}function Zy(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function og(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hE(n){(function dE(n,e){n.INTERNAL.registerComponent(new mt.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},Wy)))})(n,(e,t)=>new lE(e,t,new cE)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(xs.Z);class zI{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=sg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,te.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Eo.O)(void 0),Aa(),(0,Qe.h)(([i,a])=>a.length>0||!i),(0,te.U)(([i,a])=>a),ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,hs.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=og(e);return qy(this.query,t,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return ig(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),ke.iC)}get(e){return(0,_e.D)(this.query.get(e)).pipe(ke.iC)}add(e){return this.ref.add(e)}doc(e){return new pE(this.ref.doc(e),this.afs)}}class pE{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:l}=Ky(i,t);return new zI(a,l,this.afs)}snapshotChanges(){return function GD(n,e){return rg(n,e).pipe((0,Eo.O)(void 0),Aa(),(0,te.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,te.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_e.D)(this.ref.get(e)).pipe(ke.iC)}}class zD{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?sg(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),(0,Qe.h)(t=>t.length>0),ke.iC):sg(this.query,this.afs.schedulers.outsideAngular).pipe(ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,hs.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=og(e);return qy(this.query,t,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return ig(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),ke.iC)}get(e){return(0,_e.D)(this.query.get(e)).pipe(ke.iC)}}const gE=new p.OlP("angularfire2.enableFirestorePersistence"),mE=new p.OlP("angularfire2.firestore.persistenceSettings"),WI=new p.OlP("angularfire2.firestore.settings"),yE=new p.OlP("angularfire2.firestore.use-emulator");function Ky(n,e=(t=>t)){return{query:e(n),ref:n}}let vE=(()=>{class n{constructor(t,i,a,l,f,w,M,F,W,ne,Ee,Ye,tt,wt,Vt,Qn,xr){this.schedulers=M;const Bn=(0,j.on)(t,w,i),An=W;ne&&eu(Bn,w,Ee,tt,wt,Vt,Ye,Qn),[this.firestore,this.persistenceEnabled$]=(0,j.cc)(`${Bn.name}.firestore`,"AngularFirestore",Bn.name,()=>{const In=w.runOutsideAngular(()=>Bn.firestore());if(l&&In.settings(l),An&&In.useEmulator(...An),a&&!(0,Ue.PM)(f)){const On=()=>{try{return(0,_e.D)(In.enablePersistence(F||void 0).then(()=>!0,()=>!1))}catch(Cs){return typeof console<"u"&&console.warn(Cs),(0,ue.of)(!1)}};return[In,w.runOutsideAngular(On)]}return[In,(0,ue.of)(!1)]},[l,An,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:f}=Ky(a,i),w=this.schedulers.ngZone.run(()=>l);return new zI(w,f,this)}collectionGroup(t,i){const a=i||(f=>f),l=this.firestore.collectionGroup(t);return new zD(a(l),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new pE(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(j.Dh),p.LFG(j.xv,8),p.LFG(gE,8),p.LFG(WI,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ke.HU),p.LFG(mE,8),p.LFG(yE,8),p.LFG(ls,8),p.LFG(Xa,8),p.LFG(Tu,8),p.LFG(Pi,8),p.LFG(Sa,8),p.LFG(Zi,8),p.LFG(Ki,8),p.LFG(yo,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_E=(()=>{class n{constructor(){vo.Z.registerVersion("angularfire",ke.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gE,useValue:!0},{provide:mE,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[vE]}),n})();var EE=V(4742),qI=V(8421),ZI=V(3269),wE=V(3268),KI=V(1810);let Yy=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Uc=(()=>{class n extends Yy{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Ya=new p.OlP("NgValueAccessor"),WD={provide:Ya,useExisting:(0,p.Gpc)(()=>ag),multi:!0},qD=new p.OlP("CompositionEventMode");let ag=(()=>{class n extends Yy{constructor(t,i,a){super(t,i),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bE(){const n=(0,Ue.q)()?(0,Ue.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(qD,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&p.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[p._Bn([WD]),p.qOj]}),n})();const fo=new p.OlP("NgValidators"),Vl=new p.OlP("NgAsyncValidators");function nv(n){return null!=n}function eD(n){return(0,p.QGY)(n)?(0,_e.D)(n):n}function tD(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function CE(n,e){return e.map(t=>t(n))}function If(n){return n.map(e=>function nD(n){return!n.validate}(e)?e:t=>e.validate(t))}function SE(n){return null!=n?function TE(n){if(!n)return null;const e=n.filter(nv);return 0==e.length?null:function(t){return tD(CE(t,e))}}(If(n)):null}function AE(n){return null!=n?function rD(n){if(!n)return null;const e=n.filter(nv);return 0==e.length?null:function(t){return function IE(...n){const e=(0,ZI.jO)(n),{args:t,keys:i}=(0,EE.D)(n),a=new fe.y(l=>{const{length:f}=t;if(!f)return void l.complete();const w=new Array(f);let M=f,F=f;for(let W=0;W<f;W++){let ne=!1;(0,qI.Xf)(t[W]).subscribe((0,ds.x)(l,Ee=>{ne||(ne=!0,F--),w[W]=Ee},()=>M--,void 0,()=>{(!M||!ne)&&(F||l.next(i?(0,KI.n)(i,w):w),l.complete())}))}});return e?a.pipe((0,wE.Z)(e)):a}(CE(t,e).map(eD)).pipe((0,te.U)(tD))}}(If(n)):null}function xE(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ME(n){return n._rawValidators}function RE(n){return n._rawAsyncValidators}function OE(n){return n?Array.isArray(n)?n:[n]:[]}function lg(n,e){return Array.isArray(n)?n.includes(e):n===e}function rv(n,e){const t=OE(e);return OE(n).forEach(a=>{lg(t,a)||t.push(a)}),t}function iv(n,e){return OE(e).filter(t=>!lg(n,t))}class iD{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vr extends iD{get formDirective(){return null}get path(){return null}}class Bc extends iD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class dg{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let jo=(()=>{class n extends dg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Bc,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[p.qOj]}),n})(),Df=(()=>{class n extends dg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Vr,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[p.qOj]}),n})();const fg="VALID",pg="INVALID",Zd="PENDING",Tf="DISABLED";function uv(n){return(gg(n)?n.validators:n)||null}function FE(n,e){return(gg(e)?e.asyncValidators:n)||null}function gg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function cv(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new p.vHH(1e3,"");if(!i[t])throw new p.vHH(1001,"")}function lD(n,e,t){n._forEachChild((i,a)=>{if(void 0===t[a])throw new p.vHH(1002,"")})}class Kd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===fg}get invalid(){return this.status===pg}get pending(){return this.status==Zd}get disabled(){return this.status===Tf}get enabled(){return this.status!==Tf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iv(e,this._rawAsyncValidators))}hasValidator(e){return lg(this._rawValidators,e)}hasAsyncValidator(e){return lg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tf,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fg,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fg||this.status===Zd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tf:fg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zd,this._hasOwnPendingAsyncValidator=!0;const t=eD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,a)=>i&&i._find(a),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Tf:this.errors?pg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zd)?Zd:this._anyControlsHaveStatus(pg)?pg:fg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function kE(n){return Array.isArray(n)?SE(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function LE(n){return Array.isArray(n)?AE(n):n||null}(this._rawAsyncValidators)}}class Yd extends Kd{constructor(e,t,i){super(uv(t),FE(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lD(this,0,e),Object.keys(e).forEach(i=>{cv(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const a=this.controls[i];a&&a.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,a)=>{i.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,a)=>((i.enabled||this.disabled)&&(t[a]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((a,l)=>{i=t(i,a,l)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class lv extends Yd{}const jc=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Qd}),Qd="always";function Af(n,e,t=Qd){VE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function pD(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&UE(n,e)})}(n,e),function tb(n,e){const t=(i,a)=>{e.valueAccessor.writeValue(i),a&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function gD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&UE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function eb(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function mg(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),xf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function VE(n,e){const t=ME(n);null!==e.validator?n.setValidators(xE(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=RE(n);null!==e.asyncValidator?n.setAsyncValidators(xE(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const a=()=>n.updateValueAndValidity();dv(e._rawValidators,a),dv(e._rawAsyncValidators,a)}function xf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const a=ME(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(f=>f!==e.validator);l.length!==a.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const a=RE(n);if(Array.isArray(a)&&a.length>0){const l=a.filter(f=>f!==e.asyncValidator);l.length!==a.length&&(t=!0,n.setAsyncValidators(l))}}}const i=()=>{};return dv(e._rawValidators,i),dv(e._rawAsyncValidators,i),t}function UE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Rf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function vD(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const vg=class extends Kd{constructor(e=null,t,i){super(uv(t),FE(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vD(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Rf(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Rf(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Jd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ZE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const _v=new p.OlP("NgModelWithFormControlWarning"),db={provide:Vr,useExisting:(0,p.Gpc)(()=>_g)};let _g=(()=>{class n extends Vr{constructor(t,i,a){super(),this.callSetDisabledState=a,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Af(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){mg(t.control||null,t,!1),function gv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function $c(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,a=this.form.get(t.path);i!==a&&(mg(i||null,t),(n=>n instanceof vg)(a)&&(Af(a,t,this.callSetDisabledState),t.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function mD(n,e){VE(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function nb(n,e){return xf(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){VE(this.form,this),this._oldForm&&xf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(fo,10),p.Y36(Vl,10),p.Y36(jc,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&p.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([db]),p.qOj,p.TTD]}),n})();const fb={provide:Bc,useExisting:(0,p.Gpc)(()=>Ev)};let Ev=(()=>{class n extends Bc{set isDisabled(t){}constructor(t,i,a,l,f){super(),this._ngModelWarningConfig=f,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(a),this.valueAccessor=function yg(n,e){if(!e)return null;let t,i,a;return Array.isArray(e),e.forEach(l=>{l.constructor===ag?t=l:function BE(n){return Object.getPrototypeOf(n.constructor)===Uc}(l)?i=l:a=l}),a||i||t||null}(0,l)}ngOnChanges(t){this._added||this._setUpControl(),function pv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Sf(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(Vr,13),p.Y36(fo,10),p.Y36(Vl,10),p.Y36(Ya,10),p.Y36(_v,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([fb]),p.qOj,p.TTD]}),n})();const pb={provide:Ya,useExisting:(0,p.Gpc)(()=>s),multi:!0};function TD(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let s=(()=>{class n extends Uc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const a=TD(this._getOptionId(t),t);this.setProperty("value",a)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function r(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&p.NdJ("change",function(l){return i.onChange(l.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([pb]),p.qOj]}),n})(),o=(()=>{class n{constructor(t,i,a){this._element=t,this._renderer=i,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(TD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(s,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const u={provide:Ya,useExisting:(0,p.Gpc)(()=>D),multi:!0};function c(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let D=(()=>{class n extends Uc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const a=t.map(l=>this._getOptionId(l));i=(l,f)=>{l._setSelected(a.indexOf(f.toString())>-1)}}else i=(a,l)=>{a._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const a=[],l=i.selectedOptions;if(void 0!==l){const f=l;for(let w=0;w<f.length;w++){const F=this._getOptionValue(f[w].value);a.push(F)}}else{const f=i.options;for(let w=0;w<f.length;w++){const M=f[w];if(M.selected){const F=this._getOptionValue(M.value);a.push(F)}}}this.value=a,t(a)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function h(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&p.NdJ("change",function(l){return i.onChange(l.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([u]),p.qOj]}),n})(),S=(()=>{class n{constructor(t,i,a){this._element=t,this._renderer=i,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(c(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(c(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(D,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Tb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[ZE]}),n})();class yb extends Kd{constructor(e,t,i){super(uv(t),FE(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let a=this._adjustIndex(e);a<0&&(a=0),this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),t&&(this.controls.splice(a,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lD(this,0,e),e.forEach((i,a)=>{cv(this,!1,a),this.at(a).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,a)=>{this.at(a)&&this.at(a).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,a)=>{i.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function vb(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let _b=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const a=this._reduceControls(t);let l={};return vb(i)?l=i:null!==i&&(l.validators=i.validator,l.asyncValidators=i.asyncValidator),new Yd(a,l)}record(t,i=null){const a=this._reduceControls(t);return new lv(a,i)}control(t,i,a){let l={};return this.useNonNullable?(vb(i)?l=i:(l.validators=i,l.asyncValidators=a),new vg(t,{...l,nonNullable:!0})):new vg(t,i,a)}array(t,i,a){const l=t.map(f=>this._createControl(f));return new yb(l,i,a)}_reduceControls(t){const i={};return Object.keys(t).forEach(a=>{i[a]=this._createControl(t[a])}),i}_createControl(t){return t instanceof vg||t instanceof Kd?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sb=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_v,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:jc,useValue:t.callSetDisabledState??Qd}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Tb]}),n})();var xb=V(8395),po=V(2435),Mb=V(2722),Rb=V(1135);class Qa{constructor(e,t,i,a){this.afs=e,this.afAuth=t,this.router=i,this.ngZone=a,this.loggedIn$=new Rb.X(!1),this.afAuth.authState.subscribe(l=>{l?(this.userData=l,console.log(this.userData),this.loggedIn$.next(!0),localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(this.loggedIn$.next(!1),localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&(this.loggedIn$.next(!0),this.router.navigate(["dashboard"]))})}).catch(i=>{window.alert(i.message)})}SignUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.loggedIn$.next(!0),this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}GoogleAuth(){return this.AuthLogin(new Mb.Q).then(e=>{this.loggedIn$.next(!0),this.router.navigate(["/dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.loggedIn$.next(!0),this.router.navigate(["/dashboard"]),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.loggedIn$.next(!0),this.router.navigate(["sign-in"])})}}Qa.\u0275fac=function(e){return new(e||Qa)(p.LFG(vE),p.LFG(ls),p.LFG(po.F0),p.LFG(p.R0b))},Qa.\u0275prov=p.Yz7({token:Qa,factory:Qa.\u0275fac,providedIn:"root"});class wv{constructor(e,t,i){this.templateRef=e,this.auth=t,this.viewContainer=i}ngOnInit(){this.auth.loggedIn$.subscribe(e=>{e===this.isLogged?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}}wv.\u0275fac=function(e){return new(e||wv)(p.Y36(p.Rgc),p.Y36(Qa),p.Y36(p.s_b))},wv.\u0275dir=p.lG2({type:wv,selectors:[["","isLogged",""]],inputs:{isLogged:"isLogged"}});const Ob=function(){return{exact:!0}};function Nb(n,e){if(1&n&&(p.TgZ(0,"li")(1,"a",12),p._uU(2),p.qZA()()),2&n){const t=e.$implicit;p.xp6(1),p.Q6J("routerLink",t.path)("routerLinkActiveOptions",p.DdM(3,Ob)),p.xp6(1),p.hij(" ",t.name," ")}}function Pb(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"li")(1,"button",13),p.NdJ("click",function(){p.CHM(t);const a=p.oxw();return p.KtG(a.logout())}),p._uU(2," Log out "),p.qZA()()}}class Iv{constructor(e){this.auth=e,this.routes=[{name:"Dashboard",path:"dashboard"}]}logout(){this.auth.SignOut(),localStorage.removeItem("login_token"),window.location.href="/"}}Iv.\u0275fac=function(e){return new(e||Iv)(p.Y36(Qa))},Iv.\u0275cmp=p.Xpm({type:Iv,selectors:[["app-navbar"]],decls:13,vars:2,consts:[[1,"border-gray-200","px-2","sm:px-4","py-2.5","bg-primary"],[1,"container","flex","flex-wrap","items-center","justify-between","mx-auto"],["routerLink","/",1,"flex","items-center"],["src","/assets/images/logo.png","alt","EXA Logo",1,"h-28","sm:h-9"],["data-collapse-toggle","navbar-default","type","button","aria-controls","navbar-default","aria-expanded","false",1,"inline-flex","items-center","p-2","ml-3","text-sm","text-gray-500","rounded-lg","md:hidden","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-gray-200","dark:text-gray-400","dark:hover:bg-gray-700","dark:focus:ring-gray-600"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["fill-rule","evenodd","d","M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule","evenodd"],["id","navbar-default",1,"hidden","w-full","md:block","md:w-auto"],[1,"flex","flex-col","p-4","mt-4","border","border-gray-100","rounded-lg","bg-gray-50","md:flex-row","md:space-x-8","md:mt-0","md:text-sm","md:font-medium","md:border-0","md:bg-white","dark:bg-gray-800","md:dark:bg-gray-900","dark:border-gray-700"],[4,"ngFor","ngForOf"],[4,"isLogged"],["routerLinkActive","active",1,"block","py-2","pl-3","pr-4","text-gray-700","rounded","hover:bg-gray-100","md:hover:bg-transparent","md:border-0","md:hover:text-blue-700","md:p-0","dark:text-gray-400","md:dark:hover:text-white","dark:hover:bg-gray-700","dark:hover:text-white","md:dark:hover:bg-transparent",3,"routerLink","routerLinkActiveOptions"],[1,"block","py-2","pl-3","pr-4","text-gray-700","rounded","hover:bg-gray-100","md:hover:bg-transparent","md:border-0","md:hover:text-blue-700","md:p-0","dark:text-gray-400","md:dark:hover:text-white","dark:hover:bg-gray-700","dark:hover:text-white","md:dark:hover:bg-transparent",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),p._UZ(3,"img",3),p.qZA(),p.TgZ(4,"button",4)(5,"span",5),p._uU(6,"Open main menu"),p.qZA(),p.O4$(),p.TgZ(7,"svg",6),p._UZ(8,"path",7),p.qZA()(),p.kcU(),p.TgZ(9,"div",8)(10,"ul",9),p.YNc(11,Nb,3,4,"li",10),p.YNc(12,Pb,3,0,"li",11),p.qZA()()()()),2&e&&(p.xp6(11),p.Q6J("ngForOf",t.routes),p.xp6(1),p.Q6J("isLogged",!0))},dependencies:[Ue.sg,po.rH,po.Od,wv],styles:[".active[_ngcontent-%COMP%]{font-weight:700;color:#fff}"]});class Dv{}Dv.\u0275fac=function(e){return new(e||Dv)},Dv.\u0275cmp=p.Xpm({type:Dv,selectors:[["app-main"]],ngContentSelectors:["*"],decls:2,vars:0,template:function(e,t){1&e&&(p.F$t(),p._UZ(0,"app-navbar"),p.Hsn(1))},dependencies:[Iv]});class bv{constructor(){this.title="exam"}}function Fb(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"form",5)(1,"div",6)(2,"label",7),p._uU(3,"E-mail"),p.qZA(),p._UZ(4,"input",8),p.qZA(),p.TgZ(5,"div",9)(6,"button",10),p.NdJ("click",function(){p.CHM(t);const a=p.oxw();return p.KtG(a.forgetPass())}),p._uU(7," Recuperar palavra-passe "),p.qZA()()()}}function Lb(n,e){1&n&&(p.TgZ(0,"form",5)(1,"div",6)(2,"label",11),p._uU(3,"Nova palavra-passe"),p.qZA(),p._UZ(4,"input",12),p.qZA(),p.TgZ(5,"div",6)(6,"label",11),p._uU(7," Repete a tua nova palavra-passe "),p.qZA(),p._UZ(8,"input",13),p.qZA(),p.TgZ(9,"div",9)(10,"button",14),p._uU(11," Guardar "),p.qZA()()())}bv.\u0275fac=function(e){return new(e||bv)},bv.\u0275cmp=p.Xpm({type:bv,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(p.TgZ(0,"app-main"),p._UZ(1,"router-outlet"),p.qZA())},dependencies:[po.lC,Dv]});class Cv{constructor(){this.step=1}forgetPass(){this.step=2}}Cv.\u0275fac=function(e){return new(e||Cv)},Cv.\u0275cmp=p.Xpm({type:Cv,selectors:[["app-forget-pass"]],decls:7,vars:2,consts:[[1,"py-20","container"],["src","/assets/images/aww.png",1,"h-48","mx-auto","-mb-2"],[1,"max-w-2xl","bg-[#F2F2F2]","shadow-2xl","py-6","mx-auto"],["src","/assets/images/tlogo.png",1,"h-20","mx-auto","mb-6"],["class","max-w-[80%] mx-auto mb-20",4,"ngIf"],[1,"max-w-[80%]","mx-auto","mb-20"],[1,"flex","flex-col","mb-6"],["for","email",1,"font-bold","text-lg"],["type","email","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","justify-center"],["type","button",1,"button","text-xl",3,"click"],["for","password",1,"font-bold","text-lg"],["type","password","placeholder","Nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","password","placeholder","Repete a tua nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","button","routerLink","/dashboard",1,"button","text-xl"]],template:function(e,t){1&e&&(p.TgZ(0,"section")(1,"div",0),p._UZ(2,"img",1),p.TgZ(3,"div",2),p._UZ(4,"img",3),p.YNc(5,Fb,8,0,"form",4),p.YNc(6,Lb,12,0,"form",4),p.qZA()()()),2&e&&(p.xp6(5),p.Q6J("ngIf",1===t.step),p.xp6(1),p.Q6J("ngIf",2===t.step))},dependencies:[Ue.O5,Jd,Df,po.rH]});class Tv{constructor(e,t,i){this.router=e,this.auth=t,this.fb=i,this.form=this.fb.group({username:[""],password:[""]})}login(){const{username:e,password:t}=this.form.value;this.auth.SignIn(e,t)}}Tv.\u0275fac=function(e){return new(e||Tv)(p.Y36(po.F0),p.Y36(Qa),p.Y36(_b))},Tv.\u0275cmp=p.Xpm({type:Tv,selectors:[["app-login"]],decls:25,vars:2,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg","pt-3"],["type","email","formControlName","username","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],[1,"mb-6","flex","flex-col"],["for","password",1,"font-bold","text-lg"],["type","password","formControlName","password","placeholder","Password",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","items-center","justify-between","mb-10"],[1,"button","text-xl",3,"disabled","click"],["routerLink","/register",1,"mb-4"],[1,"underline","text-blue-500"],["routerLink","/forget-password"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),p._uU(3,"My personal data"),p.qZA(),p.TgZ(4,"form",3)(5,"div",4)(6,"label",5),p._uU(7,"E-mail"),p.qZA(),p._UZ(8,"input",6),p.qZA(),p.TgZ(9,"div",7)(10,"label",8),p._uU(11,"Password"),p.qZA(),p._UZ(12,"input",9),p.qZA(),p.TgZ(13,"div",10)(14,"button",11),p.NdJ("click",function(){return t.login()}),p._uU(15," Keep "),p.qZA()()(),p.TgZ(16,"a",12)(17,"p",13),p._uU(18,"Ainda n\xe3o tens conta? Cria agora"),p.qZA()(),p.TgZ(19,"a",14)(20,"p",13),p._uU(21,"Esqueci-me da palavra-passe"),p.qZA()()(),p._UZ(22,"div"),p.qZA(),p.TgZ(23,"div",15),p._UZ(24,"img",16),p.qZA()),2&e&&(p.xp6(4),p.Q6J("formGroup",t.form),p.xp6(10),p.Q6J("disabled",!t.form.valid))},dependencies:[Jd,ag,jo,Df,_g,Ev,po.rH]});class Sv{constructor(e,t,i){this.router=e,this.auth=t,this.fb=i,this.form=this.fb.group({username:[""],password:[""]})}login(){const{username:e,password:t}=this.form.value;this.auth.SignUp(e,t)}}Sv.\u0275fac=function(e){return new(e||Sv)(p.Y36(po.F0),p.Y36(Qa),p.Y36(_b))},Sv.\u0275cmp=p.Xpm({type:Sv,selectors:[["app-register"]],decls:31,vars:1,consts:[[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full","flex","flex-col","mb-6",3,"formGroup"],[1,"flex","flex-col","mb-3"],["for","email",1,"font-bold","text-lg"],["type","text","placeholder","Enter Your Name",1,"border","border-[#4472c4]","p-2","w-full"],["type","email","formControlName","username","placeholder","Enter Your E-mail",1,"border","border-[#4472c4]","p-2","w-full"],["for","password",1,"font-bold","text-lg"],["type","password","formControlName","password","placeholder","Nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],["type","password","placeholder","Repete a tua nova palavra-passe",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","mb-10"],[1,"bg-[#70ad47]","py-2","px-8","text-white","text-xl","font-semibold","rounded-lg",3,"click"],["routerLink","/login"],[1,"underline","text-blue-500"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(p.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1",2),p._uU(4,"My personal data"),p.qZA(),p.TgZ(5,"form",3)(6,"div",4)(7,"label",5),p._uU(8,"Name"),p.qZA(),p._UZ(9,"input",6),p.qZA(),p.TgZ(10,"div",4)(11,"label",5),p._uU(12,"E-mail"),p.qZA(),p._UZ(13,"input",7),p.qZA(),p.TgZ(14,"div",4)(15,"label",8),p._uU(16,"Nova palavra-passe"),p.qZA(),p._UZ(17,"input",9),p.qZA(),p.TgZ(18,"div",4)(19,"label",8),p._uU(20," Repete a tua nova palavra-passe "),p.qZA(),p._UZ(21,"input",10),p.qZA()(),p.TgZ(22,"div",11)(23,"button",12),p.NdJ("click",function(){return t.login()}),p._uU(24," Continue "),p.qZA()(),p.TgZ(25,"a",13)(26,"p",14),p._uU(27,"Already have an account? Log in"),p.qZA()()(),p._UZ(28,"div"),p.qZA(),p.TgZ(29,"div",15),p._UZ(30,"img",16),p.qZA()()),2&e&&(p.xp6(5),p.Q6J("formGroup",t.form))},dependencies:[Jd,ag,jo,Df,_g,Ev,po.rH]});class Eg{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0===this.authService.isLoggedIn&&this.router.navigate(["/dashboard"]),!0}}Eg.\u0275fac=function(e){return new(e||Eg)(p.LFG(Qa),p.LFG(po.F0))},Eg.\u0275prov=p.Yz7({token:Eg,factory:Eg.\u0275fac,providedIn:"root"});const Vb=function(n){return{"box-active":n}};function Ub(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",9),p.NdJ("click",function(){const l=p.CHM(t).index,f=p.oxw(2);return p.KtG(f.selectCard(l))}),p._UZ(1,"img",10),p.TgZ(2,"strong"),p._uU(3),p.qZA()()}if(2&n){const t=e.$implicit;p.Q6J("ngClass",p.VKq(3,Vb,t.selected)),p.xp6(1),p.Q6J("src",t.icon,p.LSH),p.xp6(2),p.hij(" ",t.name," ")}}const Bb=function(){return{isExisting:!0}};function jb(n,e){if(1&n&&(p.TgZ(0,"section")(1,"div",1)(2,"div",2)(3,"h1",3),p._uU(4,"Bem-vindo ao EXA, (User name)"),p.qZA(),p.TgZ(5,"p",4),p._uU(6,"ESCOLHE A(S) TUA(S) DISCIPLINAS"),p.qZA()(),p.TgZ(7,"div",5),p.YNc(8,Ub,4,5,"div",6),p.qZA(),p.TgZ(9,"div",7)(10,"button",8),p._uU(11," Come\xe7ar "),p.qZA()()()()),2&n){const t=p.oxw();p.xp6(8),p.Q6J("ngForOf",t.cards),p.xp6(2),p.Q6J("queryParams",p.DdM(2,Bb))}}function $b(n,e){if(1&n&&(p.TgZ(0,"option",28),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.Q6J("value",t.name),p.xp6(1),p.hij(" ",t.name," ")}}function Hb(n,e){if(1&n&&(p.TgZ(0,"section")(1,"div",11)(2,"div",12)(3,"h1",13),p._uU(4,"Ol\xe1, (User name)"),p.qZA(),p.TgZ(5,"h4",14),p._uU(6,"Que exames queres praticar hoje?"),p.qZA(),p.TgZ(7,"select",15),p.YNc(8,$b,2,2,"option",16),p.qZA()()(),p.TgZ(9,"div",17)(10,"div",18)(11,"div",19)(12,"h2",20),p._uU(13,"O meu perfil"),p.qZA(),p._UZ(14,"img",21),p.TgZ(15,"button",22),p._uU(16," Alterar dados "),p.qZA()(),p.TgZ(17,"div",19)(18,"h2",23),p._uU(19," Praticar escolhas m\xfaltiplas "),p.qZA(),p._UZ(20,"img",24),p.TgZ(21,"button",25),p._uU(22," Come\xe7ar "),p.qZA()(),p.TgZ(23,"div",19)(24,"h2",26),p._uU(25," Fazer "),p._UZ(26,"br"),p._uU(27," um exame "),p.qZA(),p._UZ(28,"img",24),p.TgZ(29,"button",27),p._uU(30," Escolher exame "),p.qZA()()()()()),2&n){const t=p.oxw();p.xp6(8),p.Q6J("ngForOf",t.cards)}}class Av{constructor(e,t){this.route=e,this.auth=t,this.isExisting=!0,this.cards=[{name:"Portugu\xeas",icon:"/assets/images/subjects/1.png",selected:!1},{name:"Matem\xe1tica A",icon:"/assets/images/subjects/2.png",selected:!1},{name:"Hist\xf3ria",icon:"/assets/images/subjects/3.png",selected:!1},{name:"Biologia e Geologia",icon:"/assets/images/subjects/4.png",selected:!1},{name:"Geografia",icon:"/assets/images/subjects/5.png",selected:!1},{name:"Filosofia",icon:"/assets/images/subjects/6.png",selected:!1},{name:"Economia A",icon:"/assets/images/subjects/7.png",selected:!1},{name:"F\xedsica e Qu\xedmica A",icon:"/assets/images/subjects/8.png",selected:!1}]}ngOnInit(){this.route.queryParams.subscribe(e=>{this.isExisting="true"===e.isExisting})}selectCard(e){this.cards[e].selected=!this.cards[e].selected}}function Gb(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",8)(1,"div",9),p.NdJ("click",function(){const l=p.CHM(t).index,f=p.oxw(2);return p.KtG(f.selectPackage(l))}),p.TgZ(2,"span"),p._uU(3," \u2713 "),p.qZA()(),p.TgZ(4,"div",10)(5,"h3",11),p._uU(6),p.qZA(),p.TgZ(7,"p",12),p._uU(8),p.qZA(),p.TgZ(9,"p",13)(10,"del"),p._uU(11),p.qZA()(),p.TgZ(12,"div",14)(13,"button",15),p.NdJ("click",function(){const l=p.CHM(t).index,f=p.oxw(2);return p.KtG(f.selectPackage(l))}),p._uU(14),p.qZA()()()()}if(2&n){const t=e.$implicit;p.xp6(2),p.Gre("font-bold text-4xl group-hover:block ",t.selected?"!block":"hidden",""),p.Udp("color",t.color),p.xp6(3),p.Udp("color",t.color),p.xp6(1),p.hij(" ",t.name," "),p.xp6(2),p.hij(" ",t.desc," "),p.xp6(1),p.Udp("color",t.color),p.xp6(2),p.hij(" ",t.originalPrice," "),p.xp6(2),p.Udp("background-color",t.color),p.xp6(1),p.hij(" ",t.price," ")}}Av.\u0275fac=function(e){return new(e||Av)(p.Y36(po.gz),p.Y36(Qa))},Av.\u0275cmp=p.Xpm({type:Av,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container"],[1,"text-center","py-10"],[1,"text-4xl","font-bold","mb-2"],[1,"text-[#6A99D0]","font-medium"],[1,"grid","grid-cols-4","gap-6","mb-10","max-w-2xl","mx-auto"],["class","p-6 bg-[#F2F2F2] text-center border-[2px] cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-center"],["routerLink","/dashboard",1,"button",3,"queryParams"],[1,"p-6","bg-[#F2F2F2]","text-center","border-[2px]","cursor-pointer",3,"ngClass","click"],[1,"mx-auto","max-h-12","mb-4",3,"src"],[1,"bg-[#deebf7]","h-52"],[1,"container","flex","flex-col","items-center","py-10"],[1,"text-5xl","font-bold","mb-2"],[1,"text-lg","font-bold","mb-4"],[1,"py-2","px-6","shadow-md"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-white","pt-9","container"],[1,"flex","items-stretch","justify-center","gap-10"],[1,"d-card"],[1,"text-2xl","font-bold","pb-4"],["src","/assets/images/hi-img.png","alt","hi-img"],[1,"bg-[#00216e]","text-white","font-semibold","py-4","px-8","rounded-2xl"],[1,"text-2xl","font-bold","pb-4","text-[#4472c4]"],["src","/assets/images/pc-1.png","alt","pc-1",1,"pb-4","pl-5"],[1,"bg-[#4472c4]","text-white","font-semibold","py-4","px-12","rounded-2xl"],[1,"text-2xl","font-bold","pb-4","text-[#70ad47]"],["routerLink","/exam/choose",1,"bg-[#70ad47]","text-white","font-semibold","py-4","px-8","rounded-2xl"],[3,"value"]],template:function(e,t){1&e&&(p.YNc(0,jb,12,3,"section",0),p.YNc(1,Hb,31,1,"section",0)),2&e&&(p.Q6J("ngIf",!t.isExisting),p.xp6(1),p.Q6J("ngIf",t.isExisting))},dependencies:[Ue.mk,Ue.sg,Ue.O5,o,S,po.rH],styles:[".d-card[_ngcontent-%COMP%]{flex:1 1 0%;--tw-bg-opacity: 1;background-color:rgb(242 242 242 / var(--tw-bg-opacity));padding:1.5rem 5rem;--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);display:flex;flex-direction:column;justify-content:space-between;align-items:center;gap:1rem}.d-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;object-fit:contain}.d-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.box-active[_ngcontent-%COMP%]{border:2px solid #4f71be}"]});const zb=function(){return{step:2}};function Wb(n,e){if(1&n&&(p.TgZ(0,"section")(1,"div",1)(2,"h1",2),p._uU(3,"Pick your plan"),p.qZA(),p.TgZ(4,"div",3),p.YNc(5,Gb,15,15,"div",4),p.qZA(),p.TgZ(6,"p",5),p._uU(7," * Oferta limitada aos primeiros 1,000 alunos a efetuar registo no EXA "),p.qZA(),p.TgZ(8,"div",6)(9,"button",7),p._uU(10," Continue "),p.qZA()()()()),2&n){const t=p.oxw();p.xp6(5),p.Q6J("ngForOf",t.packages),p.xp6(4),p.Q6J("queryParams",p.DdM(2,zb))}}function qb(n,e){1&n&&(p.TgZ(0,"section")(1,"div",16)(2,"div",17)(3,"h1",18),p._uU(4,"Pagamento"),p.qZA(),p.TgZ(5,"form",19)(6,"div",20)(7,"label",21),p._uU(8,"Plano selecionado "),p.qZA(),p._UZ(9,"input",22),p.qZA(),p.TgZ(10,"div",20)(11,"label",23),p._uU(12,"N\xfamero do cart\xe3o "),p.qZA(),p._UZ(13,"input",24),p.qZA(),p.TgZ(14,"div",25)(15,"div",26)(16,"label",27),p._uU(17,"Data de validade"),p.qZA(),p._UZ(18,"input",28),p.qZA(),p.TgZ(19,"div",26)(20,"label",29),p._uU(21,"CSV"),p.qZA(),p._UZ(22,"input",30),p.qZA()(),p.TgZ(23,"div",31)(24,"label",23),p._uU(25,"Nome no cart\xe3o"),p.qZA(),p._UZ(26,"input",32),p.qZA()(),p.TgZ(27,"div",33)(28,"button",34),p._uU(29," Efetuar pagamento e alterar subscri\xe7\xe3o "),p.qZA()(),p.TgZ(30,"p",35),p._uU(31," * Oferta limitada aos primeiros 1,000 alunos a efetuar registo no EXA "),p.qZA()(),p._UZ(32,"div"),p.qZA(),p.TgZ(33,"div",36),p._UZ(34,"img",37),p.qZA()())}class xv{constructor(e){this.route=e,this.step=1,this.packages=[{name:"B\xe1sico",desc:"1 Disciplina | 10 Exames | 1 M\xeas",originalPrice:"7,99\u20ac/m\xeas",price:"4,99\u20ac/m\xeas*",color:"#00216e",selected:!0},{name:"Premium",desc:"2 Disciplinas | 20 Exames | 1 Meses",originalPrice:"19,99\u20ac/m\xeas",price:"14,99\u20ac/m\xeas*",color:"#a6a6a6",selected:!1},{name:"Oferta limitada",desc:"Todas as Disciplinas | Todos os exames | 1 M\xeas",originalPrice:"29,99\u20ac/m\xeas",price:"24,99\u20ac/m\xeas*",color:"#70ad47",selected:!1}]}ngOnInit(){this.route.queryParams.subscribe(e=>{console.log(e),this.step=e.step?+e.step:1})}selectPackage(e){this.packages.forEach((t,i)=>{this.packages[i].selected=i===e})}}xv.\u0275fac=function(e){return new(e||xv)(p.Y36(po.gz))},xv.\u0275cmp=p.Xpm({type:xv,selectors:[["app-payment"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container","max-w-5xl","py-10"],[1,"text-4xl","font-bold","text-center","mb-20"],[1,"flex","justify-center","gap-3","mb-12"],["class","flex-1 relative group",4,"ngFor","ngForOf"],[1,"text-sm","text-center","mb-20"],[1,"flex","items-center","justify-center","mb-10"],["routerLink","/payment",1,"bg-[#70ad47]","py-2","px-8","text-white","text-xl","font-semibold","rounded-lg",3,"queryParams"],[1,"flex-1","relative","group"],[1,"cursor-pointer","flex","items-center","justify-center","w-[50px]","h-[50px]","border-2","border-blue-700","shadow-2xl","bg-white","absolute","right-1/2","top-0","z-10","translate-x-1/2","-translate-y-[90%]",3,"click"],[1,"text-center","shadow-lg","border-2","pt-8","px-6","rounded-[70px]","relative","flex","flex-col","bg-white"],[1,"text-2xl","font-bold"],[1,"mb-4","text-sm","min-h-[40px]"],[1,"font-bold","mb-4"],[1,"flex","justify-center"],[1,"text-lg","py-2","px-6","font-bold","text-white","rounded-full","-mb-6","w-2/3",3,"click"],[1,"container","flex","justify-between","py-10"],[1,"flex","flex-col","max-w-lg","w-full"],[1,"text-4xl","font-bold","mb-8"],[1,"w-full","flex","flex-col","mb-10"],[1,"mb-3","flex","flex-col"],["for","email",1,"font-bold","text-lg"],["type","email","placeholder","Premium (14,99\u20ac/m\xeas*) 2 disciplinas | 20 exames",1,"border","border-[#4472c4]","p-2"],["for","password",1,"font-bold","text-lg"],["type","text","placeholder","Data de subscri\xe7\xe3o",1,"border","border-[#4472c4]","p-2"],[1,"flex","gap-4","mb-3"],[1,"flex","flex-col","flex-1"],["for","date",1,"font-bold","text-lg"],["type","date",1,"border","border-[#4472c4]","p-2","w-full"],["for","text",1,"font-bold","text-lg"],["type","text",1,"border","border-[#4472c4]","p-2","w-full"],[1,"flex","flex-col"],["type","text","placeholder","Data de subscri\xe7\xe3o  + 1 mes",1,"border","border-[#4472c4]","p-2"],[1,"flex","mb-10"],["routerLink","/home",1,"bg-[#70ad47]","py-2","px-8","text-white","text-xl","font-semibold","rounded-lg"],[1,"text-sm","text-center"],[1,"fixed","right-0","top-[4.5rem]"],["src","/assets/images/login-img.png","alt","hi",1,"h-[100vh]","object-cover","w-[50vw]"]],template:function(e,t){1&e&&(p.YNc(0,Wb,11,3,"section",0),p.YNc(1,qb,35,0,"section",0)),2&e&&(p.Q6J("ngIf",1===t.step),p.xp6(1),p.Q6J("ngIf",2===t.step))},dependencies:[Ue.sg,Ue.O5,Jd,Df,po.rH]});class wg{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["/login"]),!0}}wg.\u0275fac=function(e){return new(e||wg)(p.LFG(Qa),p.LFG(po.F0))},wg.\u0275prov=p.Yz7({token:wg,factory:wg.\u0275fac,providedIn:"root"});const Zb=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",canActivate:[Eg],component:Tv},{path:"forget-password",component:Cv},{path:"register",component:Sv},{path:"",canActivate:[wg],children:[{path:"home",redirectTo:"dashboard"},{path:"payment",component:xv},{path:"dashboard",component:Av},{path:"exam",loadChildren:()=>V.e(192).then(V.bind(V,3192)).then(n=>n.ExamModule)}]}];class Ig{}Ig.\u0275fac=function(e){return new(e||Ig)},Ig.\u0275mod=p.oAB({type:Ig}),Ig.\u0275inj=p.cJS({imports:[po.Bz.forRoot(Zb,{useHash:!0}),po.Bz]});class Dg{}Dg.\u0275fac=function(e){return new(e||Dg)},Dg.\u0275mod=p.oAB({type:Dg,bootstrap:[bv]}),Dg.\u0275inj=p.cJS({providers:[Qa],imports:[xb.m,I.b2,Sb,j.hO.initializeApp({apiKey:"AIzaSyC18SYhiI6FJ8ngA0EmXAbXl07rnUXHMKA",authDomain:"exam-project-46928.firebaseapp.com",projectId:"exam-project-46928",storageBucket:"exam-project-46928.appspot.com",messagingSenderId:"1062978260998",appId:"1:1062978260998:web:ee6a68f6b26523862bf387"}),mi,_E,Ig]}),I.q6().bootstrapModule(Dg).catch(n=>console.error(n))},8395:(yt,Se,V)=>{V.d(Se,{m:()=>p});var I=V(6895),j=V(4650);class p{}p.\u0275fac=function(ue){return new(ue||p)},p.\u0275mod=j.oAB({type:p}),p.\u0275inj=j.cJS({imports:[I.ez,I.ez]})},1135:(yt,Se,V)=>{V.d(Se,{X:()=>j});var I=V(7579);class j extends I.x{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const ue=super._subscribe(ae);return!ue.closed&&ae.next(this._value),ue}getValue(){const{hasError:ae,thrownError:ue,_value:fe}=this;if(ae)throw ue;return this._throwIfClosed(),fe}next(ae){super.next(this._value=ae)}}},9751:(yt,Se,V)=>{V.d(Se,{y:()=>ye});var I=V(930),j=V(727),p=V(8822),ae=V(9635),ue=V(2416),fe=V(576),_e=V(2806);let ye=(()=>{class ce{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const at=new ce;return at.source=this,at.operator=Ge,at}subscribe(Ge,at,vt){const Oe=function te(ce){return ce&&ce instanceof I.Lv||function re(ce){return ce&&(0,fe.m)(ce.next)&&(0,fe.m)(ce.error)&&(0,fe.m)(ce.complete)}(ce)&&(0,j.Nn)(ce)}(Ge)?Ge:new I.Hp(Ge,at,vt);return(0,_e.x)(()=>{const{operator:We,source:ze}=this;Oe.add(We?We.call(Oe,ze):ze?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(at){Ge.error(at)}}forEach(Ge,at){return new(at=we(at))((vt,Oe)=>{const We=new I.Hp({next:ze=>{try{Ge(ze)}catch(Qe){Oe(Qe),We.unsubscribe()}},error:Oe,complete:vt});this.subscribe(We)})}_subscribe(Ge){var at;return null===(at=this.source)||void 0===at?void 0:at.subscribe(Ge)}[p.L](){return this}pipe(...Ge){return(0,ae.U)(Ge)(this)}toPromise(Ge){return new(Ge=we(Ge))((at,vt)=>{let Oe;this.subscribe(We=>Oe=We,We=>vt(We),()=>at(Oe))})}}return ce.create=Je=>new ce(Je),ce})();function we(ce){var Je;return null!==(Je=ce??ue.v.Promise)&&void 0!==Je?Je:Promise}},7579:(yt,Se,V)=>{V.d(Se,{x:()=>_e});var I=V(9751),j=V(727);const ae=(0,V(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=V(8737),fe=V(2806);let _e=(()=>{class we extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(te){const ce=new ye(this,this);return ce.operator=te,ce}_throwIfClosed(){if(this.closed)throw new ae}next(te){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ce of this.currentObservers)ce.next(te)}})}error(te){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=te;const{observers:ce}=this;for(;ce.length;)ce.shift().error(te)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:te}=this;for(;te.length;)te.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var te;return(null===(te=this.observers)||void 0===te?void 0:te.length)>0}_trySubscribe(te){return this._throwIfClosed(),super._trySubscribe(te)}_subscribe(te){return this._throwIfClosed(),this._checkFinalizedStatuses(te),this._innerSubscribe(te)}_innerSubscribe(te){const{hasError:ce,isStopped:Je,observers:Ge}=this;return ce||Je?j.Lc:(this.currentObservers=null,Ge.push(te),new j.w0(()=>{this.currentObservers=null,(0,ue.P)(Ge,te)}))}_checkFinalizedStatuses(te){const{hasError:ce,thrownError:Je,isStopped:Ge}=this;ce?te.error(Je):Ge&&te.complete()}asObservable(){const te=new I.y;return te.source=this,te}}return we.create=(re,te)=>new ye(re,te),we})();class ye extends _e{constructor(re,te){super(),this.destination=re,this.source=te}next(re){var te,ce;null===(ce=null===(te=this.destination)||void 0===te?void 0:te.next)||void 0===ce||ce.call(te,re)}error(re){var te,ce;null===(ce=null===(te=this.destination)||void 0===te?void 0:te.error)||void 0===ce||ce.call(te,re)}complete(){var re,te;null===(te=null===(re=this.destination)||void 0===re?void 0:re.complete)||void 0===te||te.call(re)}_subscribe(re){var te,ce;return null!==(ce=null===(te=this.source)||void 0===te?void 0:te.subscribe(re))&&void 0!==ce?ce:j.Lc}}},930:(yt,Se,V)=>{V.d(Se,{Hp:()=>vt,Lv:()=>ce});var I=V(576),j=V(727),p=V(2416),ae=V(7849),ue=V(5032);const fe=we("C",void 0,void 0);function we(ke,Ue,je){return{kind:ke,value:Ue,error:je}}var re=V(3410),te=V(2806);class ce extends j.w0{constructor(Ue){super(),this.isStopped=!1,Ue?(this.destination=Ue,(0,j.Nn)(Ue)&&Ue.add(this)):this.destination=Qe}static create(Ue,je,it){return new vt(Ue,je,it)}next(Ue){this.isStopped?ze(function ye(ke){return we("N",ke,void 0)}(Ue),this):this._next(Ue)}error(Ue){this.isStopped?ze(function _e(ke){return we("E",void 0,ke)}(Ue),this):(this.isStopped=!0,this._error(Ue))}complete(){this.isStopped?ze(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ue){this.destination.next(Ue)}_error(Ue){try{this.destination.error(Ue)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Je=Function.prototype.bind;function Ge(ke,Ue){return Je.call(ke,Ue)}class at{constructor(Ue){this.partialObserver=Ue}next(Ue){const{partialObserver:je}=this;if(je.next)try{je.next(Ue)}catch(it){Oe(it)}}error(Ue){const{partialObserver:je}=this;if(je.error)try{je.error(Ue)}catch(it){Oe(it)}else Oe(Ue)}complete(){const{partialObserver:Ue}=this;if(Ue.complete)try{Ue.complete()}catch(je){Oe(je)}}}class vt extends ce{constructor(Ue,je,it){let ge;if(super(),(0,I.m)(Ue)||!Ue)ge={next:Ue??void 0,error:je??void 0,complete:it??void 0};else{let Te;this&&p.v.useDeprecatedNextContext?(Te=Object.create(Ue),Te.unsubscribe=()=>this.unsubscribe(),ge={next:Ue.next&&Ge(Ue.next,Te),error:Ue.error&&Ge(Ue.error,Te),complete:Ue.complete&&Ge(Ue.complete,Te)}):ge=Ue}this.destination=new at(ge)}}function Oe(ke){p.v.useDeprecatedSynchronousErrorHandling?(0,te.O)(ke):(0,ae.h)(ke)}function ze(ke,Ue){const{onStoppedNotification:je}=p.v;je&&re.z.setTimeout(()=>je(ke,Ue))}const Qe={closed:!0,next:ue.Z,error:function We(ke){throw ke},complete:ue.Z}},727:(yt,Se,V)=>{V.d(Se,{Lc:()=>fe,w0:()=>ue,Nn:()=>_e});var I=V(576);const p=(0,V(3888).d)(we=>function(te){we(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((ce,Je)=>`${Je+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te});var ae=V(8737);class ue{constructor(re){this.initialTeardown=re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let re;if(!this.closed){this.closed=!0;const{_parentage:te}=this;if(te)if(this._parentage=null,Array.isArray(te))for(const Ge of te)Ge.remove(this);else te.remove(this);const{initialTeardown:ce}=this;if((0,I.m)(ce))try{ce()}catch(Ge){re=Ge instanceof p?Ge.errors:[Ge]}const{_finalizers:Je}=this;if(Je){this._finalizers=null;for(const Ge of Je)try{ye(Ge)}catch(at){re=re??[],at instanceof p?re=[...re,...at.errors]:re.push(at)}}if(re)throw new p(re)}}add(re){var te;if(re&&re!==this)if(this.closed)ye(re);else{if(re instanceof ue){if(re.closed||re._hasParent(this))return;re._addParent(this)}(this._finalizers=null!==(te=this._finalizers)&&void 0!==te?te:[]).push(re)}}_hasParent(re){const{_parentage:te}=this;return te===re||Array.isArray(te)&&te.includes(re)}_addParent(re){const{_parentage:te}=this;this._parentage=Array.isArray(te)?(te.push(re),te):te?[te,re]:re}_removeParent(re){const{_parentage:te}=this;te===re?this._parentage=null:Array.isArray(te)&&(0,ae.P)(te,re)}remove(re){const{_finalizers:te}=this;te&&(0,ae.P)(te,re),re instanceof ue&&re._removeParent(this)}}ue.EMPTY=(()=>{const we=new ue;return we.closed=!0,we})();const fe=ue.EMPTY;function _e(we){return we instanceof ue||we&&"closed"in we&&(0,I.m)(we.remove)&&(0,I.m)(we.add)&&(0,I.m)(we.unsubscribe)}function ye(we){(0,I.m)(we)?we():we.unsubscribe()}},2416:(yt,Se,V)=>{V.d(Se,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(yt,Se,V)=>{V.d(Se,{z:()=>ue});var I=V(8189),p=V(3269),ae=V(8996);function ue(...fe){return function j(){return(0,I.J)(1)}()((0,ae.D)(fe,(0,p.yG)(fe)))}},515:(yt,Se,V)=>{V.d(Se,{E:()=>j});const j=new(V(9751).y)(ue=>ue.complete())},8996:(yt,Se,V)=>{V.d(Se,{D:()=>Ue});var I=V(8421),j=V(5363),p=V(9468),fe=V(9751),ye=V(2202),we=V(576),re=V(9672);function ce(je,it){if(!je)throw new Error("Iterable cannot be null");return new fe.y(ge=>{(0,re.f)(ge,it,()=>{const Te=je[Symbol.asyncIterator]();(0,re.f)(ge,it,()=>{Te.next().then(Fe=>{Fe.done?ge.complete():ge.next(Fe.value)})},0,!0)})})}var Je=V(3670),Ge=V(8239),at=V(1144),vt=V(6495),Oe=V(2206),We=V(4532),ze=V(3260);function Ue(je,it){return it?function ke(je,it){if(null!=je){if((0,Je.c)(je))return function ae(je,it){return(0,I.Xf)(je).pipe((0,p.R)(it),(0,j.Q)(it))}(je,it);if((0,at.z)(je))return function _e(je,it){return new fe.y(ge=>{let Te=0;return it.schedule(function(){Te===je.length?ge.complete():(ge.next(je[Te++]),ge.closed||this.schedule())})})}(je,it);if((0,Ge.t)(je))return function ue(je,it){return(0,I.Xf)(je).pipe((0,p.R)(it),(0,j.Q)(it))}(je,it);if((0,Oe.D)(je))return ce(je,it);if((0,vt.T)(je))return function te(je,it){return new fe.y(ge=>{let Te;return(0,re.f)(ge,it,()=>{Te=je[ye.h](),(0,re.f)(ge,it,()=>{let Fe,ct;try{({value:Fe,done:ct}=Te.next())}catch(nt){return void ge.error(nt)}ct?ge.complete():ge.next(Fe)},0,!0)}),()=>(0,we.m)(Te?.return)&&Te.return()})}(je,it);if((0,ze.L)(je))return function Qe(je,it){return ce((0,ze.Q)(je),it)}(je,it)}throw(0,We.z)(je)}(je,it):(0,I.Xf)(je)}},8421:(yt,Se,V)=>{V.d(Se,{Xf:()=>Je});var I=V(655),j=V(1144),p=V(8239),ae=V(9751),ue=V(3670),fe=V(2206),_e=V(4532),ye=V(6495),we=V(3260),re=V(576),te=V(7849),ce=V(8822);function Je(ke){if(ke instanceof ae.y)return ke;if(null!=ke){if((0,ue.c)(ke))return function Ge(ke){return new ae.y(Ue=>{const je=ke[ce.L]();if((0,re.m)(je.subscribe))return je.subscribe(Ue);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,j.z)(ke))return function at(ke){return new ae.y(Ue=>{for(let je=0;je<ke.length&&!Ue.closed;je++)Ue.next(ke[je]);Ue.complete()})}(ke);if((0,p.t)(ke))return function vt(ke){return new ae.y(Ue=>{ke.then(je=>{Ue.closed||(Ue.next(je),Ue.complete())},je=>Ue.error(je)).then(null,te.h)})}(ke);if((0,fe.D)(ke))return We(ke);if((0,ye.T)(ke))return function Oe(ke){return new ae.y(Ue=>{for(const je of ke)if(Ue.next(je),Ue.closed)return;Ue.complete()})}(ke);if((0,we.L)(ke))return function ze(ke){return We((0,we.Q)(ke))}(ke)}throw(0,_e.z)(ke)}function We(ke){return new ae.y(Ue=>{(function Qe(ke,Ue){var je,it,ge,Te;return(0,I.mG)(this,void 0,void 0,function*(){try{for(je=(0,I.KL)(ke);!(it=yield je.next()).done;)if(Ue.next(it.value),Ue.closed)return}catch(Fe){ge={error:Fe}}finally{try{it&&!it.done&&(Te=je.return)&&(yield Te.call(je))}finally{if(ge)throw ge.error}}Ue.complete()})})(ke,Ue).catch(je=>Ue.error(je))})}},6451:(yt,Se,V)=>{V.d(Se,{T:()=>fe});var I=V(8189),j=V(8421),p=V(515),ae=V(3269),ue=V(8996);function fe(..._e){const ye=(0,ae.yG)(_e),we=(0,ae._6)(_e,1/0),re=_e;return re.length?1===re.length?(0,j.Xf)(re[0]):(0,I.J)(we)((0,ue.D)(re,ye)):p.E}},9646:(yt,Se,V)=>{V.d(Se,{of:()=>p});var I=V(3269),j=V(8996);function p(...ae){const ue=(0,I.yG)(ae);return(0,j.D)(ae,ue)}},5403:(yt,Se,V)=>{V.d(Se,{x:()=>j});var I=V(930);function j(ae,ue,fe,_e,ye){return new p(ae,ue,fe,_e,ye)}class p extends I.Lv{constructor(ue,fe,_e,ye,we,re){super(ue),this.onFinalize=we,this.shouldUnsubscribe=re,this._next=fe?function(te){try{fe(te)}catch(ce){ue.error(ce)}}:super._next,this._error=ye?function(te){try{ye(te)}catch(ce){ue.error(ce)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(te){ue.error(te)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},6590:(yt,Se,V)=>{V.d(Se,{d:()=>p});var I=V(4482),j=V(5403);function p(ae){return(0,I.e)((ue,fe)=>{let _e=!1;ue.subscribe((0,j.x)(fe,ye=>{_e=!0,fe.next(ye)},()=>{_e||fe.next(ae),fe.complete()}))})}},9300:(yt,Se,V)=>{V.d(Se,{h:()=>p});var I=V(4482),j=V(5403);function p(ae,ue){return(0,I.e)((fe,_e)=>{let ye=0;fe.subscribe((0,j.x)(_e,we=>ae.call(ue,we,ye++)&&_e.next(we)))})}},590:(yt,Se,V)=>{V.d(Se,{P:()=>_e});var I=V(6805),j=V(9300),p=V(5698),ae=V(6590),ue=V(8068),fe=V(4671);function _e(ye,we){const re=arguments.length>=2;return te=>te.pipe(ye?(0,j.h)((ce,Je)=>ye(ce,Je,te)):fe.y,(0,p.q)(1),re?(0,ae.d)(we):(0,ue.T)(()=>new I.K))}},4004:(yt,Se,V)=>{V.d(Se,{U:()=>p});var I=V(4482),j=V(5403);function p(ae,ue){return(0,I.e)((fe,_e)=>{let ye=0;fe.subscribe((0,j.x)(_e,we=>{_e.next(ae.call(ue,we,ye++))}))})}},8189:(yt,Se,V)=>{V.d(Se,{J:()=>p});var I=V(5577),j=V(4671);function p(ae=1/0){return(0,I.z)(j.y,ae)}},5577:(yt,Se,V)=>{V.d(Se,{z:()=>ye});var I=V(4004),j=V(8421),p=V(4482),ae=V(9672),ue=V(5403),_e=V(576);function ye(we,re,te=1/0){return(0,_e.m)(re)?ye((ce,Je)=>(0,I.U)((Ge,at)=>re(ce,Ge,Je,at))((0,j.Xf)(we(ce,Je))),te):("number"==typeof re&&(te=re),(0,p.e)((ce,Je)=>function fe(we,re,te,ce,Je,Ge,at,vt){const Oe=[];let We=0,ze=0,Qe=!1;const ke=()=>{Qe&&!Oe.length&&!We&&re.complete()},Ue=it=>We<ce?je(it):Oe.push(it),je=it=>{Ge&&re.next(it),We++;let ge=!1;(0,j.Xf)(te(it,ze++)).subscribe((0,ue.x)(re,Te=>{Je?.(Te),Ge?Ue(Te):re.next(Te)},()=>{ge=!0},void 0,()=>{if(ge)try{for(We--;Oe.length&&We<ce;){const Te=Oe.shift();at?(0,ae.f)(re,at,()=>je(Te)):je(Te)}ke()}catch(Te){re.error(Te)}}))};return we.subscribe((0,ue.x)(re,Ue,()=>{Qe=!0,ke()})),()=>{vt?.()}}(ce,Je,we,te)))}},5363:(yt,Se,V)=>{V.d(Se,{Q:()=>ae});var I=V(9672),j=V(4482),p=V(5403);function ae(ue,fe=0){return(0,j.e)((_e,ye)=>{_e.subscribe((0,p.x)(ye,we=>(0,I.f)(ye,ue,()=>ye.next(we),fe),()=>(0,I.f)(ye,ue,()=>ye.complete(),fe),we=>(0,I.f)(ye,ue,()=>ye.error(we),fe)))})}},5026:(yt,Se,V)=>{V.d(Se,{R:()=>ae});var I=V(4482),j=V(5403);function p(ue,fe,_e,ye,we){return(re,te)=>{let ce=_e,Je=fe,Ge=0;re.subscribe((0,j.x)(te,at=>{const vt=Ge++;Je=ce?ue(Je,at,vt):(ce=!0,at),ye&&te.next(Je)},we&&(()=>{ce&&te.next(Je),te.complete()})))}}function ae(ue,fe){return(0,I.e)(p(ue,fe,arguments.length>=2,!0))}},3099:(yt,Se,V)=>{V.d(Se,{B:()=>ue});var I=V(8421),j=V(7579),p=V(930),ae=V(4482);function ue(_e={}){const{connector:ye=(()=>new j.x),resetOnError:we=!0,resetOnComplete:re=!0,resetOnRefCountZero:te=!0}=_e;return ce=>{let Je,Ge,at,vt=0,Oe=!1,We=!1;const ze=()=>{Ge?.unsubscribe(),Ge=void 0},Qe=()=>{ze(),Je=at=void 0,Oe=We=!1},ke=()=>{const Ue=Je;Qe(),Ue?.unsubscribe()};return(0,ae.e)((Ue,je)=>{vt++,!We&&!Oe&&ze();const it=at=at??ye();je.add(()=>{vt--,0===vt&&!We&&!Oe&&(Ge=fe(ke,te))}),it.subscribe(je),!Je&&vt>0&&(Je=new p.Hp({next:ge=>it.next(ge),error:ge=>{We=!0,ze(),Ge=fe(Qe,we,ge),it.error(ge)},complete:()=>{Oe=!0,ze(),Ge=fe(Qe,re),it.complete()}}),(0,I.Xf)(Ue).subscribe(Je))})(ce)}}function fe(_e,ye,...we){if(!0===ye)return void _e();if(!1===ye)return;const re=new p.Hp({next:()=>{re.unsubscribe(),_e()}});return(0,I.Xf)(ye(...we)).subscribe(re)}},8675:(yt,Se,V)=>{V.d(Se,{O:()=>ae});var I=V(7272),j=V(3269),p=V(4482);function ae(...ue){const fe=(0,j.yG)(ue);return(0,p.e)((_e,ye)=>{(fe?(0,I.z)(ue,_e,fe):(0,I.z)(ue,_e)).subscribe(ye)})}},9468:(yt,Se,V)=>{V.d(Se,{R:()=>j});var I=V(4482);function j(p,ae=0){return(0,I.e)((ue,fe)=>{fe.add(p.schedule(()=>ue.subscribe(fe),ae))})}},3900:(yt,Se,V)=>{V.d(Se,{w:()=>ae});var I=V(8421),j=V(4482),p=V(5403);function ae(ue,fe){return(0,j.e)((_e,ye)=>{let we=null,re=0,te=!1;const ce=()=>te&&!we&&ye.complete();_e.subscribe((0,p.x)(ye,Je=>{we?.unsubscribe();let Ge=0;const at=re++;(0,I.Xf)(ue(Je,at)).subscribe(we=(0,p.x)(ye,vt=>ye.next(fe?fe(Je,vt,at,Ge++):vt),()=>{we=null,ce()}))},()=>{te=!0,ce()}))})}},5698:(yt,Se,V)=>{V.d(Se,{q:()=>ae});var I=V(515),j=V(4482),p=V(5403);function ae(ue){return ue<=0?()=>I.E:(0,j.e)((fe,_e)=>{let ye=0;fe.subscribe((0,p.x)(_e,we=>{++ye<=ue&&(_e.next(we),ue<=ye&&_e.complete())}))})}},8505:(yt,Se,V)=>{V.d(Se,{b:()=>ue});var I=V(576),j=V(4482),p=V(5403),ae=V(4671);function ue(fe,_e,ye){const we=(0,I.m)(fe)||_e||ye?{next:fe,error:_e,complete:ye}:fe;return we?(0,j.e)((re,te)=>{var ce;null===(ce=we.subscribe)||void 0===ce||ce.call(we);let Je=!0;re.subscribe((0,p.x)(te,Ge=>{var at;null===(at=we.next)||void 0===at||at.call(we,Ge),te.next(Ge)},()=>{var Ge;Je=!1,null===(Ge=we.complete)||void 0===Ge||Ge.call(we),te.complete()},Ge=>{var at;Je=!1,null===(at=we.error)||void 0===at||at.call(we,Ge),te.error(Ge)},()=>{var Ge,at;Je&&(null===(Ge=we.unsubscribe)||void 0===Ge||Ge.call(we)),null===(at=we.finalize)||void 0===at||at.call(we)}))}):ae.y}},8068:(yt,Se,V)=>{V.d(Se,{T:()=>ae});var I=V(6805),j=V(4482),p=V(5403);function ae(fe=ue){return(0,j.e)((_e,ye)=>{let we=!1;_e.subscribe((0,p.x)(ye,re=>{we=!0,ye.next(re)},()=>we?ye.complete():ye.error(fe())))})}function ue(){return new I.K}},4408:(yt,Se,V)=>{V.d(Se,{o:()=>ue});var I=V(727);class j extends I.w0{constructor(_e,ye){super()}schedule(_e,ye=0){return this}}const p={setInterval(fe,_e,...ye){const{delegate:we}=p;return we?.setInterval?we.setInterval(fe,_e,...ye):setInterval(fe,_e,...ye)},clearInterval(fe){const{delegate:_e}=p;return(_e?.clearInterval||clearInterval)(fe)},delegate:void 0};var ae=V(8737);class ue extends j{constructor(_e,ye){super(_e,ye),this.scheduler=_e,this.work=ye,this.pending=!1}schedule(_e,ye=0){var we;if(this.closed)return this;this.state=_e;const re=this.id,te=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(te,re,ye)),this.pending=!0,this.delay=ye,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(te,this.id,ye),this}requestAsyncId(_e,ye,we=0){return p.setInterval(_e.flush.bind(_e,this),we)}recycleAsyncId(_e,ye,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return ye;null!=ye&&p.clearInterval(ye)}execute(_e,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(_e,ye);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,ye){let re,we=!1;try{this.work(_e)}catch(te){we=!0,re=te||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),re}unsubscribe(){if(!this.closed){const{id:_e,scheduler:ye}=this,{actions:we}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(we,this),null!=_e&&(this.id=this.recycleAsyncId(ye,_e,null)),this.delay=null,super.unsubscribe()}}}},7565:(yt,Se,V)=>{V.d(Se,{v:()=>p});var I=V(6063);class j{constructor(ue,fe=j.now){this.schedulerActionCtor=ue,this.now=fe}schedule(ue,fe=0,_e){return new this.schedulerActionCtor(this,ue).schedule(_e,fe)}}j.now=I.l.now;class p extends j{constructor(ue,fe=j.now){super(ue,fe),this.actions=[],this._active=!1}flush(ue){const{actions:fe}=this;if(this._active)return void fe.push(ue);let _e;this._active=!0;do{if(_e=ue.execute(ue.state,ue.delay))break}while(ue=fe.shift());if(this._active=!1,_e){for(;ue=fe.shift();)ue.unsubscribe();throw _e}}}},4986:(yt,Se,V)=>{V.d(Se,{P:()=>ae,z:()=>p});var I=V(4408);const p=new(V(7565).v)(I.o),ae=p},6063:(yt,Se,V)=>{V.d(Se,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},3410:(yt,Se,V)=>{V.d(Se,{z:()=>I});const I={setTimeout(j,p,...ae){const{delegate:ue}=I;return ue?.setTimeout?ue.setTimeout(j,p,...ae):setTimeout(j,p,...ae)},clearTimeout(j){const{delegate:p}=I;return(p?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(yt,Se,V)=>{V.d(Se,{h:()=>j});const j=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yt,Se,V)=>{V.d(Se,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(yt,Se,V)=>{V.d(Se,{K:()=>j});const j=(0,V(3888).d)(p=>function(){p(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(yt,Se,V)=>{V.d(Se,{_6:()=>fe,jO:()=>ae,yG:()=>ue});var I=V(576),j=V(3532);function p(_e){return _e[_e.length-1]}function ae(_e){return(0,I.m)(p(_e))?_e.pop():void 0}function ue(_e){return(0,j.K)(p(_e))?_e.pop():void 0}function fe(_e,ye){return"number"==typeof p(_e)?_e.pop():ye}},4742:(yt,Se,V)=>{V.d(Se,{D:()=>ue});const{isArray:I}=Array,{getPrototypeOf:j,prototype:p,keys:ae}=Object;function ue(_e){if(1===_e.length){const ye=_e[0];if(I(ye))return{args:ye,keys:null};if(function fe(_e){return _e&&"object"==typeof _e&&j(_e)===p}(ye)){const we=ae(ye);return{args:we.map(re=>ye[re]),keys:we}}}return{args:_e,keys:null}}},8737:(yt,Se,V)=>{function I(j,p){if(j){const ae=j.indexOf(p);0<=ae&&j.splice(ae,1)}}V.d(Se,{P:()=>I})},3888:(yt,Se,V)=>{function I(j){const ae=j(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}V.d(Se,{d:()=>I})},1810:(yt,Se,V)=>{function I(j,p){return j.reduce((ae,ue,fe)=>(ae[ue]=p[fe],ae),{})}V.d(Se,{n:()=>I})},2806:(yt,Se,V)=>{V.d(Se,{O:()=>ae,x:()=>p});var I=V(2416);let j=null;function p(ue){if(I.v.useDeprecatedSynchronousErrorHandling){const fe=!j;if(fe&&(j={errorThrown:!1,error:null}),ue(),fe){const{errorThrown:_e,error:ye}=j;if(j=null,_e)throw ye}}else ue()}function ae(ue){I.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ue)}},9672:(yt,Se,V)=>{function I(j,p,ae,ue=0,fe=!1){const _e=p.schedule(function(){ae(),fe?j.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(j.add(_e),!fe)return _e}V.d(Se,{f:()=>I})},4671:(yt,Se,V)=>{function I(j){return j}V.d(Se,{y:()=>I})},1144:(yt,Se,V)=>{V.d(Se,{z:()=>I});const I=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(yt,Se,V)=>{V.d(Se,{D:()=>j});var I=V(576);function j(p){return Symbol.asyncIterator&&(0,I.m)(p?.[Symbol.asyncIterator])}},576:(yt,Se,V)=>{function I(j){return"function"==typeof j}V.d(Se,{m:()=>I})},3670:(yt,Se,V)=>{V.d(Se,{c:()=>p});var I=V(8822),j=V(576);function p(ae){return(0,j.m)(ae[I.L])}},6495:(yt,Se,V)=>{V.d(Se,{T:()=>p});var I=V(2202),j=V(576);function p(ae){return(0,j.m)(ae?.[I.h])}},8239:(yt,Se,V)=>{V.d(Se,{t:()=>j});var I=V(576);function j(p){return(0,I.m)(p?.then)}},3260:(yt,Se,V)=>{V.d(Se,{L:()=>ae,Q:()=>p});var I=V(655),j=V(576);function p(ue){return(0,I.FC)(this,arguments,function*(){const _e=ue.getReader();try{for(;;){const{value:ye,done:we}=yield(0,I.qq)(_e.read());if(we)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(ye)}}finally{_e.releaseLock()}})}function ae(ue){return(0,j.m)(ue?.getReader)}},3532:(yt,Se,V)=>{V.d(Se,{K:()=>j});var I=V(576);function j(p){return p&&(0,I.m)(p.schedule)}},4482:(yt,Se,V)=>{V.d(Se,{A:()=>j,e:()=>p});var I=V(576);function j(ae){return(0,I.m)(ae?.lift)}function p(ae){return ue=>{if(j(ue))return ue.lift(function(fe){try{return ae(fe,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(yt,Se,V)=>{V.d(Se,{Z:()=>ae});var I=V(4004);const{isArray:j}=Array;function ae(ue){return(0,I.U)(fe=>function p(ue,fe){return j(fe)?ue(...fe):ue(fe)}(ue,fe))}},5032:(yt,Se,V)=>{function I(){}V.d(Se,{Z:()=>I})},9635:(yt,Se,V)=>{V.d(Se,{U:()=>p,z:()=>j});var I=V(4671);function j(...ae){return p(ae)}function p(ae){return 0===ae.length?I.y:1===ae.length?ae[0]:function(fe){return ae.reduce((_e,ye)=>ye(_e),fe)}}},7849:(yt,Se,V)=>{V.d(Se,{h:()=>p});var I=V(2416),j=V(3410);function p(ae){j.z.setTimeout(()=>{const{onUnhandledError:ue}=I.v;if(!ue)throw ae;ue(ae)})}},4532:(yt,Se,V)=>{function I(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Se,{z:()=>I})},655:(yt,Se,V)=>{function ae(be,Me){var Pe={};for(var $e in be)Object.prototype.hasOwnProperty.call(be,$e)&&Me.indexOf($e)<0&&(Pe[$e]=be[$e]);if(null!=be&&"function"==typeof Object.getOwnPropertySymbols){var Xe=0;for($e=Object.getOwnPropertySymbols(be);Xe<$e.length;Xe++)Me.indexOf($e[Xe])<0&&Object.prototype.propertyIsEnumerable.call(be,$e[Xe])&&(Pe[$e[Xe]]=be[$e[Xe]])}return Pe}function ce(be,Me,Pe,$e){return new(Pe||(Pe=Promise))(function(et,lt){function ht(Tt){try{me($e.next(Tt))}catch(mt){lt(mt)}}function Cn(Tt){try{me($e.throw(Tt))}catch(mt){lt(mt)}}function me(Tt){Tt.done?et(Tt.value):function Xe(et){return et instanceof Pe?et:new Pe(function(lt){lt(et)})}(Tt.value).then(ht,Cn)}me(($e=$e.apply(be,Me||[])).next())})}function ke(be){return this instanceof ke?(this.v=be,this):new ke(be)}function Ue(be,Me,Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xe,$e=Pe.apply(be,Me||[]),et=[];return Xe={},lt("next"),lt("throw"),lt("return"),Xe[Symbol.asyncIterator]=function(){return this},Xe;function lt(xt){$e[xt]&&(Xe[xt]=function(pn){return new Promise(function(Ln,ln){et.push([xt,pn,Ln,ln])>1||ht(xt,pn)})})}function ht(xt,pn){try{!function Cn(xt){xt.value instanceof ke?Promise.resolve(xt.value.v).then(me,Tt):mt(et[0][2],xt)}($e[xt](pn))}catch(Ln){mt(et[0][3],Ln)}}function me(xt){ht("next",xt)}function Tt(xt){ht("throw",xt)}function mt(xt,pn){xt(pn),et.shift(),et.length&&ht(et[0][0],et[0][1])}}function it(be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Me=be[Symbol.asyncIterator];return Me?Me.call(be):(be=function vt(be){var Me="function"==typeof Symbol&&Symbol.iterator,Pe=Me&&be[Me],$e=0;if(Pe)return Pe.call(be);if(be&&"number"==typeof be.length)return{next:function(){return be&&$e>=be.length&&(be=void 0),{value:be&&be[$e++],done:!be}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(be),Pe={},$e("next"),$e("throw"),$e("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe);function $e(et){Pe[et]=be[et]&&function(lt){return new Promise(function(ht,Cn){!function Xe(et,lt,ht,Cn){Promise.resolve(Cn).then(function(me){et({value:me,done:ht})},lt)}(ht,Cn,(lt=be[et](lt)).done,lt.value)})}}}V.d(Se,{FC:()=>Ue,KL:()=>it,_T:()=>ae,mG:()=>ce,qq:()=>ke})},6895:(yt,Se,V)=>{V.d(Se,{Do:()=>ze,ED:()=>ur,EM:()=>Qs,HT:()=>ae,JF:()=>At,K0:()=>fe,Mx:()=>ri,NF:()=>ds,O5:()=>Mi,PM:()=>Aa,RF:()=>Wi,S$:()=>vt,V_:()=>we,Ye:()=>Qe,b0:()=>We,bD:()=>mi,ez:()=>ls,gd:()=>ii,mk:()=>Kt,n9:()=>Ir,q:()=>p,sg:()=>zi,w_:()=>ue});var I=V(4650);let j=null;function p(){return j}function ae(T){j||(j=T)}class ue{}const fe=new I.OlP("DocumentToken");let _e=(()=>{class T{historyGo(x){throw new Error("Not implemented")}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:function(){return function ye(){return(0,I.LFG)(re)}()},providedIn:"platform"}),T})();const we=new I.OlP("Location Initialized");let re=(()=>{class T extends _e{constructor(x){super(),this._doc=x,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return p().getBaseHref(this._doc)}onPopState(x){const H=p().getGlobalEventTarget(this._doc,"window");return H.addEventListener("popstate",x,!1),()=>H.removeEventListener("popstate",x)}onHashChange(x){const H=p().getGlobalEventTarget(this._doc,"window");return H.addEventListener("hashchange",x,!1),()=>H.removeEventListener("hashchange",x)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(x){this._location.pathname=x}pushState(x,H,ee){te()?this._history.pushState(x,H,ee):this._location.hash=ee}replaceState(x,H,ee){te()?this._history.replaceState(x,H,ee):this._location.hash=ee}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return T.\u0275fac=function(x){return new(x||T)(I.LFG(fe))},T.\u0275prov=I.Yz7({token:T,factory:function(){return function ce(){return new re((0,I.LFG)(fe))}()},providedIn:"platform"}),T})();function te(){return!!window.history.pushState}function Je(T,k){if(0==T.length)return k;if(0==k.length)return T;let x=0;return T.endsWith("/")&&x++,k.startsWith("/")&&x++,2==x?T+k.substring(1):1==x?T+k:T+"/"+k}function Ge(T){const k=T.match(/#|\?|$/),x=k&&k.index||T.length;return T.slice(0,x-("/"===T[x-1]?1:0))+T.slice(x)}function at(T){return T&&"?"!==T[0]?"?"+T:T}let vt=(()=>{class T{historyGo(x){throw new Error("Not implemented")}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:function(){return(0,I.f3M)(We)},providedIn:"root"}),T})();const Oe=new I.OlP("appBaseHref");let We=(()=>{class T extends vt{constructor(x,H){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=H??this._platformLocation.getBaseHrefFromDOM()??(0,I.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return Je(this._baseHref,x)}path(x=!1){const H=this._platformLocation.pathname+at(this._platformLocation.search),ee=this._platformLocation.hash;return ee&&x?`${H}${ee}`:H}pushState(x,H,ee,Ae){const Ne=this.prepareExternalUrl(ee+at(Ae));this._platformLocation.pushState(x,H,Ne)}replaceState(x,H,ee,Ae){const Ne=this.prepareExternalUrl(ee+at(Ae));this._platformLocation.replaceState(x,H,Ne)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return T.\u0275fac=function(x){return new(x||T)(I.LFG(_e),I.LFG(Oe,8))},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),ze=(()=>{class T extends vt{constructor(x,H){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=H&&(this._baseHref=H)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let H=this._platformLocation.hash;return null==H&&(H="#"),H.length>0?H.substring(1):H}prepareExternalUrl(x){const H=Je(this._baseHref,x);return H.length>0?"#"+H:H}pushState(x,H,ee,Ae){let Ne=this.prepareExternalUrl(ee+at(Ae));0==Ne.length&&(Ne=this._platformLocation.pathname),this._platformLocation.pushState(x,H,Ne)}replaceState(x,H,ee,Ae){let Ne=this.prepareExternalUrl(ee+at(Ae));0==Ne.length&&(Ne=this._platformLocation.pathname),this._platformLocation.replaceState(x,H,Ne)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return T.\u0275fac=function(x){return new(x||T)(I.LFG(_e),I.LFG(Oe,8))},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac}),T})(),Qe=(()=>{class T{constructor(x){this._subject=new I.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const H=this._locationStrategy.getBaseHref();this._basePath=function it(T){if(new RegExp("^(https?:)?//").test(T)){const[,x]=T.split(/\/\/[^\/]+/);return x}return T}(Ge(je(H))),this._locationStrategy.onPopState(ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:ee.state,type:ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,H=""){return this.path()==this.normalize(x+at(H))}normalize(x){return T.stripTrailingSlash(function Ue(T,k){return T&&new RegExp(`^${T}([/;?#]|$)`).test(k)?k.substring(T.length):k}(this._basePath,je(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,H="",ee=null){this._locationStrategy.pushState(ee,"",x,H),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+at(H)),ee)}replaceState(x,H="",ee=null){this._locationStrategy.replaceState(ee,"",x,H),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+at(H)),ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(H=>{this._notifyUrlChangeListeners(H.url,H.state)})),()=>{const H=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(H,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",H){this._urlChangeListeners.forEach(ee=>ee(x,H))}subscribe(x,H,ee){return this._subject.subscribe({next:x,error:H,complete:ee})}}return T.normalizeQueryParams=at,T.joinWithSlash=Je,T.stripTrailingSlash=Ge,T.\u0275fac=function(x){return new(x||T)(I.LFG(vt))},T.\u0275prov=I.Yz7({token:T,factory:function(){return function ke(){return new Qe((0,I.LFG)(vt))}()},providedIn:"root"}),T})();function je(T){return T.replace(/\/index.html$/,"")}function ri(T,k){k=encodeURIComponent(k);for(const x of T.split(";")){const H=x.indexOf("="),[ee,Ae]=-1==H?[x,""]:[x.slice(0,H),x.slice(H+1)];if(ee.trim()===k)return decodeURIComponent(Ae)}return null}const ui=/\s+/,It=[];let Kt=(()=>{class T{constructor(x,H,ee,Ae){this._iterableDiffers=x,this._keyValueDiffers=H,this._ngEl=ee,this._renderer=Ae,this.initialClasses=It,this.stateMap=new Map}set klass(x){this.initialClasses=null!=x?x.trim().split(ui):It}set ngClass(x){this.rawClass="string"==typeof x?x.trim().split(ui):x}ngDoCheck(){for(const H of this.initialClasses)this._updateState(H,!0);const x=this.rawClass;if(Array.isArray(x)||x instanceof Set)for(const H of x)this._updateState(H,!0);else if(null!=x)for(const H of Object.keys(x))this._updateState(H,Boolean(x[H]));this._applyStateDiff()}_updateState(x,H){const ee=this.stateMap.get(x);void 0!==ee?(ee.enabled!==H&&(ee.changed=!0,ee.enabled=H),ee.touched=!0):this.stateMap.set(x,{enabled:H,changed:!0,touched:!0})}_applyStateDiff(){for(const x of this.stateMap){const H=x[0],ee=x[1];ee.changed?(this._toggleClass(H,ee.enabled),ee.changed=!1):ee.touched||(ee.enabled&&this._toggleClass(H,!1),this.stateMap.delete(H)),ee.touched=!1}}_toggleClass(x,H){(x=x.trim()).length>0&&x.split(ui).forEach(ee=>{H?this._renderer.addClass(this._ngEl.nativeElement,ee):this._renderer.removeClass(this._ngEl.nativeElement,ee)})}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),T})();class ar{constructor(k,x,H,ee){this.$implicit=k,this.ngForOf=x,this.index=H,this.count=ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zi=(()=>{class T{set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}constructor(x,H,ee){this._viewContainer=x,this._template=H,this._differs=ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const H=this._viewContainer;x.forEachOperation((ee,Ae,Ne)=>{if(null==ee.previousIndex)H.createEmbeddedView(this._template,new ar(ee.item,this._ngForOf,-1,-1),null===Ne?void 0:Ne);else if(null==Ne)H.remove(null===Ae?void 0:Ae);else if(null!==Ae){const Rt=H.get(Ae);H.move(Rt,Ne),Nn(Rt,ee)}});for(let ee=0,Ae=H.length;ee<Ae;ee++){const Rt=H.get(ee).context;Rt.index=ee,Rt.count=Ae,Rt.ngForOf=this._ngForOf}x.forEachIdentityChange(ee=>{Nn(H.get(ee.currentIndex),ee)})}static ngTemplateContextGuard(x,H){return!0}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function Nn(T,k){T.context.$implicit=k.item}let Mi=(()=>{class T{constructor(x,H){this._viewContainer=x,this._context=new on,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=H}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Zs("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Zs("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,H){return!0}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.s_b),I.Y36(I.Rgc))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class on{constructor(){this.$implicit=null,this.ngIf=null}}function Zs(T,k){if(k&&!k.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,I.AaK)(k)}'.`)}class Ts{constructor(k,x){this._viewContainerRef=k,this._templateRef=x,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(k){k&&!this._created?this.create():!k&&this._created&&this.destroy()}}let Wi=(()=>{class T{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(x){this._ngSwitch=x,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(x){this._defaultViews.push(x)}_matchCase(x){const H=x==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||H,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),H}_updateDefaultCases(x){if(this._defaultViews.length>0&&x!==this._defaultUsed){this._defaultUsed=x;for(const H of this._defaultViews)H.enforceState(x)}}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275dir=I.lG2({type:T,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),T})(),Ir=(()=>{class T{constructor(x,H,ee){this.ngSwitch=ee,ee._addCase(),this._view=new Ts(x,H)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(Wi,9))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),T})(),ur=(()=>{class T{constructor(x,H,ee){ee._addDefault(new Ts(x,H))}}return T.\u0275fac=function(x){return new(x||T)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(Wi,9))},T.\u0275dir=I.lG2({type:T,selectors:[["","ngSwitchDefault",""]],standalone:!0}),T})();let ii=(()=>{class T{transform(x){if(null==x)return null;if("string"!=typeof x)throw function gr(T,k){return new I.vHH(2100,!1)}();return x.toUpperCase()}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275pipe=I.Yjl({name:"uppercase",type:T,pure:!0,standalone:!0}),T})(),ls=(()=>{class T{}return T.\u0275fac=function(x){return new(x||T)},T.\u0275mod=I.oAB({type:T}),T.\u0275inj=I.cJS({}),T})();const mi="browser";function ds(T){return T===mi}function Aa(T){return"server"===T}let Qs=(()=>{class T{}return T.\u0275prov=(0,I.Yz7)({token:T,providedIn:"root",factory:()=>new oa((0,I.LFG)(fe),window)}),T})();class oa{constructor(k,x){this.document=k,this.window=x,this.offset=()=>[0,0]}setOffset(k){this.offset=Array.isArray(k)?()=>k:k}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(k){this.supportsScrolling()&&this.window.scrollTo(k[0],k[1])}scrollToAnchor(k){if(!this.supportsScrolling())return;const x=function wo(T,k){const x=T.getElementById(k)||T.getElementsByName(k)[0];if(x)return x;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const H=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let ee=H.currentNode;for(;ee;){const Ae=ee.shadowRoot;if(Ae){const Ne=Ae.getElementById(k)||Ae.querySelector(`[name="${k}"]`);if(Ne)return Ne}ee=H.nextNode()}}return null}(this.document,k);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(k){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=k)}}scrollToElement(k){const x=k.getBoundingClientRect(),H=x.left+this.window.pageXOffset,ee=x.top+this.window.pageYOffset,Ae=this.offset();this.window.scrollTo(H-Ae[0],ee-Ae[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const k=xs(this.window.history)||xs(Object.getPrototypeOf(this.window.history));return!(!k||!k.writable&&!k.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xs(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class At{}},4650:(yt,Se,V)=>{V.d(Se,{$8M:()=>xo,$WT:()=>zn,$Z:()=>v_,AFp:()=>Xy,ALo:()=>Du,AaK:()=>ye,AsE:()=>Ym,CHM:()=>Ra,CRH:()=>zd,CZH:()=>wf,CqO:()=>q_,D6c:()=>ID,DdM:()=>gf,EJc:()=>TE,EpF:()=>Mm,F$t:()=>Y_,F4k:()=>Om,FYo:()=>Ah,FiY:()=>Zr,Gf:()=>Uy,GfV:()=>ud,Gpc:()=>te,Gre:()=>Fp,Hsn:()=>Q_,JOm:()=>Yr,Jf7:()=>Ci,KtG:()=>Oa,LFG:()=>ut,LSH:()=>td,Lbi:()=>cg,Lck:()=>z0,MGl:()=>xd,MMx:()=>$d,NdJ:()=>Nm,O4$:()=>qo,OlP:()=>Pn,Oqu:()=>Op,P3R:()=>as,PXZ:()=>Zd,Q6J:()=>Hh,QGY:()=>Rm,Qsj:()=>Kf,R0b:()=>jo,RDi:()=>hc,Rgc:()=>_f,SBq:()=>Sh,Sil:()=>ME,Suo:()=>By,TTD:()=>Ys,TgZ:()=>Sd,Udp:()=>Zh,VKq:()=>q0,X6Q:()=>mg,XFs:()=>gt,Xpm:()=>rr,Xts:()=>wh,Y36:()=>gd,YKP:()=>kc,YNc:()=>z_,Yjl:()=>go,Yz7:()=>mt,Z0I:()=>ln,ZZ4:()=>vv,_Bn:()=>Zp,_UZ:()=>wl,_Vd:()=>od,_c5:()=>KE,_uU:()=>Km,aQg:()=>qE,c2e:()=>CE,cJS:()=>pn,cg1:()=>$p,dDg:()=>JD,dqk:()=>Pt,eFA:()=>LE,ekj:()=>Kh,eoX:()=>cD,f3M:()=>_t,g9A:()=>tv,h0i:()=>Al,hGG:()=>_v,hYB:()=>km,hij:()=>Jh,iGM:()=>tg,ifc:()=>Ke,ip1:()=>Jy,jDz:()=>Sy,kL8:()=>ay,kcU:()=>mn,lG2:()=>Ho,lcZ:()=>X0,lnq:()=>Qm,lqb:()=>vc,lri:()=>aD,n5z:()=>ic,oAB:()=>Ai,oxw:()=>Pm,q4F:()=>Jv,qLn:()=>cd,qOj:()=>Im,qZA:()=>El,rWj:()=>uD,sBO:()=>pD,s_b:()=>Gd,soG:()=>If,tb:()=>nv,tp0:()=>R,uIk:()=>pl,vHH:()=>Oe,vpe:()=>bu,wAp:()=>Qt,xp6:()=>u_,z2F:()=>jc,zSh:()=>sd,zs3:()=>wc});var I=V(7579),j=V(727),p=V(9751),ae=V(6451),ue=V(3099);function fe(r){for(let s in r)if(r[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function _e(r,s){for(const o in s)s.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=s[o])}function ye(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ye).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function we(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const re=fe({__forward_ref__:fe});function te(r){return r.__forward_ref__=te,r.toString=function(){return ye(this())},r}function ce(r){return Je(r)?r():r}function Je(r){return"function"==typeof r&&r.hasOwnProperty(re)&&r.__forward_ref__===te}function Ge(r){return r&&!!r.\u0275providers}const vt="https://g.co/ng/security#xss";class Oe extends Error{constructor(s,o){super(function We(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function ze(r){return"string"==typeof r?r:null==r?"":String(r)}function it(r,s){throw new Oe(-201,!1)}function lt(r,s){null==r&&function ht(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function mt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function pn(r){return{providers:r.providers||[],imports:r.imports||[]}}function Ln(r){return Kn(r,_r)||Kn(r,xn)}function ln(r){return null!==Ln(r)}function Kn(r,s){return r.hasOwnProperty(s)?r[s]:null}function Vn(r){return r&&(r.hasOwnProperty(fr)||r.hasOwnProperty(pr))?r[fr]:null}const _r=fe({\u0275prov:fe}),fr=fe({\u0275inj:fe}),xn=fe({ngInjectableDef:fe}),pr=fe({ngInjectorDef:fe});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let sr;function Jn(r){const s=sr;return sr=r,s}function tr(r,s,o){const u=Ln(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&gt.Optional?null:void 0!==s?s:void it(ye(r))}const Pt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mn={},$n="__NG_DI_FLAG__",Br="ngTempTokenPath",ti=/\n/gm,ni="__source";let qt;function Ut(r){const s=qt;return qt=r,s}function Un(r,s=gt.Default){if(void 0===qt)throw new Oe(-203,!1);return null===qt?tr(r,void 0,s):qt.get(r,s&gt.Optional?null:void 0,s)}function ut(r,s=gt.Default){return(function Er(){return sr}()||Un)(ce(r),s)}function _t(r,s=gt.Default){return ut(r,kt(s))}function kt(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function Ht(r){const s=[];for(let o=0;o<r.length;o++){const u=ce(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Oe(900,!1);let c,h=gt.Default;for(let y=0;y<u.length;y++){const D=u[y],S=se(D);"number"==typeof S?-1===S?c=D.token:h|=S:c=D}s.push(ut(c,h))}else s.push(ut(u))}return s}function an(r,s){return r[$n]=s,r.prototype[$n]=s,r}function se(r){return r[$n]}function Y(r){return{toString:r}.toString()}var G=(()=>((G=G||{})[G.OnPush=0]="OnPush",G[G.Default=1]="Default",G))(),Ke=(()=>{return(r=Ke||(Ke={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Ke;var r})();const St={},oe=[],ie=fe({\u0275cmp:fe}),q=fe({\u0275dir:fe}),ve=fe({\u0275pipe:fe}),Ze=fe({\u0275mod:fe}),st=fe({\u0275fac:fe}),Zt=fe({__NG_ELEMENT_ID__:fe});let nr=0;function rr(r){return Y(()=>{const o=!0===r.standalone,u={},c={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===G.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||oe,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Ke.Emulated,id:"c"+nr++,styles:r.styles||oe,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=r.dependencies,y=r.features;return c.inputs=qs(r.inputs,u),c.outputs=qs(r.outputs),y&&y.forEach(D=>D(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Gi).filter(wr):null,c.pipeDefs=h?()=>("function"==typeof h?h():h).map(or).filter(wr):null,c})}function Gi(r){return bn(r)||jn(r)}function wr(r){return null!==r}function Ai(r){return Y(()=>({type:r.type,bootstrap:r.bootstrap||oe,declarations:r.declarations||oe,imports:r.imports||oe,exports:r.exports||oe,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function qs(r,s){if(null==r)return St;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=u,s&&(s[c]=h)}return o}const Ho=rr;function go(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function bn(r){return r[ie]||null}function jn(r){return r[q]||null}function or(r){return r[ve]||null}function zn(r){const s=bn(r)||jn(r)||or(r);return null!==s&&s.standalone}function ri(r,s){const o=r[Ze]||null;if(!o&&!0===s)throw new Error(`Type ${ye(r)} does not have '\u0275mod' property.`);return o}function Oi(r){return Array.isArray(r)&&"object"==typeof r[1]}function ii(r){return Array.isArray(r)&&!0===r[1]}function cs(r){return 0!=(4&r.flags)}function Ca(r){return r.componentOffset>-1}function Ja(r){return 1==(1&r.flags)}function Hr(r){return null!==r.template}function Hc(r){return 0!=(256&r[2])}function hs(r,s){return r.hasOwnProperty(st)?r[st]:null}class As{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ys(){return Qs}function Qs(r){return r.type.prototype.ngOnChanges&&(r.setInput=xs),oa}function oa(){const r=Gr(this),s=r?.current;if(s){const o=r.previous;if(o===St)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function xs(r,s,o,u){const c=this.declaredInputs[o],h=Gr(r)||function At(r,s){return r[wo]=s}(r,{previous:St,current:null}),y=h.current||(h.current={}),D=h.previous,S=D[c];y[c]=new As(S&&S.currentValue,s,D===St),r[u]=s}Ys.ngInherit=!0;const wo="__ngSimpleChanges__";function Gr(r){return r[wo]||null}function cr(r){for(;Array.isArray(r);)r=r[0];return r}function Js(r,s){return cr(s[r])}function zr(r,s){return cr(s[r.index])}function mr(r,s){return r.data[s]}function gn(r,s){const o=s[r];return Oi(o)?o:o[0]}function Dr(r){return 64==(64&r[2])}function Or(r,s){return null==s?null:r[s]}function aa(r){r[18]=0}function er(r,s){r[5]+=s;let o=r,u=r[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const Jt={lFrame:Su(null),bindingsEnabled:!0};function ua(){return Jt.bindingsEnabled}function Re(){return Jt.lFrame.lView}function dn(){return Jt.lFrame.tView}function Ra(r){return Jt.lFrame.contextLView=r,r[8]}function Oa(r){return Jt.lFrame.contextLView=null,r}function Cr(){let r=ca();for(;null!==r&&64===r.type;)r=r.parent;return r}function ca(){return Jt.lFrame.currentTNode}function Li(r,s){const o=Jt.lFrame;o.currentTNode=r,o.isParent=s}function Rs(){return Jt.lFrame.isParent}function Io(){Jt.lFrame.isParent=!1}function Nr(){const r=Jt.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function si(){return Jt.lFrame.bindingIndex}function ms(){return Jt.lFrame.bindingIndex++}function Vi(r){const s=Jt.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,o}function Co(r,s){const o=Jt.lFrame;o.bindingIndex=o.bindingRootIndex=r,ys(s)}function ys(r){Jt.lFrame.currentDirectiveIndex=r}function Na(){return Jt.lFrame.currentQueryIndex}function Ps(r){Jt.lFrame.currentQueryIndex=r}function no(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function Pa(r,s,o){if(o&gt.SkipSelf){let c=s,h=r;for(;!(c=c.parent,null!==c||o&gt.Host||(c=no(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,r=h}const u=Jt.lFrame=ru();return u.currentTNode=s,u.lView=r,!0}function To(r){const s=ru(),o=r[1];Jt.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function ru(){const r=Jt.lFrame,s=null===r?null:r.child;return null===s?Su(r):s}function Su(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function da(){const r=Jt.lFrame;return Jt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const ka=da;function iu(){const r=da();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Wr(){return Jt.lFrame.selectedIndex}function vi(r){Jt.lFrame.selectedIndex=r}function Tn(){const r=Jt.lFrame;return mr(r.tView,r.selectedIndex)}function qo(){Jt.lFrame.currentNamespace="svg"}function mn(){!function Pr(){Jt.lFrame.currentNamespace=null}()}function Ko(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:D,ngAfterViewInit:S,ngAfterViewChecked:N,ngOnDestroy:$}=h;y&&(r.contentHooks||(r.contentHooks=[])).push(-o,y),D&&((r.contentHooks||(r.contentHooks=[])).push(o,D),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,D)),S&&(r.viewHooks||(r.viewHooks=[])).push(-o,S),N&&((r.viewHooks||(r.viewHooks=[])).push(o,N),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,N)),null!=$&&(r.destroyHooks||(r.destroyHooks=[])).push(o,$)}}function Yo(r,s,o){x(r,s,3,o)}function T(r,s,o,u){(3&r[2])===o&&x(r,s,o,u)}function k(r,s){let o=r[2];(3&o)===s&&(o&=2047,o+=1,r[2]=o)}function x(r,s,o,u){const h=u??-1,y=s.length-1;let D=0;for(let S=void 0!==u?65535&r[18]:0;S<y;S++)if("number"==typeof s[S+1]){if(D=s[S],null!=u&&D>=u)break}else s[S]<0&&(r[18]+=65536),(D<h||-1==h)&&(H(r,o,s,S),r[18]=(4294901760&r[18])+S+2),S++}function H(r,s,o,u){const c=o[u]<0,h=o[u+1],D=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{h.call(D)}finally{}}}else try{h.call(D)}finally{}}class Ae{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Yn(r,s,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const h=o[u++],y=o[u++],D=o[u++];r.setAttribute(s,y,D,h)}else{const h=c,y=o[++u];Ei(h)?r.setProperty(s,h,y):r.setAttribute(s,h,y),u++}}return u}function _i(r){return 3===r||4===r||6===r}function Ei(r){return 64===r.charCodeAt(0)}function qr(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?o=c:0===o||wi(r,o,c,null,-1===o||2===o?s[++u]:null)}}return r}function wi(r,s,o,u,c){let h=0,y=r.length;if(-1===s)y=-1;else for(;h<r.length;){const D=r[h++];if("number"==typeof D){if(D===s){y=-1;break}if(D>s){y=h-1;break}}}for(;h<r.length;){const D=r[h];if("number"==typeof D)break;if(D===o){if(null===u)return void(null!==c&&(r[h+1]=c));if(u===r[h+1])return void(r[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==y&&(r.splice(y,0,s),h=y+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==c&&r.splice(h++,0,c)}function io(r){return-1!==r}function so(r){return 32767&r}function ss(r,s){let o=function is(r){return r>>16}(r),u=s;for(;o>0;)u=u[15],o--;return u}let So=!0;function Ui(r){const s=So;return So=r,s}let Jo=0;const li={};function oo(r,s){const o=ha(r,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(r.injectorIndex=s.length,Fs(u.data,r),Fs(s,null),Fs(u.blueprint,null));const c=Ua(r,s),h=r.injectorIndex;if(io(c)){const y=so(c),D=ss(c,s),S=D[1].data;for(let N=0;N<8;N++)s[h+N]=D[y+N]|S[y+N]}return s[h+8]=c,h}function Fs(r,s){r.push(0,0,0,0,0,0,0,0,s)}function ha(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function Ua(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=s;for(;null!==c;){if(u=au(c),null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Xo(r,s,o){!function Ii(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Zt)&&(u=o[Zt]),null==u&&(u=o[Zt]=Jo++);const c=255&u;s.data[r+(c>>5)]|=1<<c}(r,s,o)}function Au(r,s,o){if(o&gt.Optional||void 0!==r)return r;it()}function ao(r,s,o,u){if(o&gt.Optional&&void 0===u&&(u=null),!(o&(gt.Self|gt.Host))){const c=r[9],h=Jn(void 0);try{return c?c.get(s,u,o&gt.Optional):tr(s,u,o&gt.Optional)}finally{Jn(h)}}return Au(u,0,o)}function su(r,s,o,u=gt.Default,c){if(null!==r){if(1024&s[2]){const y=function Gc(r,s,o,u,c){let h=r,y=s;for(;null!==h&&null!==y&&1024&y[2]&&!(256&y[2]);){const D=Bi(h,y,o,u|gt.Self,li);if(D!==li)return D;let S=h.parent;if(!S){const N=y[21];if(N){const $=N.get(o,li,u);if($!==li)return $}S=au(y),y=y[15]}h=S}return c}(r,s,o,u,li);if(y!==li)return y}const h=Bi(r,s,o,u,li);if(h!==li)return h}return ao(s,o,u,c)}function Bi(r,s,o,u,c){const h=function xu(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Zt)?r[Zt]:void 0;return"number"==typeof s?s>=0?255&s:Mu:s}(o);if("function"==typeof h){if(!Pa(s,r,u))return u&gt.Host?Au(c,0,u):ao(s,o,u,c);try{const y=h(u);if(null!=y||u&gt.Optional)return y;it()}finally{ka()}}else if("number"==typeof h){let y=null,D=ha(r,s),S=-1,N=u&gt.Host?s[16][6]:null;for((-1===D||u&gt.SkipSelf)&&(S=-1===D?Ua(r,s):s[D+8],-1!==S&&di(u,!1)?(y=s[1],D=so(S),s=ss(S,s)):D=-1);-1!==D;){const $=s[1];if(fa(h,D,$.data)){const Z=ou(D,s,o,y,u,N);if(Z!==li)return Z}S=s[D+8],-1!==S&&di(u,s[1].data[D+8]===N)&&fa(h,D,s)?(y=$,D=so(S),s=ss(S,s)):D=-1}}return c}function ou(r,s,o,u,c,h){const y=s[1],D=y.data[r+8],$=uo(D,y,o,null==u?Ca(D)&&So:u!=y&&0!=(3&D.type),c&gt.Host&&h===D);return null!==$?Hn(s,y,$,D):li}function uo(r,s,o,u,c){const h=r.providerIndexes,y=s.data,D=1048575&h,S=r.directiveStart,$=h>>20,de=c?D+$:r.directiveEnd;for(let Ie=u?D:D+$;Ie<de;Ie++){const qe=y[Ie];if(Ie<S&&o===qe||Ie>=S&&qe.type===o)return Ie}if(c){const Ie=y[S];if(Ie&&Hr(Ie)&&Ie.type===o)return S}return null}function Hn(r,s,o,u){let c=r[o];const h=s.data;if(function Ne(r){return r instanceof Ae}(c)){const y=c;y.resolving&&function ke(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${r}${o}`)}(function Qe(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():ze(r)}(h[o]));const D=Ui(y.canSeeViewProviders);y.resolving=!0;const S=y.injectImpl?Jn(y.injectImpl):null;Pa(r,u,gt.Default);try{c=r[o]=y.factory(void 0,h,r,u),s.firstCreatePass&&o>=u.directiveStart&&function Zo(r,s,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(u){const y=Qs(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,y)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],s)}finally{null!==S&&Jn(S),Ui(D),y.resolving=!1,ka()}}return c}function fa(r,s,o){return!!(o[s+(r>>5)]&1<<r)}function di(r,s){return!(r&gt.Self||r&gt.Host&&s)}class vs{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return su(this._tNode,this._lView,s,kt(u),o)}}function Mu(){return new vs(Cr(),Re())}function ic(r){return Y(()=>{const s=r.prototype.constructor,o=s[st]||ja(s),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const h=c[st]||ja(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function ja(r){return Je(r)?()=>{const s=ja(ce(r));return s&&s()}:hs(r)}function au(r){const s=r[1],o=s.type;return 2===o?s.declTNode:1===o?r[6]:null}function xo(r){return function Ba(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const h=o[c];if(_i(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(h===s)return o[c+1];c+=2}}}return null}(Cr(),r)}const ea="__parameters__";function $a(r,s,o){return Y(()=>{const u=function pa(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(s);function c(...h){if(this instanceof c)return u.apply(this,h),this;const y=new c(...h);return D.annotation=y,D;function D(S,N,$){const Z=S.hasOwnProperty(ea)?S[ea]:Object.defineProperty(S,ea,{value:[]})[ea];for(;Z.length<=$;)Z.push(null);return(Z[$]=Z[$]||[]).push(y),S}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Pn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=mt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vs(r,s){r.forEach(o=>Array.isArray(o)?Vs(o,s):s(o))}function Oo(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function Qi(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function Us(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}function v(r,s,o){let u=m(r,s);return u>=0?r[1|u]=o:(u=~u,function Wa(r,s,o,u){let c=r.length;if(c==s)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>s;)r[c]=r[c-2],c--;r[s]=o,r[s+1]=u}}(r,u,s,o)),u}function _(r,s){const o=m(r,s);if(o>=0)return r[1|o]}function m(r,s){return function O(r,s,o){let u=0,c=r.length>>o;for(;c!==u;){const h=u+(c-u>>1),y=r[h<<o];if(s===y)return h<<o;y>s?c=h:u=h+1}return~(c<<o)}(r,s,1)}const Zr=an($a("Optional"),8),R=an($a("SkipSelf"),4);var Yr=(()=>((Yr=Yr||{})[Yr.Important=1]="Important",Yr[Yr.DashCase=2]="DashCase",Yr))();const oh=new Map;let Zc=0;const lu="__ngContext__";function kr(r,s){Oi(s)?(r[lu]=s[20],function Ff(r){oh.set(r[20],r)}(s)):r[lu]=s}function Be(r,s){return undefined(r,s)}function $t(r){const s=r[3];return ii(s)?s[3]:s}function No(r){return dc(r[13])}function ya(r){return dc(r[4])}function dc(r){for(;null!==r&&!ii(r);)r=r[4];return r}function Vu(r,s,o,u,c){if(null!=u){let h,y=!1;ii(u)?h=u:Oi(u)&&(y=!0,u=u[0]);const D=cr(u);0===r&&null!==o?null==c?Zl(s,o,D):Jc(s,o,D,c||null,!0):1===r&&null!==o?Jc(s,o,D,c||null,!0):2===r?function Ng(r,s,o){const u=Kl(r,s);u&&function Ov(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,D,y):3===r&&s.destroyNode(D),null!=h&&function JE(r,s,o,u,c){const h=o[7];h!==cr(o)&&Vu(s,r,u,h,c);for(let D=10;D<o.length;D++){const S=o[D];Ql(S[1],S,r,s,u,h)}}(s,r,h,o,c)}}function rn(r,s,o){return r.createElement(s,o)}function Vf(r,s){const o=r[9],u=o.indexOf(s),c=s[3];512&s[2]&&(s[2]&=-513,er(c,-1)),o.splice(u,1)}function Qr(r,s){if(r.length<=10)return;const o=10+s,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&Vf(c,u),s>0&&(r[o-1][4]=u[4]);const h=Qi(r,10+s);!function Uu(r,s){Ql(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const y=h[19];null!==y&&y.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Et(r,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&Ql(r,s,o,3,null,null),function Gt(r){let s=r[13];if(!s)return ql(r[1],r);for(;s;){let o=null;if(Oi(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==r;)Oi(s)&&ql(s[1],s),s=s[3];null===s&&(s=r),Oi(s)&&ql(s[1],s),o=s&&s[4]}s=o}}(s)}}function ql(r,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Qc(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=s[o[u]];if(!(c instanceof Ae)){const h=o[u+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const D=c[h[y]],S=h[y+1];try{S.call(D)}finally{}}else try{h.call(c)}finally{}}}}(r,s),function Mg(r,s){const o=r.cleanup,u=s[7];let c=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const y=o[h+3];y>=0?u[c=y]():u[c=-y].unsubscribe(),h+=2}else{const y=u[c=o[h+1]];o[h].call(y)}if(null!==u){for(let h=c+1;h<u.length;h++)(0,u[h])();s[7]=null}}(r,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&ii(s[3])){o!==s[3]&&Vf(o,s);const u=s[19];null!==u&&u.detachView(r)}!function uh(r){oh.delete(r[20])}(s)}}function Rv(r,s,o){return function hh(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];{const{componentOffset:c}=u;if(c>-1){const{encapsulation:h}=r.data[u.directiveStart+c];if(h===Ke.None||h===Ke.Emulated)return null}return zr(u,o)}}(r,s.parent,o)}function Jc(r,s,o,u,c){r.insertBefore(s,o,u,c)}function Zl(r,s,o){r.appendChild(s,o)}function Rg(r,s,o,u,c){null!==u?Jc(r,s,o,u,c):Zl(r,s,o)}function Kl(r,s){return r.parentNode(s)}function Og(r,s,o){return Uf(r,s,o)}let Fg,fu,Uf=function Bu(r,s,o){return 40&r.type?zr(r,o):null};function Po(r,s,o,u){const c=Rv(r,u,s),h=s[11],D=Og(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(o))for(let S=0;S<o.length;S++)Rg(h,c,o[S],D,!1);else Rg(h,c,o,D,!1)}function Bf(r,s){if(null!==s){const o=s.type;if(3&o)return zr(s,r);if(4&o)return du(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return Bf(r,u);{const c=r[s.index];return ii(c)?du(-1,c):cr(c)}}if(32&o)return Be(s,r)()||cr(r[s.index]);{const u=Yl(r,s);return null!==u?Array.isArray(u)?u[0]:Bf($t(r[16]),u):Bf(r,s.next)}}return null}function Yl(r,s){return null!==s?r[16][6].projection[s.projection]:null}function du(r,s){const o=10+r+1;if(o<s.length){const u=s[o],c=u[1].firstChild;if(null!==c)return Bf(u,c)}return s[7]}function ju(r,s,o,u,c,h,y){for(;null!=o;){const D=u[o.index],S=o.type;if(y&&0===s&&(D&&kr(cr(D),u),o.flags|=2),32!=(32&o.flags))if(8&S)ju(r,s,o.child,u,c,h,!1),Vu(s,r,c,D,h);else if(32&S){const N=Be(o,u);let $;for(;$=N();)Vu(s,r,c,$,h);Vu(s,r,c,D,h)}else 16&S?Pv(r,s,u,o,c,h):Vu(s,r,c,D,h);o=y?o.projectionNext:o.next}}function Ql(r,s,o,u,c,h){ju(o,u,r.firstChild,s,c,h,!1)}function Pv(r,s,o,u,c,h){const y=o[16],S=y[6].projection[u.projection];if(Array.isArray(S))for(let N=0;N<S.length;N++)Vu(s,r,c,S[N],h);else ju(r,s,S,y[3],c,h,!0)}function $u(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function kg(r,s,o){const{mergedAttrs:u,classes:c,styles:h}=o;null!==u&&Yn(r,s,u),null!==c&&$u(r,s,c),null!==h&&function XE(r,s,o){r.setAttribute(s,"style",o)}(r,s,h)}function hc(r){Fg=r}function Hu(r){return function gh(){if(void 0===fu&&(fu=null,Pt.trustedTypes))try{fu=Pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return fu}()?.createScriptURL(r)||r}class mh{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vt})`}}function na(r){return r instanceof mh?r.changingThisBreaksApplicationSecurity:r}function el(r,s){const o=function tl(r){return r instanceof mh&&r.getTypeName()||null}(r);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see ${vt})`)}return o===s}const Uv=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function td(r){const s=Eh();return s?s.sanitize(Fr.URL,r)||"":el(r,"URL")?na(r):function Hf(r){return(r=String(r)).match(Uv)?r:"unsafe:"+r}(ze(r))}function os(r){const s=Eh();if(s)return Hu(s.sanitize(Fr.RESOURCE_URL,r)||"");if(el(r,"ResourceURL"))return Hu(na(r));throw new Oe(904,!1)}function as(r,s,o){return function ko(r,s){return"src"===s&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===s&&("base"===r||"link"===r)?os:td}(s,o)(r)}function Eh(){const r=Re();return r&&r[12]}const wh=new Pn("ENVIRONMENT_INITIALIZER"),pc=new Pn("INJECTOR",-1),rd=new Pn("INJECTOR_DEF_TYPES");class Ih{get(s,o=Mn){if(o===Mn){const u=new Error(`NullInjectorError: No provider for ${ye(s)}!`);throw u.name="NullInjectorError",u}return o}}function zv(...r){return{\u0275providers:zg(0,r),\u0275fromNgModule:!0}}function zg(r,...s){const o=[],u=new Set;let c;return Vs(s,h=>{const y=h;Wf(y,o,[],u)&&(c||(c=[]),c.push(y))}),void 0!==c&&gu(c,o),o}function gu(r,s){for(let o=0;o<r.length;o++){const{providers:c}=r[o];qf(c,h=>{s.push(h)})}}function Wf(r,s,o,u){if(!(r=ce(r)))return!1;let c=null,h=Vn(r);const y=!h&&bn(r);if(h||y){if(y&&!y.standalone)return!1;c=r}else{const S=r.ngModule;if(h=Vn(S),!h)return!1;c=S}const D=u.has(c);if(y){if(D)return!1;if(u.add(c),y.dependencies){const S="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const N of S)Wf(N,s,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!D){let N;u.add(c);try{Vs(h.imports,$=>{Wf($,s,o,u)&&(N||(N=[]),N.push($))})}finally{}void 0!==N&&gu(N,s)}if(!D){const N=hs(c)||(()=>new c);s.push({provide:c,useFactory:N,deps:oe},{provide:rd,useValue:c,multi:!0},{provide:wh,useValue:()=>ut(c),multi:!0})}const S=h.providers;null==S||D||qf(S,$=>{s.push($)})}}return c!==r&&void 0!==r.providers}function qf(r,s){for(let o of r)Ge(o)&&(o=o.\u0275providers),Array.isArray(o)?qf(o,s):s(o)}const Wg=fe({provide:String,useValue:fe});function id(r){return null!==r&&"object"==typeof r&&Wg in r}function bi(r){return"function"==typeof r}const sd=new Pn("Set Injector scope."),mc={},Wv={};let bh;function yc(){return void 0===bh&&(bh=new Ih),bh}class vc{}class Zg extends vc{get destroyed(){return this._destroyed}constructor(s,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_c(s,y=>this.processProvider(y)),this.records.set(pc,Gu(void 0,this)),c.has("environment")&&this.records.set(vc,Gu(void 0,this));const h=this.records.get(sd);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(rd.multi,oe,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=Ut(this),u=Jn(void 0);try{return s()}finally{Ut(o),Jn(u)}}get(s,o=Mn,u=gt.Default){this.assertNotDestroyed(),u=kt(u);const c=Ut(this),h=Jn(void 0);try{if(!(u&gt.SkipSelf)){let D=this.records.get(s);if(void 0===D){const S=function Kv(r){return"function"==typeof r||"object"==typeof r&&r instanceof Pn}(s)&&Ln(s);D=S&&this.injectableDefInScope(S)?Gu(Kg(s),mc):null,this.records.set(s,D)}if(null!=D)return this.hydrate(s,D)}return(u&gt.Self?yc():this.parent).get(s,o=u&gt.Optional&&o===Mn?null:o)}catch(y){if("NullInjectorError"===y.name){if((y[Br]=y[Br]||[]).unshift(ye(s)),c)throw y;return function X(r,s,o,u){const c=r[Br];throw s[ni]&&c.unshift(s[ni]),r.message=function le(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let c=ye(s);if(Array.isArray(s))c=s.map(ye).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let D=s[y];h.push(y+":"+("string"==typeof D?JSON.stringify(D):ye(D)))}c=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(ti,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Br]=null,r}(y,s,"R3InjectorError",this.source)}throw y}finally{Jn(h),Ut(c)}}resolveInjectorInitializers(){const s=Ut(this),o=Jn(void 0);try{const u=this.get(wh.multi,oe,gt.Self);for(const c of u)c()}finally{Ut(s),Jn(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(ye(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processProvider(s){let o=bi(s=ce(s))?s:ce(s&&s.provide);const u=function Zv(r){return id(r)?Gu(void 0,r.useValue):Gu(Yg(r),mc)}(s);if(bi(s)||!0!==s.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=Gu(void 0,mc,!0),c.factory=()=>Ht(c.multi),this.records.set(o,c)),o=s,c.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===mc&&(o.value=Wv,o.value=o.factory()),"object"==typeof o.value&&o.value&&function hw(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=ce(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Kg(r){const s=Ln(r),o=null!==s?s.factory:hs(r);if(null!==o)return o;if(r instanceof Pn)throw new Oe(204,!1);if(r instanceof Function)return function qv(r){const s=r.length;if(s>0)throw Us(s,"?"),new Oe(204,!1);const o=function Dn(r){const s=r&&(r[_r]||r[xn]);if(s){const o=function Lt(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Oe(204,!1)}function Yg(r,s,o){let u;if(bi(r)){const c=ce(r);return hs(c)||Kg(c)}if(id(r))u=()=>ce(r.useValue);else if(function gc(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Ht(r.deps||[]));else if(function Zf(r){return!(!r||!r.useExisting)}(r))u=()=>ut(ce(r.useExisting));else{const c=ce(r&&(r.useClass||r.provide));if(!function dw(r){return!!r.deps}(r))return hs(c)||Kg(c);u=()=>new c(...Ht(r.deps))}return u}function Gu(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function _c(r,s){for(const o of r)Array.isArray(o)?_c(o,s):o&&Ge(o)?_c(o.\u0275providers,s):s(o)}class nl{}class Qg{}class Yv{resolveComponentFactory(s){throw function rl(r){const s=Error(`No component factory found for ${ye(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let od=(()=>{class r{}return r.NULL=new Yv,r})();function Th(){return ad(Cr(),Re())}function ad(r,s){return new Sh(zr(r,s))}let Sh=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=Th,r})();function Xr(r){return r instanceof Sh?r.nativeElement:r}class Ah{}let Kf=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function Qv(){const r=Re(),o=gn(Cr().index,r);return(Oi(o)?o:r)[11]}(),r})(),fw=(()=>{class r{}return r.\u0275prov=mt({token:r,providedIn:"root",factory:()=>null}),r})();class ud{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Jv=new ud("15.1.4"),Yf={};function Qf(r){return r.ngOriginalError}class cd{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&Qf(s);for(;o&&Qf(o);)o=Qf(o);return o||null}}function Ci(r){return r.ownerDocument.defaultView}function $s(r){return r instanceof Function?r():r}function tm(r,s,o){let u=r.length;for(;;){const c=r.indexOf(s,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const h=s.length;if(c+h===u||r.charCodeAt(c+h)<=32)return c}o=c+1}}const dd="ng-template";function yw(r,s,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==tm(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function t_(r){return 4===r.type&&r.value!==dd}function vn(r,s,o){return s===(4!==r.type||o?r.value:dd)}function vw(r,s,o){let u=4;const c=r.attrs||[],h=function n_(r){for(let s=0;s<r.length;s++)if(_i(r[s]))return s;return r.length}(c);let y=!1;for(let D=0;D<s.length;D++){const S=s[D];if("number"!=typeof S){if(!y)if(4&u){if(u=2|1&u,""!==S&&!vn(r,S,o)||""===S&&1===s.length){if(Lo(u))return!1;y=!0}}else{const N=8&u?S:s[++D];if(8&u&&null!==r.attrs){if(!yw(r.attrs,N,o)){if(Lo(u))return!1;y=!0}continue}const Z=xh(8&u?"class":S,c,t_(r),o);if(-1===Z){if(Lo(u))return!1;y=!0;continue}if(""!==N){let de;de=Z>h?"":c[Z+1].toLowerCase();const Ie=8&u?de:null;if(Ie&&-1!==tm(Ie,N,0)||2&u&&N!==de){if(Lo(u))return!1;y=!0}}}}else{if(!y&&!Lo(u)&&!Lo(S))return!1;if(y&&Lo(S))continue;y=!1,u=S|1&u}}return Lo(u)||y}function Lo(r){return 0==(1&r)}function xh(r,s,o,u){if(null===s)return-1;let c=0;if(u||!o){let h=!1;for(;c<s.length;){const y=s[c];if(y===r)return c;if(3===y||6===y)h=!0;else{if(1===y||2===y){let D=s[++c];for(;"string"==typeof D;)D=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=h?1:2}return-1}return function r_(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function hd(r,s,o=!1){for(let u=0;u<s.length;u++)if(vw(r,s[u],o))return!0;return!1}function i_(r,s){e:for(let o=0;o<s.length;o++){const u=s[o];if(r.length===u.length){for(let c=0;c<r.length;c++)if(r[c]!==u[c])continue e;return!0}}return!1}function s_(r,s){return r?":not("+s.trim()+")":s}function o_(r){let s=r[0],o=1,u=2,c="",h=!1;for(;o<r.length;){let y=r[o];if("string"==typeof y)if(2&u){const D=r[++o];c+="["+y+(D.length>0?'="'+D+'"':"")+"]"}else 8&u?c+="."+y:4&u&&(c+=" "+y);else""!==c&&!Lo(y)&&(s+=s_(h,c),c=""),u=y,h=h||!Lo(u);o++}return""!==c&&(s+=s_(h,c)),s}const hn={};function u_(r){c_(dn(),Re(),Wr()+r,!1)}function c_(r,s,o,u){if(!u)if(3==(3&s[2])){const h=r.preOrderCheckHooks;null!==h&&Yo(s,h,o)}else{const h=r.preOrderHooks;null!==h&&T(s,h,0,o)}vi(o)}function im(r,s=null,o=null,u){const c=fd(r,s,o,u);return c.resolveInjectorInitializers(),c}function fd(r,s=null,o=null,u,c=new Set){const h=[o||oe,zv(r)];return u=u||("object"==typeof r?void 0:ye(r)),new Zg(h,s||yc(),u||null,c)}let wc=(()=>{class r{static create(o,u){if(Array.isArray(o))return im({name:""},u,o,"");{const c=o.name??"";return im({name:c},o.parent,o.providers,c)}}}return r.THROW_IF_NOT_FOUND=Mn,r.NULL=new Ih,r.\u0275prov=mt({token:r,providedIn:"any",factory:()=>ut(pc)}),r.__NG_ELEMENT_ID__=-1,r})();function gd(r,s=gt.Default){const o=Re();return null===o?ut(r,s):su(Cr(),o,ce(r),s)}function v_(){throw new Error("invalid")}function __(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const h=o[u+1];if(-1!==h){const y=r.data[h];Ps(o[u]),y.contentQueries(2,s[h],h)}}}function sp(r,s,o,u,c,h,y,D,S,N,$){const Z=s.blueprint.slice();return Z[0]=c,Z[2]=76|u,(null!==$||r&&1024&r[2])&&(Z[2]|=1024),aa(Z),Z[3]=Z[15]=r,Z[8]=o,Z[10]=y||r&&r[10],Z[11]=D||r&&r[11],Z[12]=S||r&&r[12]||null,Z[9]=N||r&&r[9]||null,Z[6]=h,Z[20]=function xg(){return Zc++}(),Z[21]=$,Z[16]=2==s.type?r[16]:Z,Z}function md(r,s,o,u,c){let h=r.data[s];if(null===h)h=function cm(r,s,o,u,c){const h=ca(),y=Rs(),S=r.data[s]=function Ic(r,s,o,u,c,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,o,s,u,c);return null===r.firstChild&&(r.firstChild=S),null!==h&&(y?null==h.child&&null!==S.parent&&(h.child=S):null===h.next&&(h.next=S)),S}(r,s,o,u,c),function nu(){return Jt.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=o,h.value=u,h.attrs=c;const y=function gs(){const r=Jt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return Li(h,!0),h}function Oh(r,s,o,u){if(0===o)return-1;const c=s.length;for(let h=0;h<o;h++)s.push(u),r.blueprint.push(u),r.data.push(null);return c}function lm(r,s,o){To(s);try{const u=r.viewQuery;null!==u&&_d(1,u,o);const c=r.template;null!==c&&E_(r,s,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&__(r,s),r.staticViewQueries&&_d(2,r.viewQuery,o);const h=r.components;null!==h&&function Mw(r,s){for(let o=0;o<s.length;o++)vm(r,s[o])}(s,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[2]&=-5,iu()}}function Nh(r,s,o,u){const c=s[2];if(128!=(128&c)){To(s);try{aa(s),function rs(r){return Jt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&E_(r,s,o,2,u);const y=3==(3&c);if(y){const N=r.preOrderCheckHooks;null!==N&&Yo(s,N,null)}else{const N=r.preOrderHooks;null!==N&&T(s,N,0,null),k(s,0)}if(function Nw(r){for(let s=No(r);null!==s;s=ya(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const c=o[u];512&c[2]||er(c[3],1),c[2]|=512}}}(s),function x_(r){for(let s=No(r);null!==s;s=ya(s))for(let o=10;o<s.length;o++){const u=s[o],c=u[1];Dr(u)&&Nh(c,u,c.template,u[8])}}(s),null!==r.contentQueries&&__(r,s),y){const N=r.contentCheckHooks;null!==N&&Yo(s,N)}else{const N=r.contentHooks;null!==N&&T(s,N,1),k(s,1)}!function Aw(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)vi(~c);else{const h=c,y=o[++u],D=o[++u];Co(y,h),D(2,s[h])}}}finally{vi(-1)}}(r,s);const D=r.components;null!==D&&function xw(r,s){for(let o=0;o<s.length;o++)M_(r,s[o])}(s,D);const S=r.viewQuery;if(null!==S&&_d(2,S,u),y){const N=r.viewCheckHooks;null!==N&&Yo(s,N)}else{const N=r.viewHooks;null!==N&&T(s,N,2),k(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,er(s[3],-1))}finally{iu()}}}function E_(r,s,o,u,c){const h=Wr(),y=2&u;try{vi(-1),y&&s.length>22&&c_(r,s,22,!1),o(u,c)}finally{vi(h)}}function op(r,s,o){if(cs(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const y=r.data[h];y.contentQueries&&y.contentQueries(1,o[h],h)}}}function ap(r,s,o){ua()&&(function b_(r,s,o,u){const c=o.directiveStart,h=o.directiveEnd;Ca(o)&&function Ow(r,s,o){const u=zr(s,r),c=up(o),h=r[10],y=Fh(r,sp(r,c,null,o.onPush?32:16,u,s,h,h.createRenderer(u,o),null,null,null));r[s.index]=y}(s,o,r.data[c+o.componentOffset]),r.firstCreatePass||oo(o,s),kr(u,s);const y=o.initialInputs;for(let D=c;D<h;D++){const S=r.data[D],N=Hn(s,r,D,o);kr(N,s),null!==y&&kh(0,D-c,N,S,0,y),Hr(S)&&(gn(o.index,s)[8]=Hn(s,r,D,o))}}(r,s,o,zr(o,s)),64==(64&o.flags)&&C_(r,s,o))}function dm(r,s,o=zr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let h=0;h<u.length;h+=2){const y=u[h+1],D=-1===y?o(s,r):r[y];r[c++]=D}}}function up(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=Hi(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function Hi(r,s,o,u,c,h,y,D,S,N){const $=22+u,Z=$+c,de=function hm(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:hn);return o}($,Z),Ie="function"==typeof N?N():N;return de[1]={type:r,blueprint:de,template:o,queries:null,viewQuery:D,declTNode:s,data:de.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:S,consts:Ie,incompleteFirstPass:!1}}function cp(r,s,o,u){const c=pp(s);null===o?c.push(u):(c.push(o),r.firstCreatePass&&Vh(r).push(u,c.length-1))}function pm(r,s,o,u){for(let c in r)if(r.hasOwnProperty(c)){o=null===o?{}:o;const h=r[c];null===u?w_(o,s,c,h):u.hasOwnProperty(c)&&w_(o,s,u[c],h)}return o}function w_(r,s,o,u){r.hasOwnProperty(o)?r[o].push(s,u):r[o]=[s,u]}function es(r,s,o,u,c,h,y,D){const S=zr(s,o);let $,N=s.inputs;!D&&null!=N&&($=N[u])?(dl(r,o,$,u,c),Ca(s)&&Dc(o,s.index)):3&s.type&&(u=function lp(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=y?y(c,s.value||"",u):c,h.setProperty(S,u,c))}function Dc(r,s){const o=gn(s,r);16&o[2]||(o[2]|=32)}function hp(r,s,o,u){let c=!1;if(ua()){const h=null===u?null:{"":-1},y=function S_(r,s){const o=r.directiveRegistry;let u=null,c=null;if(o)for(let h=0;h<o.length;h++){const y=o[h];if(hd(s,y.selectors,!1))if(u||(u=[]),Hr(y))if(null!==y.findHostDirectiveDefs){const D=[];c=c||new Map,y.findHostDirectiveDefs(y,D,c),u.unshift(...D,y),yd(r,s,D.length)}else u.unshift(y),yd(r,s,0);else c=c||new Map,y.findHostDirectiveDefs?.(y,u,c),u.push(y)}return null===u?null:[u,c]}(r,o);let D,S;null===y?D=S=null:[D,S]=y,null!==D&&(c=!0,fp(r,s,o,D,h,S)),h&&function Ph(r,s,o){if(s){const u=r.localNames=[];for(let c=0;c<s.length;c+=2){const h=o[s[c+1]];if(null==h)throw new Oe(-301,!1);u.push(s[c],h)}}}(o,u,h)}return o.mergedAttrs=qr(o.mergedAttrs,o.attrs),c}function fp(r,s,o,u,c,h){for(let N=0;N<u.length;N++)Xo(oo(o,s),r,u[N].type);!function Rw(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}(o,r.data.length,u.length);for(let N=0;N<u.length;N++){const $=u[N];$.providersResolver&&$.providersResolver($)}let y=!1,D=!1,S=Oh(r,s,u.length,null);for(let N=0;N<u.length;N++){const $=u[N];o.mergedAttrs=qr(o.mergedAttrs,$.hostAttrs),A_(r,o,s,S,$),cl(S,$,c),null!==$.contentQueries&&(o.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(o.flags|=64);const Z=$.type.prototype;!y&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),y=!0),!D&&(Z.ngOnChanges||Z.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),D=!0),S++}!function I_(r,s,o){const c=s.directiveEnd,h=r.data,y=s.attrs,D=[];let S=null,N=null;for(let $=s.directiveStart;$<c;$++){const Z=h[$],de=o?o.get(Z):null,qe=de?de.outputs:null;S=pm(Z.inputs,$,S,de?de.inputs:null),N=pm(Z.outputs,$,N,qe);const ft=null===S||null===y||t_(s)?null:ll(S,$,y);D.push(ft)}null!==S&&(S.hasOwnProperty("class")&&(s.flags|=8),S.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=D,s.inputs=S,s.outputs=N}(r,o,h)}function C_(r,s,o){const u=o.directiveStart,c=o.directiveEnd,h=o.index,y=function la(){return Jt.lFrame.currentDirectiveIndex}();try{vi(h);for(let D=u;D<c;D++){const S=r.data[D],N=s[D];ys(D),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&T_(S,N)}}finally{vi(-1),ys(y)}}function T_(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function yd(r,s,o){s.componentOffset=o,(r.components||(r.components=[])).push(s.index)}function cl(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;Hr(s)&&(o[""]=r)}}function A_(r,s,o,u,c){r.data[u]=c;const h=c.factory||(c.factory=hs(c.type)),y=new Ae(h,Hr(c),gd);r.blueprint[u]=y,o[u]=y,function gm(r,s,o,u,c){const h=c.hostBindings;if(h){let y=r.hostBindingOpCodes;null===y&&(y=r.hostBindingOpCodes=[]);const D=~s.index;(function D_(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(y)!=D&&y.push(D),y.push(o,u,h)}}(r,s,u,Oh(r,o,c.hostVars,hn),c)}function vu(r,s,o,u,c,h){const y=zr(r,s);!function mm(r,s,o,u,c,h,y){if(null==h)r.removeAttribute(s,c,o);else{const D=null==y?ze(h):y(h,u||"",c);r.setAttribute(s,c,D,o)}}(s[11],y,h,r.value,o,u,c)}function kh(r,s,o,u,c,h){const y=h[s];if(null!==y){const D=u.setInput;for(let S=0;S<y.length;){const N=y[S++],$=y[S++],Z=y[S++];null!==D?u.setInput(o,Z,N,$):o[$]=Z}}}function ll(r,s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;if(r.hasOwnProperty(h)){null===u&&(u=[]);const y=r[h];for(let D=0;D<y.length;D+=2)if(y[D]===s){u.push(h,y[D+1],o[c+1]);break}}c+=2}else c+=2;else c+=4}return u}function qu(r,s,o,u){return[r,!0,!1,s,null,0,u,o,null,null]}function M_(r,s){const o=gn(s,r);if(Dr(o)){const u=o[1];48&o[2]?Nh(u,o,u.template,o[8]):o[5]>0&&ym(o)}}function ym(r){for(let u=No(r);null!==u;u=ya(u))for(let c=10;c<u.length;c++){const h=u[c];if(Dr(h))if(512&h[2]){const y=h[1];Nh(y,h,y.template,h[8])}else h[5]>0&&ym(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=gn(o[u],r);Dr(c)&&c[5]>0&&ym(c)}}function vm(r,s){const o=gn(s,r),u=o[1];(function _m(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(u,o),lm(u,o,o[8])}function Fh(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function Lh(r){for(;r;){r[2]|=32;const s=$t(r);if(Hc(r)&&!s)return r;r=s}return null}function vd(r,s,o,u=!0){const c=s[10];c.begin&&c.begin();try{Nh(r,s,r.template,o)}catch(y){throw u&&Em(s,y),y}finally{c.end&&c.end()}}function _d(r,s,o){Ps(0),s(r,o)}function pp(r){return r[7]||(r[7]=[])}function Vh(r){return r.cleanup||(r.cleanup=[])}function Em(r,s){const o=r[9],u=o?o.get(cd,null):null;u&&u.handleError(s)}function dl(r,s,o,u,c){for(let h=0;h<o.length;){const y=o[h++],D=o[h++],S=s[y],N=r.data[y];null!==N.setInput?N.setInput(S,c,u,D):S[D]=c}}function _a(r,s,o){const u=Js(s,r);!function ch(r,s,o){r.setValue(s,o)}(r[11],u,o)}function bc(r,s,o){let u=o?r.styles:null,c=o?r.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const D=s[y];"number"==typeof D?h=D:1==h?c=we(c,D):2==h&&(u=we(u,D+": "+s[++y]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}function Uh(r,s,o,u,c=!1){for(;null!==o;){const h=s[o.index];if(null!==h&&u.push(cr(h)),ii(h))for(let D=10;D<h.length;D++){const S=h[D],N=S[1].firstChild;null!==N&&Uh(S[1],S,N,u)}const y=o.type;if(8&y)Uh(r,s,o.child,u);else if(32&y){const D=Be(o,s);let S;for(;S=D();)u.push(S)}else if(16&y){const D=Yl(s,o);if(Array.isArray(D))u.push(...D);else{const S=$t(s[16]);Uh(S[1],S,D,u,!0)}}o=c?o.projectionNext:o.next}return u}class Ed{get rootNodes(){const s=this._lView,o=s[1];return Uh(o,s,o.firstChild,[])}constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ii(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Qr(s,u),Qi(o,u))}this._attachedToViewContainer=!1}Et(this._lView[1],this._lView)}onDestroy(s){cp(this._lView[1],this._lView,null,s)}markForCheck(){Lh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){vd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lr(r,s){Ql(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Oe(902,!1);this._appRef=s}}class Vo extends Ed{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;vd(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class wm extends od{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=bn(s);return new Ea(o,this.ngModule)}}function Bh(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class O_{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){u=kt(u);const c=this.injector.get(s,Yf,u);return c!==Yf||o===Yf?c:this.parentInjector.get(s,o,u)}}class Ea extends Qg{get inputs(){return Bh(this.componentDef.inputs)}get outputs(){return Bh(this.componentDef.outputs)}constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function a_(r){return r.map(o_).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}create(s,o,u,c){let h=(c=c||this.ngModule)instanceof vc?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new O_(s,h):s,D=y.get(Ah,null);if(null===D)throw new Oe(407,!1);const S=y.get(fw,null),N=D.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",Z=u?function fm(r,s,o){return r.selectRootElement(s,o===Ke.ShadowDom)}(N,u,this.componentDef.encapsulation):rn(N,$,function gp(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}($)),de=this.componentDef.onPush?288:272,Ie=Hi(0,null,null,1,0,null,null,null,null,null),qe=sp(null,Ie,null,de,null,null,D,N,S,y,null);let ft,bt;To(qe);try{const Ft=this.componentDef;let en,rt=null;Ft.findHostDirectiveDefs?(en=[],rt=new Map,Ft.findHostDirectiveDefs(Ft,en,rt),en.push(Ft)):en=[Ft];const cn=function hl(r,s){const o=r[1];return r[22]=s,md(o,22,2,"#host",null)}(qe,Z),Ur=function Fw(r,s,o,u,c,h,y,D){const S=c[1];!function Id(r,s,o,u){for(const c of r)s.mergedAttrs=qr(s.mergedAttrs,c.hostAttrs);null!==s.mergedAttrs&&(bc(s,s.mergedAttrs,!0),null!==o&&kg(u,o,s))}(u,r,s,y);const N=h.createRenderer(s,o),$=sp(c,up(o),null,o.onPush?32:16,c[r.index],r,h,N,D||null,null,null);return S.firstCreatePass&&yd(S,r,u.length-1),Fh(c,$),c[r.index]=$}(cn,Z,Ft,en,qe,D,N);bt=mr(Ie,22),Z&&function Cc(r,s,o,u){if(u)Yn(r,o,["ng-version",Jv.full]);else{const{attrs:c,classes:h}=function _w(r){const s=[],o=[];let u=1,c=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===c?""!==h&&s.push(h,r[++u]):8===c&&o.push(h);else{if(!Lo(c))break;c=h}u++}return{attrs:s,classes:o}}(s.selectors[0]);c&&Yn(r,o,c),h&&h.length>0&&$u(r,o,h.join(" "))}}(N,Ft,Z,u),void 0!==o&&function P_(r,s,o){const u=r.projection=[];for(let c=0;c<s.length;c++){const h=o[c];u.push(null!=h?Array.from(h):null)}}(bt,this.ngContentSelectors,o),ft=function N_(r,s,o,u,c,h){const y=Cr(),D=c[1],S=zr(y,c);fp(D,c,y,o,null,u);for(let $=0;$<o.length;$++)kr(Hn(c,D,y.directiveStart+$,y),c);C_(D,c,y),S&&kr(S,c);const N=Hn(c,D,y.directiveStart+y.componentOffset,y);if(r[8]=c[8]=N,null!==h)for(const $ of h)$(N,s);return op(D,y,r),N}(Ur,Ft,en,rt,qe,[Lw]),lm(Ie,qe,null)}finally{iu()}return new wd(this.componentType,ft,ad(bt,qe),qe,bt)}}class wd extends nl{constructor(s,o,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new Vo(c),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[s])){const h=this._rootLView;dl(h[1],h,c,s,o),Dc(h,this._tNode.index)}}get injector(){return new vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Lw(){const r=Cr();Ko(Re()[1],r)}function Im(r){let s=function k_(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;s;){let c;if(Hr(r))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Oe(903,!1);c=s.\u0275dir}if(c){if(o){u.push(c);const y=r;y.inputs=Dd(r.inputs),y.declaredInputs=Dd(r.declaredInputs),y.outputs=Dd(r.outputs);const D=c.hostBindings;D&&L_(r,D);const S=c.viewQuery,N=c.contentQueries;if(S&&F_(r,S),N&&Uw(r,N),_e(r.inputs,c.inputs),_e(r.declaredInputs,c.declaredInputs),_e(r.outputs,c.outputs),Hr(c)&&c.data.animation){const $=r.data;$.animation=($.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let y=0;y<h.length;y++){const D=h[y];D&&D.ngInherit&&D(r),D===Im&&(o=!1)}}s=Object.getPrototypeOf(s)}!function Vw(r){let s=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=s+=c.hostVars,c.hostAttrs=qr(c.hostAttrs,o=qr(o,c.hostAttrs))}}(u)}function Dd(r){return r===St?{}:r===oe?[]:r}function F_(r,s){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{s(u,c),o(u,c)}:s}function Uw(r,s){const o=r.contentQueries;r.contentQueries=o?(u,c,h)=>{s(u,c,h),o(u,c,h)}:s}function L_(r,s){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{s(u,c),o(u,c)}:s}let mp=null;function Zu(){if(!mp){const r=Pt.Symbol;if(r&&r.iterator)mp=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(mp=u)}}}return mp}function yp(r){return!!Cm(r)&&(Array.isArray(r)||!(r instanceof Map)&&Zu()in r)}function Cm(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function _u(r,s,o){return r[s]=o}function Hs(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function Sc(r,s,o,u){const c=Hs(r,s,o);return Hs(r,s+1,u)||c}function pl(r,s,o,u){const c=Re();return Hs(c,ms(),s)&&(dn(),vu(Tn(),c,r,s,o,u)),pl}function Ac(r,s,o,u){return Hs(r,ms(),o)?s+ze(o)+u:hn}function xc(r,s,o,u,c,h){const D=Sc(r,si(),o,c);return Vi(2),D?s+ze(o)+u+ze(c)+h:hn}function gl(r,s,o,u,c,h,y,D){const N=function bd(r,s,o,u,c){const h=Sc(r,s,o,u);return Hs(r,s+2,c)||h}(r,si(),o,c,y);return Vi(3),N?s+ze(o)+u+ze(c)+h+ze(y)+D:hn}function z_(r,s,o,u,c,h,y,D){const S=Re(),N=dn(),$=r+22,Z=N.firstCreatePass?function G_(r,s,o,u,c,h,y,D,S){const N=s.consts,$=md(s,r,4,y||null,Or(N,D));hp(s,o,$,Or(N,S)),Ko(s,$);const Z=$.tViews=Hi(2,$,u,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,N);return null!==s.queries&&(s.queries.template(s,$),Z.queries=s.queries.embeddedTView($)),$}($,N,S,s,o,u,c,h,y):N.data[$];Li(Z,!1);const de=S[11].createComment("");Po(N,S,de,Z),kr(de,S),Fh(S,S[$]=qu(de,S,de,Z)),Ja(Z)&&ap(N,S,Z),null!=y&&dm(S,Z,D)}function Hh(r,s,o){const u=Re();return Hs(u,ms(),s)&&es(dn(),Tn(),u,r,s,u[11],o,!1),Hh}function _p(r,s,o,u,c){const y=c?"class":"style";dl(r,o,s.inputs[y],y,u)}function Sd(r,s,o,u){const c=Re(),h=dn(),y=22+r,D=c[11],S=c[y]=rn(D,s,function Va(){return Jt.lFrame.currentNamespace}()),N=h.firstCreatePass?function W_(r,s,o,u,c,h,y){const D=s.consts,N=md(s,r,2,c,Or(D,h));return hp(s,o,N,Or(D,y)),null!==N.attrs&&bc(N,N.attrs,!1),null!==N.mergedAttrs&&bc(N,N.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,N),N}(y,h,c,0,s,o,u):h.data[y];return Li(N,!0),kg(D,S,N),32!=(32&N.flags)&&Po(h,c,S,N),0===function eo(){return Jt.lFrame.elementDepthCount}()&&kr(S,c),function ps(){Jt.lFrame.elementDepthCount++}(),Ja(N)&&(ap(h,c,N),op(h,N,c)),null!==u&&dm(c,N),Sd}function El(){let r=Cr();Rs()?Io():(r=r.parent,Li(r,!1));const s=r;!function br(){Jt.lFrame.elementDepthCount--}();const o=dn();return o.firstCreatePass&&(Ko(o,r),cs(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function En(r){return 0!=(8&r.flags)}(s)&&_p(o,s,Re(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function sn(r){return 0!=(16&r.flags)}(s)&&_p(o,s,Re(),s.stylesWithoutHost,!1),El}function wl(r,s,o,u){return Sd(r,s,o,u),El(),wl}function Mm(){return Re()}function Rm(r){return!!r&&"function"==typeof r.then}function Om(r){return!!r&&"function"==typeof r.subscribe}const q_=Om;function Nm(r,s,o,u){const c=Re(),h=dn(),y=Cr();return function Wh(r,s,o,u,c,h,y){const D=Ja(u),N=r.firstCreatePass&&Vh(r),$=s[8],Z=pp(s);let de=!0;if(3&u.type||y){const ft=zr(u,s),bt=y?y(ft):ft,Ft=Z.length,en=y?cn=>y(cr(cn[u.index])):u.index;let rt=null;if(!y&&D&&(rt=function K_(r,s,o,u){const c=r.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const y=c[h];if(y===o&&c[h+1]===u){const D=s[7],S=c[h+2];return D.length>S?D[S]:null}"string"==typeof y&&(h+=2)}return null}(r,s,c,u.index)),null!==rt)(rt.__ngLastListenerFn__||rt).__ngNextListenerFn__=h,rt.__ngLastListenerFn__=h,de=!1;else{h=Ip(u,s,$,h,!1);const cn=o.listen(bt,c,h);Z.push(h,cn),N&&N.push(c,en,Ft,Ft+1)}}else h=Ip(u,s,$,h,!1);const Ie=u.outputs;let qe;if(de&&null!==Ie&&(qe=Ie[c])){const ft=qe.length;if(ft)for(let bt=0;bt<ft;bt+=2){const Ur=s[qe[bt]][qe[bt+1]].subscribe(h),Si=Z.length;Z.push(h,Ur),N&&N.push(c,u.index,Si,-(Si+1))}}}(h,c,c[11],y,r,s,u),Nm}function Ad(r,s,o,u){try{return!1!==o(u)}catch(c){return Em(r,c),!1}}function Ip(r,s,o,u,c){return function h(y){if(y===Function)return u;Lh(r.componentOffset>-1?gn(r.index,s):s);let S=Ad(s,0,u,y),N=h.__ngNextListenerFn__;for(;N;)S=Ad(s,0,N,y)&&S,N=N.__ngNextListenerFn__;return c&&!1===S&&(y.preventDefault(),y.returnValue=!1),S}}function Pm(r=1){return function Fa(r){return(Jt.lFrame.contextLView=function ro(r,s){for(;r>0;)s=s[15],r--;return s}(r,Jt.lFrame.contextLView))[8]}(r)}function Ww(r,s){let o=null;const u=function Xf(r){const s=r.attrs;if(null!=s){const o=s.indexOf(5);if(!(1&o))return s[o+1]}return null}(r);for(let c=0;c<s.length;c++){const h=s[c];if("*"!==h){if(null===u?hd(r,h,!0):i_(u,h))return c}else o=c}return o}function Y_(r){const s=Re()[16][6];if(!s.projection){const u=s.projection=Us(r?r.length:1,null),c=u.slice();let h=s.child;for(;null!==h;){const y=r?Ww(h,r):0;null!==y&&(c[y]?c[y].projectionNext=h:u[y]=h,c[y]=h),h=h.next}}}function Q_(r,s=0,o){const u=Re(),c=dn(),h=md(c,22+r,16,null,o||null);null===h.projection&&(h.projection=s),Io(),32!=(32&h.flags)&&function Pg(r,s,o){Pv(s[11],0,s,o,Rv(r,o,s),Og(o.parent||s[6],o,s))}(c,u,h)}function xd(r,s,o,u,c){const h=Re(),y=Ac(h,s,o,u);return y!==hn&&es(dn(),Tn(),h,r,y,h[11],c,!1),xd}function km(r,s,o,u,c,h,y){const D=Re(),S=xc(D,s,o,u,c,h);return S!==hn&&es(dn(),Tn(),D,r,S,D[11],y,!1),km}function Od(r,s){return r<<17|s<<2}function Yu(r){return r>>17&32767}function Ka(r){return 2|r}function Rc(r){return(131068&r)>>2}function Vm(r,s){return-131069&r|s<<2}function Bm(r){return 1|r}function Tp(r,s,o,u,c){const h=r[o+1],y=null===s;let D=u?Yu(h):Rc(h),S=!1;for(;0!==D&&(!1===S||y);){const $=r[D+1];t0(r[D],s)&&(S=!0,r[D+1]=u?Bm($):Ka($)),D=u?Yu($):Rc($)}S&&(r[o+1]=u?Ka(h):Bm(h))}function t0(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&m(r,s)>=0}const ei={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Sp(r){return r.substring(ei.key,ei.keyEnd)}function $m(r,s){const o=ei.textEnd;return o===s?-1:(s=ei.keyEnd=function Hm(r,s,o){for(;s<o&&r.charCodeAt(s)>32;)s++;return s}(r,ei.key=s,o),Nd(r,s,o))}function Nd(r,s,o){for(;s<o&&r.charCodeAt(s)<=32;)s++;return s}function Zh(r,s,o){return Gs(r,s,o,!1),Zh}function Kh(r,s){return Gs(r,s,null,!0),Kh}function Ia(r,s){for(let o=function Zw(r){return function Ap(r){ei.key=0,ei.keyEnd=0,ei.value=0,ei.valueEnd=0,ei.textEnd=r.length}(r),$m(r,Nd(r,0,ei.textEnd))}(s);o>=0;o=$m(s,o))v(r,Sp(s),!0)}function Gs(r,s,o,u){const c=Re(),h=dn(),y=Vi(2);h.firstUpdatePass&&Dl(h,r,y,u),s!==hn&&Hs(c,y,s)&&Rp(h,h.data[Wr()],c,c[11],r,c[y+1]=function tI(r,s){return null==r||("string"==typeof s?r+=s:"object"==typeof r&&(r=ye(na(r)))),r}(s,o),u,y)}function Gm(r,s){return s>=r.expandoStartIndex}function Dl(r,s,o,u){const c=r.data;if(null===c[o+1]){const h=c[Wr()],y=Gm(r,o);Zm(h,u)&&null===s&&!y&&(s=!1),s=function Jw(r,s,o,u){const c=function Ns(r){const s=Jt.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let h=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(o=bl(o=Yh(null,r,s,o,u),s.attrs,u),h=null);else{const y=s.directiveStylingLast;if(-1===y||r[y]!==c)if(o=Yh(c,r,s,o,u),null===h){let S=function Xw(r,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Rc(u))return r[Yu(u)]}(r,s,u);void 0!==S&&Array.isArray(S)&&(S=Yh(null,r,s,S[1],u),S=bl(S,s.attrs,u),function zm(r,s,o,u){r[Yu(o?s.classBindings:s.styleBindings)]=u}(r,s,u,S))}else h=function Wm(r,s,o){let u;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)u=bl(u,r[h].hostAttrs,o);return bl(u,s.attrs,o)}(r,s,u)}return void 0!==h&&(u?s.residualClasses=h:s.residualStyles=h),o}(c,h,s,u),function jm(r,s,o,u,c,h){let y=h?s.classBindings:s.styleBindings,D=Yu(y),S=Rc(y);r[u]=o;let $,N=!1;if(Array.isArray(o)?($=o[1],(null===$||m(o,$)>0)&&(N=!0)):$=o,c)if(0!==S){const de=Yu(r[D+1]);r[u+1]=Od(de,D),0!==de&&(r[de+1]=Vm(r[de+1],u)),r[D+1]=function Lm(r,s){return 131071&r|s<<17}(r[D+1],u)}else r[u+1]=Od(D,0),0!==D&&(r[D+1]=Vm(r[D+1],u)),D=u;else r[u+1]=Od(S,0),0===D?D=u:r[S+1]=Vm(r[S+1],u),S=u;N&&(r[u+1]=Ka(r[u+1])),Tp(r,$,u,!0),Tp(r,$,u,!1),function Cp(r,s,o,u,c){const h=c?r.residualClasses:r.residualStyles;null!=h&&"string"==typeof s&&m(h,s)>=0&&(o[u+1]=Bm(o[u+1]))}(s,$,r,u,h),y=Od(D,S),h?s.classBindings=y:s.styleBindings=y}(c,h,s,o,y,u)}}function Yh(r,s,o,u,c){let h=null;const y=o.directiveEnd;let D=o.directiveStylingLast;for(-1===D?D=o.directiveStart:D++;D<y&&(h=s[D],u=bl(u,h.hostAttrs,c),h!==r);)D++;return null!==r&&(o.directiveStylingLast=D),u}function bl(r,s,o){const u=o?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y?c=y:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),v(r,y,!!o||s[++h]))}return void 0===r?null:r}function Rp(r,s,o,u,c,h,y,D){if(!(3&s.type))return;const S=r.data,N=S[D+1],$=function Um(r){return 1==(1&r)}(N)?o0(S,s,o,c,Rc(N),y):void 0;Qh($)||(Qh(h)||function Fm(r){return 2==(2&r)}(N)&&(h=o0(S,null,o,c,D,y)),function ta(r,s,o,u,c){if(s)c?r.addClass(o,u):r.removeClass(o,u);else{let h=-1===u.indexOf("-")?void 0:Yr.DashCase;null==c?r.removeStyle(o,u,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=Yr.Important),r.setStyle(o,u,c,h))}}(u,y,Js(Wr(),o),c,h))}function o0(r,s,o,u,c,h){const y=null===s;let D;for(;c>0;){const S=r[c],N=Array.isArray(S),$=N?S[1]:S,Z=null===$;let de=o[c+1];de===hn&&(de=Z?oe:void 0);let Ie=Z?_(de,u):$===u?de:void 0;if(N&&!Qh(Ie)&&(Ie=_(S,u)),Qh(Ie)&&(D=Ie,y))return D;const qe=r[c+1];c=y?Yu(qe):Rc(qe)}if(null!==s){let S=h?s.residualClasses:s.residualStyles;null!=S&&(D=_(S,u))}return D}function Qh(r){return void 0!==r}function Zm(r,s){return 0!=(r.flags&(s?8:16))}function Km(r,s=""){const o=Re(),u=dn(),c=r+22,h=u.firstCreatePass?md(u,c,1,s,null):u.data[c],y=o[c]=function Wl(r,s){return r.createText(s)}(o[11],s);Po(u,o,y,h),Li(h,!1)}function Op(r){return Jh("",r,""),Op}function Jh(r,s,o){const u=Re(),c=Ac(u,r,s,o);return c!==hn&&_a(u,Wr(),c),Jh}function Ym(r,s,o,u,c){const h=Re(),y=xc(h,r,s,o,u,c);return y!==hn&&_a(h,Wr(),y),Ym}function Qm(r,s,o,u,c,h,y){const D=Re(),S=gl(D,r,s,o,u,c,h,y);return S!==hn&&_a(D,Wr(),S),Qm}function Fp(r,s,o){!function zs(r,s,o,u){const c=dn(),h=Vi(2);c.firstUpdatePass&&Dl(c,null,h,u);const y=Re();if(o!==hn&&Hs(y,h,o)){const D=c.data[Wr()];if(Zm(D,u)&&!Gm(c,h)){let S=u?D.classesWithoutHost:D.stylesWithoutHost;null!==S&&(o=we(S,o||"")),_p(c,D,y,o,u)}else!function qm(r,s,o,u,c,h,y,D){c===hn&&(c=oe);let S=0,N=0,$=0<c.length?c[0]:null,Z=0<h.length?h[0]:null;for(;null!==$||null!==Z;){const de=S<c.length?c[S+1]:void 0,Ie=N<h.length?h[N+1]:void 0;let ft,qe=null;$===Z?(S+=2,N+=2,de!==Ie&&(qe=Z,ft=Ie)):null===Z||null!==$&&$<Z?(S+=2,qe=$):(N+=2,qe=Z,ft=Ie),null!==qe&&Rp(r,s,o,u,qe,ft,y,D),$=S<c.length?c[S]:null,Z=N<h.length?h[N]:null}}(c,D,y,y[11],y[h+1],y[h+1]=function eI(r,s,o){if(null==o||""===o)return oe;const u=[],c=na(o);if(Array.isArray(c))for(let h=0;h<c.length;h++)r(u,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&r(u,h,c[h]);else"string"==typeof c&&s(u,c);return u}(r,s,o),u,h)}}(v,Ia,Ac(Re(),r,s,o),!0)}const Qu=void 0;var oy=["en",[["a","p"],["AM","PM"],Qu],[["AM","PM"],Qu,Qu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qu,"{1} 'at' {0}",Qu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aI(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Fd={};function $p(r){const s=function uI(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=E0(s);if(o)return o;const u=s.split("-")[0];if(o=E0(u),o)return o;if("en"===u)return oy;throw new Oe(701,!1)}function ay(r){return $p(r)[Qt.PluralCase]}function E0(r){return r in Fd||(Fd[r]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[r]),Fd[r]}var Qt=(()=>((Qt=Qt||{})[Qt.LocaleId=0]="LocaleId",Qt[Qt.DayPeriodsFormat=1]="DayPeriodsFormat",Qt[Qt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qt[Qt.DaysFormat=3]="DaysFormat",Qt[Qt.DaysStandalone=4]="DaysStandalone",Qt[Qt.MonthsFormat=5]="MonthsFormat",Qt[Qt.MonthsStandalone=6]="MonthsStandalone",Qt[Qt.Eras=7]="Eras",Qt[Qt.FirstDayOfWeek=8]="FirstDayOfWeek",Qt[Qt.WeekendRange=9]="WeekendRange",Qt[Qt.DateFormat=10]="DateFormat",Qt[Qt.TimeFormat=11]="TimeFormat",Qt[Qt.DateTimeFormat=12]="DateTimeFormat",Qt[Qt.NumberSymbols=13]="NumberSymbols",Qt[Qt.NumberFormats=14]="NumberFormats",Qt[Qt.CurrencyCode=15]="CurrencyCode",Qt[Qt.CurrencySymbol=16]="CurrencySymbol",Qt[Qt.CurrencyName=17]="CurrencyName",Qt[Qt.Currencies=18]="Currencies",Qt[Qt.Directionality=19]="Directionality",Qt[Qt.PluralCase=20]="PluralCase",Qt[Qt.ExtraData=21]="ExtraData",Qt))();const Nc="en-US";let Hp=Nc;function jd(r,s,o,u,c){if(r=ce(r),Array.isArray(r))for(let h=0;h<r.length;h++)jd(r[h],s,o,u,c);else{const h=dn(),y=Re();let D=bi(r)?r:ce(r.provide),S=Yg(r);const N=Cr(),$=1048575&N.providerIndexes,Z=N.directiveStart,de=N.providerIndexes>>20;if(bi(r)||!r.multi){const Ie=new Ae(S,c,gd),qe=lf(D,s,c?$:$+de,Z);-1===qe?(Xo(oo(N,y),h,D),Sl(h,r,s.length),s.push(D),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),o.push(Ie),y.push(Ie)):(o[qe]=Ie,y[qe]=Ie)}else{const Ie=lf(D,s,$+de,Z),qe=lf(D,s,$,$+de),bt=qe>=0&&o[qe];if(c&&!bt||!c&&!(Ie>=0&&o[Ie])){Xo(oo(N,y),h,D);const Ft=function Ty(r,s,o,u,c){const h=new Ae(r,o,gd);return h.multi=[],h.index=s,h.componentProviders=0,by(h,c,u&&!o),h}(c?TI:CI,o.length,c,u,S);!c&&bt&&(o[qe].providerFactory=Ft),Sl(h,r,s.length,0),s.push(D),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),o.push(Ft),y.push(Ft)}else Sl(h,r,Ie>-1?Ie:qe,by(o[c?qe:Ie],S,!c&&u));!c&&u&&bt&&o[qe].componentProviders++}}}function Sl(r,s,o,u){const c=bi(s),h=function qg(r){return!!r.useClass}(s);if(c||h){const S=(h?ce(s.useClass):s).prototype.ngOnDestroy;if(S){const N=r.destroyHooks||(r.destroyHooks=[]);if(!c&&s.multi){const $=N.indexOf(o);-1===$?N.push(o,[u,S]):N[$+1].push(u,S)}else N.push(o,S)}}}function by(r,s,o){return o&&r.componentProviders++,r.multi.push(s)-1}function lf(r,s,o,u){for(let c=o;c<u;c++)if(s[c]===r)return c;return-1}function CI(r,s,o,u){return Cy(this.multi,[])}function TI(r,s,o,u){const c=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,D=Hn(o,o[1],this.providerFactory.index,u);h=D.slice(0,y),Cy(c,h);for(let S=y;S<D.length;S++)h.push(D[S])}else h=[],Cy(c,h);return h}function Cy(r,s){for(let o=0;o<r.length;o++)s.push((0,r[o])());return s}function Zp(r,s=[]){return o=>{o.providersResolver=(u,c)=>function Tl(r,s,o){const u=dn();if(u.firstCreatePass){const c=Hr(r);jd(o,u.data,u.blueprint,c,!0),jd(s,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,s)}}class Al{}class kc{}function z0(r,s){return new Kp(r,s??null)}class Kp extends Al{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wm(this);const u=ri(s);this._bootstrapComponents=$s(u.bootstrap),this._r3Injector=fd(s,o,[{provide:Al,useValue:this},{provide:od,useValue:this.componentFactoryResolver}],ye(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class df extends kc{constructor(s){super(),this.moduleType=s}create(s){return new Kp(this.moduleType,s)}}class AI extends Al{constructor(s,o,u){super(),this.componentFactoryResolver=new wm(this),this.instance=null;const c=new Zg([...s,{provide:Al,useValue:this},{provide:od,useValue:this.componentFactoryResolver}],o||yc(),u,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function $d(r,s,o=null){return new AI(r,s,o).injector}let Yp=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=zg(0,o.type),c=u.length>0?$d([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=mt({token:r,providedIn:"environment",factory:()=>new r(ut(vc))}),r})();function Sy(r){r.getStandaloneInjector=s=>s.get(Yp).getOrCreateStandaloneInjector(r)}function gf(r,s,o){const u=Nr()+r,c=Re();return c[u]===hn?_u(c,u,o?s.call(o):s()):function Tc(r,s){return r[s]}(c,u)}function q0(r,s,o,u){return Ry(Re(),Nr(),r,s,o,u)}function Ry(r,s,o,u,c,h){const y=s+o;return Hs(r,y,c)?_u(r,y+1,h?u.call(h,c):u(c)):function Hd(r,s){const o=r[s];return o===hn?void 0:o}(r,y+1)}function Du(r,s){const o=dn();let u;const c=r+22;o.firstCreatePass?(u=function yf(r,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(r===u.name)return u}}(s,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const h=u.factory||(u.factory=hs(u.type)),y=Jn(gd);try{const D=Ui(!1),S=h();return Ui(D),function xm(r,s,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),s[o]=u}(o,Re(),c,S),S}finally{Jn(y)}}function X0(r,s,o){const u=r+22,c=Re(),h=function ki(r,s){return r[s]}(c,u);return function vf(r,s){return r[1].data[s].pure}(c,u)?Ry(c,Nr(),s,h.transform,o,h):h.transform(o)}function Oy(r){return s=>{setTimeout(r,void 0,s)}}const bu=class UI extends I.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let c=s,h=o||(()=>null),y=u;if(s&&"object"==typeof s){const S=s;c=S.next?.bind(S),h=S.error?.bind(S),y=S.complete?.bind(S)}this.__isAsync&&(h=Oy(h),c&&(c=Oy(c)),y&&(y=Oy(y)));const D=super.subscribe({next:c,error:h,complete:y});return s instanceof j.w0&&s.add(D),D}};function tE(){return this._results[Zu()]()}class eg{get changes(){return this._changes||(this._changes=new bu)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Zu(),u=eg.prototype;u[o]||(u[o]=tE)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const c=function hi(r){return r.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Ou(r,s,o){if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],h=s[u];if(o&&(c=o(c),h=o(h)),h!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let _f=(()=>{class r{}return r.__NG_ELEMENT_ID__=jI,r})();const BI=_f,nE=class extends BI{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,c=sp(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(c[19]=y.createEmbeddedView(u)),lm(u,c,s),new Ed(c)}};function jI(){return Xu(Cr(),Re())}function Xu(r,s){return 4&r.type?new nE(s,r,ad(r,s)):null}let Gd=(()=>{class r{}return r.__NG_ELEMENT_ID__=BD,r})();function BD(){return iE(Cr(),Re())}const jD=Gd,rE=class extends jD{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return ad(this._hostTNode,this._hostLView)}get injector(){return new vs(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ua(this._hostTNode,this._hostLView);if(io(s)){const o=ss(s,this._hostLView),u=so(s);return new vs(o[1].data[u+8],o)}return new vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=Ny(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let c,h;"number"==typeof u?c=u:null!=u&&(c=u.index,h=u.injector);const y=s.createEmbeddedView(o||{},h);return this.insert(y,c),y}createComponent(s,o,u,c,h){const y=s&&!function za(r){return"function"==typeof r}(s);let D;if(y)D=o;else{const Z=o||{};D=Z.index,u=Z.injector,c=Z.projectableNodes,h=Z.environmentInjector||Z.ngModuleRef}const S=y?s:new Ea(bn(s)),N=u||this.parentInjector;if(!h&&null==S.ngModule){const de=(y?N:this.parentInjector).get(vc,null);de&&(h=de)}const $=S.create(N,c,void 0,h);return this.insert($.hostView,D),$}insert(s,o){const u=s._lView,c=u[1];if(function xa(r){return ii(r[3])}(u)){const $=this.indexOf(s);if(-1!==$)this.detach($);else{const Z=u[3],de=new rE(Z,Z[6],Z[3]);de.detach(de.indexOf(s))}}const h=this._adjustIndex(o),y=this._lContainer;!function Yc(r,s,o,u){const c=10+u,h=o.length;u>0&&(o[c-1][4]=s),u<h-10?(s[4]=o[c],Oo(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const y=s[17];null!==y&&o!==y&&function Rn(r,s){const o=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===o?r[9]=[s]:o.push(s)}(y,s);const D=s[19];null!==D&&D.insertView(r),s[2]|=64}(c,u,y,h);const D=du(h,y),S=u[11],N=Kl(S,y[7]);return null!==N&&function dh(r,s,o,u,c,h){u[0]=c,u[6]=s,Ql(r,u,o,1,c,h)}(c,y[6],S,u,N,D),s.attachToViewContainerRef(),Oo(Cu(y),h,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=Ny(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Qr(this._lContainer,o);u&&(Qi(Cu(this._lContainer),o),Et(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Qr(this._lContainer,o);return u&&null!=Qi(Cu(this._lContainer),o)?new Ed(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function Ny(r){return r[8]}function Cu(r){return r[8]||(r[8]=[])}function iE(r,s){let o;const u=s[r.index];if(ii(u))o=u;else{let c;if(8&r.type)c=cr(u);else{const h=s[11];c=h.createComment("");const y=zr(r,s);Jc(h,Kl(h,y),c,function Nv(r,s){return r.nextSibling(s)}(h,y),!1)}s[r.index]=o=qu(u,s,c,r),Fh(s,o)}return new rE(o,r,s)}class Py{constructor(s){this.queryList=s,this.matches=null}clone(){return new Py(this.queryList)}setDirty(){this.queryList.setDirty()}}class ky{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,c=[];for(let h=0;h<u;h++){const y=o.getByIndex(h);c.push(this.queries[y.indexInDeclarationView].clone())}return new ky(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==Ef(s,o).matches&&this.queries[o].setDirty()}}class sE{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class Fy{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,h=this.getByIndex(u).embeddedTView(s,c);h&&(h.indexInDeclarationView=u,null!==o?o.push(h):o=[h])}return null!==o?new Fy(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Ly{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new Ly(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const h=u[c];this.matchTNodeWithReadOption(s,o,$I(o,h)),this.matchTNodeWithReadOption(s,o,uo(o,s,h,!1,!1))}else u===_f?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,uo(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Sh||c===Gd||c===_f&&4&o.type)this.addMatch(o.index,-2);else{const h=uo(o,s,c,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function $I(r,s){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function HD(r,s,o,u){return-1===o?function $D(r,s){return 11&r.type?ad(r,s):4&r.type?Xu(r,s):null}(s,r):-2===o?function oE(r,s,o){return o===Sh?ad(s,r):o===_f?Xu(s,r):o===Gd?iE(s,r):void 0}(r,s,u):Hn(r,r[1],o,s)}function aE(r,s,o,u){const c=s[19].queries[u];if(null===c.matches){const h=r.data,y=o.matches,D=[];for(let S=0;S<y.length;S+=2){const N=y[S];D.push(N<0?null:HD(s,h[N],y[S+1],o.metadata.read))}c.matches=D}return c.matches}function Vy(r,s,o,u){const c=r.queries.getByIndex(o),h=c.matches;if(null!==h){const y=aE(r,s,c,o);for(let D=0;D<h.length;D+=2){const S=h[D];if(S>0)u.push(y[D/2]);else{const N=h[D+1],$=s[-S];for(let Z=10;Z<$.length;Z++){const de=$[Z];de[17]===de[3]&&Vy(de[1],de,N,u)}if(null!==$[9]){const Z=$[9];for(let de=0;de<Z.length;de++){const Ie=Z[de];Vy(Ie[1],Ie,N,u)}}}}}return u}function tg(r){const s=Re(),o=dn(),u=Na();Ps(u+1);const c=Ef(o,u);if(r.dirty&&function yi(r){return 4==(4&r[2])}(s)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const h=c.crossesNgTemplate?Vy(o,s,u,[]):aE(o,s,c,u);r.reset(h,Xr),r.notifyOnChanges()}return!0}return!1}function Uy(r,s,o){const u=dn();u.firstCreatePass&&(cE(u,new sE(r,s,o),-1),2==(2&s)&&(u.staticViewQueries=!0)),uE(u,Re(),s)}function By(r,s,o,u){const c=dn();if(c.firstCreatePass){const h=Cr();cE(c,new sE(s,o,u),h.index),function lE(r,s){const o=r.contentQueries||(r.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,s)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}uE(c,Re(),o)}function zd(){return function jy(r,s){return r[19].queries[s].queryList}(Re(),Na())}function uE(r,s,o){const u=new eg(4==(4&o));cp(r,s,u,u.destroy),null===s[19]&&(s[19]=new ky),s[19].queries.push(new Py(u))}function cE(r,s,o){null===r.queries&&(r.queries=new Fy),r.queries.track(new Ly(s,o))}function Ef(r,s){return r.queries.getByIndex(s)}function Qy(...r){}const Jy=new Pn("Application Initializer");let wf=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Qy,this.reject=Qy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(Rm(h))o.push(h);else if(q_(h)){const y=new Promise((D,S)=>{h.subscribe({complete:D,error:S})});o.push(y)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(ut(Jy,8))},r.\u0275prov=mt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Xy=new Pn("AppId",{providedIn:"root",factory:function ev(){return`${ug()}${ug()}${ug()}`}});function ug(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tv=new Pn("Platform Initializer"),cg=new Pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nv=new Pn("appBootstrapListener");let CE=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const If=new Pn("LocaleId",{providedIn:"root",factory:()=>_t(If,gt.Optional|gt.SkipSelf)||function nD(){return typeof $localize<"u"&&$localize.locale||Nc}()}),TE=new Pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class xE{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}let ME=(()=>{class r{compileModuleSync(o){return new df(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),h=$s(ri(o).declarations).reduce((y,D)=>{const S=bn(D);return S&&y.push(new Ea(S)),y},[]);return new xE(u,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Bc=(()=>Promise.resolve(0))();function dg(r){typeof Zone>"u"?Bc.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class jo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bu(!1),this.onMicrotaskEmpty=new bu(!1),this.onStable=new bu(!1),this.onError=new bu(!1),typeof Zone>"u")throw new Oe(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function YD(){let r=Pt.requestAnimationFrame,s=Pt.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function sD(r){const s=()=>{!function hg(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Pt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Cf(r),r.isCheckStableRunning=!0,bf(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Cf(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,h,y,D)=>{try{return NE(r),o.invokeTask(c,h,y,D)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&s(),oD(r)}},onInvoke:(o,u,c,h,y,D,S)=>{try{return NE(r),o.invoke(c,h,y,D,S)}finally{r.shouldCoalesceRunChangeDetection&&s(),oD(r)}},onHasTask:(o,u,c,h)=>{o.hasTask(c,h),u===c&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,Cf(r),bf(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,c,h)=>(o.handleError(c,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jo.isInAngularZone())throw new Oe(909,!1)}static assertNotInAngularZone(){if(jo.isInAngularZone())throw new Oe(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,c){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+c,s,Df,Qy,Qy);try{return h.runTask(y,o,u)}finally{h.cancelTask(y)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Df={};function bf(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Cf(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function NE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function oD(r){r._nesting--,bf(r)}class QD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bu,this.onMicrotaskEmpty=new bu,this.onStable=new bu,this.onError=new bu}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,c){return s.apply(o,u)}}const aD=new Pn(""),uD=new Pn("");let sv,JD=(()=>{class r{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sv||(function XD(r){sv=r}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jo.assertNotInAngularZone(),dg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dg(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(ut(jo),ut(cD),ut(uD))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),cD=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return sv?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),tc=null;const PE=new Pn("AllowMultipleToken"),ov=new Pn("PlatformDestroyListeners");class Zd{constructor(s,o){this.name=s,this.token=o}}function LE(r,s,o=[]){const u=`Platform: ${s}`,c=new Pn(u);return(h=[])=>{let y=Kd();if(!y||y.injector.get(PE,!1)){const D=[...o,...h,{provide:c,useValue:!0}];r?r(D):function Tf(r){if(tc&&!tc.get(PE,!1))throw new Oe(400,!1);tc=r;const s=r.get(Yd);(function kE(r){const s=r.get(tv,null);s&&s.forEach(o=>o())})(r)}(function cv(r=[],s){return wc.create({name:s,providers:[{provide:sd,useValue:"platform"},{provide:ov,useValue:new Set([()=>tc=null])},...r]})}(D,u))}return function gg(r){const s=Kd();if(!s)throw new Oe(401,!1);return s}()}}function Kd(){return tc?.get(Yd)??null}let Yd=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function hD(r,s){let o;return o="noop"===r?new QD:("zone.js"===r?void 0:r)||new jo(s),o}(u?.ngZone,function dD(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:jo,useValue:c}];return c.run(()=>{const y=wc.create({providers:h,parent:this.injector,name:o.moduleType.name}),D=o.create(y),S=D.injector.get(cd,null);if(!S)throw new Oe(402,!1);return c.runOutsideAngular(()=>{const N=c.onError.subscribe({next:$=>{S.handleError($)}});D.onDestroy(()=>{Qd(this._modules,D),N.unsubscribe()})}),function lv(r,s,o){try{const u=o();return Rm(u)?u.catch(c=>{throw s.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(S,c,()=>{const N=D.injector.get(wf);return N.runInitializers(),N.donePromise.then(()=>(function ly(r){lt(r,"Expected localeId to be defined"),"string"==typeof r&&(Hp=r.toLowerCase().replace(/_/g,"-"))}(D.injector.get(If,Nc)||Nc),this._moduleDoBootstrap(D),D))})})}bootstrapModule(o,u=[]){const c=fD({},u);return function av(r,s,o){const u=new df(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const u=o.injector.get(jc);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Oe(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(ov,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(ut(wc))},r.\u0275prov=mt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function fD(r,s){return Array.isArray(s)?s.reduce(fD,r):{...r,...s}}let jc=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new p.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),y=new p.y(D=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{jo.assertNotInAngularZone(),dg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{jo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ae.T)(h,y.pipe((0,ue.B)()))}bootstrap(o,u){const c=o instanceof Qg;if(!this._injector.get(wf).done)throw!c&&zn(o),new Oe(405,false);let y;y=c?o:this._injector.get(od).resolveComponentFactory(o),this.componentTypes.push(y.componentType);const D=function pg(r){return r.isBoundToModule}(y)?void 0:this._injector.get(Al),N=y.create(wc.NULL,[],u||y.selector,D),$=N.location.nativeElement,Z=N.injector.get(aD,null);return Z?.registerApplication($),N.onDestroy(()=>{this.detachView(N.hostView),Qd(this.components,N),Z?.unregisterApplication($)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new Oe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Qd(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(nv,[]);u.push(...this._bootstrapListeners),u.forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Qd(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Oe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(ut(jo),ut(vc),ut(cd))},r.\u0275prov=mt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Qd(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}function mg(){return!1}let pD=(()=>{class r{}return r.__NG_ELEMENT_ID__=gD,r})();function gD(r){return function UE(r,s,o){if(Ca(r)&&!o){const u=gn(r.index,s);return new Ed(u,u)}return 47&r.type?new Ed(s[16],s):null}(Cr(),Re(),16==(16&r))}class mv{constructor(){}supports(s){return yp(s)}create(s){return new ab(s)}}const ob=(r,s)=>s;class ab{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||ob}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,c=0,h=null;for(;o||u;){const y=!u||o&&o.currentIndex<yv(u,c,h)?o:u,D=yv(y,c,h),S=y.currentIndex;if(y===u)c--,u=u._nextRemoved;else if(o=o._next,null==y.previousIndex)c++;else{h||(h=[]);const N=D-c,$=S-c;if(N!=$){for(let de=0;de<N;de++){const Ie=de<h.length?h[de]:h[de]=0,qe=Ie+de;$<=qe&&qe<N&&(h[de]=Ie+1)}h[y.previousIndex]=$-N}}D!==S&&s(y,D,S)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!yp(s))throw new Oe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,y,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let D=0;D<this.length;D++)h=s[D],y=this._trackByFn(D,h),null!==o&&Object.is(o.trackById,y)?(u&&(o=this._verifyReinsertion(o,h,y,D)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,y,D),u=!0),o=o._next}else c=0,function Gw(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[Zu()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,D=>{y=this._trackByFn(c,D),null!==o&&Object.is(o.trackById,y)?(u&&(o=this._verifyReinsertion(o,D,y,c)),Object.is(o.item,D)||this._addIdentityChange(o,D)):(o=this._mismatch(o,D,y,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,h,c)):s=this._addAfter(new ub(o,u),h,c),s}_verifyReinsertion(s,o,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const c=null===o?this._itHead:o._next;return s._next=c,s._prev=o,null===c?this._itTail=s:c._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new $E),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $E),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class ub{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cb{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class $E{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new cb,this.map.set(o,u)),u.add(s)}get(s,o){const c=this.map.get(s);return c?c.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yv(r,s,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+s+c}class HE{constructor(){}supports(s){return s instanceof Map||Cm(s)}create(){return new GE}}class GE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Cm(s)))throw new Oe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,o);const h=c._prev,y=c._next;return h&&(h._next=y),y&&(y._prev=h),c._next=null,c._prev=null,c}const u=new zE(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class zE{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jd(){return new vv([new mv])}let vv=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Jd()),deps:[[r,new R,new Zr]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Oe(901,!1)}}return r.\u0275prov=mt({token:r,providedIn:"root",factory:Jd}),r})();function WE(){return new qE([new HE])}let qE=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||WE()),deps:[[r,new R,new Zr]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Oe(901,!1)}}return r.\u0275prov=mt({token:r,providedIn:"root",factory:WE}),r})();const KE=LE(null,"core",[]);let _v=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(ut(jc))},r.\u0275mod=Ai({type:r}),r.\u0275inj=pn({}),r})();function ID(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},1481:(yt,Se,V)=>{V.d(Se,{Dx:()=>tr,b2:()=>pr,q6:()=>Vn});var I=V(6895),j=V(4650);class p extends I.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ae extends p{static makeCurrent(){(0,I.HT)(new ae)}onAndCancel(ie,q,ve){return ie.addEventListener(q,ve,!1),()=>{ie.removeEventListener(q,ve,!1)}}dispatchEvent(ie,q){ie.dispatchEvent(q)}remove(ie){ie.parentNode&&ie.parentNode.removeChild(ie)}createElement(ie,q){return(q=q||this.getDefaultDocument()).createElement(ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ie){return ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(ie){return ie instanceof DocumentFragment}getGlobalEventTarget(ie,q){return"window"===q?window:"document"===q?ie:"body"===q?ie.body:null}getBaseHref(ie){const q=function fe(){return ue=ue||document.querySelector("base"),ue?ue.getAttribute("href"):null}();return null==q?null:function ye(oe){_e=_e||document.createElement("a"),_e.setAttribute("href",oe);const ie=_e.pathname;return"/"===ie.charAt(0)?ie:`/${ie}`}(q)}resetBaseElement(){ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(ie){return(0,I.Mx)(document.cookie,ie)}}let _e,ue=null;const we=new j.OlP("TRANSITION_ID"),te=[{provide:j.ip1,useFactory:function re(oe,ie,q){return()=>{q.get(j.CZH).donePromise.then(()=>{const ve=(0,I.q)(),Ze=ie.querySelectorAll(`style[ng-transition="${oe}"]`);for(let st=0;st<Ze.length;st++)ve.remove(Ze[st])})}},deps:[we,I.K0,j.zs3],multi:!0}];let Je=(()=>{class oe{build(){return new XMLHttpRequest}}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const Ge=new j.OlP("EventManagerPlugins");let at=(()=>{class oe{constructor(q,ve){this._zone=ve,this._eventNameToPlugin=new Map,q.forEach(Ze=>Ze.manager=this),this._plugins=q.slice().reverse()}addEventListener(q,ve,Ze){return this._findPluginFor(ve).addEventListener(q,ve,Ze)}addGlobalEventListener(q,ve,Ze){return this._findPluginFor(ve).addGlobalEventListener(q,ve,Ze)}getZone(){return this._zone}_findPluginFor(q){const ve=this._eventNameToPlugin.get(q);if(ve)return ve;const Ze=this._plugins;for(let st=0;st<Ze.length;st++){const Zt=Ze[st];if(Zt.supports(q))return this._eventNameToPlugin.set(q,Zt),Zt}throw new Error(`No event manager plugin found for event ${q}`)}}return oe.\u0275fac=function(q){return new(q||oe)(j.LFG(Ge),j.LFG(j.R0b))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class vt{constructor(ie){this._doc=ie}addGlobalEventListener(ie,q,ve){const Ze=(0,I.q)().getGlobalEventTarget(this._doc,ie);if(!Ze)throw new Error(`Unsupported event target ${Ze} for event ${q}`);return this.addEventListener(Ze,q,ve)}}let Oe=(()=>{class oe{constructor(){this._stylesSet=new Set}addStyles(q){const ve=new Set;q.forEach(Ze=>{this._stylesSet.has(Ze)||(this._stylesSet.add(Ze),ve.add(Ze))}),this.onStylesAdded(ve)}onStylesAdded(q){}getAllStyles(){return Array.from(this._stylesSet)}}return oe.\u0275fac=function(q){return new(q||oe)},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),We=(()=>{class oe extends Oe{constructor(q){super(),this._doc=q,this._hostNodes=new Map,this._hostNodes.set(q.head,[])}_addStylesToHost(q,ve,Ze){q.forEach(st=>{const Zt=this._doc.createElement("style");Zt.textContent=st,Ze.push(ve.appendChild(Zt))})}addHost(q){const ve=[];this._addStylesToHost(this._stylesSet,q,ve),this._hostNodes.set(q,ve)}removeHost(q){const ve=this._hostNodes.get(q);ve&&ve.forEach(ze),this._hostNodes.delete(q)}onStylesAdded(q){this._hostNodes.forEach((ve,Ze)=>{this._addStylesToHost(q,Ze,ve)})}ngOnDestroy(){this._hostNodes.forEach(q=>q.forEach(ze))}}return oe.\u0275fac=function(q){return new(q||oe)(j.LFG(I.K0))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();function ze(oe){(0,I.q)().remove(oe)}const Qe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ke=/%COMP%/g;function ct(oe,ie){return ie.flat(100).map(q=>q.replace(ke,oe))}function nt(oe){return ie=>{if("__ngUnwrap__"===ie)return oe;!1===oe(ie)&&(ie.preventDefault(),ie.returnValue=!1)}}let pt=(()=>{class oe{constructor(q,ve,Ze){this.eventManager=q,this.sharedStylesHost=ve,this.appId=Ze,this.rendererByCompId=new Map,this.defaultRenderer=new dt(q)}createRenderer(q,ve){if(!q||!ve)return this.defaultRenderer;switch(ve.encapsulation){case j.ifc.Emulated:{let Ze=this.rendererByCompId.get(ve.id);return Ze||(Ze=new $e(this.eventManager,this.sharedStylesHost,ve,this.appId),this.rendererByCompId.set(ve.id,Ze)),Ze.applyToHost(q),Ze}case j.ifc.ShadowDom:return new Xe(this.eventManager,this.sharedStylesHost,q,ve);default:if(!this.rendererByCompId.has(ve.id)){const Ze=ct(ve.id,ve.styles);this.sharedStylesHost.addStyles(Ze),this.rendererByCompId.set(ve.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return oe.\u0275fac=function(q){return new(q||oe)(j.LFG(at),j.LFG(We),j.LFG(j.AFp))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class dt{constructor(ie){this.eventManager=ie,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ie,q){return q?document.createElementNS(Qe[q]||q,ie):document.createElement(ie)}createComment(ie){return document.createComment(ie)}createText(ie){return document.createTextNode(ie)}appendChild(ie,q){(Pe(ie)?ie.content:ie).appendChild(q)}insertBefore(ie,q,ve){ie&&(Pe(ie)?ie.content:ie).insertBefore(q,ve)}removeChild(ie,q){ie&&ie.removeChild(q)}selectRootElement(ie,q){let ve="string"==typeof ie?document.querySelector(ie):ie;if(!ve)throw new Error(`The selector "${ie}" did not match any elements`);return q||(ve.textContent=""),ve}parentNode(ie){return ie.parentNode}nextSibling(ie){return ie.nextSibling}setAttribute(ie,q,ve,Ze){if(Ze){q=Ze+":"+q;const st=Qe[Ze];st?ie.setAttributeNS(st,q,ve):ie.setAttribute(q,ve)}else ie.setAttribute(q,ve)}removeAttribute(ie,q,ve){if(ve){const Ze=Qe[ve];Ze?ie.removeAttributeNS(Ze,q):ie.removeAttribute(`${ve}:${q}`)}else ie.removeAttribute(q)}addClass(ie,q){ie.classList.add(q)}removeClass(ie,q){ie.classList.remove(q)}setStyle(ie,q,ve,Ze){Ze&(j.JOm.DashCase|j.JOm.Important)?ie.style.setProperty(q,ve,Ze&j.JOm.Important?"important":""):ie.style[q]=ve}removeStyle(ie,q,ve){ve&j.JOm.DashCase?ie.style.removeProperty(q):ie.style[q]=""}setProperty(ie,q,ve){ie[q]=ve}setValue(ie,q){ie.nodeValue=q}listen(ie,q,ve){return"string"==typeof ie?this.eventManager.addGlobalEventListener(ie,q,nt(ve)):this.eventManager.addEventListener(ie,q,nt(ve))}}function Pe(oe){return"TEMPLATE"===oe.tagName&&void 0!==oe.content}class $e extends dt{constructor(ie,q,ve,Ze){super(ie),this.component=ve;const st=ct(Ze+"-"+ve.id,ve.styles);q.addStyles(st),this.contentAttr=function Te(oe){return"_ngcontent-%COMP%".replace(ke,oe)}(Ze+"-"+ve.id),this.hostAttr=function Fe(oe){return"_nghost-%COMP%".replace(ke,oe)}(Ze+"-"+ve.id)}applyToHost(ie){super.setAttribute(ie,this.hostAttr,"")}createElement(ie,q){const ve=super.createElement(ie,q);return super.setAttribute(ve,this.contentAttr,""),ve}}class Xe extends dt{constructor(ie,q,ve,Ze){super(ie),this.sharedStylesHost=q,this.hostEl=ve,this.shadowRoot=ve.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const st=ct(Ze.id,Ze.styles);for(let Zt=0;Zt<st.length;Zt++){const nr=document.createElement("style");nr.textContent=st[Zt],this.shadowRoot.appendChild(nr)}}nodeOrShadowRoot(ie){return ie===this.hostEl?this.shadowRoot:ie}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ie,q){return super.appendChild(this.nodeOrShadowRoot(ie),q)}insertBefore(ie,q,ve){return super.insertBefore(this.nodeOrShadowRoot(ie),q,ve)}removeChild(ie,q){return super.removeChild(this.nodeOrShadowRoot(ie),q)}parentNode(ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ie)))}}let et=(()=>{class oe extends vt{constructor(q){super(q)}supports(q){return!0}addEventListener(q,ve,Ze){return q.addEventListener(ve,Ze,!1),()=>this.removeEventListener(q,ve,Ze)}removeEventListener(q,ve,Ze){return q.removeEventListener(ve,Ze)}}return oe.\u0275fac=function(q){return new(q||oe)(j.LFG(I.K0))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const lt=["alt","control","meta","shift"],ht={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cn={alt:oe=>oe.altKey,control:oe=>oe.ctrlKey,meta:oe=>oe.metaKey,shift:oe=>oe.shiftKey};let me=(()=>{class oe extends vt{constructor(q){super(q)}supports(q){return null!=oe.parseEventName(q)}addEventListener(q,ve,Ze){const st=oe.parseEventName(ve),Zt=oe.eventCallback(st.fullKey,Ze,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,I.q)().onAndCancel(q,st.domEventName,Zt))}static parseEventName(q){const ve=q.toLowerCase().split("."),Ze=ve.shift();if(0===ve.length||"keydown"!==Ze&&"keyup"!==Ze)return null;const st=oe._normalizeKey(ve.pop());let Zt="",nr=ve.indexOf("code");if(nr>-1&&(ve.splice(nr,1),Zt="code."),lt.forEach(ts=>{const Gi=ve.indexOf(ts);Gi>-1&&(ve.splice(Gi,1),Zt+=ts+".")}),Zt+=st,0!=ve.length||0===st.length)return null;const rr={};return rr.domEventName=Ze,rr.fullKey=Zt,rr}static matchEventFullKeyCode(q,ve){let Ze=ht[q.key]||q.key,st="";return ve.indexOf("code.")>-1&&(Ze=q.code,st="code."),!(null==Ze||!Ze)&&(Ze=Ze.toLowerCase()," "===Ze?Ze="space":"."===Ze&&(Ze="dot"),lt.forEach(Zt=>{Zt!==Ze&&(0,Cn[Zt])(q)&&(st+=Zt+".")}),st+=Ze,st===ve)}static eventCallback(q,ve,Ze){return st=>{oe.matchEventFullKeyCode(st,q)&&Ze.runGuarded(()=>ve(st))}}static _normalizeKey(q){return"esc"===q?"escape":q}}return oe.\u0275fac=function(q){return new(q||oe)(j.LFG(I.K0))},oe.\u0275prov=j.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const Vn=(0,j.eFA)(j._c5,"browser",[{provide:j.Lbi,useValue:I.bD},{provide:j.g9A,useValue:function ln(){ae.makeCurrent()},multi:!0},{provide:I.K0,useFactory:function Dn(){return(0,j.RDi)(document),document},deps:[]}]),_r=new j.OlP(""),fr=[{provide:j.rWj,useClass:class ce{addToWindow(ie){j.dqk.getAngularTestability=(ve,Ze=!0)=>{const st=ie.findTestabilityInTree(ve,Ze);if(null==st)throw new Error("Could not find testability for element.");return st},j.dqk.getAllAngularTestabilities=()=>ie.getAllTestabilities(),j.dqk.getAllAngularRootElements=()=>ie.getAllRootElements(),j.dqk.frameworkStabilizers||(j.dqk.frameworkStabilizers=[]),j.dqk.frameworkStabilizers.push(ve=>{const Ze=j.dqk.getAllAngularTestabilities();let st=Ze.length,Zt=!1;const nr=function(rr){Zt=Zt||rr,st--,0==st&&ve(Zt)};Ze.forEach(function(rr){rr.whenStable(nr)})})}findTestabilityInTree(ie,q,ve){return null==q?null:ie.getTestability(q)??(ve?(0,I.q)().isShadowRoot(q)?this.findTestabilityInTree(ie,q.host,!0):this.findTestabilityInTree(ie,q.parentElement,!0):null)}},deps:[]},{provide:j.lri,useClass:j.dDg,deps:[j.R0b,j.eoX,j.rWj]},{provide:j.dDg,useClass:j.dDg,deps:[j.R0b,j.eoX,j.rWj]}],xn=[{provide:j.zSh,useValue:"root"},{provide:j.qLn,useFactory:function Kn(){return new j.qLn},deps:[]},{provide:Ge,useClass:et,multi:!0,deps:[I.K0,j.R0b,j.Lbi]},{provide:Ge,useClass:me,multi:!0,deps:[I.K0]},{provide:pt,useClass:pt,deps:[at,We,j.AFp]},{provide:j.FYo,useExisting:pt},{provide:Oe,useExisting:We},{provide:We,useClass:We,deps:[I.K0]},{provide:at,useClass:at,deps:[Ge,j.R0b]},{provide:I.JF,useClass:Je,deps:[]},[]];let pr=(()=>{class oe{constructor(q){}static withServerTransition(q){return{ngModule:oe,providers:[{provide:j.AFp,useValue:q.appId},{provide:we,useExisting:j.AFp},te]}}}return oe.\u0275fac=function(q){return new(q||oe)(j.LFG(_r,12))},oe.\u0275mod=j.oAB({type:oe}),oe.\u0275inj=j.cJS({providers:[...xn,...fr],imports:[I.ez,j.hGG]}),oe})(),tr=(()=>{class oe{constructor(q){this._doc=q}getTitle(){return this._doc.title}setTitle(q){this._doc.title=q||""}}return oe.\u0275fac=function(q){return new(q||oe)(j.LFG(I.K0))},oe.\u0275prov=j.Yz7({token:oe,factory:function(q){let ve=null;return ve=q?new q:function Jn(){return new tr((0,j.LFG)(I.K0))}(),ve},providedIn:"root"}),oe})();typeof window<"u"&&window},2435:(yt,Se,V)=>{V.d(Se,{gz:()=>Pi,F0:()=>Hn,rH:()=>fa,Od:()=>di,Bz:()=>hi,lC:()=>fs});var I=V(4650),j=V(8996),p=V(9646),ae=V(1135),ue=V(6805),fe=V(9751),_e=V(4742),ye=V(4671),we=V(3268),re=V(3269),te=V(1810),ce=V(5403),Je=V(9672);function Ge(...v){const _=(0,re.yG)(v),m=(0,re.jO)(v),{args:C,keys:O}=(0,_e.D)(v);if(0===C.length)return(0,j.D)([],_);const U=new fe.y(function at(v,_,m=ye.y){return C=>{vt(_,()=>{const{length:O}=v,U=new Array(O);let z=O,he=O;for(let Le=0;Le<O;Le++)vt(_,()=>{const Dt=(0,j.D)(v[Le],_);let Ct=!1;Dt.subscribe((0,ce.x)(C,wn=>{U[Le]=wn,Ct||(Ct=!0,he--),he||C.next(m(U.slice()))},()=>{--z||C.complete()}))},C)},C)}}(C,_,O?z=>(0,te.n)(O,z):ye.y));return m?U.pipe((0,we.Z)(m)):U}function vt(v,_,m){v?(0,Je.f)(m,v,_):_()}var Oe=V(7272),We=V(8421);function ze(v){return new fe.y(_=>{(0,We.Xf)(v()).subscribe(_)})}var Qe=V(9635),ke=V(576);function Ue(v,_){const m=(0,ke.m)(v)?v:()=>v,C=O=>O.error(m());return new fe.y(_?O=>_.schedule(C,0,O):C)}var je=V(515),it=V(727),ge=V(4482);function Te(){return(0,ge.e)((v,_)=>{let m=null;v._refCount++;const C=(0,ce.x)(_,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(m=null);const O=v._connection,U=m;m=null,O&&(!U||O===U)&&O.unsubscribe(),_.unsubscribe()});v.subscribe(C),C.closed||(m=v.connect())})}class Fe extends fe.y{constructor(_,m){super(),this.source=_,this.subjectFactory=m,this._subject=null,this._refCount=0,this._connection=null,(0,ge.A)(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,_?.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new it.w0;const m=this.getSubject();_.add(this.source.subscribe((0,ce.x)(m,void 0,()=>{this._teardown(),m.complete()},C=>{this._teardown(),m.error(C)},()=>this._teardown()))),_.closed&&(this._connection=null,_=it.w0.EMPTY)}return _}refCount(){return Te()(this)}}var ct=V(7579),nt=V(6895),pt=V(4004),dt=V(3900),be=V(5698),Me=V(8675),Pe=V(9300),$e=V(5577),Xe=V(590);function et(v,_){return(0,ke.m)(_)?(0,$e.z)(v,_,1):(0,$e.z)(v,1)}var lt=V(8505);function ht(v){return(0,ge.e)((_,m)=>{let U,C=null,O=!1;C=_.subscribe((0,ce.x)(m,void 0,void 0,z=>{U=(0,We.Xf)(v(z,ht(v)(_))),C?(C.unsubscribe(),C=null,U.subscribe(m)):O=!0})),O&&(C.unsubscribe(),C=null,U.subscribe(m))})}var Cn=V(5026);function me(v){return v<=0?()=>je.E:(0,ge.e)((_,m)=>{let C=[];_.subscribe((0,ce.x)(m,O=>{C.push(O),v<C.length&&C.shift()},()=>{for(const O of C)m.next(O);m.complete()},void 0,()=>{C=null}))})}var Tt=V(8068),mt=V(6590);function xt(v,_){const m=arguments.length>=2;return C=>C.pipe(v?(0,Pe.h)((O,U)=>v(O,U,C)):ye.y,me(1),m?(0,mt.d)(_):(0,Tt.T)(()=>new ue.K))}function ln(v){return(0,ge.e)((_,m)=>{try{_.subscribe(m)}finally{m.add(v)}})}var Kn=V(8189),Dn=V(1481);const Lt="primary",Vn=Symbol("RouteTitle");class _r{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const m=this.params[_];return Array.isArray(m)?m[0]:m}return null}getAll(_){if(this.has(_)){const m=this.params[_];return Array.isArray(m)?m:[m]}return[]}get keys(){return Object.keys(this.params)}}function fr(v){return new _r(v)}function xn(v,_,m){const C=m.path.split("/");if(C.length>v.length||"full"===m.pathMatch&&(_.hasChildren()||C.length<v.length))return null;const O={};for(let U=0;U<C.length;U++){const z=C[U],he=v[U];if(z.startsWith(":"))O[z.substring(1)]=he;else if(z!==he.path)return null}return{consumed:v.slice(0,C.length),posParams:O}}function gt(v,_){const m=v?Object.keys(v):void 0,C=_?Object.keys(_):void 0;if(!m||!C||m.length!=C.length)return!1;let O;for(let U=0;U<m.length;U++)if(O=m[U],!sr(v[O],_[O]))return!1;return!0}function sr(v,_){if(Array.isArray(v)&&Array.isArray(_)){if(v.length!==_.length)return!1;const m=[...v].sort(),C=[..._].sort();return m.every((O,U)=>C[U]===O)}return v===_}function Er(v){return Array.prototype.concat.apply([],v)}function Jn(v){return v.length>0?v[v.length-1]:null}function Yt(v,_){for(const m in v)v.hasOwnProperty(m)&&_(v[m],m)}function Pt(v){return(0,I.CqO)(v)?v:(0,I.QGY)(v)?(0,j.D)(Promise.resolve(v)):(0,p.of)(v)}const Nt=!1,zt={exact:function Br(v,_,m){if(!Ve(v.segments,_.segments)||!ni(v.segments,_.segments,m)||v.numberOfChildren!==_.numberOfChildren)return!1;for(const C in _.children)if(!v.children[C]||!Br(v.children[C],_.children[C],m))return!1;return!0},subset:ti},_n={exact:function $n(v,_){return gt(v,_)},subset:function Xn(v,_){return Object.keys(_).length<=Object.keys(v).length&&Object.keys(_).every(m=>sr(v[m],_[m]))},ignored:()=>!0};function Mn(v,_,m){return zt[m.paths](v.root,_.root,m.matrixParams)&&_n[m.queryParams](v.queryParams,_.queryParams)&&!("exact"===m.fragment&&v.fragment!==_.fragment)}function ti(v,_,m){return nn(v,_,_.segments,m)}function nn(v,_,m,C){if(v.segments.length>m.length){const O=v.segments.slice(0,m.length);return!(!Ve(O,m)||_.hasChildren()||!ni(O,m,C))}if(v.segments.length===m.length){if(!Ve(v.segments,m)||!ni(v.segments,m,C))return!1;for(const O in _.children)if(!v.children[O]||!ti(v.children[O],_.children[O],C))return!1;return!0}{const O=m.slice(0,v.segments.length),U=m.slice(v.segments.length);return!!(Ve(v.segments,O)&&ni(v.segments,O,C)&&v.children[Lt])&&nn(v.children[Lt],_,U,C)}}function ni(v,_,m){return _.every((C,O)=>_n[m](v[O].parameters,C.parameters))}class qt{constructor(_=new Ut([],{}),m={},C=null){this.root=_,this.queryParams=m,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fr(this.queryParams)),this._queryParamMap}toString(){return an.serialize(this)}}class Ut{constructor(_,m){this.segments=_,this.children=m,this.parent=null,Yt(m,(C,O)=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return se(this)}}class Un{constructor(_,m){this.path=_,this.parameters=m}get parameterMap(){return this._parameterMap||(this._parameterMap=fr(this.parameters)),this._parameterMap}toString(){return St(this)}}function Ve(v,_){return v.length===_.length&&v.every((m,C)=>m.path===_[C].path)}let kt=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(){return new Ht},providedIn:"root"}),v})();class Ht{parse(_){const m=new rr(_);return new qt(m.parseRootSegment(),m.parseQueryParams(),m.parseFragment())}serialize(_){const m=`/${X(_.root,!0)}`,C=function ie(v){const _=Object.keys(v).map(m=>{const C=v[m];return Array.isArray(C)?C.map(O=>`${Y(m)}=${Y(O)}`).join("&"):`${Y(m)}=${Y(C)}`}).filter(m=>!!m);return _.length?`?${_.join("&")}`:""}(_.queryParams);return`${m}${C}${"string"==typeof _.fragment?`#${function G(v){return encodeURI(v)}(_.fragment)}`:""}`}}const an=new Ht;function se(v){return v.segments.map(_=>St(_)).join("/")}function X(v,_){if(!v.hasChildren())return se(v);if(_){const m=v.children[Lt]?X(v.children[Lt],!1):"",C=[];return Yt(v.children,(O,U)=>{U!==Lt&&C.push(`${U}:${X(O,!1)}`)}),C.length>0?`${m}(${C.join("//")})`:m}{const m=function _t(v,_){let m=[];return Yt(v.children,(C,O)=>{O===Lt&&(m=m.concat(_(C,O)))}),Yt(v.children,(C,O)=>{O!==Lt&&(m=m.concat(_(C,O)))}),m}(v,(C,O)=>O===Lt?[X(v.children[Lt],!1)]:[`${O}:${X(C,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Lt]?`${se(v)}/${m[0]}`:`${se(v)}/(${m.join("//")})`}}function le(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Y(v){return le(v).replace(/%3B/gi,";")}function K(v){return le(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function De(v){return decodeURIComponent(v)}function Ke(v){return De(v.replace(/\+/g,"%20"))}function St(v){return`${K(v.path)}${function oe(v){return Object.keys(v).map(_=>`;${K(_)}=${K(v[_])}`).join("")}(v.parameters)}`}const q=/^[^\/()?;=#]+/;function ve(v){const _=v.match(q);return _?_[0]:""}const Ze=/^[^=?&#]+/,Zt=/^[^&#]+/;class rr{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let m={};this.peekStartsWith("/(")&&(this.capture("/"),m=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(_.length>0||Object.keys(m).length>0)&&(C[Lt]=new Ut(_,m)),C}parseSegment(){const _=ve(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new I.vHH(4009,Nt);return this.capture(_),new Un(De(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const m=ve(this.remaining);if(!m)return;this.capture(m);let C="";if(this.consumeOptional("=")){const O=ve(this.remaining);O&&(C=O,this.capture(C))}_[De(m)]=De(C)}parseQueryParam(_){const m=function st(v){const _=v.match(Ze);return _?_[0]:""}(this.remaining);if(!m)return;this.capture(m);let C="";if(this.consumeOptional("=")){const z=function nr(v){const _=v.match(Zt);return _?_[0]:""}(this.remaining);z&&(C=z,this.capture(C))}const O=Ke(m),U=Ke(C);if(_.hasOwnProperty(O)){let z=_[O];Array.isArray(z)||(z=[z],_[O]=z),z.push(U)}else _[O]=U}parseParens(_){const m={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=ve(this.remaining),O=this.remaining[C.length];if("/"!==O&&")"!==O&&";"!==O)throw new I.vHH(4010,Nt);let U;C.indexOf(":")>-1?(U=C.slice(0,C.indexOf(":")),this.capture(U),this.capture(":")):_&&(U=Lt);const z=this.parseChildren();m[U]=1===Object.keys(z).length?z[Lt]:new Ut([],z),this.consumeOptional("//")}return m}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new I.vHH(4011,Nt)}}function ts(v){return v.segments.length>0?new Ut([],{[Lt]:v}):v}function Gi(v){const _={};for(const C of Object.keys(v.children)){const U=Gi(v.children[C]);(U.segments.length>0||U.hasChildren())&&(_[C]=U)}return function wr(v){if(1===v.numberOfChildren&&v.children[Lt]){const _=v.children[Lt];return new Ut(v.segments.concat(_.segments),_.children)}return v}(new Ut(v.segments,_))}function Ai(v){return v instanceof qt}function bn(v,_,m,C,O){if(0===m.length)return zn(_.root,_.root,_.root,C,O);const U=function It(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new ui(!0,0,v);let _=0,m=!1;const C=v.reduce((O,U,z)=>{if("object"==typeof U&&null!=U){if(U.outlets){const he={};return Yt(U.outlets,(Le,Dt)=>{he[Dt]="string"==typeof Le?Le.split("/"):Le}),[...O,{outlets:he}]}if(U.segmentPath)return[...O,U.segmentPath]}return"string"!=typeof U?[...O,U]:0===z?(U.split("/").forEach((he,Le)=>{0==Le&&"."===he||(0==Le&&""===he?m=!0:".."===he?_++:""!=he&&O.push(he))}),O):[...O,U]},[]);return new ui(m,_,C)}(m);return U.toRoot()?zn(_.root,_.root,new Ut([],{}),C,O):function z(Le){const Dt=function Mr(v,_,m,C){if(v.isAbsolute)return new Kt(_.root,!0,0);if(-1===C)return new Kt(m,m===_.root,0);return function xi(v,_,m){let C=v,O=_,U=m;for(;U>O;){if(U-=O,C=C.parent,!C)throw new I.vHH(4005,!1);O=C.segments.length}return new Kt(C,!1,O-U)}(m,C+(jn(v.commands[0])?0:1),v.numberOfDoubleDots)}(U,_,v.snapshot?._urlSegment,Le),Ct=Dt.processChildren?Nn(Dt.segmentGroup,Dt.index,U.commands):zi(Dt.segmentGroup,Dt.index,U.commands);return zn(_.root,Dt.segmentGroup,Ct,C,O)}(v.snapshot?._lastPathIndex)}function jn(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function or(v){return"object"==typeof v&&null!=v&&v.outlets}function zn(v,_,m,C,O){let z,U={};C&&Yt(C,(Le,Dt)=>{U[Dt]=Array.isArray(Le)?Le.map(Ct=>`${Ct}`):`${Le}`}),z=v===_?m:ri(v,_,m);const he=ts(Gi(z));return new qt(he,U,O)}function ri(v,_,m){const C={};return Yt(v.children,(O,U)=>{C[U]=O===_?m:ri(O,_,m)}),new Ut(v.segments,C)}class ui{constructor(_,m,C){if(this.isAbsolute=_,this.numberOfDoubleDots=m,this.commands=C,_&&C.length>0&&jn(C[0]))throw new I.vHH(4003,!1);const O=C.find(or);if(O&&O!==Jn(C))throw new I.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kt{constructor(_,m,C){this.segmentGroup=_,this.processChildren=m,this.index=C}}function zi(v,_,m){if(v||(v=new Ut([],{})),0===v.segments.length&&v.hasChildren())return Nn(v,_,m);const C=function ra(v,_,m){let C=0,O=_;const U={match:!1,pathIndex:0,commandIndex:0};for(;O<v.segments.length;){if(C>=m.length)return U;const z=v.segments[O],he=m[C];if(or(he))break;const Le=`${he}`,Dt=C<m.length-1?m[C+1]:null;if(O>0&&void 0===Le)break;if(Le&&Dt&&"object"==typeof Dt&&void 0===Dt.outlets){if(!Ts(Le,Dt,z))return U;C+=2}else{if(!Ts(Le,{},z))return U;C++}O++}return{match:!0,pathIndex:O,commandIndex:C}}(v,_,m),O=m.slice(C.commandIndex);if(C.match&&C.pathIndex<v.segments.length){const U=new Ut(v.segments.slice(0,C.pathIndex),{});return U.children[Lt]=new Ut(v.segments.slice(C.pathIndex),v.children),Nn(U,0,O)}return C.match&&0===O.length?new Ut(v.segments,{}):C.match&&!v.hasChildren()?Mi(v,_,m):C.match?Nn(v,0,O):Mi(v,_,m)}function Nn(v,_,m){if(0===m.length)return new Ut(v.segments,{});{const C=function ar(v){return or(v[0])?v[0].outlets:{[Lt]:v}}(m),O={};return!C[Lt]&&v.children[Lt]&&1===v.numberOfChildren&&0===v.children[Lt].segments.length?Nn(v.children[Lt],_,m):(Yt(C,(U,z)=>{"string"==typeof U&&(U=[U]),null!==U&&(O[z]=zi(v.children[z],_,U))}),Yt(v.children,(U,z)=>{void 0===C[z]&&(O[z]=U)}),new Ut(v.segments,O))}}function Mi(v,_,m){const C=v.segments.slice(0,_);let O=0;for(;O<m.length;){const U=m[O];if(or(U)){const Le=on(U.outlets);return new Ut(C,Le)}if(0===O&&jn(m[0])){C.push(new Un(v.segments[_].path,Zs(m[0]))),O++;continue}const z=or(U)?U.outlets[Lt]:`${U}`,he=O<m.length-1?m[O+1]:null;z&&he&&jn(he)?(C.push(new Un(z,Zs(he))),O+=2):(C.push(new Un(z,{})),O++)}return new Ut(C,{})}function on(v){const _={};return Yt(v,(m,C)=>{"string"==typeof m&&(m=[m]),null!==m&&(_[C]=Mi(new Ut([],{}),0,m))}),_}function Zs(v){const _={};return Yt(v,(m,C)=>_[C]=`${m}`),_}function Ts(v,_,m){return v==m.path&&gt(_,m.parameters)}const Wi="imperative";class Ir{constructor(_,m){this.id=_,this.url=m}}class ur extends Ir{constructor(_,m,C="imperative",O=null){super(_,m),this.type=0,this.navigationTrigger=C,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class us extends Ir{constructor(_,m,C){super(_,m),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qi extends Ir{constructor(_,m,C,O){super(_,m),this.reason=C,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jr extends Ir{constructor(_,m,C,O){super(_,m),this.reason=C,this.code=O,this.type=16}}class Ri extends Ir{constructor(_,m,C,O){super(_,m),this.error=C,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ba extends Ir{constructor(_,m,C,O){super(_,m),this.urlAfterRedirects=C,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qn extends Ir{constructor(_,m,C,O){super(_,m),this.urlAfterRedirects=C,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gr extends Ir{constructor(_,m,C,O,U){super(_,m),this.urlAfterRedirects=C,this.state=O,this.shouldActivate=U,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ia extends Ir{constructor(_,m,C,O){super(_,m),this.urlAfterRedirects=C,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo extends Ir{constructor(_,m,C,O){super(_,m),this.urlAfterRedirects=C,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yo{constructor(_){this.route=_,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ss{constructor(_){this.route=_,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ci{constructor(_){this.snapshot=_,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $r{constructor(_){this.snapshot=_,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rc{constructor(_){this.snapshot=_,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oi{constructor(_){this.snapshot=_,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ii{constructor(_,m,C){this.routerEvent=_,this.position=m,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ja=(()=>{class v{createUrlTree(m,C,O,U,z,he){return bn(m||C.root,O,U,z,he)}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac}),v})(),Hc=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(_){return Ja.\u0275fac(_)},providedIn:"root"}),v})();class sa{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const m=this.pathFromRoot(_);return m.length>1?m[m.length-2]:null}children(_){const m=ns(_,this._root);return m?m.children.map(C=>C.value):[]}firstChild(_){const m=ns(_,this._root);return m&&m.children.length>0?m.children[0].value:null}siblings(_){const m=Ks(_,this._root);return m.length<2?[]:m[m.length-2].children.map(O=>O.value).filter(O=>O!==_)}pathFromRoot(_){return Ks(_,this._root).map(m=>m.value)}}function ns(v,_){if(v===_.value)return _;for(const m of _.children){const C=ns(v,m);if(C)return C}return null}function Ks(v,_){if(v===_.value)return[_];for(const m of _.children){const C=Ks(v,m);if(C.length)return C.unshift(_),C}return[]}class Ni{constructor(_,m){this.value=_,this.children=m}toString(){return`TreeNode(${this.value})`}}function vo(v){const _={};return v&&v.children.forEach(m=>_[m.value.outlet]=m),_}class Ta extends sa{constructor(_,m){super(_),this.snapshot=m,ls(this,_)}toString(){return this.snapshot.toString()}}function Xa(v,_){const m=function Tu(v,_){const z=new Ki([],{},{},"",{},Lt,_,null,v.root,-1,{});return new eu("",new Ni(z,[]))}(v,_),C=new ae.X([new Un("",{})]),O=new ae.X({}),U=new ae.X({}),z=new ae.X({}),he=new ae.X(""),Le=new Pi(C,O,z,he,U,Lt,_,m.root);return Le.snapshot=m.root,new Ta(new Ni(Le,[]),m)}class Pi{constructor(_,m,C,O,U,z,he,Le){this.url=_,this.params=m,this.queryParams=C,this.fragment=O,this.data=U,this.outlet=z,this.component=he,this.title=this.data?.pipe((0,pt.U)(Dt=>Dt[Vn]))??(0,p.of)(void 0),this._futureSnapshot=Le}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(_=>fr(_)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(_=>fr(_)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Sa(v,_="emptyOnly"){const m=v.pathFromRoot;let C=0;if("always"!==_)for(C=m.length-1;C>=1;){const O=m[C],U=m[C-1];if(O.routeConfig&&""===O.routeConfig.path)C--;else{if(U.component)break;C--}}return function Zi(v){return v.reduce((_,m)=>({params:{..._.params,...m.params},data:{..._.data,...m.data},resolve:{...m.data,..._.resolve,...m.routeConfig?.data,...m._resolvedData}}),{params:{},data:{},resolve:{}})}(m.slice(C))}class Ki{get title(){return this.data?.[Vn]}constructor(_,m,C,O,U,z,he,Le,Dt,Ct,wn){this.url=_,this.params=m,this.queryParams=C,this.fragment=O,this.data=U,this.outlet=z,this.component=he,this.routeConfig=Le,this._urlSegment=Dt,this._lastPathIndex=Ct,this._resolve=wn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class eu extends sa{constructor(_,m){super(m),this.url=_,ls(this,m)}toString(){return mi(this._root)}}function ls(v,_){_.value._routerState=v,_.children.forEach(m=>ls(v,m))}function mi(v){const _=v.children.length>0?` { ${v.children.map(mi).join(", ")} } `:"";return`${v.value}${_}`}function _o(v){if(v.snapshot){const _=v.snapshot,m=v._futureSnapshot;v.snapshot=m,gt(_.queryParams,m.queryParams)||v.queryParams.next(m.queryParams),_.fragment!==m.fragment&&v.fragment.next(m.fragment),gt(_.params,m.params)||v.params.next(m.params),function pr(v,_){if(v.length!==_.length)return!1;for(let m=0;m<v.length;++m)if(!gt(v[m],_[m]))return!1;return!0}(_.url,m.url)||v.url.next(m.url),gt(_.data,m.data)||v.data.next(m.data)}else v.snapshot=v._futureSnapshot,v.data.next(v._futureSnapshot.data)}function Eo(v,_){const m=gt(v.params,_.params)&&function ut(v,_){return Ve(v,_)&&v.every((m,C)=>gt(m.parameters,_[C].parameters))}(v.url,_.url);return m&&!(!v.parent!=!_.parent)&&(!v.parent||Eo(v.parent,_.parent))}function ds(v,_,m){if(m&&v.shouldReuseRoute(_.value,m.value.snapshot)){const C=m.value;C._futureSnapshot=_.value;const O=function Aa(v,_,m){return _.children.map(C=>{for(const O of m.children)if(v.shouldReuseRoute(C.value,O.value.snapshot))return ds(v,C,O);return ds(v,C)})}(v,_,m);return new Ni(C,O)}{if(v.shouldAttach(_.value)){const U=v.retrieve(_.value);if(null!==U){const z=U.route;return z.value._futureSnapshot=_.value,z.children=_.children.map(he=>ds(v,he)),z}}const C=function hs(v){return new Pi(new ae.X(v.url),new ae.X(v.params),new ae.X(v.queryParams),new ae.X(v.fragment),new ae.X(v.data),v.outlet,v.component,v)}(_.value),O=_.children.map(U=>ds(v,U));return new Ni(C,O)}}const As="ngNavigationCancelingError";function Ys(v,_){const{redirectTo:m,navigationBehaviorOptions:C}=Ai(_)?{redirectTo:_,navigationBehaviorOptions:void 0}:_,O=Qs(!1,0,_);return O.url=m,O.navigationBehaviorOptions=C,O}function Qs(v,_,m){const C=new Error("NavigationCancelingError: "+(v||""));return C[As]=!0,C.cancellationCode=_,m&&(C.url=m),C}function oa(v){return xs(v)&&Ai(v.url)}function xs(v){return v&&v[As]}class wo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Gr,this.attachRef=null}}let Gr=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(m,C){const O=this.getOrCreateContext(m);O.outlet=C,this.contexts.set(m,O)}onChildOutletDestroyed(m){const C=this.getContext(m);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const m=this.contexts;return this.contexts=new Map,m}onOutletReAttached(m){this.contexts=m}getOrCreateContext(m){let C=this.getContext(m);return C||(C=new wo,this.contexts.set(m,C)),C}getContext(m){return this.contexts.get(m)||null}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const At=!1;let fs=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.attachEvents=new I.vpe,this.detachEvents=new I.vpe,this.parentContexts=(0,I.f3M)(Gr),this.location=(0,I.f3M)(I.s_b),this.changeDetector=(0,I.f3M)(I.sBO),this.environmentInjector=(0,I.f3M)(I.lqb)}ngOnChanges(m){if(m.name){const{firstChange:C,previousValue:O}=m.name;if(C)return;this.isTrackedInParentContexts(O)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(O)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(m){return this.parentContexts.getContext(m)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const m=this.parentContexts.getContext(this.name);m?.route&&(m.attachRef?this.attach(m.attachRef,m.route):this.activateWith(m.route,m.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I.vHH(4012,At);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I.vHH(4012,At);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I.vHH(4012,At);this.location.detach();const m=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(m.instance),m}attach(m,C){this.activated=m,this._activatedRoute=C,this.location.insert(m.hostView),this.attachEvents.emit(m.instance)}deactivate(){if(this.activated){const m=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(m)}}activateWith(m,C){if(this.isActivated)throw new I.vHH(4013,At);this._activatedRoute=m;const O=this.location,z=m.snapshot.component,he=this.parentContexts.getOrCreateContext(this.name).children,Le=new Wt(m,he,O.injector);if(C&&function Rr(v){return!!v.resolveComponentFactory}(C)){const Dt=C.resolveComponentFactory(z);this.activated=O.createComponent(Dt,O.length,Le)}else this.activated=O.createComponent(z,{index:O.length,injector:Le,environmentInjector:C??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275dir=I.lG2({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[I.TTD]}),v})();class Wt{constructor(_,m,C){this.route=_,this.childContexts=m,this.parent=C}get(_,m){return _===Pi?this.route:_===Gr?this.childContexts:this.parent.get(_,m)}}let Zn=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275cmp=I.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[I.jDz],decls:1,vars:0,template:function(m,C){1&m&&I._UZ(0,"router-outlet")},dependencies:[fs],encapsulation:2}),v})();function Ms(v,_){return v.providers&&!v._injector&&(v._injector=(0,I.MMx)(v.providers,_,`Route: ${v.path}`)),v._injector??_}function yi(v){const _=v.children&&v.children.map(yi),m=_?{...v,children:_}:{...v};return!m.component&&!m.loadComponent&&(_||m.loadChildren)&&m.outlet&&m.outlet!==Lt&&(m.component=Zn),m}function Dr(v){return v.outlet||Lt}function xa(v,_){const m=v.filter(C=>Dr(C)===_);return m.push(...v.filter(C=>Dr(C)!==_)),m}function Or(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let _=v.parent;_;_=_.parent){const m=_.routeConfig;if(m?._loadedInjector)return m._loadedInjector;if(m?._injector)return m._injector}return null}class er{constructor(_,m,C,O){this.routeReuseStrategy=_,this.futureState=m,this.currState=C,this.forwardEvent=O}activate(_){const m=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(m,C,_),_o(this.futureState.root),this.activateChildRoutes(m,C,_)}deactivateChildRoutes(_,m,C){const O=vo(m);_.children.forEach(U=>{const z=U.value.outlet;this.deactivateRoutes(U,O[z],C),delete O[z]}),Yt(O,(U,z)=>{this.deactivateRouteAndItsChildren(U,C)})}deactivateRoutes(_,m,C){const O=_.value,U=m?m.value:null;if(O===U)if(O.component){const z=C.getContext(O.outlet);z&&this.deactivateChildRoutes(_,m,z.children)}else this.deactivateChildRoutes(_,m,C);else U&&this.deactivateRouteAndItsChildren(m,C)}deactivateRouteAndItsChildren(_,m){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,m):this.deactivateRouteAndOutlet(_,m)}detachAndStoreRouteSubtree(_,m){const C=m.getContext(_.value.outlet),O=C&&_.value.component?C.children:m,U=vo(_);for(const z of Object.keys(U))this.deactivateRouteAndItsChildren(U[z],O);if(C&&C.outlet){const z=C.outlet.detach(),he=C.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:z,route:_,contexts:he})}}deactivateRouteAndOutlet(_,m){const C=m.getContext(_.value.outlet),O=C&&_.value.component?C.children:m,U=vo(_);for(const z of Object.keys(U))this.deactivateRouteAndItsChildren(U[z],O);C&&C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated(),C.attachRef=null,C.resolver=null,C.route=null)}activateChildRoutes(_,m,C){const O=vo(m);_.children.forEach(U=>{this.activateRoutes(U,O[U.value.outlet],C),this.forwardEvent(new Oi(U.value.snapshot))}),_.children.length&&this.forwardEvent(new $r(_.value.snapshot))}activateRoutes(_,m,C){const O=_.value,U=m?m.value:null;if(_o(O),O===U)if(O.component){const z=C.getOrCreateContext(O.outlet);this.activateChildRoutes(_,m,z.children)}else this.activateChildRoutes(_,m,C);else if(O.component){const z=C.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const he=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),z.children.onOutletReAttached(he.contexts),z.attachRef=he.componentRef,z.route=he.route.value,z.outlet&&z.outlet.attach(he.componentRef,he.route.value),_o(he.route.value),this.activateChildRoutes(_,null,z.children)}else{const he=Or(O.snapshot),Le=he?.get(I._Vd)??null;z.attachRef=null,z.route=O,z.resolver=Le,z.injector=he,z.outlet&&z.outlet.activateWith(O,z.injector),this.activateChildRoutes(_,null,z.children)}}else this.activateChildRoutes(_,null,C)}}class Jt{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class Fi{constructor(_,m){this.component=_,this.route=m}}function tu(v,_,m){const C=v._root;return br(C,_?_._root:null,m,[C.value])}function ps(v,_){const m=Symbol(),C=_.get(v,m);return C===m?"function"!=typeof v||(0,I.Z0I)(v)?_.get(v):v:C}function br(v,_,m,C,O={canDeactivateChecks:[],canActivateChecks:[]}){const U=vo(_);return v.children.forEach(z=>{(function ua(v,_,m,C,O={canDeactivateChecks:[],canActivateChecks:[]}){const U=v.value,z=_?_.value:null,he=m?m.getContext(v.value.outlet):null;if(z&&U.routeConfig===z.routeConfig){const Le=function Ma(v,_,m){if("function"==typeof m)return m(v,_);switch(m){case"pathParamsChange":return!Ve(v.url,_.url);case"pathParamsOrQueryParamsChange":return!Ve(v.url,_.url)||!gt(v.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eo(v,_)||!gt(v.queryParams,_.queryParams);default:return!Eo(v,_)}}(z,U,U.routeConfig.runGuardsAndResolvers);Le?O.canActivateChecks.push(new Jt(C)):(U.data=z.data,U._resolvedData=z._resolvedData),br(v,_,U.component?he?he.children:null:m,C,O),Le&&he&&he.outlet&&he.outlet.isActivated&&O.canDeactivateChecks.push(new Fi(he.outlet.component,z))}else z&&Wo(_,he,O),O.canActivateChecks.push(new Jt(C)),br(v,null,U.component?he?he.children:null:m,C,O)})(z,U[z.value.outlet],m,C.concat([z.value]),O),delete U[z.value.outlet]}),Yt(U,(z,he)=>Wo(z,m.getContext(he),O)),O}function Wo(v,_,m){const C=vo(v),O=v.value;Yt(C,(U,z)=>{Wo(U,O.component?_?_.children.getContext(z):null:_,m)}),m.canDeactivateChecks.push(new Fi(O.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,O))}function Re(v){return"function"==typeof v}function Io(v){return v instanceof ue.K||"EmptyError"===v?.name}const to=Symbol("INITIAL_VALUE");function Do(){return(0,dt.w)(v=>Ge(v.map(_=>_.pipe((0,be.q)(1),(0,Me.O)(to)))).pipe((0,pt.U)(_=>{for(const m of _)if(!0!==m){if(m===to)return to;if(!1===m||m instanceof qt)return m}return!0}),(0,Pe.h)(_=>_!==to),(0,be.q)(1)))}function la(v){return(0,Qe.z)((0,lt.b)(_=>{if(Ai(_))throw Ys(0,_)}),(0,pt.U)(_=>!0===_))}const Ns={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Na(v,_,m,C,O){const U=Ps(v,_,m);return U.matched?function ys(v,_,m,C){const O=_.canMatch;if(!O||0===O.length)return(0,p.of)(!0);const U=O.map(z=>{const he=ps(z,v);return Pt(function gs(v){return v&&Re(v.canMatch)}(he)?he.canMatch(_,m):v.runInContext(()=>he(_,m)))});return(0,p.of)(U).pipe(Do(),la())}(C=Ms(_,C),_,m).pipe((0,pt.U)(z=>!0===z?U:{...Ns})):(0,p.of)(U)}function Ps(v,_,m){if(""===_.path)return"full"===_.pathMatch&&(v.hasChildren()||m.length>0)?{...Ns}:{matched:!0,consumedSegments:[],remainingSegments:m,parameters:{},positionalParamSegments:{}};const O=(_.matcher||xn)(m,v,_);if(!O)return{...Ns};const U={};Yt(O.posParams,(he,Le)=>{U[Le]=he.path});const z=O.consumed.length>0?{...U,...O.consumed[O.consumed.length-1].parameters}:U;return{matched:!0,consumedSegments:O.consumed,remainingSegments:m.slice(O.consumed.length),parameters:z,positionalParamSegments:O.posParams??{}}}function no(v,_,m,C){if(m.length>0&&function ru(v,_,m){return m.some(C=>da(v,_,C)&&Dr(C)!==Lt)}(v,m,C)){const U=new Ut(_,function To(v,_,m,C){const O={};O[Lt]=C,C._sourceSegment=v,C._segmentIndexShift=_.length;for(const U of m)if(""===U.path&&Dr(U)!==Lt){const z=new Ut([],{});z._sourceSegment=v,z._segmentIndexShift=_.length,O[Dr(U)]=z}return O}(v,_,C,new Ut(m,v.children)));return U._sourceSegment=v,U._segmentIndexShift=_.length,{segmentGroup:U,slicedSegments:[]}}if(0===m.length&&function Su(v,_,m){return m.some(C=>da(v,_,C))}(v,m,C)){const U=new Ut(v.segments,function Pa(v,_,m,C,O){const U={};for(const z of C)if(da(v,m,z)&&!O[Dr(z)]){const he=new Ut([],{});he._sourceSegment=v,he._segmentIndexShift=_.length,U[Dr(z)]=he}return{...O,...U}}(v,_,m,C,v.children));return U._sourceSegment=v,U._segmentIndexShift=_.length,{segmentGroup:U,slicedSegments:m}}const O=new Ut(v.segments,v.children);return O._sourceSegment=v,O._segmentIndexShift=_.length,{segmentGroup:O,slicedSegments:m}}function da(v,_,m){return(!(v.hasChildren()||_.length>0)||"full"!==m.pathMatch)&&""===m.path}function ka(v,_,m,C){return!!(Dr(v)===C||C!==Lt&&da(_,m,v))&&("**"===v.path||Ps(_,v,m).matched)}function iu(v,_,m){return 0===_.length&&!v.children[m]}const Fa=!1;class ro{constructor(_){this.segmentGroup=_||null}}class Wr{constructor(_){this.urlTree=_}}function vi(v){return Ue(new ro(v))}function Tn(v){return Ue(new Wr(v))}class Pr{constructor(_,m,C,O,U){this.injector=_,this.configLoader=m,this.urlSerializer=C,this.urlTree=O,this.config=U,this.allowRedirects=!0}apply(){const _=no(this.urlTree.root,[],[],this.config).segmentGroup,m=new Ut(_.segments,_.children);return this.expandSegmentGroup(this.injector,this.config,m,Lt).pipe((0,pt.U)(U=>this.createUrlTree(Gi(U),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ht(U=>{if(U instanceof Wr)return this.allowRedirects=!1,this.match(U.urlTree);throw U instanceof ro?this.noMatchError(U):U}))}match(_){return this.expandSegmentGroup(this.injector,this.config,_.root,Lt).pipe((0,pt.U)(O=>this.createUrlTree(Gi(O),_.queryParams,_.fragment))).pipe(ht(O=>{throw O instanceof ro?this.noMatchError(O):O}))}noMatchError(_){return new I.vHH(4002,Fa)}createUrlTree(_,m,C){const O=ts(_);return new qt(O,m,C)}expandSegmentGroup(_,m,C,O){return 0===C.segments.length&&C.hasChildren()?this.expandChildren(_,m,C).pipe((0,pt.U)(U=>new Ut([],U))):this.expandSegment(_,C,m,C.segments,O,!0)}expandChildren(_,m,C){const O=[];for(const U of Object.keys(C.children))"primary"===U?O.unshift(U):O.push(U);return(0,j.D)(O).pipe(et(U=>{const z=C.children[U],he=xa(m,U);return this.expandSegmentGroup(_,he,z,U).pipe((0,pt.U)(Le=>({segment:Le,outlet:U})))}),(0,Cn.R)((U,z)=>(U[z.outlet]=z.segment,U),{}),xt())}expandSegment(_,m,C,O,U,z){return(0,j.D)(C).pipe(et(he=>this.expandSegmentAgainstRoute(_,m,C,he,O,U,z).pipe(ht(Dt=>{if(Dt instanceof ro)return(0,p.of)(null);throw Dt}))),(0,Xe.P)(he=>!!he),ht((he,Le)=>{if(Io(he))return iu(m,O,U)?(0,p.of)(new Ut([],{})):vi(m);throw he}))}expandSegmentAgainstRoute(_,m,C,O,U,z,he){return ka(O,m,U,z)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(_,m,O,U,z):he&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(_,m,C,O,U,z):vi(m):vi(m)}expandSegmentAgainstRouteUsingRedirect(_,m,C,O,U,z){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(_,C,O,z):this.expandRegularSegmentAgainstRouteUsingRedirect(_,m,C,O,U,z)}expandWildCardWithParamsAgainstRouteUsingRedirect(_,m,C,O){const U=this.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?Tn(U):this.lineralizeSegments(C,U).pipe((0,$e.z)(z=>{const he=new Ut(z,{});return this.expandSegment(_,he,m,z,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(_,m,C,O,U,z){const{matched:he,consumedSegments:Le,remainingSegments:Dt,positionalParamSegments:Ct}=Ps(m,O,U);if(!he)return vi(m);const wn=this.applyRedirectCommands(Le,O.redirectTo,Ct);return O.redirectTo.startsWith("/")?Tn(wn):this.lineralizeSegments(O,wn).pipe((0,$e.z)(vr=>this.expandSegment(_,m,C,vr.concat(Dt),z,!1)))}matchSegmentAgainstRoute(_,m,C,O,U){return"**"===C.path?(_=Ms(C,_),C.loadChildren?(C._loadedRoutes?(0,p.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):this.configLoader.loadChildren(_,C)).pipe((0,pt.U)(he=>(C._loadedRoutes=he.routes,C._loadedInjector=he.injector,new Ut(O,{})))):(0,p.of)(new Ut(O,{}))):Na(m,C,O,_).pipe((0,dt.w)(({matched:z,consumedSegments:he,remainingSegments:Le})=>z?this.getChildConfig(_=C._injector??_,C,O).pipe((0,$e.z)(Ct=>{const wn=Ct.injector??_,vr=Ct.routes,{segmentGroup:Ji,slicedSegments:Zr}=no(m,he,Le,vr),A=new Ut(Ji.segments,Ji.children);if(0===Zr.length&&A.hasChildren())return this.expandChildren(wn,vr,A).pipe((0,pt.U)(pe=>new Ut(he,pe)));if(0===vr.length&&0===Zr.length)return(0,p.of)(new Ut(he,{}));const R=Dr(C)===U;return this.expandSegment(wn,A,vr,Zr,R?Lt:U,!0).pipe((0,pt.U)(J=>new Ut(he.concat(J.segments),J.children)))})):vi(m)))}getChildConfig(_,m,C){return m.children?(0,p.of)({routes:m.children,injector:_}):m.loadChildren?void 0!==m._loadedRoutes?(0,p.of)({routes:m._loadedRoutes,injector:m._loadedInjector}):function Co(v,_,m,C){const O=_.canLoad;if(void 0===O||0===O.length)return(0,p.of)(!0);const U=O.map(z=>{const he=ps(z,v);return Pt(function Ra(v){return v&&Re(v.canLoad)}(he)?he.canLoad(_,m):v.runInContext(()=>he(_,m)))});return(0,p.of)(U).pipe(Do(),la())}(_,m,C).pipe((0,$e.z)(O=>O?this.configLoader.loadChildren(_,m).pipe((0,lt.b)(U=>{m._loadedRoutes=U.routes,m._loadedInjector=U.injector})):function La(v){return Ue(Qs(Fa,3))}())):(0,p.of)({routes:[],injector:_})}lineralizeSegments(_,m){let C=[],O=m.root;for(;;){if(C=C.concat(O.segments),0===O.numberOfChildren)return(0,p.of)(C);if(O.numberOfChildren>1||!O.children[Lt])return Ue(new I.vHH(4e3,Fa));O=O.children[Lt]}}applyRedirectCommands(_,m,C){return this.applyRedirectCreateUrlTree(m,this.urlSerializer.parse(m),_,C)}applyRedirectCreateUrlTree(_,m,C,O){const U=this.createSegmentGroup(_,m.root,C,O);return new qt(U,this.createQueryParams(m.queryParams,this.urlTree.queryParams),m.fragment)}createQueryParams(_,m){const C={};return Yt(_,(O,U)=>{if("string"==typeof O&&O.startsWith(":")){const he=O.substring(1);C[U]=m[he]}else C[U]=O}),C}createSegmentGroup(_,m,C,O){const U=this.createSegments(_,m.segments,C,O);let z={};return Yt(m.children,(he,Le)=>{z[Le]=this.createSegmentGroup(_,he,C,O)}),new Ut(U,z)}createSegments(_,m,C,O){return m.map(U=>U.path.startsWith(":")?this.findPosParam(_,U,O):this.findOrReturn(U,C))}findPosParam(_,m,C){const O=C[m.path.substring(1)];if(!O)throw new I.vHH(4001,Fa);return O}findOrReturn(_,m){let C=0;for(const O of m){if(O.path===_.path)return m.splice(C),O;C++}return _}}class Ko{}class k{constructor(_,m,C,O,U,z,he){this.injector=_,this.rootComponentType=m,this.config=C,this.urlTree=O,this.url=U,this.paramsInheritanceStrategy=z,this.urlSerializer=he}recognize(){const _=no(this.urlTree.root,[],[],this.config.filter(m=>void 0===m.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,_,Lt).pipe((0,pt.U)(m=>{if(null===m)return null;const C=new Ki([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new Ni(C,m),U=new eu(this.url,O);return this.inheritParamsAndData(U._root),U}))}inheritParamsAndData(_){const m=_.value,C=Sa(m,this.paramsInheritanceStrategy);m.params=Object.freeze(C.params),m.data=Object.freeze(C.data),_.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(_,m,C,O){return 0===C.segments.length&&C.hasChildren()?this.processChildren(_,m,C):this.processSegment(_,m,C,C.segments,O)}processChildren(_,m,C){return(0,j.D)(Object.keys(C.children)).pipe(et(O=>{const U=C.children[O],z=xa(m,O);return this.processSegmentGroup(_,z,U,O)}),(0,Cn.R)((O,U)=>O&&U?(O.push(...U),O):null),function pn(v,_=!1){return(0,ge.e)((m,C)=>{let O=0;m.subscribe((0,ce.x)(C,U=>{const z=v(U,O++);(z||_)&&C.next(U),!z&&C.complete()}))})}(O=>null!==O),(0,mt.d)(null),xt(),(0,pt.U)(O=>{if(null===O)return null;const U=Ae(O);return function x(v){v.sort((_,m)=>_.value.outlet===Lt?-1:m.value.outlet===Lt?1:_.value.outlet.localeCompare(m.value.outlet))}(U),U}))}processSegment(_,m,C,O,U){return(0,j.D)(m).pipe(et(z=>this.processSegmentAgainstRoute(z._injector??_,z,C,O,U)),(0,Xe.P)(z=>!!z),ht(z=>{if(Io(z))return iu(C,O,U)?(0,p.of)([]):(0,p.of)(null);throw z}))}processSegmentAgainstRoute(_,m,C,O,U){if(m.redirectTo||!ka(m,C,O,U))return(0,p.of)(null);let z;if("**"===m.path){const he=O.length>0?Jn(O).parameters:{},Le=fn(C)+O.length,Dt=new Ki(O,he,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,En(m),Dr(m),m.component??m._loadedComponent??null,m,Rt(C),Le,sn(m));z=(0,p.of)({snapshot:Dt,consumedSegments:[],remainingSegments:[]})}else z=Na(C,m,O,_).pipe((0,pt.U)(({matched:he,consumedSegments:Le,remainingSegments:Dt,parameters:Ct})=>{if(!he)return null;const wn=fn(C)+Le.length;return{snapshot:new Ki(Le,Ct,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,En(m),Dr(m),m.component??m._loadedComponent??null,m,Rt(C),wn,sn(m)),consumedSegments:Le,remainingSegments:Dt}}));return z.pipe((0,dt.w)(he=>{if(null===he)return(0,p.of)(null);const{snapshot:Le,consumedSegments:Dt,remainingSegments:Ct}=he;_=m._injector??_;const wn=m._loadedInjector??_,vr=function H(v){return v.children?v.children:v.loadChildren?v._loadedRoutes:[]}(m),{segmentGroup:Ji,slicedSegments:Zr}=no(C,Dt,Ct,vr.filter(R=>void 0===R.redirectTo));if(0===Zr.length&&Ji.hasChildren())return this.processChildren(wn,vr,Ji).pipe((0,pt.U)(R=>null===R?null:[new Ni(Le,R)]));if(0===vr.length&&0===Zr.length)return(0,p.of)([new Ni(Le,[])]);const A=Dr(m)===U;return this.processSegment(wn,vr,Ji,Zr,A?Lt:U).pipe((0,pt.U)(R=>null===R?null:[new Ni(Le,R)]))}))}}function ee(v){const _=v.value.routeConfig;return _&&""===_.path&&void 0===_.redirectTo}function Ae(v){const _=[],m=new Set;for(const C of v){if(!ee(C)){_.push(C);continue}const O=_.find(U=>C.value.routeConfig===U.value.routeConfig);void 0!==O?(O.children.push(...C.children),m.add(O)):_.push(C)}for(const C of m){const O=Ae(C.children);_.push(new Ni(C.value,O))}return _.filter(C=>!m.has(C))}function Rt(v){let _=v;for(;_._sourceSegment;)_=_._sourceSegment;return _}function fn(v){let _=v,m=_._segmentIndexShift??0;for(;_._sourceSegment;)_=_._sourceSegment,m+=_._segmentIndexShift??0;return m-1}function En(v){return v.data||{}}function sn(v){return v.resolve||{}}function wi(v){return"string"==typeof v.title||null===v.title}function io(v){return(0,dt.w)(_=>{const m=v(_);return m?(0,j.D)(m).pipe((0,pt.U)(()=>_)):(0,p.of)(_)})}const ss=new I.OlP("ROUTES");let So=(()=>{class v{constructor(m,C){this.injector=m,this.compiler=C,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(m){if(this.componentLoaders.get(m))return this.componentLoaders.get(m);if(m._loadedComponent)return(0,p.of)(m._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(m);const C=Pt(m.loadComponent()).pipe((0,pt.U)(Qo),(0,lt.b)(U=>{this.onLoadEndListener&&this.onLoadEndListener(m),m._loadedComponent=U}),ln(()=>{this.componentLoaders.delete(m)})),O=new Fe(C,()=>new ct.x).pipe(Te());return this.componentLoaders.set(m,O),O}loadChildren(m,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,p.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const U=this.loadModuleFactoryOrRoutes(C.loadChildren).pipe((0,pt.U)(he=>{this.onLoadEndListener&&this.onLoadEndListener(C);let Le,Dt,Ct=!1;Array.isArray(he)?Dt=he:(Le=he.create(m).injector,Dt=Er(Le.get(ss,[],I.XFs.Self|I.XFs.Optional)));return{routes:Dt.map(yi),injector:Le}}),ln(()=>{this.childrenLoaders.delete(C)})),z=new Fe(U,()=>new ct.x).pipe(Te());return this.childrenLoaders.set(C,z),z}loadModuleFactoryOrRoutes(m){return Pt(m()).pipe((0,pt.U)(Qo),(0,$e.z)(O=>O instanceof I.YKP||Array.isArray(O)?(0,p.of)(O):(0,j.D)(this.compiler.compileModuleAsync(O))))}}return v.\u0275fac=function(m){return new(m||v)(I.LFG(I.zs3),I.LFG(I.Sil))},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function Qo(v){return function Ui(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let ks=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ct.x,this.configLoader=(0,I.f3M)(So),this.environmentInjector=(0,I.f3M)(I.lqb),this.urlSerializer=(0,I.f3M)(kt),this.rootContexts=(0,I.f3M)(Gr),this.navigationId=0,this.afterPreactivation=()=>(0,p.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=O=>this.events.next(new Ss(O)),this.configLoader.onLoadStartListener=O=>this.events.next(new yo(O))}complete(){this.transitions?.complete()}handleNavigationRequest(m){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,...m,id:C})}setupNavigations(m){return this.transitions=new ae.X({id:0,targetPageId:0,currentUrlTree:m.currentUrlTree,currentRawUrl:m.currentUrlTree,extractedUrl:m.urlHandlingStrategy.extract(m.currentUrlTree),urlAfterRedirects:m.urlHandlingStrategy.extract(m.currentUrlTree),rawUrl:m.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Wi,restoredState:null,currentSnapshot:m.routerState.snapshot,targetSnapshot:null,currentRouterState:m.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Pe.h)(C=>0!==C.id),(0,pt.U)(C=>({...C,extractedUrl:m.urlHandlingStrategy.extract(C.rawUrl)})),(0,dt.w)(C=>{let O=!1,U=!1;return(0,p.of)(C).pipe((0,lt.b)(z=>{this.currentNavigation={id:z.id,initialUrl:z.rawUrl,extractedUrl:z.extractedUrl,trigger:z.source,extras:z.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,dt.w)(z=>{const he=m.browserUrlTree.toString(),Le=!m.navigated||z.extractedUrl.toString()!==he||he!==m.currentUrlTree.toString();if(!Le&&"reload"!==(z.extras.onSameUrlNavigation??m.onSameUrlNavigation)){const Ct="";return this.events.next(new jr(z.id,m.serializeUrl(C.rawUrl),Ct,0)),m.rawUrlTree=z.rawUrl,z.resolve(null),je.E}if(m.urlHandlingStrategy.shouldProcessUrl(z.rawUrl))return Jo(z.source)&&(m.browserUrlTree=z.extractedUrl),(0,p.of)(z).pipe((0,dt.w)(Ct=>{const wn=this.transitions?.getValue();return this.events.next(new ur(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),Ct.source,Ct.restoredState)),wn!==this.transitions?.getValue()?je.E:Promise.resolve(Ct)}),function Va(v,_,m,C){return(0,dt.w)(O=>function mn(v,_,m,C,O){return new Pr(v,_,m,C,O).apply()}(v,_,m,O.extractedUrl,C).pipe((0,pt.U)(U=>({...O,urlAfterRedirects:U}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,m.config),(0,lt.b)(Ct=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ct.urlAfterRedirects},C.urlAfterRedirects=Ct.urlAfterRedirects}),function yr(v,_,m,C,O){return(0,$e.z)(U=>function T(v,_,m,C,O,U,z="emptyOnly"){return new k(v,_,m,C,O,z,U).recognize().pipe((0,dt.w)(he=>null===he?function Yo(v){return new fe.y(_=>_.error(v))}(new Ko):(0,p.of)(he)))}(v,_,m,U.urlAfterRedirects,C.serialize(U.urlAfterRedirects),C,O).pipe((0,pt.U)(z=>({...U,targetSnapshot:z}))))}(this.environmentInjector,this.rootComponentType,m.config,this.urlSerializer,m.paramsInheritanceStrategy),(0,lt.b)(Ct=>{if(C.targetSnapshot=Ct.targetSnapshot,"eager"===m.urlUpdateStrategy){if(!Ct.extras.skipLocationChange){const vr=m.urlHandlingStrategy.merge(Ct.urlAfterRedirects,Ct.rawUrl);m.setBrowserUrl(vr,Ct)}m.browserUrlTree=Ct.urlAfterRedirects}const wn=new ba(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(wn)}));if(Le&&m.urlHandlingStrategy.shouldProcessUrl(m.rawUrlTree)){const{id:Ct,extractedUrl:wn,source:vr,restoredState:Ji,extras:Zr}=z,A=new ur(Ct,this.urlSerializer.serialize(wn),vr,Ji);this.events.next(A);const R=Xa(wn,this.rootComponentType).snapshot;return C={...z,targetSnapshot:R,urlAfterRedirects:wn,extras:{...Zr,skipLocationChange:!1,replaceUrl:!1}},(0,p.of)(C)}{const Ct="";return this.events.next(new jr(z.id,m.serializeUrl(C.extractedUrl),Ct,1)),m.rawUrlTree=z.rawUrl,z.resolve(null),je.E}}),(0,lt.b)(z=>{const he=new qn(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot);this.events.next(he)}),(0,pt.U)(z=>C={...z,guards:tu(z.targetSnapshot,z.currentSnapshot,this.rootContexts)}),function Os(v,_){return(0,$e.z)(m=>{const{targetSnapshot:C,currentSnapshot:O,guards:{canActivateChecks:U,canDeactivateChecks:z}}=m;return 0===z.length&&0===U.length?(0,p.of)({...m,guardsResult:!0}):function Nr(v,_,m,C){return(0,j.D)(v).pipe((0,$e.z)(O=>function bo(v,_,m,C,O){const U=_&&_.routeConfig?_.routeConfig.canDeactivate:null;if(!U||0===U.length)return(0,p.of)(!0);const z=U.map(he=>{const Le=Or(_)??O,Dt=ps(he,Le);return Pt(function ca(v){return v&&Re(v.canDeactivate)}(Dt)?Dt.canDeactivate(v,_,m,C):Le.runInContext(()=>Dt(v,_,m,C))).pipe((0,Xe.P)())});return(0,p.of)(z).pipe(Do())}(O.component,O.route,m,_,C)),(0,Xe.P)(O=>!0!==O,!0))}(z,C,O,v).pipe((0,$e.z)(he=>he&&function dn(v){return"boolean"==typeof v}(he)?function si(v,_,m,C){return(0,j.D)(_).pipe(et(O=>(0,Oe.z)(function ms(v,_){return null!==v&&_&&_(new ci(v)),(0,p.of)(!0)}(O.route.parent,C),function rs(v,_){return null!==v&&_&&_(new rc(v)),(0,p.of)(!0)}(O.route,C),function nu(v,_,m){const C=_[_.length-1],U=_.slice(0,_.length-1).reverse().map(z=>function eo(v){const _=v.routeConfig?v.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:v,guards:_}:null}(z)).filter(z=>null!==z).map(z=>ze(()=>{const he=z.guards.map(Le=>{const Dt=Or(z.node)??m,Ct=ps(Le,Dt);return Pt(function Cr(v){return v&&Re(v.canActivateChild)}(Ct)?Ct.canActivateChild(C,v):Dt.runInContext(()=>Ct(C,v))).pipe((0,Xe.P)())});return(0,p.of)(he).pipe(Do())}));return(0,p.of)(U).pipe(Do())}(v,O.path,m),function Vi(v,_,m){const C=_.routeConfig?_.routeConfig.canActivate:null;if(!C||0===C.length)return(0,p.of)(!0);const O=C.map(U=>ze(()=>{const z=Or(_)??m,he=ps(U,z);return Pt(function Oa(v){return v&&Re(v.canActivate)}(he)?he.canActivate(_,v):z.runInContext(()=>he(_,v))).pipe((0,Xe.P)())}));return(0,p.of)(O).pipe(Do())}(v,O.route,m))),(0,Xe.P)(O=>!0!==O,!0))}(C,U,v,_):(0,p.of)(he)),(0,pt.U)(he=>({...m,guardsResult:he})))})}(this.environmentInjector,z=>this.events.next(z)),(0,lt.b)(z=>{if(C.guardsResult=z.guardsResult,Ai(z.guardsResult))throw Ys(0,z.guardsResult);const he=new gr(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot,!!z.guardsResult);this.events.next(he)}),(0,Pe.h)(z=>!!z.guardsResult||(m.restoreHistory(z),this.cancelNavigationTransition(z,"",3),!1)),io(z=>{if(z.guards.canActivateChecks.length)return(0,p.of)(z).pipe((0,lt.b)(he=>{const Le=new ia(he.id,this.urlSerializer.serialize(he.extractedUrl),this.urlSerializer.serialize(he.urlAfterRedirects),he.targetSnapshot);this.events.next(Le)}),(0,dt.w)(he=>{let Le=!1;return(0,p.of)(he).pipe(function Xt(v,_){return(0,$e.z)(m=>{const{targetSnapshot:C,guards:{canActivateChecks:O}}=m;if(!O.length)return(0,p.of)(m);let U=0;return(0,j.D)(O).pipe(et(z=>function Yn(v,_,m,C){const O=v.routeConfig,U=v._resolve;return void 0!==O?.title&&!wi(O)&&(U[Vn]=O.title),function _i(v,_,m,C){const O=function Ei(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===O.length)return(0,p.of)({});const U={};return(0,j.D)(O).pipe((0,$e.z)(z=>function qr(v,_,m,C){const O=Or(_)??C,U=ps(v,O);return Pt(U.resolve?U.resolve(_,m):O.runInContext(()=>U(_,m)))}(v[z],_,m,C).pipe((0,Xe.P)(),(0,lt.b)(he=>{U[z]=he}))),me(1),function Ln(v){return(0,pt.U)(()=>v)}(U),ht(z=>Io(z)?je.E:Ue(z)))}(U,v,_,C).pipe((0,pt.U)(z=>(v._resolvedData=z,v.data=Sa(v,m).resolve,O&&wi(O)&&(v.data[Vn]=O.title),null)))}(z.route,C,v,_)),(0,lt.b)(()=>U++),me(1),(0,$e.z)(z=>U===O.length?(0,p.of)(m):je.E))})}(m.paramsInheritanceStrategy,this.environmentInjector),(0,lt.b)({next:()=>Le=!0,complete:()=>{Le||(m.restoreHistory(he),this.cancelNavigationTransition(he,"",2))}}))}),(0,lt.b)(he=>{const Le=new mo(he.id,this.urlSerializer.serialize(he.extractedUrl),this.urlSerializer.serialize(he.urlAfterRedirects),he.targetSnapshot);this.events.next(Le)}))}),io(z=>{const he=Le=>{const Dt=[];Le.routeConfig?.loadComponent&&!Le.routeConfig._loadedComponent&&Dt.push(this.configLoader.loadComponent(Le.routeConfig).pipe((0,lt.b)(Ct=>{Le.component=Ct}),(0,pt.U)(()=>{})));for(const Ct of Le.children)Dt.push(...he(Ct));return Dt};return Ge(he(z.targetSnapshot.root)).pipe((0,mt.d)(),(0,be.q)(1))}),io(()=>this.afterPreactivation()),(0,pt.U)(z=>{const he=function Go(v,_,m){const C=ds(v,_._root,m?m._root:void 0);return new Ta(C,_)}(m.routeReuseStrategy,z.targetSnapshot,z.currentRouterState);return C={...z,targetRouterState:he}}),(0,lt.b)(z=>{m.currentUrlTree=z.urlAfterRedirects,m.rawUrlTree=m.urlHandlingStrategy.merge(z.urlAfterRedirects,z.rawUrl),m.routerState=z.targetRouterState,"deferred"===m.urlUpdateStrategy&&(z.extras.skipLocationChange||m.setBrowserUrl(m.rawUrlTree,z),m.browserUrlTree=z.urlAfterRedirects)}),((v,_,m)=>(0,pt.U)(C=>(new er(_,C.targetRouterState,C.currentRouterState,m).activate(v),C)))(this.rootContexts,m.routeReuseStrategy,z=>this.events.next(z)),(0,lt.b)({next:z=>{O=!0,this.lastSuccessfulNavigation=this.currentNavigation,m.navigated=!0,this.events.next(new us(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(m.currentUrlTree))),m.titleStrategy?.updateTitle(z.targetRouterState.snapshot),z.resolve(!0)},complete:()=>{O=!0}}),ln(()=>{O||U||this.cancelNavigationTransition(C,"",1),this.currentNavigation?.id===C.id&&(this.currentNavigation=null)}),ht(z=>{if(U=!0,xs(z)){oa(z)||(m.navigated=!0,m.restoreHistory(C,!0));const he=new qi(C.id,this.urlSerializer.serialize(C.extractedUrl),z.message,z.cancellationCode);if(this.events.next(he),oa(z)){const Le=m.urlHandlingStrategy.merge(z.url,m.rawUrlTree),Dt={skipLocationChange:C.extras.skipLocationChange,replaceUrl:"eager"===m.urlUpdateStrategy||Jo(C.source)};m.scheduleNavigation(Le,Wi,null,Dt,{resolve:C.resolve,reject:C.reject,promise:C.promise})}else C.resolve(!1)}else{m.restoreHistory(C,!0);const he=new Ri(C.id,this.urlSerializer.serialize(C.extractedUrl),z,C.targetSnapshot??void 0);this.events.next(he);try{C.resolve(m.errorHandler(z))}catch(Le){C.reject(Le)}}return je.E}))}))}cancelNavigationTransition(m,C,O){const U=new qi(m.id,this.urlSerializer.serialize(m.extractedUrl),C,O);this.events.next(U),m.resolve(!1)}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function Jo(v){return v!==Wi}let li=(()=>{class v{buildTitle(m){let C,O=m.root;for(;void 0!==O;)C=this.getResolvedTitleForRoute(O)??C,O=O.children.find(U=>U.outlet===Lt);return C}getResolvedTitleForRoute(m){return m.data[Vn]}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(){return(0,I.f3M)(Ii)},providedIn:"root"}),v})(),Ii=(()=>{class v extends li{constructor(m){super(),this.title=m}updateTitle(m){const C=this.buildTitle(m);void 0!==C&&this.title.setTitle(C)}}return v.\u0275fac=function(m){return new(m||v)(I.LFG(Dn.Dx))},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),oo=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(){return(0,I.f3M)(ha)},providedIn:"root"}),v})();class Fs{shouldDetach(_){return!1}store(_,m){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,m){return _.routeConfig===m.routeConfig}}let ha=(()=>{class v extends Fs{}return v.\u0275fac=function(){let _;return function(C){return(_||(_=I.n5z(v)))(C||v)}}(),v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Xo=new I.OlP("",{providedIn:"root",factory:()=>({})});let Ba=(()=>{class v{}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:function(){return(0,I.f3M)(Au)},providedIn:"root"}),v})(),Au=(()=>{class v{shouldProcessUrl(m){return!0}extract(m){return m}merge(m,C){return m}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function su(v){throw v}function Bi(v,_,m){return _.parse("/")}const ou={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hn=(()=>{class v{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,I.f3M)(I.c2e),this.isNgZoneEnabled=!1,this.options=(0,I.f3M)(Xo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||su,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Bi,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,I.f3M)(Ba),this.routeReuseStrategy=(0,I.f3M)(oo),this.urlCreationStrategy=(0,I.f3M)(Hc),this.titleStrategy=(0,I.f3M)(li),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Er((0,I.f3M)(ss,{optional:!0})??[]),this.navigationTransitions=(0,I.f3M)(ks),this.urlSerializer=(0,I.f3M)(kt),this.location=(0,I.f3M)(nt.Ye),this.isNgZoneEnabled=(0,I.f3M)(I.R0b)instanceof I.R0b&&I.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new qt,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xa(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(m=>{this.lastSuccessfulId=m.id,this.currentPageId=m.targetPageId},m=>{this.console.warn(`Unhandled Navigation Error: ${m}`)})}resetRootComponentType(m){this.routerState.root.component=m,this.navigationTransitions.rootComponentType=m}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const m=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Wi,m)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(m=>{const C="popstate"===m.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(m.url,C,m.state)},0)}))}navigateToSyncWithBrowser(m,C,O){const U={replaceUrl:!0},z=O?.navigationId?O:null;if(O){const Le={...O};delete Le.navigationId,delete Le.\u0275routerPageId,0!==Object.keys(Le).length&&(U.state=Le)}const he=this.parseUrl(m);this.scheduleNavigation(he,C,z,U)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(m){this.config=m.map(yi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(m,C={}){const{relativeTo:O,queryParams:U,fragment:z,queryParamsHandling:he,preserveFragment:Le}=C,Dt=Le?this.currentUrlTree.fragment:z;let Ct=null;switch(he){case"merge":Ct={...this.currentUrlTree.queryParams,...U};break;case"preserve":Ct=this.currentUrlTree.queryParams;break;default:Ct=U||null}return null!==Ct&&(Ct=this.removeEmptyProps(Ct)),this.urlCreationStrategy.createUrlTree(O,this.routerState,this.currentUrlTree,m,Ct,Dt??null)}navigateByUrl(m,C={skipLocationChange:!1}){const O=Ai(m)?m:this.parseUrl(m),U=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(U,Wi,null,C)}navigate(m,C={skipLocationChange:!1}){return function xu(v){for(let _=0;_<v.length;_++){if(null==v[_])throw new I.vHH(4008,!1)}}(m),this.navigateByUrl(this.createUrlTree(m,C),C)}serializeUrl(m){return this.urlSerializer.serialize(m)}parseUrl(m){let C;try{C=this.urlSerializer.parse(m)}catch(O){C=this.malformedUriErrorHandler(O,this.urlSerializer,m)}return C}isActive(m,C){let O;if(O=!0===C?{...ou}:!1===C?{...uo}:C,Ai(m))return Mn(this.currentUrlTree,m,O);const U=this.parseUrl(m);return Mn(this.currentUrlTree,U,O)}removeEmptyProps(m){return Object.keys(m).reduce((C,O)=>{const U=m[O];return null!=U&&(C[O]=U),C},{})}scheduleNavigation(m,C,O,U,z){if(this.disposed)return Promise.resolve(!1);let he,Le,Dt,Ct;return z?(he=z.resolve,Le=z.reject,Dt=z.promise):Dt=new Promise((wn,vr)=>{he=wn,Le=vr}),Ct="computed"===this.canceledNavigationResolution?O&&O.\u0275routerPageId?O.\u0275routerPageId:U.replaceUrl||U.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Ct,source:C,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:m,extras:U,resolve:he,reject:Le,promise:Dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Dt.catch(wn=>Promise.reject(wn))}setBrowserUrl(m,C){const O=this.urlSerializer.serialize(m),U={...C.extras.state,...this.generateNgRouterState(C.id,C.targetPageId)};this.location.isCurrentPathEqualTo(O)||C.extras.replaceUrl?this.location.replaceState(O,"",U):this.location.go(O,"",U)}restoreHistory(m,C=!1){if("computed"===this.canceledNavigationResolution){const O=this.currentPageId-m.targetPageId;"popstate"!==m.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===O?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===O&&(this.resetState(m),this.browserUrlTree=m.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(O)}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(m),this.resetUrlToCurrentUrlTree())}resetState(m){this.routerState=m.currentRouterState,this.currentUrlTree=m.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,m.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(m,C){return"computed"===this.canceledNavigationResolution?{navigationId:m,\u0275routerPageId:C}:{navigationId:m}}}return v.\u0275fac=function(m){return new(m||v)},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),fa=(()=>{class v{constructor(m,C,O,U,z,he){this.router=m,this.route=C,this.tabIndexAttribute=O,this.renderer=U,this.el=z,this.locationStrategy=he,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ct.x;const Le=z.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Le||"area"===Le,this.isAnchorElement?this.subscription=m.events.subscribe(Dt=>{Dt instanceof us&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(m){this._preserveFragment=(0,I.D6c)(m)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(m){this._skipLocationChange=(0,I.D6c)(m)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(m){this._replaceUrl=(0,I.D6c)(m)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(m){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",m)}ngOnChanges(m){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(m){null!=m?(this.commands=Array.isArray(m)?m:[m],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(m,C,O,U,z){return!!(null===this.urlTree||this.isAnchorElement&&(0!==m||C||O||U||z||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const m=null===this.href?null:(0,I.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",m)}applyAttributeValue(m,C){const O=this.renderer,U=this.el.nativeElement;null!==C?O.setAttribute(U,m,C):O.removeAttribute(U,m)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return v.\u0275fac=function(m){return new(m||v)(I.Y36(Hn),I.Y36(Pi),I.$8M("tabindex"),I.Y36(I.Qsj),I.Y36(I.SBq),I.Y36(nt.S$))},v.\u0275dir=I.lG2({type:v,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(m,C){1&m&&I.NdJ("click",function(U){return C.onClick(U.button,U.ctrlKey,U.shiftKey,U.altKey,U.metaKey)}),2&m&&I.uIk("target",C.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[I.TTD]}),v})(),di=(()=>{class v{get isActive(){return this._isActive}constructor(m,C,O,U,z){this.router=m,this.element=C,this.renderer=O,this.cdr=U,this.link=z,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new I.vpe,this.routerEventsSubscription=m.events.subscribe(he=>{he instanceof us&&this.update()})}ngAfterContentInit(){(0,p.of)(this.links.changes,(0,p.of)(null)).pipe((0,Kn.J)()).subscribe(m=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const m=[...this.links.toArray(),this.link].filter(C=>!!C).map(C=>C.onChanges);this.linkInputChangesSubscription=(0,j.D)(m).pipe((0,Kn.J)()).subscribe(C=>{this._isActive!==this.isLinkActive(this.router)(C)&&this.update()})}set routerLinkActive(m){const C=Array.isArray(m)?m:m.split(" ");this.classes=C.filter(O=>!!O)}ngOnChanges(m){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const m=this.hasActiveLinks();this._isActive!==m&&(this._isActive=m,this.cdr.markForCheck(),this.classes.forEach(C=>{m?this.renderer.addClass(this.element.nativeElement,C):this.renderer.removeClass(this.element.nativeElement,C)}),m&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(m))})}isLinkActive(m){const C=function vs(v){return!!v.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return O=>!!O.urlTree&&m.isActive(O.urlTree,C)}hasActiveLinks(){const m=this.isLinkActive(this.router);return this.link&&m(this.link)||this.links.some(m)}}return v.\u0275fac=function(m){return new(m||v)(I.Y36(Hn),I.Y36(I.SBq),I.Y36(I.Qsj),I.Y36(I.sBO),I.Y36(fa,8))},v.\u0275dir=I.lG2({type:v,selectors:[["","routerLinkActive",""]],contentQueries:function(m,C,O){if(1&m&&I.Suo(O,fa,5),2&m){let U;I.iGM(U=I.CRH())&&(C.links=U)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[I.TTD]}),v})();class Mu{}let Gc=(()=>{class v{constructor(m,C,O,U,z){this.router=m,this.injector=O,this.preloadingStrategy=U,this.loader=z}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pe.h)(m=>m instanceof us),et(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(m,C){const O=[];for(const U of C){U.providers&&!U._injector&&(U._injector=(0,I.MMx)(U.providers,m,`Route: ${U.path}`));const z=U._injector??m,he=U._loadedInjector??z;U.loadChildren&&!U._loadedRoutes&&void 0===U.canLoad||U.loadComponent&&!U._loadedComponent?O.push(this.preloadConfig(z,U)):(U.children||U._loadedRoutes)&&O.push(this.processRoutes(he,U.children??U._loadedRoutes))}return(0,j.D)(O).pipe((0,Kn.J)())}preloadConfig(m,C){return this.preloadingStrategy.preload(C,()=>{let O;O=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(m,C):(0,p.of)(null);const U=O.pipe((0,$e.z)(z=>null===z?(0,p.of)(void 0):(C._loadedRoutes=z.routes,C._loadedInjector=z.injector,this.processRoutes(z.injector??m,z.routes))));if(C.loadComponent&&!C._loadedComponent){const z=this.loader.loadComponent(C);return(0,j.D)([U,z]).pipe((0,Kn.J)())}return U})}}return v.\u0275fac=function(m){return new(m||v)(I.LFG(Hn),I.LFG(I.Sil),I.LFG(I.lqb),I.LFG(Mu),I.LFG(So))},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const au=new I.OlP("");let xo=(()=>{class v{constructor(m,C,O,U,z={}){this.urlSerializer=m,this.transitions=C,this.viewportScroller=O,this.zone=U,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(m=>{m instanceof ur?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=m.navigationTrigger,this.restoredId=m.restoredState?m.restoredState.navigationId:0):m instanceof us&&(this.lastId=m.id,this.scheduleScrollEvent(m,this.urlSerializer.parse(m.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(m=>{m instanceof ii&&(m.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(m.position):m.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(m.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(m,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ii(m,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return v.\u0275fac=function(m){I.$Z()},v.\u0275prov=I.Yz7({token:v,factory:v.\u0275fac}),v})();function Yi(v,_){return{\u0275kind:v,\u0275providers:_}}function Pn(){const v=(0,I.f3M)(I.zs3);return _=>{const m=v.get(I.z2F);if(_!==m.components[0])return;const C=v.get(Hn),O=v.get(sc);1===v.get(Ls)&&C.initialNavigation(),v.get(uu,null,I.XFs.Optional)?.setUpPreloading(),v.get(au,null,I.XFs.Optional)?.init(),C.resetRootComponentType(m.componentTypes[0]),O.closed||(O.next(),O.unsubscribe())}}const sc=new I.OlP("",{factory:()=>new ct.x}),Ls=new I.OlP("",{providedIn:"root",factory:()=>1});const uu=new I.OlP("");function ir(v){return Yi(0,[{provide:uu,useExisting:Gc},{provide:Mu,useExisting:v}])}const Ga=new I.OlP("ROUTER_FORROOT_GUARD"),za=[nt.Ye,{provide:kt,useClass:Ht},Hn,Gr,{provide:Pi,useFactory:function _s(v){return v.routerState.root},deps:[Hn]},So,[]];function Ou(){return new I.PXZ("Router",Hn)}let hi=(()=>{class v{constructor(m){}static forRoot(m,C){return{ngModule:v,providers:[za,[],{provide:ss,multi:!0,useValue:m},{provide:Ga,useFactory:Us,deps:[[Hn,new I.FiY,new I.tp0]]},{provide:Xo,useValue:C||{}},C?.useHash?{provide:nt.S$,useClass:nt.Do}:{provide:nt.S$,useClass:nt.b0},{provide:au,useFactory:()=>{const v=(0,I.f3M)(nt.EM),_=(0,I.f3M)(I.R0b),m=(0,I.f3M)(Xo),C=(0,I.f3M)(ks),O=(0,I.f3M)(kt);return m.scrollOffset&&v.setOffset(m.scrollOffset),new xo(O,C,v,_,m)}},C?.preloadingStrategy?ir(C.preloadingStrategy).\u0275providers:[],{provide:I.PXZ,multi:!0,useFactory:Ou},C?.initialNavigation?cu(C):[],[{provide:Nu,useFactory:Pn},{provide:I.tb,multi:!0,useExisting:Nu}]]}}static forChild(m){return{ngModule:v,providers:[{provide:ss,multi:!0,useValue:m}]}}}return v.\u0275fac=function(m){return new(m||v)(I.LFG(Ga,8))},v.\u0275mod=I.oAB({type:v}),v.\u0275inj=I.cJS({imports:[Zn]}),v})();function Us(v){return"guarded"}function cu(v){return["disabled"===v.initialNavigation?Yi(3,[{provide:I.ip1,multi:!0,useFactory:()=>{const _=(0,I.f3M)(Hn);return()=>{_.setUpLocationChangeListener()}}},{provide:Ls,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Yi(2,[{provide:Ls,useValue:0},{provide:I.ip1,multi:!0,deps:[I.zs3],useFactory:_=>{const m=_.get(nt.V_,Promise.resolve());return()=>m.then(()=>new Promise(O=>{const U=_.get(Hn),z=_.get(sc);(function C(O){_.get(Hn).events.pipe((0,Pe.h)(z=>z instanceof us||z instanceof qi||z instanceof Ri),(0,pt.U)(z=>z instanceof us||z instanceof qi&&(0===z.code||1===z.code)&&null),(0,Pe.h)(z=>null!==z),(0,be.q)(1)).subscribe(()=>{O()})})(()=>{O(!0)}),_.get(ks).afterPreactivation=()=>(O(!0),z.closed?(0,p.of)(void 0):z),U.initialNavigation()}))}}]).\u0275providers:[]]}const Nu=new I.OlP("")},3942:(yt,Se,V)=>{V.d(Se,{Z:()=>at});var I=V(2090),j=V(4859),p=V(9681),ae=V(1877);class ue{constructor(Oe,We){this._delegate=Oe,this.firebase=We,(0,p._addComponent)(Oe,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,p.deleteApp)(this._delegate)))}_getService(Oe,We=p._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(Oe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(ze=Qe.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:We})}_removeServiceInstance(Oe,We=p._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance(We)}_addComponent(Oe){(0,p._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,p._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function we(){const vt=function ye(vt){const Oe={},We={__esModule:!0,initializeApp:function ke(ge,Te={}){const Fe=p.initializeApp(ge,Te);if((0,I.r3)(Oe,Fe.name))return Oe[Fe.name];const ct=new vt(Fe,We);return Oe[Fe.name]=ct,ct},app:Qe,registerVersion:p.registerVersion,setLogLevel:p.setLogLevel,onLog:p.onLog,apps:null,SDK_VERSION:p.SDK_VERSION,INTERNAL:{registerComponent:function je(ge){const Te=ge.name,Fe=Te.replace("-compat","");if(p._registerComponent(ge)&&"PUBLIC"===ge.type){const ct=(nt=Qe())=>{if("function"!=typeof nt[Fe])throw _e.create("invalid-app-argument",{appName:Te});return nt[Fe]()};void 0!==ge.serviceProps&&(0,I.ZB)(ct,ge.serviceProps),We[Fe]=ct,vt.prototype[Fe]=function(...nt){return this._getService.bind(this,Te).apply(this,ge.multipleInstances?nt:[])}}return"PUBLIC"===ge.type?We[Fe]:null},removeApp:function ze(ge){delete Oe[ge]},useAsService:function it(ge,Te){return"serverAuth"===Te?null:Te},modularAPIs:p}};function Qe(ge){if(!(0,I.r3)(Oe,ge=ge||p._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:ge});return Oe[ge]}return We.default=We,Object.defineProperty(We,"apps",{get:function Ue(){return Object.keys(Oe).map(ge=>Oe[ge])}}),Qe.App=vt,We}(ue);return vt.INTERNAL=Object.assign(Object.assign({},vt.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Oe(We){(0,I.ZB)(vt,We)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),vt}(),te=new ae.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const vt=self.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=re;!function Ge(vt){(0,p.registerVersion)("@firebase/app-compat","0.2.3",vt)}()},9681:(yt,Se,V)=>{V.r(Se),V.d(Se,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Dn,_DEFAULT_ENTRY_NAME:()=>Xe,_addComponent:()=>Cn,_addOrOverwriteComponent:()=>me,_apps:()=>lt,_clearComponents:()=>pn,_components:()=>ht,_getProvider:()=>mt,_registerComponent:()=>Tt,_removeServiceInstance:()=>xt,deleteApp:()=>fr,getApp:()=>Vn,getApps:()=>_r,initializeApp:()=>Lt,onLog:()=>gt,registerVersion:()=>pr,setLogLevel:()=>sr});var I=V(5861),j=V(4859),p=V(1877),ae=V(2090),ue=V(8766);class fe{constructor(Ve){this.container=Ve}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(function _e(ut){return"VERSION"===ut.getComponent()?.type}(_t)){const kt=_t.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(_t=>_t).join(" ")}}const ye="@firebase/app",re=new p.Yd("@firebase/app"),Xe="[DEFAULT]",et={[ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,ht=new Map;function Cn(ut,Ve){try{ut.container.addComponent(Ve)}catch(_t){re.debug(`Component ${Ve.name} failed to register with FirebaseApp ${ut.name}`,_t)}}function me(ut,Ve){ut.container.addOrOverwriteComponent(Ve)}function Tt(ut){const Ve=ut.name;if(ht.has(Ve))return re.debug(`There were multiple attempts to register component ${Ve}.`),!1;ht.set(Ve,ut);for(const _t of lt.values())Cn(_t,ut);return!0}function mt(ut,Ve){const _t=ut.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),ut.container.getProvider(Ve)}function xt(ut,Ve,_t=Xe){mt(ut,Ve).clearInstance(_t)}function pn(){ht.clear()}const ln=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kn{constructor(Ve,_t,kt){this._isDeleted=!1,this._options=Object.assign({},Ve),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ve){this._isDeleted=Ve}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}const Dn="9.17.1";function Lt(ut,Ve={}){let _t=ut;"object"!=typeof Ve&&(Ve={name:Ve});const kt=Object.assign({name:Xe,automaticDataCollectionEnabled:!1},Ve),Ht=kt.name;if("string"!=typeof Ht||!Ht)throw ln.create("bad-app-name",{appName:String(Ht)});if(_t||(_t=(0,ae.aH)()),!_t)throw ln.create("no-options");const an=lt.get(Ht);if(an){if((0,ae.vZ)(_t,an.options)&&(0,ae.vZ)(kt,an.config))return an;throw ln.create("duplicate-app",{appName:Ht})}const se=new j.H0(Ht);for(const le of ht.values())se.addComponent(le);const X=new Kn(_t,kt,se);return lt.set(Ht,X),X}function Vn(ut=Xe){const Ve=lt.get(ut);if(!Ve&&ut===Xe)return Lt();if(!Ve)throw ln.create("no-app",{appName:ut});return Ve}function _r(){return Array.from(lt.values())}function fr(ut){return xn.apply(this,arguments)}function xn(){return(xn=(0,I.Z)(function*(ut){const Ve=ut.name;lt.has(Ve)&&(lt.delete(Ve),yield Promise.all(ut.container.getProviders().map(_t=>_t.delete())),ut.isDeleted=!0)})).apply(this,arguments)}function pr(ut,Ve,_t){var kt;let Ht=null!==(kt=et[ut])&&void 0!==kt?kt:ut;_t&&(Ht+=`-${_t}`);const an=Ht.match(/\s|\//),se=Ve.match(/\s|\//);if(an||se){const X=[`Unable to register library "${Ht}" with version "${Ve}":`];return an&&X.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),an&&se&&X.push("and"),se&&X.push(`version name "${Ve}" contains illegal characters (whitespace or "/")`),void re.warn(X.join(" "))}Tt(new j.wA(`${Ht}-version`,()=>({library:Ht,version:Ve}),"VERSION"))}function gt(ut,Ve){if(null!==ut&&"function"!=typeof ut)throw ln.create("invalid-log-argument");(0,p.Am)(ut,Ve)}function sr(ut){(0,p.Ub)(ut)}const tr="firebase-heartbeat-store";let Yt=null;function Pt(){return Yt||(Yt=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(ut,Ve)=>{0===Ve&&ut.createObjectStore(tr)}}).catch(ut=>{throw ln.create("idb-open",{originalErrorMessage:ut.message})})),Yt}function zt(){return(zt=(0,I.Z)(function*(ut){try{return(yield Pt()).transaction(tr).objectStore(tr).get($n(ut))}catch(Ve){if(Ve instanceof ae.ZR)re.warn(Ve.message);else{const _t=ln.create("idb-get",{originalErrorMessage:Ve?.message});re.warn(_t.message)}}})).apply(this,arguments)}function _n(ut,Ve){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,I.Z)(function*(ut,Ve){try{const kt=(yield Pt()).transaction(tr,"readwrite");return yield kt.objectStore(tr).put(Ve,$n(ut)),kt.done}catch(_t){if(_t instanceof ae.ZR)re.warn(_t.message);else{const kt=ln.create("idb-set",{originalErrorMessage:_t?.message});re.warn(kt.message)}}})).apply(this,arguments)}function $n(ut){return`${ut.name}!${ut.options.appId}`}class ti{constructor(Ve){this.container=Ve,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new qt(_t),this._heartbeatsCachePromise=this._storage.read().then(kt=>(this._heartbeatsCache=kt,kt))}triggerHeartbeat(){var Ve=this;return(0,I.Z)(function*(){const kt=Ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ht=nn();if(null===Ve._heartbeatsCache&&(Ve._heartbeatsCache=yield Ve._heartbeatsCachePromise),Ve._heartbeatsCache.lastSentHeartbeatDate!==Ht&&!Ve._heartbeatsCache.heartbeats.some(an=>an.date===Ht))return Ve._heartbeatsCache.heartbeats.push({date:Ht,agent:kt}),Ve._heartbeatsCache.heartbeats=Ve._heartbeatsCache.heartbeats.filter(an=>{const se=new Date(an.date).valueOf();return Date.now()-se<=2592e6}),Ve._storage.overwrite(Ve._heartbeatsCache)})()}getHeartbeatsHeader(){var Ve=this;return(0,I.Z)(function*(){if(null===Ve._heartbeatsCache&&(yield Ve._heartbeatsCachePromise),null===Ve._heartbeatsCache||0===Ve._heartbeatsCache.heartbeats.length)return"";const _t=nn(),{heartbeatsToSend:kt,unsentEntries:Ht}=function ni(ut,Ve=1024){const _t=[];let kt=ut.slice();for(const Ht of ut){const an=_t.find(se=>se.agent===Ht.agent);if(an){if(an.dates.push(Ht.date),Ut(_t)>Ve){an.dates.pop();break}}else if(_t.push({agent:Ht.agent,dates:[Ht.date]}),Ut(_t)>Ve){_t.pop();break}kt=kt.slice(1)}return{heartbeatsToSend:_t,unsentEntries:kt}}(Ve._heartbeatsCache.heartbeats),an=(0,ae.L)(JSON.stringify({version:2,heartbeats:kt}));return Ve._heartbeatsCache.lastSentHeartbeatDate=_t,Ht.length>0?(Ve._heartbeatsCache.heartbeats=Ht,yield Ve._storage.overwrite(Ve._heartbeatsCache)):(Ve._heartbeatsCache.heartbeats=[],Ve._storage.overwrite(Ve._heartbeatsCache)),an})()}}function nn(){return(new Date).toISOString().substring(0,10)}class qt{constructor(Ve){this.app=Ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ve=this;return(0,I.Z)(function*(){return(yield Ve._canUseIndexedDBPromise)&&(yield function Nt(ut){return zt.apply(this,arguments)}(Ve.app))||{heartbeats:[]}})()}overwrite(Ve){var _t=this;return(0,I.Z)(function*(){var kt;if(yield _t._canUseIndexedDBPromise){const an=yield _t.read();return _n(_t.app,{lastSentHeartbeatDate:null!==(kt=Ve.lastSentHeartbeatDate)&&void 0!==kt?kt:an.lastSentHeartbeatDate,heartbeats:Ve.heartbeats})}})()}add(Ve){var _t=this;return(0,I.Z)(function*(){var kt;if(yield _t._canUseIndexedDBPromise){const an=yield _t.read();return _n(_t.app,{lastSentHeartbeatDate:null!==(kt=Ve.lastSentHeartbeatDate)&&void 0!==kt?kt:an.lastSentHeartbeatDate,heartbeats:[...an.heartbeats,...Ve.heartbeats]})}})()}}function Ut(ut){return(0,ae.L)(JSON.stringify({version:2,heartbeats:ut})).length}!function Un(ut){Tt(new j.wA("platform-logger",Ve=>new fe(Ve),"PRIVATE")),Tt(new j.wA("heartbeat",Ve=>new ti(Ve),"PRIVATE")),pr(ye,"0.9.3",ut),pr(ye,"0.9.3","esm2017"),pr("fire-js","")}("")},4859:(yt,Se,V)=>{V.d(Se,{H0:()=>ye,wA:()=>p});var I=V(5861),j=V(2090);class p{constructor(re,te,ce){this.name=re,this.instanceFactory=te,this.type=ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const ae="[DEFAULT]";class ue{constructor(re,te){this.name=re,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const te=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(te)){const ce=new j.BH;if(this.instancesDeferred.set(te,ce),this.isInitialized(te)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:te});Je&&ce.resolve(Je)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(re){var te;const ce=this.normalizeInstanceIdentifier(re?.identifier),Je=null!==(te=re?.optional)&&void 0!==te&&te;if(!this.isInitialized(ce)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ce})}catch(Ge){if(Je)return null;throw Ge}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function _e(we){return"EAGER"===we.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[te,ce]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(te);try{const Ge=this.getOrInitializeService({instanceIdentifier:Je});ce.resolve(Ge)}catch{}}}}clearInstance(re=ae){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,I.Z)(function*(){const te=Array.from(re.instances.values());yield Promise.all([...te.filter(ce=>"INTERNAL"in ce).map(ce=>ce.INTERNAL.delete()),...te.filter(ce=>"_delete"in ce).map(ce=>ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=ae){return this.instances.has(re)}getOptions(re=ae){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:te={}}=re,ce=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(ce))throw Error(`${this.name}(${ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:ce,options:te});for(const[Ge,at]of this.instancesDeferred.entries())ce===this.normalizeInstanceIdentifier(Ge)&&at.resolve(Je);return Je}onInit(re,te){var ce;const Je=this.normalizeInstanceIdentifier(te),Ge=null!==(ce=this.onInitCallbacks.get(Je))&&void 0!==ce?ce:new Set;Ge.add(re),this.onInitCallbacks.set(Je,Ge);const at=this.instances.get(Je);return at&&re(at,Je),()=>{Ge.delete(re)}}invokeOnInitCallbacks(re,te){const ce=this.onInitCallbacks.get(te);if(ce)for(const Je of ce)try{Je(re,te)}catch{}}getOrInitializeService({instanceIdentifier:re,options:te={}}){let ce=this.instances.get(re);if(!ce&&this.component&&(ce=this.component.instanceFactory(this.container,{instanceIdentifier:(we=re,we===ae?void 0:we),options:te}),this.instances.set(re,ce),this.instancesOptions.set(re,te),this.invokeOnInitCallbacks(ce,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,ce)}catch{}var we;return ce||null}normalizeInstanceIdentifier(re=ae){return this.component?this.component.multipleInstances?re:ae:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const te=this.getProvider(re.name);if(te.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);te.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const te=new ue(re,this);return this.providers.set(re,te),te}getProviders(){return Array.from(this.providers.values())}}},1877:(yt,Se,V)=>{V.d(Se,{Am:()=>we,Ub:()=>ye,Yd:()=>_e,in:()=>j});const I=[];var j=(()=>{return(re=j||(j={}))[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",j;var re})();const p={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ae=j.INFO,ue={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},fe=(re,te,...ce)=>{if(te<re.logLevel)return;const Je=(new Date).toISOString(),Ge=ue[te];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[Ge](`[${Je}]  ${re.name}:`,...ce)};class _e{constructor(te){this.name=te,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in j))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?p[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...te),this._logHandler(this,j.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...te),this._logHandler(this,j.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,j.INFO,...te),this._logHandler(this,j.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,j.WARN,...te),this._logHandler(this,j.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...te),this._logHandler(this,j.ERROR,...te)}}function ye(re){I.forEach(te=>{te.setLogLevel(re)})}function we(re,te){for(const ce of I){let Je=null;te&&te.level&&(Je=p[te.level]),ce.userLogHandler=null===re?null:(Ge,at,...vt)=>{const Oe=vt.map(We=>{if(null==We)return null;if("string"==typeof We)return We;if("number"==typeof We||"boolean"==typeof We)return We.toString();if(We instanceof Error)return We.message;try{return JSON.stringify(We)}catch{return null}}).filter(We=>We).join(" ");at>=(Je??Ge.logLevel)&&re({level:j[at].toLowerCase(),message:Oe,args:vt,type:Ge.name})}}}},259:(yt,Se,V)=>{V.d(Se,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=V(9681);(0,I.registerVersion)("firebase","9.17.1","app")},9260:(yt,Se,V)=>{V.d(Se,{Z:()=>I.Z});var I=V(3942);I.Z.registerVersion("firebase","9.17.1","app-compat")},9568:(yt,Se,V)=>{V.r(Se);var I=V(5861),j=V(3942),p=V(2722),ae=V(2090),_e=(V(9681),V(1877),V(4859));function ye(){return window}function te(){return(te=(0,I.Z)(function*(Y,G,K){var De;const{BuildInfo:Ke}=ye();(0,p.ap)(G.sessionId,"AuthEvent did not contain a session ID");const St=yield We(G.sessionId),oe={};return(0,p.aq)()?oe.ibi=Ke.packageName:(0,p.ar)()?oe.apn=Ke.packageName:(0,p.as)(Y,"operation-not-supported-in-this-environment"),Ke.displayName&&(oe.appDisplayName=Ke.displayName),oe.sessionId=St,(0,p.at)(Y,K,G.type,void 0,null!==(De=G.eventId)&&void 0!==De?De:void 0,oe)})).apply(this,arguments)}function Je(){return(Je=(0,I.Z)(function*(Y){const{BuildInfo:G}=ye(),K={};(0,p.aq)()?K.iosBundleId=G.packageName:(0,p.ar)()?K.androidPackageName=G.packageName:(0,p.as)(Y,"operation-not-supported-in-this-environment"),yield(0,p.au)(Y,K)})).apply(this,arguments)}function vt(){return(vt=(0,I.Z)(function*(Y,G,K){const{cordova:De}=ye();let Ke=()=>{};try{yield new Promise((St,oe)=>{let ie=null;function q(){var st;St();const Zt=null===(st=De.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Zt&&Zt(),"function"==typeof K?.close&&K.close()}function ve(){ie||(ie=window.setTimeout(()=>{oe((0,p.aw)(Y,"redirect-cancelled-by-user"))},2e3))}function Ze(){"visible"===document?.visibilityState&&ve()}G.addPassiveListener(q),document.addEventListener("resume",ve,!1),(0,p.ar)()&&document.addEventListener("visibilitychange",Ze,!1),Ke=()=>{G.removePassiveListener(q),document.removeEventListener("resume",ve,!1),document.removeEventListener("visibilitychange",Ze,!1),ie&&window.clearTimeout(ie)}})}finally{Ke()}})).apply(this,arguments)}function We(Y){return ze.apply(this,arguments)}function ze(){return(ze=(0,I.Z)(function*(Y){const G=Qe(Y),K=yield crypto.subtle.digest("SHA-256",G);return Array.from(new Uint8Array(K)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Qe(Y){if((0,p.ap)(/[0-9a-zA-Z]+/.test(Y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Y);const G=new ArrayBuffer(Y.length),K=new Uint8Array(G);for(let De=0;De<Y.length;De++)K[De]=Y.charCodeAt(De);return K}class Ue extends p.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(G=>{this.resolveInialized=G})}addPassiveListener(G){this.passiveListeners.add(G)}removePassiveListener(G){this.passiveListeners.delete(G)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(G){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(G)),super.onEvent(G)}initialized(){var G=this;return(0,I.Z)(function*(){yield G.initPromise})()}}function ge(Y){return Te.apply(this,arguments)}function Te(){return(Te=(0,I.Z)(function*(Y){const G=yield nt()._get(pt(Y));return G&&(yield nt()._remove(pt(Y))),G})).apply(this,arguments)}function ct(){const Y=[],G="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const De=Math.floor(Math.random()*G.length);Y.push(G.charAt(De))}return Y.join("")}function nt(){return(0,p.az)(p.b)}function pt(Y){return(0,p.aA)("authEvent",Y.config.apiKey,Y.name)}function Me(Y){if(!Y?.includes("?"))return{};const[G,...K]=Y.split("?");return(0,ae.zd)(K.join("?"))}const Xe=class $e{constructor(){this._redirectPersistence=p.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=p.aB,this._overrideRedirectResult=p.aC}_initialize(G){var K=this;return(0,I.Z)(function*(){const De=G._key();let Ke=K.eventManagers.get(De);return Ke||(Ke=new Ue(G),K.eventManagers.set(De,Ke),K.attachCallbackListeners(G,Ke)),Ke})()}_openPopup(G){(0,p.as)(G,"operation-not-supported-in-this-environment")}_openRedirect(G,K,De,Ke){var St=this;return(0,I.Z)(function*(){!function Oe(Y){var G,K,De,Ke,St,oe,ie,q,ve,Ze;const st=ye();(0,p.ax)("function"==typeof(null===(G=st?.universalLinks)||void 0===G?void 0:G.subscribe),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,p.ax)(typeof(null===(K=st?.BuildInfo)||void 0===K?void 0:K.packageName)<"u",Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,p.ax)("function"==typeof(null===(St=null===(Ke=null===(De=st?.cordova)||void 0===De?void 0:De.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===St?void 0:St.openUrl),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,p.ax)("function"==typeof(null===(q=null===(ie=null===(oe=st?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===q?void 0:q.isAvailable),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,p.ax)("function"==typeof(null===(Ze=null===(ve=st?.cordova)||void 0===ve?void 0:ve.InAppBrowser)||void 0===Ze?void 0:Ze.open),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(G);const oe=yield St._initialize(G);yield oe.initialized(),oe.resetRedirect(),(0,p.aD)(),yield St._originValidation(G);const ie=function je(Y,G,K=null){return{type:G,eventId:K,urlResponse:null,sessionId:ct(),postBody:null,tenantId:Y.tenantId,error:(0,p.aw)(Y,"no-auth-event")}}(G,De,Ke);yield function it(Y,G){return nt()._set(pt(Y),G)}(G,ie);const q=yield function re(Y,G,K){return te.apply(this,arguments)}(G,ie,K),ve=yield function Ge(Y){const{cordova:G}=ye();return new Promise(K=>{G.plugins.browsertab.isAvailable(De=>{let Ke=null;De?G.plugins.browsertab.openUrl(Y):Ke=G.InAppBrowser.open(Y,(0,p.av)()?"_blank":"_system","location=yes"),K(Ke)})})}(q);return function at(Y,G,K){return vt.apply(this,arguments)}(G,oe,ve)})()}_isIframeWebStorageSupported(G,K){throw new Error("Method not implemented.")}_originValidation(G){const K=G._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function ce(Y){return Je.apply(this,arguments)}(G)),this.originValidationPromises[K]}attachCallbackListeners(G,K){const{universalLinks:De,handleOpenURL:Ke,BuildInfo:St}=ye(),oe=setTimeout((0,I.Z)(function*(){yield ge(G),K.onEvent(et())}),500),ie=function(){var Ze=(0,I.Z)(function*(st){clearTimeout(oe);const Zt=yield ge(G);let nr=null;Zt&&st?.url&&(nr=function Fe(Y,G){var K,De;const Ke=function be(Y){const G=Me(Y),K=G.link?decodeURIComponent(G.link):void 0,De=Me(K).link,Ke=G.deep_link_id?decodeURIComponent(G.deep_link_id):void 0;return Me(Ke).link||Ke||De||K||Y}(G);if(Ke.includes("/__/auth/callback")){const St=Me(Ke),oe=St.firebaseError?function dt(Y){try{return JSON.parse(Y)}catch{return null}}(decodeURIComponent(St.firebaseError)):null,ie=null===(De=null===(K=oe?.code)||void 0===K?void 0:K.split("auth/"))||void 0===De?void 0:De[1],q=ie?(0,p.aw)(ie):null;return q?{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,error:q,urlResponse:null,sessionId:null,postBody:null}:{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,sessionId:Y.sessionId,urlResponse:Ke,postBody:null}}return null}(Zt,st.url)),K.onEvent(nr||et())});return function(Zt){return Ze.apply(this,arguments)}}();typeof De<"u"&&"function"==typeof De.subscribe&&De.subscribe(null,ie);const q=Ke,ve=`${St.packageName.toLowerCase()}://`;ye().handleOpenURL=function(){var Ze=(0,I.Z)(function*(st){if(st.toLowerCase().startsWith(ve)&&ie({url:st}),"function"==typeof q)try{q(st)}catch(Zt){console.error(Zt)}});return function(st){return Ze.apply(this,arguments)}}()}};function et(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,p.aw)("no-auth-event")}}function Tt(){var Y;return(null===(Y=self?.location)||void 0===Y?void 0:Y.protocol)||null}function xt(Y=(0,ae.z$)()){return!("file:"!==Tt()&&"ionic:"!==Tt()&&"capacitor:"!==Tt()||!Y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dn(){try{const Y=self.localStorage,G=p.aI();if(Y)return Y.setItem(G,"1"),Y.removeItem(G),!function Kn(Y=(0,ae.z$)()){return function Ln(){return(0,ae.w1)()&&11===document?.documentMode}()||function ln(Y=(0,ae.z$)()){return/Edge\/\d+/.test(Y)}(Y)}()||(0,ae.hl)()}catch{return Lt()&&(0,ae.hl)()}return!1}function Lt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function mt(){return"http:"===Tt()||"https:"===Tt()}()||(0,ae.ru)()||xt())&&!function pn(){return(0,ae.b$)()||(0,ae.UG)()}()&&Dn()&&!Lt()}function _r(){return xt()&&typeof document<"u"}function xn(){return(xn=(0,I.Z)(function*(){return!!_r()&&new Promise(Y=>{const G=setTimeout(()=>{Y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(G),Y(!0)})})})).apply(this,arguments)}const gt={LOCAL:"local",NONE:"none",SESSION:"session"},sr=p.ax,Er="persistence";function tr(Y){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,I.Z)(function*(Y){yield Y._initializationPromise;const G=Nt(),K=p.aA(Er,Y.config.apiKey,Y.name);G&&G.setItem(K,Y._getPersistence())})).apply(this,arguments)}function Nt(){var Y;try{return(null===(Y=function pr(){return typeof window<"u"?window:null}())||void 0===Y?void 0:Y.sessionStorage)||null}catch{return null}}const zt=p.ax;class _n{constructor(){this.browserResolver=p.az(p.k),this.cordovaResolver=p.az(Xe),this.underlyingResolver=null,this._redirectPersistence=p.a,this._completeRedirectFn=p.aB,this._overrideRedirectResult=p.aC}_initialize(G){var K=this;return(0,I.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(G)})()}_openPopup(G,K,De,Ke){var St=this;return(0,I.Z)(function*(){return yield St.selectUnderlyingResolver(),St.assertedUnderlyingResolver._openPopup(G,K,De,Ke)})()}_openRedirect(G,K,De,Ke){var St=this;return(0,I.Z)(function*(){return yield St.selectUnderlyingResolver(),St.assertedUnderlyingResolver._openRedirect(G,K,De,Ke)})()}_isIframeWebStorageSupported(G,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(G,K)}_originValidation(G){return this.assertedUnderlyingResolver._originValidation(G)}get _shouldInitProactively(){return _r()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var G=this;return(0,I.Z)(function*(){if(G.underlyingResolver)return;const K=yield function fr(){return xn.apply(this,arguments)}();G.underlyingResolver=K?G.cordovaResolver:G.browserResolver})()}}function Mn(Y){return Y.unwrap()}function Br(Y){return ti(Y)}function ti(Y){const{_tokenResponse:G}=Y instanceof ae.ZR?Y.customData:Y;if(!G)return null;if(!(Y instanceof ae.ZR)&&"temporaryProof"in G&&"phoneNumber"in G)return p.P.credentialFromResult(Y);const K=G.providerId;if(!K||K===p.o.PASSWORD)return null;let De;switch(K){case p.o.GOOGLE:De=p.Q;break;case p.o.FACEBOOK:De=p.N;break;case p.o.GITHUB:De=p.T;break;case p.o.TWITTER:De=p.W;break;default:const{oauthIdToken:Ke,oauthAccessToken:St,oauthTokenSecret:oe,pendingToken:ie,nonce:q}=G;return St||oe||Ke||ie?ie?K.startsWith("saml.")?p.aL._create(K,ie):p.J._fromParams({providerId:K,signInMethod:K,pendingToken:ie,idToken:Ke,accessToken:St}):new p.U(K).credential({idToken:Ke,accessToken:St,rawNonce:q}):null}return Y instanceof ae.ZR?De.credentialFromError(Y):De.credentialFromResult(Y)}function nn(Y,G){return G.catch(K=>{throw K instanceof ae.ZR&&function Xn(Y,G){var K;const De=null===(K=G.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===G?.code)G.resolver=new Ut(Y,p.an(Y,G));else if(De){const Ke=ti(G),St=G;Ke&&(St.credential=Ke,St.tenantId=De.tenantId||void 0,St.email=De.email||void 0,St.phoneNumber=De.phoneNumber||void 0)}}(Y,K),K}).then(K=>{const Ke=K.user;return{operationType:K.operationType,credential:Br(K),additionalUserInfo:p.al(K),user:Un.getOrCreate(Ke)}})}function ni(Y,G){return qt.apply(this,arguments)}function qt(){return(qt=(0,I.Z)(function*(Y,G){const K=yield G;return{verificationId:K.verificationId,confirm:De=>nn(Y,K.confirm(De))}})).apply(this,arguments)}class Ut{constructor(G,K){this.resolver=K,this.auth=function $n(Y){return Y.wrapped()}(G)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(G){return nn(Mn(this.auth),this.resolver.resolveSignIn(G))}}class Un{constructor(G){this._delegate=G,this.multiFactor=p.ao(G)}static getOrCreate(G){return Un.USER_MAP.has(G)||Un.USER_MAP.set(G,new Un(G)),Un.USER_MAP.get(G)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(G){return this._delegate.getIdTokenResult(G)}getIdToken(G){return this._delegate.getIdToken(G)}linkAndRetrieveDataWithCredential(G){return this.linkWithCredential(G)}linkWithCredential(G){var K=this;return(0,I.Z)(function*(){return nn(K.auth,p.Z(K._delegate,G))})()}linkWithPhoneNumber(G,K){var De=this;return(0,I.Z)(function*(){return ni(De.auth,p.l(De._delegate,G,K))})()}linkWithPopup(G){var K=this;return(0,I.Z)(function*(){return nn(K.auth,p.d(K._delegate,G,_n))})()}linkWithRedirect(G){var K=this;return(0,I.Z)(function*(){return yield tr(p.aE(K.auth)),p.g(K._delegate,G,_n)})()}reauthenticateAndRetrieveDataWithCredential(G){return this.reauthenticateWithCredential(G)}reauthenticateWithCredential(G){var K=this;return(0,I.Z)(function*(){return nn(K.auth,p._(K._delegate,G))})()}reauthenticateWithPhoneNumber(G,K){return ni(this.auth,p.r(this._delegate,G,K))}reauthenticateWithPopup(G){return nn(this.auth,p.e(this._delegate,G,_n))}reauthenticateWithRedirect(G){var K=this;return(0,I.Z)(function*(){return yield tr(p.aE(K.auth)),p.h(K._delegate,G,_n)})()}sendEmailVerification(G){return p.ab(this._delegate,G)}unlink(G){var K=this;return(0,I.Z)(function*(){return yield p.ak(K._delegate,G),K})()}updateEmail(G){return p.ag(this._delegate,G)}updatePassword(G){return p.ah(this._delegate,G)}updatePhoneNumber(G){return p.u(this._delegate,G)}updateProfile(G){return p.af(this._delegate,G)}verifyBeforeUpdateEmail(G,K){return p.ac(this._delegate,G,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Un.USER_MAP=new WeakMap;const ut=p.ax;let Ve=(()=>{class Y{constructor(K,De){if(this.app=K,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=K.options;ut(Ke,"invalid-api-key",{appName:K.name}),ut(Ke,"invalid-api-key",{appName:K.name});const St=typeof window<"u"?_n:void 0;this._delegate=De.initialize({options:{persistence:kt(Ke,K.name),popupRedirectResolver:St}}),this._delegate._updateErrorMap(p.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Un.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,De){p.G(this._delegate,K,De)}applyActionCode(K){return p.a2(this._delegate,K)}checkActionCode(K){return p.a3(this._delegate,K)}confirmPasswordReset(K,De){return p.a1(this._delegate,K,De)}createUserWithEmailAndPassword(K,De){var Ke=this;return(0,I.Z)(function*(){return nn(Ke._delegate,p.a5(Ke._delegate,K,De))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return p.aa(this._delegate,K)}isSignInWithEmailLink(K){return p.a8(this._delegate,K)}getRedirectResult(){var K=this;return(0,I.Z)(function*(){ut(Vn(),K._delegate,"operation-not-supported-in-this-environment");const De=yield p.j(K._delegate,_n);return De?nn(K._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function lt(Y,G){(0,p.aE)(Y)._logFramework(G)}(this._delegate,K)}onAuthStateChanged(K,De,Ke){const{next:St,error:oe,complete:ie}=_t(K,De,Ke);return this._delegate.onAuthStateChanged(St,oe,ie)}onIdTokenChanged(K,De,Ke){const{next:St,error:oe,complete:ie}=_t(K,De,Ke);return this._delegate.onIdTokenChanged(St,oe,ie)}sendSignInLinkToEmail(K,De){return p.a7(this._delegate,K,De)}sendPasswordResetEmail(K,De){return p.a0(this._delegate,K,De||void 0)}setPersistence(K){var De=this;return(0,I.Z)(function*(){let Ke;switch(function Jn(Y,G){sr(Object.values(gt).includes(G),Y,"invalid-persistence-type"),(0,ae.b$)()?sr(G!==gt.SESSION,Y,"unsupported-persistence-type"):(0,ae.UG)()?sr(G===gt.NONE,Y,"unsupported-persistence-type"):Lt()?sr(G===gt.NONE||G===gt.LOCAL&&(0,ae.hl)(),Y,"unsupported-persistence-type"):sr(G===gt.NONE||Dn(),Y,"unsupported-persistence-type")}(De._delegate,K),K){case gt.SESSION:Ke=p.a;break;case gt.LOCAL:Ke=(yield p.az(p.i)._isAvailable())?p.i:p.b;break;case gt.NONE:Ke=p.L;break;default:return p.as("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return nn(this._delegate,p.X(this._delegate))}signInWithCredential(K){return nn(this._delegate,p.Y(this._delegate,K))}signInWithCustomToken(K){return nn(this._delegate,p.$(this._delegate,K))}signInWithEmailAndPassword(K,De){return nn(this._delegate,p.a6(this._delegate,K,De))}signInWithEmailLink(K,De){return nn(this._delegate,p.a9(this._delegate,K,De))}signInWithPhoneNumber(K,De){return ni(this._delegate,p.s(this._delegate,K,De))}signInWithPopup(K){var De=this;return(0,I.Z)(function*(){return ut(Vn(),De._delegate,"operation-not-supported-in-this-environment"),nn(De._delegate,p.c(De._delegate,K,_n))})()}signInWithRedirect(K){var De=this;return(0,I.Z)(function*(){return ut(Vn(),De._delegate,"operation-not-supported-in-this-environment"),yield tr(De._delegate),p.f(De._delegate,K,_n)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return p.a4(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Y.Persistence=gt,Y})();function _t(Y,G,K){let De=Y;"function"!=typeof Y&&({next:De,error:G,complete:K}=Y);const Ke=De;return{next:oe=>Ke(oe&&Un.getOrCreate(oe)),error:G,complete:K}}function kt(Y,G){const K=function Pt(Y,G){const K=Nt();if(!K)return[];const De=p.aA(Er,Y,G);switch(K.getItem(De)){case gt.NONE:return[p.L];case gt.LOCAL:return[p.i,p.a];case gt.SESSION:return[p.a];default:return[]}}(Y,G);if(typeof self<"u"&&!K.includes(p.i)&&K.push(p.i),typeof window<"u")for(const De of[p.b,p.a])K.includes(De)||K.push(De);return K.includes(p.L)||K.push(p.L),K}class Ht{constructor(){this.providerId="phone",this._delegate=new p.P(Mn(j.Z.auth()))}static credential(G,K){return p.P.credential(G,K)}verifyPhoneNumber(G,K){return this._delegate.verifyPhoneNumber(G,K)}unwrap(){return this._delegate}}Ht.PHONE_SIGN_IN_METHOD=p.P.PHONE_SIGN_IN_METHOD,Ht.PROVIDER_ID=p.P.PROVIDER_ID;const an=p.ax;class se{constructor(G,K,De=j.Z.app()){var Ke;an(null===(Ke=De.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new p.R(G,K,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function le(Y){Y.INTERNAL.registerComponent(new _e.wA("auth-compat",G=>{const K=G.getProvider("app-compat").getImmediate(),De=G.getProvider("auth");return new Ve(K,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:p.A.EMAIL_SIGNIN,PASSWORD_RESET:p.A.PASSWORD_RESET,RECOVER_EMAIL:p.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:p.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:p.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:p.A.VERIFY_EMAIL}},EmailAuthProvider:p.M,FacebookAuthProvider:p.N,GithubAuthProvider:p.T,GoogleAuthProvider:p.Q,OAuthProvider:p.U,SAMLAuthProvider:p.V,PhoneAuthProvider:Ht,PhoneMultiFactorGenerator:p.m,RecaptchaVerifier:se,TwitterAuthProvider:p.W,Auth:Ve,AuthCredential:p.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Y.registerVersion("@firebase/auth-compat","0.3.3")}(j.Z)},8766:(yt,Se,V)=>{V.d(Se,{Lj:()=>ke,X3:()=>Qe});var I=V(5861);let p,ae;const _e=new WeakMap,ye=new WeakMap,we=new WeakMap,re=new WeakMap,te=new WeakMap;let Ge={get(Te,Fe,ct){if(Te instanceof IDBTransaction){if("done"===Fe)return ye.get(Te);if("objectStoreNames"===Fe)return Te.objectStoreNames||we.get(Te);if("store"===Fe)return ct.objectStoreNames[1]?void 0:ct.objectStore(ct.objectStoreNames[0])}return We(Te[Fe])},set:(Te,Fe,ct)=>(Te[Fe]=ct,!0),has:(Te,Fe)=>Te instanceof IDBTransaction&&("done"===Fe||"store"===Fe)||Fe in Te};function Oe(Te){return"function"==typeof Te?function vt(Te){return Te!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Te)?function(...Fe){return Te.apply(ze(this),Fe),We(_e.get(this))}:function(...Fe){return We(Te.apply(ze(this),Fe))}:function(Fe,...ct){const nt=Te.call(ze(this),Fe,...ct);return we.set(nt,Fe.sort?Fe.sort():[Fe]),We(nt)}}(Te):(Te instanceof IDBTransaction&&function Je(Te){if(ye.has(Te))return;const Fe=new Promise((ct,nt)=>{const pt=()=>{Te.removeEventListener("complete",dt),Te.removeEventListener("error",be),Te.removeEventListener("abort",be)},dt=()=>{ct(),pt()},be=()=>{nt(Te.error||new DOMException("AbortError","AbortError")),pt()};Te.addEventListener("complete",dt),Te.addEventListener("error",be),Te.addEventListener("abort",be)});ye.set(Te,Fe)}(Te),((Te,Fe)=>Fe.some(ct=>Te instanceof ct))(Te,function ue(){return p||(p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Te,Ge):Te)}function We(Te){if(Te instanceof IDBRequest)return function ce(Te){const Fe=new Promise((ct,nt)=>{const pt=()=>{Te.removeEventListener("success",dt),Te.removeEventListener("error",be)},dt=()=>{ct(We(Te.result)),pt()},be=()=>{nt(Te.error),pt()};Te.addEventListener("success",dt),Te.addEventListener("error",be)});return Fe.then(ct=>{ct instanceof IDBCursor&&_e.set(ct,Te)}).catch(()=>{}),te.set(Fe,Te),Fe}(Te);if(re.has(Te))return re.get(Te);const Fe=Oe(Te);return Fe!==Te&&(re.set(Te,Fe),te.set(Fe,Te)),Fe}const ze=Te=>te.get(Te);function Qe(Te,Fe,{blocked:ct,upgrade:nt,blocking:pt,terminated:dt}={}){const be=indexedDB.open(Te,Fe),Me=We(be);return nt&&be.addEventListener("upgradeneeded",Pe=>{nt(We(be.result),Pe.oldVersion,Pe.newVersion,We(be.transaction))}),ct&&be.addEventListener("blocked",()=>ct()),Me.then(Pe=>{dt&&Pe.addEventListener("close",()=>dt()),pt&&Pe.addEventListener("versionchange",()=>pt())}).catch(()=>{}),Me}function ke(Te,{blocked:Fe}={}){const ct=indexedDB.deleteDatabase(Te);return Fe&&ct.addEventListener("blocked",()=>Fe()),We(ct).then(()=>{})}const Ue=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],it=new Map;function ge(Te,Fe){if(!(Te instanceof IDBDatabase)||Fe in Te||"string"!=typeof Fe)return;if(it.get(Fe))return it.get(Fe);const ct=Fe.replace(/FromIndex$/,""),nt=Fe!==ct,pt=je.includes(ct);if(!(ct in(nt?IDBIndex:IDBObjectStore).prototype)||!pt&&!Ue.includes(ct))return;const dt=function(){var be=(0,I.Z)(function*(Me,...Pe){const $e=this.transaction(Me,pt?"readwrite":"readonly");let Xe=$e.store;return nt&&(Xe=Xe.index(Pe.shift())),(yield Promise.all([Xe[ct](...Pe),pt&&$e.done]))[0]});return function(Pe){return be.apply(this,arguments)}}();return it.set(Fe,dt),dt}!function at(Te){Ge=Te(Ge)}(Te=>({...Te,get:(Fe,ct,nt)=>ge(Fe,ct)||Te.get(Fe,ct,nt),has:(Fe,ct)=>!!ge(Fe,ct)||Te.has(Fe,ct)}))},5861:(yt,Se,V)=>{function I(p,ae,ue,fe,_e,ye,we){try{var re=p[ye](we),te=re.value}catch(ce){return void ue(ce)}re.done?ae(te):Promise.resolve(te).then(fe,_e)}function j(p){return function(){var ae=this,ue=arguments;return new Promise(function(fe,_e){var ye=p.apply(ae,ue);function we(te){I(ye,fe,_e,we,re,"next",te)}function re(te){I(ye,fe,_e,we,re,"throw",te)}we(void 0)})}}V.d(Se,{Z:()=>j})}},yt=>{yt(yt.s=2899)}]);